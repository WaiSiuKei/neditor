var rB=Object.defineProperty;var iB=(r,e,t)=>e in r?rB(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var c=(r,e,t)=>(iB(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const Pp=0,rn=1,Rp=2;function _i(r,...e){console.log(...e)}function Ec(r,...e){console.log(...e)}function nB(r,e,...t){e&&console.log(t)}function et(...r){throw r.length&&console.error(...r),new Error("not reached")}function Ue(...r){throw r.length&&console.error(...r),new Error("not implemented")}function Fx(r){return typeof r>"u"}function Ti(r){return Fx(r)||r===null}const ao=r=>typeof r=="string",Mx=r=>typeof r=="number",yA=r=>typeof r=="function",Id=r=>r!==null&&typeof r=="object",sB=Array.isArray;function nu(r){return Fx(r)||r===null}function bn(r){if(nu(r))throw new Error("Assertion Failed: argument is undefined or null");return r}function Hn(r){if(nu(r))throw new Error("Assertion Failed: argument is undefined or null")}function oB(r){if(!(r instanceof Error))throw r}function Dp(r){return r===null?void 0:r}function aB(r,e){let t=r.length;if(t===0)return-1;for(let i=0;i<t;i++)if(e(r[i]))return i;return-1}function vA(r){return r.filter(e=>!!e)}function lB(r,e){if(!e)return r.filter((i,s)=>r.indexOf(i)===s);const t=Object.create(null);return r.filter(i=>{const s=e(i);return t[s]?!1:(t[s]=!0,!0)})}function tO(r,e,t=(i,s)=>i===s){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let i=0,s=r.length;i<s;i++)if(!t(r[i],e[i]))return!1;return!0}function yo(r,e=0){return r[r.length-(1+e)]}function uB(r,e){return r.push(e),()=>cB(r,e)}function cB(r,e){const t=r.indexOf(e);if(t>-1)return r.splice(t,1),e}let o0;const sE="__$$diMap";if(Reflect.has(globalThis,sE))o0=Reflect.get(globalThis,sE);else{const r=new Map;o0=r,Reflect.set(globalThis,sE,r)}let Cp;const oE="__$$idMap";if(Reflect.has(globalThis,oE))Cp=Reflect.get(globalThis,oE);else{const r=new Map;Cp=r,Reflect.set(globalThis,oE,r)}function PT(r){const e=r.name;return o0.get(e)||[]}const pl=an("instantiationService");function hB(r,e,t,i){const s=e.name,n=o0.get(s);Ti(n)?o0.set(s,[{id:r,index:t,optional:i}]):aB(n,a=>a.id.toString()===r.toString())===-1&&n.push({id:r,index:t,optional:i})}function an(r){if(Cp.has(r))return Cp.get(r);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");hB(e,t,s,!1)};return e.toString=function(){return r},Reflect.set(e,"__brand",r),Cp.set(r,e),e}an("IGenericRegistry");class dB{constructor(){c(this,"map",new Map);c(this,"aliases",new Map)}add(e){const t=e.id;this.map.has(t)&&(_i(rn,"DUPLICATED"),Ue()),this.map.set(t,e)}remove(e){this.map.delete(e)}has(e){let t=this.map.has(e);if(!t){let i=this.aliases.get(e);t=!!i&&this.map.has(i)}return t}value(e){let t=this.map.get(e);if(!t){let i=this.aliases.get(e);i&&(t=this.map.get(i))}return t}addAlias(e,t){this.map.has(e)&&Ue(),this.aliases.set(e,t)}removeAlias(e){this.aliases.delete(e)}values(){return Array.from(this.map.values())}}const zm="en";let Bx=!1,Lx=!1,jm=!1,EA=!1,rO=!1,Zg,Vm=zm,fB,ql;const wi=typeof self=="object"?self:typeof global=="object"?global:{};let ci;typeof wi.vscode<"u"&&typeof wi.vscode.process<"u"?ci=wi.vscode.process:typeof process<"u"&&(ci=process);var eO;const _B=typeof((eO=ci==null?void 0:ci.versions)==null?void 0:eO.electron)=="string",iO=_B&&(ci==null?void 0:ci.type)==="renderer";iO&&(ci==null||ci.sandboxed);if(typeof navigator=="object"&&!iO)ql=navigator.userAgent,Bx=ql.indexOf("Windows")>=0,Lx=ql.indexOf("Macintosh")>=0,rO=(ql.indexOf("Macintosh")>=0||ql.indexOf("iPad")>=0||ql.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,jm=ql.indexOf("Linux")>=0,EA=!0,Zg=navigator.language,Vm=Zg;else if(typeof ci=="object"){Bx=ci.platform==="win32",Lx=ci.platform==="darwin",jm=ci.platform==="linux",jm&&!!ci.env.SNAP&&ci.env.SNAP_REVISION,ci.env.CI||ci.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Zg=zm,Vm=zm;const r=ci.env.VSCODE_NLS_CONFIG;if(r)try{const e=JSON.parse(r),t=e.availableLanguages["*"];Zg=e.locale,Vm=t||zm,fB=e._translationsConfigFile}catch{}}else console.error("Unable to resolve platform.");const j0=Bx,V0=Lx,pB=jm,nO=EA;EA&&wi.importScripts;const Sa=ql,jl=Vm;var RT;(r=>{function e(){return jl}r.value=e;function t(){return jl.length===2?jl==="en":jl.length>=3?jl[0]==="e"&&jl[1]==="n"&&jl[2]==="-":!1}r.isDefaultVariant=t;function i(){return jl==="en"}r.isDefault=i})(RT||(RT={}));(()=>{if(typeof wi.postMessage=="function"&&!wi.importScripts){const r=[];wi.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,s=r.length;i<s;i++){const n=r[i];if(n.id===t.data.vscodeScheduleAsyncWork){r.splice(i,1),n.callback();return}}});let e=0;return t=>{const i=++e;r.push({id:i,callback:t}),wi.postMessage({vscodeScheduleAsyncWork:i},"*")}}return r=>setTimeout(r)})();var mS=(r=>(r[r.Windows=1]="Windows",r[r.Macintosh=2]="Macintosh",r[r.Linux=3]="Linux",r))(mS||{});const gB=Lx||rO?2:Bx?1:3,sO=!!(Sa&&Sa.indexOf("Chrome")>=0),mB=!!(Sa&&Sa.indexOf("Firefox")>=0),xB=!!(!sO&&Sa&&Sa.indexOf("Safari")>=0),yB=!!(Sa&&Sa.indexOf("Edg/")>=0);Sa&&Sa.indexOf("Android")>=0;var wt=(r=>(r[r.Null=0]="Null",r[r.Backspace=8]="Backspace",r[r.Tab=9]="Tab",r[r.LineFeed=10]="LineFeed",r[r.CarriageReturn=13]="CarriageReturn",r[r.Space=32]="Space",r[r.ExclamationMark=33]="ExclamationMark",r[r.DoubleQuote=34]="DoubleQuote",r[r.Hash=35]="Hash",r[r.DollarSign=36]="DollarSign",r[r.PercentSign=37]="PercentSign",r[r.Ampersand=38]="Ampersand",r[r.SingleQuote=39]="SingleQuote",r[r.OpenParen=40]="OpenParen",r[r.CloseParen=41]="CloseParen",r[r.Asterisk=42]="Asterisk",r[r.Plus=43]="Plus",r[r.Comma=44]="Comma",r[r.Dash=45]="Dash",r[r.Period=46]="Period",r[r.Slash=47]="Slash",r[r.Digit0=48]="Digit0",r[r.Digit1=49]="Digit1",r[r.Digit2=50]="Digit2",r[r.Digit3=51]="Digit3",r[r.Digit4=52]="Digit4",r[r.Digit5=53]="Digit5",r[r.Digit6=54]="Digit6",r[r.Digit7=55]="Digit7",r[r.Digit8=56]="Digit8",r[r.Digit9=57]="Digit9",r[r.Colon=58]="Colon",r[r.Semicolon=59]="Semicolon",r[r.LessThan=60]="LessThan",r[r.Equals=61]="Equals",r[r.GreaterThan=62]="GreaterThan",r[r.QuestionMark=63]="QuestionMark",r[r.AtSign=64]="AtSign",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.OpenSquareBracket=91]="OpenSquareBracket",r[r.Backslash=92]="Backslash",r[r.CloseSquareBracket=93]="CloseSquareBracket",r[r.Caret=94]="Caret",r[r.Underline=95]="Underline",r[r.BackTick=96]="BackTick",r[r.a=97]="a",r[r.b=98]="b",r[r.c=99]="c",r[r.d=100]="d",r[r.e=101]="e",r[r.f=102]="f",r[r.g=103]="g",r[r.h=104]="h",r[r.i=105]="i",r[r.j=106]="j",r[r.k=107]="k",r[r.l=108]="l",r[r.m=109]="m",r[r.n=110]="n",r[r.o=111]="o",r[r.p=112]="p",r[r.q=113]="q",r[r.r=114]="r",r[r.s=115]="s",r[r.t=116]="t",r[r.u=117]="u",r[r.v=118]="v",r[r.w=119]="w",r[r.x=120]="x",r[r.y=121]="y",r[r.z=122]="z",r[r.OpenCurlyBrace=123]="OpenCurlyBrace",r[r.Pipe=124]="Pipe",r[r.CloseCurlyBrace=125]="CloseCurlyBrace",r[r.Tilde=126]="Tilde",r[r.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",r[r.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",r[r.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",r[r.U_Combining_Tilde=771]="U_Combining_Tilde",r[r.U_Combining_Macron=772]="U_Combining_Macron",r[r.U_Combining_Overline=773]="U_Combining_Overline",r[r.U_Combining_Breve=774]="U_Combining_Breve",r[r.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",r[r.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",r[r.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",r[r.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",r[r.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",r[r.U_Combining_Caron=780]="U_Combining_Caron",r[r.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",r[r.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",r[r.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",r[r.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",r[r.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",r[r.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",r[r.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",r[r.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",r[r.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",r[r.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",r[r.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",r[r.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",r[r.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",r[r.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",r[r.U_Combining_Horn=795]="U_Combining_Horn",r[r.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",r[r.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",r[r.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",r[r.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",r[r.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",r[r.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",r[r.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",r[r.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",r[r.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",r[r.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",r[r.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",r[r.U_Combining_Cedilla=807]="U_Combining_Cedilla",r[r.U_Combining_Ogonek=808]="U_Combining_Ogonek",r[r.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",r[r.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",r[r.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",r[r.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",r[r.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",r[r.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",r[r.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",r[r.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",r[r.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",r[r.U_Combining_Low_Line=818]="U_Combining_Low_Line",r[r.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",r[r.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",r[r.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",r[r.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",r[r.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",r[r.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",r[r.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",r[r.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",r[r.U_Combining_Square_Below=827]="U_Combining_Square_Below",r[r.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",r[r.U_Combining_X_Above=829]="U_Combining_X_Above",r[r.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",r[r.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",r[r.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",r[r.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",r[r.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",r[r.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",r[r.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",r[r.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",r[r.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",r[r.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",r[r.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",r[r.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",r[r.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",r[r.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",r[r.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",r[r.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",r[r.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",r[r.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",r[r.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",r[r.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",r[r.U_Combining_Fermata=850]="U_Combining_Fermata",r[r.U_Combining_X_Below=851]="U_Combining_X_Below",r[r.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",r[r.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",r[r.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",r[r.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",r[r.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",r[r.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",r[r.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",r[r.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",r[r.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",r[r.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",r[r.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",r[r.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",r[r.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",r[r.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",r[r.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",r[r.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",r[r.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",r[r.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",r[r.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",r[r.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",r[r.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",r[r.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",r[r.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",r[r.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",r[r.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",r[r.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",r[r.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",r[r.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",r[r.LINE_SEPARATOR=8232]="LINE_SEPARATOR",r[r.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",r[r.NEXT_LINE=133]="NEXT_LINE",r[r.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",r[r.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",r[r.U_DIAERESIS=168]="U_DIAERESIS",r[r.U_MACRON=175]="U_MACRON",r[r.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",r[r.U_CEDILLA=184]="U_CEDILLA",r[r.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",r[r.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",r[r.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",r[r.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",r[r.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",r[r.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",r[r.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",r[r.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",r[r.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",r[r.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",r[r.U_BREVE=728]="U_BREVE",r[r.U_DOT_ABOVE=729]="U_DOT_ABOVE",r[r.U_RING_ABOVE=730]="U_RING_ABOVE",r[r.U_OGONEK=731]="U_OGONEK",r[r.U_SMALL_TILDE=732]="U_SMALL_TILDE",r[r.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",r[r.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",r[r.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",r[r.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",r[r.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",r[r.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",r[r.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",r[r.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",r[r.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",r[r.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",r[r.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",r[r.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",r[r.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",r[r.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",r[r.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",r[r.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",r[r.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",r[r.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",r[r.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",r[r.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",r[r.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",r[r.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",r[r.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",r[r.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",r[r.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",r[r.U_GREEK_TONOS=900]="U_GREEK_TONOS",r[r.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",r[r.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",r[r.U_GREEK_PSILI=8127]="U_GREEK_PSILI",r[r.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",r[r.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",r[r.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",r[r.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",r[r.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",r[r.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",r[r.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",r[r.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",r[r.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",r[r.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",r[r.U_GREEK_VARIA=8175]="U_GREEK_VARIA",r[r.U_GREEK_OXIA=8189]="U_GREEK_OXIA",r[r.U_GREEK_DASIA=8190]="U_GREEK_DASIA",r[r.U_OVERLINE=8254]="U_OVERLINE",r[r.UTF8_BOM=65279]="UTF8_BOM",r))(wt||{});function oO(r,e,t=0,i=r.length,s=0,n=e.length){for(;t<i&&s<n;t++,s++){const l=r.charCodeAt(t),u=e.charCodeAt(s);if(l<u)return-1;if(l>u)return 1}const o=i-t,a=n-s;return o<a?-1:o>a?1:0}function vB(r,e,t=0,i=r.length,s=0,n=e.length){for(;t<i&&s<n;t++,s++){const l=r.charCodeAt(t),u=e.charCodeAt(s);if(l===u)continue;const d=l-u;if(!(d===32&&CT(u))&&!(d===-32&&CT(l)))return DT(l)&&DT(u)?d:oO(r.toLowerCase(),e.toLowerCase(),t,i,s,n)}const o=i-t,a=n-s;return o<a?-1:o>a?1:0}function DT(r){return r>=wt.a&&r<=wt.z}function CT(r){return r>=wt.A&&r<=wt.Z}function EB(r){return r>=55296&&r<=56319}function lt(r,e){return r.toLowerCase()===e.toLowerCase()}function OT(r,e){let t,i=Math.min(r.length,e.length);for(t=0;t<i;t++)if(r.charCodeAt(t)!==e.charCodeAt(t))return t;return i}function NT(r,e){let t,i=Math.min(r.length,e.length);const s=r.length-1,n=e.length-1;for(t=0;t<i;t++)if(r.charCodeAt(s-t)!==e.charCodeAt(n-t))return t;return i}const Ri=new Map;Ri.set("false",!1);Ri.set("true",!0);Ri.set("isMac",V0);Ri.set("isLinux",pB);Ri.set("isWindows",j0);Ri.set("isWeb",nO);Ri.set("isMacNative",V0&&!nO);Ri.set("isEdge",yB);Ri.set("isFirefox",mB);Ri.set("isChrome",sO);Ri.set("isSafari",xB);var xS=(r=>(r[r.False=0]="False",r[r.True=1]="True",r[r.Defined=2]="Defined",r[r.Not=3]="Not",r[r.Equals=4]="Equals",r[r.NotEquals=5]="NotEquals",r[r.And=6]="And",r[r.Regex=7]="Regex",r[r.NotRegex=8]="NotRegex",r[r.Or=9]="Or",r[r.In=10]="In",r[r.NotIn=11]="NotIn",r[r.Greater=12]="Greater",r[r.GreaterEquals=13]="GreaterEquals",r[r.Smaller=14]="Smaller",r[r.SmallerEquals=15]="SmallerEquals",r))(xS||{});const iT=class{constructor(){c(this,"type",0)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return eo.INSTANCE}};let Zs=iT;c(Zs,"INSTANCE",new iT);const nT=class{constructor(){c(this,"type",1)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return Zs.INSTANCE}};let eo=nT;c(eo,"INSTANCE",new nT);class ff{constructor(e,t){c(this,"type",2);this.key=e,this.negated=t}static create(e,t=null){const i=Ri.get(e);return typeof i=="boolean"?i?eo.INSTANCE:Zs.INSTANCE:new ff(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:aO(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ri.get(this.key);return typeof e=="boolean"?e?eo.INSTANCE:Zs.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=W0.create(this.key,this)),this.negated}}class Qy{constructor(e,t,i){c(this,"type",4);this.key=e,this.value=t,this.negated=i}static create(e,t,i=null){if(typeof t=="boolean")return t?ff.create(e,i):W0.create(e,i);const s=Ri.get(e);return typeof s=="boolean"?t===(s?"true":"false")?eo.INSTANCE:Zs.INSTANCE:new Qy(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:lO(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ri.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?eo.INSTANCE:Zs.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Jy.create(this.key,this.value,this)),this.negated}}class Jy{constructor(e,t,i){c(this,"type",5);this.key=e,this.value=t,this.negated=i}static create(e,t,i=null){if(typeof t=="boolean")return t?W0.create(e,i):ff.create(e,i);const s=Ri.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Zs.INSTANCE:eo.INSTANCE:new Jy(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:lO(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ri.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Zs.INSTANCE:eo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Qy.create(this.key,this.value,this)),this.negated}}class W0{constructor(e,t){c(this,"type",3);this.key=e,this.negated=t}static create(e,t=null){const i=Ri.get(e);return typeof i=="boolean"?i?Zs.INSTANCE:eo.INSTANCE:new W0(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:aO(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ri.get(this.key);return typeof e=="boolean"?e?Zs.INSTANCE:eo.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=ff.create(this.key,this)),this.negated}}const i0=class extends ff{constructor(t,i,s){super(t,null);c(this,"_defaultValue");this._defaultValue=i,typeof s=="object"?i0._info.push({...s,key:t}):s!==!0&&i0._info.push({key:t,description:s,type:i!=null?typeof i:void 0})}static all(){return i0._info.values()}bindTo(t){return t.createKey(this.key,this._defaultValue)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Qy.create(this.key,t)}notEqualsTo(t){return Jy.create(this.key,t)}};let fd=i0;c(fd,"_info",[]);const _h=an("contextKeyService"),SB="setContext";function aO(r,e){return r<e?-1:r>e?1:0}function lO(r,e,t,i){return r<t?-1:r>t?1:e<i?-1:e>i?1:0}let IT=!1,r_=null;function wB(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&(e.protocol!==t.protocol||e.hostname!==t.hostname||e.port!==t.port))return IT=!0,null}catch{return IT=!0,null}return r.parent}function AB(r=window){if(!r_){r_=[];let e=r,t;do t=wB(e),t?r_.push({window:e,iframeElement:e.frameElement||null}):r_.push({window:e,iframeElement:null}),e=t;while(e)}return r_.slice(0)}function bB(r,e){if(!e||r===e)return{top:0,left:0};let t=0,i=0,s=AB(r);for(const n of s){if(t+=n.window.scrollY,i+=n.window.scrollX,n.window===e||!n.iframeElement)break;let o=n.iframeElement.getBoundingClientRect();t+=o.top,i+=o.left}return{top:t,left:i}}class uO{constructor(e){c(this,"browserEvent");c(this,"leftButton");c(this,"middleButton");c(this,"rightButton");c(this,"buttons");c(this,"target");c(this,"detail");c(this,"posx");c(this,"posy");c(this,"ctrlKey");c(this,"shiftKey");c(this,"altKey");c(this,"metaKey");c(this,"timestamp");this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=bB(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}const ph={no:0,Primary:1,Secondary:1<<1,Auxiliary:1<<2,Fourth:1<<3,Fifth:1<<4},kB=ph.Fifth;function TB(r){let e=new Set;for(let t=Math.log2(kB);t>=0;t--){let i=1<<t;r&i&&e.add(i)}return e}const Ux="workbench.contributions.tool";class SA{constructor(){c(this,"once",!1)}isMouseShortcut(){return!1}isCursorShortcut(){return!1}isDoubleClickShortcut(){return!1}}class _f extends SA{constructor(t){super();c(this,"type",wA.MouseButtonType);c(this,"buttons");this.buttonsBit=t,this.buttons=TB(t)}isMouseShortcut(){return!0}matchBegin(t){return this.buttons.has(t)}}class PB extends SA{constructor(){super(...arguments);c(this,"type",wA.MouseCursorType)}isCursorShortcut(){return!0}match(){return!0}}const RB="tool.cancel",wu=an("IToolService");var rc=(r=>(r[r.BEGIN=0]="BEGIN",r[r.CONTINUE=1]="CONTINUE",r[r.END=2]="END",r))(rc||{}),Xs=(r=>(r[r.noop=0]="noop",r[r.activated=1]="activated",r[r.runningPrimaryAction=2]="runningPrimaryAction",r))(Xs||{}),yS;(r=>{r.currentToolState=new fd("ToolInvocationState",0)})(yS||(yS={}));var wA=(r=>(r[r.UnknownType=0]="UnknownType",r[r.KeyCombinationType=1]="KeyCombinationType",r[r.MouseCursorType=2]="MouseCursorType",r[r.MouseButtonType=3]="MouseButtonType",r[r.MouseWheelType=4]="MouseWheelType",r[r.GestureType=5]="GestureType",r))(wA||{});function FT(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}class DB{constructor(){c(this,"data",new Map)}add(e,t){FT(ao(e)),FT(Id(t)),!this.data.has(e)&&this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}}const aE="Registry";let Wm;Reflect.has(wi,aE)?Wm=Reflect.get(wi,aE):(Wm=new DB,Reflect.set(wi,aE,Wm));const Vc=Wm;class CB extends dB{constructor(){super(...arguments);c(this,"_defaultToolID")}registerWithShortcut(t,i){this.add(t),i&&(this._defaultToolID=t.id)}getDefaultOne(){return this._defaultToolID}}Vc.add(Ux,new CB);function MT(){}function cO(r){const e=this;let t=!1,i;return function(){return t||(t=!0,i=r.apply(e,arguments)),i}}var Wc;(r=>{function e(D){return D&&typeof D=="object"&&typeof D[Symbol.iterator]=="function"}r.is=e;const t=Object.freeze([]);function i(){return t}r.empty=i;function*s(D){yield D}r.single=s;function n(D){return D||t}r.from=n;function o(D){return!D||D[Symbol.iterator]().next().done===!0}r.isEmpty=o;function a(D){return D[Symbol.iterator]().next().value}r.first=a;function l(D,C){for(const I of D)if(C(I))return!0;return!1}r.some=l;function u(D,C){for(const I of D)if(C(I))return I}r.find=u;function*d(D,C){for(const I of D)C(I)&&(yield I)}r.filter=d;function*f(D,C){let I=0;for(const H of D)yield C(H,I++)}r.map=f;function*g(...D){for(const C of D)for(const I of C)yield I}r.concat=g;function*x(D){for(const C of D)for(const I of C)yield I}r.concatNested=x;function E(D,C,I){let H=I;for(const N of D)H=C(H,N);return H}r.reduce=E;function*P(D,C,I=D.length){for(C<0&&(C+=D.length),I<0?I+=D.length:I>D.length&&(I=D.length);C<I;C++)yield D[C]}r.slice=P;function b(D,C=Number.POSITIVE_INFINITY){const I=[];if(C===0)return[I,D];const H=D[Symbol.iterator]();for(let N=0;N<C;N++){const V=H.next();if(V.done)return[I,r.empty()];I.push(V.value)}return[I,{[Symbol.iterator](){return H}}]}r.consume=b;function R(D,C,I=(H,N)=>H===N){const H=D[Symbol.iterator](),N=C[Symbol.iterator]();for(;;){const V=H.next(),O=N.next();if(V.done!==O.done)return!1;if(V.done)return!0;if(!I(V.value,O.value))return!1}}r.equals=R})(Wc||(Wc={}));function Q(r,...e){!Mx(r)&&!r&&console.warn("!",...e)}let to=null;function $0(r){return to==null||to.trackDisposable(r),r}function K0(r){to==null||to.markAsDisposed(r)}function Gx(r,e){to==null||to.setParent(r,e)}function OB(r){return to==null||to.markAsSingleton(r),r}class NB extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function Zy(r){if(Wc.is(r)){const e=[];for(const t of r)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new NB(e);return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function IB(...r){return nn(()=>Zy(r))}function nn(r){const e=$0({dispose:cO(()=>{K0(e),r()})});return e}const sT=class{constructor(){c(this,"_toDispose",new Set);c(this,"_isDisposed",!1);$0(this)}dispose(){this._isDisposed||(K0(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{Zy(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Gx(e,this),this._isDisposed?sT.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};let pa=sT;c(pa,"DISABLE_DISPOSED_WARNING",!1);class Ht{constructor(){c(this,"$$disposed",!1);c(this,"_store",new pa);$0(this),Gx(this._store,this)}dispose(){this.$$disposed=!0,K0(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}c(Ht,"None",Object.freeze({dispose(){}}));class AA{constructor(){c(this,"_value");c(this,"_isDisposed",!1);$0(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),e&&Gx(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,K0(this),(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e&&Gx(e,null),e}}class FB{constructor(){c(this,"dispose",()=>{});c(this,"unset",()=>{});c(this,"isset",()=>!1);$0(this)}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0,K0(this))},this}}class MB{constructor(){c(this,"references",new Map)}acquire(e,...t){let i=this.references.get(e);i||(i={counter:0,object:this.createReferencedObject(e,...t)},this.references.set(e,i));const{object:s}=i,n=()=>cO(()=>{--i.counter===0&&(this.destroyReferencedObject(e,i.object),this.references.delete(e))});i.counter++;const o=()=>i.counter,a=()=>(Q(i),i.counter++,{object:s,dispose:n(),copy:a,count:o});return{object:s,dispose:n(),copy:a,count:o}}}const n0=class{constructor(e){c(this,"element");c(this,"next");c(this,"prev");this.element=e,this.next=n0.Undefined,this.prev=n0.Undefined}};let Yr=n0;c(Yr,"Undefined",new n0(void 0));class a0{constructor(){c(this,"_first",Yr.Undefined);c(this,"_last",Yr.Undefined);c(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===Yr.Undefined}clear(){this._first=Yr.Undefined,this._last=Yr.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Yr(e);if(this._first===Yr.Undefined)this._first=i,this._last=i;else if(t){const n=this._last;this._last=i,i.prev=n,n.next=i}else{const n=this._first;this._first=i,i.next=n,n.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==Yr.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Yr.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Yr.Undefined&&e.next!==Yr.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Yr.Undefined&&e.next===Yr.Undefined?(this._first=Yr.Undefined,this._last=Yr.Undefined):e.next===Yr.Undefined?(this._last=this._last.prev,this._last.next=Yr.Undefined):e.prev===Yr.Undefined&&(this._first=this._first.next,this._first.prev=Yr.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Yr.Undefined;)yield e.element,e=e.next}}class BB{constructor(){c(this,"unexpectedErrorHandler");c(this,"listeners");this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const LB=new BB;function Hx(r){UB(r)||LB.onUnexpectedError(r)}const vS="Canceled";function UB(r){return r instanceof hO?!0:r instanceof Error&&r.name===vS&&r.message===vS}class hO extends Error{constructor(){super(vS),this.name=this.message}}function GB(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}function HB(r){return r?r.message?r.message:r.stack?r.stack.split(`
`)[0]:String(r):"Error"}const zB=wi.performance&&typeof wi.performance.now=="function";class bA{constructor(e){c(this,"_highResolution");c(this,"_startTime");c(this,"_stopTime");this._highResolution=zB&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new bA(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?wi.performance.now():Date.now()}}const oT=class{constructor(e){c(this,"_name");c(this,"_stopWatch");c(this,"_listenerCount",0);c(this,"_invocationCount",0);c(this,"_elapsedOverall",0);this._name=`${e}_${oT._idPool++}`}start(e){this._stopWatch=new bA(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let $m=oT;c($m,"_idPool",0);let Op=-1;function jB(r){const e=Op;return Op=r,{dispose(){Op=e}}}var na;(r=>{r.None=()=>Ht.None;function e(O,W){return d(O,()=>{},0,void 0,!0,void 0,W)}r.defer=e;function t(O){return(W,q=null,re)=>{let fe=!1,he;return he=O(Oe=>{if(!fe)return he?he.dispose():fe=!0,W.call(q,Oe)},null,re),fe&&he.dispose(),he}}r.once=t;function i(O,W,q){return u((re,fe=null,he)=>O(Oe=>re.call(fe,W(Oe)),null,he),q)}r.map=i;function s(O,W,q){return u((re,fe=null,he)=>O(Oe=>{W(Oe),re.call(fe,Oe)},null,he),q)}r.forEach=s;function n(O,W,q){return u((re,fe=null,he)=>O(Oe=>W(Oe)&&re.call(fe,Oe),null,he),q)}r.filter=n;function o(O){return O}r.signal=o;function a(...O){return(W,q=null,re)=>IB(...O.map(fe=>fe(he=>W.call(q,he),null,re)))}r.any=a;function l(O,W,q,re){let fe=q;return i(O,he=>(fe=W(fe,he),fe),re)}r.reduce=l;function u(O,W){let q;const re={onWillAddFirstListener(){q=O(fe.fire,fe)},onDidRemoveLastListener(){q==null||q.dispose()}},fe=new Dt(re);return W==null||W.add(fe),fe.event}function d(O,W,q=100,re=!1,fe=!1,he,Oe){let He,ut,qe,Be=0,nt;const dt={leakWarningThreshold:he,onWillAddFirstListener(){He=O(bt=>{Be++,ut=W(ut,bt),re&&!qe&&(rt.fire(ut),ut=void 0),nt=()=>{const Z=ut;ut=void 0,qe=void 0,(!re||Be>1)&&rt.fire(Z),Be=0},typeof q=="number"?(clearTimeout(qe),qe=setTimeout(nt,q)):qe===void 0&&(qe=0,queueMicrotask(nt))})},onWillRemoveListener(){fe&&Be>0&&(nt==null||nt())},onDidRemoveLastListener(){nt=void 0,He.dispose()}},rt=new Dt(dt);return Oe==null||Oe.add(rt),rt.event}r.debounce=d;function f(O,W=0,q){return r.debounce(O,(re,fe)=>re?(re.push(fe),re):[fe],W,void 0,!0,void 0,q)}r.accumulate=f;function g(O,W=(re,fe)=>re===fe,q){let re=!0,fe;return n(O,he=>{const Oe=re||!W(he,fe);return re=!1,fe=he,Oe},q)}r.latch=g;function x(O,W,q){return[r.filter(O,W,q),r.filter(O,re=>!W(re),q)]}r.split=x;function E(O,W=!1,q=[]){let re=q.slice(),fe=O(He=>{re?re.push(He):Oe.fire(He)});const he=()=>{re==null||re.forEach(He=>Oe.fire(He)),re=null},Oe=new Dt({onWillAddFirstListener(){fe||(fe=O(He=>Oe.fire(He)))},onDidAddFirstListener(){re&&(W?setTimeout(he):he())},onDidRemoveLastListener(){fe&&fe.dispose(),fe=null}});return Oe.event}r.buffer=E;class P{constructor(W){c(this,"disposables",new pa);this.event=W}map(W){return new P(i(this.event,W,this.disposables))}forEach(W){return new P(s(this.event,W,this.disposables))}filter(W){return new P(n(this.event,W,this.disposables))}reduce(W,q){return new P(l(this.event,W,q,this.disposables))}latch(){return new P(g(this.event,void 0,this.disposables))}debounce(W,q=100,re=!1,fe=!1,he){return new P(d(this.event,W,q,re,fe,he,this.disposables))}on(W,q,re){return this.event(W,q,re)}once(W,q,re){return t(this.event)(W,q,re)}dispose(){this.disposables.dispose()}}function b(O){return new P(O)}r.chain=b;function R(O,W,q=re=>re){const re=(...He)=>Oe.fire(q(...He)),fe=()=>O.on(W,re),he=()=>O.removeListener(W,re),Oe=new Dt({onWillAddFirstListener:fe,onDidRemoveLastListener:he});return Oe.event}r.fromNodeEventEmitter=R;function D(O,W,q=re=>re){const re=(...He)=>Oe.fire(q(...He)),fe=()=>O.addEventListener(W,re),he=()=>O.removeEventListener(W,re),Oe=new Dt({onWillAddFirstListener:fe,onDidRemoveLastListener:he});return Oe.event}r.fromDOMEventEmitter=D;function C(O){return new Promise(W=>t(O)(W))}r.toPromise=C;function I(O,W){return W(void 0),O(q=>W(q))}r.runAndSubscribe=I;function H(O,W){let q=null;function re(he){q==null||q.dispose(),q=new pa,W(he,q)}re(void 0);const fe=O(he=>re(he));return nn(()=>{fe.dispose(),q==null||q.dispose()})}r.runAndSubscribeWithStore=H;class N{constructor(W,q){c(this,"emitter");c(this,"_counter",0);c(this,"_hasChanged",!1);this.obs=W;const re={onWillAddFirstListener:()=>{W.addObserver(this)},onDidRemoveLastListener:()=>{W.removeObserver(this)}};this.emitter=new Dt(re),q&&q.add(this.emitter)}beginUpdate(W){this._counter++}handleChange(W,q){this._hasChanged=!0}endUpdate(W){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function V(O,W){return new N(O,W).emitter.event}r.fromObservable=V})(na||(na={}));class VB{constructor(e,t=Math.random().toString(18).slice(2,5)){c(this,"_stacks");c(this,"_warnCountdown",0);this.threshold=e,this.name=t}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;let n,o=0;for(const[a,l]of this._stacks)(!n||o<l)&&(n=a,o=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`),console.warn(n)}return()=>{const n=this._stacks.get(e.value)||0;this._stacks.set(e.value,n-1)}}}class kA{constructor(e){this.value=e}static create(){var e;return new kA((e=new Error().stack)!=null?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class WB{constructor(e,t,i){c(this,"subscription",new FB);this.callback=e,this.callbackThis=t,this.stack=i}invoke(e){this.callback.call(this.callbackThis,e)}}class Dt{constructor(e){c(this,"_options");c(this,"_leakageMon");c(this,"_perfMon");c(this,"_disposed",!1);c(this,"_event");c(this,"_deliveryQueue");c(this,"_listeners");var t,i,s,n,o;this._options=e,this._leakageMon=Op>0||((t=this._options)==null?void 0:t.leakWarningThreshold)?new VB((s=(i=this._options)==null?void 0:i.leakWarningThreshold)!=null?s:Op):void 0,this._perfMon=(n=this._options)!=null&&n._profName?new $m(this._options._profName):void 0,this._deliveryQueue=(o=this._options)==null?void 0:o.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)==null||e.clear(this),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event||(this._event=(e,t,i)=>{var d,f,g;if(this._listeners||(this._listeners=new a0),this._leakageMon&&this._listeners.size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),Ht.None;const s=this._listeners.isEmpty();s&&((d=this._options)==null?void 0:d.onWillAddFirstListener)&&this._options.onWillAddFirstListener(this);let n,o;this._leakageMon&&this._listeners.size>=Math.ceil(this._leakageMon.threshold*.2)&&(o=kA.create(),n=this._leakageMon.check(o,this._listeners.size+1));const a=new WB(e,t,o),l=this._listeners.push(a);s&&((f=this._options)==null?void 0:f.onDidAddFirstListener)&&this._options.onDidAddFirstListener(this),(g=this._options)!=null&&g.onDidAddListener&&this._options.onDidAddListener(this,e,t);const u=a.subscription.set(()=>{var x,E;n==null||n(),this._disposed||((E=(x=this._options)==null?void 0:x.onWillRemoveListener)==null||E.call(x,this),l(),this._options&&this._options.onDidRemoveLastListener&&(this._listeners&&!this._listeners.isEmpty()||this._options.onDidRemoveLastListener(this)))});return i instanceof pa?i.add(u):Array.isArray(i)&&i.push(u),u}),this._event}fire(e){var t,i,s;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new KB((t=this._options)==null?void 0:t.onListenerError));for(const n of this._listeners)this._deliveryQueue.push(this,n,e);(i=this._perfMon)==null||i.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(s=this._perfMon)==null||s.stop()}}hasListeners(){return this._listeners?!this._listeners.isEmpty():!1}}class $B{constructor(e=Hx){c(this,"_queue",new a0);this._onListenerError=e}get size(){return this._queue.size}push(e,t,i){this._queue.push(new XB(e,t,i))}clear(e){const t=new a0;for(const i of this._queue)i.emitter!==e&&t.push(i);this._queue=t}deliver(){for(;this._queue.size>0;){const e=this._queue.shift();try{e.listener.invoke(e.event)}catch(t){this._onListenerError(t)}}}}class KB extends $B{clear(e){this._queue.clear()}}class XB{constructor(e,t,i){this.emitter=e,this.listener=t,this.event=i}}class ES extends Dt{constructor(t){super(t);c(this,"_isPaused",0);c(this,"_eventQueue",new a0);c(this,"_mergeFn");this._mergeFn=t==null?void 0:t.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const t=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(t))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(t){this._listeners&&(this._isPaused!==0?this._eventQueue.push(t):super.fire(t))}}class Fd{constructor(e,t=[],i=!1){c(this,"ctor");c(this,"staticArguments");c(this,"supportsDelayedInstantiation");this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}c(Fd,"__SyncDescriptorBrand");const dO=[];function ba(r,e,t){e instanceof Fd||(e=new Fd(e,[],t)),dO.push([r,e])}function YB(){return dO}const pf=an("ICanvasService"),Jt={DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",TOUCH_START:"touchstart",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",TOUCH_MOVE:"touchmove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_UP:"keyup",DRAG_START:"dragstart",DRAG:"drag",DROP:"drop",DRAG_END:"dragend",ShortcutOverride:"shortcutOverride"};class TA{constructor(e){c(this,"accepted",!1);this.type=e}accept(){this.accepted=!0}ignore(){this.accepted=!1}isAccepted(){return this.accepted}asMouseInputEvent(){}isMouseInputEvent(){return!1}asKeyboardInputEvent(){}isKeyboardInputEvent(){return!1}asWheelInputEvent(){}isWheelInputEvent(){return!1}}class qB extends TA{constructor(t,i){super(t);c(this,"targetPath");c(this,"clientX");c(this,"clientY");c(this,"pageX");c(this,"pageY");c(this,"buttons");this.targetPath=i.targetPath,this.clientX=i.clientX,this.clientY=i.clientY,this.pageX=i.pageX,this.pageY=i.pageY,this.buttons=i.buttons}asMouseInputEvent(){return this}isMouseInputEvent(){return!0}}class QB extends TA{constructor(t){super(Jt.WHEEL);c(this,"deltaX");c(this,"deltaY");this.deltaX=t.deltaX,this.deltaY=t.deltaY}asWheelInputEvent(){return this}isWheelInputEvent(){return!0}}class JB extends TA{constructor(t,i){super(t);c(this,"ctrlKey");c(this,"shiftKey");c(this,"altKey");c(this,"metaKey");c(this,"keyCode");c(this,"code");c(this,"init");this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.keyCode=i.keyCode,this.code=i.code,this.init=i}asKeyboardInputEvent(){return this}isKeyboardInputEvent(){return!0}}class PA{constructor(e){this.node=e}static fromVirtualDOMNode(e){return new PA(e)}}function ls(r,e,t,i=0){return new qB(r,{buttons:i||e.buttons,clientX:e.relativePos.x,clientY:e.relativePos.y,pageX:e.pos.x,pageY:e.pos.y,targetPath:t.targetPath||[]})}function BT(...r){}class ZB{constructor(e,t,i,s){c(this,"_activeTool");c(this,"_past",[]);c(this,"_recursiveCounter",0);c(this,"_brokenByRecursion",0);c(this,"_keys",new Set);c(this,"_buttons",new Set);this.canvas=e,this.toolFactories=t,this.onWillChangeTool=i,this.onDidChangeTool=s}createToolById(e){let t=this.toolFactories.find(i=>i.id===e);if(!!t)return t.createTool(this.canvas)}getShortcutById(e){return this.toolFactories.find(t=>t.id===e)}setActiveToolById(e){var i;if(((i=this._activeTool)==null?void 0:i.id)===e)return!1;const t=this.createToolById(e);return t?this.setActiveTool(t):!1}switchBack(){const e=this._past.pop();e?(this.setActiveToolById(e),this._past.pop()):this.setActiveTool(void 0)}get activeTool(){return this._activeTool}setActiveTool(e){var i;if((e==null?void 0:e.id)===((i=this._activeTool)==null?void 0:i.id))return!1;const t=this._activeTool;return this.onWillChangeTool(t,e),this._activeTool&&this._deactivateTool(this._activeTool),this._doSetActiveTool(e),e&&this._activateTool(e),this.onDidChangeTool(t,e),!!this._activeTool}_deactivateTool(e){e.phase!==Xs.noop&&e.deactivate(),e.phase=Xs.noop}_activateTool(e){e.activate(),e.phase=Xs.activated}_beginTool(e){this._forwardEvent(rc.BEGIN,e),this._activeTool.phase=Xs.runningPrimaryAction}_continueTool(e){this._forwardEvent(rc.CONTINUE,e)}_endTool(e){this._forwardEvent(rc.END,e)}_doSetActiveTool(e=void 0){this._activeTool&&this._past.push(this._activeTool.id),this._activeTool=e}processEvent(e){return this._activeTool&&this._activeTool.processEvent(e),e.isAccepted()}_forwardEvent(e,t){let i=!0;const s=t.asMouseInputEvent();return s&&(s.accept(),this._forwardToTool(e,t)),i}_forwardToTool(e,t){if(!!this._activeTool)switch(this._activeTool.isStrokeTool()||et(),e){case rc.BEGIN:t.type==Jt.DBLCLICK?Ue():this._activeTool.beginPrimaryAction(t);break;case rc.CONTINUE:this._activeTool.continuePrimaryAction(t);break;case rc.END:this._activeTool.endPrimaryAction(t);break}}withRecursionNotifier(e){this._recursiveCounter++,this._brokenByRecursion++;try{return e()}finally{this._recursiveCounter--}}isInRecursion(){return this._recursiveCounter>1}withRecursionGuard(e){this._brokenByRecursion=0;try{return e()}finally{}}isBrokenByRecursion(){return this._brokenByRecursion>0}buttonPressed(e){return this.withRecursionNotifier(()=>{let t=!1;if(this._buttons.has(e.buttons)&&_i(Pp,"Peculiar, button was already pressed."),this._buttons.add(e.buttons),!this.activeTool)return!1;if(this.activeTool.phase!==Xs.runningPrimaryAction&&!this.isInRecursion()){const i=this.getShortcutById(this.activeTool.id);Hn(i),i.shortcut.isMouseShortcut()&&this.withRecursionGuard(()=>{this._beginTool(e),t=!0,this.isBrokenByRecursion()&&(Ue(),this._forceDeactivateAllActions())})}return this.isInRecursion()&&(et(),this._forceDeactivateAllActions()),t})}buttonReleased(e){return this.withRecursionNotifier(()=>{let t=!1;return this.activeTool&&(t=this._tryEndRunningTool(e)),this._buttons.has(e.buttons)?this._buttons.delete(e.buttons):(this.reset(),_i(Pp,"Peculiar, button released but we can't remember it was pressed")),this.isInRecursion()?this._forceDeactivateAllActions():this.activeTool,t})}dbClick(e){return this.withRecursionNotifier(()=>(this.isInRecursion()&&Ue(),this.processEvent(e),e.isAccepted()?!0:(this.isInRecursion()&&Ue(),this._tryRunDoubleClickTool(e))))}dropCanceled(e){return!1}wheelEvent(e){return!1}keyDown(e){return this.withRecursionNotifier(()=>{let t=!1;return this._keys.has(e.keyCode)&&_i(Pp,"Peculiar, records show key was already pressed"),t})}keyUp(e){return this.withRecursionNotifier(()=>(this._keys.has(e.keyCode)||_i(rn,"Peculiar, key released but can't remember it was pressed"),this._keys.delete(e.keyCode),!1))}pointerMoved(e){return this.withRecursionNotifier(()=>(this.isInRecursion()&&Ue(),this._activeTool?this._activeTool.isStrokeTool()&&this._activeTool.phase===Xs.runningPrimaryAction?(this._continueTool(e),!0):this.processEvent(e):this._tryRunCursorTool(e)))}_forceDeactivateAllActions(){this.activeTool&&this._deactivateTool(this.activeTool)}_tryEndRunningTool(e){this.activeTool||et(),this.activeTool.phase===Xs.noop&&et();let t=!1;const i=this.getShortcutById(this.activeTool.id);Hn(i);const{shortcut:s}=i;if(e.isMouseInputEvent()?s.isMouseShortcut()?t=s.matchBegin(e.buttons):s.isCursorShortcut()&&(t=!e.buttons):e.isKeyboardInputEvent()&&(t=!0),t){const n=s.once;Q(this._activeTool),n?(this._activeTool.phase,Xs.noop,this.setActiveTool(void 0)):s.isMouseShortcut()&&(this._endTool(e),this._activeTool.phase=Xs.activated)}return!this.activeTool}_tryRunCursorTool(e){let t;return this.toolFactories.forEach(i=>{const{shortcut:s}=i;s.isCursorShortcut()&&(t=i)}),t&&(BT("activate",t.id),this.setActiveToolById(t.id),this.withRecursionGuard(()=>{Hn(t),this.processEvent(e),this.isBrokenByRecursion()&&Ue()})),!!t}_tryRunDoubleClickTool(e){const t=this.toolFactories.filter(s=>s.shortcut.isDoubleClickShortcut());if(!t.length)return!1;let i=t[0];return BT("activate double click",i.id),this.setActiveToolById(i.id),this.withRecursionGuard(()=>{Hn(i),this.processEvent(e),this.isBrokenByRecursion()&&Ue()}),!!i}reset(){this._keys.clear(),this._buttons.clear()}}var eL=Object.defineProperty,tL=Object.getOwnPropertyDescriptor,rL=(r,e,t,i)=>{for(var s=i>1?void 0:i?tL(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&eL(e,t,s),s},LT=(r,e)=>(t,i)=>e(t,i,r);let SS=class extends Ht{constructor(e,t){super();c(this,"_serviceBrand");c(this,"_onDidChangeTool",new Dt);c(this,"_onWillChangeTool",new Dt);c(this,"_controllers",new Map);c(this,"_currentController");this.instantiationService=e,this.canvasService=t,this._register(t.onDidActiveCanvasChange(i=>{Q(i),!this._controllers.has(i)&&this._attachCanvas(i)}))}get onDidChangeTool(){return this._onDidChangeTool.event}get onWillChangeTool(){return this._onWillChangeTool.event}switchBack(){var e;(e=this._currentController)==null||e.switchBack()}switchDefault(){var i,s;const t=Vc.as(Ux).getDefaultOne();((s=(i=this._currentController)==null?void 0:i.activeTool)==null?void 0:s.id)!==t&&this.switchTool(t)}_attachCanvas(e){Q(e);let t=new ZB(e,Vc.as(Ux).values(),this._emitOnWillChangeToolEvent.bind(this),this._emitOnDidChangeToolEvent.bind(this));this._controllers.set(e,t),this._switchController(t)}_switchController(e){Q(e),this._currentController=e}_emitOnWillChangeToolEvent(e,t){this._onWillChangeTool.fire({prev:e,next:t})}_emitOnDidChangeToolEvent(e,t){this._onDidChangeTool.fire({prev:e,next:t})}switchTool(e){if(!this._currentController)return;const t=this._currentController.activeTool;if((t==null?void 0:t.id)===e)return;const i=e?this._currentController.createToolById(e):void 0;this._currentController.setActiveTool(i)}buttonPressed(e){var t;return!!((t=this._currentController)!=null&&t.buttonPressed(e))}buttonReleased(e){var t;return!!((t=this._currentController)!=null&&t.buttonReleased(e))}dbClick(e){var t;return!!((t=this._currentController)!=null&&t.dbClick(e))}dropCanceled(e){var t;return!!((t=this._currentController)!=null&&t.dropCanceled(e))}keyDown(e){var t;return!!((t=this._currentController)!=null&&t.keyDown(e))}keyUp(e){var t;return!!((t=this._currentController)!=null&&t.keyUp(e))}pointerMoved(e){var t;return!!((t=this._currentController)!=null&&t.pointerMoved(e))}wheelEvent(e){var t;return!!((t=this._currentController)!=null&&t.wheelEvent(e))}processEvent(e){var t;return!!((t=this._currentController)!=null&&t.processEvent(e))}};SS=rL([LT(0,pl),LT(1,pf)],SS);ba(wu,new Fd(SS));const fO=an("IInputManager"),RA=an("keybindingService");var Md=(r=>(r[r.None=0]="None",r[r.BlockBox=1]="BlockBox",r[r.InlineBox=2]="InlineBox",r[r.InlineContent=3]="InlineContent",r))(Md||{}),$c;(r=>{r.hitTestLevel=new fd("hitTestLevel",Md.BlockBox),r.isEditingText=new fd("isEditingText",!1)})($c||($c={}));var iL=Object.defineProperty,nL=Object.getOwnPropertyDescriptor,sL=(r,e,t,i)=>{for(var s=i>1?void 0:i?nL(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&iL(e,t,s),s},lE=(r,e)=>(t,i)=>e(t,i,r);let wS=class extends Ht{constructor(e,t,i){super();c(this,"_serviceBrand");this.toolService=e,this.keybindingService=t,this.contextKeyService=i}addTrackedCanvas(e){e.installEventFilter(this)}removeTrackedCanvas(e){Ue()}eventFilter(e){switch(e.type){case Jt.MOUSE_DOWN:{let i=e.asMouseInputEvent();Hn(i),this.toolService.buttonPressed(i)&&e.accept();break}case Jt.MOUSE_UP:{let i=e.asMouseInputEvent();Hn(i),this.toolService.buttonReleased(i)&&e.accept();break}case Jt.DBLCLICK:{let i=e.asMouseInputEvent();Hn(i),this.toolService.dbClick(i)&&e.accept();break}case Jt.DRAG_END:{let i=e.asMouseInputEvent();Hn(i),this.toolService.dropCanceled(i)&&e.accept();break}case Jt.MOUSE_MOVE:if(this.toolService.pointerMoved(e.asMouseInputEvent()))return e.accept(),!0;break;case Jt.WHEEL:{let i=e.asWheelInputEvent();Hn(i),this.toolService.wheelEvent(i)&&e.accept();break}case Jt.KEY_UP:!this.contextKeyService.getContextKeyValue($c.isEditingText.key)&&this.keybindingService.dispatchEvent(e.asKeyboardInputEvent().init,document.body)&&e.accept();break}return e.isAccepted()||this.toolService.processEvent(e),e.isAccepted()}};wS=sL([lE(0,wu),lE(1,RA),lE(2,_h)],wS);ba(fO,new Fd(wS));class oL extends Ht{constructor(){super(...arguments);c(this,"_onCanvasAdded",this._register(new Dt));c(this,"onCanvasAdded",this._onCanvasAdded.event);c(this,"_onCanvasRemoved",this._register(new Dt));c(this,"onCanvasRemoved",this._onCanvasRemoved.event);c(this,"_onDidActiveCanvasChange",this._register(new Dt));c(this,"onDidActiveCanvasChange",this._onDidActiveCanvasChange.event);c(this,"_editors",new Map);c(this,"_editor")}addCanvas(t){this._editors.set(t.id,t),this._editor=t,this._onCanvasAdded.fire(t),this._onDidActiveCanvasChange.fire(t)}removeCanvas(t){this._editors.delete(t.id)&&this._onCanvasRemoved.fire(t)}listCanvases(){return Array.from(this._editors.values())}getFocusedCanvas(){Ue()}getActiveCanvas(){return this._editor}}ba(pf,oL);const gf=an("modelService"),up="root";var ns=(r=>(r[r.None=0]="None",r[r.Transform=1]="Transform",r[r.Add=2]="Add",r))(ns||{});class aL extends Ht{constructor(){super();c(this,"saveParticipants",[])}addSaveParticipant(t){const i=uB(this.saveParticipants,t);return nn(()=>i())}participate(t,i){for(const s of this.saveParticipants)try{s.participate(t,i)}catch{Ue()}}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length)}}var lL=20,uL=1,Kc=1e6,UT=1e6,cL=-7,hL=21,dL=!1,X0="[big.js] ",gh=X0+"Invalid ",e1=gh+"decimal places",fL=gh+"rounding mode",_O=X0+"Division by zero",vr={},ga=void 0,_L=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function pO(){function r(e){var t=this;if(!(t instanceof r))return e===ga?pO():new r(e);if(e instanceof r)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(r.strict===!0&&typeof e!="bigint")throw TypeError(gh+"value");e=e===0&&1/e<0?"-0":String(e)}pL(t,e)}t.constructor=r}return r.prototype=vr,r.DP=lL,r.RM=uL,r.NE=cL,r.PE=hL,r.strict=dL,r.roundDown=0,r.roundHalfUp=1,r.roundHalfEven=2,r.roundUp=3,r}function pL(r,e){var t,i,s;if(!_L.test(e))throw Error(gh+"number");for(r.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),s=e.length,i=0;i<s&&e.charAt(i)=="0";)++i;if(i==s)r.c=[r.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(r.e=t-i-1,r.c=[],t=0;i<=s;)r.c[t++]=+e.charAt(i++)}return r}function mh(r,e,t,i){var s=r.c;if(t===ga&&(t=r.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(fL);if(e<1)i=t===3&&(i||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(i||s[1]!==ga))),s.length=1,i?(r.e=r.e-e+1,s[0]=1):s[0]=r.e=0;else if(e<s.length){if(i=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(i||s[e+1]!==ga||s[e-1]&1))||t===3&&(i||!!s[0]),s.length=e,i){for(;++s[--e]>9;)if(s[e]=0,e===0){++r.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return r}function mf(r,e,t){var i=r.e,s=r.c.join(""),n=s.length;if(e)s=s.charAt(0)+(n>1?"."+s.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)s="0"+s;s="0."+s}else if(i>0)if(++i>n)for(i-=n;i--;)s+="0";else i<n&&(s=s.slice(0,i)+"."+s.slice(i));else n>1&&(s=s.charAt(0)+"."+s.slice(1));return r.s<0&&t?"-"+s:s}vr.abs=function(){var r=new this.constructor(this);return r.s=1,r};vr.cmp=function(r){var e,t=this,i=t.c,s=(r=new t.constructor(r)).c,n=t.s,o=r.s,a=t.e,l=r.e;if(!i[0]||!s[0])return i[0]?n:s[0]?-o:0;if(n!=o)return n;if(e=n<0,a!=l)return a>l^e?1:-1;for(o=(a=i.length)<(l=s.length)?a:l,n=-1;++n<o;)if(i[n]!=s[n])return i[n]>s[n]^e?1:-1;return a==l?0:a>l^e?1:-1};vr.div=function(r){var e=this,t=e.constructor,i=e.c,s=(r=new t(r)).c,n=e.s==r.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>Kc)throw Error(e1);if(!s[0])throw Error(_O);if(!i[0])return r.s=n,r.c=[r.e=0],r;var a,l,u,d,f,g=s.slice(),x=a=s.length,E=i.length,P=i.slice(0,a),b=P.length,R=r,D=R.c=[],C=0,I=o+(R.e=e.e-r.e)+1;for(R.s=n,n=I<0?0:I,g.unshift(0);b++<a;)P.push(0);do{for(u=0;u<10;u++){if(a!=(b=P.length))d=a>b?1:-1;else for(f=-1,d=0;++f<a;)if(s[f]!=P[f]){d=s[f]>P[f]?1:-1;break}if(d<0){for(l=b==a?s:g;b;){if(P[--b]<l[b]){for(f=b;f&&!P[--f];)P[f]=9;--P[f],P[b]+=10}P[b]-=l[b]}for(;!P[0];)P.shift()}else break}D[C++]=d?u:++u,P[0]&&d?P[b]=i[x]||0:P=[i[x]]}while((x++<E||P[0]!==ga)&&n--);return!D[0]&&C!=1&&(D.shift(),R.e--,I--),C>I&&mh(R,I,t.RM,P[0]!==ga),R};vr.eq=function(r){return this.cmp(r)===0};vr.gt=function(r){return this.cmp(r)>0};vr.gte=function(r){return this.cmp(r)>-1};vr.lt=function(r){return this.cmp(r)<0};vr.lte=function(r){return this.cmp(r)<1};vr.minus=vr.sub=function(r){var e,t,i,s,n=this,o=n.constructor,a=n.s,l=(r=new o(r)).s;if(a!=l)return r.s=-l,n.plus(r);var u=n.c.slice(),d=n.e,f=r.c,g=r.e;if(!u[0]||!f[0])return f[0]?r.s=-l:u[0]?r=new o(n):r.s=1,r;if(a=d-g){for((s=a<0)?(a=-a,i=u):(g=d,i=f),i.reverse(),l=a;l--;)i.push(0);i.reverse()}else for(t=((s=u.length<f.length)?u:f).length,a=l=0;l<t;l++)if(u[l]!=f[l]){s=u[l]<f[l];break}if(s&&(i=u,u=f,f=i,r.s=-r.s),(l=(t=f.length)-(e=u.length))>0)for(;l--;)u[e++]=0;for(l=e;t>a;){if(u[--t]<f[t]){for(e=t;e&&!u[--e];)u[e]=9;--u[e],u[t]+=10}u[t]-=f[t]}for(;u[--l]===0;)u.pop();for(;u[0]===0;)u.shift(),--g;return u[0]||(r.s=1,u=[g=0]),r.c=u,r.e=g,r};vr.mod=function(r){var e,t=this,i=t.constructor,s=t.s,n=(r=new i(r)).s;if(!r.c[0])throw Error(_O);return t.s=r.s=1,e=r.cmp(t)==1,t.s=s,r.s=n,e?new i(t):(s=i.DP,n=i.RM,i.DP=i.RM=0,t=t.div(r),i.DP=s,i.RM=n,this.minus(t.times(r)))};vr.neg=function(){var r=new this.constructor(this);return r.s=-r.s,r};vr.plus=vr.add=function(r){var e,t,i,s=this,n=s.constructor;if(r=new n(r),s.s!=r.s)return r.s=-r.s,s.minus(r);var o=s.e,a=s.c,l=r.e,u=r.c;if(!a[0]||!u[0])return u[0]||(a[0]?r=new n(s):r.s=s.s),r;if(a=a.slice(),e=o-l){for(e>0?(l=o,i=u):(e=-e,i=a),i.reverse();e--;)i.push(0);i.reverse()}for(a.length-u.length<0&&(i=u,u=a,a=i),e=u.length,t=0;e;a[e]%=10)t=(a[--e]=a[e]+u[e]+t)/10|0;for(t&&(a.unshift(t),++l),e=a.length;a[--e]===0;)a.pop();return r.c=a,r.e=l,r};vr.pow=function(r){var e=this,t=new e.constructor("1"),i=t,s=r<0;if(r!==~~r||r<-UT||r>UT)throw Error(gh+"exponent");for(s&&(r=-r);r&1&&(i=i.times(e)),r>>=1,!!r;)e=e.times(e);return s?t.div(i):i};vr.prec=function(r,e){if(r!==~~r||r<1||r>Kc)throw Error(gh+"precision");return mh(new this.constructor(this),r,e)};vr.round=function(r,e){if(r===ga)r=0;else if(r!==~~r||r<-Kc||r>Kc)throw Error(e1);return mh(new this.constructor(this),r+this.e+1,e)};vr.sqrt=function(){var r,e,t,i=this,s=i.constructor,n=i.s,o=i.e,a=new s("0.5");if(!i.c[0])return new s(i);if(n<0)throw Error(X0+"No square root");n=Math.sqrt(i+""),n===0||n===1/0?(e=i.c.join(""),e.length+o&1||(e+="0"),n=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),r=new s((n==1/0?"5e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+o)):r=new s(n+""),o=r.e+(s.DP+=4);do t=r,r=a.times(t.plus(i.div(t)));while(t.c.slice(0,o).join("")!==r.c.slice(0,o).join(""));return mh(r,(s.DP-=4)+r.e+1,s.RM)};vr.times=vr.mul=function(r){var e,t=this,i=t.constructor,s=t.c,n=(r=new i(r)).c,o=s.length,a=n.length,l=t.e,u=r.e;if(r.s=t.s==r.s?1:-1,!s[0]||!n[0])return r.c=[r.e=0],r;for(r.e=l+u,o<a&&(e=s,s=n,n=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(l=a;l--;){for(a=0,u=o+l;u>l;)a=e[u]+n[l]*s[u-l-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++r.e:e.shift(),l=e.length;!e[--l];)e.pop();return r.c=e,r};vr.toExponential=function(r,e){var t=this,i=t.c[0];if(r!==ga){if(r!==~~r||r<0||r>Kc)throw Error(e1);for(t=mh(new t.constructor(t),++r,e);t.c.length<r;)t.c.push(0)}return mf(t,!0,!!i)};vr.toFixed=function(r,e){var t=this,i=t.c[0];if(r!==ga){if(r!==~~r||r<0||r>Kc)throw Error(e1);for(t=mh(new t.constructor(t),r+t.e+1,e),r=r+t.e+1;t.c.length<r;)t.c.push(0)}return mf(t,!1,!!i)};vr[Symbol.for("nodejs.util.inspect.custom")]=vr.toJSON=vr.toString=function(){var r=this,e=r.constructor;return mf(r,r.e<=e.NE||r.e>=e.PE,!!r.c[0])};vr.toNumber=function(){var r=Number(mf(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(r.toString()))throw Error(X0+"Imprecise conversion");return r};vr.toPrecision=function(r,e){var t=this,i=t.constructor,s=t.c[0];if(r!==ga){if(r!==~~r||r<1||r>Kc)throw Error(gh+"precision");for(t=mh(new i(t),r,e);t.c.length<r;)t.c.push(0)}return mf(t,r<=t.e||t.e<=i.NE||t.e>=i.PE,!!s)};vr.valueOf=function(){var r=this,e=r.constructor;if(e.strict===!0)throw Error(X0+"valueOf disallowed");return mf(r,r.e<=e.NE||r.e>=e.PE,!0)};var l0=pO();function Y0(r,e){return new l0(r).cmp(new l0(e))}function Sc(r,e){return new l0(r).plus(new l0(e)).toString()}function ua(r){return new l0(r).div(2).toString()}function sa(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;if(r instanceof Map){let i=new Map;for(let[s,n]of r)i.set(s,sa(n));return i}let e=Reflect.get(r,"CLONE");if(yA(e))return e.call(r);const t=Array.isArray(r)?[]:{};return Object.keys(r).forEach(i=>{r[i]&&typeof r[i]=="object"?t[i]=sa(r[i]):t[i]=r[i]}),t}function Np(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!Np(r[t],e[t]))return!1}else{const s=[];for(i in r)s.push(i);s.sort();const n=[];for(i in e)n.push(i);if(n.sort(),!Np(s,n))return!1;for(t=0;t<s.length;t++)if(!Np(r[s[t]],e[s[t]]))return!1}return!0}function Ip(r){return Object.keys(r)}const gL=Object.prototype.hasOwnProperty;function mL(r){if(!r||typeof r!="object")return r;const e=[r];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(gL.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&e.push(s)}}return r}function GT(r,e){const t=Object.create(null);return!r||!e||Object.keys(e).forEach(s=>{const n=r[s],o=e[s];Np(n,o)||(t[s]=o)}),t}var gO=(r=>(r[r.Uri=1]="Uri",r[r.Regexp=2]="Regexp",r[r.ScmResource=3]="ScmResource",r[r.ScmResourceGroup=4]="ScmResourceGroup",r[r.ScmProvider=5]="ScmProvider",r[r.CommentController=6]="CommentController",r[r.CommentThread=7]="CommentThread",r[r.CommentThreadReply=8]="CommentThreadReply",r[r.CommentNode=9]="CommentNode",r[r.CommentThreadNode=10]="CommentThreadNode",r[r.TimelineActionContext=11]="TimelineActionContext",r[r.NotebookCellActionContext=12]="NotebookCellActionContext",r[r.TestItemContext=13]="TestItemContext",r[r.Date=14]="Date",r))(gO||{});const xL=/^\w[\w\d+.-]*$/,yL=/^\//,vL=/^\/\//;function HT(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!xL.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!yL.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(vL.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function EL(r,e){return!r&&!e?"file":r}function SL(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==go&&(e=go+e):e=go;break}return e}const br="",go="/",wL=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class u0{constructor(e,t,i,s,n,o=!1){c(this,"scheme");c(this,"authority");c(this,"path");c(this,"query");c(this,"fragment");typeof e=="object"?(this.scheme=e.scheme||br,this.authority=e.authority||br,this.path=e.path||br,this.query=e.query||br,this.fragment=e.fragment||br):(this.scheme=EL(e,o),this.authority=t||br,this.path=SL(this.scheme,i||br),this.query=s||br,this.fragment=n||br,HT(this,o))}static isUri(e){return e instanceof u0?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return yO(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:n,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=br),i===void 0?i=this.authority:i===null&&(i=br),s===void 0?s=this.path:s===null&&(s=br),n===void 0?n=this.query:n===null&&(n=br),o===void 0?o=this.fragment:o===null&&(o=br),t===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new Kh(t,i,s,n,o)}static parse(e,t=!1){const i=wL.exec(e);return i?new Kh(i[2]||br,em(i[4]||br),em(i[5]||br),em(i[7]||br),em(i[9]||br),t):new Kh(br,br,br,br,br)}static file(e){let t=br;if(j0&&(e=e.replace(/\\/g,go)),e[0]===go&&e[1]===go){const i=e.indexOf(go,2);i===-1?(t=e.substring(2),e=go):(t=e.substring(2,i),e=e.substring(i)||go)}return new Kh("file",t,e,br,br)}static from(e){const t=new Kh(e.scheme,e.authority,e.path,e.query,e.fragment);return HT(t,!0),t}static joinPath(e,...t){Ue()}toString(e=!1){return AS(this,e)}toJSON(){return this}static revive(e){if(Ti(e))return e;if(e instanceof u0)return e;{const t=new Kh(e);return t._formatted=e.external,t._fsPath=e._sep===mO?e.fsPath:null,t}}}const mO=j0?1:void 0;class Kh extends u0{constructor(){super(...arguments);c(this,"_formatted",null);c(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=yO(this,!1)),this._fsPath}toString(t=!1){return t?AS(this,!0):(this._formatted||(this._formatted=AS(this,!1)),this._formatted)}toJSON(){const t={$mid:gO.Uri};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=mO),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}}const xO={[wt.Colon]:"%3A",[wt.Slash]:"%2F",[wt.QuestionMark]:"%3F",[wt.Hash]:"%23",[wt.OpenSquareBracket]:"%5B",[wt.CloseSquareBracket]:"%5D",[wt.AtSign]:"%40",[wt.ExclamationMark]:"%21",[wt.DollarSign]:"%24",[wt.Ampersand]:"%26",[wt.SingleQuote]:"%27",[wt.OpenParen]:"%28",[wt.CloseParen]:"%29",[wt.Asterisk]:"%2A",[wt.Plus]:"%2B",[wt.Comma]:"%2C",[wt.Semicolon]:"%3B",[wt.Equals]:"%3D",[wt.Space]:"%20"};function zT(r,e){let t,i=-1;for(let s=0;s<r.length;s++){const n=r.charCodeAt(s);if(n>=wt.a&&n<=wt.z||n>=wt.A&&n<=wt.Z||n>=wt.Digit0&&n<=wt.Digit9||n===wt.Dash||n===wt.Period||n===wt.Underline||n===wt.Tilde||e&&n===wt.Slash)i!==-1&&(t+=encodeURIComponent(r.substring(i,s)),i=-1),t!==void 0&&(t+=r.charAt(s));else{t===void 0&&(t=r.substr(0,s));const o=xO[n];o!==void 0?(i!==-1&&(t+=encodeURIComponent(r.substring(i,s)),i=-1),t+=o):i===-1&&(i=s)}}return i!==-1&&(t+=encodeURIComponent(r.substring(i))),t!==void 0?t:r}function AL(r){let e;for(let t=0;t<r.length;t++){const i=r.charCodeAt(t);i===wt.Hash||i===wt.QuestionMark?(e===void 0&&(e=r.substr(0,t)),e+=xO[i]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function yO(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===wt.Slash&&(r.path.charCodeAt(1)>=wt.A&&r.path.charCodeAt(1)<=wt.Z||r.path.charCodeAt(1)>=wt.a&&r.path.charCodeAt(1)<=wt.z)&&r.path.charCodeAt(2)===wt.Colon?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,j0&&(t=t.replace(/\//g,"\\")),t}function AS(r,e){const t=e?AL:zT;let i="",{scheme:s,authority:n,path:o,query:a,fragment:l}=r;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=go,i+=go),n){let u=n.indexOf("@");if(u!==-1){const d=n.substr(0,u);n=n.substr(u+1),u=d.indexOf(":"),u===-1?i+=t(d,!1):(i+=t(d.substr(0,u),!1),i+=":",i+=t(d.substr(u+1),!1)),i+="@"}n=n.toLowerCase(),u=n.indexOf(":"),u===-1?i+=t(n,!1):(i+=t(n.substr(0,u),!1),i+=n.substr(u))}if(o){if(o.length>=3&&o.charCodeAt(0)===wt.Slash&&o.charCodeAt(2)===wt.Colon){const u=o.charCodeAt(1);u>=wt.A&&u<=wt.Z&&(o=`/${String.fromCharCode(u+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===wt.Colon){const u=o.charCodeAt(0);u>=wt.A&&u<=wt.Z&&(o=`${String.fromCharCode(u+32)}:${o.substr(2)}`)}i+=t(o,!0)}return a&&(i+="?",i+=t(a,!1)),l&&(i+="#",i+=e?l:zT(l,!1)),i}function vO(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+vO(r.substr(3)):r}}const jT=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function em(r){return r.match(jT)?r.replace(jT,e=>vO(e)):r}function EO(r){return r.get("nodes")}function Yo(r){return r.get("id")}function cp(r){return r.get("from")}function VT(r){return r.get("type")}function WT(r){return r.get("content")}function $T(r){return r.get("style")}var zn=(r=>(r[r.backward=0]="backward",r[r.forward=1]="forward",r[r.inward=2]="inward",r[r.self=3]="self",r[r.ancestors=4]="ancestors",r[r.descendants=5]="descendants",r))(zn||{}),hi=(r=>(r.Root="root",r.Image="image",r.Text="text",r.Block="block",r.Fragment="fragment",r))(hi||{});const ni=new Uint8Array(16),$i=[];for(let r=0;r<256;r++)$i.push(r.toString(16).padStart(2,"0"));let bS;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?bS=crypto.getRandomValues.bind(crypto):bS=function(r){for(let e=0;e<r.length;e++)r[e]=Math.floor(Math.random()*256);return r};function bL(){bS(ni),ni[6]=ni[6]&15|64,ni[8]=ni[8]&63|128;let r=0,e="";return e+=$i[ni[r++]],e+=$i[ni[r++]],e+=$i[ni[r++]],e+=$i[ni[r++]],e+="-",e+=$i[ni[r++]],e+=$i[ni[r++]],e+="-",e+=$i[ni[r++]],e+=$i[ni[r++]],e+="-",e+=$i[ni[r++]],e+=$i[ni[r++]],e+="-",e+=$i[ni[r++]],e+=$i[ni[r++]],e+=$i[ni[r++]],e+=$i[ni[r++]],e+=$i[ni[r++]],e+=$i[ni[r++]],e}const ma=()=>new Map,kS=r=>{const e=ma();return r.forEach((t,i)=>{e.set(i,t)}),e},xf=(r,e,t)=>{let i=r.get(e);return i===void 0&&r.set(e,i=t()),i},kL=(r,e)=>{const t=[];for(const[i,s]of r)t.push(e(s,i));return t},TL=(r,e)=>{for(const[t,i]of r)if(e(i,t))return!0;return!1},Bd=()=>new Set,uE=r=>r[r.length-1],PL=(r,e)=>{for(let t=0;t<e.length;t++)r.push(e[t])},Ld=Array.from,RL=(r,e)=>{for(let t=0;t<r.length;t++)if(e(r[t],t,r))return!0;return!1},TS=Array.isArray;class SO{constructor(){this._observers=ma()}on(e,t){xf(this._observers,e,Bd).add(t)}once(e,t){const i=(...s)=>{this.off(e,i),t(...s)};this.on(e,i)}off(e,t){const i=this._observers.get(e);i!==void 0&&(i.delete(t),i.size===0&&this._observers.delete(e))}emit(e,t){return Ld((this._observers.get(e)||ma()).values()).forEach(i=>i(...t))}destroy(){this._observers=ma()}}const Xc=Math.floor,Km=Math.abs,wO=(r,e)=>r<e?r:e,yf=(r,e)=>r>e?r:e,DL=r=>r!==0?r<0:1/r<0,CL=r=>r.toLowerCase(),OL=/^\s*/g,NL=r=>r.replace(OL,""),IL=/([A-Z])/g,KT=(r,e)=>NL(r.replace(IL,t=>`${e}${CL(t)}`)),FL=r=>{const e=unescape(encodeURIComponent(r)),t=e.length,i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=e.codePointAt(s);return i},c0=typeof TextEncoder<"u"?new TextEncoder:null,ML=r=>c0.encode(r),BL=c0?ML:FL;let cE=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});cE&&cE.decode(new Uint8Array).length===1&&(cE=null);const XT=r=>r===void 0?null:r;class LL{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let AO=new LL,UL=!0;try{typeof localStorage<"u"&&(AO=localStorage,UL=!1)}catch{}const GL=AO,HL=Object.assign,zL=Object.keys,jL=(r,e)=>{for(const t in r)e(r[t],t)},YT=r=>zL(r).length,VL=r=>{for(const e in r)return!1;return!0},WL=(r,e)=>{for(const t in r)if(!e(r[t],t))return!1;return!0},$L=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),KL=(r,e)=>r===e||YT(r)===YT(e)&&WL(r,(t,i)=>(t!==void 0||$L(e,i))&&e[i]===t),DA=(r,e,t=0)=>{try{for(;t<r.length;t++)r[t](...e)}finally{t<r.length&&DA(r,e,t+1)}},XL=(r,e)=>e.includes(r),h0=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name);typeof navigator<"u"&&/Mac/.test(navigator.platform);let qo;const YL=()=>{if(qo===void 0)if(h0){qo=ma();const r=process.argv;let e=null;for(let t=0;t<r.length;t++){const i=r[t];i[0]==="-"?(e!==null&&qo.set(e,""),e=i):e!==null&&(qo.set(e,i),e=null)}e!==null&&qo.set(e,"")}else typeof location=="object"?(qo=ma(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[e,t]=r.split("=");qo.set(`--${KT(e,"-")}`,t),qo.set(`-${KT(e,"-")}`,t)}})):qo=ma();return qo},PS=r=>YL().has(r),RS=r=>XT(h0?process.env[r.toUpperCase()]:GL.getItem(r)),qL=r=>PS("--"+r)||RS(r)!==null;qL("production");const qT=h0&&XL(process.env.FORCE_COLOR,["true","1","2"]),QL=!PS("no-colors")&&(!h0||process.stdout.isTTY||qT)&&(!h0||PS("color")||qT||RS("COLORTERM")!==null||(RS("TERM")||"").includes("color")),QT=1,JT=2,hE=4,dE=8,JL=32,bO=64,zx=128,ZL=31,ZT=63,Fp=127,e4=2147483647,t4=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&Xc(r)===r),t1=r=>new Error(r),xa=()=>{throw t1("Method unimplemented")},Yc=()=>{throw t1("Unexpected case")},kO=(r,e,t)=>new Uint8Array(r,e,t);class q0{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const CA=()=>new q0,r4=r=>{let e=r.cpos;for(let t=0;t<r.bufs.length;t++)e+=r.bufs[t].length;return e},Ja=r=>{const e=new Uint8Array(r4(r));let t=0;for(let i=0;i<r.bufs.length;i++){const s=r.bufs[i];e.set(s,t),t+=s.length}return e.set(kO(r.cbuf.buffer,0,r.cpos),t),e},i4=(r,e)=>{const t=r.cbuf.length;t-r.cpos<e&&(r.bufs.push(kO(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(yf(t,e)*2),r.cpos=0)},Bi=(r,e)=>{const t=r.cbuf.length;r.cpos===t&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(t*2),r.cpos=0),r.cbuf[r.cpos++]=e},DS=Bi,Pr=(r,e)=>{for(;e>Fp;)Bi(r,zx|Fp&e),e=Xc(e/128);Bi(r,Fp&e)},OA=(r,e)=>{const t=DL(e);for(t&&(e=-e),Bi(r,(e>ZT?zx:0)|(t?bO:0)|ZT&e),e=Xc(e/64);e>0;)Bi(r,(e>Fp?zx:0)|Fp&e),e=Xc(e/128)},CS=new Uint8Array(3e4),n4=CS.length/3,s4=(r,e)=>{if(e.length<n4){const t=c0.encodeInto(e,CS).written||0;Pr(r,t);for(let i=0;i<t;i++)Bi(r,CS[i])}else ws(r,BL(e))},o4=(r,e)=>{const t=unescape(encodeURIComponent(e)),i=t.length;Pr(r,i);for(let s=0;s<i;s++)Bi(r,t.codePointAt(s))},_d=c0&&c0.encodeInto?s4:o4,NA=(r,e)=>{const t=r.cbuf.length,i=r.cpos,s=wO(t-i,e.length),n=e.length-s;r.cbuf.set(e.subarray(0,s),i),r.cpos+=s,n>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(yf(t*2,n)),r.cbuf.set(e.subarray(s)),r.cpos=n)},ws=(r,e)=>{Pr(r,e.byteLength),NA(r,e)},IA=(r,e)=>{i4(r,e);const t=new DataView(r.cbuf.buffer,r.cpos,e);return r.cpos+=e,t},a4=(r,e)=>IA(r,4).setFloat32(0,e,!1),l4=(r,e)=>IA(r,8).setFloat64(0,e,!1),u4=(r,e)=>IA(r,8).setBigInt64(0,e,!1),eP=new DataView(new ArrayBuffer(4)),c4=r=>(eP.setFloat32(0,r),eP.getFloat32(0)===r),d0=(r,e)=>{switch(typeof e){case"string":Bi(r,119),_d(r,e);break;case"number":t4(e)&&Km(e)<=e4?(Bi(r,125),OA(r,e)):c4(e)?(Bi(r,124),a4(r,e)):(Bi(r,123),l4(r,e));break;case"bigint":Bi(r,122),u4(r,e);break;case"object":if(e===null)Bi(r,126);else if(TS(e)){Bi(r,117),Pr(r,e.length);for(let t=0;t<e.length;t++)d0(r,e[t])}else if(e instanceof Uint8Array)Bi(r,116),ws(r,e);else{Bi(r,118);const t=Object.keys(e);Pr(r,t.length);for(let i=0;i<t.length;i++){const s=t[i];_d(r,s),d0(r,e[s])}}break;case"boolean":Bi(r,e?120:121);break;default:Bi(r,127)}};class tP extends q0{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Pr(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const rP=r=>{r.count>0&&(OA(r.encoder,r.count===1?r.s:-r.s),r.count>1&&Pr(r.encoder,r.count-2))};class Xm{constructor(){this.encoder=new q0,this.s=0,this.count=0}write(e){this.s===e?this.count++:(rP(this),this.count=1,this.s=e)}toUint8Array(){return rP(this),Ja(this.encoder)}}const iP=r=>{if(r.count>0){const e=r.diff*2+(r.count===1?0:1);OA(r.encoder,e),r.count>1&&Pr(r.encoder,r.count-2)}};class fE{constructor(){this.encoder=new q0,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(iP(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return iP(this),Ja(this.encoder)}}class h4{constructor(){this.sarr=[],this.s="",this.lensE=new Xm}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new q0;return this.sarr.push(this.s),this.s="",_d(e,this.sarr.join("")),NA(e,this.lensE.toUint8Array()),Ja(e)}}const d4=crypto.getRandomValues.bind(crypto),TO=()=>d4(new Uint32Array(1))[0],f4=[1e7]+-1e3+-4e3+-8e3+-1e11,_4=()=>f4.replace(/[018]/g,r=>(r^TO()&15>>r/4).toString(16)),p4=Date.now,nP=r=>new Promise(r);Promise.all.bind(Promise);class g4{constructor(e,t){this.left=e,this.right=t}}const Wa=(r,e)=>new g4(r,e),xh=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const m4=r=>kL(r,(e,t)=>`${t}:${e};`).join("");xh.ELEMENT_NODE;xh.TEXT_NODE;xh.CDATA_SECTION_NODE;xh.COMMENT_NODE;xh.DOCUMENT_NODE;xh.DOCUMENT_TYPE_NODE;xh.DOCUMENT_FRAGMENT_NODE;const gl=Symbol,PO=gl(),RO=gl(),x4=gl(),y4=gl(),v4=gl(),DO=gl(),E4=gl(),CO=gl(),S4=gl(),w4=r=>{const e=[];let t=0;for(;t<r.length;t++){const i=r[t];i.constructor===String||i.constructor===Number||i.constructor===Object&&e.push(JSON.stringify(i))}return e},A4={[PO]:Wa("font-weight","bold"),[RO]:Wa("font-weight","normal"),[x4]:Wa("color","blue"),[v4]:Wa("color","green"),[y4]:Wa("color","grey"),[DO]:Wa("color","red"),[E4]:Wa("color","purple"),[CO]:Wa("color","orange"),[S4]:Wa("color","black")},b4=r=>{const e=[],t=[],i=ma();let s=[],n=0;for(;n<r.length;n++){const o=r[n],a=A4[o];if(a!==void 0)i.set(a.left,a.right);else if(o.constructor===String||o.constructor===Number){const l=m4(i);n>0||l.length>0?(e.push("%c"+o),t.push(l)):e.push(o)}else break}for(n>0&&(s=t,s.unshift(e.join("")));n<r.length;n++){const o=r[n];o instanceof Symbol||s.push(o)}return s},k4=QL?b4:w4,T4=(...r)=>{console.log(...k4(r)),P4.forEach(e=>e.print(r))},P4=Bd(),OO=r=>({[Symbol.iterator](){return this},next:r}),R4=(r,e)=>OO(()=>{let t;do t=r.next();while(!t.done&&!e(t.value));return t}),_E=(r,e)=>OO(()=>{const{done:t,value:i}=r.next();return{done:t,value:t?void 0:e(i)}});class D4{constructor(e,t){this.clock=e,this.len=t}}class r1{constructor(){this.clients=new Map}}const Ud=(r,e,t)=>e.clients.forEach((i,s)=>{const n=r.doc.store.clients.get(s);for(let o=0;o<i.length;o++){const a=i[o];MO(r,n,a.clock,a.len,t)}}),C4=(r,e)=>{let t=0,i=r.length-1;for(;t<=i;){const s=Xc((t+i)/2),n=r[s],o=n.clock;if(o<=e){if(e<o+n.len)return s;t=s+1}else i=s-1}return null},Q0=(r,e)=>{const t=r.clients.get(e.client);return t!==void 0&&C4(t,e.clock)!==null},FA=r=>{r.clients.forEach(e=>{e.sort((s,n)=>s.clock-n.clock);let t,i;for(t=1,i=1;t<e.length;t++){const s=e[i-1],n=e[t];s.clock+s.len>=n.clock?s.len=yf(s.len,n.clock+n.len-s.clock):(i<t&&(e[i]=n),i++)}e.length=i})},sP=r=>{const e=new r1;for(let t=0;t<r.length;t++)r[t].clients.forEach((i,s)=>{if(!e.clients.has(s)){const n=i.slice();for(let o=t+1;o<r.length;o++)PL(n,r[o].clients.get(s)||[]);e.clients.set(s,n)}});return FA(e),e},MA=(r,e,t,i)=>{xf(r.clients,e,()=>[]).push(new D4(t,i))},O4=()=>new r1,N4=(r,e)=>{Pr(r.restEncoder,e.clients.size),Ld(e.clients.entries()).sort((t,i)=>i[0]-t[0]).forEach(([t,i])=>{r.resetDsCurVal(),Pr(r.restEncoder,t);const s=i.length;Pr(r.restEncoder,s);for(let n=0;n<s;n++){const o=i[n];r.writeDsClock(o.clock),r.writeDsLen(o.len)}})},NO=TO;class vf extends SO{constructor({guid:e=_4(),collectionid:t=null,gc:i=!0,gcFilter:s=()=>!0,meta:n=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=i,this.gcFilter=s,this.clientID=NO(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new W4,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=n,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=nP(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const l=()=>nP(u=>{const d=f=>{(f===void 0||f===!0)&&(this.off("sync",d),u())};this.on("sync",d)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ir(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ld(this.subdocs).map(e=>e.guid))}transact(e,t=null){return Ir(this,e,t)}get(e,t=en){const i=xf(this.share,e,()=>{const n=new t;return n._integrate(this,null),n}),s=i.constructor;if(t!==en&&s!==t)if(s===en){const n=new t;n._map=i._map,i._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=n}),n._start=i._start;for(let o=n._start;o!==null;o=o.right)o.parent=n;return n._length=i._length,this.share.set(e,n),n._integrate(this,null),n}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return i}getArray(e=""){return this.get(e,Mp)}getText(e=""){return this.get(e,$x)}getMap(e=""){return this.get(e,il)}getXmlFragment(e=""){return this.get(e,Gd)}toJSON(){const e={};return this.share.forEach((t,i)=>{e[i]=t.toJSON()}),e}destroy(){Ld(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new vf({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Ir(e.parent.doc,i=>{const s=t.doc;e.deleted||i.subdocsAdded.add(s),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class I4{constructor(){this.restEncoder=CA()}toUint8Array(){return Ja(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Pr(this.restEncoder,e)}writeDsLen(e){Pr(this.restEncoder,e)}}class F4 extends I4{writeLeftID(e){Pr(this.restEncoder,e.client),Pr(this.restEncoder,e.clock)}writeRightID(e){Pr(this.restEncoder,e.client),Pr(this.restEncoder,e.clock)}writeClient(e){Pr(this.restEncoder,e)}writeInfo(e){DS(this.restEncoder,e)}writeString(e){_d(this.restEncoder,e)}writeParentInfo(e){Pr(this.restEncoder,e?1:0)}writeTypeRef(e){Pr(this.restEncoder,e)}writeLen(e){Pr(this.restEncoder,e)}writeAny(e){d0(this.restEncoder,e)}writeBuf(e){ws(this.restEncoder,e)}writeJSON(e){_d(this.restEncoder,JSON.stringify(e))}writeKey(e){_d(this.restEncoder,e)}}class M4{constructor(){this.restEncoder=CA(),this.dsCurrVal=0}toUint8Array(){return Ja(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Pr(this.restEncoder,t)}writeDsLen(e){e===0&&Yc(),Pr(this.restEncoder,e-1),this.dsCurrVal+=e}}class B4 extends M4{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new fE,this.clientEncoder=new Xm,this.leftClockEncoder=new fE,this.rightClockEncoder=new fE,this.infoEncoder=new tP(DS),this.stringEncoder=new h4,this.parentInfoEncoder=new tP(DS),this.typeRefEncoder=new Xm,this.lenEncoder=new Xm}toUint8Array(){const e=CA();return Pr(e,0),ws(e,this.keyClockEncoder.toUint8Array()),ws(e,this.clientEncoder.toUint8Array()),ws(e,this.leftClockEncoder.toUint8Array()),ws(e,this.rightClockEncoder.toUint8Array()),ws(e,Ja(this.infoEncoder)),ws(e,this.stringEncoder.toUint8Array()),ws(e,Ja(this.parentInfoEncoder)),ws(e,this.typeRefEncoder.toUint8Array()),ws(e,this.lenEncoder.toUint8Array()),NA(e,Ja(this.restEncoder)),Ja(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){d0(this.restEncoder,e)}writeBuf(e){ws(this.restEncoder,e)}writeJSON(e){d0(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const L4=(r,e,t,i)=>{i=yf(i,e[0].id.clock);const s=ll(e,i);Pr(r.restEncoder,e.length-s),r.writeClient(t),Pr(r.restEncoder,i);const n=e[s];n.write(r,i-n.id.clock);for(let o=s+1;o<e.length;o++)e[o].write(r,0)},U4=(r,e,t)=>{const i=new Map;t.forEach((s,n)=>{Vn(e,n)>s&&i.set(n,s)}),BA(e).forEach((s,n)=>{t.has(n)||i.set(n,0)}),Pr(r.restEncoder,i.size),Ld(i.entries()).sort((s,n)=>n[0]-s[0]).forEach(([s,n])=>{L4(r,e.clients.get(s),s,n)})},G4=(r,e)=>U4(r,e.doc.store,e.beforeState);class H4{constructor(){this.l=[]}}const oP=()=>new H4,aP=(r,e)=>r.l.push(e),lP=(r,e)=>{const t=r.l,i=t.length;r.l=t.filter(s=>e!==s),i===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},IO=(r,e,t)=>DA(r.l,[e,t]);class Ym{constructor(e,t){this.client=e,this.clock=t}}const tm=(r,e)=>r===e||r!==null&&e!==null&&r.client===e.client&&r.clock===e.clock,zr=(r,e)=>new Ym(r,e),z4=r=>{for(const[e,t]of r.doc.share.entries())if(t===r)return e;throw Yc()},jx=(r,e)=>{for(;e!==null;){if(e.parent===r)return!0;e=e.parent._item}return!1};class j4{constructor(e,t){this.ds=e,this.sv=t}}const V4=(r,e)=>new j4(r,e);V4(O4(),new Map);const i_=(r,e)=>e===void 0?!r.deleted:e.sv.has(r.id.client)&&(e.sv.get(r.id.client)||0)>r.id.clock&&!Q0(e.ds,r.id),OS=(r,e)=>{const t=xf(r.meta,OS,Bd),i=r.doc.store;t.has(e)||(e.sv.forEach((s,n)=>{s<Vn(i,n)&&us(r,zr(n,s))}),Ud(r,e.ds,s=>{}),t.add(e))};class W4{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const BA=r=>{const e=new Map;return r.clients.forEach((t,i)=>{const s=t[t.length-1];e.set(i,s.id.clock+s.length)}),e},Vn=(r,e)=>{const t=r.clients.get(e);if(t===void 0)return 0;const i=t[t.length-1];return i.id.clock+i.length},FO=(r,e)=>{let t=r.clients.get(e.id.client);if(t===void 0)t=[],r.clients.set(e.id.client,t);else{const i=t[t.length-1];if(i.id.clock+i.length!==e.id.clock)throw Yc()}t.push(e)},ll=(r,e)=>{let t=0,i=r.length-1,s=r[i],n=s.id.clock;if(n===e)return i;let o=Xc(e/(n+s.length-1)*i);for(;t<=i;){if(s=r[o],n=s.id.clock,n<=e){if(e<n+s.length)return o;t=o+1}else i=o-1;o=Xc((t+i)/2)}throw Yc()},$4=(r,e)=>{const t=r.clients.get(e.client);return t[ll(t,e.clock)]},qm=$4,NS=(r,e,t)=>{const i=ll(e,t),s=e[i];return s.id.clock<t&&s instanceof ei?(e.splice(i+1,0,eN(r,s,t-s.id.clock)),i+1):i},us=(r,e)=>{const t=r.doc.store.clients.get(e.client);return t[NS(r,t,e.clock)]},uP=(r,e,t)=>{const i=e.clients.get(t.client),s=ll(i,t.clock),n=i[s];return t.clock!==n.id.clock+n.length-1&&n.constructor!==su&&i.splice(s+1,0,eN(r,n,t.clock-n.id.clock+1)),n},K4=(r,e,t)=>{const i=r.clients.get(e.id.client);i[ll(i,e.id.clock)]=t},MO=(r,e,t,i,s)=>{if(i===0)return;const n=t+i;let o=NS(r,e,t),a;do a=e[o++],n<a.id.clock+a.length&&NS(r,e,n),s(a);while(o<e.length&&e[o].id.clock<n)};class X4{constructor(e,t,i){this.doc=e,this.deleteSet=new r1,this.beforeState=BA(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const cP=(r,e)=>e.deleteSet.clients.size===0&&!TL(e.afterState,(t,i)=>e.beforeState.get(i)!==t)?!1:(FA(e.deleteSet),G4(r,e),N4(r,e.deleteSet),!0),hP=(r,e,t)=>{const i=e._item;(i===null||i.id.clock<(r.beforeState.get(i.id.client)||0)&&!i.deleted)&&xf(r.changed,e,Bd).add(t)},Qm=(r,e)=>{const t=r[e-1],i=r[e];t.deleted===i.deleted&&t.constructor===i.constructor&&t.mergeWith(i)&&(r.splice(e,1),i instanceof ei&&i.parentSub!==null&&i.parent._map.get(i.parentSub)===i&&i.parent._map.set(i.parentSub,t))},Y4=(r,e,t)=>{for(const[i,s]of r.clients.entries()){const n=e.clients.get(i);for(let o=s.length-1;o>=0;o--){const a=s[o],l=a.clock+a.len;for(let u=ll(n,a.clock),d=n[u];u<n.length&&d.id.clock<l;d=n[++u]){const f=n[u];if(a.clock+a.len<=f.id.clock)break;f instanceof ei&&f.deleted&&!f.keep&&t(f)&&f.gc(e,!1)}}}},q4=(r,e)=>{r.clients.forEach((t,i)=>{const s=e.clients.get(i);for(let n=t.length-1;n>=0;n--){const o=t[n],a=wO(s.length-1,1+ll(s,o.clock+o.len-1));for(let l=a,u=s[l];l>0&&u.id.clock>=o.clock;u=s[--l])Qm(s,l)}})},BO=(r,e)=>{if(e<r.length){const t=r[e],i=t.doc,s=i.store,n=t.deleteSet,o=t._mergeStructs;try{FA(n),t.afterState=BA(t.doc.store),i.emit("beforeObserverCalls",[t,i]);const a=[];t.changed.forEach((l,u)=>a.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(t,l)})),a.push(()=>{t.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=u,d._path=null}),l.sort((d,f)=>d.path.length-f.path.length),IO(u._dEH,l,t))})}),a.push(()=>i.emit("afterTransaction",[t,i])),DA(a,[]),t._needFormattingCleanup&&uU(t)}finally{i.gc&&Y4(n,s,i.gcFilter),q4(n,s),t.afterState.forEach((d,f)=>{const g=t.beforeState.get(f)||0;if(g!==d){const x=s.clients.get(f),E=yf(ll(x,g),1);for(let P=x.length-1;P>=E;P--)Qm(x,P)}});for(let d=0;d<o.length;d++){const{client:f,clock:g}=o[d].id,x=s.clients.get(f),E=ll(x,g);E+1<x.length&&Qm(x,E+1),E>0&&Qm(x,E)}if(!t.local&&t.afterState.get(i.clientID)!==t.beforeState.get(i.clientID)&&(T4(CO,PO,"[yjs] ",RO,DO,"Changed the client-id because another client seems to be using it."),i.clientID=NO()),i.emit("afterTransactionCleanup",[t,i]),i._observers.has("update")){const d=new F4;cP(d,t)&&i.emit("update",[d.toUint8Array(),t.origin,i,t])}if(i._observers.has("updateV2")){const d=new B4;cP(d,t)&&i.emit("updateV2",[d.toUint8Array(),t.origin,i,t])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:u}=t;(a.size>0||u.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=i.clientID,d.collectionid==null&&(d.collectionid=i.collectionid),i.subdocs.add(d)}),u.forEach(d=>i.subdocs.delete(d)),i.emit("subdocs",[{loaded:l,added:a,removed:u},i,t]),u.forEach(d=>d.destroy())),r.length<=e+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,r])):BO(r,e+1)}}},Ir=(r,e,t=null,i=!0)=>{const s=r._transactionCleanups;let n=!1,o=null;r._transaction===null&&(n=!0,r._transaction=new X4(r,t,i),s.push(r._transaction),s.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{o=e(r._transaction)}finally{if(n){const a=r._transaction===s[0];r._transaction=null,a&&BO(s,0)}}return o};class Q4{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const dP=(r,e,t)=>{Ud(r,t.deletions,i=>{i instanceof ei&&e.scope.some(s=>jx(s,i))&&HA(i,!1)})},fP=(r,e,t)=>{let i=null,s=null;const n=r.doc,o=r.scope;if(Ir(n,a=>{for(;e.length>0&&i===null;){const l=n.store,u=e.pop(),d=new Set,f=[];let g=!1;Ud(a,u.insertions,x=>{if(x instanceof ei){if(x.redone!==null){let{item:E,diff:P}=yU(l,x.id);P>0&&(E=us(a,zr(E.id.client,E.id.clock+P))),x=E}!x.deleted&&o.some(E=>jx(E,x))&&f.push(x)}}),Ud(a,u.deletions,x=>{x instanceof ei&&o.some(E=>jx(E,x))&&!Q0(u.insertions,x.id)&&d.add(x)}),d.forEach(x=>{g=tN(a,x,d,u.insertions,r.ignoreRemoteMapChanges,r)!==null||g});for(let x=f.length-1;x>=0;x--){const E=f[x];r.deleteFilter(E)&&(E.delete(a),g=!0)}i=g?u:null}a.changed.forEach((l,u)=>{l.has(null)&&u._searchMarker&&(u._searchMarker.length=0)}),s=a},r),i!=null){const a=s.changedParentTypes;r.emit("stack-item-popped",[{stackItem:i,type:t,changedParentTypes:a},r])}return i};class J4 extends SO{constructor(e,{captureTimeout:t=500,captureTransaction:i=l=>!0,deleteFilter:s=()=>!0,trackedOrigins:n=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=TS(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.addToScope(e),this.deleteFilter=s,n.add(this),this.trackedOrigins=n,this.captureTransaction=i,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=a,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=t,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(b=>l.changedParentTypes.has(b))||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const u=this.undoing,d=this.redoing,f=u?this.redoStack:this.undoStack;u?this.stopCapturing():d||this.clear(!1,!0);const g=new r1;l.afterState.forEach((b,R)=>{const D=l.beforeState.get(R)||0,C=b-D;C>0&&MA(g,R,D,C)});const x=p4();let E=!1;if(this.lastChange>0&&x-this.lastChange<this.captureTimeout&&f.length>0&&!u&&!d){const b=f[f.length-1];b.deletions=sP([b.deletions,l.deleteSet]),b.insertions=sP([b.insertions,g])}else f.push(new Q4(l.deleteSet,g)),E=!0;!u&&!d&&(this.lastChange=x),Ud(l,l.deleteSet,b=>{b instanceof ei&&this.scope.some(R=>jx(R,b))&&HA(b,!0)});const P=[{stackItem:f[f.length-1],origin:l.origin,type:u?"redo":"undo",changedParentTypes:l.changedParentTypes},this];E?this.emit("stack-item-added",P):this.emit("stack-item-updated",P)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=TS(e)?e:[e],e.forEach(t=>{this.scope.every(i=>i!==t)&&this.scope.push(t)})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(i=>{e&&(this.undoStack.forEach(s=>dP(i,this,s)),this.undoStack=[]),t&&(this.redoStack.forEach(s=>dP(i,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=fP(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=fP(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class i1{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Z4(this.currentTarget,this.target))}deletes(e){return Q0(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(s=>{if(s!==null){const n=t._map.get(s);let o,a;if(this.adds(n)){let l=n.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(n))if(l!==null&&this.deletes(l))o="delete",a=uE(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=uE(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(n))o="delete",a=uE(n.content.getContent());else return;e.set(s,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){const t=this.target,i=Bd(),s=Bd(),n=[];if(e={added:i,deleted:s,delta:n,keys:this.keys},this.transaction.changed.get(t).has(null)){let a=null;const l=()=>{a&&n.push(a)};for(let u=t._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=u.length,s.add(u)):this.adds(u)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(u.content.getContent()),i.add(u)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=u.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const Z4=(r,e)=>{const t=[];for(;e._item!==null&&e!==r;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let i=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)s.deleted||i++,s=s.right;t.unshift(i)}e=e._item.parent}return t},LO=80;let LA=0;class eU{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=LA++}}const tU=r=>{r.timestamp=LA++},UO=(r,e,t)=>{r.p.marker=!1,r.p=e,e.marker=!0,r.index=t,r.timestamp=LA++},rU=(r,e,t)=>{if(r.length>=LO){const i=r.reduce((s,n)=>s.timestamp<n.timestamp?s:n);return UO(i,e,t),i}else{const i=new eU(e,t);return r.push(i),i}},n1=(r,e)=>{if(r._start===null||e===0||r._searchMarker===null)return null;const t=r._searchMarker.length===0?null:r._searchMarker.reduce((n,o)=>Km(e-n.index)<Km(e-o.index)?n:o);let i=r._start,s=0;for(t!==null&&(i=t.p,s=t.index,tU(t));i.right!==null&&s<e;){if(!i.deleted&&i.countable){if(e<s+i.length)break;s+=i.length}i=i.right}for(;i.left!==null&&s>e;)i=i.left,!i.deleted&&i.countable&&(s-=i.length);for(;i.left!==null&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)i=i.left,!i.deleted&&i.countable&&(s-=i.length);return t!==null&&Km(t.index-s)<i.parent.length/LO?(UO(t,i,s),t):rU(r._searchMarker,i,s)},f0=(r,e,t)=>{for(let i=r.length-1;i>=0;i--){const s=r[i];if(t>0){let n=s.p;for(n.marker=!1;n&&(n.deleted||!n.countable);)n=n.left,n&&!n.deleted&&n.countable&&(s.index-=n.length);if(n===null||n.marker===!0){r.splice(i,1);continue}s.p=n,n.marker=!0}(e<s.index||t>0&&e===s.index)&&(s.index=yf(e,s.index+t))}},s1=(r,e,t)=>{const i=r,s=e.changedParentTypes;for(;xf(s,r,()=>[]).push(t),r._item!==null;)r=r._item.parent;IO(i._eH,t,e)};class en{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=oP(),this._dEH=oP(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw xa()}clone(){throw xa()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){aP(this._eH,e)}observeDeep(e){aP(this._dEH,e)}unobserve(e){lP(this._eH,e)}unobserveDeep(e){lP(this._dEH,e)}toJSON(){}}const GO=(r,e,t)=>{e<0&&(e=r._length+e),t<0&&(t=r._length+t);let i=t-e;const s=[];let n=r._start;for(;n!==null&&i>0;){if(n.countable&&!n.deleted){const o=n.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&i>0;a++)s.push(o[a]),i--;e=0}}n=n.right}return s},HO=r=>{const e=[];let t=r._start;for(;t!==null;){if(t.countable&&!t.deleted){const i=t.content.getContent();for(let s=0;s<i.length;s++)e.push(i[s])}t=t.right}return e},_0=(r,e)=>{let t=0,i=r._start;for(;i!==null;){if(i.countable&&!i.deleted){const s=i.content.getContent();for(let n=0;n<s.length;n++)e(s[n],t++,r)}i=i.right}},zO=(r,e)=>{const t=[];return _0(r,(i,s)=>{t.push(e(i,s,r))}),t},iU=r=>{let e=r._start,t=null,i=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),i=0,e=e.right}const s=t[i++];return t.length<=i&&(t=null),{done:!1,value:s}}}},jO=(r,e)=>{const t=n1(r,e);let i=r._start;for(t!==null&&(i=t.p,e-=t.index);i!==null;i=i.right)if(!i.deleted&&i.countable){if(e<i.length)return i.content.getContent()[e];e-=i.length}},Vx=(r,e,t,i)=>{let s=t;const n=r.doc,o=n.clientID,a=n.store,l=t===null?e._start:t.right;let u=[];const d=()=>{u.length>0&&(s=new ei(zr(o,Vn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Hd(u)),s.integrate(r,0),u=[])};i.forEach(f=>{if(f===null)u.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(f);break;default:switch(d(),f.constructor){case Uint8Array:case ArrayBuffer:s=new ei(zr(o,Vn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new o1(new Uint8Array(f))),s.integrate(r,0);break;case vf:s=new ei(zr(o,Vn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new a1(f)),s.integrate(r,0);break;default:if(f instanceof en)s=new ei(zr(o,Vn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Du(f)),s.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},VO=t1("Length exceeded!"),WO=(r,e,t,i)=>{if(t>e._length)throw VO;if(t===0)return e._searchMarker&&f0(e._searchMarker,t,i.length),Vx(r,e,null,i);const s=t,n=n1(e,t);let o=e._start;for(n!==null&&(o=n.p,t-=n.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&us(r,zr(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&f0(e._searchMarker,s,i.length),Vx(r,e,o,i)},nU=(r,e,t)=>{let s=(e._searchMarker||[]).reduce((n,o)=>o.index>n.index?o:n,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return Vx(r,e,s,t)},$O=(r,e,t,i)=>{if(i===0)return;const s=t,n=i,o=n1(e,t);let a=e._start;for(o!==null&&(a=o.p,t-=o.index);a!==null&&t>0;a=a.right)!a.deleted&&a.countable&&(t<a.length&&us(r,zr(a.id.client,a.id.clock+t)),t-=a.length);for(;i>0&&a!==null;)a.deleted||(i<a.length&&us(r,zr(a.id.client,a.id.clock+i)),a.delete(r),i-=a.length),a=a.right;if(i>0)throw VO;e._searchMarker&&f0(e._searchMarker,s,-n+i)},Wx=(r,e,t)=>{const i=e._map.get(t);i!==void 0&&i.delete(r)},UA=(r,e,t,i)=>{const s=e._map.get(t)||null,n=r.doc,o=n.clientID;let a;if(i==null)a=new Hd([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Hd([i]);break;case Uint8Array:a=new o1(i);break;case vf:a=new a1(i);break;default:if(i instanceof en)a=new Du(i);else throw new Error("Unexpected content type")}new ei(zr(o,Vn(n.store,o)),s,s&&s.lastId,null,null,e,t,a).integrate(r,0)},GA=(r,e)=>{const t=r._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},KO=r=>{const e={};return r._map.forEach((t,i)=>{t.deleted||(e[i]=t.content.getContent()[t.length-1])}),e},XO=(r,e)=>{const t=r._map.get(e);return t!==void 0&&!t.deleted},rm=r=>R4(r.entries(),e=>!e[1].deleted);class sU extends i1{constructor(e,t){super(e,t),this._transaction=t}}class Mp extends en{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Mp;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Mp}clone(){const e=new Mp;return e.insert(0,this.toArray().map(t=>t instanceof en?t.clone():t)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),s1(this,e,new sU(this,e))}insert(e,t){this.doc!==null?Ir(this.doc,i=>{WO(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?Ir(this.doc,t=>{nU(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?Ir(this.doc,i=>{$O(i,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return jO(this,e)}toArray(){return HO(this)}slice(e=0,t=this.length){return GO(this,e,t)}toJSON(){return this.map(e=>e instanceof en?e.toJSON():e)}map(e){return zO(this,e)}forEach(e){_0(this,e)}[Symbol.iterator](){return iU(this)}_write(e){e.writeTypeRef(_U)}}class oU extends i1{constructor(e,t,i){super(e,t),this.keysChanged=i}}class il extends en{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((i,s)=>{this.set(s,i)}),this._prelimContent=null}_copy(){return new il}clone(){const e=new il;return this.forEach((t,i)=>{e.set(i,t instanceof en?t.clone():t)}),e}_callObserver(e,t){s1(this,e,new oU(this,e,t))}toJSON(){const e={};return this._map.forEach((t,i)=>{if(!t.deleted){const s=t.content.getContent()[t.length-1];e[i]=s instanceof en?s.toJSON():s}}),e}get size(){return[...rm(this._map)].length}keys(){return _E(rm(this._map),e=>e[0])}values(){return _E(rm(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return _E(rm(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((t,i)=>{t.deleted||e(t.content.getContent()[t.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ir(this.doc,t=>{Wx(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?Ir(this.doc,i=>{UA(i,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return GA(this,e)}has(e){return XO(this,e)}clear(){this.doc!==null?Ir(this.doc,e=>{this.forEach(function(t,i,s){Wx(e,s,i)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(pU)}}const uu=(r,e)=>r===e||typeof r=="object"&&typeof e=="object"&&r&&e&&KL(r,e);class IS{constructor(e,t,i,s){this.left=e,this.right=t,this.index=i,this.currentAttributes=s}forward(){switch(this.right===null&&Yc(),this.right.content.constructor){case Gi:this.right.deleted||Ef(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const _P=(r,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case Gi:e.right.deleted||Ef(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&us(r,zr(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},im=(r,e,t)=>{const i=new Map,s=n1(e,t);if(s){const n=new IS(s.p.left,s.p,s.index,i);return _P(r,n,t-s.index)}else{const n=new IS(null,e._start,0,i);return _P(r,n,t)}},YO=(r,e,t,i)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===Gi&&uu(i.get(t.right.content.key),t.right.content.value));)t.right.deleted||i.delete(t.right.content.key),t.forward();const s=r.doc,n=s.clientID;i.forEach((o,a)=>{const l=t.left,u=t.right,d=new ei(zr(n,Vn(s.store,n)),l,l&&l.lastId,u,u&&u.id,e,null,new Gi(a,o));d.integrate(r,0),t.right=d,t.forward()})},Ef=(r,e)=>{const{key:t,value:i}=e;i===null?r.delete(t):r.set(t,i)},qO=(r,e)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===Gi&&uu(e[r.right.content.key]||null,r.right.content.value)))break;r.forward()}},QO=(r,e,t,i)=>{const s=r.doc,n=s.clientID,o=new Map;for(const a in i){const l=i[a],u=t.currentAttributes.get(a)||null;if(!uu(u,l)){o.set(a,u);const{left:d,right:f}=t;t.right=new ei(zr(n,Vn(s.store,n)),d,d&&d.lastId,f,f&&f.id,e,null,new Gi(a,l)),t.right.integrate(r,0),t.forward()}}return o},pE=(r,e,t,i,s)=>{t.currentAttributes.forEach((g,x)=>{s[x]===void 0&&(s[x]=null)});const n=r.doc,o=n.clientID;qO(t,s);const a=QO(r,e,t,s),l=i.constructor===String?new ul(i):i instanceof en?new Du(i):new Sf(i);let{left:u,right:d,index:f}=t;e._searchMarker&&f0(e._searchMarker,t.index,l.getLength()),d=new ei(zr(o,Vn(n.store,o)),u,u&&u.lastId,d,d&&d.id,e,null,l),d.integrate(r,0),t.right=d,t.index=f,t.forward(),YO(r,e,t,a)},pP=(r,e,t,i,s)=>{const n=r.doc,o=n.clientID;qO(t,s);const a=QO(r,e,t,s);e:for(;t.right!==null&&(i>0||a.size>0&&(t.right.deleted||t.right.content.constructor===Gi));){if(!t.right.deleted)switch(t.right.content.constructor){case Gi:{const{key:l,value:u}=t.right.content,d=s[l];if(d!==void 0){if(uu(d,u))a.delete(l);else{if(i===0)break e;a.set(l,u)}t.right.delete(r)}else t.currentAttributes.set(l,u);break}default:i<t.right.length&&us(r,zr(t.right.id.client,t.right.id.clock+i)),i-=t.right.length;break}t.forward()}if(i>0){let l="";for(;i>0;i--)l+=`
`;t.right=new ei(zr(o,Vn(n.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new ul(l)),t.right.integrate(r,0),t.forward()}YO(r,e,t,a)},JO=(r,e,t,i,s)=>{let n=e;const o=ma();for(;n&&(!n.countable||n.deleted);){if(!n.deleted&&n.content.constructor===Gi){const u=n.content;o.set(u.key,u)}n=n.right}let a=0,l=!1;for(;e!==n;){if(t===e&&(l=!0),!e.deleted){const u=e.content;switch(u.constructor){case Gi:{const{key:d,value:f}=u,g=i.get(d)||null;(o.get(d)!==u||g===f)&&(e.delete(r),a++,!l&&(s.get(d)||null)===f&&g!==f&&(g===null?s.delete(d):s.set(d,g))),!l&&!e.deleted&&Ef(s,u);break}}}e=e.right}return a},aU=(r,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Gi){const i=e.content.key;t.has(i)?e.delete(r):t.add(i)}e=e.left}},lU=r=>{let e=0;return Ir(r.doc,t=>{let i=r._start,s=r._start,n=ma();const o=kS(n);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case Gi:Ef(o,s.content);break;default:e+=JO(t,i,s,n,o),n=kS(o),i=s;break}s=s.right}}),e},uU=r=>{const e=new Set,t=r.doc;for(const[i,s]of r.afterState.entries()){const n=r.beforeState.get(i)||0;s!==n&&MO(r,t.store.clients.get(i),n,s,o=>{!o.deleted&&o.content.constructor===Gi&&o.constructor!==su&&e.add(o.parent)})}Ir(t,i=>{Ud(r,r.deleteSet,s=>{if(s instanceof su||!s.parent._hasFormatting||e.has(s.parent))return;const n=s.parent;s.content.constructor===Gi?e.add(n):aU(i,s)});for(const s of e)lU(s)})},gP=(r,e,t)=>{const i=t,s=kS(e.currentAttributes),n=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Du:case Sf:case ul:t<e.right.length&&us(r,zr(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(r);break}e.forward()}n&&JO(r,n,e.right,s,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&f0(o._searchMarker,e.index,-i+t),e};class cU extends i1{constructor(e,t,i){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,i.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];Ir(e,i=>{const s=new Map,n=new Map;let o=this.target._start,a=null;const l={};let u="",d=0,f=0;const g=()=>{if(a!==null){let x=null;switch(a){case"delete":f>0&&(x={delete:f}),f=0;break;case"insert":(typeof u=="object"||u.length>0)&&(x={insert:u},s.size>0&&(x.attributes={},s.forEach((E,P)=>{E!==null&&(x.attributes[P]=E)}))),u="";break;case"retain":d>0&&(x={retain:d},VL(l)||(x.attributes=HL({},l))),d=0;break}x&&t.push(x),a=null}};for(;o!==null;){switch(o.content.constructor){case Du:case Sf:this.adds(o)?this.deletes(o)||(g(),a="insert",u=o.content.getContent()[0],g()):this.deletes(o)?(a!=="delete"&&(g(),a="delete"),f+=1):o.deleted||(a!=="retain"&&(g(),a="retain"),d+=1);break;case ul:this.adds(o)?this.deletes(o)||(a!=="insert"&&(g(),a="insert"),u+=o.content.str):this.deletes(o)?(a!=="delete"&&(g(),a="delete"),f+=o.length):o.deleted||(a!=="retain"&&(g(),a="retain"),d+=o.length);break;case Gi:{const{key:x,value:E}=o.content;if(this.adds(o)){if(!this.deletes(o)){const P=s.get(x)||null;uu(P,E)?E!==null&&o.delete(i):(a==="retain"&&g(),uu(E,n.get(x)||null)?delete l[x]:l[x]=E)}}else if(this.deletes(o)){n.set(x,E);const P=s.get(x)||null;uu(P,E)||(a==="retain"&&g(),l[x]=P)}else if(!o.deleted){n.set(x,E);const P=l[x];P!==void 0&&(uu(P,E)?P!==null&&o.delete(i):(a==="retain"&&g(),E===null?delete l[x]:l[x]=E))}o.deleted||(a==="insert"&&g(),Ef(s,o.content));break}}o=o.right}for(g();t.length>0;){const x=t[t.length-1];if(x.retain!==void 0&&x.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class $x extends en{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(i=>i())}catch(i){console.error(i)}this._pending=null}_copy(){return new $x}clone(){const e=new $x;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const i=new cU(this,e,t);s1(this,e,i),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===ul&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?Ir(this.doc,i=>{const s=new IS(null,this._start,0,new Map);for(let n=0;n<e.length;n++){const o=e[n];if(o.insert!==void 0){const a=!t&&typeof o.insert=="string"&&n===e.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&pE(i,this,s,a,o.attributes||{})}else o.retain!==void 0?pP(i,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&gP(i,s,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,i){const s=[],n=new Map,o=this.doc;let a="",l=this._start;function u(){if(a.length>0){const f={};let g=!1;n.forEach((E,P)=>{g=!0,f[P]=E});const x={insert:a};g&&(x.attributes=f),s.push(x),a=""}}const d=()=>{for(;l!==null;){if(i_(l,e)||t!==void 0&&i_(l,t))switch(l.content.constructor){case ul:{const f=n.get("ychange");e!==void 0&&!i_(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(u(),n.set("ychange",i?i("removed",l.id):{type:"removed"})):t!==void 0&&!i_(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(u(),n.set("ychange",i?i("added",l.id):{type:"added"})):f!==void 0&&(u(),n.delete("ychange")),a+=l.content.str;break}case Du:case Sf:{u();const f={insert:l.content.getContent()[0]};if(n.size>0){const g={};f.attributes=g,n.forEach((x,E)=>{g[E]=x})}s.push(f);break}case Gi:i_(l,e)&&(u(),Ef(n,l.content));break}l=l.right}u()};return e||t?Ir(o,f=>{e&&OS(f,e),t&&OS(f,t),d()},"cleanup"):d(),s}insert(e,t,i){if(t.length<=0)return;const s=this.doc;s!==null?Ir(s,n=>{const o=im(n,this,e);i||(i={},o.currentAttributes.forEach((a,l)=>{i[l]=a})),pE(n,this,o,t,i)}):this._pending.push(()=>this.insert(e,t,i))}insertEmbed(e,t,i={}){const s=this.doc;s!==null?Ir(s,n=>{const o=im(n,this,e);pE(n,this,o,t,i)}):this._pending.push(()=>this.insertEmbed(e,t,i))}delete(e,t){if(t===0)return;const i=this.doc;i!==null?Ir(i,s=>{gP(s,im(s,this,e),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,i){if(t===0)return;const s=this.doc;s!==null?Ir(s,n=>{const o=im(n,this,e);o.right!==null&&pP(n,this,o,t,i)}):this._pending.push(()=>this.format(e,t,i))}removeAttribute(e){this.doc!==null?Ir(this.doc,t=>{Wx(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?Ir(this.doc,i=>{UA(i,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return GA(this,e)}getAttributes(){return KO(this)}_write(e){e.writeTypeRef(gU)}}class gE{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===Kx||t.constructor===Gd)&&t._start!==null)e=t._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Gd extends en{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Gd}clone(){const e=new Gd;return e.insert(0,this.toArray().map(t=>t instanceof en?t.clone():t)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new gE(this,e)}querySelector(e){e=e.toUpperCase();const i=new gE(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return i.done?null:i.value}querySelectorAll(e){return e=e.toUpperCase(),Ld(new gE(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){s1(this,e,new hU(this,t,e))}toString(){return zO(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},i){const s=e.createDocumentFragment();return i!==void 0&&i._createAssociation(s,this),_0(this,n=>{s.insertBefore(n.toDOM(e,t,i),null)}),s}insert(e,t){this.doc!==null?Ir(this.doc,i=>{WO(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)Ir(this.doc,i=>{const s=e&&e instanceof en?e._item:e;Vx(i,this,s,t)});else{const i=this._prelimContent,s=e===null?0:i.findIndex(n=>n===e)+1;if(s===0&&e!==null)throw t1("Reference item not found");i.splice(s,0,...t)}}delete(e,t=1){this.doc!==null?Ir(this.doc,i=>{$O(i,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return HO(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return jO(this,e)}slice(e=0,t=this.length){return GO(this,e,t)}forEach(e){_0(this,e)}_write(e){e.writeTypeRef(xU)}}class Kx extends Gd{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((i,s)=>{this.setAttribute(s,i)}),this._prelimAttrs=null}_copy(){return new Kx(this.nodeName)}clone(){const e=new Kx(this.nodeName),t=this.getAttributes();return jL(t,(i,s)=>{typeof i=="string"&&e.setAttribute(s,i)}),e.insert(0,this.toArray().map(i=>i instanceof en?i.clone():i)),e}toString(){const e=this.getAttributes(),t=[],i=[];for(const a in e)i.push(a);i.sort();const s=i.length;for(let a=0;a<s;a++){const l=i[a];t.push(l+'="'+e[l]+'"')}const n=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${n}${o}>${super.toString()}</${n}>`}removeAttribute(e){this.doc!==null?Ir(this.doc,t=>{Wx(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?Ir(this.doc,i=>{UA(i,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return GA(this,e)}hasAttribute(e){return XO(this,e)}getAttributes(){return KO(this)}toDOM(e=document,t={},i){const s=e.createElement(this.nodeName),n=this.getAttributes();for(const o in n){const a=n[o];typeof a=="string"&&s.setAttribute(o,a)}return _0(this,o=>{s.appendChild(o.toDOM(e,t,i))}),i!==void 0&&i._createAssociation(s,this),s}_write(e){e.writeTypeRef(mU),e.writeKey(this.nodeName)}}class hU extends i1{constructor(e,t,i){super(e,i),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class ZO{constructor(e,t){this.id=e,this.length=t}get deleted(){throw xa()}mergeWith(e){return!1}write(e,t,i){throw xa()}integrate(e,t){throw xa()}}const dU=0;class su extends ZO{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),FO(e.doc.store,this)}write(e,t){e.writeInfo(dU),e.writeLen(this.length-t)}getMissing(e,t){return null}}class o1{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new o1(this.content)}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class Xx{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Xx(this.len)}splice(e){const t=new Xx(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){MA(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const fU=(r,e)=>new vf({guid:r,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class a1{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new a1(fU(this.doc.guid,this.opts))}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class Sf{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Sf(this.embed)}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class Gi{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Gi(this.key,this.value)}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){const i=t.parent;i._searchMarker=null,i._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class Hd{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Hd(this.arr)}splice(e){const t=new Hd(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let s=t;s<i;s++){const n=this.arr[s];e.writeAny(n)}}getRef(){return 8}}class ul{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ul(this.str)}splice(e){const t=new ul(this.str.slice(e));this.str=this.str.slice(0,e);const i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",t.str="\uFFFD"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const _U=0,pU=1,gU=2,mU=3,xU=4;class Du{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Du(this.type._copy())}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(i=>{i.deleted?e._mergeStructs.push(i):i.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(i=>{for(;i!==null;)i.gc(e,!0),i=i.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const yU=(r,e)=>{let t=e,i=0,s;do i>0&&(t=zr(t.client,t.clock+i)),s=qm(r,t),i=t.clock-s.id.clock,t=s.redone;while(t!==null&&s instanceof ei);return{item:s,diff:i}},HA=(r,e)=>{for(;r!==null&&r.keep!==e;)r.keep=e,r=r.parent._item},eN=(r,e,t)=>{const{client:i,clock:s}=e.id,n=new ei(zr(i,s+t),e,zr(i,s+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&n.markDeleted(),e.keep&&(n.keep=!0),e.redone!==null&&(n.redone=zr(e.redone.client,e.redone.clock+t)),e.right=n,n.right!==null&&(n.right.left=n),r._mergeStructs.push(n),n.parentSub!==null&&n.right===null&&n.parent._map.set(n.parentSub,n),e.length=t,n},mP=(r,e)=>RL(r,t=>Q0(t.deletions,e)),tN=(r,e,t,i,s,n)=>{const o=r.doc,a=o.store,l=o.clientID,u=e.redone;if(u!==null)return us(r,u);let d=e.parent._item,f=null,g;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!t.has(d)||tN(r,d,t,i,s,n)===null))return null;for(;d.redone!==null;)d=us(r,d.redone)}const x=d===null?e.parent:d.content.type;if(e.parentSub===null){for(f=e.left,g=e;f!==null;){let R=f;for(;R!==null&&R.parent._item!==d;)R=R.redone===null?null:us(r,R.redone);if(R!==null&&R.parent._item===d){f=R;break}f=f.left}for(;g!==null;){let R=g;for(;R!==null&&R.parent._item!==d;)R=R.redone===null?null:us(r,R.redone);if(R!==null&&R.parent._item===d){g=R;break}g=g.right}}else if(g=null,e.right&&!s){for(f=e;f!==null&&f.right!==null&&(f.right.redone||Q0(i,f.right.id)||mP(n.undoStack,f.right.id)||mP(n.redoStack,f.right.id));)for(f=f.right;f.redone;)f=us(r,f.redone);if(f&&f.right!==null)return null}else f=x._map.get(e.parentSub)||null;const E=Vn(a,l),P=zr(l,E),b=new ei(P,f,f&&f.lastId,g,g&&g.id,x,e.parentSub,e.content.copy());return e.redone=P,HA(b,!0),b.integrate(r,0),b};class ei extends ZO{constructor(e,t,i,s,n,o,a,l){super(e,l.getLength()),this.origin=i,this.left=t,this.right=s,this.rightOrigin=n,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?JT:0}set marker(e){(this.info&dE)>0!==e&&(this.info^=dE)}get marker(){return(this.info&dE)>0}get keep(){return(this.info&QT)>0}set keep(e){this.keep!==e&&(this.info^=QT)}get countable(){return(this.info&JT)>0}get deleted(){return(this.info&hE)>0}set deleted(e){this.deleted!==e&&(this.info^=hE)}markDeleted(){this.info|=hE}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Vn(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Vn(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ym&&this.id.client!==this.parent.client&&this.parent.clock>=Vn(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=uP(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=us(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===su||this.right&&this.right.constructor===su)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===ei&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===ei&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Ym){const i=qm(t,this.parent);i.constructor===su?this.parent=null:this.parent=i.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=uP(e,e.doc.store,zr(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let i=this.left,s;if(i!==null)s=i.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const n=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),n.add(s),tm(this.origin,s.origin)){if(s.id.client<this.id.client)i=s,n.clear();else if(tm(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(qm(e.doc.store,s.origin)))n.has(qm(e.doc.store,s.origin))||(i=s,n.clear());else break;s=s.right}this.left=i}if(this.left!==null){const i=this.left.right;this.right=i,this.left.right=this}else{let i;if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start,this.parent._start=this;this.right=i}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),FO(e.doc.store,this),this.content.integrate(e,this),hP(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new su(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:zr(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&tm(e.origin,this.lastId)&&this.right===e&&tm(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(i=>{i.p===e&&(i.p=this,!this.deleted&&this.countable&&(i.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),MA(e.deleteSet,this.id.client,this.id.clock,this.length),hP(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Yc();this.content.gc(e),t?K4(e,this,new su(this.id,this.length)):this.content=new Xx(this.length)}write(e,t){const i=t>0?zr(this.id.client,this.id.clock+t-1):this.origin,s=this.rightOrigin,n=this.parentSub,o=this.content.getRef()&ZL|(i===null?0:zx)|(s===null?0:bO)|(n===null?0:JL);if(e.writeInfo(o),i!==null&&e.writeLeftID(i),s!==null&&e.writeRightID(s),i===null&&s===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const u=z4(a);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Ym?(e.writeParentInfo(!1),e.writeLeftID(a)):Yc();n!==null&&e.writeString(n)}this.content.write(e,t)}}const rN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},iN="__ $YJS$ __";rN[iN]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");rN[iN]=!0;function vU(r,e){return t=>{const{ref:i,direction:s}=r,n=bL(),o=new il;if(o.set("id",n),Ip(e).forEach(a=>{const l=e[a];if(ao(l))o.set(a,l);else if(Id(l)){Q(a==="style");const u=new il;Ip(l).forEach(d=>{u.set(d,l[d])}),o.set(a,u)}else Ue()}),Q(e.type!==hi.Root),s===zn.inward){const a=t.getChildrenNodesOfId(i);if(o.set("from",i),a.length){const l=a.sort((u,d)=>Y0(d.get("order"),u.get("order")));o.set("order",ua(Sc("1",l[0].get("order"))))}else o.set("order","0.5")}else if(s===zn.backward||s===zn.forward){const a=t.getParentNodeOfId(i);if(!a)throw new Error("404");o.set("from",a.get("id"));const l=t.getNodeById(i);Q(l);const u=l.get("order");if(Q(u),s===zn.backward){const d=t.getNextSiblingNodeOfId(i),f=d?d.get("order"):"1";o.set("order",ua(Sc(u,f)))}else{const d=t.getPreviousSiblingNodeOfId(i),f=d?d.get("order"):"0";f==="0"?o.set("order",ua(u)):o.set("order",ua(Sc(u,f)))}}else Ue();return t.yModel.get("nodes").set(n,o),o}}function xP(r){return e=>{const{ref:t,direction:i=zn.self}=r;switch(i){case zn.forward:case zn.backward:EU(e,t,i);break;case zn.inward:nN(e,t);break;case zn.self:Yx(e,t);break;default:Ue()}}}function EU(r,e,t){const i=r.getNodeById(e);Q(i);const s=i.get("from");Q(s);const n=r.getChildrenNodesOfId(s).sort((a,l)=>Y0(a.get("order"),l.get("order"))),o=n.indexOf(i);if(t===zn.forward){if(o===0)throw new Error("400");Yx(r,n[o-1].get("id"))}else if(t===zn.backward){if(o===n.length-1)throw new Error("400");Yx(r,n[o+1].get("id"))}else et()}function nN(r,e){const t=r.getChildrenNodesOfId(e);for(let i=0,s=t.length;i<s;i++)Yx(r,t[i].get("id"))}function Yx(r,e){const{nodes:t}=r.getValue();nN(r,e),delete t[e]}function SU(r,e,t){return i=>{const s=i.getChildrenNodesOfId(e).sort((o,a)=>Y0(o.get("order"),a.get("order"))),n=i.getNodeById(r);if(Q(n),n.set("from",e),Ti(t))s.length?n.set("order",ua(Sc(s[s.length-1].get("order"),"1"))):n.set("order","0.5");else{const o=i.getNodeById(t);o||et();const a=s.indexOf(o);if(a===0)n.set("order",ua(o.get("order")));else{const l=s[a-1];n.set("order",ua(Sc(l.get("order"),o.get("order"))))}}}}function wU(r,e){return t=>{const i=t.getParentNodeOfId(r),s=t.getChildrenNodesOfId(i.get("id")).sort((o,a)=>Y0(o.get("order"),a.get("order"))),n=t.getNodeById(r);if(Q(n),Q(n.get("from")===i.get("id")),Ti(e))s.length?n.set("order",ua(Sc(s[s.length-1].get("order"),"1"))):n.set("order","0.5");else{const o=t.getNodeById(e),a=s.indexOf(o);if(a===0)n.set("order",ua(o.get("order")));else{const l=s[a-1];l.get("id")!==r&&n.set("order",ua(Sc(l.get("order"),o.get("order"))))}}}}class qx{constructor(e,t,i){c(this,"versionId");c(this,"isUndoing");c(this,"isRedoing");c(this,"resultingSelection");this.versionId=e,this.isUndoing=t,this.isRedoing=i}merge(e){const t=e.versionId,i=this.isUndoing||e.isUndoing,s=this.isRedoing||e.isRedoing;return new qx(t,i,s)}}const aT=class extends Ht{constructor(t,i,s,n){super();c(this,"id",aT.MODEL_ID++);c(this,"_yModel");c(this,"_undoManager");c(this,"ctx");c(this,"_isDisposed",!1);c(this,"_isDisposing",!1);c(this,"_versionId",1);c(this,"_alternativeVersionId",1);c(this,"_isUndoing");c(this,"_isRedoing");c(this,"_associatedResource");c(this,"_eventEmitter",this._register(new AU));c(this,"_onWillDispose",this._register(new Dt));this.doc=i,this.modelService=n,this.ctx=n,this._isUndoing=!1,this._isRedoing=!1,typeof s>"u"||s===null?this._associatedResource=u0.parse(`inmemory://model/${this.id}.json`):this._associatedResource=s,this._yModel=this._processInput(t),this._undoManager=new J4(this._yModel),this._registerUndoRedoListeners(),Reflect.set(window,"model",this)}onDidChangeContent(t){return this._eventEmitter.slowEvent(i=>t(i))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._isDisposed=!0,super.dispose(),this._isDisposing=!1}_registerUndoRedoListeners(){const t="version",i="versionBefore",s=o=>{const{meta:a}=o.stackItem;if(o.type==="redo"&&(a.set(t,this._versionId),a.set(i,this._versionId-1)),o.type==="undo"&&o.origin!==this._undoManager){const l=this.getVersionId();this._increaseVersionId(),a.set(t,this.getVersionId()),a.set(i,l),this._emitContentChangedEvent(new qx(this._alternativeVersionId,!1,!1))}},n=o=>{const{meta:a}=o.stackItem;let l=a.get(i),u=a.get(t);const d=o.type==="undo",f=o.type==="redo";this._overwriteAlternativeVersionId(d?l:u),this._emitContentChangedEvent(new qx(this._alternativeVersionId,d,f))};this._undoManager.on("stack-item-added",s),this._undoManager.on("stack-item-popped",n),this._register(nn(()=>this._undoManager.off("stack-item-added",s))),this._register(nn(()=>this._undoManager.off("stack-item-popped",n)))}get onWillDispose(){return this._onWillDispose.event}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getVersionId(){return this._assertNotDisposed(),this._versionId}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_emitContentChangedEvent(t){this._isDisposing||this._eventEmitter.fire(t)}get undoManager(){return this._undoManager}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}get yModel(){return this._yModel}_processInput(t){const i=this.doc.getMap(this._associatedResource.toString()),s=new il;return i.set("nodes",s),Ip(t.nodes).forEach(n=>{const o=t.nodes[n],a=new il;s.set(n,a),Ip(o).forEach(l=>{const u=o[l];if(Id(u)){Q(l==="style");const d=new il;Ip(u).forEach(f=>{d.set(f,u[f])}),a.set(l,d)}else ao(u)?a.set(l,u):et()})}),i}getValue(){return this._yModel.toJSON()}get uri(){return this._associatedResource}_updateContextGuard(){if(!this.ctx.isUpdating())throw new Error("method should not be called outside transform()")}addNode(t,i){return this._updateContextGuard(),vU(sa(t),i)(this)}removeNode(t){this._updateContextGuard(),xP(t)(this)}removeNodes(t){this._updateContextGuard();for(const i of t)xP({ref:i,direction:zn.self})(this)}reparentNode(t,i,s=void 0){this._updateContextGuard(),SU(t,i,s)(this)}reorderNode(t,i=void 0){this._updateContextGuard(),wU(t,i)(this)}getNodeById(t){return EO(this._yModel).get(t)}getParentNodeOfId(t){const i=this.getNodeById(t);if(!i)return;const s=cp(i);return s?this.getNodeById(s):void 0}getPreviousSiblingNodeOfId(t){const i=this.getParentNodeOfId(t);if(!i)throw new Error("404");const s=this.getChildrenNodesOfId(i.get("id"));if(s.length<=1)return;const n=s.findIndex(a=>a.get("id")===t);return s[n-1]||null}getNextSiblingNodeOfId(t){const i=this.getParentNodeOfId(t);if(!i)throw new Error("404");const s=this.getChildrenNodesOfId(i.get("id"));if(s.length<=1)return;const n=s.findIndex(a=>a.get("id")===t);return s[n+1]||null}getAncestorNodesOfId(t){const i=[];let s=this.getParentNodeOfId(t);for(;s;)i.unshift(s),s=this.getParentNodeOfId(s.get("id"));return i}isAncestorNodeOfId(t,i){return this.getAncestorNodesOfId(i).some(n=>n.get("id")===t)}getChildrenNodesOfId(t){return Array.from(this._yModel.get("nodes").values()).filter(s=>s.get("from")===t).sort((s,n)=>Y0(s.get("order"),n.get("order")))}queryNodes(t){const i=this._yModel.get("nodes");Q(i);const s=[];for(const n of i.values())t(n)&&s.push(n);return s}};let Jm=aT;c(Jm,"MODEL_ID",0);class AU extends Ht{constructor(){super();c(this,"_fastEmitter",this._register(new Dt));c(this,"fastEvent",this._fastEmitter.event);c(this,"_slowEmitter",this._register(new Dt));c(this,"slowEvent",this._slowEmitter.event);c(this,"_deferredCnt");c(this,"_deferredEvent");this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(t){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.resultingSelection=t;const i=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(i),this._slowEmitter.fire(i)}}fire(t){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(t):this._deferredEvent=t;return}this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}var bU=Object.defineProperty,kU=Object.getOwnPropertyDescriptor,TU=(r,e,t,i)=>{for(var s=i>1?void 0:i?kU(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&bU(e,t,s),s},PU=(r,e)=>(t,i)=>e(t,i,r);let FS=class extends Jm{constructor(r,e,t,i){super(r,e,t,i)}replaceModel(r){Ue()}};FS=TU([PU(3,gf)],FS);var RU=Object.defineProperty,DU=Object.getOwnPropertyDescriptor,CU=(r,e,t,i)=>{for(var s=i>1?void 0:i?DU(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&RU(e,t,s),s},OU=(r,e)=>(t,i)=>e(t,i,r);function n_(r){return r.toString()}let MS=class extends Ht{constructor(e){super();c(this,"_serviceBrand");c(this,"id",performance.now());c(this,"doc",new vf);c(this,"_onModelAdded",this._register(new Dt));c(this,"onModelAdded",this._onModelAdded.event);c(this,"_onModelRemoved",this._register(new Dt));c(this,"onModelRemoved",this._onModelRemoved.event);c(this,"_models",new Map);c(this,"_disposedModels");c(this,"_disposedModelsHeapSize");c(this,"modelChangeParticipant");c(this,"updateStackDepth",0);c(this,"updateMode",ns.None);c(this,"modelVersionBeforeChange",new Map);c(this,"_forkSymbol");c(this,"_beforeCursorState");c(this,"_sessionSource");this.instantiationService=e,this._disposedModels=new Map,this._disposedModelsHeapSize=0,this.modelChangeParticipant=new aL}updateModel(e,t){this.instantiationService.invokeFunction(i=>{!i.get(pf).listCanvases().find(a=>a.model===e)||(Ue(),this.reset())})}createModel(e,t){const i=this._doCreateModel(e,t);return this._onModelAdded.fire(i),i}_doCreateModel(e,t){const i=this.instantiationService.createInstance(FS,e,this.doc,t);t&&this._disposedModels.has(n_(t))&&Ue();const s=n_(i.uri);if(this._models.has(s))throw new Error("ModelService: Cannot add model because it already exists!");return i.onWillDispose(()=>this._onWillDispose(i)),this._models.set(s,i),i}destroyModel(e){const t=this._models.get(n_(e));!t||t.dispose()}getModel(e){const t=n_(e);return this._models.get(t)}_onWillDispose(e){const t=n_(e.uri);this._models.delete(t),this._onModelRemoved.fire(e)}addChangeParticipant(e){return this.modelChangeParticipant.addSaveParticipant(e)}runChangeParticipants(e,t){this.modelChangeParticipant.participate(e,t)}getModelUniversally(e){return this._models.get(e)}getAllModels(){return Array.from(this._models.values())}beginUpdate(){this.updateStackDepth++}endUpdate(){this.updateStackDepth--}isUpdating(){return this.updateStackDepth>0}reset(){this.updateStackDepth=0,this.updateMode=ns.None}fork(e,t,i){if(!this._forkSymbol){this.isUpdating()&&et(),i&&(this._forkSymbol=i),this.updateMode===ns.Add&&this.commitAndMerge(this._sessionSource,t);for(const s of this.getAllModels())this.modelVersionBeforeChange.set(s,s.getVersionId());this._beforeCursorState=t.slice(),this._sessionSource=e}}add(e){this.updateMode===ns.None?this.updateMode=ns.Add:this.updateMode===ns.Transform&&et(),this.doUpdate(e)}commitAndMerge(e,t,i){this._forkSymbol&&i!==this._forkSymbol||(this._forkSymbol=void 0,this.updateMode=ns.None)}checkout(){this._forkSymbol=void 0,this.updateMode=ns.None}transform(e,t,i,s){if(this.updateMode===ns.Add&&this.commitAndMerge(this._sessionSource,i),this.updateMode===ns.None)this.updateMode=ns.Transform;else if(this.updateMode===ns.Transform)throw new Error("400");const n=this.doUpdate(t);return this.updateMode=ns.None,n}changeWithoutHistory(e){return this.doUpdate(e)}doUpdate(e){this.beginUpdate();let t=this.doc.transact(()=>{try{return e()}catch(i){console.error(i),et()}});return this.endUpdate(),t}};MS=CU([OU(0,pl)],MS);ba(gf,MS);class NU extends Ht{constructor(t,i){super();c(this,"_serviceBrand");this._contextKeyService=t,this._commandService=i}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(t){return vA(this._getResolver().lookupKeybindings(t).map(i=>i.resolvedKeybinding))}lookupKeybinding(t){const i=this._getResolver().lookupPrimaryKeybinding(t);if(!!i)return i.resolvedKeybinding}dispatchEvent(t,i){return this._dispatch(t,i)}softDispatch(t,i){const s=this.resolveKeyboardEvent(t),[n]=s.getDispatchParts();if(n===null)return null;const o=this._contextKeyService.getContext(i);return this._getResolver().resolve(o,n)}_dispatch(t,i){return this._doDispatch(this.resolveKeyboardEvent(t),i)}_doDispatch(t,i){let s=!1;const[n]=t.getDispatchParts();if(n===null)return s;const o=this._contextKeyService.getContext(i);t.getLabel();const a=this._getResolver().resolve(o,n);return a&&a.commandId&&(a.bubble||(s=!0),typeof a.commandArgs>"u"?this._commandService.executeCommand(a.commandId).then(void 0,l=>console.warn(l)):this._commandService.executeCommand(a.commandId,a.commandArgs).then(void 0,l=>console.warn(l))),s}}class Bp{constructor(e,t){c(this,"_defaultKeybindings");c(this,"_keybindings");c(this,"_defaultBoundCommands");c(this,"_map");c(this,"_lookupMap");this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let i=0,s=e.length;i<s;i++){const n=e[i].command;n&&this._defaultBoundCommands.set(n,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Bp.combine(e,t);for(let i=0,s=this._keybindings.length;i<s;i++){const n=this._keybindings[i];n.keypressParts.length!==0&&(n.when&&n.when.type===xS.False||this._addKeyPress(n.keypressParts[0],n))}}static _isTargetedForRemoval(e,t,i,s,n){return!(e.command!==s||t&&e.keypressParts[0]!==t||i&&e.keypressParts[1]!==i||n&&(!e.when||!n.equals(e.when)))}static combine(e,t){e=e.slice(0);const i=[];for(const s of t){if(!s.command||s.command.length===0||s.command.charAt(0)!=="-"){i.push(s);continue}const n=s.command.substr(1),o=s.keypressParts[0],a=s.keypressParts[1],l=s.when;for(let u=e.length-1;u>=0;u--)this._isTargetedForRemoval(e[u],o,a,n,l)&&e.splice(u,1)}return e.concat(i)}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){const n=i[s];if(n.command===t.command)continue;const o=n.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&n.keypressParts[1]!==t.keypressParts[1]||Bp.whenIsEntirelyIncluded(n.when,t.when)&&this._removeFromLookupMap(n)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return t?e?this._implies(e,t):!1:!0}static _implies(e,t){const i=e.negate(),s=o=>o.type===xS.Or?o.expr:[o],n=s(i).concat(s(t));for(let o=0;o<n.length;o++){const l=n[o].negate();for(let u=o+1;u<n.length;u++){const d=n[u];if(l.equals(d))return!0}}return!1}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(typeof t>"u"||t.length===0)return[];const i=[];let s=0;for(let n=t.length-1;n>=0;n--)i[s++]=t[n];return i}lookupPrimaryKeybinding(e){const t=this._lookupMap.get(e);return typeof t>"u"||t.length===0?null:t[t.length-1]}resolve(e,t){this._log(`| Resolving ${t}`);let i=null;const s=this._map.get(t);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;i=s;const n=this._findCommand(e,i);return n?(this._log(`\\ From ${i.length} keybinding entries, matched ${n.command}, when: ${IU(n.when)}, source: ${FU(n)}.`),{leaveChord:n.keypressParts.length>1,commandId:n.command,commandArgs:n.commandArgs,bubble:n.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const s=t[i];if(!!Bp.contextMatchesRules(e,s.when))return s}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}_log(...e){}}function IU(r){return r?`${r.serialize()}`:"no when condition"}function FU(r){return r.extensionId?r.isBuiltinExtension?`built-in extension ${r.extensionId}`:`user extension ${r.extensionId}`:r.isDefault?"built-in":"user"}const no=navigator.userAgent,MU=no.indexOf("Windows")>=0,BS=no.indexOf("Macintosh")>=0;no.indexOf("Linux")>=0;const BU=no.indexOf("Firefox")>=0,LU=no.indexOf("AppleWebKit")>=0,UU=no.indexOf("Chrome")>=0,GU=!UU&&no.indexOf("Safari")>=0;no.indexOf("iPad")>=0||GU&&navigator.maxTouchPoints>0;no.indexOf("Edge/")>=0&&no.indexOf("WebView/")>=0;no.indexOf("Electron/")>=0;no.indexOf("Android")>=0;var ya=(r=>(r[r.Windows=1]="Windows",r[r.Macintosh=2]="Macintosh",r[r.Linux=3]="Linux",r))(ya||{});const ac=BS?2:MU?1:3;var Te=(r=>(r[r.Unknown=0]="Unknown",r[r.Backspace=1]="Backspace",r[r.Tab=2]="Tab",r[r.Enter=3]="Enter",r[r.Shift=4]="Shift",r[r.Ctrl=5]="Ctrl",r[r.Alt=6]="Alt",r[r.PauseBreak=7]="PauseBreak",r[r.CapsLock=8]="CapsLock",r[r.Escape=9]="Escape",r[r.Space=10]="Space",r[r.PageUp=11]="PageUp",r[r.PageDown=12]="PageDown",r[r.End=13]="End",r[r.Home=14]="Home",r[r.LeftArrow=15]="LeftArrow",r[r.UpArrow=16]="UpArrow",r[r.RightArrow=17]="RightArrow",r[r.DownArrow=18]="DownArrow",r[r.Insert=19]="Insert",r[r.Delete=20]="Delete",r[r.KEY_0=21]="KEY_0",r[r.KEY_1=22]="KEY_1",r[r.KEY_2=23]="KEY_2",r[r.KEY_3=24]="KEY_3",r[r.KEY_4=25]="KEY_4",r[r.KEY_5=26]="KEY_5",r[r.KEY_6=27]="KEY_6",r[r.KEY_7=28]="KEY_7",r[r.KEY_8=29]="KEY_8",r[r.KEY_9=30]="KEY_9",r[r.KEY_A=31]="KEY_A",r[r.KEY_B=32]="KEY_B",r[r.KEY_C=33]="KEY_C",r[r.KEY_D=34]="KEY_D",r[r.KEY_E=35]="KEY_E",r[r.KEY_F=36]="KEY_F",r[r.KEY_G=37]="KEY_G",r[r.KEY_H=38]="KEY_H",r[r.KEY_I=39]="KEY_I",r[r.KEY_J=40]="KEY_J",r[r.KEY_K=41]="KEY_K",r[r.KEY_L=42]="KEY_L",r[r.KEY_M=43]="KEY_M",r[r.KEY_N=44]="KEY_N",r[r.KEY_O=45]="KEY_O",r[r.KEY_P=46]="KEY_P",r[r.KEY_Q=47]="KEY_Q",r[r.KEY_R=48]="KEY_R",r[r.KEY_S=49]="KEY_S",r[r.KEY_T=50]="KEY_T",r[r.KEY_U=51]="KEY_U",r[r.KEY_V=52]="KEY_V",r[r.KEY_W=53]="KEY_W",r[r.KEY_X=54]="KEY_X",r[r.KEY_Y=55]="KEY_Y",r[r.KEY_Z=56]="KEY_Z",r[r.Meta=57]="Meta",r[r.ContextMenu=58]="ContextMenu",r[r.F1=59]="F1",r[r.F2=60]="F2",r[r.F3=61]="F3",r[r.F4=62]="F4",r[r.F5=63]="F5",r[r.F6=64]="F6",r[r.F7=65]="F7",r[r.F8=66]="F8",r[r.F9=67]="F9",r[r.F10=68]="F10",r[r.F11=69]="F11",r[r.F12=70]="F12",r[r.F13=71]="F13",r[r.F14=72]="F14",r[r.F15=73]="F15",r[r.F16=74]="F16",r[r.F17=75]="F17",r[r.F18=76]="F18",r[r.F19=77]="F19",r[r.NumLock=78]="NumLock",r[r.ScrollLock=79]="ScrollLock",r[r.US_SEMICOLON=80]="US_SEMICOLON",r[r.US_EQUAL=81]="US_EQUAL",r[r.US_COMMA=82]="US_COMMA",r[r.US_MINUS=83]="US_MINUS",r[r.US_DOT=84]="US_DOT",r[r.US_SLASH=85]="US_SLASH",r[r.US_BACKTICK=86]="US_BACKTICK",r[r.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",r[r.US_BACKSLASH=88]="US_BACKSLASH",r[r.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",r[r.US_QUOTE=90]="US_QUOTE",r[r.OEM_8=91]="OEM_8",r[r.OEM_102=92]="OEM_102",r[r.NUMPAD_0=93]="NUMPAD_0",r[r.NUMPAD_1=94]="NUMPAD_1",r[r.NUMPAD_2=95]="NUMPAD_2",r[r.NUMPAD_3=96]="NUMPAD_3",r[r.NUMPAD_4=97]="NUMPAD_4",r[r.NUMPAD_5=98]="NUMPAD_5",r[r.NUMPAD_6=99]="NUMPAD_6",r[r.NUMPAD_7=100]="NUMPAD_7",r[r.NUMPAD_8=101]="NUMPAD_8",r[r.NUMPAD_9=102]="NUMPAD_9",r[r.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",r[r.NUMPAD_ADD=104]="NUMPAD_ADD",r[r.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",r[r.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",r[r.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",r[r.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",r[r.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",r[r.ABNT_C1=110]="ABNT_C1",r[r.ABNT_C2=111]="ABNT_C2",r[r.MAX_VALUE=112]="MAX_VALUE",r[r.Any=113]="Any",r[r.None=114]="None",r))(Te||{});class zA{constructor(){c(this,"_keyCodeToStr");c(this,"_strToKeyCode");this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const LS=new zA,US=new zA,GS=new zA;(function(){function r(e,t,i=t,s=i){LS.define(e,t),US.define(e,i),GS.define(e,s)}r(0,"unknown"),r(1,"Backspace"),r(2,"Tab"),r(3,"Enter"),r(4,"Shift"),r(5,"Ctrl"),r(6,"Alt"),r(7,"PauseBreak"),r(8,"CapsLock"),r(9,"Escape"),r(10,"Space"),r(11,"PageUp"),r(12,"PageDown"),r(13,"End"),r(14,"Home"),r(15,"LeftArrow","Left"),r(16,"UpArrow","Up"),r(17,"RightArrow","Right"),r(18,"DownArrow","Down"),r(19,"Insert"),r(20,"Delete"),r(21,"0"),r(22,"1"),r(23,"2"),r(24,"3"),r(25,"4"),r(26,"5"),r(27,"6"),r(28,"7"),r(29,"8"),r(30,"9"),r(31,"A"),r(32,"B"),r(33,"C"),r(34,"D"),r(35,"E"),r(36,"F"),r(37,"G"),r(38,"H"),r(39,"I"),r(40,"J"),r(41,"K"),r(42,"L"),r(43,"M"),r(44,"N"),r(45,"O"),r(46,"P"),r(47,"Q"),r(48,"R"),r(49,"S"),r(50,"T"),r(51,"U"),r(52,"V"),r(53,"W"),r(54,"X"),r(55,"Y"),r(56,"Z"),r(57,"Meta"),r(58,"ContextMenu"),r(59,"F1"),r(60,"F2"),r(61,"F3"),r(62,"F4"),r(63,"F5"),r(64,"F6"),r(65,"F7"),r(66,"F8"),r(67,"F9"),r(68,"F10"),r(69,"F11"),r(70,"F12"),r(71,"F13"),r(72,"F14"),r(73,"F15"),r(74,"F16"),r(75,"F17"),r(76,"F18"),r(77,"F19"),r(78,"NumLock"),r(79,"ScrollLock"),r(80,";",";","OEM_1"),r(81,"=","=","OEM_PLUS"),r(82,",",",","OEM_COMMA"),r(83,"-","-","OEM_MINUS"),r(84,".",".","OEM_PERIOD"),r(85,"/","/","OEM_2"),r(86,"`","`","OEM_3"),r(110,"ABNT_C1"),r(111,"ABNT_C2"),r(87,"[","[","OEM_4"),r(88,"\\","\\","OEM_5"),r(89,"]","]","OEM_6"),r(90,"'","'","OEM_7"),r(91,"OEM_8"),r(92,"OEM_102"),r(93,"NumPad0"),r(94,"NumPad1"),r(95,"NumPad2"),r(96,"NumPad3"),r(97,"NumPad4"),r(98,"NumPad5"),r(99,"NumPad6"),r(100,"NumPad7"),r(101,"NumPad8"),r(102,"NumPad9"),r(103,"NumPad_Multiply"),r(104,"NumPad_Add"),r(105,"NumPad_Separator"),r(106,"NumPad_Subtract"),r(107,"NumPad_Decimal"),r(108,"NumPad_Divide")})();var p0;(r=>{function e(o){return LS.keyCodeToStr(o)}r.toString=e;function t(o){return LS.strToKeyCode(o)}r.fromString=t;function i(o){return US.keyCodeToStr(o)}r.toUserSettingsUS=i;function s(o){return GS.keyCodeToStr(o)}r.toUserSettingsGeneral=s;function n(o){return US.strToKeyCode(o)||GS.strToKeyCode(o)}r.fromUserSettings=n})(p0||(p0={}));var so=(r=>(r[r.CtrlCmd=2048]="CtrlCmd",r[r.Shift=1024]="Shift",r[r.Alt=512]="Alt",r[r.WinCtrl=256]="WinCtrl",r))(so||{});class jA{constructor(e,t,i,s,n){c(this,"ctrlKey");c(this,"shiftKey");c(this,"altKey");c(this,"metaKey");c(this,"keyCode");this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=n}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){const e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",i=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`${e}${t}${i}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}modifierCount(){return Number(this.ctrlKey)+Number(this.shiftKey)+Number(this.altKey)+Number(this.metaKey)}codeCount(){return this.isDuplicateModifierCase()?this.modifierCount():this.modifierCount()+this.keyCode===114?0:1}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}function HU(r,e){const t=!!(r&2048),i=!!(r&256),s=e===ya.Macintosh?i:t,n=!!(r&1024),o=!!(r&512),a=e===ya.Macintosh?t:i,l=r&255;return new jA(s,n,o,a,l)}function yP(r,e){if(r===0)return null;const t=(r&65535)>>>0;if((r&4294901760)>>>16!==0)throw new Error("chordkeybinding is not su");return HU(t,e)}class zU{constructor(e,t,i,s,n){c(this,"ctrlKey");c(this,"shiftKey");c(this,"altKey");c(this,"metaKey");c(this,"keyLabel");this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=n}}class jU{}const sN=an("commandService"),VA=new class{constructor(){c(this,"_commands",new Map);c(this,"_onDidRegisterCommand",new Dt);c(this,"onDidRegisterCommand",this._onDidRegisterCommand.event)}registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}const{id:t}=r;let i=this._commands.get(t);i||(i=new a0,this._commands.set(t,i));let s=i.unshift(r),n=nn(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),n}getCommand(r){const e=this._commands.get(r);if(!(!e||e.isEmpty()))return Wc.first(e)}getCommands(){const r=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&r.set(e,t)}return r}};var WA=(r=>(r[r.EditorCore=0]="EditorCore",r[r.EditorContrib=100]="EditorContrib",r[r.WorkbenchContrib=200]="WorkbenchContrib",r[r.BuiltinExtension=300]="BuiltinExtension",r[r.ExternalExtension=400]="ExternalExtension",r))(WA||{});class Qx{constructor(){c(this,"_coreKeybindings");c(this,"_extensionKeybindings");c(this,"_cachedMergedKeybindings");this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ac===ya.Windows){if(e&&e.win)return e.win}else if(ac===ya.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Qx.bindToCurrentPlatform(e);if(t&&t.primary){const i=yP(t.primary,ac);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let i=0,s=t.secondary.length;i<s;i++){const n=t.secondary[i],o=yP(n,ac);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-i-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),VA.registerCommand(e)}static _mightProduceChar(e){return e>=Te.KEY_0&&e<=Te.KEY_9||e>=Te.KEY_A&&e<=Te.KEY_Z?!0:e===Te.US_SEMICOLON||e===Te.US_EQUAL||e===Te.US_COMMA||e===Te.US_MINUS||e===Te.US_DOT||e===Te.US_SLASH||e===Te.US_BACKTICK||e===Te.ABNT_C1||e===Te.ABNT_C2||e===Te.US_OPEN_SQUARE_BRACKET||e===Te.US_BACKSLASH||e===Te.US_CLOSE_SQUARE_BRACKET||e===Te.US_QUOTE||e===Te.OEM_8||e===Te.OEM_102}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Qx._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,i,s,n,o){ac===ya.Windows&&this._assertNoCtrlAlt(e,t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:s,weight2:n}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(WU)),this._cachedMergedKeybindings.slice(0)}}const l1=new Qx,VU="platform.keybindingsRegistry";Vc.add(VU,l1);function WU(r,e){return r.weight1!==e.weight1?r.weight1-e.weight1:r.command<e.command?-1:r.command>e.command?1:r.weight2-e.weight2}class vP{constructor(e,t,i,s,n,o,a){c(this,"resolvedKeybinding");c(this,"keypressParts");c(this,"bubble");c(this,"command");c(this,"commandArgs");c(this,"when");c(this,"isDefault");c(this,"extensionId");c(this,"isBuiltinExtension");this.resolvedKeybinding=e,this.keypressParts=e?EP(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=EP(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===wt.Caret:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=n,this.extensionId=o,this.isBuiltinExtension=a}}function EP(r){const e=[];for(let t=0,i=r.length;t<i;t++){const s=r[t];if(!s)return e;e.push(s)}return e}class $U{constructor(e,t,i=t){c(this,"modifierLabels");this.modifierLabels=[null],this.modifierLabels[ya.Macintosh]=e,this.modifierLabels[ya.Windows]=t,this.modifierLabels[ya.Linux]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let n=0,o=t.length;n<o;n++){const a=t[n],l=i(a);if(l===null)return null;s[n]=XU(a,l,this.modifierLabels[e])}return s.join(" ")}}const KU=new $U({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Windows",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function XU(r,e,t){if(e===null)return"";const i=[];return r.ctrlKey&&i.push(t.ctrlKey),r.shiftKey&&i.push(t.shiftKey),r.altKey&&i.push(t.altKey),r.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class YU extends jU{constructor(t,i){super();c(this,"_os");c(this,"_parts");if(i.length===0)throw new Error("400");this._os=t,this._parts=i}getLabel(){return KU.toLabel(this._os,this._parts,t=>this._getLabel(t))}getParts(){return this._parts.map(t=>this._getPart(t))}_getPart(t){return new zU(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,this._getLabel(t))}getDispatchParts(){return this._parts.map(t=>this._getDispatchPart(t))}getSingleModifierDispatchParts(){return this._parts.map(t=>this._getSingleModifierDispatchPart(t))}}class Jx extends YU{constructor(e,t){super(t,[e])}_keyCodeToUILabel(e){if(this._os===ya.Macintosh)switch(e){case Te.LeftArrow:return"\u2190";case Te.UpArrow:return"\u2191";case Te.RightArrow:return"\u2192";case Te.DownArrow:return"\u2193"}return p0.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getDispatchPart(e){return Jx.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=p0.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===Te.Ctrl&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===Te.Shift&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===Te.Alt&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===Te.Meta&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}}var qU=Object.defineProperty,QU=Object.getOwnPropertyDescriptor,JU=(r,e,t,i)=>{for(var s=i>1?void 0:i?QU(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&qU(e,t,s),s},SP=(r,e)=>(t,i)=>e(t,i,r);let HS=class extends NU{constructor(e,t){super(e,t);c(this,"_cachedResolver");c(this,"_dynamicKeybindings");this._cachedResolver=null,this._dynamicKeybindings=[]}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(l1.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Bp(e,t)}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let s=0;for(const n of e){const o=n.when||void 0,a=n.keybinding;if(!a)i[s++]=new vP(void 0,n.command,n.commandArgs,o,t,null,!1);else{const l=this.resolveKeybinding(a);for(const u of l)i[s++]=new vP(u,n.command,n.commandArgs,o,t,null,!1)}}return i}resolveKeybinding(e){return[new Jx(e,ac)]}resolveKeyboardEvent(e){const t=new jA(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Jx(t,ac)}};HS=JU([SP(0,_h),SP(1,sN)],HS);ba(RA,HS);class nm{constructor(){c(this,"segment");c(this,"value");c(this,"key");c(this,"left");c(this,"mid");c(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class ZU{constructor(e=!0){c(this,"_value");c(this,"_from");c(this,"_to");this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===wt.Period)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?oO(e,this._value,0,e.length,this._from,this._to):vB(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class $A{constructor(e){c(this,"_iter");c(this,"_root");this._iter=e}static forConfigKeys(){return new $A(new ZU)}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;for(this._root||(this._root=new nm,this._root.segment=i.value()),s=this._root;;){const o=i.cmp(s.segment);if(o>0)s.left||(s.left=new nm,s.left.segment=i.value()),s=s.left;else if(o<0)s.right||(s.right=new nm,s.right.segment=i.value()),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new nm,s.mid.segment=i.value()),s=s.mid;else break}const n=s.value;return s.value=t,s.key=e,n}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),s=[];let n=this._root;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([1,n]),n=n.left;else if(o<0)s.push([-1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else{for(t?(n.left=void 0,n.mid=void 0,n.right=void 0):n.value=void 0;s.length>0&&n.isEmpty();){let[a,l]=s.pop();switch(a){case 1:l.left=void 0;break;case 0:l.mid=void 0;break;case-1:l.right=void 0;break}n=l}break}}}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else return i.mid?this._entries(i.mid):void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}class e8{constructor(){c(this,"defaultValues");c(this,"configurationProperties");c(this,"excludedConfigurationProperties");this.defaultValues={},this.configurationProperties={},this.excludedConfigurationProperties={}}getConfigurationProperties(){return this.configurationProperties}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=[];e.forEach(s=>{i.push(...this.validateAndRegisterProperties(s,t)),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,i=1){i=Ti(e.scope)?i:e.scope;const s=[],n=e.properties;if(n)for(const a in n){if(t&&t8(a)){delete n[a];continue}const l=n[a];if(this.updatePropertyDefaultValue(a,l),YA.test(a)?l.scope=void 0:l.scope=Ti(l.scope)?i:l.scope,n[a].hasOwnProperty("included")&&!n[a].included){this.excludedConfigurationProperties[a]=n[a],delete n[a];continue}else this.configurationProperties[a]=n[a];!n[a].deprecationMessage&&n[a].markdownDeprecationMessage&&(n[a].deprecationMessage=n[a].markdownDeprecationMessage),s.push(a)}const o=e.allOf;if(o)for(const a of o)s.push(...this.validateAndRegisterProperties(a,t,i));return s}updatePropertyDefaultValue(e,t){let i=this.defaultValues[e];Fx(i)&&(i=t.default),Fx(i)&&(i=r8(t.type)),t.default=i}registerJSONConfiguration(e){const t=i=>{const s=i.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);const n=i.allOf;n&&n.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){}}}const oN="configurationRegistry";let Zm=Reflect.get(wi,oN);Zm||(Zm=new e8,Reflect.set(wi,oN,Zm));const KA=Zm;function t8(r){return r.trim()?YA.test(r)?`Cannot register '${r}. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`:KA.getConfigurationProperties()[r]!==void 0?`Cannot register '${r}'. This property is already registered.`:null:"Cannot register an empty property"}function r8(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const aN=an("configurationService");var Lp=(r=>(r[r.USER=1]="USER",r[r.WORKSPACE=2]="WORKSPACE",r[r.DEFAULT=3]="DEFAULT",r[r.MEMORY=4]="MEMORY",r))(Lp||{});function wP(r,e,t){function i(o,a){let l=o;for(const u of a){if(typeof l!="object"||l===null)return;l=l[u]}return l}const s=e.split("."),n=i(r,s);return typeof n>"u"?t:n}function i8(r,e){const t=Object.create(null);for(const i in r)XA(t,i,r[i],e);return t}function XA(r,e,t,i){const s=e.split("."),n=s.pop();let o=r;for(let a=0;a<s.length;a++){const l=s[a];let u=o[l];switch(typeof u){case"undefined":u=o[l]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(u)}`);return}o=u}if(typeof o=="object"&&o!==null)try{o[n]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function n8(r,e){const t=e.split(".");lN(r,t)}function lN(r,e){const t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){const i=r[t];typeof i=="object"&&!Array.isArray(i)&&(lN(i,e),Object.keys(i).length===0&&delete r[t])}}function s8(){const r=KA.getConfigurationProperties();return Object.keys(r)}function o8(){const r=Object.create(null),e=KA.getConfigurationProperties();for(const t in e){const i=e[t].default;XA(r,t,i,s=>console.error(`Conflict in default settings: ${s}`))}return r}const a8="\\[.*\\]$",YA=new RegExp(a8);function l8(r){return r.substring(1,r.length-1)}var u8=Object.defineProperty,c8=Object.getOwnPropertyDescriptor,h8=(r,e,t,i)=>{for(var s=i>1?void 0:i?c8(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&u8(e,t,s),s},d8=(r,e)=>(t,i)=>e(t,i,r);const Up="data-keybinding-context";class qA{constructor(e,t){c(this,"_parent");c(this,"_value");c(this,"_id");this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}updateParent(e){this._parent=e}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e={...e,...this._value},delete e._contextId,e}}const lT=class extends qA{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}};let wc=lT;c(wc,"INSTANCE",new lT);const zy=class extends qA{constructor(t,i,s){super(t,null);c(this,"_values",$A.forConfigKeys());c(this,"_listener");this._configurationService=i,this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===Lp.DEFAULT){const o=Array.from(Wc.map(this._values,([a])=>a));this._values.clear(),s.fire(new zS(o))}else{const o=[];for(const a of n.affectedKeys){const l=`config.${a}`,u=this._values.findSuperstr(l);u!==void 0&&(o.push(...Wc.map(u,([d])=>d)),this._values.deleteSuperstr(l)),this._values.has(l)&&(o.push(l),this._values.delete(l))}s.fire(new zS(o))}})}dispose(){this._listener.dispose()}getValue(t){if(t.indexOf(zy._keyPrefix)!==0)return super.getValue(t);if(this._values.has(t))return this._values.get(t);const i=t.substr(zy._keyPrefix.length),s=this._configurationService.getValue(i);let n;switch(typeof s){case"number":case"boolean":case"string":n=s;break;default:Array.isArray(s)?n=JSON.stringify(s):n=s}return this._values.set(t,n),n}setValue(t,i){return super.setValue(t,i)}removeValue(t){return super.removeValue(t)}collectAllValues(){const t=Object.create(null);return this._values.forEach((i,s)=>t[s]=i),{...t,...super.collectAllValues()}}};let ex=zy;c(ex,"_keyPrefix","config.");class f8{constructor(e,t,i){c(this,"_service");c(this,"_key");c(this,"_defaultValue");this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class AP{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class zS{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class _8{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class uN{constructor(e){c(this,"_isDisposed");c(this,"_myContextId");c(this,"_onDidChangeContext",new ES({merge:e=>new _8(e)}));c(this,"onDidChangeContext",this._onDidChangeContext.event);this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new f8(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new p8(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);!i||i.setValue(e,t)&&this._onDidChangeContext.fire(new AP(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new AP(e))}getContext(e){return this._isDisposed?wc.INSTANCE:this.getContextValuesContainer(g8(e))}}let jS=class extends uN{constructor(e){super(0);c(this,"_lastContextId");c(this,"_contexts",new Map);c(this,"_toDispose",new pa);this._lastContextId=0;const t=new ex(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?wc.INSTANCE:this._contexts.get(e)||wc.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new qA(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}updateParent(e){throw new Error("Cannot update parent of root ContextKeyService")}};jS=h8([d8(0,aN)],jS);class p8 extends uN{constructor(t,i){super(t.createChildContext());c(this,"_parent");c(this,"_domNode");c(this,"_parentChangeListener",new AA);if(this._parent=t,this._updateParentChangeListener(),this._domNode=i,this._domNode.hasAttribute(Up)){let s="";this._domNode.classList&&(s=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${s?": "+s:""}`)}this._domNode.setAttribute(Up,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Up),this._isDisposed=!0)}getContextValuesContainer(t){return this._isDisposed?wc.INSTANCE:this._parent.getContextValuesContainer(t)}createChildContext(t=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(t)}disposeContext(t){this._isDisposed||this._parent.disposeContext(t)}updateParent(t){const i=this._parent.getContextValuesContainer(this._myContextId),s=i.collectAllValues();this._parent=t,this._updateParentChangeListener();const n=this._parent.getContextValuesContainer(this._parent.contextId);i.updateParent(n);const o=i.collectAllValues(),a={...GT(s,o),...GT(o,s)},l=Object.keys(a);this._onDidChangeContext.fire(new zS(l))}}function g8(r){for(;r;){if(r.hasAttribute(Up)){const e=r.getAttribute(Up);return e?parseInt(e,10):NaN}r=r.parentElement}return 0}VA.registerCommand(SB,function(r,e,t){r.get(_h).createKey(String(e),t)});ba(_h,jS);const m8=an("undoRedoService"),jy=class{constructor(){c(this,"__classBland__","UndoRedoSource");c(this,"id");c(this,"order");this.id=jy._ID++,this.order=1}static isInstance(e){return Reflect.get(e,"__classBland__")==="UndoRedoSource"}nextOrder(){return this.id===0?0:this.order++}};let Za=jy;c(Za,"_ID",0),c(Za,"None",new jy);var x8=Object.defineProperty,y8=Object.getOwnPropertyDescriptor,v8=(r,e,t,i)=>{for(var s=i>1?void 0:i?y8(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&x8(e,t,s),s},E8=(r,e)=>(t,i)=>e(t,i,r);let VS=class{constructor(r){this.modelService=r}canUndo(r){Za.isInstance(r)&&Ue();const e=this.modelService.getModel(r);return Q(e),e.canRedo()}undo(r){Za.isInstance(r)&&Ue();const e=this.modelService.getModel(r);return Q(e),e.undo()}canRedo(r){Za.isInstance(r)&&Ue();const e=this.modelService.getModel(r);return Q(e),e.canRedo()}redo(r){Za.isInstance(r)&&Ue();const e=this.modelService.getModel(r);return Q(e),e.redo()}};VS=v8([E8(0,gf)],VS);ba(m8,VS);const g0=an("lifecycleService");var m0=(r=>(r[r.CLOSE=1]="CLOSE",r[r.QUIT=2]="QUIT",r[r.RELOAD=3]="RELOAD",r[r.LOAD=4]="LOAD",r))(m0||{}),tx=(r=>(r[r.NewWindow=1]="NewWindow",r[r.ReloadedWindow=3]="ReloadedWindow",r[r.ReopenedWindow=4]="ReopenedWindow",r))(tx||{}),Ts=(r=>(r[r.Starting=1]="Starting",r[r.Ready=2]="Ready",r[r.Restored=3]="Restored",r[r.ExtensionActivated=4]="ExtensionActivated",r[r.Eventually=5]="Eventually",r))(Ts||{});function S8(r){switch(r){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"ExtensionActivated";case 5:return"Eventually"}}na.None,na.None,na.None,na.None,na.None;function w8(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0];return typeof e[n]<"u"?e[n]:i}),t}function cN(r,e,...t){return w8(e,t)}const pd={localize:cN};function mE(r,e){return e&&(r.stack||r.stacktrace)?pd.localize("stackTrace.format","{0}: {1}",kP(r),bP(r.stack)||bP(r.stacktrace)):kP(r)}function bP(r){return Array.isArray(r)?r.join(`
`):r}function kP(r){return typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?pd.localize("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||pd.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function Zx(r=null,e=!1){if(!r)return pd.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){const t=vA(r),i=Zx(t[0],e);return t.length>1?pd.localize("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(ao(r))return r;if(r.detail){const t=r.detail;if(t.error)return mE(t.error,e);if(t.exception)return mE(t.exception,e)}return r.stack?mE(r,e):r.message?r.message:pd.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}const J0=an("logService");an("loggerService");var Ps=(r=>(r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.Off=6]="Off",r))(Ps||{});const QA=2;class A8 extends Ht{constructor(){super(...arguments);c(this,"level",QA);c(this,"_onDidChangeLogLevel",this._register(new Dt));c(this,"onDidChangeLogLevel",this._onDidChangeLogLevel.event)}setLevel(t){this.level!==t&&(this.level=t,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}const hN=Object.freeze(function(r,e){const t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}});var WS;(r=>{function e(t){return t===r.None||t===r.Cancelled||t instanceof b8?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:na.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:hN})})(WS||(WS={}));class b8{constructor(){c(this,"_isCancelled",!1);c(this,"_emitter",null)}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?hN:(this._emitter||(this._emitter=new Dt),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let Au;(function(){if(typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"){const r=Object.freeze({didTimeout:!0,timeRemaining(){return 15}});Au=e=>{const t=setTimeout(()=>e(r));let i=!1;return{dispose(){i||(i=!0,clearTimeout(t))}}}}else Au=(r,e)=>{const t=requestIdleCallback(r,typeof e=="number"?{timeout:e}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(t))}}}})();class k8{constructor(e){c(this,"_executor");c(this,"_handle");c(this,"_didRun",!1);c(this,"_value");c(this,"_error");this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Au(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}class T8{constructor(){c(this,"activePromise");c(this,"queuedPromise");c(this,"queuedPromiseFactory");this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}}class P8{constructor(e){c(this,"delayer");c(this,"throttler");this.delayer=new C8(e),this.throttler=new T8}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}class ey{constructor(){c(this,"_isOpen");c(this,"_promise");c(this,"_completePromise");this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(e){this._isOpen=!0,this._completePromise(e)}wait(){return this._promise}}class R8{constructor(e,t){c(this,"_token");this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class D8{constructor(){c(this,"_token");this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class ty{constructor(e,t){c(this,"runner");c(this,"timeoutToken");c(this,"timeout");c(this,"timeoutHandler");this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}class C8{constructor(e){c(this,"timeout");c(this,"completionPromise");c(this,"doResolve");c(this,"doReject");c(this,"task");this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,s)=>{this.doResolve=i,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new Error("canceled")),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}class gd{constructor(){c(this,"completeCallback");c(this,"errorCallback");c(this,"rejected",!1);c(this,"resolved",!1);c(this,"p");this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.rejected=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new hO),this.rejected=!0,e()})}}var nl;(r=>{async function e(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}r.settled=e;function t(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}r.withAsyncBody=t})(nl||(nl={}));function TP(r){const e=[];typeof r=="number"&&e.push("code/timeOrigin",r);function t(s){e.push(s,Date.now())}function i(){const s=[];for(let n=0;n<e.length;n+=2)s.push({name:e[n],startTime:e[n+1]});return s}return{mark:t,getMarks:i}}const O8=function(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!Reflect.has(performance,"nodeTiming"))return typeof performance.timeOrigin!="number"&&!performance.timing?TP():{mark(r){performance.mark(r)},getMarks(){let r=performance.timeOrigin;typeof r!="number"&&(r=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const e=[{name:"code/timeOrigin",startTime:Math.round(r)}];for(const t of performance.getEntriesByType("mark"))e.push({name:t.name,startTime:Math.round(r+t.startTime)});return e}};if(typeof process!="object")return console.trace("perf-util loaded in UNKNOWN environment"),TP()}(),zd=O8.mark;function N8(r){const e=r;return(e==null?void 0:e.changed)instanceof Map||(e==null?void 0:e.deleted)instanceof Set}const uT=class extends Ht{constructor(t,i=Object.create(null)){super();c(this,"_onDidChangeStorage",this._register(new Dt));c(this,"onDidChangeStorage",this._onDidChangeStorage.event);c(this,"state",0);c(this,"cache",new Map);c(this,"flushDelayer",new P8(uT.DEFAULT_FLUSH_DELAY));c(this,"pendingDeletes",new Set);c(this,"pendingInserts",new Map);c(this,"pendingClose");c(this,"whenFlushedCallbacks",[]);this.database=t,this.options=i,this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(t=>this.onDidChangeItemsExternal(t)))}onDidChangeItemsExternal(t){var i,s;(i=t.changed)==null||i.forEach((n,o)=>this.accept(o,n)),(s=t.deleted)==null||s.forEach(n=>this.accept(n,void 0))}accept(t,i){if(this.state===2)return;let s=!1;nu(i)?s=this.cache.delete(t):this.cache.get(t)!==i&&(this.cache.set(t,i),s=!0),s&&this._onDidChangeStorage.fire(t)}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===0&&(this.state=1,this.options.hint!==0&&(this.cache=await this.database.getItems()))}get(t,i){const s=this.cache.get(t);return nu(s)?i:s}getBoolean(t,i){const s=this.get(t);return nu(s)?i:s==="true"}getNumber(t,i){const s=this.get(t);return nu(s)?i:parseInt(s,10)}async set(t,i){if(this.state===2)return;if(nu(i))return this.delete(t);const s=String(i);if(this.cache.get(t)!==s)return this.cache.set(t,s),this.pendingInserts.set(t,s),this.pendingDeletes.delete(t),this._onDidChangeStorage.fire(t),this.doFlush()}async delete(t){if(!(this.state===2||!this.cache.delete(t)))return this.pendingDeletes.has(t)||this.pendingDeletes.add(t),this.pendingInserts.delete(t),this._onDidChangeStorage.fire(t),this.doFlush()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=2;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const t={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(t).finally(()=>{var i;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(i=this.whenFlushedCallbacks.pop())==null||i()})}async flush(t){if(!!this.hasPending)return this.doFlush(t)}async doFlush(t){return this.flushDelayer.trigger(()=>this.flushPending(),t)}async whenFlushed(){if(!!this.hasPending)return new Promise(t=>this.whenFlushedCallbacks.push(t))}dispose(){this.flushDelayer.dispose(),super.dispose()}};let Gp=uT;c(Gp,"DEFAULT_FLUSH_DELAY",100);class I8{constructor(){c(this,"onDidChangeItemsExternal",na.None);c(this,"items",new Map)}async getItems(){return this.items}async updateItems(e){e.insert&&e.insert.forEach((t,i)=>this.items.set(i,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))}async close(){}}const ic="__$__isNewStorageMarker",sm="__$__targetStorageMarker",JA=an("storageService");var Hp=(r=>(r[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN",r))(Hp||{}),Qs=(r=>(r[r.GLOBAL=0]="GLOBAL",r[r.WORKSPACE=1]="WORKSPACE",r))(Qs||{}),ry=(r=>(r[r.USER=0]="USER",r[r.MACHINE=1]="MACHINE",r))(ry||{});const cT=class extends Ht{constructor(t={flushInterval:cT.DEFAULT_FLUSH_INTERVAL}){super();c(this,"_onDidChangeValue",this._register(new ES));c(this,"onDidChangeValue",this._onDidChangeValue.event);c(this,"_onDidChangeTarget",this._register(new ES));c(this,"onDidChangeTarget",this._onDidChangeTarget.event);c(this,"_onWillSaveState",this._register(new Dt));c(this,"onWillSaveState",this._onWillSaveState.event);c(this,"initializationPromise");c(this,"flushWhenIdleScheduler");c(this,"runFlushWhenIdle",this._register(new AA));c(this,"_workspaceKeyTargets");c(this,"_globalKeyTargets");this.options=t,this.flushWhenIdleScheduler=this._register(new ty(()=>this.doFlushWhenIdle(),this.options.flushInterval))}doFlushWhenIdle(){this.runFlushWhenIdle.value=Au(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){Zy([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{try{await this.doInitialize()}finally{}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(t,i){i===sm?(t===0?this._globalKeyTargets=void 0:t===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:t})):this._onDidChangeValue.fire({scope:t,key:i,target:this.getKeyTargets(t)[i]})}emitWillSaveState(t){this._onWillSaveState.fire({reason:t})}get(t,i,s){var n;return(n=this.getStorage(i))==null?void 0:n.get(t,s)}getBoolean(t,i,s){var n;return(n=this.getStorage(i))==null?void 0:n.getBoolean(t,s)}getNumber(t,i,s){var n;return(n=this.getStorage(i))==null?void 0:n.getNumber(t,s)}store(t,i,s,n){if(nu(i)){this.remove(t,s);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(t,s,n),(o=this.getStorage(s))==null||o.set(t,i)})}remove(t,i){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(t,i,void 0),(s=this.getStorage(i))==null||s.delete(t)})}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(t,i){const s=[],n=this.getKeyTargets(t);for(const o of Object.keys(n))n[o]===i&&s.push(o);return s}updateKeyTarget(t,i,s){var o,a;const n=this.getKeyTargets(i);typeof s=="number"?n[t]!==s&&(n[t]=s,(o=this.getStorage(i))==null||o.set(sm,JSON.stringify(n))):typeof n[t]=="number"&&(delete n[t],(a=this.getStorage(i))==null||a.set(sm,JSON.stringify(n)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(t){return t===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(t){const i=this.get(sm,t);if(i)try{return JSON.parse(i)}catch{}return Object.create(null)}isNew(t){return this.getBoolean(ic,t)===!0}async flush(t=0){var n,o,a,l;this._onWillSaveState.fire({reason:t});const i=this.getStorage(0),s=this.getStorage(1);switch(t){case 0:await nl.settled([(n=i==null?void 0:i.whenFlushed())!=null?n:Promise.resolve(),(o=s==null?void 0:s.whenFlushed())!=null?o:Promise.resolve()]);break;case 1:await nl.settled([(a=i==null?void 0:i.flush(0))!=null?a:Promise.resolve(),(l=s==null?void 0:s.flush(0))!=null?l:Promise.resolve()]);break}}async logStorage(){var s,n,o,a,l,u;const t=(n=(s=this.getStorage(0))==null?void 0:s.items)!=null?n:new Map,i=(a=(o=this.getStorage(1))==null?void 0:o.items)!=null?a:new Map;return F8(t,i,(l=this.getLogDetails(0))!=null?l:"",(u=this.getLogDetails(1))!=null?u:"")}};let rx=cT;c(rx,"DEFAULT_FLUSH_INTERVAL",60*1e3);async function F8(r,e,t,i){const s=f=>{try{return JSON.parse(f)}catch{return f}},n=new Map,o=new Map;r.forEach((f,g)=>{n.set(g,f),o.set(g,s(f))});const a=new Map,l=new Map;e.forEach((f,g)=>{a.set(g,f),l.set(g,s(f))}),console.group(`Storage: Global (path: ${t})`);const u=[];n.forEach((f,g)=>{u.push({key:g,value:f})}),console.table(u),console.groupEnd(),console.log(o),console.group(`Storage: Workspace (path: ${i})`);const d=[];a.forEach((f,g)=>{d.push({key:g,value:f})}),console.table(d),console.groupEnd(),console.log(l)}var M8=Object.defineProperty,B8=Object.getOwnPropertyDescriptor,L8=(r,e,t,i)=>{for(var s=i>1?void 0:i?B8(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&M8(e,t,s),s},PP=(r,e)=>(t,i)=>e(t,i,r),_S;let md=(_S=class extends Ht{constructor(e,t){super();c(this,"_onBeforeShutdown",this._register(new Dt));c(this,"onBeforeShutdown",this._onBeforeShutdown.event);c(this,"_onWillShutdown",this._register(new Dt));c(this,"onWillShutdown",this._onWillShutdown.event);c(this,"_onDidShutdown",this._register(new Dt));c(this,"onDidShutdown",this._onDidShutdown.event);c(this,"_onBeforeShutdownError",this._register(new Dt));c(this,"onBeforeShutdownError",this._onBeforeShutdownError.event);c(this,"_onShutdownVeto",this._register(new Dt));c(this,"onShutdownVeto",this._onShutdownVeto.event);c(this,"_startupKind");c(this,"_phase",Ts.Starting);c(this,"phaseWhen",new Map);c(this,"shutdownReason");this.logService=e,this.storageService=t,this._startupKind=this.resolveStartupKind(),this.storageService.onWillSaveState(i=>{i.reason===Hp.SHUTDOWN&&this.storageService.store(md.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,Qs.WORKSPACE,ry.MACHINE)})}get startupKind(){return this._startupKind}get phase(){return this._phase}resolveStartupKind(){const e=this.storageService.getNumber(md.LAST_SHUTDOWN_REASON_KEY,Qs.WORKSPACE);this.storageService.remove(md.LAST_SHUTDOWN_REASON_KEY,Qs.WORKSPACE);let t;switch(e){case m0.RELOAD:t=tx.ReloadedWindow;break;case m0.LOAD:t=tx.ReopenedWindow;break;default:t=tx.NewWindow}return this.logService.trace(`[lifecycle] starting up (startup kind: ${t})`),t}set phase(e){if(e<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===e)return;this.logService.trace(`lifecycle: phase changed (value: ${e})`),this._phase=e,zd(`code/LifecyclePhase/${S8(e)}`);const t=this.phaseWhen.get(this._phase);t&&(t.open(),this.phaseWhen.delete(this._phase))}async when(e){if(e<=this._phase)return;let t=this.phaseWhen.get(e);t||(t=new ey,this.phaseWhen.set(e,t)),await t.wait()}},c(_S,"LAST_SHUTDOWN_REASON_KEY","lifecyle.lastShutdownReason"),_S);md=L8([PP(0,J0),PP(1,JA)],md);const U8=V0?so.WinCtrl:so.CtrlCmd,G8=so.Alt,H8=so.Shift,z8=V0?so.CtrlCmd:so.WinCtrl;class $S{constructor(e){c(this,"_standardKeyboardEventBrand",!0);c(this,"browserEvent");c(this,"target");c(this,"ctrlKey");c(this,"shiftKey");c(this,"altKey");c(this,"metaKey");c(this,"keyCode");c(this,"code");c(this,"_asKeybinding");c(this,"_asRuntimeKeybinding");let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=j8(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===Te.Ctrl,this.altKey=this.altKey||this.keyCode===Te.Alt,this.shiftKey=this.shiftKey||this.keyCode===Te.Shift,this.metaKey=this.metaKey||this.keyCode===Te.Meta,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=Te.Unknown;this.keyCode!==Te.Ctrl&&this.keyCode!==Te.Shift&&this.keyCode!==Te.Alt&&this.keyCode!==Te.Meta&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=U8),this.altKey&&(t|=G8),this.shiftKey&&(t|=H8),this.metaKey&&(t|=z8),t|=e,t}_computeRuntimeKeybinding(){let e=Te.Unknown;return this.keyCode!==Te.Ctrl&&this.keyCode!==Te.Shift&&this.keyCode!==Te.Alt&&this.keyCode!==Te.Meta&&(e=this.keyCode),new jA(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let dN=new Array(230);(function(){function r(e,t){dN[e]=t}r(3,Te.PauseBreak),r(8,Te.Backspace),r(9,Te.Tab),r(13,Te.Enter),r(16,Te.Shift),r(17,Te.Ctrl),r(18,Te.Alt),r(19,Te.PauseBreak),r(20,Te.CapsLock),r(27,Te.Escape),r(32,Te.Space),r(33,Te.PageUp),r(34,Te.PageDown),r(35,Te.End),r(36,Te.Home),r(37,Te.LeftArrow),r(38,Te.UpArrow),r(39,Te.RightArrow),r(40,Te.DownArrow),r(45,Te.Insert),r(46,Te.Delete),r(48,Te.KEY_0),r(49,Te.KEY_1),r(50,Te.KEY_2),r(51,Te.KEY_3),r(52,Te.KEY_4),r(53,Te.KEY_5),r(54,Te.KEY_6),r(55,Te.KEY_7),r(56,Te.KEY_8),r(57,Te.KEY_9),r(65,Te.KEY_A),r(66,Te.KEY_B),r(67,Te.KEY_C),r(68,Te.KEY_D),r(69,Te.KEY_E),r(70,Te.KEY_F),r(71,Te.KEY_G),r(72,Te.KEY_H),r(73,Te.KEY_I),r(74,Te.KEY_J),r(75,Te.KEY_K),r(76,Te.KEY_L),r(77,Te.KEY_M),r(78,Te.KEY_N),r(79,Te.KEY_O),r(80,Te.KEY_P),r(81,Te.KEY_Q),r(82,Te.KEY_R),r(83,Te.KEY_S),r(84,Te.KEY_T),r(85,Te.KEY_U),r(86,Te.KEY_V),r(87,Te.KEY_W),r(88,Te.KEY_X),r(89,Te.KEY_Y),r(90,Te.KEY_Z),r(93,Te.ContextMenu),r(96,Te.NUMPAD_0),r(97,Te.NUMPAD_1),r(98,Te.NUMPAD_2),r(99,Te.NUMPAD_3),r(100,Te.NUMPAD_4),r(101,Te.NUMPAD_5),r(102,Te.NUMPAD_6),r(103,Te.NUMPAD_7),r(104,Te.NUMPAD_8),r(105,Te.NUMPAD_9),r(106,Te.NUMPAD_MULTIPLY),r(107,Te.NUMPAD_ADD),r(108,Te.NUMPAD_SEPARATOR),r(109,Te.NUMPAD_SUBTRACT),r(110,Te.NUMPAD_DECIMAL),r(111,Te.NUMPAD_DIVIDE),r(112,Te.F1),r(113,Te.F2),r(114,Te.F3),r(115,Te.F4),r(116,Te.F5),r(117,Te.F6),r(118,Te.F7),r(119,Te.F8),r(120,Te.F9),r(121,Te.F10),r(122,Te.F11),r(123,Te.F12),r(124,Te.F13),r(125,Te.F14),r(126,Te.F15),r(127,Te.F16),r(128,Te.F17),r(129,Te.F18),r(130,Te.F19),r(144,Te.NumLock),r(145,Te.ScrollLock),r(186,Te.US_SEMICOLON),r(187,Te.US_EQUAL),r(188,Te.US_COMMA),r(189,Te.US_MINUS),r(190,Te.US_DOT),r(191,Te.US_SLASH),r(192,Te.US_BACKTICK),r(193,Te.ABNT_C1),r(194,Te.ABNT_C2),r(219,Te.US_OPEN_SQUARE_BRACKET),r(220,Te.US_BACKSLASH),r(221,Te.US_CLOSE_SQUARE_BRACKET),r(222,Te.US_QUOTE),r(223,Te.OEM_8),r(226,Te.OEM_102),r(229,Te.KEY_IN_COMPOSITION),BU?(r(59,Te.US_SEMICOLON),r(107,Te.US_EQUAL),r(109,Te.US_MINUS),BS&&r(224,Te.Meta)):LU&&(r(91,Te.Meta),r(BS?93:92,Te.Meta))})();function j8(r){if(r.charCode){let e=String.fromCharCode(r.charCode).toUpperCase();return p0.fromString(e)}return dN[r.keyCode]||Te.Unknown}const Ds={PASTE:"paste",CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",VISIBILITY_CHANGE:"visibilitychange"};class V8{constructor(e,t,i,s){c(this,"_handler");c(this,"_node");c(this,"_type");c(this,"_options");this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function jn(r,e,t,i){return new V8(r,e,t,i)}const W8=8,$8=function(r,e){return e};class K8 extends Ht{constructor(e,t,i,s=$8,n=W8){super();let o=null,a=0;const l=this._register(new R8),u=()=>{a=new Date().getTime(),i(o),o=null};this._register(jn(e,t,d=>{o=s(o,d);const f=new Date().getTime()-a;f>=n?(l.cancel(),u()):l.setIfNotSet(u,n-f)}))}}function X8(r,e,t,i,s){return new K8(r,e,t,i,s)}function Y8(r,e){return jn(r,Ds.MOUSE_OUT,t=>{let i=t.relatedTarget;for(;i&&i!==r;)i=i.parentNode;i!==r&&e(t)})}function q8(r){return r&&!!r.host&&!!r.mode}function RP(r){for(;r.parentNode;){if(r===document.body)return null;r=r.parentNode}return q8(r)?r:null}const hd=class{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new hd(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof hd?e:new hd(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};let xE=hd;c(xE,"None",new hd(0,0));function Q8(){return new Promise(r=>{document.readyState==="complete"||document&&document.body!==null?r(void 0):window.addEventListener("DOMContentLoaded",r,!1)})}function J8(r){return function(e){return r(new uO(e))}}function Z8(r){return function(e){return r(new $S(e))}}let KS=function(e,t,i,s){let n=i;return t==="click"||t==="mousedown"?n=J8(i):(t==="keydown"||t==="keypress"||t==="keyup")&&(n=Z8(i)),jn(e,t,n,s)};const DP=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function e5(r){let e=r.getBoundingClientRect();return{left:e.left+DP.scrollX,top:e.top+DP.scrollY,width:e.width,height:e.height}}function t5(r){let e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function r5(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}function i5(r){for(;r;){if(r===document.body)return!0;r=r.parentNode||r.host}return!1}var n5=Object.defineProperty,s5=Object.getOwnPropertyDescriptor,o5=(r,e,t,i)=>{for(var s=i>1?void 0:i?s5(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&n5(e,t,s),s},CP=(r,e)=>(t,i)=>e(t,i,r);let XS=class extends md{constructor(e,t){super(e,t);c(this,"beforeUnloadListener");c(this,"unloadListener");c(this,"ignoreBeforeUnload",!1);c(this,"didUnload",!1);this.registerListeners()}registerListeners(){this.beforeUnloadListener=jn(window,Ds.BEFORE_UNLOAD,e=>this.onBeforeUnload(e)),this.unloadListener=jn(window,Ds.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(e){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(e)))}vetoBeforeUnload(e){e.preventDefault(),e.returnValue=cN("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(e,t){if(typeof e=="number")return this.shutdownReason=e,this.storageService.flush(Hp.SHUTDOWN);this.ignoreBeforeUnload=!0;try{t==null||t()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){var e,t;this.logService.info("[lifecycle] shutdown triggered"),(e=this.beforeUnloadListener)==null||e.dispose(),(t=this.unloadListener)==null||t.dispose(),await this.storageService.flush(Hp.SHUTDOWN),this.doShutdown()}doShutdown(e){const t=this.logService;this.storageService.flush(Hp.SHUTDOWN);let i=!1;function s(n,o){typeof e=="function"&&(n instanceof Promise&&(t.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${o})`),i=!0),n===!0&&(t.info(`[lifecycle]: Unload was prevented (id: ${o})`),i=!0))}return this._onBeforeShutdown.fire({reason:m0.QUIT,veto(n,o){s(n,o)},finalVeto(n,o){s(n(),o)}}),i&&typeof e=="function"?e():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(jn(window,Ds.PAGE_SHOW,t=>this.onLoadAfterUnload(t)));const e=this.logService;this._onWillShutdown.fire({reason:m0.QUIT,token:WS.None,join(t,i){e.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${i})`)},force:()=>{}}),this._onDidShutdown.fire()}onLoadAfterUnload(e){!e.persisted||this.withExpectedShutdown({disableShutdownHandling:!0},()=>window.location.reload())}};XS=o5([CP(0,J0),CP(1,JA)],XS);ba(g0,XS);var a5=Object.defineProperty,l5=Object.getOwnPropertyDescriptor,u5=(r,e,t,i)=>{for(var s=i>1?void 0:i?l5(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&a5(e,t,s),s},OP=(r,e)=>(t,i)=>e(t,i,r);let YS=class extends Ht{constructor(e,t){super();c(this,"_onWillExecuteCommand",this._register(new Dt));c(this,"onWillExecuteCommand",this._onWillExecuteCommand.event);c(this,"_onDidExecuteCommand",new Dt);c(this,"onDidExecuteCommand",this._onDidExecuteCommand.event);this._instantiationService=e,this._logService=t}executeCommand(e,...t){return this._logService.trace("CommandService#executeCommand",e),this._tryExecuteCommand(e,t)}_tryExecuteCommand(e,t){const i=VA.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction(i.handler,...t);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};YS=u5([OP(0,pl),OP(1,J0)],YS);ba(sN,YS,!0);var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ZA(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var fN={exports:{}};const zp={},c5=Object.freeze(Object.defineProperty({__proto__:null,default:zp},Symbol.toStringTag,{value:"Module"})),gc=ZA(c5);(function(r,e){var t=function(){var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(n){n=n||{};/**
 * @license
 * Copyright 2010 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */var n=typeof n<"u"?n:{},o;n.ready=new Promise(function(p,y){o=p}),Object.getOwnPropertyDescriptor(n.ready,"_malloc")||(Object.defineProperty(n.ready,"_malloc",{configurable:!0,get:function(){te("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_malloc",{configurable:!0,set:function(){te("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_free")||(Object.defineProperty(n.ready,"_free",{configurable:!0,get:function(){te("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_free",{configurable:!0,set:function(){te("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackSave")||(Object.defineProperty(n.ready,"_stackSave",{configurable:!0,get:function(){te("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackSave",{configurable:!0,set:function(){te("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackRestore")||(Object.defineProperty(n.ready,"_stackRestore",{configurable:!0,get:function(){te("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackRestore",{configurable:!0,set:function(){te("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackAlloc")||(Object.defineProperty(n.ready,"_stackAlloc",{configurable:!0,get:function(){te("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackAlloc",{configurable:!0,set:function(){te("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___data_end")||(Object.defineProperty(n.ready,"___data_end",{configurable:!0,get:function(){te("You are getting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___data_end",{configurable:!0,set:function(){te("You are setting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___wasm_call_ctors")||(Object.defineProperty(n.ready,"___wasm_call_ctors",{configurable:!0,get:function(){te("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___wasm_call_ctors",{configurable:!0,set:function(){te("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_fflush")||(Object.defineProperty(n.ready,"_fflush",{configurable:!0,get:function(){te("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_fflush",{configurable:!0,set:function(){te("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___errno_location")||(Object.defineProperty(n.ready,"___errno_location",{configurable:!0,get:function(){te("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___errno_location",{configurable:!0,set:function(){te("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_memalign")||(Object.defineProperty(n.ready,"_memalign",{configurable:!0,get:function(){te("You are getting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_memalign",{configurable:!0,set:function(){te("You are setting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_memset")||(Object.defineProperty(n.ready,"_memset",{configurable:!0,get:function(){te("You are getting _memset on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_memset",{configurable:!0,set:function(){te("You are setting _memset on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_tzname")||(Object.defineProperty(n.ready,"__get_tzname",{configurable:!0,get:function(){te("You are getting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_tzname",{configurable:!0,set:function(){te("You are setting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_daylight")||(Object.defineProperty(n.ready,"__get_daylight",{configurable:!0,get:function(){te("You are getting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_daylight",{configurable:!0,set:function(){te("You are setting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_timezone")||(Object.defineProperty(n.ready,"__get_timezone",{configurable:!0,get:function(){te("You are getting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_timezone",{configurable:!0,set:function(){te("You are setting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"onRuntimeInitialized")||(Object.defineProperty(n.ready,"onRuntimeInitialized",{configurable:!0,get:function(){te("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"onRuntimeInitialized",{configurable:!0,set:function(){te("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var a={},l;for(l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);var u="./this.program",d=!1,f=!1,g=!1,x=!1;if(d=typeof window=="object",f=typeof importScripts=="function",g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x=!d&&!g&&!f,n.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var E="";function P(p){return n.locateFile?n.locateFile(p,E):E+p}var b,R,D,C;if(g){f?E=gc.dirname(E)+"/":E=__dirname+"/";/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */b=function(y,w){return D||(D=gc),C||(C=gc),y=C.normalize(y),D.readFileSync(y,w?null:"utf8")},R=function(y){var w=b(y,!0);return w.buffer||(w=new Uint8Array(w)),he(w.buffer),w},process.argv.length>1&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(p){if(!(p instanceof t_))throw p}),process.on("unhandledRejection",te),n.inspect=function(){return"[Emscripten Module object]"}}else if(x)typeof read<"u"&&(b=function(y){return read(y)}),R=function(y){var w;return typeof readbuffer=="function"?new Uint8Array(readbuffer(y)):(w=read(y,"binary"),he(typeof w=="object"),w)},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print);else if(d||f){f?E=self.location.href:document.currentScript&&(E=document.currentScript.src),i&&(E=i),E.indexOf("blob:")!==0?E=E.substr(0,E.lastIndexOf("/")+1):E="";{/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */b=function(y){var w=new XMLHttpRequest;return w.open("GET",y,!1),w.send(null),w.responseText},f&&(R=function(y){var w=new XMLHttpRequest;return w.open("GET",y,!1),w.responseType="arraybuffer",w.send(null),new Uint8Array(w.response)})}}else throw new Error("environment detection error");var I=n.print||console.log.bind(console),H=n.printErr||console.warn.bind(console);for(l in a)a.hasOwnProperty(l)&&(n[l]=a[l]);a=null,n.arguments&&n.arguments,Object.getOwnPropertyDescriptor(n,"arguments")||Object.defineProperty(n,"arguments",{configurable:!0,get:function(){te("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.thisProgram&&(u=n.thisProgram),Object.getOwnPropertyDescriptor(n,"thisProgram")||Object.defineProperty(n,"thisProgram",{configurable:!0,get:function(){te("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.quit&&n.quit,Object.getOwnPropertyDescriptor(n,"quit")||Object.defineProperty(n,"quit",{configurable:!0,get:function(){te("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),he(typeof n.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),he(typeof n.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),he(typeof n.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),he(typeof n.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),he(typeof n.read>"u","Module.read option was removed (modify read_ in JS)"),he(typeof n.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),he(typeof n.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),he(typeof n.setWindowTitle>"u","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),he(typeof n.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(n,"read")||Object.defineProperty(n,"read",{configurable:!0,get:function(){te("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"readAsync")||Object.defineProperty(n,"readAsync",{configurable:!0,get:function(){te("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"readBinary")||Object.defineProperty(n,"readBinary",{configurable:!0,get:function(){te("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"setWindowTitle")||Object.defineProperty(n,"setWindowTitle",{configurable:!0,get:function(){te("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});function N(p){N.shown||(N.shown={}),N.shown[p]||(N.shown[p]=1,H(p))}/**
 * @license
 * Copyright 2010 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */var V;n.wasmBinary&&(V=n.wasmBinary),Object.getOwnPropertyDescriptor(n,"wasmBinary")||Object.defineProperty(n,"wasmBinary",{configurable:!0,get:function(){te("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.noExitRuntime&&n.noExitRuntime,Object.getOwnPropertyDescriptor(n,"noExitRuntime")||Object.defineProperty(n,"noExitRuntime",{configurable:!0,get:function(){te("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),typeof WebAssembly!="object"&&te("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function O(p,y,w,G){switch(w=w||"i8",w.charAt(w.length-1)==="*"&&(w="i32"),w){case"i1":J[p>>0]=y;break;case"i8":J[p>>0]=y;break;case"i16":F[p>>1]=y;break;case"i32":j[p>>2]=y;break;case"i64":Zn=[y>>>0,(Sr=y,+mr(Sr)>=1?Sr>0?(un(+_s(Sr/4294967296),4294967295)|0)>>>0:~~+xi((Sr-+(~~Sr>>>0))/4294967296)>>>0:0)],j[p>>2]=Zn[0],j[p+4>>2]=Zn[1];break;case"float":ce[p>>2]=y;break;case"double":ye[p>>3]=y;break;default:te("invalid type for setValue: "+w)}}function W(p,y,w){switch(y=y||"i8",y.charAt(y.length-1)==="*"&&(y="i32"),y){case"i1":return J[p>>0];case"i8":return J[p>>0];case"i16":return F[p>>1];case"i32":return j[p>>2];case"i64":return j[p>>2];case"float":return ce[p>>2];case"double":return ye[p>>3];default:te("invalid type for getValue: "+y)}return null}var q,re=new WebAssembly.Table({initial:648,maximum:648+0,element:"anyfunc"}),fe=!1;function he(p,y){p||te("Assertion failed: "+y)}/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */var Oe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function He(p,y,w){for(var G=y+w,K=y;p[K]&&!(K>=G);)++K;if(K-y>16&&p.subarray&&Oe)return Oe.decode(p.subarray(y,K));for(var ie="";y<K;){var pe=p[y++];if(!(pe&128)){ie+=String.fromCharCode(pe);continue}var xe=p[y++]&63;if((pe&224)==192){ie+=String.fromCharCode((pe&31)<<6|xe);continue}var De=p[y++]&63;if((pe&240)==224?pe=(pe&15)<<12|xe<<6|De:((pe&248)!=240&&N("Invalid UTF-8 leading byte 0x"+pe.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),pe=(pe&7)<<18|xe<<12|De<<6|p[y++]&63),pe<65536)ie+=String.fromCharCode(pe);else{var Ye=pe-65536;ie+=String.fromCharCode(55296|Ye>>10,56320|Ye&1023)}}return ie}function ut(p,y){return p?He(Le,p,y):""}function qe(p,y,w,G){if(!(G>0))return 0;for(var K=w,ie=w+G-1,pe=0;pe<p.length;++pe){var xe=p.charCodeAt(pe);if(xe>=55296&&xe<=57343){var De=p.charCodeAt(++pe);xe=65536+((xe&1023)<<10)|De&1023}if(xe<=127){if(w>=ie)break;y[w++]=xe}else if(xe<=2047){if(w+1>=ie)break;y[w++]=192|xe>>6,y[w++]=128|xe&63}else if(xe<=65535){if(w+2>=ie)break;y[w++]=224|xe>>12,y[w++]=128|xe>>6&63,y[w++]=128|xe&63}else{if(w+3>=ie)break;xe>=2097152&&N("Invalid Unicode code point 0x"+xe.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),y[w++]=240|xe>>18,y[w++]=128|xe>>12&63,y[w++]=128|xe>>6&63,y[w++]=128|xe&63}}return y[w]=0,w-K}function Be(p,y,w){return he(typeof w=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),qe(p,Le,y,w)}function nt(p){for(var y=0,w=0;w<p.length;++w){var G=p.charCodeAt(w);G>=55296&&G<=57343&&(G=65536+((G&1023)<<10)|p.charCodeAt(++w)&1023),G<=127?++y:G<=2047?y+=2:G<=65535?y+=3:y+=4}return y}var dt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function rt(p,y){he(p%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var w=p,G=w>>1,K=G+y/2;!(G>=K)&&U[G];)++G;if(w=G<<1,w-p>32&&dt)return dt.decode(Le.subarray(p,w));for(var ie=0,pe="";;){var xe=F[p+ie*2>>1];if(xe==0||ie==y/2)return pe;++ie,pe+=String.fromCharCode(xe)}}function bt(p,y,w){if(he(y%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),he(typeof w=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),w===void 0&&(w=2147483647),w<2)return 0;w-=2;for(var G=y,K=w<p.length*2?w/2:p.length,ie=0;ie<K;++ie){var pe=p.charCodeAt(ie);F[y>>1]=pe,y+=2}return F[y>>1]=0,y-G}function Z(p){return p.length*2}function ne(p,y){he(p%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var w=0,G="";!(w>=y/4);){var K=j[p+w*4>>2];if(K==0)break;if(++w,K>=65536){var ie=K-65536;G+=String.fromCharCode(55296|ie>>10,56320|ie&1023)}else G+=String.fromCharCode(K)}return G}function se(p,y,w){if(he(y%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),he(typeof w=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),w===void 0&&(w=2147483647),w<4)return 0;for(var G=y,K=G+w-4,ie=0;ie<p.length;++ie){var pe=p.charCodeAt(ie);if(pe>=55296&&pe<=57343){var xe=p.charCodeAt(++ie);pe=65536+((pe&1023)<<10)|xe&1023}if(j[y>>2]=pe,y+=4,y+4>K)break}return j[y>>2]=0,y-G}function Ee(p){for(var y=0,w=0;w<p.length;++w){var G=p.charCodeAt(w);G>=55296&&G<=57343&&++w,y+=4}return y}function Se(p){var y=nt(p)+1,w=$o(y);return w&&qe(p,J,w,y),w}function de(p,y,w){for(var G=0;G<p.length;++G)he(p.charCodeAt(G)===p.charCodeAt(G)&255),J[y++>>0]=p.charCodeAt(G);w||(J[y>>0]=0)}var Pe=65536,ze,J,Le,F,U,j,ee,ce,ye;function oe(p){ze=p,n.HEAP8=J=new Int8Array(p),n.HEAP16=F=new Int16Array(p),n.HEAP32=j=new Int32Array(p),n.HEAPU8=Le=new Uint8Array(p),n.HEAPU16=U=new Uint16Array(p),n.HEAPU32=ee=new Uint32Array(p),n.HEAPF32=ce=new Float32Array(p),n.HEAPF64=ye=new Float64Array(p)}var ae=5892496,we=649616,Re=5892496,Xe=649456;he(ae%16===0,"stack must start aligned"),he(Re%16===0,"heap must start aligned");var We=5242880;n.TOTAL_STACK&&he(We===n.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Qe=n.INITIAL_MEMORY||16777216;Object.getOwnPropertyDescriptor(n,"INITIAL_MEMORY")||Object.defineProperty(n,"INITIAL_MEMORY",{configurable:!0,get:function(){te("Module.INITIAL_MEMORY has been replaced with plain INITIAL_INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),he(Qe>=We,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Qe+"! (TOTAL_STACK="+We+")"),he(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!==void 0&&Int32Array.prototype.set!==void 0,"JS engine does not provide full typed array support");/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 *//**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */n.wasmMemory?q=n.wasmMemory:q=new WebAssembly.Memory({initial:Qe/Pe,maximum:Qe/Pe}),q&&(ze=q.buffer),Qe=ze.byteLength,he(Qe%Pe===0),oe(ze),j[Xe>>2]=Re;/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function $e(){he((we&3)==0),ee[(we>>2)+1]=34821223,ee[(we>>2)+2]=2310721022,j[0]=1668509029}function tt(){var p=ee[(we>>2)+1],y=ee[(we>>2)+2];(p!=34821223||y!=2310721022)&&te("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+y.toString(16)+" "+p.toString(16)),j[0]!==1668509029&&te("Runtime error: The application has corrupted its heap memory area (address zero)!")}/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */(function(){var p=new Int16Array(1),y=new Int8Array(p.buffer);if(p[0]=25459,y[0]!==115||y[1]!==99)throw"Runtime error: expected the system to be little-endian!"})();function _t(p){for(;p.length>0;){var y=p.shift();if(typeof y=="function"){y(n);continue}var w=y.func;typeof w=="number"?y.arg===void 0?n.dynCall_v(w):n.dynCall_vi(w,y.arg):w(y.arg===void 0?null:y.arg)}}var it=[],St=[],Ot=[],Rt=[],Mt=!1,Ie=!1;function gt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)ai(n.preRun.shift());_t(it)}function mt(){tt(),he(!Mt),Mt=!0,!n.noFSInit&&!B.init.initialized&&B.init(),_t(St)}function Et(){tt(),B.ignorePermissions=!1,_t(Ot)}function zt(){if(tt(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Er(n.postRun.shift());_t(Rt)}function ai(p){it.unshift(p)}function Er(p){Rt.unshift(p)}/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */he(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),he(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),he(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),he(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var mr=Math.abs,xi=Math.ceil,_s=Math.floor,un=Math.min,Mr=0,Di=null,Jn=null,fr={};function uo(p){for(var y=p;;){if(!fr[p])return p;p=y+Math.random()}}function Yt(p){Mr++,n.monitorRunDependencies&&n.monitorRunDependencies(Mr),p?(he(!fr[p]),fr[p]=1,Di===null&&typeof setInterval<"u"&&(Di=setInterval(function(){if(fe){clearInterval(Di),Di=null;return}var y=!1;for(var w in fr)y||(y=!0,H("still waiting on run dependencies:")),H("dependency: "+w);y&&H("(end of list)")},1e4))):H("warning: run dependency added without ID")}function ji(p){if(Mr--,n.monitorRunDependencies&&n.monitorRunDependencies(Mr),p?(he(fr[p]),delete fr[p]):H("warning: run dependency removed without ID"),Mr==0&&(Di!==null&&(clearInterval(Di),Di=null),Jn)){var y=Jn;Jn=null,y()}}n.preloadedImages={},n.preloadedAudios={};function te(p){n.onAbort&&n.onAbort(p),p+="",I(p),H(p),fe=!0;var y="abort("+p+") at "+Vu();throw p=y,new WebAssembly.RuntimeError(p)}/**
 * @license
 * Copyright 2015 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 *//**
 * @license
 * Copyright 2017 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function Uo(p,y){return String.prototype.startsWith?p.startsWith(y):p.indexOf(y)===0}var zu="data:application/octet-stream;base64,";function Tl(p){return Uo(p,zu)}var Go="file://";function co(p){return Uo(p,Go)}function Ut(p,y){return function(){var w=p,G=y;return y||(G=n.asm),he(Mt,"native function `"+w+"` called before runtime initialization"),he(!Ie,"native function `"+w+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),G[p]||he(G[p],"exported native function `"+w+"` not found"),G[p].apply(null,arguments)}}var cn="icu-binding.wasm";Tl(cn)||(cn=P(cn));function Vi(){try{if(V)return new Uint8Array(V);if(R)return R(cn);throw"both async and sync fetching of the wasm failed"}catch(p){te(p)}}function Pl(){return!V&&(d||f)&&typeof fetch=="function"&&!co(cn)?fetch(cn,{credentials:"same-origin"}).then(function(p){if(!p.ok)throw"failed to load wasm binary file at '"+cn+"'";return p.arrayBuffer()}).catch(function(){return Vi()}):new Promise(function(p,y){p(Vi())})}function Ho(){var p={env:Ii,wasi_snapshot_preview1:Ii};function y(xe,De){var Ye=xe.exports;n.asm=Ye,ji("wasm-instantiate")}Yt("wasm-instantiate");var w=n;function G(xe){he(n===w,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),w=null,y(xe.instance)}function K(xe){return Pl().then(function(De){return WebAssembly.instantiate(De,p)}).then(xe,function(De){H("failed to asynchronously prepare wasm: "+De),te(De)})}function ie(){if(!V&&typeof WebAssembly.instantiateStreaming=="function"&&!Tl(cn)&&!co(cn)&&typeof fetch=="function")fetch(cn,{credentials:"same-origin"}).then(function(xe){var De=WebAssembly.instantiateStreaming(xe,p);return De.then(G,function(Ye){return H("wasm streaming compile failed: "+Ye),H("falling back to ArrayBuffer instantiation"),K(G)})});else return K(G)}if(n.instantiateWasm)try{var pe=n.instantiateWasm(p,y);return pe}catch(xe){return H("Module.instantiateWasm callback failed with error: "+xe),!1}return ie(),{}}var Sr,Zn;St.push({func:function(){Ju()}});function Rl(p){return N("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),p}function ju(p){var y=/\b_Z[\w\d_]+/g;return p.replace(y,function(w){var G=Rl(w);return w===G?w:G+" ["+w+"]"})}function Mh(){var p=new Error;if(!p.stack){try{throw new Error}catch(y){p=y}if(!p.stack)return"(no stack trace available)"}return p.stack.toString()}function Vu(){var p=Mh();return n.extraStackTrace&&(p+=`
`+n.extraStackTrace()),ju(p)}function Wu(){te("stack overflow")}function ps(p){return j[Ko()>>2]=p,p}function Dl(p,y){return ps(63),-1}var qt={splitPath:function(p){var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(p).slice(1)},normalizeArray:function(p,y){for(var w=0,G=p.length-1;G>=0;G--){var K=p[G];K==="."?p.splice(G,1):K===".."?(p.splice(G,1),w++):w&&(p.splice(G,1),w--)}if(y)for(;w;w--)p.unshift("..");return p},normalize:function(p){var y=p.charAt(0)==="/",w=p.substr(-1)==="/";return p=qt.normalizeArray(p.split("/").filter(function(G){return!!G}),!y).join("/"),!p&&!y&&(p="."),p&&w&&(p+="/"),(y?"/":"")+p},dirname:function(p){var y=qt.splitPath(p),w=y[0],G=y[1];return!w&&!G?".":(G&&(G=G.substr(0,G.length-1)),w+G)},basename:function(p){if(p==="/")return"/";var y=p.lastIndexOf("/");return y===-1?p:p.substr(y+1)},extname:function(p){return qt.splitPath(p)[3]},join:function(){var p=Array.prototype.slice.call(arguments,0);return qt.normalize(p.join("/"))},join2:function(p,y){return qt.normalize(p+"/"+y)}},ri={resolve:function(){for(var p="",y=!1,w=arguments.length-1;w>=-1&&!y;w--){var G=w>=0?arguments[w]:B.cwd();if(typeof G!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!G)return"";p=G+"/"+p,y=G.charAt(0)==="/"}return p=qt.normalizeArray(p.split("/").filter(function(K){return!!K}),!y).join("/"),(y?"/":"")+p||"."},relative:function(p,y){p=ri.resolve(p).substr(1),y=ri.resolve(y).substr(1);function w(Ye){for(var ht=0;ht<Ye.length&&Ye[ht]==="";ht++);for(var xt=Ye.length-1;xt>=0&&Ye[xt]==="";xt--);return ht>xt?[]:Ye.slice(ht,xt-ht+1)}for(var G=w(p.split("/")),K=w(y.split("/")),ie=Math.min(G.length,K.length),pe=ie,xe=0;xe<ie;xe++)if(G[xe]!==K[xe]){pe=xe;break}for(var De=[],xe=pe;xe<G.length;xe++)De.push("..");return De=De.concat(K.slice(pe)),De.join("/")}},zo={ttys:[],init:function(){},shutdown:function(){},register:function(p,y){zo.ttys[p]={input:[],output:[],ops:y},B.registerDevice(p,zo.stream_ops)},stream_ops:{open:function(p){var y=zo.ttys[p.node.rdev];if(!y)throw new B.ErrnoError(43);p.tty=y,p.seekable=!1},close:function(p){p.tty.ops.flush(p.tty)},flush:function(p){p.tty.ops.flush(p.tty)},read:function(p,y,w,G,K){if(!p.tty||!p.tty.ops.get_char)throw new B.ErrnoError(60);for(var ie=0,pe=0;pe<G;pe++){var xe;try{xe=p.tty.ops.get_char(p.tty)}catch{throw new B.ErrnoError(29)}if(xe===void 0&&ie===0)throw new B.ErrnoError(6);if(xe==null)break;ie++,y[w+pe]=xe}return ie&&(p.node.timestamp=Date.now()),ie},write:function(p,y,w,G,K){if(!p.tty||!p.tty.ops.put_char)throw new B.ErrnoError(60);try{for(var ie=0;ie<G;ie++)p.tty.ops.put_char(p.tty,y[w+ie])}catch{throw new B.ErrnoError(29)}return G&&(p.node.timestamp=Date.now()),ie}},default_tty_ops:{get_char:function(p){if(!p.input.length){var y=null;if(g){var w=256,G=Buffer.alloc?Buffer.alloc(w):new Buffer(w),K=0;try{K=D.readSync(process.stdin.fd,G,0,w,null)}catch(ie){if(ie.toString().indexOf("EOF")!=-1)K=0;else throw ie}K>0?y=G.slice(0,K).toString("utf-8"):y=null}else typeof window<"u"&&typeof window.prompt=="function"?(y=window.prompt("Input: "),y!==null&&(y+=`
`)):typeof readline=="function"&&(y=readline(),y!==null&&(y+=`
`));if(!y)return null;p.input=_r(y,!0)}return p.input.shift()},put_char:function(p,y){y===null||y===10?(I(He(p.output,0)),p.output=[]):y!=0&&p.output.push(y)},flush:function(p){p.output&&p.output.length>0&&(I(He(p.output,0)),p.output=[])}},default_tty1_ops:{put_char:function(p,y){y===null||y===10?(H(He(p.output,0)),p.output=[]):y!=0&&p.output.push(y)},flush:function(p){p.output&&p.output.length>0&&(H(He(p.output,0)),p.output=[])}}},jt={ops_table:null,mount:function(p){return jt.createNode(null,"/",16895,0)},createNode:function(p,y,w,G){if(B.isBlkdev(w)||B.isFIFO(w))throw new B.ErrnoError(63);jt.ops_table||(jt.ops_table={dir:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr,lookup:jt.node_ops.lookup,mknod:jt.node_ops.mknod,rename:jt.node_ops.rename,unlink:jt.node_ops.unlink,rmdir:jt.node_ops.rmdir,readdir:jt.node_ops.readdir,symlink:jt.node_ops.symlink},stream:{llseek:jt.stream_ops.llseek}},file:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr},stream:{llseek:jt.stream_ops.llseek,read:jt.stream_ops.read,write:jt.stream_ops.write,allocate:jt.stream_ops.allocate,mmap:jt.stream_ops.mmap,msync:jt.stream_ops.msync}},link:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr,readlink:jt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr},stream:B.chrdev_stream_ops}});var K=B.createNode(p,y,w,G);return B.isDir(K.mode)?(K.node_ops=jt.ops_table.dir.node,K.stream_ops=jt.ops_table.dir.stream,K.contents={}):B.isFile(K.mode)?(K.node_ops=jt.ops_table.file.node,K.stream_ops=jt.ops_table.file.stream,K.usedBytes=0,K.contents=null):B.isLink(K.mode)?(K.node_ops=jt.ops_table.link.node,K.stream_ops=jt.ops_table.link.stream):B.isChrdev(K.mode)&&(K.node_ops=jt.ops_table.chrdev.node,K.stream_ops=jt.ops_table.chrdev.stream),K.timestamp=Date.now(),p&&(p.contents[y]=K),K},getFileDataAsRegularArray:function(p){if(p.contents&&p.contents.subarray){for(var y=[],w=0;w<p.usedBytes;++w)y.push(p.contents[w]);return y}return p.contents},getFileDataAsTypedArray:function(p){return p.contents?p.contents.subarray?p.contents.subarray(0,p.usedBytes):new Uint8Array(p.contents):new Uint8Array(0)},expandFileStorage:function(p,y){var w=p.contents?p.contents.length:0;if(!(w>=y)){var G=1024*1024;y=Math.max(y,w*(w<G?2:1.125)>>>0),w!=0&&(y=Math.max(y,256));var K=p.contents;p.contents=new Uint8Array(y),p.usedBytes>0&&p.contents.set(K.subarray(0,p.usedBytes),0)}},resizeFileStorage:function(p,y){if(p.usedBytes!=y){if(y==0){p.contents=null,p.usedBytes=0;return}if(!p.contents||p.contents.subarray){var w=p.contents;p.contents=new Uint8Array(y),w&&p.contents.set(w.subarray(0,Math.min(y,p.usedBytes))),p.usedBytes=y;return}if(p.contents||(p.contents=[]),p.contents.length>y)p.contents.length=y;else for(;p.contents.length<y;)p.contents.push(0);p.usedBytes=y}},node_ops:{getattr:function(p){var y={};return y.dev=B.isChrdev(p.mode)?p.id:1,y.ino=p.id,y.mode=p.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=p.rdev,B.isDir(p.mode)?y.size=4096:B.isFile(p.mode)?y.size=p.usedBytes:B.isLink(p.mode)?y.size=p.link.length:y.size=0,y.atime=new Date(p.timestamp),y.mtime=new Date(p.timestamp),y.ctime=new Date(p.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr:function(p,y){y.mode!==void 0&&(p.mode=y.mode),y.timestamp!==void 0&&(p.timestamp=y.timestamp),y.size!==void 0&&jt.resizeFileStorage(p,y.size)},lookup:function(p,y){throw B.genericErrors[44]},mknod:function(p,y,w,G){return jt.createNode(p,y,w,G)},rename:function(p,y,w){if(B.isDir(p.mode)){var G;try{G=B.lookupNode(y,w)}catch{}if(G)for(var K in G.contents)throw new B.ErrnoError(55)}delete p.parent.contents[p.name],p.name=w,y.contents[w]=p,p.parent=y},unlink:function(p,y){delete p.contents[y]},rmdir:function(p,y){var w=B.lookupNode(p,y);for(var G in w.contents)throw new B.ErrnoError(55);delete p.contents[y]},readdir:function(p){var y=[".",".."];for(var w in p.contents)!p.contents.hasOwnProperty(w)||y.push(w);return y},symlink:function(p,y,w){var G=jt.createNode(p,y,41471,0);return G.link=w,G},readlink:function(p){if(!B.isLink(p.mode))throw new B.ErrnoError(28);return p.link}},stream_ops:{read:function(p,y,w,G,K){var ie=p.node.contents;if(K>=p.node.usedBytes)return 0;var pe=Math.min(p.node.usedBytes-K,G);if(he(pe>=0),pe>8&&ie.subarray)y.set(ie.subarray(K,K+pe),w);else for(var xe=0;xe<pe;xe++)y[w+xe]=ie[K+xe];return pe},write:function(p,y,w,G,K,ie){if(he(!(y instanceof ArrayBuffer)),!G)return 0;var pe=p.node;if(pe.timestamp=Date.now(),y.subarray&&(!pe.contents||pe.contents.subarray)){if(ie)return he(K===0,"canOwn must imply no weird position inside the file"),pe.contents=y.subarray(w,w+G),pe.usedBytes=G,G;if(pe.usedBytes===0&&K===0)return pe.contents=y.slice(w,w+G),pe.usedBytes=G,G;if(K+G<=pe.usedBytes)return pe.contents.set(y.subarray(w,w+G),K),G}if(jt.expandFileStorage(pe,K+G),pe.contents.subarray&&y.subarray)pe.contents.set(y.subarray(w,w+G),K);else for(var xe=0;xe<G;xe++)pe.contents[K+xe]=y[w+xe];return pe.usedBytes=Math.max(pe.usedBytes,K+G),G},llseek:function(p,y,w){var G=y;if(w===1?G+=p.position:w===2&&B.isFile(p.node.mode)&&(G+=p.node.usedBytes),G<0)throw new B.ErrnoError(28);return G},allocate:function(p,y,w){jt.expandFileStorage(p.node,y+w),p.node.usedBytes=Math.max(p.node.usedBytes,y+w)},mmap:function(p,y,w,G,K,ie){if(he(y===0),!B.isFile(p.node.mode))throw new B.ErrnoError(43);var pe,xe,De=p.node.contents;if(!(ie&2)&&De.buffer===ze)xe=!1,pe=De.byteOffset;else{if((G>0||G+w<De.length)&&(De.subarray?De=De.subarray(G,G+w):De=Array.prototype.slice.call(De,G,G+w)),xe=!0,pe=$o(w),!pe)throw new B.ErrnoError(48);J.set(De,pe)}return{ptr:pe,allocated:xe}},msync:function(p,y,w,G,K){if(!B.isFile(p.node.mode))throw new B.ErrnoError(43);return K&2||jt.stream_ops.write(p,y,0,G,w,!1),0}}},Ci={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},Vf={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},B={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(p){if(!(p instanceof B.ErrnoError))throw p+" : "+Vu();return ps(p.errno)},lookupPath:function(p,y){if(p=ri.resolve(B.cwd(),p),y=y||{},!p)return{path:"",node:null};var w={follow_mount:!0,recurse_count:0};for(var G in w)y[G]===void 0&&(y[G]=w[G]);if(y.recurse_count>8)throw new B.ErrnoError(32);for(var K=qt.normalizeArray(p.split("/").filter(function(yt){return!!yt}),!1),ie=B.root,pe="/",xe=0;xe<K.length;xe++){var De=xe===K.length-1;if(De&&y.parent)break;if(ie=B.lookupNode(ie,K[xe]),pe=qt.join2(pe,K[xe]),B.isMountpoint(ie)&&(!De||De&&y.follow_mount)&&(ie=ie.mounted.root),!De||y.follow)for(var Ye=0;B.isLink(ie.mode);){var ht=B.readlink(pe);pe=ri.resolve(qt.dirname(pe),ht);var xt=B.lookupPath(pe,{recurse_count:y.recurse_count});if(ie=xt.node,Ye++>40)throw new B.ErrnoError(32)}}return{path:pe,node:ie}},getPath:function(p){for(var y;;){if(B.isRoot(p)){var w=p.mount.mountpoint;return y?w[w.length-1]!=="/"?w+"/"+y:w+y:w}y=y?p.name+"/"+y:p.name,p=p.parent}},hashName:function(p,y){for(var w=0,G=0;G<y.length;G++)w=(w<<5)-w+y.charCodeAt(G)|0;return(p+w>>>0)%B.nameTable.length},hashAddNode:function(p){var y=B.hashName(p.parent.id,p.name);p.name_next=B.nameTable[y],B.nameTable[y]=p},hashRemoveNode:function(p){var y=B.hashName(p.parent.id,p.name);if(B.nameTable[y]===p)B.nameTable[y]=p.name_next;else for(var w=B.nameTable[y];w;){if(w.name_next===p){w.name_next=p.name_next;break}w=w.name_next}},lookupNode:function(p,y){var w=B.mayLookup(p);if(w)throw new B.ErrnoError(w,p);for(var G=B.hashName(p.id,y),K=B.nameTable[G];K;K=K.name_next){var ie=K.name;if(K.parent.id===p.id&&ie===y)return K}return B.lookup(p,y)},createNode:function(p,y,w,G){var K=new B.FSNode(p,y,w,G);return B.hashAddNode(K),K},destroyNode:function(p){B.hashRemoveNode(p)},isRoot:function(p){return p===p.parent},isMountpoint:function(p){return!!p.mounted},isFile:function(p){return(p&61440)===32768},isDir:function(p){return(p&61440)===16384},isLink:function(p){return(p&61440)===40960},isChrdev:function(p){return(p&61440)===8192},isBlkdev:function(p){return(p&61440)===24576},isFIFO:function(p){return(p&61440)===4096},isSocket:function(p){return(p&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(p){var y=B.flagModes[p];if(typeof y>"u")throw new Error("Unknown file open mode: "+p);return y},flagsToPermissionString:function(p){var y=["r","w","rw"][p&3];return p&512&&(y+="w"),y},nodePermissions:function(p,y){return B.ignorePermissions?0:y.indexOf("r")!==-1&&!(p.mode&292)||y.indexOf("w")!==-1&&!(p.mode&146)||y.indexOf("x")!==-1&&!(p.mode&73)?2:0},mayLookup:function(p){var y=B.nodePermissions(p,"x");return y||(p.node_ops.lookup?0:2)},mayCreate:function(p,y){try{var w=B.lookupNode(p,y);return 20}catch{}return B.nodePermissions(p,"wx")},mayDelete:function(p,y,w){var G;try{G=B.lookupNode(p,y)}catch(ie){return ie.errno}var K=B.nodePermissions(p,"wx");if(K)return K;if(w){if(!B.isDir(G.mode))return 54;if(B.isRoot(G)||B.getPath(G)===B.cwd())return 10}else if(B.isDir(G.mode))return 31;return 0},mayOpen:function(p,y){return p?B.isLink(p.mode)?32:B.isDir(p.mode)&&(B.flagsToPermissionString(y)!=="r"||y&512)?31:B.nodePermissions(p,B.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd:function(p,y){p=p||0,y=y||B.MAX_OPEN_FDS;for(var w=p;w<=y;w++)if(!B.streams[w])return w;throw new B.ErrnoError(33)},getStream:function(p){return B.streams[p]},createStream:function(p,y,w){B.FSStream||(B.FSStream=function(){},B.FSStream.prototype={object:{get:function(){return this.node},set:function(pe){this.node=pe}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var G=new B.FSStream;for(var K in p)G[K]=p[K];p=G;var ie=B.nextfd(y,w);return p.fd=ie,B.streams[ie]=p,p},closeStream:function(p){B.streams[p]=null},chrdev_stream_ops:{open:function(p){var y=B.getDevice(p.node.rdev);p.stream_ops=y.stream_ops,p.stream_ops.open&&p.stream_ops.open(p)},llseek:function(){throw new B.ErrnoError(70)}},major:function(p){return p>>8},minor:function(p){return p&255},makedev:function(p,y){return p<<8|y},registerDevice:function(p,y){B.devices[p]={stream_ops:y}},getDevice:function(p){return B.devices[p]},getMounts:function(p){for(var y=[],w=[p];w.length;){var G=w.pop();y.push(G),w.push.apply(w,G.mounts)}return y},syncfs:function(p,y){typeof p=="function"&&(y=p,p=!1),B.syncFSRequests++,B.syncFSRequests>1&&H("warning: "+B.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var w=B.getMounts(B.root.mount),G=0;function K(pe){return he(B.syncFSRequests>0),B.syncFSRequests--,y(pe)}function ie(pe){if(pe)return ie.errored?void 0:(ie.errored=!0,K(pe));++G>=w.length&&K(null)}w.forEach(function(pe){if(!pe.type.syncfs)return ie(null);pe.type.syncfs(pe,p,ie)})},mount:function(p,y,w){if(typeof p=="string")throw p;var G=w==="/",K=!w,ie;if(G&&B.root)throw new B.ErrnoError(10);if(!G&&!K){var pe=B.lookupPath(w,{follow_mount:!1});if(w=pe.path,ie=pe.node,B.isMountpoint(ie))throw new B.ErrnoError(10);if(!B.isDir(ie.mode))throw new B.ErrnoError(54)}var xe={type:p,opts:y,mountpoint:w,mounts:[]},De=p.mount(xe);return De.mount=xe,xe.root=De,G?B.root=De:ie&&(ie.mounted=xe,ie.mount&&ie.mount.mounts.push(xe)),De},unmount:function(p){var y=B.lookupPath(p,{follow_mount:!1});if(!B.isMountpoint(y.node))throw new B.ErrnoError(28);var w=y.node,G=w.mounted,K=B.getMounts(G);Object.keys(B.nameTable).forEach(function(pe){for(var xe=B.nameTable[pe];xe;){var De=xe.name_next;K.indexOf(xe.mount)!==-1&&B.destroyNode(xe),xe=De}}),w.mounted=null;var ie=w.mount.mounts.indexOf(G);he(ie!==-1),w.mount.mounts.splice(ie,1)},lookup:function(p,y){return p.node_ops.lookup(p,y)},mknod:function(p,y,w){var G=B.lookupPath(p,{parent:!0}),K=G.node,ie=qt.basename(p);if(!ie||ie==="."||ie==="..")throw new B.ErrnoError(28);var pe=B.mayCreate(K,ie);if(pe)throw new B.ErrnoError(pe);if(!K.node_ops.mknod)throw new B.ErrnoError(63);return K.node_ops.mknod(K,ie,y,w)},create:function(p,y){return y=y!==void 0?y:438,y&=4095,y|=32768,B.mknod(p,y,0)},mkdir:function(p,y){return y=y!==void 0?y:511,y&=1023,y|=16384,B.mknod(p,y,0)},mkdirTree:function(p,y){for(var w=p.split("/"),G="",K=0;K<w.length;++K)if(!!w[K]){G+="/"+w[K];try{B.mkdir(G,y)}catch(ie){if(ie.errno!=20)throw ie}}},mkdev:function(p,y,w){return typeof w>"u"&&(w=y,y=438),y|=8192,B.mknod(p,y,w)},symlink:function(p,y){if(!ri.resolve(p))throw new B.ErrnoError(44);var w=B.lookupPath(y,{parent:!0}),G=w.node;if(!G)throw new B.ErrnoError(44);var K=qt.basename(y),ie=B.mayCreate(G,K);if(ie)throw new B.ErrnoError(ie);if(!G.node_ops.symlink)throw new B.ErrnoError(63);return G.node_ops.symlink(G,K,p)},rename:function(p,y){var w=qt.dirname(p),G=qt.dirname(y),K=qt.basename(p),ie=qt.basename(y),pe,xe,De;try{pe=B.lookupPath(p,{parent:!0}),xe=pe.node,pe=B.lookupPath(y,{parent:!0}),De=pe.node}catch{throw new B.ErrnoError(10)}if(!xe||!De)throw new B.ErrnoError(44);if(xe.mount!==De.mount)throw new B.ErrnoError(75);var Ye=B.lookupNode(xe,K),ht=ri.relative(p,G);if(ht.charAt(0)!==".")throw new B.ErrnoError(28);if(ht=ri.relative(y,w),ht.charAt(0)!==".")throw new B.ErrnoError(55);var xt;try{xt=B.lookupNode(De,ie)}catch{}if(Ye!==xt){var yt=B.isDir(Ye.mode),At=B.mayDelete(xe,K,yt);if(At)throw new B.ErrnoError(At);if(At=xt?B.mayDelete(De,ie,yt):B.mayCreate(De,ie),At)throw new B.ErrnoError(At);if(!xe.node_ops.rename)throw new B.ErrnoError(63);if(B.isMountpoint(Ye)||xt&&B.isMountpoint(xt))throw new B.ErrnoError(10);if(De!==xe&&(At=B.nodePermissions(xe,"w"),At))throw new B.ErrnoError(At);try{B.trackingDelegate.willMovePath&&B.trackingDelegate.willMovePath(p,y)}catch(pt){H("FS.trackingDelegate['willMovePath']('"+p+"', '"+y+"') threw an exception: "+pt.message)}B.hashRemoveNode(Ye);try{xe.node_ops.rename(Ye,De,ie)}catch(pt){throw pt}finally{B.hashAddNode(Ye)}try{B.trackingDelegate.onMovePath&&B.trackingDelegate.onMovePath(p,y)}catch(pt){H("FS.trackingDelegate['onMovePath']('"+p+"', '"+y+"') threw an exception: "+pt.message)}}},rmdir:function(p){var y=B.lookupPath(p,{parent:!0}),w=y.node,G=qt.basename(p),K=B.lookupNode(w,G),ie=B.mayDelete(w,G,!0);if(ie)throw new B.ErrnoError(ie);if(!w.node_ops.rmdir)throw new B.ErrnoError(63);if(B.isMountpoint(K))throw new B.ErrnoError(10);try{B.trackingDelegate.willDeletePath&&B.trackingDelegate.willDeletePath(p)}catch(pe){H("FS.trackingDelegate['willDeletePath']('"+p+"') threw an exception: "+pe.message)}w.node_ops.rmdir(w,G),B.destroyNode(K);try{B.trackingDelegate.onDeletePath&&B.trackingDelegate.onDeletePath(p)}catch(pe){H("FS.trackingDelegate['onDeletePath']('"+p+"') threw an exception: "+pe.message)}},readdir:function(p){var y=B.lookupPath(p,{follow:!0}),w=y.node;if(!w.node_ops.readdir)throw new B.ErrnoError(54);return w.node_ops.readdir(w)},unlink:function(p){var y=B.lookupPath(p,{parent:!0}),w=y.node,G=qt.basename(p),K=B.lookupNode(w,G),ie=B.mayDelete(w,G,!1);if(ie)throw new B.ErrnoError(ie);if(!w.node_ops.unlink)throw new B.ErrnoError(63);if(B.isMountpoint(K))throw new B.ErrnoError(10);try{B.trackingDelegate.willDeletePath&&B.trackingDelegate.willDeletePath(p)}catch(pe){H("FS.trackingDelegate['willDeletePath']('"+p+"') threw an exception: "+pe.message)}w.node_ops.unlink(w,G),B.destroyNode(K);try{B.trackingDelegate.onDeletePath&&B.trackingDelegate.onDeletePath(p)}catch(pe){H("FS.trackingDelegate['onDeletePath']('"+p+"') threw an exception: "+pe.message)}},readlink:function(p){var y=B.lookupPath(p),w=y.node;if(!w)throw new B.ErrnoError(44);if(!w.node_ops.readlink)throw new B.ErrnoError(28);return ri.resolve(B.getPath(w.parent),w.node_ops.readlink(w))},stat:function(p,y){var w=B.lookupPath(p,{follow:!y}),G=w.node;if(!G)throw new B.ErrnoError(44);if(!G.node_ops.getattr)throw new B.ErrnoError(63);return G.node_ops.getattr(G)},lstat:function(p){return B.stat(p,!0)},chmod:function(p,y,w){var G;if(typeof p=="string"){var K=B.lookupPath(p,{follow:!w});G=K.node}else G=p;if(!G.node_ops.setattr)throw new B.ErrnoError(63);G.node_ops.setattr(G,{mode:y&4095|G.mode&-4096,timestamp:Date.now()})},lchmod:function(p,y){B.chmod(p,y,!0)},fchmod:function(p,y){var w=B.getStream(p);if(!w)throw new B.ErrnoError(8);B.chmod(w.node,y)},chown:function(p,y,w,G){var K;if(typeof p=="string"){var ie=B.lookupPath(p,{follow:!G});K=ie.node}else K=p;if(!K.node_ops.setattr)throw new B.ErrnoError(63);K.node_ops.setattr(K,{timestamp:Date.now()})},lchown:function(p,y,w){B.chown(p,y,w,!0)},fchown:function(p,y,w){var G=B.getStream(p);if(!G)throw new B.ErrnoError(8);B.chown(G.node,y,w)},truncate:function(p,y){if(y<0)throw new B.ErrnoError(28);var w;if(typeof p=="string"){var G=B.lookupPath(p,{follow:!0});w=G.node}else w=p;if(!w.node_ops.setattr)throw new B.ErrnoError(63);if(B.isDir(w.mode))throw new B.ErrnoError(31);if(!B.isFile(w.mode))throw new B.ErrnoError(28);var K=B.nodePermissions(w,"w");if(K)throw new B.ErrnoError(K);w.node_ops.setattr(w,{size:y,timestamp:Date.now()})},ftruncate:function(p,y){var w=B.getStream(p);if(!w)throw new B.ErrnoError(8);if((w.flags&2097155)===0)throw new B.ErrnoError(28);B.truncate(w.node,y)},utime:function(p,y,w){var G=B.lookupPath(p,{follow:!0}),K=G.node;K.node_ops.setattr(K,{timestamp:Math.max(y,w)})},open:function(p,y,w,G,K){if(p==="")throw new B.ErrnoError(44);y=typeof y=="string"?B.modeStringToFlags(y):y,w=typeof w>"u"?438:w,y&64?w=w&4095|32768:w=0;var ie;if(typeof p=="object")ie=p;else{p=qt.normalize(p);try{var pe=B.lookupPath(p,{follow:!(y&131072)});ie=pe.node}catch{}}var xe=!1;if(y&64)if(ie){if(y&128)throw new B.ErrnoError(20)}else ie=B.mknod(p,w,0),xe=!0;if(!ie)throw new B.ErrnoError(44);if(B.isChrdev(ie.mode)&&(y&=-513),y&65536&&!B.isDir(ie.mode))throw new B.ErrnoError(54);if(!xe){var De=B.mayOpen(ie,y);if(De)throw new B.ErrnoError(De)}y&512&&B.truncate(ie,0),y&=-131713;var Ye=B.createStream({node:ie,path:B.getPath(ie),flags:y,seekable:!0,position:0,stream_ops:ie.stream_ops,ungotten:[],error:!1},G,K);Ye.stream_ops.open&&Ye.stream_ops.open(Ye),n.logReadFiles&&!(y&1)&&(B.readFiles||(B.readFiles={}),p in B.readFiles||(B.readFiles[p]=1,H("FS.trackingDelegate error on read file: "+p)));try{if(B.trackingDelegate.onOpenFile){var ht=0;(y&2097155)!==1&&(ht|=B.tracking.openFlags.READ),(y&2097155)!==0&&(ht|=B.tracking.openFlags.WRITE),B.trackingDelegate.onOpenFile(p,ht)}}catch(xt){H("FS.trackingDelegate['onOpenFile']('"+p+"', flags) threw an exception: "+xt.message)}return Ye},close:function(p){if(B.isClosed(p))throw new B.ErrnoError(8);p.getdents&&(p.getdents=null);try{p.stream_ops.close&&p.stream_ops.close(p)}catch(y){throw y}finally{B.closeStream(p.fd)}p.fd=null},isClosed:function(p){return p.fd===null},llseek:function(p,y,w){if(B.isClosed(p))throw new B.ErrnoError(8);if(!p.seekable||!p.stream_ops.llseek)throw new B.ErrnoError(70);if(w!=0&&w!=1&&w!=2)throw new B.ErrnoError(28);return p.position=p.stream_ops.llseek(p,y,w),p.ungotten=[],p.position},read:function(p,y,w,G,K){if(G<0||K<0)throw new B.ErrnoError(28);if(B.isClosed(p))throw new B.ErrnoError(8);if((p.flags&2097155)===1)throw new B.ErrnoError(8);if(B.isDir(p.node.mode))throw new B.ErrnoError(31);if(!p.stream_ops.read)throw new B.ErrnoError(28);var ie=typeof K<"u";if(!ie)K=p.position;else if(!p.seekable)throw new B.ErrnoError(70);var pe=p.stream_ops.read(p,y,w,G,K);return ie||(p.position+=pe),pe},write:function(p,y,w,G,K,ie){if(G<0||K<0)throw new B.ErrnoError(28);if(B.isClosed(p))throw new B.ErrnoError(8);if((p.flags&2097155)===0)throw new B.ErrnoError(8);if(B.isDir(p.node.mode))throw new B.ErrnoError(31);if(!p.stream_ops.write)throw new B.ErrnoError(28);p.seekable&&p.flags&1024&&B.llseek(p,0,2);var pe=typeof K<"u";if(!pe)K=p.position;else if(!p.seekable)throw new B.ErrnoError(70);var xe=p.stream_ops.write(p,y,w,G,K,ie);pe||(p.position+=xe);try{p.path&&B.trackingDelegate.onWriteToFile&&B.trackingDelegate.onWriteToFile(p.path)}catch(De){H("FS.trackingDelegate['onWriteToFile']('"+p.path+"') threw an exception: "+De.message)}return xe},allocate:function(p,y,w){if(B.isClosed(p))throw new B.ErrnoError(8);if(y<0||w<=0)throw new B.ErrnoError(28);if((p.flags&2097155)===0)throw new B.ErrnoError(8);if(!B.isFile(p.node.mode)&&!B.isDir(p.node.mode))throw new B.ErrnoError(43);if(!p.stream_ops.allocate)throw new B.ErrnoError(138);p.stream_ops.allocate(p,y,w)},mmap:function(p,y,w,G,K,ie){if((K&2)!==0&&(ie&2)===0&&(p.flags&2097155)!==2)throw new B.ErrnoError(2);if((p.flags&2097155)===1)throw new B.ErrnoError(2);if(!p.stream_ops.mmap)throw new B.ErrnoError(43);return p.stream_ops.mmap(p,y,w,G,K,ie)},msync:function(p,y,w,G,K){return!p||!p.stream_ops.msync?0:p.stream_ops.msync(p,y,w,G,K)},munmap:function(p){return 0},ioctl:function(p,y,w){if(!p.stream_ops.ioctl)throw new B.ErrnoError(59);return p.stream_ops.ioctl(p,y,w)},readFile:function(p,y){if(y=y||{},y.flags=y.flags||"r",y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error('Invalid encoding type "'+y.encoding+'"');var w,G=B.open(p,y.flags),K=B.stat(p),ie=K.size,pe=new Uint8Array(ie);return B.read(G,pe,0,ie,0),y.encoding==="utf8"?w=He(pe,0):y.encoding==="binary"&&(w=pe),B.close(G),w},writeFile:function(p,y,w){w=w||{},w.flags=w.flags||"w";var G=B.open(p,w.flags,w.mode);if(typeof y=="string"){var K=new Uint8Array(nt(y)+1),ie=qe(y,K,0,K.length);B.write(G,K,0,ie,void 0,w.canOwn)}else if(ArrayBuffer.isView(y))B.write(G,y,0,y.byteLength,void 0,w.canOwn);else throw new Error("Unsupported data type");B.close(G)},cwd:function(){return B.currentPath},chdir:function(p){var y=B.lookupPath(p,{follow:!0});if(y.node===null)throw new B.ErrnoError(44);if(!B.isDir(y.node.mode))throw new B.ErrnoError(54);var w=B.nodePermissions(y.node,"x");if(w)throw new B.ErrnoError(w);B.currentPath=y.path},createDefaultDirectories:function(){B.mkdir("/tmp"),B.mkdir("/home"),B.mkdir("/home/web_user")},createDefaultDevices:function(){B.mkdir("/dev"),B.registerDevice(B.makedev(1,3),{read:function(){return 0},write:function(G,K,ie,pe,xe){return pe}}),B.mkdev("/dev/null",B.makedev(1,3)),zo.register(B.makedev(5,0),zo.default_tty_ops),zo.register(B.makedev(6,0),zo.default_tty1_ops),B.mkdev("/dev/tty",B.makedev(5,0)),B.mkdev("/dev/tty1",B.makedev(6,0));var p;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var y=new Uint8Array(1);p=function(){return crypto.getRandomValues(y),y[0]}}else if(g)try{var w=gc;p=function(){return w.randomBytes(1)[0]}}catch{}p||(p=function(){te("no cryptographic support found for random_device. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}),B.createDevice("/dev","random",p),B.createDevice("/dev","urandom",p),B.mkdir("/dev/shm"),B.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){B.mkdir("/proc"),B.mkdir("/proc/self"),B.mkdir("/proc/self/fd"),B.mount({mount:function(){var p=B.createNode("/proc/self","fd",16895,73);return p.node_ops={lookup:function(y,w){var G=+w,K=B.getStream(G);if(!K)throw new B.ErrnoError(8);var ie={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return K.path}}};return ie.parent=ie,ie}},p}},{},"/proc/self/fd")},createStandardStreams:function(){n.stdin?B.createDevice("/dev","stdin",n.stdin):B.symlink("/dev/tty","/dev/stdin"),n.stdout?B.createDevice("/dev","stdout",null,n.stdout):B.symlink("/dev/tty","/dev/stdout"),n.stderr?B.createDevice("/dev","stderr",null,n.stderr):B.symlink("/dev/tty1","/dev/stderr");var p=B.open("/dev/stdin","r"),y=B.open("/dev/stdout","w"),w=B.open("/dev/stderr","w");he(p.fd===0,"invalid handle for stdin ("+p.fd+")"),he(y.fd===1,"invalid handle for stdout ("+y.fd+")"),he(w.fd===2,"invalid handle for stderr ("+w.fd+")")},ensureErrnoError:function(){B.ErrnoError||(B.ErrnoError=function(y,w){this.node=w,this.setErrno=function(G){this.errno=G;for(var K in Vf)if(Vf[K]===G){this.code=K;break}},this.setErrno(y),this.message=Ci[y],this.stack&&(Object.defineProperty(this,"stack",{value:new Error().stack,writable:!0}),this.stack=ju(this.stack))},B.ErrnoError.prototype=new Error,B.ErrnoError.prototype.constructor=B.ErrnoError,[44].forEach(function(p){B.genericErrors[p]=new B.ErrnoError(p),B.genericErrors[p].stack="<generic error, no stack>"}))},staticInit:function(){B.ensureErrnoError(),B.nameTable=new Array(4096),B.mount(jt,{},"/"),B.createDefaultDirectories(),B.createDefaultDevices(),B.createSpecialDirectories(),B.filesystems={MEMFS:jt}},init:function(p,y,w){he(!B.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),B.init.initialized=!0,B.ensureErrnoError(),n.stdin=p||n.stdin,n.stdout=y||n.stdout,n.stderr=w||n.stderr,B.createStandardStreams()},quit:function(){B.init.initialized=!1;var p=n._fflush;p&&p(0);for(var y=0;y<B.streams.length;y++){var w=B.streams[y];!w||B.close(w)}},getMode:function(p,y){var w=0;return p&&(w|=365),y&&(w|=146),w},joinPath:function(p,y){var w=qt.join.apply(null,p);return y&&w[0]=="/"&&(w=w.substr(1)),w},absolutePath:function(p,y){return ri.resolve(y,p)},standardizePath:function(p){return qt.normalize(p)},findObject:function(p,y){var w=B.analyzePath(p,y);return w.exists?w.object:(ps(w.error),null)},analyzePath:function(p,y){try{var w=B.lookupPath(p,{follow:!y});p=w.path}catch{}var G={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var w=B.lookupPath(p,{parent:!0});G.parentExists=!0,G.parentPath=w.path,G.parentObject=w.node,G.name=qt.basename(p),w=B.lookupPath(p,{follow:!y}),G.exists=!0,G.path=w.path,G.object=w.node,G.name=w.node.name,G.isRoot=w.path==="/"}catch(K){G.error=K.errno}return G},createFolder:function(p,y,w,G){var K=qt.join2(typeof p=="string"?p:B.getPath(p),y),ie=B.getMode(w,G);return B.mkdir(K,ie)},createPath:function(p,y,w,G){p=typeof p=="string"?p:B.getPath(p);for(var K=y.split("/").reverse();K.length;){var ie=K.pop();if(!!ie){var pe=qt.join2(p,ie);try{B.mkdir(pe)}catch{}p=pe}}return pe},createFile:function(p,y,w,G,K){var ie=qt.join2(typeof p=="string"?p:B.getPath(p),y),pe=B.getMode(G,K);return B.create(ie,pe)},createDataFile:function(p,y,w,G,K,ie){var pe=y?qt.join2(typeof p=="string"?p:B.getPath(p),y):p,xe=B.getMode(G,K),De=B.create(pe,xe);if(w){if(typeof w=="string"){for(var Ye=new Array(w.length),ht=0,xt=w.length;ht<xt;++ht)Ye[ht]=w.charCodeAt(ht);w=Ye}B.chmod(De,xe|146);var yt=B.open(De,"w");B.write(yt,w,0,w.length,0,ie),B.close(yt),B.chmod(De,xe)}return De},createDevice:function(p,y,w,G){var K=qt.join2(typeof p=="string"?p:B.getPath(p),y),ie=B.getMode(!!w,!!G);B.createDevice.major||(B.createDevice.major=64);var pe=B.makedev(B.createDevice.major++,0);return B.registerDevice(pe,{open:function(xe){xe.seekable=!1},close:function(xe){G&&G.buffer&&G.buffer.length&&G(10)},read:function(xe,De,Ye,ht,xt){for(var yt=0,At=0;At<ht;At++){var pt;try{pt=w()}catch{throw new B.ErrnoError(29)}if(pt===void 0&&yt===0)throw new B.ErrnoError(6);if(pt==null)break;yt++,De[Ye+At]=pt}return yt&&(xe.node.timestamp=Date.now()),yt},write:function(xe,De,Ye,ht,xt){for(var yt=0;yt<ht;yt++)try{G(De[Ye+yt])}catch{throw new B.ErrnoError(29)}return ht&&(xe.node.timestamp=Date.now()),yt}}),B.mkdev(K,ie,pe)},createLink:function(p,y,w,G,K){var ie=qt.join2(typeof p=="string"?p:B.getPath(p),y);return B.symlink(w,ie)},forceLoadFile:function(p){if(p.isDevice||p.isFolder||p.link||p.contents)return!0;var y=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(b)try{p.contents=_r(b(p.url),!0),p.usedBytes=p.contents.length}catch{y=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return y||ps(29),y},createLazyFile:function(p,y,w,G,K){function ie(){this.lengthKnown=!1,this.chunks=[]}if(ie.prototype.get=function(yt){if(!(yt>this.length-1||yt<0)){var At=yt%this.chunkSize,pt=yt/this.chunkSize|0;return this.getter(pt)[At]}},ie.prototype.setDataGetter=function(yt){this.getter=yt},ie.prototype.cacheLength=function(){var yt=new XMLHttpRequest;if(yt.open("HEAD",w,!1),yt.send(null),!(yt.status>=200&&yt.status<300||yt.status===304))throw new Error("Couldn't load "+w+". Status: "+yt.status);var At=Number(yt.getResponseHeader("Content-length")),pt,hr=(pt=yt.getResponseHeader("Accept-Ranges"))&&pt==="bytes",Vr=(pt=yt.getResponseHeader("Content-Encoding"))&&pt==="gzip",A=1024*1024;hr||(A=At);var S=function(Y,ge){if(Y>ge)throw new Error("invalid range ("+Y+", "+ge+") or no bytes requested!");if(ge>At-1)throw new Error("only "+At+" bytes available! programmer error!");var Ce=new XMLHttpRequest;if(Ce.open("GET",w,!1),At!==A&&Ce.setRequestHeader("Range","bytes="+Y+"-"+ge),typeof Uint8Array<"u"&&(Ce.responseType="arraybuffer"),Ce.overrideMimeType&&Ce.overrideMimeType("text/plain; charset=x-user-defined"),Ce.send(null),!(Ce.status>=200&&Ce.status<300||Ce.status===304))throw new Error("Couldn't load "+w+". Status: "+Ce.status);return Ce.response!==void 0?new Uint8Array(Ce.response||[]):_r(Ce.responseText||"",!0)},M=this;M.setDataGetter(function(Y){var ge=Y*A,Ce=(Y+1)*A-1;if(Ce=Math.min(Ce,At-1),typeof M.chunks[Y]>"u"&&(M.chunks[Y]=S(ge,Ce)),typeof M.chunks[Y]>"u")throw new Error("doXHR failed!");return M.chunks[Y]}),(Vr||!At)&&(A=At=1,At=this.getter(0).length,A=At,I("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=At,this._chunkSize=A,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!f)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var pe=new ie;Object.defineProperties(pe,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var xe={isDevice:!1,contents:pe}}else var xe={isDevice:!1,url:w};var De=B.createFile(p,y,xe,G,K);xe.contents?De.contents=xe.contents:xe.url&&(De.contents=null,De.url=xe.url),Object.defineProperties(De,{usedBytes:{get:function(){return this.contents.length}}});var Ye={},ht=Object.keys(De.stream_ops);return ht.forEach(function(xt){var yt=De.stream_ops[xt];Ye[xt]=function(){if(!B.forceLoadFile(De))throw new B.ErrnoError(29);return yt.apply(null,arguments)}}),Ye.read=function(yt,At,pt,hr,Vr){if(!B.forceLoadFile(De))throw new B.ErrnoError(29);var A=yt.node.contents;if(Vr>=A.length)return 0;var S=Math.min(A.length-Vr,hr);if(he(S>=0),A.slice)for(var M=0;M<S;M++)At[pt+M]=A[Vr+M];else for(var M=0;M<S;M++)At[pt+M]=A.get(Vr+M);return S},De.stream_ops=Ye,De},createPreloadedFile:function(p,y,w,G,K,ie,pe,xe,De,Ye){Browser.init();var ht=y?ri.resolve(qt.join2(p,y)):p,xt=uo("cp "+ht);function yt(At){function pt(Vr){Ye&&Ye(),xe||B.createDataFile(p,y,Vr,G,K,De),ie&&ie(),ji(xt)}var hr=!1;n.preloadPlugins.forEach(function(Vr){hr||Vr.canHandle(ht)&&(Vr.handle(At,ht,pt,function(){pe&&pe(),ji(xt)}),hr=!0)}),hr||pt(At)}Yt(xt),typeof w=="string"?Browser.asyncLoad(w,function(At){yt(At)},pe):yt(w)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(p,y,w){y=y||function(){},w=w||function(){};var G=B.indexedDB();try{var K=G.open(B.DB_NAME(),B.DB_VERSION)}catch(ie){return w(ie)}K.onupgradeneeded=function(){I("creating db");var pe=K.result;pe.createObjectStore(B.DB_STORE_NAME)},K.onsuccess=function(){var pe=K.result,xe=pe.transaction([B.DB_STORE_NAME],"readwrite"),De=xe.objectStore(B.DB_STORE_NAME),Ye=0,ht=0,xt=p.length;function yt(){ht==0?y():w()}p.forEach(function(At){var pt=De.put(B.analyzePath(At).object.contents,At);pt.onsuccess=function(){Ye++,Ye+ht==xt&&yt()},pt.onerror=function(){ht++,Ye+ht==xt&&yt()}}),xe.onerror=w},K.onerror=w},loadFilesFromDB:function(p,y,w){y=y||function(){},w=w||function(){};var G=B.indexedDB();try{var K=G.open(B.DB_NAME(),B.DB_VERSION)}catch(ie){return w(ie)}K.onupgradeneeded=w,K.onsuccess=function(){var pe=K.result;try{var xe=pe.transaction([B.DB_STORE_NAME],"readonly")}catch(At){w(At);return}var De=xe.objectStore(B.DB_STORE_NAME),Ye=0,ht=0,xt=p.length;function yt(){ht==0?y():w()}p.forEach(function(At){var pt=De.get(At);pt.onsuccess=function(){B.analyzePath(At).exists&&B.unlink(At),B.createDataFile(qt.dirname(At),qt.basename(At),pt.result,!0,!0,!0),Ye++,Ye+ht==xt&&yt()},pt.onerror=function(){ht++,Ye+ht==xt&&yt()}}),xe.onerror=w},K.onerror=w}},yi={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(p,y){if(y[0]!=="/"){var w;if(p===-100)w=B.cwd();else{var G=B.getStream(p);if(!G)throw new B.ErrnoError(8);w=G.path}y=qt.join2(w,y)}return y},doStat:function(p,y,w){try{var G=p(y)}catch(K){if(K&&K.node&&qt.normalize(y)!==qt.normalize(B.getPath(K.node)))return-54;throw K}return j[w>>2]=G.dev,j[w+4>>2]=0,j[w+8>>2]=G.ino,j[w+12>>2]=G.mode,j[w+16>>2]=G.nlink,j[w+20>>2]=G.uid,j[w+24>>2]=G.gid,j[w+28>>2]=G.rdev,j[w+32>>2]=0,Zn=[G.size>>>0,(Sr=G.size,+mr(Sr)>=1?Sr>0?(un(+_s(Sr/4294967296),4294967295)|0)>>>0:~~+xi((Sr-+(~~Sr>>>0))/4294967296)>>>0:0)],j[w+40>>2]=Zn[0],j[w+44>>2]=Zn[1],j[w+48>>2]=4096,j[w+52>>2]=G.blocks,j[w+56>>2]=G.atime.getTime()/1e3|0,j[w+60>>2]=0,j[w+64>>2]=G.mtime.getTime()/1e3|0,j[w+68>>2]=0,j[w+72>>2]=G.ctime.getTime()/1e3|0,j[w+76>>2]=0,Zn=[G.ino>>>0,(Sr=G.ino,+mr(Sr)>=1?Sr>0?(un(+_s(Sr/4294967296),4294967295)|0)>>>0:~~+xi((Sr-+(~~Sr>>>0))/4294967296)>>>0:0)],j[w+80>>2]=Zn[0],j[w+84>>2]=Zn[1],0},doMsync:function(p,y,w,G,K){var ie=Le.slice(p,p+w);B.msync(y,ie,K,w,G)},doMkdir:function(p,y){return p=qt.normalize(p),p[p.length-1]==="/"&&(p=p.substr(0,p.length-1)),B.mkdir(p,y,0),0},doMknod:function(p,y,w){switch(y&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return B.mknod(p,y,w),0},doReadlink:function(p,y,w){if(w<=0)return-28;var G=B.readlink(p),K=Math.min(w,nt(G)),ie=J[y+K];return Be(G,y,w+1),J[y+K]=ie,K},doAccess:function(p,y){if(y&-8)return-28;var w,G=B.lookupPath(p,{follow:!0});if(w=G.node,!w)return-44;var K="";return y&4&&(K+="r"),y&2&&(K+="w"),y&1&&(K+="x"),K&&B.nodePermissions(w,K)?-2:0},doDup:function(p,y,w){var G=B.getStream(w);return G&&B.close(G),B.open(p,y,0,w,w).fd},doReadv:function(p,y,w,G){for(var K=0,ie=0;ie<w;ie++){var pe=j[y+ie*8>>2],xe=j[y+(ie*8+4)>>2],De=B.read(p,J,pe,xe,G);if(De<0)return-1;if(K+=De,De<xe)break}return K},doWritev:function(p,y,w,G){for(var K=0,ie=0;ie<w;ie++){var pe=j[y+ie*8>>2],xe=j[y+(ie*8+4)>>2],De=B.write(p,J,pe,xe,G);if(De<0)return-1;K+=De}return K},varargs:void 0,get:function(){he(yi.varargs!=null),yi.varargs+=4;var p=j[yi.varargs-4>>2];return p},getStr:function(p){var y=ut(p);return y},getStreamFromFD:function(p){var y=B.getStream(p);if(!y)throw new B.ErrnoError(8);return y},get64:function(p,y){return p>=0?he(y===0):he(y===-1),p}};function Gg(p,y,w,G,K,ie){ie<<=12;var pe,xe=!1;if((G&16)!==0&&p%16384!==0)return-28;if((G&32)!==0){if(pe=e_(16384,y),!pe)return-48;Jg(pe,0,y),xe=!0}else{var De=B.getStream(K);if(!De)return-8;var Ye=B.mmap(De,p,y,ie,w,G);pe=Ye.ptr,xe=Ye.allocated}return yi.mappings[pe]={malloc:pe,len:y,allocated:xe,fd:K,prot:w,flags:G,offset:ie},pe}function Wf(p,y,w,G,K,ie){try{return Gg(p,y,w,G,K,ie)}catch(pe){return(typeof B>"u"||!(pe instanceof B.ErrnoError))&&te(pe),-pe.errno}}function Bh(p,y){if((p|0)===-1||y===0)return-28;var w=yi.mappings[p];if(!w)return 0;if(y===w.len){var G=B.getStream(w.fd);w.prot&2&&yi.doMsync(p,G,y,w.flags,w.offset),yi.mappings[p]=null,w.allocated&&Fi(w.malloc)}return 0}function $f(p,y){try{return Bh(p,y)}catch(w){return(typeof B>"u"||!(w instanceof B.ErrnoError))&&te(w),-w.errno}}function On(p,y,w){yi.varargs=w;try{var G=yi.getStr(p),K=yi.get(),ie=B.open(G,y,K);return ie.fd}catch(pe){return(typeof B>"u"||!(pe instanceof B.ErrnoError))&&te(pe),-pe.errno}}function Kf(p,y){try{return p=yi.getStr(p),yi.doStat(B.stat,p,y)}catch(w){return(typeof B>"u"||!(w instanceof B.ErrnoError))&&te(w),-w.errno}}function Wi(p){switch(p){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+p)}}function Gv(){for(var p=new Array(256),y=0;y<256;++y)p[y]=String.fromCharCode(y);Cl=p}var Cl=void 0;function Xr(p){for(var y="",w=p;Le[w];)y+=Cl[Le[w++]];return y}var Ol={},Ba={},Nn={},Hv=48,Lh=57;function Nl(p){if(p===void 0)return"_unknown";p=p.replace(/[^a-zA-Z0-9_]/g,"$");var y=p.charCodeAt(0);return y>=Hv&&y<=Lh?"_"+p:p}function $u(p,y){return p=Nl(p),new Function("body","return function "+p+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(y)}function Xf(p,y){var w=$u(y,function(G){this.name=y,this.message=G;var K=new Error(G).stack;K!==void 0&&(this.stack=this.toString()+`
`+K.replace(/^Error(:[^\n]*)?\n/,""))});return w.prototype=Object.create(p.prototype),w.prototype.constructor=w,w.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},w}var Il=void 0;function ir(p){throw new Il(p)}var Ku=void 0;function Uh(p){throw new Ku(p)}function jo(p,y,w){p.forEach(function(xe){Nn[xe]=y});function G(xe){var De=w(xe);De.length!==p.length&&Uh("Mismatched type converter count");for(var Ye=0;Ye<p.length;++Ye)js(p[Ye],De[Ye])}var K=new Array(y.length),ie=[],pe=0;y.forEach(function(xe,De){Ba.hasOwnProperty(xe)?K[De]=Ba[xe]:(ie.push(xe),Ol.hasOwnProperty(xe)||(Ol[xe]=[]),Ol[xe].push(function(){K[De]=Ba[xe],++pe,pe===ie.length&&G(K)}))}),ie.length===0&&G(K)}function js(p,y,w){if(w=w||{},!("argPackAdvance"in y))throw new TypeError("registerType registeredInstance requires argPackAdvance");var G=y.name;if(p||ir('type "'+G+'" must have a positive integer typeid pointer'),Ba.hasOwnProperty(p)){if(w.ignoreDuplicateRegistrations)return;ir("Cannot register type '"+G+"' twice")}if(Ba[p]=y,delete Nn[p],Ol.hasOwnProperty(p)){var K=Ol[p];delete Ol[p],K.forEach(function(ie){ie()})}}function Hg(p,y,w,G,K){var ie=Wi(w);y=Xr(y),js(p,{name:y,fromWireType:function(pe){return!!pe},toWireType:function(pe,xe){return xe?G:K},argPackAdvance:8,readValueFromPointer:function(pe){var xe;if(w===1)xe=J;else if(w===2)xe=F;else if(w===4)xe=j;else throw new TypeError("Unknown boolean type size: "+y);return this.fromWireType(xe[pe>>ie])},destructorFunction:null})}function Gh(p){if(!(this instanceof Vo)||!(p instanceof Vo))return!1;for(var y=this.$$.ptrType.registeredClass,w=this.$$.ptr,G=p.$$.ptrType.registeredClass,K=p.$$.ptr;y.baseClass;)w=y.upcast(w),y=y.baseClass;for(;G.baseClass;)K=G.upcast(K),G=G.baseClass;return y===G&&w===K}function gs(p){return{count:p.count,deleteScheduled:p.deleteScheduled,preservePointerOnDelete:p.preservePointerOnDelete,ptr:p.ptr,ptrType:p.ptrType,smartPtr:p.smartPtr,smartPtrType:p.smartPtrType}}function Fl(p){function y(w){return w.$$.ptrType.registeredClass.name}ir(y(p)+" instance already deleted")}var La=!1;function es(p){}function ms(p){p.smartPtr?p.smartPtrType.rawDestructor(p.smartPtr):p.ptrType.registeredClass.rawDestructor(p.ptr)}function ho(p){p.count.value-=1;var y=p.count.value===0;y&&ms(p)}function hn(p){return typeof FinalizationGroup>"u"?(hn=function(y){return y},p):(La=new FinalizationGroup(function(y){for(var w=y.next();!w.done;w=y.next()){var G=w.value;G.ptr?ho(G):console.warn("object already deleted: "+G.ptr)}}),hn=function(y){return La.register(y,y.$$,y.$$),y},es=function(y){La.unregister(y.$$)},hn(p))}function Ml(){if(this.$$.ptr||Fl(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var p=hn(Object.create(Object.getPrototypeOf(this),{$$:{value:gs(this.$$)}}));return p.$$.count.value+=1,p.$$.deleteScheduled=!1,p}function Ua(){this.$$.ptr||Fl(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ir("Object already scheduled for deletion"),es(this),ho(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function zg(){return!this.$$.ptr}var Bl=void 0,Ll=[];function wr(){for(;Ll.length;){var p=Ll.pop();p.$$.deleteScheduled=!1,p.delete()}}function Xu(){return this.$$.ptr||Fl(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ir("Object already scheduled for deletion"),Ll.push(this),Ll.length===1&&Bl&&Bl(wr),this.$$.deleteScheduled=!0,this}function zv(){Vo.prototype.isAliasOf=Gh,Vo.prototype.clone=Ml,Vo.prototype.delete=Ua,Vo.prototype.isDeleted=zg,Vo.prototype.deleteLater=Xu}function Vo(){}var Yf={};function qf(p,y,w){if(p[y].overloadTable===void 0){var G=p[y];p[y]=function(){return p[y].overloadTable.hasOwnProperty(arguments.length)||ir("Function '"+w+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+p[y].overloadTable+")!"),p[y].overloadTable[arguments.length].apply(this,arguments)},p[y].overloadTable=[],p[y].overloadTable[G.argCount]=G}}function nr(p,y,w){n.hasOwnProperty(p)?((w===void 0||n[p].overloadTable!==void 0&&n[p].overloadTable[w]!==void 0)&&ir("Cannot register public name '"+p+"' twice"),qf(n,p,p),n.hasOwnProperty(w)&&ir("Cannot register multiple overloads of a function with the same number of arguments ("+w+")!"),n[p].overloadTable[w]=y):(n[p]=y,w!==void 0&&(n[p].numArguments=w))}function Hh(p,y,w,G,K,ie,pe,xe){this.name=p,this.constructor=y,this.instancePrototype=w,this.rawDestructor=G,this.baseClass=K,this.getActualType=ie,this.upcast=pe,this.downcast=xe,this.pureVirtualFunctions=[]}function Ul(p,y,w){for(;y!==w;)y.upcast||ir("Expected null or instance of "+w.name+", got an instance of "+y.name),p=y.upcast(p),y=y.baseClass;return p}function Ga(p,y){if(y===null)return this.isReference&&ir("null is not a valid "+this.name),0;y.$$||ir('Cannot pass "'+zl(y)+'" as a '+this.name),y.$$.ptr||ir("Cannot pass deleted object as a pointer of type "+this.name);var w=y.$$.ptrType.registeredClass,G=Ul(y.$$.ptr,w,this.registeredClass);return G}function jv(p,y){var w;if(y===null)return this.isReference&&ir("null is not a valid "+this.name),this.isSmartPointer?(w=this.rawConstructor(),p!==null&&p.push(this.rawDestructor,w),w):0;y.$$||ir('Cannot pass "'+zl(y)+'" as a '+this.name),y.$$.ptr||ir("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&y.$$.ptrType.isConst&&ir("Cannot convert argument of type "+(y.$$.smartPtrType?y.$$.smartPtrType.name:y.$$.ptrType.name)+" to parameter type "+this.name);var G=y.$$.ptrType.registeredClass;if(w=Ul(y.$$.ptr,G,this.registeredClass),this.isSmartPointer)switch(y.$$.smartPtr===void 0&&ir("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:y.$$.smartPtrType===this?w=y.$$.smartPtr:ir("Cannot convert argument of type "+(y.$$.smartPtrType?y.$$.smartPtrType.name:y.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:w=y.$$.smartPtr;break;case 2:if(y.$$.smartPtrType===this)w=y.$$.smartPtr;else{var K=y.clone();w=this.rawShare(w,qg(function(){K.delete()})),p!==null&&p.push(this.rawDestructor,w)}break;default:ir("Unsupporting sharing policy")}return w}function Yu(p,y){if(y===null)return this.isReference&&ir("null is not a valid "+this.name),0;y.$$||ir('Cannot pass "'+zl(y)+'" as a '+this.name),y.$$.ptr||ir("Cannot pass deleted object as a pointer of type "+this.name),y.$$.ptrType.isConst&&ir("Cannot convert argument of type "+y.$$.ptrType.name+" to parameter type "+this.name);var w=y.$$.ptrType.registeredClass,G=Ul(y.$$.ptr,w,this.registeredClass);return G}function Ha(p){return this.fromWireType(ee[p>>2])}function Qf(p){return this.rawGetPointee&&(p=this.rawGetPointee(p)),p}function cr(p){this.rawDestructor&&this.rawDestructor(p)}function Wo(p){p!==null&&p.delete()}function Gl(p,y,w){if(y===w)return p;if(w.baseClass===void 0)return null;var G=Gl(p,y,w.baseClass);return G===null?null:w.downcast(G)}function jg(){return Object.keys(za).length}function Vg(){var p=[];for(var y in za)za.hasOwnProperty(y)&&p.push(za[y]);return p}function Jf(p){Bl=p,Ll.length&&Bl&&Bl(wr)}function zh(){n.getInheritedInstanceCount=jg,n.getLiveInheritedInstances=Vg,n.flushPendingDeletes=wr,n.setDelayFunction=Jf}var za={};function jh(p,y){for(y===void 0&&ir("ptr should not be undefined");p.baseClass;)y=p.upcast(y),p=p.baseClass;return y}function Vh(p,y){return y=jh(p,y),za[y]}function ja(p,y){(!y.ptrType||!y.ptr)&&Uh("makeClassHandle requires ptr and ptrType");var w=!!y.smartPtrType,G=!!y.smartPtr;return w!==G&&Uh("Both smartPtrType and smartPtr must be specified"),y.count={value:1},hn(Object.create(p,{$$:{value:y}}))}function Vv(p){var y=this.getPointee(p);if(!y)return this.destructor(p),null;var w=Vh(this.registeredClass,y);if(w!==void 0){if(w.$$.count.value===0)return w.$$.ptr=y,w.$$.smartPtr=p,w.clone();var G=w.clone();return this.destructor(p),G}function K(){return this.isSmartPointer?ja(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:y,smartPtrType:this,smartPtr:p}):ja(this.registeredClass.instancePrototype,{ptrType:this,ptr:p})}var ie=this.registeredClass.getActualType(y),pe=Yf[ie];if(!pe)return K.call(this);var xe;this.isConst?xe=pe.constPointerType:xe=pe.pointerType;var De=Gl(y,this.registeredClass,xe.registeredClass);return De===null?K.call(this):this.isSmartPointer?ja(xe.registeredClass.instancePrototype,{ptrType:xe,ptr:De,smartPtrType:this,smartPtr:p}):ja(xe.registeredClass.instancePrototype,{ptrType:xe,ptr:De})}function Wg(){ts.prototype.getPointee=Qf,ts.prototype.destructor=cr,ts.prototype.argPackAdvance=8,ts.prototype.readValueFromPointer=Ha,ts.prototype.deleteObject=Wo,ts.prototype.fromWireType=Vv}function ts(p,y,w,G,K,ie,pe,xe,De,Ye,ht){this.name=p,this.registeredClass=y,this.isReference=w,this.isConst=G,this.isSmartPointer=K,this.pointeeType=ie,this.sharingPolicy=pe,this.rawGetPointee=xe,this.rawConstructor=De,this.rawShare=Ye,this.rawDestructor=ht,!K&&y.baseClass===void 0?G?(this.toWireType=Ga,this.destructorFunction=null):(this.toWireType=Yu,this.destructorFunction=null):this.toWireType=jv}function ke(p,y,w){n.hasOwnProperty(p)||Uh("Replacing nonexistant public symbol"),n[p].overloadTable!==void 0&&w!==void 0?n[p].overloadTable[w]=y:(n[p]=y,n[p].argCount=w)}function Qr(p,y){p=Xr(p);function w(ie){for(var pe=[],xe=1;xe<p.length;++xe)pe.push("a"+xe);var De="dynCall_"+p+"_"+y,Ye="return function "+De+"("+pe.join(", ")+`) {
`;return Ye+="    return dynCall(rawFunction"+(pe.length?", ":"")+pe.join(", ")+`);
`,Ye+=`};
`,new Function("dynCall","rawFunction",Ye)(ie,y)}var G=n["dynCall_"+p],K=w(G);return typeof K!="function"&&ir("unknown function pointer with signature "+p+": "+y),K}var $g=void 0;function Kg(p){var y=$h(p),w=Xr(y);return Fi(y),w}function qu(p,y){var w=[],G={};function K(ie){if(!G[ie]&&!Ba[ie]){if(Nn[ie]){Nn[ie].forEach(K);return}w.push(ie),G[ie]=!0}}throw y.forEach(K),new $g(p+": "+w.map(Kg).join([", "]))}function Wv(p,y,w,G,K,ie,pe,xe,De,Ye,ht,xt,yt){ht=Xr(ht),ie=Qr(K,ie),xe&&(xe=Qr(pe,xe)),Ye&&(Ye=Qr(De,Ye)),yt=Qr(xt,yt);var At=Nl(ht);nr(At,function(){qu("Cannot construct "+ht+" due to unbound types",[G])}),jo([p,y,w],G?[G]:[],function(pt){pt=pt[0];var hr,Vr;G?(hr=pt.registeredClass,Vr=hr.instancePrototype):Vr=Vo.prototype;var A=$u(At,function(){if(Object.getPrototypeOf(this)!==S)throw new Il("Use 'new' to construct "+ht);if(M.constructor_body===void 0)throw new Il(ht+" has no accessible constructor");var Je=M.constructor_body[arguments.length];if(Je===void 0)throw new Il("Tried to invoke ctor of "+ht+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(M.constructor_body).toString()+") parameters instead!");return Je.apply(this,arguments)}),S=Object.create(Vr,{constructor:{value:A}});A.prototype=S;var M=new Hh(ht,A,S,yt,hr,ie,xe,Ye),Y=new ts(ht,M,!0,!1,!1),ge=new ts(ht+"*",M,!1,!1,!1),Ce=new ts(ht+" const*",M,!1,!0,!1);return Yf[p]={pointerType:ge,constPointerType:Ce},ke(At,A),[Y,ge,Ce]})}function Xg(p,y){if(!(p instanceof Function))throw new TypeError("new_ called with constructor type "+typeof p+" which is not a function");var w=$u(p.name||"unknownFunctionName",function(){});w.prototype=p.prototype;var G=new w,K=p.apply(G,y);return K instanceof Object?K:G}function Hl(p){for(;p.length;){var y=p.pop(),w=p.pop();w(y)}}function rs(p,y,w,G,K){var ie=y.length;ie<2&&ir("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var pe=y[1]!==null&&w!==null,xe=!1,De=1;De<y.length;++De)if(y[De]!==null&&y[De].destructorFunction===void 0){xe=!0;break}for(var Ye=y[0].name!=="void",ht="",xt="",De=0;De<ie-2;++De)ht+=(De!==0?", ":"")+"arg"+De,xt+=(De!==0?", ":"")+"arg"+De+"Wired";var yt="return function "+Nl(p)+"("+ht+`) {
if (arguments.length !== `+(ie-2)+`) {
throwBindingError('function `+p+" called with ' + arguments.length + ' arguments, expected "+(ie-2)+` args!');
}
`;xe&&(yt+=`var destructors = [];
`);var At=xe?"destructors":"null",pt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],hr=[ir,G,K,Hl,y[0],y[1]];pe&&(yt+="var thisWired = classParam.toWireType("+At+`, this);
`);for(var De=0;De<ie-2;++De)yt+="var arg"+De+"Wired = argType"+De+".toWireType("+At+", arg"+De+"); // "+y[De+2].name+`
`,pt.push("argType"+De),hr.push(y[De+2]);if(pe&&(xt="thisWired"+(xt.length>0?", ":"")+xt),yt+=(Ye?"var rv = ":"")+"invoker(fn"+(xt.length>0?", ":"")+xt+`);
`,xe)yt+=`runDestructors(destructors);
`;else for(var De=pe?1:2;De<y.length;++De){var Vr=De===1?"thisWired":"arg"+(De-2)+"Wired";y[De].destructorFunction!==null&&(yt+=Vr+"_dtor("+Vr+"); // "+y[De].name+`
`,pt.push(Vr+"_dtor"),hr.push(y[De].destructorFunction))}Ye&&(yt+=`var ret = retType.fromWireType(rv);
return ret;
`),yt+=`}
`,pt.push(yt);var A=Xg(Function,pt).apply(null,hr);return A}function Qu(p,y){for(var w=[],G=0;G<p;G++)w.push(j[(y>>2)+G]);return w}function Yg(p,y,w,G,K,ie,pe){var xe=Qu(w,G);y=Xr(y),ie=Qr(K,ie),jo([],[p],function(De){De=De[0];var Ye=De.name+"."+y;function ht(){qu("Cannot call "+Ye+" due to unbound types",xe)}var xt=De.registeredClass.constructor;return xt[y]===void 0?(ht.argCount=w-1,xt[y]=ht):(qf(xt,y,Ye),xt[y].overloadTable[w-1]=ht),jo([],xe,function(yt){var At=[yt[0],null].concat(yt.slice(1)),pt=rs(Ye,At,null,ie,pe);return xt[y].overloadTable===void 0?(pt.argCount=w-1,xt[y]=pt):xt[y].overloadTable[w-1]=pt,[]}),[]})}function Oi(p,y,w,G,K,ie){he(y>0);var pe=Qu(y,w);K=Qr(G,K);var xe=[ie],De=[];jo([],[p],function(Ye){Ye=Ye[0];var ht="constructor "+Ye.name;if(Ye.registeredClass.constructor_body===void 0&&(Ye.registeredClass.constructor_body=[]),Ye.registeredClass.constructor_body[y-1]!==void 0)throw new Il("Cannot register multiple constructors with identical number of parameters ("+(y-1)+") for class '"+Ye.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return Ye.registeredClass.constructor_body[y-1]=function(){qu("Cannot construct "+Ye.name+" due to unbound types",pe)},jo([],pe,function(xt){return Ye.registeredClass.constructor_body[y-1]=function(){arguments.length!==y-1&&ir(ht+" called with "+arguments.length+" arguments, expected "+(y-1)),De.length=0,xe.length=y;for(var At=1;At<y;++At)xe[At]=xt[At].toWireType(De,arguments[At-1]);var pt=K.apply(null,xe);return Hl(De),xt[0].fromWireType(pt)},[]}),[]})}function Ni(p,y,w,G,K,ie,pe,xe){var De=Qu(w,G);y=Xr(y),ie=Qr(K,ie),jo([],[p],function(Ye){Ye=Ye[0];var ht=Ye.name+"."+y;xe&&Ye.registeredClass.pureVirtualFunctions.push(y);function xt(){qu("Cannot call "+ht+" due to unbound types",De)}var yt=Ye.registeredClass.instancePrototype,At=yt[y];return At===void 0||At.overloadTable===void 0&&At.className!==Ye.name&&At.argCount===w-2?(xt.argCount=w-2,xt.className=Ye.name,yt[y]=xt):(qf(yt,y,ht),yt[y].overloadTable[w-2]=xt),jo([],De,function(pt){var hr=rs(ht,pt,Ye,ie,pe);return yt[y].overloadTable===void 0?(hr.argCount=w-2,yt[y]=hr):yt[y].overloadTable[w-2]=hr,[]}),[]})}var ii=[],xs=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function $v(p){p>4&&--xs[p].refcount===0&&(xs[p]=void 0,ii.push(p))}function Kv(){for(var p=0,y=5;y<xs.length;++y)xs[y]!==void 0&&++p;return p}function Xv(){for(var p=5;p<xs.length;++p)if(xs[p]!==void 0)return xs[p];return null}function Yv(){n.count_emval_handles=Kv,n.get_first_emval=Xv}function qg(p){switch(p){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var y=ii.length?ii.pop():xs.length;return xs[y]={refcount:1,value:p},y}}}function qv(p,y){y=Xr(y),js(p,{name:y,fromWireType:function(w){var G=xs[w].value;return $v(w),G},toWireType:function(w,G){return qg(G)},argPackAdvance:8,readValueFromPointer:Ha,destructorFunction:null})}function Qv(p,y,w){switch(y){case 0:return function(G){var K=w?J:Le;return this.fromWireType(K[G])};case 1:return function(G){var K=w?F:U;return this.fromWireType(K[G>>1])};case 2:return function(G){var K=w?j:ee;return this.fromWireType(K[G>>2])};default:throw new TypeError("Unknown integer type: "+p)}}function Jv(p,y,w,G){var K=Wi(w);y=Xr(y);function ie(){}ie.values={},js(p,{name:y,constructor:ie,fromWireType:function(pe){return this.constructor.values[pe]},toWireType:function(pe,xe){return xe.value},argPackAdvance:8,readValueFromPointer:Qv(y,K,G),destructorFunction:null}),nr(y,ie)}function Zv(p,y){var w=Ba[p];return w===void 0&&ir(y+" has unknown type "+Kg(p)),w}function eE(p,y,w){var G=Zv(p,"enum");y=Xr(y);var K=G.constructor,ie=Object.create(G.constructor.prototype,{value:{value:w},constructor:{value:$u(G.name+"_"+y,function(){})}});K.values[w]=ie,K[y]=ie}function zl(p){if(p===null)return"null";var y=typeof p;return y==="object"||y==="array"||y==="function"?p.toString():""+p}function tE(p,y){switch(y){case 2:return function(w){return this.fromWireType(ce[w>>2])};case 3:return function(w){return this.fromWireType(ye[w>>3])};default:throw new TypeError("Unknown float type: "+p)}}function rE(p,y,w){var G=Wi(w);y=Xr(y),js(p,{name:y,fromWireType:function(K){return K},toWireType:function(K,ie){if(typeof ie!="number"&&typeof ie!="boolean")throw new TypeError('Cannot convert "'+zl(ie)+'" to '+this.name);return ie},argPackAdvance:8,readValueFromPointer:tE(y,G),destructorFunction:null})}function iE(p,y,w,G,K,ie){var pe=Qu(y,w);p=Xr(p),K=Qr(G,K),nr(p,function(){qu("Cannot call "+p+" due to unbound types",pe)},y-1),jo([],pe,function(xe){var De=[xe[0],null].concat(xe.slice(1));return ke(p,rs(p,De,null,K,ie),y-1),[]})}function nE(p,y,w){switch(y){case 0:return w?function(K){return J[K]}:function(K){return Le[K]};case 1:return w?function(K){return F[K>>1]}:function(K){return U[K>>1]};case 2:return w?function(K){return j[K>>2]}:function(K){return ee[K>>2]};default:throw new TypeError("Unknown integer type: "+p)}}function Wh(p,y,w,G,K){y=Xr(y),K===-1&&(K=4294967295);var ie=Wi(w),pe=function(Ye){return Ye};if(G===0){var xe=32-8*w;pe=function(Ye){return Ye<<xe>>>xe}}var De=y.indexOf("unsigned")!=-1;js(p,{name:y,fromWireType:pe,toWireType:function(Ye,ht){if(typeof ht!="number"&&typeof ht!="boolean")throw new TypeError('Cannot convert "'+zl(ht)+'" to '+this.name);if(ht<G||ht>K)throw new TypeError('Passing a number "'+zl(ht)+'" from JS side to C/C++ side to an argument of type "'+y+'", which is outside the valid range ['+G+", "+K+"]!");return De?ht>>>0:ht|0},argPackAdvance:8,readValueFromPointer:nE(y,ie,G!==0),destructorFunction:null})}function Qg(p,y,w){var G=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],K=G[y];function ie(pe){pe=pe>>2;var xe=ee,De=xe[pe],Ye=xe[pe+1];return new K(ze,Ye,De)}w=Xr(w),js(p,{name:w,fromWireType:ie,argPackAdvance:8,readValueFromPointer:ie},{ignoreDuplicateRegistrations:!0})}function Zf(p,y){y=Xr(y);var w=y==="std::string";js(p,{name:y,fromWireType:function(G){var K=ee[G>>2],ie;if(w)for(var pe=G+4,xe=0;xe<=K;++xe){var De=G+4+xe;if(Le[De]==0||xe==K){var Ye=De-pe,ht=ut(pe,Ye);ie===void 0?ie=ht:(ie+=String.fromCharCode(0),ie+=ht),pe=De+1}}else{for(var xt=new Array(K),xe=0;xe<K;++xe)xt[xe]=String.fromCharCode(Le[G+4+xe]);ie=xt.join("")}return Fi(G),ie},toWireType:function(G,K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));var ie,pe=typeof K=="string";pe||K instanceof Uint8Array||K instanceof Uint8ClampedArray||K instanceof Int8Array||ir("Cannot pass non-string to std::string"),w&&pe?ie=function(){return nt(K)}:ie=function(){return K.length};var xe=ie(),De=$o(4+xe+1);if(ee[De>>2]=xe,w&&pe)Be(K,De+4,xe+1);else if(pe)for(var Ye=0;Ye<xe;++Ye){var ht=K.charCodeAt(Ye);ht>255&&(Fi(De),ir("String has UTF-16 code units that do not fit in 8 bits")),Le[De+4+Ye]=ht}else for(var Ye=0;Ye<xe;++Ye)Le[De+4+Ye]=K[Ye];return G!==null&&G.push(Fi,De),De},argPackAdvance:8,readValueFromPointer:Ha,destructorFunction:function(G){Fi(G)}})}function h(p,y,w){w=Xr(w);var G,K,ie,pe,xe;y===2?(G=rt,K=bt,pe=Z,ie=function(){return U},xe=1):y===4&&(G=ne,K=se,pe=Ee,ie=function(){return ee},xe=2),js(p,{name:w,fromWireType:function(De){for(var Ye=ee[De>>2],ht=ie(),xt,yt=De+4,At=0;At<=Ye;++At){var pt=De+4+At*y;if(ht[pt>>xe]==0||At==Ye){var hr=pt-yt,Vr=G(yt,hr);xt===void 0?xt=Vr:(xt+=String.fromCharCode(0),xt+=Vr),yt=pt+y}}return Fi(De),xt},toWireType:function(De,Ye){typeof Ye!="string"&&ir("Cannot pass non-string to C++ string type "+w);var ht=pe(Ye),xt=$o(4+ht+y);return ee[xt>>2]=ht>>xe,K(Ye,xt+4,ht+y),De!==null&&De.push(Fi,xt),xt},argPackAdvance:8,readValueFromPointer:Ha,destructorFunction:function(De){Fi(De)}})}function m(p,y){y=Xr(y),js(p,{isVoid:!0,name:y,argPackAdvance:0,fromWireType:function(){},toWireType:function(w,G){}})}function v(){te()}function k(){return 649456}function L(p,y,w){Le.copyWithin(p,y,y+w)}function X(p){te("Cannot enlarge memory arrays to size "+p+" bytes (OOM). Either (1) compile with  -s INITIAL_MEMORY=X  with X higher than the current value "+J.length+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function ve(p){p=p>>>0,X(p)}var be={};function Fe(){return u||"./this.program"}function Ne(){if(!Ne.strings){var p={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Fe()};for(var y in be)p[y]=be[y];var w=[];for(var y in p)w.push(y+"="+p[y]);Ne.strings=w}return Ne.strings}function ct(p,y){var w=0;return Ne().forEach(function(G,K){var ie=y+w;j[p+K*4>>2]=ie,de(G,ie),w+=G.length+1}),0}function kt(p,y){var w=Ne();j[p>>2]=w.length;var G=0;return w.forEach(function(K){G+=K.length+1}),j[y>>2]=G,0}function Nt(p){try{var y=yi.getStreamFromFD(p);return B.close(y),0}catch(w){return(typeof B>"u"||!(w instanceof B.ErrnoError))&&te(w),w.errno}}function Ge(p){}var Tt=function(p,y,w,G){p||(p=this),this.parent=p,this.mount=p.mount,this.mounted=null,this.id=B.nextInode++,this.name=y,this.mode=w,this.node_ops={},this.stream_ops={},this.rdev=G},sr=365,Or=146;Object.defineProperties(Tt.prototype,{read:{get:function(){return(this.mode&sr)===sr},set:function(p){p?this.mode|=sr:this.mode&=~sr}},write:{get:function(){return(this.mode&Or)===Or},set:function(p){p?this.mode|=Or:this.mode&=~Or}},isFolder:{get:function(){return B.isDir(this.mode)}},isDevice:{get:function(){return B.isChrdev(this.mode)}}}),B.FSNode=Tt,B.staticInit(),Gv(),Il=n.BindingError=Xf(Error,"BindingError"),Ku=n.InternalError=Xf(Error,"InternalError"),zv(),Wg(),zh(),$g=n.UnboundTypeError=Xf(Error,"UnboundTypeError"),Yv();/**
 * @license
 * Copyright 2017 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function _r(p,y,w){var G=w>0?w:nt(p)+1,K=new Array(G),ie=qe(p,K,0,K.length);return y&&(K.length=ie),K}var Ii={__handle_stack_overflow:Wu,__map_file:Dl,__sys_mmap2:Wf,__sys_munmap:$f,__sys_open:On,__sys_stat64:Kf,_embind_register_bool:Hg,_embind_register_class:Wv,_embind_register_class_class_function:Yg,_embind_register_class_constructor:Oi,_embind_register_class_function:Ni,_embind_register_emval:qv,_embind_register_enum:Jv,_embind_register_enum_value:eE,_embind_register_float:rE,_embind_register_function:iE,_embind_register_integer:Wh,_embind_register_memory_view:Qg,_embind_register_std_string:Zf,_embind_register_std_wstring:h,_embind_register_void:m,abort:v,emscripten_get_sbrk_ptr:k,emscripten_memcpy_big:L,emscripten_resize_heap:ve,environ_get:ct,environ_sizes_get:kt,fd_close:Nt,memory:q,setTempRet0:Ge,table:re};Ho();var Ju=n.___wasm_call_ctors=Ut("__wasm_call_ctors"),$o=n._malloc=Ut("malloc"),Jg=n._memset=Ut("memset"),Fi=n._free=Ut("free"),$h=n.___getTypeName=Ut("__getTypeName");n.___embind_register_native_and_builtin_types=Ut("__embind_register_native_and_builtin_types"),n._fflush=Ut("fflush");var Ko=n.___errno_location=Ut("__errno_location");n.__get_tzname=Ut("_get_tzname"),n.__get_daylight=Ut("_get_daylight"),n.__get_timezone=Ut("_get_timezone"),n.stackSave=Ut("stackSave"),n.stackRestore=Ut("stackRestore"),n.stackAlloc=Ut("stackAlloc");var e_=n._memalign=Ut("memalign");n.___set_stack_limit=Ut("__set_stack_limit"),n.__growWasmMemory=Ut("__growWasmMemory"),n.dynCall_ii=Ut("dynCall_ii"),n.dynCall_vi=Ut("dynCall_vi"),n.dynCall_iii=Ut("dynCall_iii"),n.dynCall_vii=Ut("dynCall_vii"),n.dynCall_viiii=Ut("dynCall_viiii"),n.dynCall_viii=Ut("dynCall_viii"),n.dynCall_iiii=Ut("dynCall_iiii"),n.dynCall_iiiii=Ut("dynCall_iiiii"),n.dynCall_viiiii=Ut("dynCall_viiiii"),n.dynCall_i=Ut("dynCall_i"),n.dynCall_iiiiiii=Ut("dynCall_iiiiiii"),n.dynCall_v=Ut("dynCall_v"),n.dynCall_ji=Ut("dynCall_ji"),n.dynCall_iiji=Ut("dynCall_iiji"),n.dynCall_iijjiii=Ut("dynCall_iijjiii"),n.dynCall_vijjjii=Ut("dynCall_vijjjii"),n.dynCall_iiiiii=Ut("dynCall_iiiiii"),n.dynCall_iiiiiiiiii=Ut("dynCall_iiiiiiiiii"),n.dynCall_viiiiii=Ut("dynCall_viiiiii"),n.dynCall_viiiiiii=Ut("dynCall_viiiiiii"),n.dynCall_iiiiiiiii=Ut("dynCall_iiiiiiiii");/**
 * @license
 * Copyright 2010 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */n.intArrayFromString=_r,Object.getOwnPropertyDescriptor(n,"intArrayToString")||(n.intArrayToString=function(){te("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ccall")||(n.ccall=function(){te("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"cwrap")||(n.cwrap=function(){te("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.setValue=O,n.getValue=W,Object.getOwnPropertyDescriptor(n,"allocate")||(n.allocate=function(){te("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getMemory")||(n.getMemory=function(){te("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"UTF8ArrayToString")||(n.UTF8ArrayToString=function(){te("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF8ToString")||(n.UTF8ToString=function(){te("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF8Array")||(n.stringToUTF8Array=function(){te("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF8")||(n.stringToUTF8=function(){te("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF8")||(n.lengthBytesUTF8=function(){te("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackTrace")||(n.stackTrace=function(){te("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPreRun")||(n.addOnPreRun=function(){te("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnInit")||(n.addOnInit=function(){te("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPreMain")||(n.addOnPreMain=function(){te("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnExit")||(n.addOnExit=function(){te("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPostRun")||(n.addOnPostRun=function(){te("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeStringToMemory")||(n.writeStringToMemory=function(){te("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeArrayToMemory")||(n.writeArrayToMemory=function(){te("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeAsciiToMemory")||(n.writeAsciiToMemory=function(){te("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addRunDependency")||(n.addRunDependency=function(){te("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"removeRunDependency")||(n.removeRunDependency=function(){te("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createFolder")||(n.FS_createFolder=function(){te("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createPath")||(n.FS_createPath=function(){te("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createDataFile")||(n.FS_createDataFile=function(){te("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createPreloadedFile")||(n.FS_createPreloadedFile=function(){te("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createLazyFile")||(n.FS_createLazyFile=function(){te("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createLink")||(n.FS_createLink=function(){te("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createDevice")||(n.FS_createDevice=function(){te("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_unlink")||(n.FS_unlink=function(){te("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"dynamicAlloc")||(n.dynamicAlloc=function(){te("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"loadDynamicLibrary")||(n.loadDynamicLibrary=function(){te("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"loadWebAssemblyModule")||(n.loadWebAssemblyModule=function(){te("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getLEB")||(n.getLEB=function(){te("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getFunctionTables")||(n.getFunctionTables=function(){te("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"alignFunctionTables")||(n.alignFunctionTables=function(){te("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerFunctions")||(n.registerFunctions=function(){te("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addFunction")||(n.addFunction=function(){te("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"removeFunction")||(n.removeFunction=function(){te("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getFuncWrapper")||(n.getFuncWrapper=function(){te("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"prettyPrint")||(n.prettyPrint=function(){te("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeBigInt")||(n.makeBigInt=function(){te("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"dynCall")||(n.dynCall=function(){te("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getCompilerSetting")||(n.getCompilerSetting=function(){te("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"print")||(n.print=function(){te("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"printErr")||(n.printErr=function(){te("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getTempRet0")||(n.getTempRet0=function(){te("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setTempRet0")||(n.setTempRet0=function(){te("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"callMain")||(n.callMain=function(){te("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"abort")||(n.abort=function(){te("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToNewUTF8")||(n.stringToNewUTF8=function(){te("'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"abortOnCannotGrowMemory")||(n.abortOnCannotGrowMemory=function(){te("'abortOnCannotGrowMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscripten_realloc_buffer")||(n.emscripten_realloc_buffer=function(){te("'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ENV")||(n.ENV=function(){te("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ERRNO_CODES")||(n.ERRNO_CODES=function(){te("'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ERRNO_MESSAGES")||(n.ERRNO_MESSAGES=function(){te("'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setErrNo")||(n.setErrNo=function(){te("'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"DNS")||(n.DNS=function(){te("'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GAI_ERRNO_MESSAGES")||(n.GAI_ERRNO_MESSAGES=function(){te("'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Protocols")||(n.Protocols=function(){te("'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Sockets")||(n.Sockets=function(){te("'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UNWIND_CACHE")||(n.UNWIND_CACHE=function(){te("'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readAsmConstArgs")||(n.readAsmConstArgs=function(){te("'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jstoi_q")||(n.jstoi_q=function(){te("'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jstoi_s")||(n.jstoi_s=function(){te("'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"abortStackOverflow")||(n.abortStackOverflow=function(){te("'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"reallyNegative")||(n.reallyNegative=function(){te("'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"formatString")||(n.formatString=function(){te("'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PATH")||(n.PATH=function(){te("'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PATH_FS")||(n.PATH_FS=function(){te("'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SYSCALLS")||(n.SYSCALLS=function(){te("'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"syscallMmap2")||(n.syscallMmap2=function(){te("'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"syscallMunmap")||(n.syscallMunmap=function(){te("'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"JSEvents")||(n.JSEvents=function(){te("'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"specialHTMLTargets")||(n.specialHTMLTargets=function(){te("'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"demangle")||(n.demangle=function(){te("'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"demangleAll")||(n.demangleAll=function(){te("'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jsStackTrace")||(n.jsStackTrace=function(){te("'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackTrace")||(n.stackTrace=function(){te("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getEnvStrings")||(n.getEnvStrings=function(){te("'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"checkWasiClock")||(n.checkWasiClock=function(){te("'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64")||(n.writeI53ToI64=function(){te("'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64Clamped")||(n.writeI53ToI64Clamped=function(){te("'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64Signaling")||(n.writeI53ToI64Signaling=function(){te("'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToU64Clamped")||(n.writeI53ToU64Clamped=function(){te("'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToU64Signaling")||(n.writeI53ToU64Signaling=function(){te("'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readI53FromI64")||(n.readI53FromI64=function(){te("'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readI53FromU64")||(n.readI53FromU64=function(){te("'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"convertI32PairToI53")||(n.convertI32PairToI53=function(){te("'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"convertU32PairToI53")||(n.convertU32PairToI53=function(){te("'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Browser")||(n.Browser=function(){te("'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"FS")||(n.FS=function(){te("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"MEMFS")||(n.MEMFS=function(){te("'MEMFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"TTY")||(n.TTY=function(){te("'TTY' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PIPEFS")||(n.PIPEFS=function(){te("'PIPEFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SOCKFS")||(n.SOCKFS=function(){te("'SOCKFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GL")||(n.GL=function(){te("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGet")||(n.emscriptenWebGLGet=function(){te("'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetTexPixelData")||(n.emscriptenWebGLGetTexPixelData=function(){te("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetUniform")||(n.emscriptenWebGLGetUniform=function(){te("'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetVertexAttrib")||(n.emscriptenWebGLGetVertexAttrib=function(){te("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"AL")||(n.AL=function(){te("'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_unicode")||(n.SDL_unicode=function(){te("'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_ttfContext")||(n.SDL_ttfContext=function(){te("'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_audio")||(n.SDL_audio=function(){te("'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL")||(n.SDL=function(){te("'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_gfx")||(n.SDL_gfx=function(){te("'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLUT")||(n.GLUT=function(){te("'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"EGL")||(n.EGL=function(){te("'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLFW_Window")||(n.GLFW_Window=function(){te("'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLFW")||(n.GLFW=function(){te("'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLEW")||(n.GLEW=function(){te("'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"IDBStore")||(n.IDBStore=function(){te("'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runAndAbortIfError")||(n.runAndAbortIfError=function(){te("'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_handle_array")||(n.emval_handle_array=function(){te("'emval_handle_array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_free_list")||(n.emval_free_list=function(){te("'emval_free_list' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_symbols")||(n.emval_symbols=function(){te("'emval_symbols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_emval")||(n.init_emval=function(){te("'init_emval' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"count_emval_handles")||(n.count_emval_handles=function(){te("'count_emval_handles' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"get_first_emval")||(n.get_first_emval=function(){te("'get_first_emval' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getStringOrSymbol")||(n.getStringOrSymbol=function(){te("'getStringOrSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"requireHandle")||(n.requireHandle=function(){te("'requireHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_newers")||(n.emval_newers=function(){te("'emval_newers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"craftEmvalAllocator")||(n.craftEmvalAllocator=function(){te("'craftEmvalAllocator' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_get_global")||(n.emval_get_global=function(){te("'emval_get_global' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_methodCallers")||(n.emval_methodCallers=function(){te("'emval_methodCallers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"InternalError")||(n.InternalError=function(){te("'InternalError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"BindingError")||(n.BindingError=function(){te("'BindingError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UnboundTypeError")||(n.UnboundTypeError=function(){te("'UnboundTypeError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PureVirtualError")||(n.PureVirtualError=function(){te("'PureVirtualError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_embind")||(n.init_embind=function(){te("'init_embind' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwInternalError")||(n.throwInternalError=function(){te("'throwInternalError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwBindingError")||(n.throwBindingError=function(){te("'throwBindingError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwUnboundTypeError")||(n.throwUnboundTypeError=function(){te("'throwUnboundTypeError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ensureOverloadTable")||(n.ensureOverloadTable=function(){te("'ensureOverloadTable' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"exposePublicSymbol")||(n.exposePublicSymbol=function(){te("'exposePublicSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"replacePublicSymbol")||(n.replacePublicSymbol=function(){te("'replacePublicSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"extendError")||(n.extendError=function(){te("'extendError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"createNamedFunction")||(n.createNamedFunction=function(){te("'createNamedFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredInstances")||(n.registeredInstances=function(){te("'registeredInstances' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getBasestPointer")||(n.getBasestPointer=function(){te("'getBasestPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerInheritedInstance")||(n.registerInheritedInstance=function(){te("'registerInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"unregisterInheritedInstance")||(n.unregisterInheritedInstance=function(){te("'unregisterInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getInheritedInstance")||(n.getInheritedInstance=function(){te("'getInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getInheritedInstanceCount")||(n.getInheritedInstanceCount=function(){te("'getInheritedInstanceCount' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getLiveInheritedInstances")||(n.getLiveInheritedInstances=function(){te("'getLiveInheritedInstances' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredTypes")||(n.registeredTypes=function(){te("'registeredTypes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"awaitingDependencies")||(n.awaitingDependencies=function(){te("'awaitingDependencies' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"typeDependencies")||(n.typeDependencies=function(){te("'typeDependencies' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredPointers")||(n.registeredPointers=function(){te("'registeredPointers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerType")||(n.registerType=function(){te("'registerType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"whenDependentTypesAreResolved")||(n.whenDependentTypesAreResolved=function(){te("'whenDependentTypesAreResolved' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind_charCodes")||(n.embind_charCodes=function(){te("'embind_charCodes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind_init_charCodes")||(n.embind_init_charCodes=function(){te("'embind_init_charCodes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readLatin1String")||(n.readLatin1String=function(){te("'readLatin1String' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getTypeName")||(n.getTypeName=function(){te("'getTypeName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"heap32VectorToArray")||(n.heap32VectorToArray=function(){te("'heap32VectorToArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"requireRegisteredType")||(n.requireRegisteredType=function(){te("'requireRegisteredType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getShiftFromSize")||(n.getShiftFromSize=function(){te("'getShiftFromSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"integerReadValueFromPointer")||(n.integerReadValueFromPointer=function(){te("'integerReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"enumReadValueFromPointer")||(n.enumReadValueFromPointer=function(){te("'enumReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"floatReadValueFromPointer")||(n.floatReadValueFromPointer=function(){te("'floatReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"simpleReadValueFromPointer")||(n.simpleReadValueFromPointer=function(){te("'simpleReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runDestructors")||(n.runDestructors=function(){te("'runDestructors' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"new_")||(n.new_=function(){te("'new_' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"craftInvokerFunction")||(n.craftInvokerFunction=function(){te("'craftInvokerFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind__requireFunction")||(n.embind__requireFunction=function(){te("'embind__requireFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"tupleRegistrations")||(n.tupleRegistrations=function(){te("'tupleRegistrations' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"structRegistrations")||(n.structRegistrations=function(){te("'structRegistrations' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"genericPointerToWireType")||(n.genericPointerToWireType=function(){te("'genericPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"constNoSmartPtrRawPointerToWireType")||(n.constNoSmartPtrRawPointerToWireType=function(){te("'constNoSmartPtrRawPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"nonConstNoSmartPtrRawPointerToWireType")||(n.nonConstNoSmartPtrRawPointerToWireType=function(){te("'nonConstNoSmartPtrRawPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_RegisteredPointer")||(n.init_RegisteredPointer=function(){te("'init_RegisteredPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer")||(n.RegisteredPointer=function(){te("'RegisteredPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_getPointee")||(n.RegisteredPointer_getPointee=function(){te("'RegisteredPointer_getPointee' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_destructor")||(n.RegisteredPointer_destructor=function(){te("'RegisteredPointer_destructor' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_deleteObject")||(n.RegisteredPointer_deleteObject=function(){te("'RegisteredPointer_deleteObject' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_fromWireType")||(n.RegisteredPointer_fromWireType=function(){te("'RegisteredPointer_fromWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runDestructor")||(n.runDestructor=function(){te("'runDestructor' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"releaseClassHandle")||(n.releaseClassHandle=function(){te("'releaseClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"finalizationGroup")||(n.finalizationGroup=function(){te("'finalizationGroup' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"detachFinalizer_deps")||(n.detachFinalizer_deps=function(){te("'detachFinalizer_deps' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"detachFinalizer")||(n.detachFinalizer=function(){te("'detachFinalizer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"attachFinalizer")||(n.attachFinalizer=function(){te("'attachFinalizer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeClassHandle")||(n.makeClassHandle=function(){te("'makeClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_ClassHandle")||(n.init_ClassHandle=function(){te("'init_ClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle")||(n.ClassHandle=function(){te("'ClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_isAliasOf")||(n.ClassHandle_isAliasOf=function(){te("'ClassHandle_isAliasOf' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwInstanceAlreadyDeleted")||(n.throwInstanceAlreadyDeleted=function(){te("'throwInstanceAlreadyDeleted' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_clone")||(n.ClassHandle_clone=function(){te("'ClassHandle_clone' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_delete")||(n.ClassHandle_delete=function(){te("'ClassHandle_delete' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"deletionQueue")||(n.deletionQueue=function(){te("'deletionQueue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_isDeleted")||(n.ClassHandle_isDeleted=function(){te("'ClassHandle_isDeleted' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_deleteLater")||(n.ClassHandle_deleteLater=function(){te("'ClassHandle_deleteLater' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"flushPendingDeletes")||(n.flushPendingDeletes=function(){te("'flushPendingDeletes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"delayFunction")||(n.delayFunction=function(){te("'delayFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setDelayFunction")||(n.setDelayFunction=function(){te("'setDelayFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredClass")||(n.RegisteredClass=function(){te("'RegisteredClass' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"shallowCopyInternalPointer")||(n.shallowCopyInternalPointer=function(){te("'shallowCopyInternalPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"downcastPointer")||(n.downcastPointer=function(){te("'downcastPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"upcastPointer")||(n.upcastPointer=function(){te("'upcastPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"validateThis")||(n.validateThis=function(){te("'validateThis' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"char_0")||(n.char_0=function(){te("'char_0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"char_9")||(n.char_9=function(){te("'char_9' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeLegalFunctionName")||(n.makeLegalFunctionName=function(){te("'makeLegalFunctionName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"warnOnce")||(n.warnOnce=function(){te("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackSave")||(n.stackSave=function(){te("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackRestore")||(n.stackRestore=function(){te("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackAlloc")||(n.stackAlloc=function(){te("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"AsciiToString")||(n.AsciiToString=function(){te("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToAscii")||(n.stringToAscii=function(){te("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF16ToString")||(n.UTF16ToString=function(){te("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF16")||(n.stringToUTF16=function(){te("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF16")||(n.lengthBytesUTF16=function(){te("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF32ToString")||(n.UTF32ToString=function(){te("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF32")||(n.stringToUTF32=function(){te("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF32")||(n.lengthBytesUTF32=function(){te("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.allocateUTF8=Se,Object.getOwnPropertyDescriptor(n,"allocateUTF8OnStack")||(n.allocateUTF8OnStack=function(){te("'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.writeStackCookie=$e,n.checkStackCookie=tt,Object.getOwnPropertyDescriptor(n,"ALLOC_NORMAL")||Object.defineProperty(n,"ALLOC_NORMAL",{configurable:!0,get:function(){te("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(n,"ALLOC_STACK")||Object.defineProperty(n,"ALLOC_STACK",{configurable:!0,get:function(){te("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(n,"ALLOC_DYNAMIC")||Object.defineProperty(n,"ALLOC_DYNAMIC",{configurable:!0,get:function(){te("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(n,"ALLOC_NONE")||Object.defineProperty(n,"ALLOC_NONE",{configurable:!0,get:function(){te("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}});var Xo;function t_(p){this.name="ExitStatus",this.message="Program terminated with exit("+p+")",this.status=p}Jn=function p(){Xo||is(),Xo||(Jn=p)};function is(p){if(Mr>0||($e(),gt(),Mr>0))return;function y(){Xo||(Xo=!0,n.calledRun=!0,!fe&&(mt(),Et(),o(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),he(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),zt()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),y()},1)):y(),tt()}if(n.run=is,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return is(),n.ready}}();r.exports=t})(fN);const h5=fN.exports,d5=""+new URL("icu-binding.a29db31a.wasm",import.meta.url).href;var _N=(r=>(r[r.U_USING_FALLBACK_WARNING=-128]="U_USING_FALLBACK_WARNING",r[r.U_ERROR_WARNING_START=-128]="U_ERROR_WARNING_START",r[r.U_USING_DEFAULT_WARNING=-127]="U_USING_DEFAULT_WARNING",r[r.U_SAFECLONE_ALLOCATED_WARNING=-126]="U_SAFECLONE_ALLOCATED_WARNING",r[r.U_STATE_OLD_WARNING=-125]="U_STATE_OLD_WARNING",r[r.U_STRING_NOT_TERMINATED_WARNING=-124]="U_STRING_NOT_TERMINATED_WARNING",r[r.U_SORT_KEY_TOO_SHORT_WARNING=-123]="U_SORT_KEY_TOO_SHORT_WARNING",r[r.U_AMBIGUOUS_ALIAS_WARNING=-122]="U_AMBIGUOUS_ALIAS_WARNING",r[r.U_DIFFERENT_UCA_VERSION=-121]="U_DIFFERENT_UCA_VERSION",r[r.U_PLUGIN_CHANGED_LEVEL_WARNING=-120]="U_PLUGIN_CHANGED_LEVEL_WARNING",r[r.U_ZERO_ERROR=0]="U_ZERO_ERROR",r[r.U_ILLEGAL_ARGUMENT_ERROR=1]="U_ILLEGAL_ARGUMENT_ERROR",r[r.U_MISSING_RESOURCE_ERROR=2]="U_MISSING_RESOURCE_ERROR",r[r.U_INVALID_FORMAT_ERROR=3]="U_INVALID_FORMAT_ERROR",r[r.U_FILE_ACCESS_ERROR=4]="U_FILE_ACCESS_ERROR",r[r.U_INTERNAL_PROGRAM_ERROR=5]="U_INTERNAL_PROGRAM_ERROR",r[r.U_MESSAGE_PARSE_ERROR=6]="U_MESSAGE_PARSE_ERROR",r[r.U_MEMORY_ALLOCATION_ERROR=7]="U_MEMORY_ALLOCATION_ERROR",r[r.U_INDEX_OUTOFBOUNDS_ERROR=8]="U_INDEX_OUTOFBOUNDS_ERROR",r[r.U_PARSE_ERROR=9]="U_PARSE_ERROR",r[r.U_INVALID_CHAR_FOUND=10]="U_INVALID_CHAR_FOUND",r[r.U_TRUNCATED_CHAR_FOUND=11]="U_TRUNCATED_CHAR_FOUND",r[r.U_ILLEGAL_CHAR_FOUND=12]="U_ILLEGAL_CHAR_FOUND",r[r.U_INVALID_TABLE_FORMAT=13]="U_INVALID_TABLE_FORMAT",r[r.U_INVALID_TABLE_FILE=14]="U_INVALID_TABLE_FILE",r[r.U_BUFFER_OVERFLOW_ERROR=15]="U_BUFFER_OVERFLOW_ERROR",r[r.U_UNSUPPORTED_ERROR=16]="U_UNSUPPORTED_ERROR",r[r.U_RESOURCE_TYPE_MISMATCH=17]="U_RESOURCE_TYPE_MISMATCH",r[r.U_ILLEGAL_ESCAPE_SEQUENCE=18]="U_ILLEGAL_ESCAPE_SEQUENCE",r[r.U_UNSUPPORTED_ESCAPE_SEQUENCE=19]="U_UNSUPPORTED_ESCAPE_SEQUENCE",r[r.U_NO_SPACE_AVAILABLE=20]="U_NO_SPACE_AVAILABLE",r[r.U_CE_NOT_FOUND_ERROR=21]="U_CE_NOT_FOUND_ERROR",r[r.U_PRIMARY_TOO_LONG_ERROR=22]="U_PRIMARY_TOO_LONG_ERROR",r[r.U_STATE_TOO_OLD_ERROR=23]="U_STATE_TOO_OLD_ERROR",r[r.U_TOO_MANY_ALIASES_ERROR=24]="U_TOO_MANY_ALIASES_ERROR",r[r.U_ENUM_OUT_OF_SYNC_ERROR=25]="U_ENUM_OUT_OF_SYNC_ERROR",r[r.U_INVARIANT_CONVERSION_ERROR=26]="U_INVARIANT_CONVERSION_ERROR",r[r.U_INVALID_STATE_ERROR=27]="U_INVALID_STATE_ERROR",r[r.U_COLLATOR_VERSION_MISMATCH=28]="U_COLLATOR_VERSION_MISMATCH",r[r.U_USELESS_COLLATOR_ERROR=29]="U_USELESS_COLLATOR_ERROR",r[r.U_NO_WRITE_PERMISSION=30]="U_NO_WRITE_PERMISSION",r[r.U_INPUT_TOO_LONG_ERROR=31]="U_INPUT_TOO_LONG_ERROR",r[r.U_BAD_VARIABLE_DEFINITION=65536]="U_BAD_VARIABLE_DEFINITION",r[r.U_PARSE_ERROR_START=65536]="U_PARSE_ERROR_START",r[r.U_MALFORMED_RULE=65537]="U_MALFORMED_RULE",r[r.U_MALFORMED_SET=65538]="U_MALFORMED_SET",r[r.U_MALFORMED_SYMBOL_REFERENCE=65539]="U_MALFORMED_SYMBOL_REFERENCE",r[r.U_MALFORMED_UNICODE_ESCAPE=65540]="U_MALFORMED_UNICODE_ESCAPE",r[r.U_MALFORMED_VARIABLE_DEFINITION=65541]="U_MALFORMED_VARIABLE_DEFINITION",r[r.U_MALFORMED_VARIABLE_REFERENCE=65542]="U_MALFORMED_VARIABLE_REFERENCE",r[r.U_MISMATCHED_SEGMENT_DELIMITERS=65543]="U_MISMATCHED_SEGMENT_DELIMITERS",r[r.U_MISPLACED_ANCHOR_START=65544]="U_MISPLACED_ANCHOR_START",r[r.U_MISPLACED_CURSOR_OFFSET=65545]="U_MISPLACED_CURSOR_OFFSET",r[r.U_MISPLACED_QUANTIFIER=65546]="U_MISPLACED_QUANTIFIER",r[r.U_MISSING_OPERATOR=65547]="U_MISSING_OPERATOR",r[r.U_MISSING_SEGMENT_CLOSE=65548]="U_MISSING_SEGMENT_CLOSE",r[r.U_MULTIPLE_ANTE_CONTEXTS=65549]="U_MULTIPLE_ANTE_CONTEXTS",r[r.U_MULTIPLE_CURSORS=65550]="U_MULTIPLE_CURSORS",r[r.U_MULTIPLE_POST_CONTEXTS=65551]="U_MULTIPLE_POST_CONTEXTS",r[r.U_TRAILING_BACKSLASH=65552]="U_TRAILING_BACKSLASH",r[r.U_UNDEFINED_SEGMENT_REFERENCE=65553]="U_UNDEFINED_SEGMENT_REFERENCE",r[r.U_UNDEFINED_VARIABLE=65554]="U_UNDEFINED_VARIABLE",r[r.U_UNQUOTED_SPECIAL=65555]="U_UNQUOTED_SPECIAL",r[r.U_UNTERMINATED_QUOTE=65556]="U_UNTERMINATED_QUOTE",r[r.U_RULE_MASK_ERROR=65557]="U_RULE_MASK_ERROR",r[r.U_MISPLACED_COMPOUND_FILTER=65558]="U_MISPLACED_COMPOUND_FILTER",r[r.U_MULTIPLE_COMPOUND_FILTERS=65559]="U_MULTIPLE_COMPOUND_FILTERS",r[r.U_INVALID_RBT_SYNTAX=65560]="U_INVALID_RBT_SYNTAX",r[r.U_INVALID_PROPERTY_PATTERN=65561]="U_INVALID_PROPERTY_PATTERN",r[r.U_MALFORMED_PRAGMA=65562]="U_MALFORMED_PRAGMA",r[r.U_UNCLOSED_SEGMENT=65563]="U_UNCLOSED_SEGMENT",r[r.U_ILLEGAL_CHAR_IN_SEGMENT=65564]="U_ILLEGAL_CHAR_IN_SEGMENT",r[r.U_VARIABLE_RANGE_EXHAUSTED=65565]="U_VARIABLE_RANGE_EXHAUSTED",r[r.U_VARIABLE_RANGE_OVERLAP=65566]="U_VARIABLE_RANGE_OVERLAP",r[r.U_ILLEGAL_CHARACTER=65567]="U_ILLEGAL_CHARACTER",r[r.U_INTERNAL_TRANSLITERATOR_ERROR=65568]="U_INTERNAL_TRANSLITERATOR_ERROR",r[r.U_INVALID_ID=65569]="U_INVALID_ID",r[r.U_INVALID_FUNCTION=65570]="U_INVALID_FUNCTION",r[r.U_UNEXPECTED_TOKEN=65792]="U_UNEXPECTED_TOKEN",r[r.U_FMT_PARSE_ERROR_START=65792]="U_FMT_PARSE_ERROR_START",r[r.U_MULTIPLE_DECIMAL_SEPARATORS=65793]="U_MULTIPLE_DECIMAL_SEPARATORS",r[r.U_MULTIPLE_DECIMAL_SEPERATORS=65793]="U_MULTIPLE_DECIMAL_SEPERATORS",r[r.U_MULTIPLE_EXPONENTIAL_SYMBOLS=65794]="U_MULTIPLE_EXPONENTIAL_SYMBOLS",r[r.U_MALFORMED_EXPONENTIAL_PATTERN=65795]="U_MALFORMED_EXPONENTIAL_PATTERN",r[r.U_MULTIPLE_PERCENT_SYMBOLS=65796]="U_MULTIPLE_PERCENT_SYMBOLS",r[r.U_MULTIPLE_PERMILL_SYMBOLS=65797]="U_MULTIPLE_PERMILL_SYMBOLS",r[r.U_MULTIPLE_PAD_SPECIFIERS=65798]="U_MULTIPLE_PAD_SPECIFIERS",r[r.U_PATTERN_SYNTAX_ERROR=65799]="U_PATTERN_SYNTAX_ERROR",r[r.U_ILLEGAL_PAD_POSITION=65800]="U_ILLEGAL_PAD_POSITION",r[r.U_UNMATCHED_BRACES=65801]="U_UNMATCHED_BRACES",r[r.U_UNSUPPORTED_PROPERTY=65802]="U_UNSUPPORTED_PROPERTY",r[r.U_UNSUPPORTED_ATTRIBUTE=65803]="U_UNSUPPORTED_ATTRIBUTE",r[r.U_ARGUMENT_TYPE_MISMATCH=65804]="U_ARGUMENT_TYPE_MISMATCH",r[r.U_DUPLICATE_KEYWORD=65805]="U_DUPLICATE_KEYWORD",r[r.U_UNDEFINED_KEYWORD=65806]="U_UNDEFINED_KEYWORD",r[r.U_DEFAULT_KEYWORD_MISSING=65807]="U_DEFAULT_KEYWORD_MISSING",r[r.U_DECIMAL_NUMBER_SYNTAX_ERROR=65808]="U_DECIMAL_NUMBER_SYNTAX_ERROR",r[r.U_FORMAT_INEXACT_ERROR=65809]="U_FORMAT_INEXACT_ERROR",r[r.U_NUMBER_ARG_OUTOFBOUNDS_ERROR=65810]="U_NUMBER_ARG_OUTOFBOUNDS_ERROR",r[r.U_NUMBER_SKELETON_SYNTAX_ERROR=65811]="U_NUMBER_SKELETON_SYNTAX_ERROR",r[r.U_BRK_INTERNAL_ERROR=66048]="U_BRK_INTERNAL_ERROR",r[r.U_BRK_ERROR_START=66048]="U_BRK_ERROR_START",r[r.U_BRK_HEX_DIGITS_EXPECTED=66049]="U_BRK_HEX_DIGITS_EXPECTED",r[r.U_BRK_SEMICOLON_EXPECTED=66050]="U_BRK_SEMICOLON_EXPECTED",r[r.U_BRK_RULE_SYNTAX=66051]="U_BRK_RULE_SYNTAX",r[r.U_BRK_UNCLOSED_SET=66052]="U_BRK_UNCLOSED_SET",r[r.U_BRK_ASSIGN_ERROR=66053]="U_BRK_ASSIGN_ERROR",r[r.U_BRK_VARIABLE_REDFINITION=66054]="U_BRK_VARIABLE_REDFINITION",r[r.U_BRK_MISMATCHED_PAREN=66055]="U_BRK_MISMATCHED_PAREN",r[r.U_BRK_NEW_LINE_IN_QUOTED_STRING=66056]="U_BRK_NEW_LINE_IN_QUOTED_STRING",r[r.U_BRK_UNDEFINED_VARIABLE=66057]="U_BRK_UNDEFINED_VARIABLE",r[r.U_BRK_INIT_ERROR=66058]="U_BRK_INIT_ERROR",r[r.U_BRK_RULE_EMPTY_SET=66059]="U_BRK_RULE_EMPTY_SET",r[r.U_BRK_UNRECOGNIZED_OPTION=66060]="U_BRK_UNRECOGNIZED_OPTION",r[r.U_BRK_MALFORMED_RULE_TAG=66061]="U_BRK_MALFORMED_RULE_TAG",r[r.U_REGEX_INTERNAL_ERROR=66304]="U_REGEX_INTERNAL_ERROR",r[r.U_REGEX_ERROR_START=66304]="U_REGEX_ERROR_START",r[r.U_REGEX_RULE_SYNTAX=66305]="U_REGEX_RULE_SYNTAX",r[r.U_REGEX_INVALID_STATE=66306]="U_REGEX_INVALID_STATE",r[r.U_REGEX_BAD_ESCAPE_SEQUENCE=66307]="U_REGEX_BAD_ESCAPE_SEQUENCE",r[r.U_REGEX_PROPERTY_SYNTAX=66308]="U_REGEX_PROPERTY_SYNTAX",r[r.U_REGEX_UNIMPLEMENTED=66309]="U_REGEX_UNIMPLEMENTED",r[r.U_REGEX_MISMATCHED_PAREN=66310]="U_REGEX_MISMATCHED_PAREN",r[r.U_REGEX_NUMBER_TOO_BIG=66311]="U_REGEX_NUMBER_TOO_BIG",r[r.U_REGEX_BAD_INTERVAL=66312]="U_REGEX_BAD_INTERVAL",r[r.U_REGEX_MAX_LT_MIN=66313]="U_REGEX_MAX_LT_MIN",r[r.U_REGEX_INVALID_BACK_REF=66314]="U_REGEX_INVALID_BACK_REF",r[r.U_REGEX_INVALID_FLAG=66315]="U_REGEX_INVALID_FLAG",r[r.U_REGEX_LOOK_BEHIND_LIMIT=66316]="U_REGEX_LOOK_BEHIND_LIMIT",r[r.U_REGEX_SET_CONTAINS_STRING=66317]="U_REGEX_SET_CONTAINS_STRING",r[r.U_REGEX_MISSING_CLOSE_BRACKET=66319]="U_REGEX_MISSING_CLOSE_BRACKET",r[r.U_REGEX_INVALID_RANGE=66320]="U_REGEX_INVALID_RANGE",r[r.U_REGEX_STACK_OVERFLOW=66321]="U_REGEX_STACK_OVERFLOW",r[r.U_REGEX_TIME_OUT=66322]="U_REGEX_TIME_OUT",r[r.U_REGEX_STOPPED_BY_CALLER=66323]="U_REGEX_STOPPED_BY_CALLER",r[r.U_REGEX_PATTERN_TOO_BIG=66324]="U_REGEX_PATTERN_TOO_BIG",r[r.U_REGEX_INVALID_CAPTURE_GROUP_NAME=66325]="U_REGEX_INVALID_CAPTURE_GROUP_NAME",r[r.U_IDNA_PROHIBITED_ERROR=66560]="U_IDNA_PROHIBITED_ERROR",r[r.U_IDNA_ERROR_START=66560]="U_IDNA_ERROR_START",r[r.U_IDNA_UNASSIGNED_ERROR=66561]="U_IDNA_UNASSIGNED_ERROR",r[r.U_IDNA_CHECK_BIDI_ERROR=66562]="U_IDNA_CHECK_BIDI_ERROR",r[r.U_IDNA_STD3_ASCII_RULES_ERROR=66563]="U_IDNA_STD3_ASCII_RULES_ERROR",r[r.U_IDNA_ACE_PREFIX_ERROR=66564]="U_IDNA_ACE_PREFIX_ERROR",r[r.U_IDNA_VERIFICATION_ERROR=66565]="U_IDNA_VERIFICATION_ERROR",r[r.U_IDNA_LABEL_TOO_LONG_ERROR=66566]="U_IDNA_LABEL_TOO_LONG_ERROR",r[r.U_IDNA_ZERO_LENGTH_LABEL_ERROR=66567]="U_IDNA_ZERO_LENGTH_LABEL_ERROR",r[r.U_IDNA_DOMAIN_NAME_TOO_LONG_ERROR=66568]="U_IDNA_DOMAIN_NAME_TOO_LONG_ERROR",r[r.U_STRINGPREP_PROHIBITED_ERROR=66560]="U_STRINGPREP_PROHIBITED_ERROR",r[r.U_STRINGPREP_UNASSIGNED_ERROR=66561]="U_STRINGPREP_UNASSIGNED_ERROR",r[r.U_STRINGPREP_CHECK_BIDI_ERROR=66562]="U_STRINGPREP_CHECK_BIDI_ERROR",r[r.U_PLUGIN_ERROR_START=66816]="U_PLUGIN_ERROR_START",r[r.U_PLUGIN_TOO_HIGH=66816]="U_PLUGIN_TOO_HIGH",r[r.U_PLUGIN_DIDNT_SET_LEVEL=66817]="U_PLUGIN_DIDNT_SET_LEVEL",r))(_N||{});const NP=-1;let pN,qS,iy,eb,gN,mN,xN,yN,vN,u1,QS,JS,ZS;async function f5(){let e=await(await h5({async instantiateWasm(t,i){const s=await WebAssembly.instantiateStreaming(fetch(d5,{credentials:"same-origin"}),t);return i(s.instance)}})).ready;return pN=e.Locale,qS=e.BreakIterator,iy=e.UnicodeString,eb=e.StringPiece,e.init_icu,gN=e.ubidi_openSized,mN=e.ubidi_close,xN=e.ubidi_setPara,yN=e.ubidi_countRuns,vN=e.ubidi_getLogicalRun,u1=(t,i=!1)=>{const s=e.intArrayFromString(t,i),n=e.allocateUTF8(t);return{object:{ptr:n,view:s},dispose(){e._free(n)}}},QS=e._free,JS=e._malloc,ZS=e.getValue,e}function _5(r){return r>_N.U_ZERO_ERROR}var EN={exports:{}};(function(r,e){var t=function(){var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(s){s=s||{};var n;n||(n=typeof s<"u"?s:{});var o,a;n.ready=new Promise(function(h,m){o=h,a=m}),function(h){h.Ud=h.Ud||[],h.Ud.push(function(){h.MakeSWCanvasSurface=function(m){var v=m;if(v.tagName!=="CANVAS"&&(v=document.getElementById(m),!v))throw"Canvas with id "+m+" was not found";return(m=h.MakeSurface(v.width,v.height))&&(m.Ld=v),m},h.MakeCanvasSurface||(h.MakeCanvasSurface=h.MakeSWCanvasSurface),h.MakeSurface=function(m,v){var k={width:m,height:v,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB},L=m*v*4,X=h._malloc(L);return(k=h.Surface._makeRasterDirect(k,X,4*m))&&(k.Ld=null,k.zf=m,k.wf=v,k.yf=L,k.$e=X,k.getCanvas().clear(h.TRANSPARENT)),k},h.MakeRasterDirectSurface=function(m,v,k){return h.Surface._makeRasterDirect(m,v.byteOffset,k)},h.Surface.prototype.flush=function(m){if(h.Nd(this.Md),this._flush(),this.Ld){var v=new Uint8ClampedArray(h.HEAPU8.buffer,this.$e,this.yf);v=new ImageData(v,this.zf,this.wf),m?this.Ld.getContext("2d").putImageData(v,0,0,m[0],m[1],m[2]-m[0],m[3]-m[1]):this.Ld.getContext("2d").putImageData(v,0,0)}},h.Surface.prototype.dispose=function(){this.$e&&h._free(this.$e),this.delete()},h.Nd=h.Nd||function(){}})}(n),function(h){h.Ud=h.Ud||[],h.Ud.push(function(){function m(v,k,L){return v&&v.hasOwnProperty(k)?v[k]:L}h.GetWebGLContext=function(v,k){if(!v)throw"null canvas passed into makeWebGLContext";var L={alpha:m(k,"alpha",1),depth:m(k,"depth",1),stencil:m(k,"stencil",8),antialias:m(k,"antialias",0),premultipliedAlpha:m(k,"premultipliedAlpha",1),preserveDrawingBuffer:m(k,"preserveDrawingBuffer",0),preferLowPowerToHighPerformance:m(k,"preferLowPowerToHighPerformance",0),failIfMajorPerformanceCaveat:m(k,"failIfMajorPerformanceCaveat",0),enableExtensionsByDefault:m(k,"enableExtensionsByDefault",1),explicitSwapControl:m(k,"explicitSwapControl",0),renderViaOffscreenBackBuffer:m(k,"renderViaOffscreenBackBuffer",0)};if(L.majorVersion=k&&k.majorVersion?k.majorVersion:typeof WebGL2RenderingContext<"u"?2:1,L.explicitSwapControl)throw"explicitSwapControl is not supported";return v=zv(v,L),v?(Yf(v),v):0},h.deleteContext=function(v){nr===hn[v]&&(nr=null),typeof JSEvents=="object"&&JSEvents.Eg(hn[v].le.canvas),hn[v]&&hn[v].le.canvas&&(hn[v].le.canvas.uf=void 0),hn[v]=null},h._setTextureCleanup({deleteTexture:function(v,k){var L=es[k];L&&hn[v].le.deleteTexture(L),es[k]=null}}),h.MakeGrContext=function(v){if(!this.Nd(v))return null;var k=this._MakeGrContext();return k?(k.Md=v,k):null},h.MakeOnScreenGLSurface=function(v,k,L,X){return k=this._MakeOnScreenGLSurface(v,k,L,X),k?(k.Md=v.Md,k):null},h.MakeRenderTarget=function(v,k,L){return k=this._MakeRenderTargetWH(v,k,L),k?(k.Md=v.Md,k):null},h.MakeRenderTarget=function(v,k){return k=this._MakeRenderTargetII(v,k),k?(k.Md=v.Md,k):null},h.MakeWebGLCanvasSurface=function(v,k,L){k=k||null;var X=v,ve=typeof OffscreenCanvas<"u"&&X instanceof OffscreenCanvas;if(!(typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||ve||(X=document.getElementById(v),X)))throw"Canvas with id "+v+" was not found";if(v=this.GetWebGLContext(X,L),!v||0>v)throw"failed to create webgl context: err "+v;return v=this.MakeGrContext(v),k=this.MakeOnScreenGLSurface(v,X.width,X.height,k),k||(k=X.cloneNode(!0),X.parentNode.replaceChild(k,X),k.classList.add("ck-replaced"),h.MakeSWCanvasSurface(k))},h.MakeCanvasSurface=h.MakeWebGLCanvasSurface,h.Surface.prototype.makeImageFromTexture=function(v,k){k.colorSpace||(k.colorSpace=h.ColorSpace.SRGB);var L=es.length;return L||(es.push(null),L=1),es.push(v),this._makeImageFromTexture(nr.Rf,L,k)},h.Surface.prototype.makeImageFromTextureSource=function(v,k,L){L=L||v.naturalHeight||v.videoHeight||v.height,k=k||v.naturalWidth||v.videoWidth||v.width,h.Nd(this.Md);var X=nr.le,ve=X.createTexture();return X.bindTexture(X.TEXTURE_2D,ve),nr.version===2?X.texImage2D(X.TEXTURE_2D,0,X.RGBA,k,L,0,X.RGBA,X.UNSIGNED_BYTE,v):X.texImage2D(X.TEXTURE_2D,0,X.RGBA,X.RGBA,X.UNSIGNED_BYTE,v),X.bindTexture(X.TEXTURE_2D,null),this.makeImageFromTexture(ve,{height:L,width:k,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB})},h.Nd=function(v){return v?Yf(v):!1}})}(n),function(h){function m(A,S,M,Y,ge){for(var Ce=0;Ce<A.length;Ce++)S[Ce*M+(Ce*ge+Y+M)%M]=A[Ce];return S}function v(A){for(var S=A*A,M=Array(S);S--;)M[S]=S%(A+1)===0?1:0;return M}function k(A){return A?A.constructor===Float32Array&&A.length===4:!1}function L(A){return(be(255*A[3])<<24|be(255*A[0])<<16|be(255*A[1])<<8|be(255*A[2])<<0)>>>0}function X(A){if(A&&A._ck)return A;if(A instanceof Float32Array){for(var S=Math.floor(A.length/4),M=new Uint32Array(S),Y=0;Y<S;Y++)M[Y]=L(A.slice(4*Y,4*(Y+1)));return M}if(A instanceof Uint32Array)return A;if(A instanceof Array&&A[0]instanceof Float32Array)return A.map(L)}function ve(A){if(A===void 0)return 1;var S=parseFloat(A);return A&&A.indexOf("%")!==-1?S/100:S}function be(A){return Math.round(Math.max(0,Math.min(A||0,255)))}function Fe(A,S){S&&S._ck||h._free(A)}function Ne(A,S,M){if(!A||!A.length)return pt;if(A&&A._ck)return A.byteOffset;var Y=h[S].BYTES_PER_ELEMENT;return M||(M=h._malloc(A.length*Y)),h[S].set(A,M/Y),M}function ct(A){var S={be:pt,count:A.length,Je:h.ColorType.RGBA_F32};if(A instanceof Float32Array)S.be=Ne(A,"HEAPF32"),S.count=A.length/4;else if(A instanceof Uint32Array)S.be=Ne(A,"HEAPU32"),S.Je=h.ColorType.RGBA_8888;else if(A instanceof Array){if(A&&A.length){for(var M=h._malloc(16*A.length),Y=0,ge=M/4,Ce=0;Ce<A.length;Ce++)for(var Je=0;4>Je;Je++)h.HEAPF32[ge+Y]=A[Ce][Je],Y++;A=M}else A=pt;S.be=A}else throw"Invalid argument to copyFlexibleColorArray, Not a color array "+typeof A;return S}function kt(A){if(!A)return pt;if(A.length){if(A.length===6||A.length===9)return Ne(A,"HEAPF32",Fi),A.length===6&&h.HEAPF32.set(At,6+Fi/4),Fi;if(A.length===16){var S=$h.toTypedArray();return S[0]=A[0],S[1]=A[1],S[2]=A[3],S[3]=A[4],S[4]=A[5],S[5]=A[7],S[6]=A[12],S[7]=A[13],S[8]=A[15],Fi}throw"invalid matrix size"}return S=$h.toTypedArray(),S[0]=A.m11,S[1]=A.m21,S[2]=A.m41,S[3]=A.m12,S[4]=A.m22,S[5]=A.m42,S[6]=A.m14,S[7]=A.m24,S[8]=A.m44,Fi}function Nt(A){if(!A)return pt;var S=e_.toTypedArray();if(A.length){if(A.length!==16&&A.length!==6&&A.length!==9)throw"invalid matrix size";return A.length===16?Ne(A,"HEAPF32",Ko):(S.fill(0),S[0]=A[0],S[1]=A[1],S[3]=A[2],S[4]=A[3],S[5]=A[4],S[7]=A[5],S[12]=A[6],S[13]=A[7],S[15]=A[8],A.length===6&&(S[12]=0,S[13]=0,S[15]=1),Ko)}return S[0]=A.m11,S[1]=A.m21,S[2]=A.m31,S[3]=A.m41,S[4]=A.m12,S[5]=A.m22,S[6]=A.m32,S[7]=A.m42,S[8]=A.m13,S[9]=A.m23,S[10]=A.m33,S[11]=A.m43,S[12]=A.m14,S[13]=A.m24,S[14]=A.m34,S[15]=A.m44,Ko}function Ge(A){for(var S=Array(16),M=0;16>M;M++)S[M]=h.HEAPF32[A/4+M];return S}function Tt(A,S){return Ne(A,"HEAPF32",S||Xo)}function sr(A,S,M,Y){var ge=t_.toTypedArray();return ge[0]=A,ge[1]=S,ge[2]=M,ge[3]=Y,Xo}function Or(A){for(var S=new Float32Array(4),M=0;4>M;M++)S[M]=h.HEAPF32[A/4+M];return S}function _r(A,S){return Ne(A,"HEAPF32",S||p)}function Ii(A,S){return Ne(A,"HEAPF32",S||ht)}function Ju(){for(var A=0,S=0;S<arguments.length-1;S+=2)A+=arguments[S]*arguments[S+1];return A}function $o(A,S,M){for(var Y=Array(A.length),ge=0;ge<M;ge++)for(var Ce=0;Ce<M;Ce++){for(var Je=0,vt=0;vt<M;vt++)Je+=A[M*ge+vt]*S[M*vt+Ce];Y[ge*M+Ce]=Je}return Y}function Jg(A,S){for(var M=$o(S[0],S[1],A),Y=2;Y<S.length;)M=$o(M,S[Y],A),Y++;return M}h.Color=function(A,S,M,Y){return Y===void 0&&(Y=1),h.Color4f(be(A)/255,be(S)/255,be(M)/255,Y)},h.ColorAsInt=function(A,S,M,Y){return Y===void 0&&(Y=255),(be(Y)<<24|be(A)<<16|be(S)<<8|be(M)<<0&268435455)>>>0},h.Color4f=function(A,S,M,Y){return Y===void 0&&(Y=1),Float32Array.of(A,S,M,Y)},Object.defineProperty(h,"TRANSPARENT",{get:function(){return h.Color4f(0,0,0,0)}}),Object.defineProperty(h,"BLACK",{get:function(){return h.Color4f(0,0,0,1)}}),Object.defineProperty(h,"WHITE",{get:function(){return h.Color4f(1,1,1,1)}}),Object.defineProperty(h,"RED",{get:function(){return h.Color4f(1,0,0,1)}}),Object.defineProperty(h,"GREEN",{get:function(){return h.Color4f(0,1,0,1)}}),Object.defineProperty(h,"BLUE",{get:function(){return h.Color4f(0,0,1,1)}}),Object.defineProperty(h,"YELLOW",{get:function(){return h.Color4f(1,1,0,1)}}),Object.defineProperty(h,"CYAN",{get:function(){return h.Color4f(0,1,1,1)}}),Object.defineProperty(h,"MAGENTA",{get:function(){return h.Color4f(1,0,1,1)}}),h.getColorComponents=function(A){return[Math.floor(255*A[0]),Math.floor(255*A[1]),Math.floor(255*A[2]),A[3]]},h.parseColorString=function(A,S){if(A=A.toLowerCase(),A.startsWith("#")){switch(S=255,A.length){case 9:S=parseInt(A.slice(7,9),16);case 7:var M=parseInt(A.slice(1,3),16),Y=parseInt(A.slice(3,5),16),ge=parseInt(A.slice(5,7),16);break;case 5:S=17*parseInt(A.slice(4,5),16);case 4:M=17*parseInt(A.slice(1,2),16),Y=17*parseInt(A.slice(2,3),16),ge=17*parseInt(A.slice(3,4),16)}return h.Color(M,Y,ge,S/255)}return A.startsWith("rgba")?(A=A.slice(5,-1),A=A.split(","),h.Color(+A[0],+A[1],+A[2],ve(A[3]))):A.startsWith("rgb")?(A=A.slice(4,-1),A=A.split(","),h.Color(+A[0],+A[1],+A[2],ve(A[3]))):A.startsWith("gray(")||A.startsWith("hsl")||!S||(A=S[A],A===void 0)?h.BLACK:A},h.multiplyByAlpha=function(A,S){return A=A.slice(),A[3]=Math.max(0,Math.min(A[3]*S,1)),A},h.Malloc=function(A,S){var M=h._malloc(S*A.BYTES_PER_ELEMENT);return{_ck:!0,length:S,byteOffset:M,ne:null,subarray:function(Y,ge){return Y=this.toTypedArray().subarray(Y,ge),Y._ck=!0,Y},toTypedArray:function(){return this.ne&&this.ne.length?this.ne:(this.ne=new A(h.HEAPU8.buffer,M,S),this.ne._ck=!0,this.ne)}}},h.Free=function(A){h._free(A.byteOffset),A.byteOffset=pt,A.toTypedArray=null,A.ne=null};var Fi=pt,$h,Ko=pt,e_,Xo=pt,t_,is,p=pt,y,w=pt,G,K=pt,ie,pe=pt,xe,De=pt,Ye,ht=pt,xt,yt=pt,At=Float32Array.of(0,0,1),pt=0;h.onRuntimeInitialized=function(){function A(S,M,Y,ge,Ce,Je){Je||(Je=4*ge.width,ge.colorType===h.ColorType.RGBA_F16?Je*=2:ge.colorType===h.ColorType.RGBA_F32&&(Je*=4));var vt=Je*ge.height,Ct=Ce?Ce.byteOffset:h._malloc(vt);if(!S._readPixels(ge,Ct,Je,M,Y))return Ce||h._free(Ct),null;if(Ce)return Ce.toTypedArray();switch(ge.colorType){case h.ColorType.RGBA_8888:case h.ColorType.RGBA_F16:S=new Uint8Array(h.HEAPU8.buffer,Ct,vt).slice();break;case h.ColorType.RGBA_F32:S=new Float32Array(h.HEAPU8.buffer,Ct,vt).slice();break;default:return null}return h._free(Ct),S}t_=h.Malloc(Float32Array,4),Xo=t_.byteOffset,e_=h.Malloc(Float32Array,16),Ko=e_.byteOffset,$h=h.Malloc(Float32Array,9),Fi=$h.byteOffset,Ye=h.Malloc(Float32Array,12),ht=Ye.byteOffset,xt=h.Malloc(Float32Array,12),yt=xt.byteOffset,is=h.Malloc(Float32Array,4),p=is.byteOffset,y=h.Malloc(Float32Array,4),w=y.byteOffset,G=h.Malloc(Float32Array,3),K=G.byteOffset,ie=h.Malloc(Float32Array,3),pe=ie.byteOffset,xe=h.Malloc(Int32Array,4),De=xe.byteOffset,h.ColorSpace.SRGB=h.ColorSpace._MakeSRGB(),h.ColorSpace.DISPLAY_P3=h.ColorSpace._MakeDisplayP3(),h.ColorSpace.ADOBE_RGB=h.ColorSpace._MakeAdobeRGB(),h.GlyphRunFlags={IsWhiteSpace:h._GlyphRunFlags_isWhiteSpace},h.Path.MakeFromCmds=function(S){var M=Ne(S,"HEAPF32"),Y=h.Path._MakeFromCmds(M,S.length);return Fe(M,S),Y},h.Path.MakeFromVerbsPointsWeights=function(S,M,Y){var ge=Ne(S,"HEAPU8"),Ce=Ne(M,"HEAPF32"),Je=Ne(Y,"HEAPF32"),vt=h.Path._MakeFromVerbsPointsWeights(ge,S.length,Ce,M.length,Je,Y&&Y.length||0);return Fe(ge,S),Fe(Ce,M),Fe(Je,Y),vt},h.Path.prototype.addArc=function(S,M,Y){return S=_r(S),this._addArc(S,M,Y),this},h.Path.prototype.addOval=function(S,M,Y){return Y===void 0&&(Y=1),S=_r(S),this._addOval(S,!!M,Y),this},h.Path.prototype.addPath=function(){var S=Array.prototype.slice.call(arguments),M=S[0],Y=!1;if(typeof S[S.length-1]=="boolean"&&(Y=S.pop()),S.length===1)this._addPath(M,1,0,0,0,1,0,0,0,1,Y);else if(S.length===2)S=S[1],this._addPath(M,S[0],S[1],S[2],S[3],S[4],S[5],S[6]||0,S[7]||0,S[8]||1,Y);else if(S.length===7||S.length===10)this._addPath(M,S[1],S[2],S[3],S[4],S[5],S[6],S[7]||0,S[8]||0,S[9]||1,Y);else return null;return this},h.Path.prototype.addPoly=function(S,M){var Y=Ne(S,"HEAPF32");return this._addPoly(Y,S.length/2,M),Fe(Y,S),this},h.Path.prototype.addRect=function(S,M){return S=_r(S),this._addRect(S,!!M),this},h.Path.prototype.addRRect=function(S,M){return S=Ii(S),this._addRRect(S,!!M),this},h.Path.prototype.addVerbsPointsWeights=function(S,M,Y){var ge=Ne(S,"HEAPU8"),Ce=Ne(M,"HEAPF32"),Je=Ne(Y,"HEAPF32");this._addVerbsPointsWeights(ge,S.length,Ce,M.length,Je,Y&&Y.length||0),Fe(ge,S),Fe(Ce,M),Fe(Je,Y)},h.Path.prototype.arc=function(S,M,Y,ge,Ce,Je){return S=h.LTRBRect(S-Y,M-Y,S+Y,M+Y),Ce=(Ce-ge)/Math.PI*180-360*!!Je,Je=new h.Path,Je.addArc(S,ge/Math.PI*180,Ce),this.addPath(Je,!0),Je.delete(),this},h.Path.prototype.arcToOval=function(S,M,Y,ge){return S=_r(S),this._arcToOval(S,M,Y,ge),this},h.Path.prototype.arcToRotated=function(S,M,Y,ge,Ce,Je,vt){return this._arcToRotated(S,M,Y,!!ge,!!Ce,Je,vt),this},h.Path.prototype.arcToTangent=function(S,M,Y,ge,Ce){return this._arcToTangent(S,M,Y,ge,Ce),this},h.Path.prototype.close=function(){return this._close(),this},h.Path.prototype.conicTo=function(S,M,Y,ge,Ce){return this._conicTo(S,M,Y,ge,Ce),this},h.Path.prototype.computeTightBounds=function(S){this._computeTightBounds(p);var M=is.toTypedArray();return S?(S.set(M),S):M.slice()},h.Path.prototype.cubicTo=function(S,M,Y,ge,Ce,Je){return this._cubicTo(S,M,Y,ge,Ce,Je),this},h.Path.prototype.dash=function(S,M,Y){return this._dash(S,M,Y)?this:null},h.Path.prototype.getBounds=function(S){this._getBounds(p);var M=is.toTypedArray();return S?(S.set(M),S):M.slice()},h.Path.prototype.lineTo=function(S,M){return this._lineTo(S,M),this},h.Path.prototype.moveTo=function(S,M){return this._moveTo(S,M),this},h.Path.prototype.offset=function(S,M){return this._transform(1,0,S,0,1,M,0,0,1),this},h.Path.prototype.quadTo=function(S,M,Y,ge){return this._quadTo(S,M,Y,ge),this},h.Path.prototype.rArcTo=function(S,M,Y,ge,Ce,Je,vt){return this._rArcTo(S,M,Y,ge,Ce,Je,vt),this},h.Path.prototype.rConicTo=function(S,M,Y,ge,Ce){return this._rConicTo(S,M,Y,ge,Ce),this},h.Path.prototype.rCubicTo=function(S,M,Y,ge,Ce,Je){return this._rCubicTo(S,M,Y,ge,Ce,Je),this},h.Path.prototype.rLineTo=function(S,M){return this._rLineTo(S,M),this},h.Path.prototype.rMoveTo=function(S,M){return this._rMoveTo(S,M),this},h.Path.prototype.rQuadTo=function(S,M,Y,ge){return this._rQuadTo(S,M,Y,ge),this},h.Path.prototype.stroke=function(S){return S=S||{},S.width=S.width||1,S.miter_limit=S.miter_limit||4,S.cap=S.cap||h.StrokeCap.Butt,S.join=S.join||h.StrokeJoin.Miter,S.precision=S.precision||1,this._stroke(S)?this:null},h.Path.prototype.transform=function(){if(arguments.length===1){var S=arguments[0];this._transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6]||0,S[7]||0,S[8]||1)}else if(arguments.length===6||arguments.length===9)S=arguments,this._transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6]||0,S[7]||0,S[8]||1);else throw"transform expected to take 1 or 9 arguments. Got "+arguments.length;return this},h.Path.prototype.trim=function(S,M,Y){return this._trim(S,M,!!Y)?this:null},h.Image.prototype.makeShaderCubic=function(S,M,Y,ge,Ce){return Ce=kt(Ce),this._makeShaderCubic(S,M,Y,ge,Ce)},h.Image.prototype.makeShaderOptions=function(S,M,Y,ge,Ce){return Ce=kt(Ce),this._makeShaderOptions(S,M,Y,ge,Ce)},h.Image.prototype.readPixels=function(S,M,Y,ge,Ce){return A(this,S,M,Y,ge,Ce)},h.Canvas.prototype.clear=function(S){h.Nd(this.Md),S=Tt(S),this._clear(S)},h.Canvas.prototype.clipRRect=function(S,M,Y){h.Nd(this.Md),S=Ii(S),this._clipRRect(S,M,Y)},h.Canvas.prototype.clipRect=function(S,M,Y){h.Nd(this.Md),S=_r(S),this._clipRect(S,M,Y)},h.Canvas.prototype.concat=function(S){h.Nd(this.Md),S=Nt(S),this._concat(S)},h.Canvas.prototype.drawArc=function(S,M,Y,ge,Ce){h.Nd(this.Md),S=_r(S),this._drawArc(S,M,Y,ge,Ce)},h.Canvas.prototype.drawAtlas=function(S,M,Y,ge,Ce,Je,vt){if(S&&ge&&M&&Y&&M.length===Y.length){h.Nd(this.Md),Ce||(Ce=h.BlendMode.SrcOver);var Ct=Ne(M,"HEAPF32"),Gt=Ne(Y,"HEAPF32"),ur=Y.length/4,Ae=Ne(X(Je),"HEAPU32");if(vt&&"B"in vt&&"C"in vt)this._drawAtlasCubic(S,Gt,Ct,Ae,ur,Ce,vt.B,vt.C,ge);else{let ft=h.FilterMode.Linear,Vt=h.MipmapMode.None;vt&&(ft=vt.filter,"mipmap"in vt&&(Vt=vt.mipmap)),this._drawAtlasOptions(S,Gt,Ct,Ae,ur,Ce,ft,Vt,ge)}Fe(Ct,M),Fe(Gt,Y),Fe(Ae,Je)}},h.Canvas.prototype.drawCircle=function(S,M,Y,ge){h.Nd(this.Md),this._drawCircle(S,M,Y,ge)},h.Canvas.prototype.drawColor=function(S,M){h.Nd(this.Md),S=Tt(S),M!==void 0?this._drawColor(S,M):this._drawColor(S)},h.Canvas.prototype.drawColorInt=function(S,M){h.Nd(this.Md),this._drawColorInt(S,M||h.BlendMode.SrcOver)},h.Canvas.prototype.drawColorComponents=function(S,M,Y,ge,Ce){h.Nd(this.Md),S=sr(S,M,Y,ge),Ce!==void 0?this._drawColor(S,Ce):this._drawColor(S)},h.Canvas.prototype.drawDRRect=function(S,M,Y){h.Nd(this.Md),S=Ii(S,ht),M=Ii(M,yt),this._drawDRRect(S,M,Y)},h.Canvas.prototype.drawGlyphs=function(S,M,Y,ge,Ce,Je){if(!(2*S.length<=M.length))throw"Not enough positions for the array of gyphs";h.Nd(this.Md);const vt=Ne(S,"HEAPU16"),Ct=Ne(M,"HEAPF32");this._drawGlyphs(S.length,vt,Ct,Y,ge,Ce,Je),Fe(Ct,M),Fe(vt,S)},h.Canvas.prototype.drawImage=function(S,M,Y,ge){h.Nd(this.Md),this._drawImage(S,M,Y,ge||null)},h.Canvas.prototype.drawImageCubic=function(S,M,Y,ge,Ce,Je){h.Nd(this.Md),this._drawImageCubic(S,M,Y,ge,Ce,Je||null)},h.Canvas.prototype.drawImageOptions=function(S,M,Y,ge,Ce,Je){h.Nd(this.Md),this._drawImageOptions(S,M,Y,ge,Ce,Je||null)},h.Canvas.prototype.drawImageNine=function(S,M,Y,ge,Ce){h.Nd(this.Md),M=Ne(M,"HEAP32",De),Y=_r(Y),this._drawImageNine(S,M,Y,ge,Ce||null)},h.Canvas.prototype.drawImageRect=function(S,M,Y,ge,Ce){h.Nd(this.Md),_r(M,p),_r(Y,w),this._drawImageRect(S,p,w,ge,!!Ce)},h.Canvas.prototype.drawImageRectCubic=function(S,M,Y,ge,Ce,Je){h.Nd(this.Md),_r(M,p),_r(Y,w),this._drawImageRectCubic(S,p,w,ge,Ce,Je||null)},h.Canvas.prototype.drawImageRectOptions=function(S,M,Y,ge,Ce,Je){h.Nd(this.Md),_r(M,p),_r(Y,w),this._drawImageRectOptions(S,p,w,ge,Ce,Je||null)},h.Canvas.prototype.drawLine=function(S,M,Y,ge,Ce){h.Nd(this.Md),this._drawLine(S,M,Y,ge,Ce)},h.Canvas.prototype.drawOval=function(S,M){h.Nd(this.Md),S=_r(S),this._drawOval(S,M)},h.Canvas.prototype.drawPaint=function(S){h.Nd(this.Md),this._drawPaint(S)},h.Canvas.prototype.drawParagraph=function(S,M,Y){h.Nd(this.Md),this._drawParagraph(S,M,Y)},h.Canvas.prototype.drawPatch=function(S,M,Y,ge,Ce){if(24>S.length)throw"Need 12 cubic points";if(M&&4>M.length)throw"Need 4 colors";if(Y&&8>Y.length)throw"Need 4 shader coordinates";h.Nd(this.Md);const Je=Ne(S,"HEAPF32"),vt=M?Ne(X(M),"HEAPU32"):pt,Ct=Y?Ne(Y,"HEAPF32"):pt;ge||(ge=h.BlendMode.Modulate),this._drawPatch(Je,vt,Ct,ge,Ce),Fe(Ct,Y),Fe(vt,M),Fe(Je,S)},h.Canvas.prototype.drawPath=function(S,M){h.Nd(this.Md),this._drawPath(S,M)},h.Canvas.prototype.drawPicture=function(S){h.Nd(this.Md),this._drawPicture(S)},h.Canvas.prototype.drawPoints=function(S,M,Y){h.Nd(this.Md);var ge=Ne(M,"HEAPF32");this._drawPoints(S,ge,M.length/2,Y),Fe(ge,M)},h.Canvas.prototype.drawRRect=function(S,M){h.Nd(this.Md),S=Ii(S),this._drawRRect(S,M)},h.Canvas.prototype.drawRect=function(S,M){h.Nd(this.Md),S=_r(S),this._drawRect(S,M)},h.Canvas.prototype.drawRect4f=function(S,M,Y,ge,Ce){h.Nd(this.Md),this._drawRect4f(S,M,Y,ge,Ce)},h.Canvas.prototype.drawShadow=function(S,M,Y,ge,Ce,Je,vt){h.Nd(this.Md);var Ct=Ne(Ce,"HEAPF32"),Gt=Ne(Je,"HEAPF32");M=Ne(M,"HEAPF32",K),Y=Ne(Y,"HEAPF32",pe),this._drawShadow(S,M,Y,ge,Ct,Gt,vt),Fe(Ct,Ce),Fe(Gt,Je)},h.getShadowLocalBounds=function(S,M,Y,ge,Ce,Je,vt){return S=kt(S),Y=Ne(Y,"HEAPF32",K),ge=Ne(ge,"HEAPF32",pe),this._getShadowLocalBounds(S,M,Y,ge,Ce,Je,p)?(M=is.toTypedArray(),vt?(vt.set(M),vt):M.slice()):null},h.Canvas.prototype.drawTextBlob=function(S,M,Y,ge){h.Nd(this.Md),this._drawTextBlob(S,M,Y,ge)},h.Canvas.prototype.drawVertices=function(S,M,Y){h.Nd(this.Md),this._drawVertices(S,M,Y)},h.Canvas.prototype.getLocalToDevice=function(){return this._getLocalToDevice(Ko),Ge(Ko)},h.Canvas.prototype.findMarkedCTM=function(S){return this._findMarkedCTM(S,Ko)?Ge(Ko):null},h.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(Fi);for(var S=Array(9),M=0;9>M;M++)S[M]=h.HEAPF32[Fi/4+M];return S},h.Canvas.prototype.makeSurface=function(S){return S=this._makeSurface(S),S.Md=this.Md,S},h.Canvas.prototype.readPixels=function(S,M,Y,ge,Ce){return h.Nd(this.Md),A(this,S,M,Y,ge,Ce)},h.Canvas.prototype.saveLayer=function(S,M,Y,ge){return M=_r(M),this._saveLayer(S||null,M,Y||null,ge||0)},h.Canvas.prototype.writePixels=function(S,M,Y,ge,Ce,Je,vt,Ct){if(S.byteLength%(M*Y))throw"pixels length must be a multiple of the srcWidth * srcHeight";h.Nd(this.Md);var Gt=S.byteLength/(M*Y);Je=Je||h.AlphaType.Unpremul,vt=vt||h.ColorType.RGBA_8888,Ct=Ct||h.ColorSpace.SRGB;var ur=Gt*M;return Gt=Ne(S,"HEAPU8"),M=this._writePixels({width:M,height:Y,colorType:vt,alphaType:Je,colorSpace:Ct},Gt,ur,ge,Ce),Fe(Gt,S),M},h.ColorFilter.MakeBlend=function(S,M){return S=Tt(S),h.ColorFilter._MakeBlend(S,M)},h.ColorFilter.MakeMatrix=function(S){if(!S||S.length!==20)throw"invalid color matrix";var M=Ne(S,"HEAPF32"),Y=h.ColorFilter._makeMatrix(M);return Fe(M,S),Y},h.ContourMeasure.prototype.getPosTan=function(S,M){return this._getPosTan(S,p),S=is.toTypedArray(),M?(M.set(S),M):S.slice()},h.ImageFilter.MakeMatrixTransform=function(S,M,Y){if(S=kt(S),"B"in M&&"C"in M)return h.ImageFilter._MakeMatrixTransformCubic(S,M.xg,M.yg,Y);const ge=M.filter;let Ce=h.MipmapMode.None;return"mipmap"in M&&(Ce=M.mipmap),h.ImageFilter._MakeMatrixTransformOptions(S,ge,Ce,Y)},h.Paint.prototype.getColor=function(){return this._getColor(Xo),Or(Xo)},h.Paint.prototype.setColor=function(S,M){M=M||null,S=Tt(S),this._setColor(S,M)},h.Paint.prototype.setColorComponents=function(S,M,Y,ge,Ce){Ce=Ce||null,S=sr(S,M,Y,ge),this._setColor(S,Ce)},h.Path.prototype.getPoint=function(S,M){return this._getPoint(S,p),S=is.toTypedArray(),M?(M[0]=S[0],M[1]=S[1],M):S.slice(0,2)},h.PictureRecorder.prototype.beginRecording=function(S){return S=_r(S),this._beginRecording(S)},h.Surface.prototype.getCanvas=function(){var S=this._getCanvas();return S.Md=this.Md,S},h.Surface.prototype.makeImageSnapshot=function(S){return S=Ne(S,"HEAP32",De),this._makeImageSnapshot(S)},h.Surface.prototype.makeSurface=function(S){return S=this._makeSurface(S),S.Md=this.Md,S},h.Surface.prototype.requestAnimationFrame=function(S,M){this.Fe||(this.Fe=this.getCanvas()),requestAnimationFrame(function(){h.Nd(this.Md),S(this.Fe),this.flush(M)}.bind(this))},h.Surface.prototype.drawOnce=function(S,M){this.Fe||(this.Fe=this.getCanvas()),requestAnimationFrame(function(){h.Nd(this.Md),S(this.Fe),this.flush(M),this.dispose()}.bind(this))},h.PathEffect.MakeDash=function(S,M){if(M||(M=0),!S.length||S.length%2===1)throw"Intervals array must have even length";var Y=Ne(S,"HEAPF32");return M=h.PathEffect._MakeDash(Y,S.length,M),Fe(Y,S),M},h.Shader.MakeColor=function(S,M){return M=M||null,S=Tt(S),h.Shader._MakeColor(S,M)},h.Shader.Blend=h.Shader.MakeBlend,h.Shader.Color=h.Shader.MakeColor,h.Shader.MakeLinearGradient=function(S,M,Y,ge,Ce,Je,vt,Ct){Ct=Ct||null;var Gt=ct(Y),ur=Ne(ge,"HEAPF32");vt=vt||0,Je=kt(Je);var Ae=is.toTypedArray();return Ae.set(S),Ae.set(M,2),S=h.Shader._MakeLinearGradient(p,Gt.be,Gt.Je,ur,Gt.count,Ce,vt,Je,Ct),Fe(Gt.be,Y),ge&&Fe(ur,ge),S},h.Shader.MakeRadialGradient=function(S,M,Y,ge,Ce,Je,vt,Ct){Ct=Ct||null;var Gt=ct(Y),ur=Ne(ge,"HEAPF32");return vt=vt||0,Je=kt(Je),S=h.Shader._MakeRadialGradient(S[0],S[1],M,Gt.be,Gt.Je,ur,Gt.count,Ce,vt,Je,Ct),Fe(Gt.be,Y),ge&&Fe(ur,ge),S},h.Shader.MakeSweepGradient=function(S,M,Y,ge,Ce,Je,vt,Ct,Gt,ur){ur=ur||null;var Ae=ct(Y),ft=Ne(ge,"HEAPF32");return vt=vt||0,Ct=Ct||0,Gt=Gt||360,Je=kt(Je),S=h.Shader._MakeSweepGradient(S,M,Ae.be,Ae.Je,ft,Ae.count,Ce,Ct,Gt,vt,Je,ur),Fe(Ae.be,Y),ge&&Fe(ft,ge),S},h.Shader.MakeTwoPointConicalGradient=function(S,M,Y,ge,Ce,Je,vt,Ct,Gt,ur){ur=ur||null;var Ae=ct(Ce),ft=Ne(Je,"HEAPF32");Gt=Gt||0,Ct=kt(Ct);var Vt=is.toTypedArray();return Vt.set(S),Vt.set(Y,2),S=h.Shader._MakeTwoPointConicalGradient(p,M,ge,Ae.be,Ae.Je,ft,Ae.count,vt,Gt,Ct,ur),Fe(Ae.be,Ce),Je&&Fe(ft,Je),S},h.Vertices.prototype.bounds=function(S){this._bounds(p);var M=is.toTypedArray();return S?(S.set(M),S):M.slice()},h.Ud&&h.Ud.forEach(function(S){S()})},h.computeTonalColors=function(A){var S=Ne(A.ambient,"HEAPF32"),M=Ne(A.spot,"HEAPF32");this._computeTonalColors(S,M);var Y={ambient:Or(S),spot:Or(M)};return Fe(S,A.ambient),Fe(M,A.spot),Y},h.LTRBRect=function(A,S,M,Y){return Float32Array.of(A,S,M,Y)},h.XYWHRect=function(A,S,M,Y){return Float32Array.of(A,S,A+M,S+Y)},h.LTRBiRect=function(A,S,M,Y){return Int32Array.of(A,S,M,Y)},h.XYWHiRect=function(A,S,M,Y){return Int32Array.of(A,S,A+M,S+Y)},h.RRectXY=function(A,S,M){return Float32Array.of(A[0],A[1],A[2],A[3],S,M,S,M,S,M,S,M)},h.MakeAnimatedImageFromEncoded=function(A){A=new Uint8Array(A);var S=h._malloc(A.byteLength);return h.HEAPU8.set(A,S),(A=h._decodeAnimatedImage(S,A.byteLength))?A:null},h.MakeImageFromEncoded=function(A){A=new Uint8Array(A);var S=h._malloc(A.byteLength);return h.HEAPU8.set(A,S),(A=h._decodeImage(S,A.byteLength))?A:null};var hr=null;h.MakeImageFromCanvasImageSource=function(A){var S=A.width,M=A.height;hr||(hr=document.createElement("canvas")),hr.width=S,hr.height=M;var Y=hr.getContext("2d");return Y.drawImage(A,0,0),A=Y.getImageData(0,0,S,M),h.MakeImage({width:S,height:M,alphaType:h.AlphaType.Unpremul,colorType:h.ColorType.RGBA_8888,colorSpace:h.ColorSpace.SRGB},A.data,4*S)},h.MakeImage=function(A,S,M){var Y=h._malloc(S.length);return h.HEAPU8.set(S,Y),h._MakeImage(A,Y,S.length,M)},h.MakeVertices=function(A,S,M,Y,ge,Ce){var Je=ge&&ge.length||0,vt=0;return M&&M.length&&(vt|=1),Y&&Y.length&&(vt|=2),Ce===void 0||Ce||(vt|=4),A=new h._VerticesBuilder(A,S.length/2,Je,vt),Ne(S,"HEAPF32",A.positions()),A.texCoords()&&Ne(M,"HEAPF32",A.texCoords()),A.colors()&&Ne(X(Y),"HEAPU32",A.colors()),A.indices()&&Ne(ge,"HEAPU16",A.indices()),A.detach()},h.Matrix={},h.Matrix.identity=function(){return v(3)},h.Matrix.invert=function(A){var S=A[0]*A[4]*A[8]+A[1]*A[5]*A[6]+A[2]*A[3]*A[7]-A[2]*A[4]*A[6]-A[1]*A[3]*A[8]-A[0]*A[5]*A[7];return S?[(A[4]*A[8]-A[5]*A[7])/S,(A[2]*A[7]-A[1]*A[8])/S,(A[1]*A[5]-A[2]*A[4])/S,(A[5]*A[6]-A[3]*A[8])/S,(A[0]*A[8]-A[2]*A[6])/S,(A[2]*A[3]-A[0]*A[5])/S,(A[3]*A[7]-A[4]*A[6])/S,(A[1]*A[6]-A[0]*A[7])/S,(A[0]*A[4]-A[1]*A[3])/S]:null},h.Matrix.mapPoints=function(A,S){for(var M=0;M<S.length;M+=2){var Y=S[M],ge=S[M+1],Ce=A[6]*Y+A[7]*ge+A[8],Je=A[3]*Y+A[4]*ge+A[5];S[M]=(A[0]*Y+A[1]*ge+A[2])/Ce,S[M+1]=Je/Ce}return S},h.Matrix.multiply=function(){return Jg(3,arguments)},h.Matrix.rotated=function(A,S,M){S=S||0,M=M||0;var Y=Math.sin(A);return A=Math.cos(A),[A,-Y,Ju(Y,M,1-A,S),Y,A,Ju(-Y,S,1-A,M),0,0,1]},h.Matrix.scaled=function(A,S,M,Y){M=M||0,Y=Y||0;var ge=m([A,S],v(3),3,0,1);return m([M-A*M,Y-S*Y],ge,3,2,0)},h.Matrix.skewed=function(A,S,M,Y){M=M||0,Y=Y||0;var ge=m([A,S],v(3),3,1,-1);return m([-A*M,-S*Y],ge,3,2,0)},h.Matrix.translated=function(A,S){return m(arguments,v(3),3,2,0)},h.Vector={},h.Vector.dot=function(A,S){return A.map(function(M,Y){return M*S[Y]}).reduce(function(M,Y){return M+Y})},h.Vector.lengthSquared=function(A){return h.Vector.dot(A,A)},h.Vector.length=function(A){return Math.sqrt(h.Vector.lengthSquared(A))},h.Vector.mulScalar=function(A,S){return A.map(function(M){return M*S})},h.Vector.add=function(A,S){return A.map(function(M,Y){return M+S[Y]})},h.Vector.sub=function(A,S){return A.map(function(M,Y){return M-S[Y]})},h.Vector.dist=function(A,S){return h.Vector.length(h.Vector.sub(A,S))},h.Vector.normalize=function(A){return h.Vector.mulScalar(A,1/h.Vector.length(A))},h.Vector.cross=function(A,S){return[A[1]*S[2]-A[2]*S[1],A[2]*S[0]-A[0]*S[2],A[0]*S[1]-A[1]*S[0]]},h.M44={},h.M44.identity=function(){return v(4)},h.M44.translated=function(A){return m(A,v(4),4,3,0)},h.M44.scaled=function(A){return m(A,v(4),4,0,1)},h.M44.rotated=function(A,S){return h.M44.rotatedUnitSinCos(h.Vector.normalize(A),Math.sin(S),Math.cos(S))},h.M44.rotatedUnitSinCos=function(A,S,M){var Y=A[0],ge=A[1];A=A[2];var Ce=1-M;return[Ce*Y*Y+M,Ce*Y*ge-S*A,Ce*Y*A+S*ge,0,Ce*Y*ge+S*A,Ce*ge*ge+M,Ce*ge*A-S*Y,0,Ce*Y*A-S*ge,Ce*ge*A+S*Y,Ce*A*A+M,0,0,0,0,1]},h.M44.lookat=function(A,S,M){S=h.Vector.normalize(h.Vector.sub(S,A)),M=h.Vector.normalize(M),M=h.Vector.normalize(h.Vector.cross(S,M));var Y=h.M44.identity();return m(M,Y,4,0,0),m(h.Vector.cross(M,S),Y,4,1,0),m(h.Vector.mulScalar(S,-1),Y,4,2,0),m(A,Y,4,3,0),A=h.M44.invert(Y),A===null?h.M44.identity():A},h.M44.perspective=function(A,S,M){var Y=1/(S-A);return M/=2,M=Math.cos(M)/Math.sin(M),[M,0,0,0,0,M,0,0,0,0,(S+A)*Y,2*S*A*Y,0,0,-1,1]},h.M44.rc=function(A,S,M){return A[4*S+M]},h.M44.multiply=function(){return Jg(4,arguments)},h.M44.invert=function(A){var S=A[0],M=A[4],Y=A[8],ge=A[12],Ce=A[1],Je=A[5],vt=A[9],Ct=A[13],Gt=A[2],ur=A[6],Ae=A[10],ft=A[14],Vt=A[3],Ar=A[7],dn=A[11];A=A[15];var Vs=S*Je-M*Ce,Ws=S*vt-Y*Ce,fn=S*Ct-ge*Ce,at=M*vt-Y*Je,z=M*Ct-ge*Je,ue=Y*Ct-ge*vt,Me=Gt*Ar-ur*Vt,Ve=Gt*dn-Ae*Vt,Ze=Gt*A-ft*Vt,ot=ur*dn-Ae*Ar,Pt=ur*A-ft*Ar,xr=Ae*A-ft*dn,In=Vs*xr-Ws*Pt+fn*ot+at*Ze-z*Ve+ue*Me,li=1/In;return In===0||li===1/0?null:(Vs*=li,Ws*=li,fn*=li,at*=li,z*=li,ue*=li,Me*=li,Ve*=li,Ze*=li,ot*=li,Pt*=li,xr*=li,S=[Je*xr-vt*Pt+Ct*ot,vt*Ze-Ce*xr-Ct*Ve,Ce*Pt-Je*Ze+Ct*Me,Je*Ve-Ce*ot-vt*Me,Y*Pt-M*xr-ge*ot,S*xr-Y*Ze+ge*Ve,M*Ze-S*Pt-ge*Me,S*ot-M*Ve+Y*Me,Ar*ue-dn*z+A*at,dn*fn-Vt*ue-A*Ws,Vt*z-Ar*fn+A*Vs,Ar*Ws-Vt*at-dn*Vs,Ae*z-ur*ue-ft*at,Gt*ue-Ae*fn+ft*Ws,ur*fn-Gt*z-ft*Vs,Gt*at-ur*Ws+Ae*Vs],S.every(function(Va){return!isNaN(Va)&&Va!==1/0&&Va!==-1/0})?S:null)},h.M44.transpose=function(A){return[A[0],A[4],A[8],A[12],A[1],A[5],A[9],A[13],A[2],A[6],A[10],A[14],A[3],A[7],A[11],A[15]]},h.M44.mustInvert=function(A){if(A=h.M44.invert(A),A===null)throw"Matrix not invertible";return A},h.M44.setupCamera=function(A,S,M){var Y=h.M44.lookat(M.eye,M.coa,M.up);return M=h.M44.perspective(M.near,M.far,M.angle),S=[(A[2]-A[0])/2,(A[3]-A[1])/2,S],A=h.M44.multiply(h.M44.translated([(A[0]+A[2])/2,(A[1]+A[3])/2,0]),h.M44.scaled(S)),h.M44.multiply(A,M,Y,h.M44.mustInvert(A))},h.ColorMatrix={},h.ColorMatrix.identity=function(){var A=new Float32Array(20);return A[0]=1,A[6]=1,A[12]=1,A[18]=1,A},h.ColorMatrix.scaled=function(A,S,M,Y){var ge=new Float32Array(20);return ge[0]=A,ge[6]=S,ge[12]=M,ge[18]=Y,ge};var Vr=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];h.ColorMatrix.rotated=function(A,S,M){var Y=h.ColorMatrix.identity();return A=Vr[A],Y[A[0]]=M,Y[A[1]]=S,Y[A[2]]=-S,Y[A[3]]=M,Y},h.ColorMatrix.postTranslate=function(A,S,M,Y,ge){return A[4]+=S,A[9]+=M,A[14]+=Y,A[19]+=ge,A},h.ColorMatrix.concat=function(A,S){for(var M=new Float32Array(20),Y=0,ge=0;20>ge;ge+=5){for(var Ce=0;4>Ce;Ce++)M[Y++]=A[ge]*S[Ce]+A[ge+1]*S[Ce+5]+A[ge+2]*S[Ce+10]+A[ge+3]*S[Ce+15];M[Y++]=A[ge]*S[4]+A[ge+1]*S[9]+A[ge+2]*S[14]+A[ge+3]*S[19]+A[ge+4]}return M},function(A){A.Ud=A.Ud||[],A.Ud.push(function(){function S(Ae){if(!Ae||!Ae.length)return[];for(var ft=[],Vt=0;Vt<Ae.length;Vt+=5){var Ar=A.LTRBRect(Ae[Vt],Ae[Vt+1],Ae[Vt+2],Ae[Vt+3]);Ar.direction=Ae[Vt+4]===0?A.TextDirection.RTL:A.TextDirection.LTR,ft.push(Ar)}return A._free(Ae.byteOffset),ft}function M(Ae){return Ae=Ae||{},Ae.weight===void 0&&(Ae.weight=A.FontWeight.Normal),Ae.width=Ae.width||A.FontWidth.Normal,Ae.slant=Ae.slant||A.FontSlant.Upright,Ae}function Y(Ae){if(!Ae||!Ae.length)return pt;for(var ft=[],Vt=0;Vt<Ae.length;Vt++){var Ar=ge(Ae[Vt]);ft.push(Ar)}return Ne(ft,"HEAPU32")}function ge(Ae){if(vt[Ae])return vt[Ae];var ft=Be(Ae)+1,Vt=A._malloc(ft);return qe(Ae,de,Vt,ft),vt[Ae]=Vt}function Ce(Ae){if(Ae._colorPtr=Tt(Ae.color),Ae._foregroundColorPtr=pt,Ae._backgroundColorPtr=pt,Ae._decorationColorPtr=pt,Ae.foregroundColor&&(Ae._foregroundColorPtr=Tt(Ae.foregroundColor,Ct)),Ae.backgroundColor&&(Ae._backgroundColorPtr=Tt(Ae.backgroundColor,Gt)),Ae.decorationColor&&(Ae._decorationColorPtr=Tt(Ae.decorationColor,ur)),Array.isArray(Ae.fontFamilies)&&Ae.fontFamilies.length?(Ae._fontFamiliesPtr=Y(Ae.fontFamilies),Ae._fontFamiliesLen=Ae.fontFamilies.length):(Ae._fontFamiliesPtr=pt,Ae._fontFamiliesLen=0),Ae.locale){var ft=Ae.locale;Ae._localePtr=ge(ft),Ae._localeLen=Be(ft)+1}else Ae._localePtr=pt,Ae._localeLen=0;if(Array.isArray(Ae.shadows)&&Ae.shadows.length){ft=Ae.shadows;var Vt=ft.map(function(at){return at.color||A.BLACK}),Ar=ft.map(function(at){return at.blurRadius||0});Ae._shadowLen=ft.length;for(var dn=A._malloc(8*ft.length),Vs=dn/4,Ws=0;Ws<ft.length;Ws++){var fn=ft[Ws].offset||[0,0];A.HEAPF32[Vs]=fn[0],A.HEAPF32[Vs+1]=fn[1],Vs+=2}Ae._shadowColorsPtr=ct(Vt).be,Ae._shadowOffsetsPtr=dn,Ae._shadowBlurRadiiPtr=Ne(Ar,"HEAPF32")}else Ae._shadowLen=0,Ae._shadowColorsPtr=pt,Ae._shadowOffsetsPtr=pt,Ae._shadowBlurRadiiPtr=pt;Array.isArray(Ae.fontFeatures)&&Ae.fontFeatures.length?(ft=Ae.fontFeatures,Vt=ft.map(function(at){return at.name}),Ar=ft.map(function(at){return at.value}),Ae._fontFeatureLen=ft.length,Ae._fontFeatureNamesPtr=Y(Vt),Ae._fontFeatureValuesPtr=Ne(Ar,"HEAPU32")):(Ae._fontFeatureLen=0,Ae._fontFeatureNamesPtr=pt,Ae._fontFeatureValuesPtr=pt)}function Je(Ae){A._free(Ae._fontFamiliesPtr),A._free(Ae._localePtr),A._free(Ae._shadowColorsPtr),A._free(Ae._shadowOffsetsPtr),A._free(Ae._shadowBlurRadiiPtr),A._free(Ae._fontFeatureNamesPtr),A._free(Ae._fontFeatureValuesPtr)}A.Paragraph.prototype.getRectsForRange=function(Ae,ft,Vt,Ar){return Ae=this._getRectsForRange(Ae,ft,Vt,Ar),S(Ae)},A.Paragraph.prototype.getRectsForPlaceholders=function(){var Ae=this._getRectsForPlaceholders();return S(Ae)},A.TypefaceFontProvider.prototype.registerFont=function(Ae,ft){if(Ae=A.FontMgr.RefDefault().MakeTypefaceFromData(Ae),!Ae)return null;ft=ge(ft),this._registerFont(Ae,ft)},A.ParagraphStyle=function(Ae){if(Ae.disableHinting=Ae.disableHinting||!1,Ae.ellipsis){var ft=Ae.ellipsis;Ae._ellipsisPtr=ge(ft),Ae._ellipsisLen=Be(ft)+1}else Ae._ellipsisPtr=pt,Ae._ellipsisLen=0;return Ae.heightMultiplier=Ae.heightMultiplier||0,Ae.maxLines=Ae.maxLines||0,ft=(ft=Ae.strutStyle)||{},ft.strutEnabled=ft.strutEnabled||!1,ft.strutEnabled&&Array.isArray(ft.fontFamilies)&&ft.fontFamilies.length?(ft._fontFamiliesPtr=Y(ft.fontFamilies),ft._fontFamiliesLen=ft.fontFamilies.length):(ft._fontFamiliesPtr=pt,ft._fontFamiliesLen=0),ft.fontStyle=M(ft.fontStyle),ft.fontSize=ft.fontSize||0,ft.heightMultiplier=ft.heightMultiplier||0,ft.halfLeading=ft.halfLeading||!1,ft.leading=ft.leading||0,ft.forceStrutHeight=ft.forceStrutHeight||!1,Ae.strutStyle=ft,Ae.textAlign=Ae.textAlign||A.TextAlign.Start,Ae.textDirection=Ae.textDirection||A.TextDirection.LTR,Ae.textHeightBehavior=Ae.textHeightBehavior||A.TextHeightBehavior.All,Ae.textStyle=A.TextStyle(Ae.textStyle),Ae},A.TextStyle=function(Ae){return Ae.color||(Ae.color=A.BLACK),Ae.decoration=Ae.decoration||0,Ae.decorationThickness=Ae.decorationThickness||0,Ae.decorationStyle=Ae.decorationStyle||A.DecorationStyle.Solid,Ae.textBaseline=Ae.textBaseline||A.TextBaseline.Alphabetic,Ae.fontSize=Ae.fontSize||0,Ae.letterSpacing=Ae.letterSpacing||0,Ae.wordSpacing=Ae.wordSpacing||0,Ae.heightMultiplier=Ae.heightMultiplier||0,Ae.halfLeading=Ae.halfLeading||!1,Ae.fontStyle=M(Ae.fontStyle),Ae};var vt={},Ct=A._malloc(16),Gt=A._malloc(16),ur=A._malloc(16);A.ParagraphBuilder.Make=function(Ae,ft){return Ce(Ae.textStyle),ft=A.ParagraphBuilder._Make(Ae,ft),Je(Ae.textStyle),ft},A.ParagraphBuilder.MakeFromFontProvider=function(Ae,ft){return Ce(Ae.textStyle),ft=A.ParagraphBuilder._MakeFromFontProvider(Ae,ft),Je(Ae.textStyle),ft},A.ParagraphBuilder.ShapeText=function(Ae,ft,Vt){let Ar=0;for(const dn of ft)Ar+=dn.length;if(Ar!==Ae.length)throw"Accumulated block lengths must equal text.length";return A.ParagraphBuilder._ShapeText(Ae,ft,Vt)},A.ParagraphBuilder.prototype.pushStyle=function(Ae){Ce(Ae),this._pushStyle(Ae),Je(Ae)},A.ParagraphBuilder.prototype.pushPaintStyle=function(Ae,ft,Vt){Ce(Ae),this._pushPaintStyle(Ae,ft,Vt),Je(Ae)},A.ParagraphBuilder.prototype.addPlaceholder=function(Ae,ft,Vt,Ar,dn){Vt=Vt||A.PlaceholderAlignment.Baseline,Ar=Ar||A.TextBaseline.Alphabetic,this._addPlaceholder(Ae||0,ft||0,Vt,Ar,dn||0)}})}(n),h.Ud=h.Ud||[],h.Ud.push(function(){h.Path.prototype.op=function(A,S){return this._op(A,S)?this:null},h.Path.prototype.simplify=function(){return this._simplify()?this:null}}),h.Ud=h.Ud||[],h.Ud.push(function(){h.Canvas.prototype.drawText=function(A,S,M,Y,ge){var Ce=Be(A),Je=h._malloc(Ce+1);qe(A,de,Je,Ce+1),this._drawSimpleText(Je,Ce,S,M,ge,Y),h._free(Je)},h.Font.prototype.getGlyphBounds=function(A,S,M){var Y=Ne(A,"HEAPU16"),ge=h._malloc(16*A.length);return this._getGlyphWidthBounds(Y,A.length,pt,ge,S||null),S=new Float32Array(h.HEAPU8.buffer,ge,4*A.length),Fe(Y,A),M?(M.set(S),h._free(ge),M):(A=Float32Array.from(S),h._free(ge),A)},h.Font.prototype.getGlyphIDs=function(A,S,M){S||(S=A.length);var Y=Be(A)+1,ge=h._malloc(Y);return qe(A,de,ge,Y),A=h._malloc(2*S),S=this._getGlyphIDs(ge,Y-1,S,A),h._free(ge),0>S?(h._free(A),null):(ge=new Uint16Array(h.HEAPU8.buffer,A,S),M?(M.set(ge),h._free(A),M):(M=Uint16Array.from(ge),h._free(A),M))},h.Font.prototype.getGlyphIntercepts=function(A,S,M,Y){var ge=Ne(A,"HEAPU16"),Ce=Ne(S,"HEAPF32");return this._getGlyphIntercepts(ge,A.length,!(A&&A._ck),Ce,S.length,!(S&&S._ck),M,Y)},h.Font.prototype.getGlyphWidths=function(A,S,M){var Y=Ne(A,"HEAPU16"),ge=h._malloc(4*A.length);return this._getGlyphWidthBounds(Y,A.length,ge,pt,S||null),S=new Float32Array(h.HEAPU8.buffer,ge,A.length),Fe(Y,A),M?(M.set(S),h._free(ge),M):(A=Float32Array.from(S),h._free(ge),A)},h.FontMgr.FromData=function(){if(!arguments.length)return null;var A=arguments;if(A.length===1&&Array.isArray(A[0])&&(A=arguments[0]),!A.length)return null;for(var S=[],M=[],Y=0;Y<A.length;Y++){var ge=new Uint8Array(A[Y]),Ce=Ne(ge,"HEAPU8");S.push(Ce),M.push(ge.byteLength)}return S=Ne(S,"HEAPU32"),M=Ne(M,"HEAPU32"),A=h.FontMgr._fromData(S,M,A.length),h._free(S),h._free(M),A},h.FontMgr.prototype.MakeTypefaceFromData=function(A){A=new Uint8Array(A);var S=Ne(A,"HEAPU8");return(A=this._makeTypefaceFromData(S,A.byteLength))?A:null},h.Typeface.MakeFreeTypeFaceFromData=function(A){A=new Uint8Array(A);var S=Ne(A,"HEAPU8");return(A=h.Typeface._MakeFreeTypeFaceFromData(S,A.byteLength))?A:null},h.Typeface.prototype.getGlyphIDs=function(A,S,M){S||(S=A.length);var Y=Be(A)+1,ge=h._malloc(Y);return qe(A,de,ge,Y),A=h._malloc(2*S),S=this._getGlyphIDs(ge,Y-1,S,A),h._free(ge),0>S?(h._free(A),null):(ge=new Uint16Array(h.HEAPU8.buffer,A,S),M?(M.set(ge),h._free(A),M):(M=Uint16Array.from(ge),h._free(A),M))},h.TextBlob.MakeOnPath=function(A,S,M,Y){if(A&&A.length&&S&&S.countPoints()){if(S.countPoints()===1)return this.MakeFromText(A,M);Y||(Y=0);var ge=M.getGlyphIDs(A);ge=M.getGlyphWidths(ge);var Ce=[];S=new h.ContourMeasureIter(S,!1,1);for(var Je=S.next(),vt=new Float32Array(4),Ct=0;Ct<A.length&&Je;Ct++){var Gt=ge[Ct];if(Y+=Gt/2,Y>Je.length()){if(Je.delete(),Je=S.next(),!Je){A=A.substring(0,Ct);break}Y=Gt/2}Je.getPosTan(Y,vt);var ur=vt[2],Ae=vt[3];Ce.push(ur,Ae,vt[0]-Gt/2*ur,vt[1]-Gt/2*Ae),Y+=Gt/2}return A=this.MakeFromRSXform(A,Ce,M),Je&&Je.delete(),S.delete(),A}},h.TextBlob.MakeFromRSXform=function(A,S,M){var Y=Be(A)+1,ge=h._malloc(Y);return qe(A,de,ge,Y),A=Ne(S,"HEAPF32"),M=h.TextBlob._MakeFromRSXform(ge,Y-1,A,M),h._free(ge),M||null},h.TextBlob.MakeFromRSXformGlyphs=function(A,S,M){var Y=Ne(A,"HEAPU16");return S=Ne(S,"HEAPF32"),M=h.TextBlob._MakeFromRSXformGlyphs(Y,2*A.length,S,M),Fe(Y,A),M||null},h.TextBlob.MakeFromGlyphs=function(A,S){var M=Ne(A,"HEAPU16");return S=h.TextBlob._MakeFromGlyphs(M,2*A.length,S),Fe(M,A),S||null},h.TextBlob.MakeFromText=function(A,S){var M=Be(A)+1,Y=h._malloc(M);return qe(A,de,Y,M),A=h.TextBlob._MakeFromText(Y,M-1,S),h._free(Y),A||null},h.MallocGlyphIDs=function(A){return h.Malloc(Uint16Array,A)}}),h.Ud=h.Ud||[],h.Ud.push(function(){h.MakePicture=function(A){A=new Uint8Array(A);var S=h._malloc(A.byteLength);return h.HEAPU8.set(A,S),(A=h._MakePicture(S,A.byteLength))?A:null}}),function(){function A(at){for(var z=0;z<at.length;z++)if(at[z]!==void 0&&!Number.isFinite(at[z]))return!1;return!0}function S(at){var z=h.getColorComponents(at);at=z[0];var ue=z[1],Me=z[2];return z=z[3],z===1?(at=at.toString(16).toLowerCase(),ue=ue.toString(16).toLowerCase(),Me=Me.toString(16).toLowerCase(),at=at.length===1?"0"+at:at,ue=ue.length===1?"0"+ue:ue,Me=Me.length===1?"0"+Me:Me,"#"+at+ue+Me):(z=z===0||z===1?z:z.toFixed(8),"rgba("+at+", "+ue+", "+Me+", "+z+")")}function M(at){return h.parseColorString(at,Vs)}function Y(at){if(at=Ws.exec(at),!at)return null;var z=parseFloat(at[4]),ue=16;switch(at[5]){case"em":case"rem":ue=16*z;break;case"pt":ue=4*z/3;break;case"px":ue=z;break;case"pc":ue=16*z;break;case"in":ue=96*z;break;case"cm":ue=96*z/2.54;break;case"mm":ue=3.7795275590551185*z;break;case"q":ue=.9448818897637796*z;break;case"%":ue=.21333333333333335*z}return{style:at[1],variant:at[2],weight:at[3],sizePx:ue,family:at[6].trim()}}function ge(at){this.Ld=at,this.Pd=new h.Paint,this.Pd.setAntiAlias(!0),this.Pd.setStrokeMiter(10),this.Pd.setStrokeCap(h.StrokeCap.Butt),this.Pd.setStrokeJoin(h.StrokeJoin.Miter),this.Oe="10px monospace",this.qe=new h.Font(null,10),this.qe.setSubpixel(!0),this.ae=this.ge=h.BLACK,this.te=0,this.He=h.TRANSPARENT,this.ve=this.ue=0,this.Ie=this.ie=1,this.Ge=0,this.se=[],this.Od=h.BlendMode.SrcOver,this.Pd.setStrokeWidth(this.Ie),this.Pd.setBlendMode(this.Od),this.Sd=new h.Path,this.Td=h.Matrix.identity(),this.jf=[],this.ze=[],this.ke=function(){this.Sd.delete(),this.Pd.delete(),this.qe.delete(),this.ze.forEach(function(z){z.ke()})},Object.defineProperty(this,"currentTransform",{enumerable:!0,get:function(){return{a:this.Td[0],c:this.Td[1],e:this.Td[2],b:this.Td[3],d:this.Td[4],f:this.Td[5]}},set:function(z){z.a&&this.setTransform(z.a,z.b,z.c,z.d,z.e,z.f)}}),Object.defineProperty(this,"fillStyle",{enumerable:!0,get:function(){return k(this.ae)?S(this.ae):this.ae},set:function(z){typeof z=="string"?this.ae=M(z):z.re&&(this.ae=z)}}),Object.defineProperty(this,"font",{enumerable:!0,get:function(){return this.Oe},set:function(z){var ue=Y(z),Me=ue.family;ue.typeface=fn[Me]?fn[Me][(ue.style||"normal")+"|"+(ue.variant||"normal")+"|"+(ue.weight||"normal")]||fn[Me]["*"]:null,ue&&(this.qe.setSize(ue.sizePx),this.qe.setTypeface(ue.typeface),this.Oe=z)}}),Object.defineProperty(this,"globalAlpha",{enumerable:!0,get:function(){return this.ie},set:function(z){!isFinite(z)||0>z||1<z||(this.ie=z)}}),Object.defineProperty(this,"globalCompositeOperation",{enumerable:!0,get:function(){switch(this.Od){case h.BlendMode.SrcOver:return"source-over";case h.BlendMode.DstOver:return"destination-over";case h.BlendMode.Src:return"copy";case h.BlendMode.Dst:return"destination";case h.BlendMode.Clear:return"clear";case h.BlendMode.SrcIn:return"source-in";case h.BlendMode.DstIn:return"destination-in";case h.BlendMode.SrcOut:return"source-out";case h.BlendMode.DstOut:return"destination-out";case h.BlendMode.SrcATop:return"source-atop";case h.BlendMode.DstATop:return"destination-atop";case h.BlendMode.Xor:return"xor";case h.BlendMode.Plus:return"lighter";case h.BlendMode.Multiply:return"multiply";case h.BlendMode.Screen:return"screen";case h.BlendMode.Overlay:return"overlay";case h.BlendMode.Darken:return"darken";case h.BlendMode.Lighten:return"lighten";case h.BlendMode.ColorDodge:return"color-dodge";case h.BlendMode.ColorBurn:return"color-burn";case h.BlendMode.HardLight:return"hard-light";case h.BlendMode.SoftLight:return"soft-light";case h.BlendMode.Difference:return"difference";case h.BlendMode.Exclusion:return"exclusion";case h.BlendMode.Hue:return"hue";case h.BlendMode.Saturation:return"saturation";case h.BlendMode.Color:return"color";case h.BlendMode.Luminosity:return"luminosity"}},set:function(z){switch(z){case"source-over":this.Od=h.BlendMode.SrcOver;break;case"destination-over":this.Od=h.BlendMode.DstOver;break;case"copy":this.Od=h.BlendMode.Src;break;case"destination":this.Od=h.BlendMode.Dst;break;case"clear":this.Od=h.BlendMode.Clear;break;case"source-in":this.Od=h.BlendMode.SrcIn;break;case"destination-in":this.Od=h.BlendMode.DstIn;break;case"source-out":this.Od=h.BlendMode.SrcOut;break;case"destination-out":this.Od=h.BlendMode.DstOut;break;case"source-atop":this.Od=h.BlendMode.SrcATop;break;case"destination-atop":this.Od=h.BlendMode.DstATop;break;case"xor":this.Od=h.BlendMode.Xor;break;case"lighter":this.Od=h.BlendMode.Plus;break;case"plus-lighter":this.Od=h.BlendMode.Plus;break;case"plus-darker":throw"plus-darker is not supported";case"multiply":this.Od=h.BlendMode.Multiply;break;case"screen":this.Od=h.BlendMode.Screen;break;case"overlay":this.Od=h.BlendMode.Overlay;break;case"darken":this.Od=h.BlendMode.Darken;break;case"lighten":this.Od=h.BlendMode.Lighten;break;case"color-dodge":this.Od=h.BlendMode.ColorDodge;break;case"color-burn":this.Od=h.BlendMode.ColorBurn;break;case"hard-light":this.Od=h.BlendMode.HardLight;break;case"soft-light":this.Od=h.BlendMode.SoftLight;break;case"difference":this.Od=h.BlendMode.Difference;break;case"exclusion":this.Od=h.BlendMode.Exclusion;break;case"hue":this.Od=h.BlendMode.Hue;break;case"saturation":this.Od=h.BlendMode.Saturation;break;case"color":this.Od=h.BlendMode.Color;break;case"luminosity":this.Od=h.BlendMode.Luminosity;break;default:return}this.Pd.setBlendMode(this.Od)}}),Object.defineProperty(this,"imageSmoothingEnabled",{enumerable:!0,get:function(){return!0},set:function(){}}),Object.defineProperty(this,"imageSmoothingQuality",{enumerable:!0,get:function(){return"high"},set:function(){}}),Object.defineProperty(this,"lineCap",{enumerable:!0,get:function(){switch(this.Pd.getStrokeCap()){case h.StrokeCap.Butt:return"butt";case h.StrokeCap.Round:return"round";case h.StrokeCap.Square:return"square"}},set:function(z){switch(z){case"butt":this.Pd.setStrokeCap(h.StrokeCap.Butt);break;case"round":this.Pd.setStrokeCap(h.StrokeCap.Round);break;case"square":this.Pd.setStrokeCap(h.StrokeCap.Square)}}}),Object.defineProperty(this,"lineDashOffset",{enumerable:!0,get:function(){return this.Ge},set:function(z){isFinite(z)&&(this.Ge=z)}}),Object.defineProperty(this,"lineJoin",{enumerable:!0,get:function(){switch(this.Pd.getStrokeJoin()){case h.StrokeJoin.Miter:return"miter";case h.StrokeJoin.Round:return"round";case h.StrokeJoin.Bevel:return"bevel"}},set:function(z){switch(z){case"miter":this.Pd.setStrokeJoin(h.StrokeJoin.Miter);break;case"round":this.Pd.setStrokeJoin(h.StrokeJoin.Round);break;case"bevel":this.Pd.setStrokeJoin(h.StrokeJoin.Bevel)}}}),Object.defineProperty(this,"lineWidth",{enumerable:!0,get:function(){return this.Pd.getStrokeWidth()},set:function(z){0>=z||!z||(this.Ie=z,this.Pd.setStrokeWidth(z))}}),Object.defineProperty(this,"miterLimit",{enumerable:!0,get:function(){return this.Pd.getStrokeMiter()},set:function(z){0>=z||!z||this.Pd.setStrokeMiter(z)}}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,get:function(){return this.te},set:function(z){0>z||!isFinite(z)||(this.te=z)}}),Object.defineProperty(this,"shadowColor",{enumerable:!0,get:function(){return S(this.He)},set:function(z){this.He=M(z)}}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,get:function(){return this.ue},set:function(z){isFinite(z)&&(this.ue=z)}}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,get:function(){return this.ve},set:function(z){isFinite(z)&&(this.ve=z)}}),Object.defineProperty(this,"strokeStyle",{enumerable:!0,get:function(){return S(this.ge)},set:function(z){typeof z=="string"?this.ge=M(z):z.re&&(this.ge=z)}}),this.arc=function(z,ue,Me,Ve,Ze,ot){Ae(this.Sd,z,ue,Me,Me,0,Ve,Ze,ot)},this.arcTo=function(z,ue,Me,Ve,Ze){Ct(this.Sd,z,ue,Me,Ve,Ze)},this.beginPath=function(){this.Sd.delete(),this.Sd=new h.Path},this.bezierCurveTo=function(z,ue,Me,Ve,Ze,ot){var Pt=this.Sd;A([z,ue,Me,Ve,Ze,ot])&&(Pt.isEmpty()&&Pt.moveTo(z,ue),Pt.cubicTo(z,ue,Me,Ve,Ze,ot))},this.clearRect=function(z,ue,Me,Ve){this.Pd.setStyle(h.PaintStyle.Fill),this.Pd.setBlendMode(h.BlendMode.Clear),this.Ld.drawRect(h.XYWHRect(z,ue,Me,Ve),this.Pd),this.Pd.setBlendMode(this.Od)},this.clip=function(z,ue){typeof z=="string"?(ue=z,z=this.Sd):z&&z.Ze&&(z=z.Vd),z||(z=this.Sd),z=z.copy(),ue&&ue.toLowerCase()==="evenodd"?z.setFillType(h.FillType.EvenOdd):z.setFillType(h.FillType.Winding),this.Ld.clipPath(z,h.ClipOp.Intersect,!0),z.delete()},this.closePath=function(){Gt(this.Sd)},this.createImageData=function(){if(arguments.length===1){var z=arguments[0];return new Je(new Uint8ClampedArray(4*z.width*z.height),z.width,z.height)}if(arguments.length===2){z=arguments[0];var ue=arguments[1];return new Je(new Uint8ClampedArray(4*z*ue),z,ue)}throw"createImageData expects 1 or 2 arguments, got "+arguments.length},this.createLinearGradient=function(z,ue,Me,Ve){if(A(arguments)){var Ze=new vt(z,ue,Me,Ve);return this.ze.push(Ze),Ze}},this.createPattern=function(z,ue){return z=new Ar(z,ue),this.ze.push(z),z},this.createRadialGradient=function(z,ue,Me,Ve,Ze,ot){if(A(arguments)){var Pt=new dn(z,ue,Me,Ve,Ze,ot);return this.ze.push(Pt),Pt}},this.drawImage=function(z){var ue=this.Ne();if(arguments.length===3||arguments.length===5)var Me=h.XYWHRect(arguments[1],arguments[2],arguments[3]||z.width(),arguments[4]||z.height()),Ve=h.XYWHRect(0,0,z.width(),z.height());else if(arguments.length===9)Me=h.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),Ve=h.XYWHRect(arguments[1],arguments[2],arguments[3],arguments[4]);else throw"invalid number of args for drawImage, need 3, 5, or 9; got "+arguments.length;this.Ld.drawImageRect(z,Ve,Me,ue,!1),ue.dispose()},this.ellipse=function(z,ue,Me,Ve,Ze,ot,Pt,xr){Ae(this.Sd,z,ue,Me,Ve,Ze,ot,Pt,xr)},this.Ne=function(){var z=this.Pd.copy();if(z.setStyle(h.PaintStyle.Fill),k(this.ae)){var ue=h.multiplyByAlpha(this.ae,this.ie);z.setColor(ue)}else ue=this.ae.re(this.Td),z.setColor(h.Color(0,0,0,this.ie)),z.setShader(ue);return z.dispose=function(){this.delete()},z},this.fill=function(z,ue){if(typeof z=="string"?(ue=z,z=this.Sd):z&&z.Ze&&(z=z.Vd),ue==="evenodd")this.Sd.setFillType(h.FillType.EvenOdd);else{if(ue!=="nonzero"&&ue)throw"invalid fill rule";this.Sd.setFillType(h.FillType.Winding)}z||(z=this.Sd),ue=this.Ne();var Me=this.we(ue);Me&&(this.Ld.save(),this.oe(),this.Ld.drawPath(z,Me),this.Ld.restore(),Me.dispose()),this.Ld.drawPath(z,ue),ue.dispose()},this.fillRect=function(z,ue,Me,Ve){var Ze=this.Ne(),ot=this.we(Ze);ot&&(this.Ld.save(),this.oe(),this.Ld.drawRect(h.XYWHRect(z,ue,Me,Ve),ot),this.Ld.restore(),ot.dispose()),this.Ld.drawRect(h.XYWHRect(z,ue,Me,Ve),Ze),Ze.dispose()},this.fillText=function(z,ue,Me){var Ve=this.Ne();z=h.TextBlob.MakeFromText(z,this.qe);var Ze=this.we(Ve);Ze&&(this.Ld.save(),this.oe(),this.Ld.drawTextBlob(z,ue,Me,Ze),this.Ld.restore(),Ze.dispose()),this.Ld.drawTextBlob(z,ue,Me,Ve),z.delete(),Ve.dispose()},this.getImageData=function(z,ue,Me,Ve){return(z=this.Ld.readPixels(z,ue,{width:Me,height:Ve,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB}))?new Je(new Uint8ClampedArray(z.buffer),Me,Ve):null},this.getLineDash=function(){return this.se.slice()},this.kf=function(z){var ue=h.Matrix.invert(this.Td);return h.Matrix.mapPoints(ue,z),z},this.isPointInPath=function(z,ue,Me){var Ve=arguments;if(Ve.length===3)var Ze=this.Sd;else if(Ve.length===4)Ze=Ve[0],z=Ve[1],ue=Ve[2],Me=Ve[3];else throw"invalid arg count, need 3 or 4, got "+Ve.length;return!isFinite(z)||!isFinite(ue)||(Me=Me||"nonzero",Me!=="nonzero"&&Me!=="evenodd")?!1:(Ve=this.kf([z,ue]),z=Ve[0],ue=Ve[1],Ze.setFillType(Me==="nonzero"?h.FillType.Winding:h.FillType.EvenOdd),Ze.contains(z,ue))},this.isPointInStroke=function(z,ue){var Me=arguments;if(Me.length===2)var Ve=this.Sd;else if(Me.length===3)Ve=Me[0],z=Me[1],ue=Me[2];else throw"invalid arg count, need 2 or 3, got "+Me.length;return!isFinite(z)||!isFinite(ue)?!1:(Me=this.kf([z,ue]),z=Me[0],ue=Me[1],Ve=Ve.copy(),Ve.setFillType(h.FillType.Winding),Ve.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.Pd.getStrokeCap(),join:this.Pd.getStrokeJoin(),precision:.3}),Me=Ve.contains(z,ue),Ve.delete(),Me)},this.lineTo=function(z,ue){ft(this.Sd,z,ue)},this.measureText=function(){throw Error("Clients wishing to properly measure text should use the Paragraph API")},this.moveTo=function(z,ue){var Me=this.Sd;A([z,ue])&&Me.moveTo(z,ue)},this.putImageData=function(z,ue,Me,Ve,Ze,ot,Pt){if(A([ue,Me,Ve,Ze,ot,Pt])){if(Ve===void 0)this.Ld.writePixels(z.data,z.width,z.height,ue,Me);else if(Ve=Ve||0,Ze=Ze||0,ot=ot||z.width,Pt=Pt||z.height,0>ot&&(Ve+=ot,ot=Math.abs(ot)),0>Pt&&(Ze+=Pt,Pt=Math.abs(Pt)),0>Ve&&(ot+=Ve,Ve=0),0>Ze&&(Pt+=Ze,Ze=0),!(0>=ot||0>=Pt)){z=h.MakeImage({width:z.width,height:z.height,alphaType:h.AlphaType.Unpremul,colorType:h.ColorType.RGBA_8888,colorSpace:h.ColorSpace.SRGB},z.data,4*z.width);var xr=h.XYWHRect(Ve,Ze,ot,Pt);ue=h.XYWHRect(ue+Ve,Me+Ze,ot,Pt),Me=h.Matrix.invert(this.Td),this.Ld.save(),this.Ld.concat(Me),this.Ld.drawImageRect(z,xr,ue,null,!1),this.Ld.restore(),z.delete()}}},this.quadraticCurveTo=function(z,ue,Me,Ve){var Ze=this.Sd;A([z,ue,Me,Ve])&&(Ze.isEmpty()&&Ze.moveTo(z,ue),Ze.quadTo(z,ue,Me,Ve))},this.rect=function(z,ue,Me,Ve){var Ze=this.Sd;z=h.XYWHRect(z,ue,Me,Ve),A(z)&&Ze.addRect(z)},this.resetTransform=function(){this.Sd.transform(this.Td);var z=h.Matrix.invert(this.Td);this.Ld.concat(z),this.Td=this.Ld.getTotalMatrix()},this.restore=function(){var z=this.jf.pop();if(z){var ue=h.Matrix.multiply(this.Td,h.Matrix.invert(z.Cf));this.Sd.transform(ue),this.Pd.delete(),this.Pd=z.$f,this.se=z.Wf,this.Ie=z.rg,this.ge=z.qg,this.ae=z.fs,this.ue=z.og,this.ve=z.pg,this.te=z.dg,this.He=z.ng,this.ie=z.Jf,this.Od=z.Kf,this.Ge=z.Xf,this.Oe=z.If,this.Ld.restore(),this.Td=this.Ld.getTotalMatrix()}},this.rotate=function(z){if(isFinite(z)){var ue=h.Matrix.rotated(-z);this.Sd.transform(ue),this.Ld.rotate(z/Math.PI*180,0,0),this.Td=this.Ld.getTotalMatrix()}},this.save=function(){if(this.ae.pe){var z=this.ae.pe();this.ze.push(z)}else z=this.ae;if(this.ge.pe){var ue=this.ge.pe();this.ze.push(ue)}else ue=this.ge;this.jf.push({Cf:this.Td.slice(),Wf:this.se.slice(),rg:this.Ie,qg:ue,fs:z,og:this.ue,pg:this.ve,dg:this.te,ng:this.He,Jf:this.ie,Xf:this.Ge,Kf:this.Od,$f:this.Pd.copy(),If:this.Oe}),this.Ld.save()},this.scale=function(z,ue){if(A(arguments)){var Me=h.Matrix.scaled(1/z,1/ue);this.Sd.transform(Me),this.Ld.scale(z,ue),this.Td=this.Ld.getTotalMatrix()}},this.setLineDash=function(z){for(var ue=0;ue<z.length;ue++)if(!isFinite(z[ue])||0>z[ue])return;z.length%2===1&&Array.prototype.push.apply(z,z),this.se=z},this.setTransform=function(z,ue,Me,Ve,Ze,ot){A(arguments)&&(this.resetTransform(),this.transform(z,ue,Me,Ve,Ze,ot))},this.oe=function(){var z=h.Matrix.invert(this.Td);this.Ld.concat(z),this.Ld.concat(h.Matrix.translated(this.ue,this.ve)),this.Ld.concat(this.Td)},this.we=function(z){var ue=h.multiplyByAlpha(this.He,this.ie);if(!h.getColorComponents(ue)[3]||!(this.te||this.ve||this.ue))return null;z=z.copy(),z.setColor(ue);var Me=h.MaskFilter.MakeBlur(h.BlurStyle.Normal,this.te/2,!1);return z.setMaskFilter(Me),z.dispose=function(){Me.delete(),this.delete()},z},this.af=function(){var z=this.Pd.copy();if(z.setStyle(h.PaintStyle.Stroke),k(this.ge)){var ue=h.multiplyByAlpha(this.ge,this.ie);z.setColor(ue)}else ue=this.ge.re(this.Td),z.setColor(h.Color(0,0,0,this.ie)),z.setShader(ue);if(z.setStrokeWidth(this.Ie),this.se.length){var Me=h.PathEffect.MakeDash(this.se,this.Ge);z.setPathEffect(Me)}return z.dispose=function(){Me&&Me.delete(),this.delete()},z},this.stroke=function(z){z=z?z.Vd:this.Sd;var ue=this.af(),Me=this.we(ue);Me&&(this.Ld.save(),this.oe(),this.Ld.drawPath(z,Me),this.Ld.restore(),Me.dispose()),this.Ld.drawPath(z,ue),ue.dispose()},this.strokeRect=function(z,ue,Me,Ve){var Ze=this.af(),ot=this.we(Ze);ot&&(this.Ld.save(),this.oe(),this.Ld.drawRect(h.XYWHRect(z,ue,Me,Ve),ot),this.Ld.restore(),ot.dispose()),this.Ld.drawRect(h.XYWHRect(z,ue,Me,Ve),Ze),Ze.dispose()},this.strokeText=function(z,ue,Me){var Ve=this.af();z=h.TextBlob.MakeFromText(z,this.qe);var Ze=this.we(Ve);Ze&&(this.Ld.save(),this.oe(),this.Ld.drawTextBlob(z,ue,Me,Ze),this.Ld.restore(),Ze.dispose()),this.Ld.drawTextBlob(z,ue,Me,Ve),z.delete(),Ve.dispose()},this.translate=function(z,ue){if(A(arguments)){var Me=h.Matrix.translated(-z,-ue);this.Sd.transform(Me),this.Ld.translate(z,ue),this.Td=this.Ld.getTotalMatrix()}},this.transform=function(z,ue,Me,Ve,Ze,ot){z=[z,Me,Ze,ue,Ve,ot,0,0,1],ue=h.Matrix.invert(z),this.Sd.transform(ue),this.Ld.concat(z),this.Td=this.Ld.getTotalMatrix()},this.addHitRegion=function(){},this.clearHitRegions=function(){},this.drawFocusIfNeeded=function(){},this.removeHitRegion=function(){},this.scrollPathIntoView=function(){},Object.defineProperty(this,"canvas",{value:null,writable:!1})}function Ce(at){this.bf=at,this.Md=new ge(at.getCanvas()),this.Pe=[],this.vf=h.FontMgr.RefDefault(),this.decodeImage=function(z){if(z=h.MakeImageFromEncoded(z),!z)throw"Invalid input";return this.Pe.push(z),z},this.loadFont=function(z,ue){if(z=this.vf.MakeTypefaceFromData(z),!z)return null;this.Pe.push(z);var Me=(ue.style||"normal")+"|"+(ue.variant||"normal")+"|"+(ue.weight||"normal");ue=ue.family,fn[ue]||(fn[ue]={"*":z}),fn[ue][Me]=z},this.makePath2D=function(z){return z=new Vt(z),this.Pe.push(z.Vd),z},this.getContext=function(z){return z==="2d"?this.Md:null},this.toDataURL=function(z,ue){this.bf.flush();var Me=this.bf.makeImageSnapshot();if(Me){z=z||"image/png";var Ve=h.ImageFormat.PNG;if(z==="image/jpeg"&&(Ve=h.ImageFormat.JPEG),ue=Me.encodeToBytes(Ve,ue||.92)){if(Me.delete(),z="data:"+z+";base64,",typeof Buffer<"u")ue=Buffer.from(ue).toString("base64");else{Me=0,Ve=ue.length;for(var Ze="",ot;Me<Ve;)ot=ue.slice(Me,Math.min(Me+32768,Ve)),Ze+=String.fromCharCode.apply(null,ot),Me+=32768;ue=btoa(Ze)}return z+ue}}},this.dispose=function(){this.Md.ke(),this.Pe.forEach(function(z){z.delete()}),this.bf.dispose()}}function Je(at,z,ue){if(!z||ue===0)throw"invalid dimensions, width and height must be non-zero";if(at.length%4)throw"arr must be a multiple of 4";ue=ue||at.length/(4*z),Object.defineProperty(this,"data",{value:at,writable:!1}),Object.defineProperty(this,"height",{value:ue,writable:!1}),Object.defineProperty(this,"width",{value:z,writable:!1})}function vt(at,z,ue,Me){this.Xd=null,this.de=[],this.Zd=[],this.addColorStop=function(Ve,Ze){if(0>Ve||1<Ve||!isFinite(Ve))throw"offset must be between 0 and 1 inclusively";Ze=M(Ze);var ot=this.Zd.indexOf(Ve);if(ot!==-1)this.de[ot]=Ze;else{for(ot=0;ot<this.Zd.length&&!(this.Zd[ot]>Ve);ot++);this.Zd.splice(ot,0,Ve),this.de.splice(ot,0,Ze)}},this.pe=function(){var Ve=new vt(at,z,ue,Me);return Ve.de=this.de.slice(),Ve.Zd=this.Zd.slice(),Ve},this.ke=function(){this.Xd&&(this.Xd.delete(),this.Xd=null)},this.re=function(Ve){var Ze=[at,z,ue,Me];h.Matrix.mapPoints(Ve,Ze),Ve=Ze[0];var ot=Ze[1],Pt=Ze[2];return Ze=Ze[3],this.ke(),this.Xd=h.Shader.MakeLinearGradient([Ve,ot],[Pt,Ze],this.de,this.Zd,h.TileMode.Clamp)}}function Ct(at,z,ue,Me,Ve,Ze){if(A([z,ue,Me,Ve,Ze])){if(0>Ze)throw"radii cannot be negative";at.isEmpty()&&at.moveTo(z,ue),at.arcToTangent(z,ue,Me,Ve,Ze)}}function Gt(at){if(!at.isEmpty()){var z=at.getBounds();(z[3]-z[1]||z[2]-z[0])&&at.close()}}function ur(at,z,ue,Me,Ve,Ze,ot){ot=(ot-Ze)/Math.PI*180,Ze=Ze/Math.PI*180,z=h.LTRBRect(z-Me,ue-Ve,z+Me,ue+Ve),1e-5>Math.abs(Math.abs(ot)-360)?(ue=ot/2,at.arcToOval(z,Ze,ue,!1),at.arcToOval(z,Ze+ue,ue,!1)):at.arcToOval(z,Ze,ot,!1)}function Ae(at,z,ue,Me,Ve,Ze,ot,Pt,xr){if(A([z,ue,Me,Ve,Ze,ot,Pt])){if(0>Me||0>Ve)throw"radii cannot be negative";var In=2*Math.PI,li=ot%In;0>li&&(li+=In);var Va=li-ot;ot=li,Pt+=Va,!xr&&Pt-ot>=In?Pt=ot+In:xr&&ot-Pt>=In?Pt=ot-In:!xr&&ot>Pt?Pt=ot+(In-(ot-Pt)%In):xr&&ot<Pt&&(Pt=ot-(In-(Pt-ot)%In)),Ze?(xr=h.Matrix.rotated(Ze,z,ue),Ze=h.Matrix.rotated(-Ze,z,ue),at.transform(Ze),ur(at,z,ue,Me,Ve,ot,Pt),at.transform(xr)):ur(at,z,ue,Me,Ve,ot,Pt)}}function ft(at,z,ue){A([z,ue])&&(at.isEmpty()&&at.moveTo(z,ue),at.lineTo(z,ue))}function Vt(at){this.Vd=null,this.Vd=typeof at=="string"?h.Path.MakeFromSVGString(at):at&&at.Ze?at.Vd.copy():new h.Path,this.Ze=function(){return this.Vd},this.addPath=function(z,ue){ue||(ue={a:1,c:0,e:0,b:0,d:1,f:0}),this.Vd.addPath(z.Vd,[ue.a,ue.c,ue.e,ue.b,ue.d,ue.f])},this.arc=function(z,ue,Me,Ve,Ze,ot){Ae(this.Vd,z,ue,Me,Me,0,Ve,Ze,ot)},this.arcTo=function(z,ue,Me,Ve,Ze){Ct(this.Vd,z,ue,Me,Ve,Ze)},this.bezierCurveTo=function(z,ue,Me,Ve,Ze,ot){var Pt=this.Vd;A([z,ue,Me,Ve,Ze,ot])&&(Pt.isEmpty()&&Pt.moveTo(z,ue),Pt.cubicTo(z,ue,Me,Ve,Ze,ot))},this.closePath=function(){Gt(this.Vd)},this.ellipse=function(z,ue,Me,Ve,Ze,ot,Pt,xr){Ae(this.Vd,z,ue,Me,Ve,Ze,ot,Pt,xr)},this.lineTo=function(z,ue){ft(this.Vd,z,ue)},this.moveTo=function(z,ue){var Me=this.Vd;A([z,ue])&&Me.moveTo(z,ue)},this.quadraticCurveTo=function(z,ue,Me,Ve){var Ze=this.Vd;A([z,ue,Me,Ve])&&(Ze.isEmpty()&&Ze.moveTo(z,ue),Ze.quadTo(z,ue,Me,Ve))},this.rect=function(z,ue,Me,Ve){var Ze=this.Vd;z=h.XYWHRect(z,ue,Me,Ve),A(z)&&Ze.addRect(z)}}function Ar(at,z){switch(this.Xd=null,this.xf=at,this._transform=h.Matrix.identity(),z===""&&(z="repeat"),z){case"repeat-x":this.xe=h.TileMode.Repeat,this.ye=h.TileMode.Decal;break;case"repeat-y":this.xe=h.TileMode.Decal,this.ye=h.TileMode.Repeat;break;case"repeat":this.ye=this.xe=h.TileMode.Repeat;break;case"no-repeat":this.ye=this.xe=h.TileMode.Decal;break;default:throw"invalid repetition mode "+z}this.setTransform=function(ue){ue=[ue.a,ue.c,ue.e,ue.b,ue.d,ue.f,0,0,1],A(ue)&&(this._transform=ue)},this.pe=function(){var ue=new Ar;return ue.xe=this.xe,ue.ye=this.ye,ue},this.ke=function(){this.Xd&&(this.Xd.delete(),this.Xd=null)},this.re=function(){return this.ke(),this.Xd=this.xf.makeShaderCubic(this.xe,this.ye,.3333333333333333,.3333333333333333,this._transform)}}function dn(at,z,ue,Me,Ve,Ze){this.Xd=null,this.de=[],this.Zd=[],this.addColorStop=function(ot,Pt){if(0>ot||1<ot||!isFinite(ot))throw"offset must be between 0 and 1 inclusively";Pt=M(Pt);var xr=this.Zd.indexOf(ot);if(xr!==-1)this.de[xr]=Pt;else{for(xr=0;xr<this.Zd.length&&!(this.Zd[xr]>ot);xr++);this.Zd.splice(xr,0,ot),this.de.splice(xr,0,Pt)}},this.pe=function(){var ot=new dn(at,z,ue,Me,Ve,Ze);return ot.de=this.de.slice(),ot.Zd=this.Zd.slice(),ot},this.ke=function(){this.Xd&&(this.Xd.delete(),this.Xd=null)},this.re=function(ot){var Pt=[at,z,Me,Ve];h.Matrix.mapPoints(ot,Pt);var xr=Pt[0],In=Pt[1],li=Pt[2];Pt=Pt[3];var Va=(Math.abs(ot[0])+Math.abs(ot[4]))/2;return ot=ue*Va,Va*=Ze,this.ke(),this.Xd=h.Shader.MakeTwoPointConicalGradient([xr,In],ot,[li,Pt],Va,this.de,this.Zd,h.TileMode.Clamp)}}h._testing={};var Vs={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),lightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};h._testing.parseColor=M,h._testing.colorToString=S;var Ws=/(italic|oblique|normal|)\s*(small-caps|normal|)\s*(bold|bolder|lighter|[1-9]00|normal|)\s*([\d\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)/,fn={"Noto Mono":{"*":null},monospace:{"*":null}};h._testing.parseFontString=Y,h.MakeCanvas=function(at,z){return(at=h.MakeSurface(at,z))?new Ce(at):null},h.ImageData=function(){if(arguments.length===2){var at=arguments[0],z=arguments[1];return new Je(new Uint8ClampedArray(4*at*z),at,z)}if(arguments.length===3){var ue=arguments[0];if(ue.prototype.constructor!==Uint8ClampedArray)throw"bytes must be given as a Uint8ClampedArray";if(at=arguments[1],z=arguments[2],ue%4)throw"bytes must be given in a multiple of 4";if(ue%at)throw"bytes must divide evenly by width";if(z&&z!==ue/(4*at))throw"invalid height given";return new Je(ue,at,ue/(4*at))}throw"invalid number of arguments - takes 2 or 3, saw "+arguments.length}}()}(n);var l={},u;for(u in n)n.hasOwnProperty(u)&&(l[u]=n[u]);var d="./this.program";function f(h,m){throw m}var g=!1,x=!1,E=!1,P=!1;g=typeof window=="object",x=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",P=!g&&!E&&!x;var b="",R,D,C,I,H;E?(b=x?gc.dirname(b)+"/":__dirname+"/",R=function(h,m){return I||(I=gc),H||(H=gc),h=H.normalize(h),I.readFileSync(h,m?null:"utf8")},C=function(h){return h=R(h,!0),h.buffer||(h=new Uint8Array(h)),he(h.buffer),h},1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(h){if(!(h instanceof Qg))throw h}),process.on("unhandledRejection",Xe),f=function(h){process.exit(h)},n.inspect=function(){return"[Emscripten Module object]"}):P?(typeof read<"u"&&(R=function(h){return read(h)}),C=function(h){return typeof readbuffer=="function"?new Uint8Array(readbuffer(h)):(h=read(h,"binary"),he(typeof h=="object"),h)},typeof quit=="function"&&(f=function(h){quit(h)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(g||x)&&(x?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),i&&(b=i),b.indexOf("blob:")!==0?b=b.substr(0,b.lastIndexOf("/")+1):b="",R=function(h){var m=new XMLHttpRequest;return m.open("GET",h,!1),m.send(null),m.responseText},x&&(C=function(h){var m=new XMLHttpRequest;return m.open("GET",h,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),D=function(h,m,v){var k=new XMLHttpRequest;k.open("GET",h,!0),k.responseType="arraybuffer",k.onload=function(){k.status==200||k.status==0&&k.response?m(k.response):v()},k.onerror=v,k.send(null)});var N=n.print||console.log.bind(console),V=n.printErr||console.warn.bind(console);for(u in l)l.hasOwnProperty(u)&&(n[u]=l[u]);l=null,n.thisProgram&&(d=n.thisProgram),n.quit&&(f=n.quit);var O=0,W;n.wasmBinary&&(W=n.wasmBinary);var q=n.noExitRuntime||!0;typeof WebAssembly!="object"&&Xe("no native wasm support detected");var re,fe=!1;function he(h,m){h||Xe("Assertion failed: "+m)}var Oe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function He(h,m,v){var k=m+v;for(v=m;h[v]&&!(v>=k);)++v;if(16<v-m&&h.subarray&&Oe)return Oe.decode(h.subarray(m,v));for(k="";m<v;){var L=h[m++];if(L&128){var X=h[m++]&63;if((L&224)==192)k+=String.fromCharCode((L&31)<<6|X);else{var ve=h[m++]&63;L=(L&240)==224?(L&15)<<12|X<<6|ve:(L&7)<<18|X<<12|ve<<6|h[m++]&63,65536>L?k+=String.fromCharCode(L):(L-=65536,k+=String.fromCharCode(55296|L>>10,56320|L&1023))}}else k+=String.fromCharCode(L)}return k}function ut(h,m){return h?He(de,h,m):""}function qe(h,m,v,k){if(!(0<k))return 0;var L=v;k=v+k-1;for(var X=0;X<h.length;++X){var ve=h.charCodeAt(X);if(55296<=ve&&57343>=ve){var be=h.charCodeAt(++X);ve=65536+((ve&1023)<<10)|be&1023}if(127>=ve){if(v>=k)break;m[v++]=ve}else{if(2047>=ve){if(v+1>=k)break;m[v++]=192|ve>>6}else{if(65535>=ve){if(v+2>=k)break;m[v++]=224|ve>>12}else{if(v+3>=k)break;m[v++]=240|ve>>18,m[v++]=128|ve>>12&63}m[v++]=128|ve>>6&63}m[v++]=128|ve&63}}return m[v]=0,v-L}function Be(h){for(var m=0,v=0;v<h.length;++v){var k=h.charCodeAt(v);55296<=k&&57343>=k&&(k=65536+((k&1023)<<10)|h.charCodeAt(++v)&1023),127>=k?++m:m=2047>=k?m+2:65535>=k?m+3:m+4}return m}var nt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function dt(h,m){for(var v=h>>1,k=v+m/2;!(v>=k)&&ze[v];)++v;if(v<<=1,32<v-h&&nt)return nt.decode(de.subarray(h,v));for(v="",k=0;!(k>=m/2);++k){var L=Pe[h+2*k>>1];if(L==0)break;v+=String.fromCharCode(L)}return v}function rt(h,m,v){if(v===void 0&&(v=2147483647),2>v)return 0;v-=2;var k=m;v=v<2*h.length?v/2:h.length;for(var L=0;L<v;++L)Pe[m>>1]=h.charCodeAt(L),m+=2;return Pe[m>>1]=0,m-k}function bt(h){return 2*h.length}function Z(h,m){for(var v=0,k="";!(v>=m/4);){var L=J[h+4*v>>2];if(L==0)break;++v,65536<=L?(L-=65536,k+=String.fromCharCode(55296|L>>10,56320|L&1023)):k+=String.fromCharCode(L)}return k}function ne(h,m,v){if(v===void 0&&(v=2147483647),4>v)return 0;var k=m;v=k+v-4;for(var L=0;L<h.length;++L){var X=h.charCodeAt(L);if(55296<=X&&57343>=X){var ve=h.charCodeAt(++L);X=65536+((X&1023)<<10)|ve&1023}if(J[m>>2]=X,m+=4,m+4>v)break}return J[m>>2]=0,m-k}function se(h){for(var m=0,v=0;v<h.length;++v){var k=h.charCodeAt(v);55296<=k&&57343>=k&&++v,m+=4}return m}var Ee,Se,de,Pe,ze,J,Le,F,U;function j(){var h=re.buffer;Ee=h,n.HEAP8=Se=new Int8Array(h),n.HEAP16=Pe=new Int16Array(h),n.HEAP32=J=new Int32Array(h),n.HEAPU8=de=new Uint8Array(h),n.HEAPU16=ze=new Uint16Array(h),n.HEAPU32=Le=new Uint32Array(h),n.HEAPF32=F=new Float32Array(h),n.HEAPF64=U=new Float64Array(h)}var ee,ce=[],ye=[],oe=[];function ae(){var h=n.preRun.shift();ce.unshift(h)}var we=0,Re=null;n.preloadedImages={},n.preloadedAudios={};function Xe(h){throw n.onAbort&&n.onAbort(h),V(h),fe=!0,h=new WebAssembly.RuntimeError("abort("+h+"). Build with -s ASSERTIONS=1 for more info."),a(h),h}function We(){return Qe.startsWith("data:application/octet-stream;base64,")}var Qe="canvaskit.wasm";if(!We()){var $e=Qe;Qe=n.locateFile?n.locateFile($e,b):b+$e}function tt(){var h=Qe;try{if(h==Qe&&W)return new Uint8Array(W);if(C)return C(h);throw"both async and sync fetching of the wasm failed"}catch(m){Xe(m)}}function _t(){if(!W&&(g||x)){if(typeof fetch=="function"&&!Qe.startsWith("file://"))return fetch(Qe,{credentials:"same-origin"}).then(function(h){if(!h.ok)throw"failed to load wasm binary file at '"+Qe+"'";return h.arrayBuffer()}).catch(function(){return tt()});if(D)return new Promise(function(h,m){D(Qe,function(v){h(new Uint8Array(v))},m)})}return Promise.resolve().then(function(){return tt()})}function it(h){for(;0<h.length;){var m=h.shift();if(typeof m=="function")m(n);else{var v=m.Ag;typeof v=="number"?m.cf===void 0?ee.get(v)():ee.get(v)(m.cf):v(m.cf===void 0?null:m.cf)}}}function St(h){this.Qd=h-16,this.ig=function(m){J[this.Qd+8>>2]=m},this.fg=function(m){J[this.Qd+0>>2]=m},this.gg=function(){J[this.Qd+4>>2]=0},this.eg=function(){Se[this.Qd+12>>0]=0},this.hg=function(){Se[this.Qd+13>>0]=0},this.Tf=function(m,v){this.ig(m),this.fg(v),this.gg(),this.eg(),this.hg()}}var Ot={},Rt=[null,[],[]],Mt={},Ie={};function gt(h){for(;h.length;){var m=h.pop();h.pop()(m)}}function mt(h){return this.fromWireType(Le[h>>2])}var Et={},zt={},ai={};function Er(h){if(h===void 0)return"_unknown";h=h.replace(/[^a-zA-Z0-9_]/g,"$");var m=h.charCodeAt(0);return 48<=m&&57>=m?"_"+h:h}function mr(h,m){return h=Er(h),new Function("body","return function "+h+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(m)}function xi(h){var m=Error,v=mr(h,function(k){this.name=h,this.message=k,k=Error(k).stack,k!==void 0&&(this.stack=this.toString()+`
`+k.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},v}var _s=void 0;function un(h){throw new _s(h)}function Mr(h,m,v){function k(be){be=v(be),be.length!==h.length&&un("Mismatched type converter count");for(var Fe=0;Fe<h.length;++Fe)ji(h[Fe],be[Fe])}h.forEach(function(be){ai[be]=m});var L=Array(m.length),X=[],ve=0;m.forEach(function(be,Fe){zt.hasOwnProperty(be)?L[Fe]=zt[be]:(X.push(be),Et.hasOwnProperty(be)||(Et[be]=[]),Et[be].push(function(){L[Fe]=zt[be],++ve,ve===X.length&&k(L)}))}),X.length===0&&k(L)}function Di(h){switch(h){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+h)}}var Jn=void 0;function fr(h){for(var m="";de[h];)m+=Jn[de[h++]];return m}var uo=void 0;function Yt(h){throw new uo(h)}function ji(h,m,v){if(v=v||{},!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");var k=m.name;if(h||Yt('type "'+k+'" must have a positive integer typeid pointer'),zt.hasOwnProperty(h)){if(v.Sf)return;Yt("Cannot register type '"+k+"' twice")}zt[h]=m,delete ai[h],Et.hasOwnProperty(h)&&(m=Et[h],delete Et[h],m.forEach(function(L){L()}))}function te(h){Yt(h.Kd.Wd.Rd.name+" instance already deleted")}var Uo=!1;function zu(){}function Tl(h){--h.count.value,h.count.value===0&&(h.ce?h.fe.je(h.ce):h.Wd.Rd.je(h.Qd))}function Go(h){return typeof FinalizationGroup>"u"?(Go=function(m){return m},h):(Uo=new FinalizationGroup(function(m){for(var v=m.next();!v.done;v=m.next())v=v.value,v.Qd?Tl(v):console.warn("object already deleted: "+v.Qd)}),Go=function(m){return Uo.register(m,m.Kd,m.Kd),m},zu=function(m){Uo.unregister(m.Kd)},Go(h))}var co=void 0,Ut=[];function cn(){for(;Ut.length;){var h=Ut.pop();h.Kd.Ce=!1,h.delete()}}function Vi(){}var Pl={};function Ho(h,m,v){if(h[m].Yd===void 0){var k=h[m];h[m]=function(){return h[m].Yd.hasOwnProperty(arguments.length)||Yt("Function '"+v+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+h[m].Yd+")!"),h[m].Yd[arguments.length].apply(this,arguments)},h[m].Yd=[],h[m].Yd[k.Ae]=k}}function Sr(h,m,v){n.hasOwnProperty(h)?((v===void 0||n[h].Yd!==void 0&&n[h].Yd[v]!==void 0)&&Yt("Cannot register public name '"+h+"' twice"),Ho(n,h,h),n.hasOwnProperty(v)&&Yt("Cannot register multiple overloads of a function with the same number of arguments ("+v+")!"),n[h].Yd[v]=m):(n[h]=m,v!==void 0&&(n[h].Cg=v))}function Zn(h,m,v,k,L,X,ve,be){this.name=h,this.constructor=m,this.De=v,this.je=k,this.he=L,this.Lf=X,this.Me=ve,this.Ff=be,this.bg=[]}function Rl(h,m,v){for(;m!==v;)m.Me||Yt("Expected null or instance of "+v.name+", got an instance of "+m.name),h=m.Me(h),m=m.he;return h}function ju(h,m){return m===null?(this.ef&&Yt("null is not a valid "+this.name),0):(m.Kd||Yt('Cannot pass "'+Xr(m)+'" as a '+this.name),m.Kd.Qd||Yt("Cannot pass deleted object as a pointer of type "+this.name),Rl(m.Kd.Qd,m.Kd.Wd.Rd,this.Rd))}function Mh(h,m){if(m===null){if(this.ef&&Yt("null is not a valid "+this.name),this.Re){var v=this.ff();return h!==null&&h.push(this.je,v),v}return 0}if(m.Kd||Yt('Cannot pass "'+Xr(m)+'" as a '+this.name),m.Kd.Qd||Yt("Cannot pass deleted object as a pointer of type "+this.name),!this.Qe&&m.Kd.Wd.Qe&&Yt("Cannot convert argument of type "+(m.Kd.fe?m.Kd.fe.name:m.Kd.Wd.name)+" to parameter type "+this.name),v=Rl(m.Kd.Qd,m.Kd.Wd.Rd,this.Rd),this.Re)switch(m.Kd.ce===void 0&&Yt("Passing raw pointer to smart pointer is illegal"),this.mg){case 0:m.Kd.fe===this?v=m.Kd.ce:Yt("Cannot convert argument of type "+(m.Kd.fe?m.Kd.fe.name:m.Kd.Wd.name)+" to parameter type "+this.name);break;case 1:v=m.Kd.ce;break;case 2:if(m.Kd.fe===this)v=m.Kd.ce;else{var k=m.clone();v=this.cg(v,Wi(function(){k.delete()})),h!==null&&h.push(this.je,v)}break;default:Yt("Unsupporting sharing policy")}return v}function Vu(h,m){return m===null?(this.ef&&Yt("null is not a valid "+this.name),0):(m.Kd||Yt('Cannot pass "'+Xr(m)+'" as a '+this.name),m.Kd.Qd||Yt("Cannot pass deleted object as a pointer of type "+this.name),m.Kd.Wd.Qe&&Yt("Cannot convert argument of type "+m.Kd.Wd.name+" to parameter type "+this.name),Rl(m.Kd.Qd,m.Kd.Wd.Rd,this.Rd))}function Wu(h,m,v){return m===v?h:v.he===void 0?null:(h=Wu(h,m,v.he),h===null?null:v.Ff(h))}var ps={};function Dl(h,m){for(m===void 0&&Yt("ptr should not be undefined");h.he;)m=h.Me(m),h=h.he;return ps[m]}function qt(h,m){return m.Wd&&m.Qd||un("makeClassHandle requires ptr and ptrType"),!!m.fe!=!!m.ce&&un("Both smartPtrType and smartPtr must be specified"),m.count={value:1},Go(Object.create(h,{Kd:{value:m}}))}function ri(h,m,v,k,L,X,ve,be,Fe,Ne,ct){this.name=h,this.Rd=m,this.ef=v,this.Qe=k,this.Re=L,this.ag=X,this.mg=ve,this.sf=be,this.ff=Fe,this.cg=Ne,this.je=ct,L||m.he!==void 0?this.toWireType=Mh:(this.toWireType=k?ju:Vu,this.ee=null)}function zo(h,m,v){n.hasOwnProperty(h)||un("Replacing nonexistant public symbol"),n[h].Yd!==void 0&&v!==void 0?n[h].Yd[v]=m:(n[h]=m,n[h].Ae=v)}function jt(h,m){var v=[];return function(){v.length=arguments.length;for(var k=0;k<arguments.length;k++)v[k]=arguments[k];return h.includes("j")?(k=n["dynCall_"+h],k=v&&v.length?k.apply(null,[m].concat(v)):k.call(null,m)):k=ee.get(m).apply(null,v),k}}function Ci(h,m){h=fr(h);var v=h.includes("j")?jt(h,m):ee.get(m);return typeof v!="function"&&Yt("unknown function pointer with signature "+h+": "+m),v}var Vf=void 0;function B(h){h=Yg(h);var m=fr(h);return rs(h),m}function yi(h,m){function v(X){L[X]||zt[X]||(ai[X]?ai[X].forEach(v):(k.push(X),L[X]=!0))}var k=[],L={};throw m.forEach(v),new Vf(h+": "+k.map(B).join([", "]))}function Gg(h){var m=Function;if(!(m instanceof Function))throw new TypeError("new_ called with constructor type "+typeof m+" which is not a function");var v=mr(m.name||"unknownFunctionName",function(){});return v.prototype=m.prototype,v=new v,h=m.apply(v,h),h instanceof Object?h:v}function Wf(h,m,v,k,L){var X=m.length;2>X&&Yt("argTypes array size mismatch! Must at least get return value and 'this' types!");var ve=m[1]!==null&&v!==null,be=!1;for(v=1;v<m.length;++v)if(m[v]!==null&&m[v].ee===void 0){be=!0;break}var Fe=m[0].name!=="void",Ne="",ct="";for(v=0;v<X-2;++v)Ne+=(v!==0?", ":"")+"arg"+v,ct+=(v!==0?", ":"")+"arg"+v+"Wired";h="return function "+Er(h)+"("+Ne+`) {
if (arguments.length !== `+(X-2)+`) {
throwBindingError('function `+h+" called with ' + arguments.length + ' arguments, expected "+(X-2)+` args!');
}
`,be&&(h+=`var destructors = [];
`);var kt=be?"destructors":"null";for(Ne="throwBindingError invoker fn runDestructors retType classParam".split(" "),k=[Yt,k,L,gt,m[0],m[1]],ve&&(h+="var thisWired = classParam.toWireType("+kt+`, this);
`),v=0;v<X-2;++v)h+="var arg"+v+"Wired = argType"+v+".toWireType("+kt+", arg"+v+"); // "+m[v+2].name+`
`,Ne.push("argType"+v),k.push(m[v+2]);if(ve&&(ct="thisWired"+(0<ct.length?", ":"")+ct),h+=(Fe?"var rv = ":"")+"invoker(fn"+(0<ct.length?", ":"")+ct+`);
`,be)h+=`runDestructors(destructors);
`;else for(v=ve?1:2;v<m.length;++v)X=v===1?"thisWired":"arg"+(v-2)+"Wired",m[v].ee!==null&&(h+=X+"_dtor("+X+"); // "+m[v].name+`
`,Ne.push(X+"_dtor"),k.push(m[v].ee));return Fe&&(h+=`var ret = retType.fromWireType(rv);
return ret;
`),Ne.push(h+`}
`),Gg(Ne).apply(null,k)}function Bh(h,m){for(var v=[],k=0;k<h;k++)v.push(J[(m>>2)+k]);return v}var $f=[],On=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Kf(h){4<h&&--On[h].gf===0&&(On[h]=void 0,$f.push(h))}function Wi(h){switch(h){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var m=$f.length?$f.pop():On.length;return On[m]={gf:1,value:h},m}}function Gv(h,m,v){switch(m){case 0:return function(k){return this.fromWireType((v?Se:de)[k])};case 1:return function(k){return this.fromWireType((v?Pe:ze)[k>>1])};case 2:return function(k){return this.fromWireType((v?J:Le)[k>>2])};default:throw new TypeError("Unknown integer type: "+h)}}function Cl(h,m){var v=zt[h];return v===void 0&&Yt(m+" has unknown type "+B(h)),v}function Xr(h){if(h===null)return"null";var m=typeof h;return m==="object"||m==="array"||m==="function"?h.toString():""+h}function Ol(h,m){switch(m){case 2:return function(v){return this.fromWireType(F[v>>2])};case 3:return function(v){return this.fromWireType(U[v>>3])};default:throw new TypeError("Unknown float type: "+h)}}function Ba(h,m,v){switch(m){case 0:return v?function(k){return Se[k]}:function(k){return de[k]};case 1:return v?function(k){return Pe[k>>1]}:function(k){return ze[k>>1]};case 2:return v?function(k){return J[k>>2]}:function(k){return Le[k>>2]};default:throw new TypeError("Unknown integer type: "+h)}}function Nn(h){return h||Yt("Cannot use deleted val. handle = "+h),On[h].value}var Hv={};function Lh(h){var m=Hv[h];return m===void 0?fr(h):m}var Nl=[];function $u(){return typeof globalThis=="object"?globalThis:Function("return this")()}function Xf(h){var m=Nl.length;return Nl.push(h),m}function Il(h,m){for(var v=Array(h),k=0;k<h;++k)v[k]=Cl(J[(m>>2)+k],"parameter "+k);return v}var ir={},Ku;E?Ku=function(){var h=process.hrtime();return 1e3*h[0]+h[1]/1e6}:typeof dateNow<"u"?Ku=dateNow:Ku=function(){return performance.now()};function Uh(h){var m=h.getExtension("ANGLE_instanced_arrays");m&&(h.vertexAttribDivisor=function(v,k){m.vertexAttribDivisorANGLE(v,k)},h.drawArraysInstanced=function(v,k,L,X){m.drawArraysInstancedANGLE(v,k,L,X)},h.drawElementsInstanced=function(v,k,L,X,ve){m.drawElementsInstancedANGLE(v,k,L,X,ve)})}function jo(h){var m=h.getExtension("OES_vertex_array_object");m&&(h.createVertexArray=function(){return m.createVertexArrayOES()},h.deleteVertexArray=function(v){m.deleteVertexArrayOES(v)},h.bindVertexArray=function(v){m.bindVertexArrayOES(v)},h.isVertexArray=function(v){return m.isVertexArrayOES(v)})}function js(h){var m=h.getExtension("WEBGL_draw_buffers");m&&(h.drawBuffers=function(v,k){m.drawBuffersWEBGL(v,k)})}var Hg=1,Gh=[],gs=[],Fl=[],La=[],es=[],ms=[],ho=[],hn=[],Ml=[],Ua=[],zg={},Bl={},Ll=4;function wr(h){Hh||(Hh=h)}function Xu(h){for(var m=Hg++,v=h.length;v<m;v++)h[v]=null;return m}function zv(h,m){h.qf||(h.qf=h.getContext,h.getContext=function(k,L){return L=h.qf(k,L),k=="webgl"==L instanceof WebGLRenderingContext?L:null});var v=1<m.majorVersion?h.getContext("webgl2",m):h.getContext("webgl",m);return v?Vo(v,m):0}function Vo(h,m){var v=Xu(hn),k={Rf:v,attributes:m,version:m.majorVersion,le:h};return h.canvas&&(h.canvas.uf=k),hn[v]=k,(typeof m.Gf>"u"||m.Gf)&&qf(k),v}function Yf(h){return nr=hn[h],n.zg=ke=nr&&nr.le,!(h&&!ke)}function qf(h){if(h||(h=nr),!h.Uf){h.Uf=!0;var m=h.le;Uh(m),jo(m),js(m),m.mf=m.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),m.rf=m.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=h.version&&(m.nf=m.getExtension("EXT_disjoint_timer_query_webgl2")),(2>h.version||!m.nf)&&(m.nf=m.getExtension("EXT_disjoint_timer_query")),m.Bg=m.getExtension("WEBGL_multi_draw"),(m.getSupportedExtensions()||[]).forEach(function(v){v.includes("lose_context")||v.includes("debug")||m.getExtension(v)})}}var nr,Hh,Ul=[];function Ga(h,m,v,k){for(var L=0;L<h;L++){var X=ke[v](),ve=X&&Xu(k);X?(X.name=ve,k[ve]=X):wr(1282),J[m+4*L>>2]=ve}}function jv(h,m){if(m){var v=void 0;switch(h){case 36346:v=1;break;case 36344:return;case 34814:case 36345:v=0;break;case 34466:var k=ke.getParameter(34467);v=k?k.length:0;break;case 33309:if(2>nr.version){wr(1282);return}v=2*(ke.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>nr.version){wr(1280);return}v=h==33307?3:0}if(v===void 0)switch(k=ke.getParameter(h),typeof k){case"number":v=k;break;case"boolean":v=k?1:0;break;case"string":wr(1280);return;case"object":if(k===null)switch(h){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:v=0;break;default:wr(1280);return}else{if(k instanceof Float32Array||k instanceof Uint32Array||k instanceof Int32Array||k instanceof Array){for(h=0;h<k.length;++h)J[m+4*h>>2]=k[h];return}try{v=k.name|0}catch(L){wr(1280),V("GL_INVALID_ENUM in glGet0v: Unknown object returned from WebGL getParameter("+h+")! (error: "+L+")");return}}break;default:wr(1280),V("GL_INVALID_ENUM in glGet0v: Native code calling glGet0v("+h+") and it returns "+k+" of type "+typeof k+"!");return}J[m>>2]=v}else wr(1281)}function Yu(h){var m=Be(h)+1,v=Hl(m);return qe(h,de,v,m),v}function Ha(h){return h-=5120,h==0?Se:h==1?de:h==2?Pe:h==4?J:h==6?F:h==5||h==28922||h==28520||h==30779||h==30782?Le:ze}function Qf(h,m,v,k,L){h=Ha(h);var X=31-Math.clz32(h.BYTES_PER_ELEMENT),ve=Ll;return h.subarray(L>>X,L+k*(v*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[m-6402]||1)*(1<<X)+ve-1&-ve)>>X)}function cr(h){var m=ke.Df,v=m.Ye[h];return 0<=v&&(m.Ye[h]=v=ke.getUniformLocation(m,m.tf[h]+(0<v?"["+v+"]":""))),v}var Wo=[],Gl=[],jg={};function Vg(){if(!Jf){var h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},m;for(m in jg)h[m]=jg[m];var v=[];for(m in h)v.push(m+"="+h[m]);Jf=v}return Jf}var Jf;function zh(h){return h%4===0&&(h%100!==0||h%400===0)}function za(h,m){for(var v=0,k=0;k<=m;v+=h[k++]);return v}var jh=[31,29,31,30,31,30,31,31,30,31,30,31],Vh=[31,28,31,30,31,30,31,31,30,31,30,31];function ja(h,m){for(h=new Date(h.getTime());0<m;){var v=h.getMonth(),k=(zh(h.getFullYear())?jh:Vh)[v];if(m>k-h.getDate())m-=k-h.getDate()+1,h.setDate(1),11>v?h.setMonth(v+1):(h.setMonth(0),h.setFullYear(h.getFullYear()+1));else{h.setDate(h.getDate()+m);break}}return h}function Vv(h,m,v,k){function L(Ge,Tt,sr){for(Ge=typeof Ge=="number"?Ge.toString():Ge||"";Ge.length<Tt;)Ge=sr[0]+Ge;return Ge}function X(Ge,Tt){return L(Ge,Tt,"0")}function ve(Ge,Tt){function sr(_r){return 0>_r?-1:0<_r?1:0}var Or;return(Or=sr(Ge.getFullYear()-Tt.getFullYear()))===0&&(Or=sr(Ge.getMonth()-Tt.getMonth()))===0&&(Or=sr(Ge.getDate()-Tt.getDate())),Or}function be(Ge){switch(Ge.getDay()){case 0:return new Date(Ge.getFullYear()-1,11,29);case 1:return Ge;case 2:return new Date(Ge.getFullYear(),0,3);case 3:return new Date(Ge.getFullYear(),0,2);case 4:return new Date(Ge.getFullYear(),0,1);case 5:return new Date(Ge.getFullYear()-1,11,31);case 6:return new Date(Ge.getFullYear()-1,11,30)}}function Fe(Ge){Ge=ja(new Date(Ge.$d+1900,0,1),Ge.Xe);var Tt=new Date(Ge.getFullYear()+1,0,4),sr=be(new Date(Ge.getFullYear(),0,4));return Tt=be(Tt),0>=ve(sr,Ge)?0>=ve(Tt,Ge)?Ge.getFullYear()+1:Ge.getFullYear():Ge.getFullYear()-1}var Ne=J[k+40>>2];k={ug:J[k>>2],tg:J[k+4>>2],Ve:J[k+8>>2],Le:J[k+12>>2],Ee:J[k+16>>2],$d:J[k+20>>2],We:J[k+24>>2],Xe:J[k+28>>2],Fg:J[k+32>>2],sg:J[k+36>>2],vg:Ne?ut(Ne):""},v=ut(v),Ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ct in Ne)v=v.replace(new RegExp(ct,"g"),Ne[ct]);var kt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Nt="January February March April May June July August September October November December".split(" ");Ne={"%a":function(Ge){return kt[Ge.We].substring(0,3)},"%A":function(Ge){return kt[Ge.We]},"%b":function(Ge){return Nt[Ge.Ee].substring(0,3)},"%B":function(Ge){return Nt[Ge.Ee]},"%C":function(Ge){return X((Ge.$d+1900)/100|0,2)},"%d":function(Ge){return X(Ge.Le,2)},"%e":function(Ge){return L(Ge.Le,2," ")},"%g":function(Ge){return Fe(Ge).toString().substring(2)},"%G":function(Ge){return Fe(Ge)},"%H":function(Ge){return X(Ge.Ve,2)},"%I":function(Ge){return Ge=Ge.Ve,Ge==0?Ge=12:12<Ge&&(Ge-=12),X(Ge,2)},"%j":function(Ge){return X(Ge.Le+za(zh(Ge.$d+1900)?jh:Vh,Ge.Ee-1),3)},"%m":function(Ge){return X(Ge.Ee+1,2)},"%M":function(Ge){return X(Ge.tg,2)},"%n":function(){return`
`},"%p":function(Ge){return 0<=Ge.Ve&&12>Ge.Ve?"AM":"PM"},"%S":function(Ge){return X(Ge.ug,2)},"%t":function(){return"	"},"%u":function(Ge){return Ge.We||7},"%U":function(Ge){var Tt=new Date(Ge.$d+1900,0,1),sr=Tt.getDay()===0?Tt:ja(Tt,7-Tt.getDay());return Ge=new Date(Ge.$d+1900,Ge.Ee,Ge.Le),0>ve(sr,Ge)?X(Math.ceil((31-sr.getDate()+(za(zh(Ge.getFullYear())?jh:Vh,Ge.getMonth()-1)-31)+Ge.getDate())/7),2):ve(sr,Tt)===0?"01":"00"},"%V":function(Ge){var Tt=new Date(Ge.$d+1901,0,4),sr=be(new Date(Ge.$d+1900,0,4));Tt=be(Tt);var Or=ja(new Date(Ge.$d+1900,0,1),Ge.Xe);return 0>ve(Or,sr)?"53":0>=ve(Tt,Or)?"01":X(Math.ceil((sr.getFullYear()<Ge.$d+1900?Ge.Xe+32-sr.getDate():Ge.Xe+1-sr.getDate())/7),2)},"%w":function(Ge){return Ge.We},"%W":function(Ge){var Tt=new Date(Ge.$d,0,1),sr=Tt.getDay()===1?Tt:ja(Tt,Tt.getDay()===0?1:7-Tt.getDay()+1);return Ge=new Date(Ge.$d+1900,Ge.Ee,Ge.Le),0>ve(sr,Ge)?X(Math.ceil((31-sr.getDate()+(za(zh(Ge.getFullYear())?jh:Vh,Ge.getMonth()-1)-31)+Ge.getDate())/7),2):ve(sr,Tt)===0?"01":"00"},"%y":function(Ge){return(Ge.$d+1900).toString().substring(2)},"%Y":function(Ge){return Ge.$d+1900},"%z":function(Ge){Ge=Ge.sg;var Tt=0<=Ge;return Ge=Math.abs(Ge)/60,(Tt?"+":"-")+String("0000"+(Ge/60*100+Ge%60)).slice(-4)},"%Z":function(Ge){return Ge.vg},"%%":function(){return"%"}};for(ct in Ne)v.includes(ct)&&(v=v.replace(new RegExp(ct,"g"),Ne[ct](k)));return ct=qu(v),ct.length>m?0:(Se.set(ct,h),ct.length-1)}_s=n.InternalError=xi("InternalError");for(var Wg=Array(256),ts=0;256>ts;++ts)Wg[ts]=String.fromCharCode(ts);Jn=Wg,uo=n.BindingError=xi("BindingError"),Vi.prototype.isAliasOf=function(h){if(!(this instanceof Vi&&h instanceof Vi))return!1;var m=this.Kd.Wd.Rd,v=this.Kd.Qd,k=h.Kd.Wd.Rd;for(h=h.Kd.Qd;m.he;)v=m.Me(v),m=m.he;for(;k.he;)h=k.Me(h),k=k.he;return m===k&&v===h},Vi.prototype.clone=function(){if(this.Kd.Qd||te(this),this.Kd.Ke)return this.Kd.count.value+=1,this;var h=Go,m=Object,v=m.create,k=Object.getPrototypeOf(this),L=this.Kd;return h=h(v.call(m,k,{Kd:{value:{count:L.count,Ce:L.Ce,Ke:L.Ke,Qd:L.Qd,Wd:L.Wd,ce:L.ce,fe:L.fe}}})),h.Kd.count.value+=1,h.Kd.Ce=!1,h},Vi.prototype.delete=function(){this.Kd.Qd||te(this),this.Kd.Ce&&!this.Kd.Ke&&Yt("Object already scheduled for deletion"),zu(this),Tl(this.Kd),this.Kd.Ke||(this.Kd.ce=void 0,this.Kd.Qd=void 0)},Vi.prototype.isDeleted=function(){return!this.Kd.Qd},Vi.prototype.deleteLater=function(){return this.Kd.Qd||te(this),this.Kd.Ce&&!this.Kd.Ke&&Yt("Object already scheduled for deletion"),Ut.push(this),Ut.length===1&&co&&co(cn),this.Kd.Ce=!0,this},ri.prototype.Mf=function(h){return this.sf&&(h=this.sf(h)),h},ri.prototype.lf=function(h){this.je&&this.je(h)},ri.prototype.argPackAdvance=8,ri.prototype.readValueFromPointer=mt,ri.prototype.deleteObject=function(h){h!==null&&h.delete()},ri.prototype.fromWireType=function(h){function m(){return this.Re?qt(this.Rd.De,{Wd:this.ag,Qd:v,fe:this,ce:h}):qt(this.Rd.De,{Wd:this,Qd:h})}var v=this.Mf(h);if(!v)return this.lf(h),null;var k=Dl(this.Rd,v);if(k!==void 0)return k.Kd.count.value===0?(k.Kd.Qd=v,k.Kd.ce=h,k.clone()):(k=k.clone(),this.lf(h),k);if(k=this.Rd.Lf(v),k=Pl[k],!k)return m.call(this);k=this.Qe?k.Bf:k.pointerType;var L=Wu(v,this.Rd,k.Rd);return L===null?m.call(this):this.Re?qt(k.Rd.De,{Wd:k,Qd:L,fe:this,ce:h}):qt(k.Rd.De,{Wd:k,Qd:L})},n.getInheritedInstanceCount=function(){return Object.keys(ps).length},n.getLiveInheritedInstances=function(){var h=[],m;for(m in ps)ps.hasOwnProperty(m)&&h.push(ps[m]);return h},n.flushPendingDeletes=cn,n.setDelayFunction=function(h){co=h,Ut.length&&co&&co(cn)},Vf=n.UnboundTypeError=xi("UnboundTypeError"),n.count_emval_handles=function(){for(var h=0,m=5;m<On.length;++m)On[m]!==void 0&&++h;return h},n.get_first_emval=function(){for(var h=5;h<On.length;++h)if(On[h]!==void 0)return On[h];return null};for(var ke,Qr=0;32>Qr;++Qr)Ul.push(Array(Qr));var $g=new Float32Array(288);for(Qr=0;288>Qr;++Qr)Wo[Qr]=$g.subarray(0,Qr+1);var Kg=new Int32Array(288);for(Qr=0;288>Qr;++Qr)Gl[Qr]=Kg.subarray(0,Qr+1);function qu(h){var m=Array(Be(h)+1);return qe(h,m,0,m.length),m}var Wv={Kb:function(h){return Hl(h+16)+16},Db:function(h,m,v){throw new St(h).Tf(m,v),h},N:function(){return 0},Bb:function(){},xb:function(){return 0},yb:function(h,m,v,k,L,X){return X<<=12,(k&16)!==0&&h%65536!==0?m=-28:(k&32)!==0?(h=xs(65536,m))?(Xg(h,0,m),Ot[h]={Zf:h,Yf:m,Af:!0,fd:L,Dg:v,flags:k,offset:X},m=h):m=-48:m=-52,m},zb:function(h,m){if((h|0)===-1||m===0)h=-28;else{var v=Ot[h];v&&m===v.Yf&&(Ot[h]=null,v.Af&&rs(v.Zf)),h=0}return h},Q:function(){},P:function(){},y:function(h){var m=Ie[h];delete Ie[h];var v=m.ff,k=m.je,L=m.pf,X=L.map(function(ve){return ve.Qf}).concat(L.map(function(ve){return ve.kg}));Mr([h],X,function(ve){var be={};return L.forEach(function(Fe,Ne){var ct=ve[Ne],kt=Fe.Of,Nt=Fe.Pf,Ge=ve[Ne+L.length],Tt=Fe.jg,sr=Fe.lg;be[Fe.Hf]={read:function(Or){return ct.fromWireType(kt(Nt,Or))},write:function(Or,_r){var Ii=[];Tt(sr,Or,Ge.toWireType(Ii,_r)),gt(Ii)}}}),[{name:m.name,fromWireType:function(Fe){var Ne={},ct;for(ct in be)Ne[ct]=be[ct].read(Fe);return k(Fe),Ne},toWireType:function(Fe,Ne){for(var ct in be)if(!(ct in Ne))throw new TypeError('Missing field:  "'+ct+'"');var kt=v();for(ct in be)be[ct].write(kt,Ne[ct]);return Fe!==null&&Fe.push(k,kt),kt},argPackAdvance:8,readValueFromPointer:mt,ee:k}]})},ob:function(){},Eb:function(h,m,v,k,L){var X=Di(v);m=fr(m),ji(h,{name:m,fromWireType:function(ve){return!!ve},toWireType:function(ve,be){return be?k:L},argPackAdvance:8,readValueFromPointer:function(ve){if(v===1)var be=Se;else if(v===2)be=Pe;else if(v===4)be=J;else throw new TypeError("Unknown boolean type size: "+m);return this.fromWireType(be[ve>>X])},ee:null})},m:function(h,m,v,k,L,X,ve,be,Fe,Ne,ct,kt,Nt){ct=fr(ct),X=Ci(L,X),be&&(be=Ci(ve,be)),Ne&&(Ne=Ci(Fe,Ne)),Nt=Ci(kt,Nt);var Ge=Er(ct);Sr(Ge,function(){yi("Cannot construct "+ct+" due to unbound types",[k])}),Mr([h,m,v],k?[k]:[],function(Tt){if(Tt=Tt[0],k)var sr=Tt.Rd,Or=sr.De;else Or=Vi.prototype;Tt=mr(Ge,function(){if(Object.getPrototypeOf(this)!==_r)throw new uo("Use 'new' to construct "+ct);if(Ii.me===void 0)throw new uo(ct+" has no accessible constructor");var $o=Ii.me[arguments.length];if($o===void 0)throw new uo("Tried to invoke ctor of "+ct+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ii.me).toString()+") parameters instead!");return $o.apply(this,arguments)});var _r=Object.create(Or,{constructor:{value:Tt}});Tt.prototype=_r;var Ii=new Zn(ct,Tt,_r,Nt,sr,X,be,Ne);sr=new ri(ct,Ii,!0,!1,!1),Or=new ri(ct+"*",Ii,!1,!1,!1);var Ju=new ri(ct+" const*",Ii,!1,!0,!1);return Pl[h]={pointerType:Or,Bf:Ju},zo(Ge,Tt),[sr,Or,Ju]})},f:function(h,m,v,k,L,X,ve){var be=Bh(v,k);m=fr(m),X=Ci(L,X),Mr([],[h],function(Fe){function Ne(){yi("Cannot call "+ct+" due to unbound types",be)}Fe=Fe[0];var ct=Fe.name+"."+m,kt=Fe.Rd.constructor;return kt[m]===void 0?(Ne.Ae=v-1,kt[m]=Ne):(Ho(kt,m,ct),kt[m].Yd[v-1]=Ne),Mr([],be,function(Nt){return Nt=[Nt[0],null].concat(Nt.slice(1)),Nt=Wf(ct,Nt,null,X,ve),kt[m].Yd===void 0?(Nt.Ae=v-1,kt[m]=Nt):kt[m].Yd[v-1]=Nt,[]}),[]})},v:function(h,m,v,k,L,X){he(0<m);var ve=Bh(m,v);L=Ci(k,L);var be=[X],Fe=[];Mr([],[h],function(Ne){Ne=Ne[0];var ct="constructor "+Ne.name;if(Ne.Rd.me===void 0&&(Ne.Rd.me=[]),Ne.Rd.me[m-1]!==void 0)throw new uo("Cannot register multiple constructors with identical number of parameters ("+(m-1)+") for class '"+Ne.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return Ne.Rd.me[m-1]=function(){yi("Cannot construct "+Ne.name+" due to unbound types",ve)},Mr([],ve,function(kt){return Ne.Rd.me[m-1]=function(){arguments.length!==m-1&&Yt(ct+" called with "+arguments.length+" arguments, expected "+(m-1)),Fe.length=0,be.length=m;for(var Nt=1;Nt<m;++Nt)be[Nt]=kt[Nt].toWireType(Fe,arguments[Nt-1]);return Nt=L.apply(null,be),gt(Fe),kt[0].fromWireType(Nt)},[]}),[]})},c:function(h,m,v,k,L,X,ve,be){var Fe=Bh(v,k);m=fr(m),X=Ci(L,X),Mr([],[h],function(Ne){function ct(){yi("Cannot call "+kt+" due to unbound types",Fe)}Ne=Ne[0];var kt=Ne.name+"."+m;be&&Ne.Rd.bg.push(m);var Nt=Ne.Rd.De,Ge=Nt[m];return Ge===void 0||Ge.Yd===void 0&&Ge.className!==Ne.name&&Ge.Ae===v-2?(ct.Ae=v-2,ct.className=Ne.name,Nt[m]=ct):(Ho(Nt,m,kt),Nt[m].Yd[v-2]=ct),Mr([],Fe,function(Tt){return Tt=Wf(kt,Tt,Ne,X,ve),Nt[m].Yd===void 0?(Tt.Ae=v-2,Nt[m]=Tt):Nt[m].Yd[v-2]=Tt,[]}),[]})},W:function(h,m,v){h=fr(h),Mr([],[m],function(k){return k=k[0],n[h]=k.fromWireType(v),[]})},Cb:function(h,m){m=fr(m),ji(h,{name:m,fromWireType:function(v){var k=On[v].value;return Kf(v),k},toWireType:function(v,k){return Wi(k)},argPackAdvance:8,readValueFromPointer:mt,ee:null})},k:function(h,m,v,k){function L(){}v=Di(v),m=fr(m),L.values={},ji(h,{name:m,constructor:L,fromWireType:function(X){return this.constructor.values[X]},toWireType:function(X,ve){return ve.value},argPackAdvance:8,readValueFromPointer:Gv(m,v,k),ee:null}),Sr(m,L)},j:function(h,m,v){var k=Cl(h,"enum");m=fr(m),h=k.constructor,k=Object.create(k.constructor.prototype,{value:{value:v},constructor:{value:mr(k.name+"_"+m,function(){})}}),h.values[v]=k,h[m]=k},R:function(h,m,v){v=Di(v),m=fr(m),ji(h,{name:m,fromWireType:function(k){return k},toWireType:function(k,L){if(typeof L!="number"&&typeof L!="boolean")throw new TypeError('Cannot convert "'+Xr(L)+'" to '+this.name);return L},argPackAdvance:8,readValueFromPointer:Ol(m,v),ee:null})},t:function(h,m,v,k,L,X){var ve=Bh(m,v);h=fr(h),L=Ci(k,L),Sr(h,function(){yi("Cannot call "+h+" due to unbound types",ve)},m-1),Mr([],ve,function(be){return be=[be[0],null].concat(be.slice(1)),zo(h,Wf(h,be,null,L,X),m-1),[]})},x:function(h,m,v,k,L){function X(Ne){return Ne}m=fr(m),L===-1&&(L=4294967295);var ve=Di(v);if(k===0){var be=32-8*v;X=function(Ne){return Ne<<be>>>be}}var Fe=m.includes("unsigned");ji(h,{name:m,fromWireType:X,toWireType:function(Ne,ct){if(typeof ct!="number"&&typeof ct!="boolean")throw new TypeError('Cannot convert "'+Xr(ct)+'" to '+this.name);if(ct<k||ct>L)throw new TypeError('Passing a number "'+Xr(ct)+'" from JS side to C/C++ side to an argument of type "'+m+'", which is outside the valid range ['+k+", "+L+"]!");return Fe?ct>>>0:ct|0},argPackAdvance:8,readValueFromPointer:Ba(m,ve,k!==0),ee:null})},u:function(h,m,v){function k(X){X>>=2;var ve=Le;return new L(Ee,ve[X+1],ve[X])}var L=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][m];v=fr(v),ji(h,{name:v,fromWireType:k,argPackAdvance:8,readValueFromPointer:k},{Sf:!0})},p:function(h,m,v,k,L,X,ve,be,Fe,Ne,ct,kt){v=fr(v),X=Ci(L,X),be=Ci(ve,be),Ne=Ci(Fe,Ne),kt=Ci(ct,kt),Mr([h],[m],function(Nt){return Nt=Nt[0],[new ri(v,Nt.Rd,!1,!1,!0,Nt,k,X,be,Ne,kt)]})},S:function(h,m){m=fr(m);var v=m==="std::string";ji(h,{name:m,fromWireType:function(k){var L=Le[k>>2];if(v)for(var X=k+4,ve=0;ve<=L;++ve){var be=k+4+ve;if(ve==L||de[be]==0){if(X=ut(X,be-X),Fe===void 0)var Fe=X;else Fe+=String.fromCharCode(0),Fe+=X;X=be+1}}else{for(Fe=Array(L),ve=0;ve<L;++ve)Fe[ve]=String.fromCharCode(de[k+4+ve]);Fe=Fe.join("")}return rs(k),Fe},toWireType:function(k,L){L instanceof ArrayBuffer&&(L=new Uint8Array(L));var X=typeof L=="string";X||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int8Array||Yt("Cannot pass non-string to std::string");var ve=(v&&X?function(){return Be(L)}:function(){return L.length})(),be=Hl(4+ve+1);if(Le[be>>2]=ve,v&&X)qe(L,de,be+4,ve+1);else if(X)for(X=0;X<ve;++X){var Fe=L.charCodeAt(X);255<Fe&&(rs(be),Yt("String has UTF-16 code units that do not fit in 8 bits")),de[be+4+X]=Fe}else for(X=0;X<ve;++X)de[be+4+X]=L[X];return k!==null&&k.push(rs,be),be},argPackAdvance:8,readValueFromPointer:mt,ee:function(k){rs(k)}})},H:function(h,m,v){if(v=fr(v),m===2)var k=dt,L=rt,X=bt,ve=function(){return ze},be=1;else m===4&&(k=Z,L=ne,X=se,ve=function(){return Le},be=2);ji(h,{name:v,fromWireType:function(Fe){for(var Ne=Le[Fe>>2],ct=ve(),kt,Nt=Fe+4,Ge=0;Ge<=Ne;++Ge){var Tt=Fe+4+Ge*m;(Ge==Ne||ct[Tt>>be]==0)&&(Nt=k(Nt,Tt-Nt),kt===void 0?kt=Nt:(kt+=String.fromCharCode(0),kt+=Nt),Nt=Tt+m)}return rs(Fe),kt},toWireType:function(Fe,Ne){typeof Ne!="string"&&Yt("Cannot pass non-string to C++ string type "+v);var ct=X(Ne),kt=Hl(4+ct+m);return Le[kt>>2]=ct>>be,L(Ne,kt+4,ct+m),Fe!==null&&Fe.push(rs,kt),kt},argPackAdvance:8,readValueFromPointer:mt,ee:function(Fe){rs(Fe)}})},z:function(h,m,v,k,L,X){Ie[h]={name:fr(m),ff:Ci(v,k),je:Ci(L,X),pf:[]}},h:function(h,m,v,k,L,X,ve,be,Fe,Ne){Ie[h].pf.push({Hf:fr(m),Qf:v,Of:Ci(k,L),Pf:X,kg:ve,jg:Ci(be,Fe),lg:Ne})},Fb:function(h,m){m=fr(m),ji(h,{Vf:!0,name:m,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},A:function(h,m,v){h=Nn(h),m=Cl(m,"emval::as");var k=[],L=Wi(k);return J[v>>2]=L,m.toWireType(k,h)},lb:function(h,m,v,k,L){h=Nl[h],m=Nn(m),v=Lh(v);var X=[];return J[k>>2]=Wi(X),h(m,v,X,L)},F:function(h,m,v,k){h=Nl[h],m=Nn(m),v=Lh(v),h(m,v,null,k)},D:Kf,Ab:function(h){return h===0?Wi($u()):(h=Lh(h),Wi($u()[h]))},B:function(h,m){m=Il(h,m);for(var v=m[0],k=v.name+"_$"+m.slice(1).map(function(Ne){return Ne.name}).join("_")+"$",L=["retType"],X=[v],ve="",be=0;be<h-1;++be)ve+=(be!==0?", ":"")+"arg"+be,L.push("argType"+be),X.push(m[1+be]);k="return function "+Er("methodCaller_"+k)+`(handle, name, destructors, args) {
`;var Fe=0;for(be=0;be<h-1;++be)k+="    var arg"+be+" = argType"+be+".readValueFromPointer(args"+(Fe?"+"+Fe:"")+`);
`,Fe+=m[be+1].argPackAdvance;for(k+="    var rv = handle[name]("+ve+`);
`,be=0;be<h-1;++be)m[be+1].deleteObject&&(k+="    argType"+be+".deleteObject(arg"+be+`);
`);return v.Vf||(k+=`    return retType.toWireType(destructors, rv);
`),L.push(k+`};
`),h=Gg(L).apply(null,X),Xf(h)},J:function(h,m){return h=Nn(h),m=Nn(m),Wi(h[m])},L:function(h){4<h&&(On[h].gf+=1)},rb:function(h,m,v,k){h=Nn(h);var L=ir[m];if(!L){L="";for(var X=0;X<m;++X)L+=(X!==0?", ":"")+"arg"+X;var ve="return function emval_allocator_"+m+`(constructor, argTypes, args) {
`;for(X=0;X<m;++X)ve+="var argType"+X+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+X+'], "parameter '+X+`");
var arg`+X+" = argType"+X+`.readValueFromPointer(args);
args += argType`+X+`['argPackAdvance'];
`;L=new Function("requireRegisteredType","Module","__emval_register",ve+("var obj = new constructor("+L+`);
return __emval_register(obj);
}
`))(Cl,n,Wi),ir[m]=L}return L(h,v,k)},ib:function(){return Wi([])},La:function(h){return Wi(Lh(h))},jb:function(){return Wi({})},hb:function(h){return h=Nn(h),!h},kb:function(h){gt(On[h].value),Kf(h)},w:function(h,m,v){h=Nn(h),m=Nn(m),v=Nn(v),h[m]=v},s:function(h,m){return h=Cl(h,"_emval_take_value"),h=h.readValueFromPointer(m),Wi(h)},d:function(){Xe()},qb:function(h,m){if(h===0)h=Date.now();else if(h===1||h===4)h=Ku();else return J[Qu()>>2]=28,-1;return J[m>>2]=h/1e3|0,J[m+4>>2]=h%1e3*1e6|0,0},Zc:function(h){ke.activeTexture(h)},_c:function(h,m){ke.attachShader(gs[h],ms[m])},Z:function(h,m,v){ke.bindAttribLocation(gs[h],m,ut(v))},_:function(h,m){h==35051?ke.df=m:h==35052&&(ke.Be=m),ke.bindBuffer(h,Gh[m])},Y:function(h,m){ke.bindFramebuffer(h,Fl[m])},bc:function(h,m){ke.bindRenderbuffer(h,La[m])},Pb:function(h,m){ke.bindSampler(h,Ml[m])},$:function(h,m){ke.bindTexture(h,es[m])},vc:function(h){ke.bindVertexArray(ho[h])},yc:function(h){ke.bindVertexArray(ho[h])},aa:function(h,m,v,k){ke.blendColor(h,m,v,k)},ba:function(h){ke.blendEquation(h)},ca:function(h,m){ke.blendFunc(h,m)},Wb:function(h,m,v,k,L,X,ve,be,Fe,Ne){ke.blitFramebuffer(h,m,v,k,L,X,ve,be,Fe,Ne)},da:function(h,m,v,k){2<=nr.version?v?ke.bufferData(h,de,k,v,m):ke.bufferData(h,m,k):ke.bufferData(h,v?de.subarray(v,v+m):m,k)},ea:function(h,m,v,k){2<=nr.version?ke.bufferSubData(h,m,de,k,v):ke.bufferSubData(h,m,de.subarray(k,k+v))},cc:function(h){return ke.checkFramebufferStatus(h)},K:function(h){ke.clear(h)},X:function(h,m,v,k){ke.clearColor(h,m,v,k)},O:function(h){ke.clearStencil(h)},fb:function(h,m,v,k){return ke.clientWaitSync(Ua[h],m,(v>>>0)+4294967296*k)},fa:function(h,m,v,k){ke.colorMask(!!h,!!m,!!v,!!k)},ga:function(h){ke.compileShader(ms[h])},ha:function(h,m,v,k,L,X,ve,be){2<=nr.version?ke.Be?ke.compressedTexImage2D(h,m,v,k,L,X,ve,be):ke.compressedTexImage2D(h,m,v,k,L,X,de,be,ve):ke.compressedTexImage2D(h,m,v,k,L,X,be?de.subarray(be,be+ve):null)},ia:function(h,m,v,k,L,X,ve,be,Fe){2<=nr.version?ke.Be?ke.compressedTexSubImage2D(h,m,v,k,L,X,ve,be,Fe):ke.compressedTexSubImage2D(h,m,v,k,L,X,ve,de,Fe,be):ke.compressedTexSubImage2D(h,m,v,k,L,X,ve,Fe?de.subarray(Fe,Fe+be):null)},ja:function(h,m,v,k,L,X,ve,be){ke.copyTexSubImage2D(h,m,v,k,L,X,ve,be)},ka:function(){var h=Xu(gs),m=ke.createProgram();return m.name=h,m.Ue=m.Se=m.Te=0,m.hf=1,gs[h]=m,h},la:function(h){var m=Xu(ms);return ms[m]=ke.createShader(h),m},ma:function(h){ke.cullFace(h)},na:function(h,m){for(var v=0;v<h;v++){var k=J[m+4*v>>2],L=Gh[k];L&&(ke.deleteBuffer(L),L.name=0,Gh[k]=null,k==ke.df&&(ke.df=0),k==ke.Be&&(ke.Be=0))}},dc:function(h,m){for(var v=0;v<h;++v){var k=J[m+4*v>>2],L=Fl[k];L&&(ke.deleteFramebuffer(L),L.name=0,Fl[k]=null)}},oa:function(h){if(h){var m=gs[h];m?(ke.deleteProgram(m),m.name=0,gs[h]=null):wr(1281)}},ec:function(h,m){for(var v=0;v<h;v++){var k=J[m+4*v>>2],L=La[k];L&&(ke.deleteRenderbuffer(L),L.name=0,La[k]=null)}},Qb:function(h,m){for(var v=0;v<h;v++){var k=J[m+4*v>>2],L=Ml[k];L&&(ke.deleteSampler(L),L.name=0,Ml[k]=null)}},pa:function(h){if(h){var m=ms[h];m?(ke.deleteShader(m),ms[h]=null):wr(1281)}},Yb:function(h){if(h){var m=Ua[h];m?(ke.deleteSync(m),m.name=0,Ua[h]=null):wr(1281)}},qa:function(h,m){for(var v=0;v<h;v++){var k=J[m+4*v>>2],L=es[k];L&&(ke.deleteTexture(L),L.name=0,es[k]=null)}},wc:function(h,m){for(var v=0;v<h;v++){var k=J[m+4*v>>2];ke.deleteVertexArray(ho[k]),ho[k]=null}},zc:function(h,m){for(var v=0;v<h;v++){var k=J[m+4*v>>2];ke.deleteVertexArray(ho[k]),ho[k]=null}},ra:function(h){ke.depthMask(!!h)},sa:function(h){ke.disable(h)},ta:function(h){ke.disableVertexAttribArray(h)},ua:function(h,m,v){ke.drawArrays(h,m,v)},tc:function(h,m,v,k){ke.drawArraysInstanced(h,m,v,k)},rc:function(h,m,v,k,L){ke.mf.drawArraysInstancedBaseInstanceWEBGL(h,m,v,k,L)},pc:function(h,m){for(var v=Ul[h],k=0;k<h;k++)v[k]=J[m+4*k>>2];ke.drawBuffers(v)},va:function(h,m,v,k){ke.drawElements(h,m,v,k)},uc:function(h,m,v,k,L){ke.drawElementsInstanced(h,m,v,k,L)},sc:function(h,m,v,k,L,X,ve){ke.mf.drawElementsInstancedBaseVertexBaseInstanceWEBGL(h,m,v,k,L,X,ve)},jc:function(h,m,v,k,L,X){ke.drawElements(h,k,L,X)},wa:function(h){ke.enable(h)},xa:function(h){ke.enableVertexAttribArray(h)},Ub:function(h,m){return(h=ke.fenceSync(h,m))?(m=Xu(Ua),h.name=m,Ua[m]=h,m):0},ya:function(){ke.finish()},za:function(){ke.flush()},fc:function(h,m,v,k){ke.framebufferRenderbuffer(h,m,v,La[k])},gc:function(h,m,v,k,L){ke.framebufferTexture2D(h,m,v,es[k],L)},Aa:function(h){ke.frontFace(h)},Ba:function(h,m){Ga(h,m,"createBuffer",Gh)},hc:function(h,m){Ga(h,m,"createFramebuffer",Fl)},ic:function(h,m){Ga(h,m,"createRenderbuffer",La)},Rb:function(h,m){Ga(h,m,"createSampler",Ml)},Ca:function(h,m){Ga(h,m,"createTexture",es)},xc:function(h,m){Ga(h,m,"createVertexArray",ho)},Ac:function(h,m){Ga(h,m,"createVertexArray",ho)},Zb:function(h){ke.generateMipmap(h)},Da:function(h,m,v){v?J[v>>2]=ke.getBufferParameter(h,m):wr(1281)},Ea:function(){var h=ke.getError()||Hh;return Hh=0,h},_b:function(h,m,v,k){h=ke.getFramebufferAttachmentParameter(h,m,v),(h instanceof WebGLRenderbuffer||h instanceof WebGLTexture)&&(h=h.name|0),J[k>>2]=h},E:function(h,m){jv(h,m)},Fa:function(h,m,v,k){h=ke.getProgramInfoLog(gs[h]),h===null&&(h="(unknown error)"),m=0<m&&k?qe(h,de,k,m):0,v&&(J[v>>2]=m)},Ga:function(h,m,v){if(v)if(h>=Hg)wr(1281);else if(h=gs[h],m==35716)h=ke.getProgramInfoLog(h),h===null&&(h="(unknown error)"),J[v>>2]=h.length+1;else if(m==35719){if(!h.Ue)for(m=0;m<ke.getProgramParameter(h,35718);++m)h.Ue=Math.max(h.Ue,ke.getActiveUniform(h,m).name.length+1);J[v>>2]=h.Ue}else if(m==35722){if(!h.Se)for(m=0;m<ke.getProgramParameter(h,35721);++m)h.Se=Math.max(h.Se,ke.getActiveAttrib(h,m).name.length+1);J[v>>2]=h.Se}else if(m==35381){if(!h.Te)for(m=0;m<ke.getProgramParameter(h,35382);++m)h.Te=Math.max(h.Te,ke.getActiveUniformBlockName(h,m).length+1);J[v>>2]=h.Te}else J[v>>2]=ke.getProgramParameter(h,m);else wr(1281)},$b:function(h,m,v){v?J[v>>2]=ke.getRenderbufferParameter(h,m):wr(1281)},Ha:function(h,m,v,k){h=ke.getShaderInfoLog(ms[h]),h===null&&(h="(unknown error)"),m=0<m&&k?qe(h,de,k,m):0,v&&(J[v>>2]=m)},Mb:function(h,m,v,k){h=ke.getShaderPrecisionFormat(h,m),J[v>>2]=h.rangeMin,J[v+4>>2]=h.rangeMax,J[k>>2]=h.precision},Ia:function(h,m,v){v?m==35716?(h=ke.getShaderInfoLog(ms[h]),h===null&&(h="(unknown error)"),J[v>>2]=h?h.length+1:0):m==35720?(h=ke.getShaderSource(ms[h]),J[v>>2]=h?h.length+1:0):J[v>>2]=ke.getShaderParameter(ms[h],m):wr(1281)},I:function(h){var m=zg[h];if(!m){switch(h){case 7939:m=ke.getSupportedExtensions()||[],m=m.concat(m.map(function(k){return"GL_"+k})),m=Yu(m.join(" "));break;case 7936:case 7937:case 37445:case 37446:(m=ke.getParameter(h))||wr(1280),m=m&&Yu(m);break;case 7938:m=ke.getParameter(7938),m=2<=nr.version?"OpenGL ES 3.0 ("+m+")":"OpenGL ES 2.0 ("+m+")",m=Yu(m);break;case 35724:m=ke.getParameter(35724);var v=m.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);v!==null&&(v[1].length==3&&(v[1]+="0"),m="OpenGL ES GLSL ES "+v[1]+" ("+m+")"),m=Yu(m);break;default:wr(1280)}zg[h]=m}return m},eb:function(h,m){if(2>nr.version)return wr(1282),0;var v=Bl[h];if(v)return 0>m||m>=v.length?(wr(1281),0):v[m];switch(h){case 7939:return v=ke.getSupportedExtensions()||[],v=v.concat(v.map(function(k){return"GL_"+k})),v=v.map(function(k){return Yu(k)}),v=Bl[h]=v,0>m||m>=v.length?(wr(1281),0):v[m];default:return wr(1280),0}},Ja:function(h,m){function v(Ge){return Ge.slice(-1)=="]"&&Ge.lastIndexOf("[")}m=ut(m),h=gs[h];var k=h.Ye,L=h.wg,X,ve=0,be=m,Fe=v(m);if(!k)for(h.Ye=k={},h.tf={},X=0;X<ke.getProgramParameter(h,35718);++X){var Ne=ke.getActiveUniform(h,X),ct=Ne.name;Ne=Ne.size;var kt=v(ct);kt=0<kt?ct.slice(0,kt):ct;var Nt=h.hf;for(h.hf+=Ne,L[kt]=[Ne,Nt],ct=0;ct<Ne;++ct)k[Nt]=ct,h.tf[Nt++]=kt}return 0<Fe&&(ve=parseInt(m.slice(Fe+1))>>>0,be=m.slice(0,Fe)),(L=L[be])&&ve<L[0]&&(ve+=L[1],k[ve]=k[ve]||ke.getUniformLocation(h,m))?ve:-1},Nb:function(h,m,v){for(var k=Ul[m],L=0;L<m;L++)k[L]=J[v+4*L>>2];ke.invalidateFramebuffer(h,k)},Ob:function(h,m,v,k,L,X,ve){for(var be=Ul[m],Fe=0;Fe<m;Fe++)be[Fe]=J[v+4*Fe>>2];ke.invalidateSubFramebuffer(h,be,k,L,X,ve)},Vb:function(h){return ke.isSync(Ua[h])},Ka:function(h){return(h=es[h])?ke.isTexture(h):0},Ma:function(h){ke.lineWidth(h)},Na:function(h){h=gs[h],ke.linkProgram(h),h.Ye=0,h.wg={}},nc:function(h,m,v,k,L,X){ke.rf.multiDrawArraysInstancedBaseInstanceWEBGL(h,J,m>>2,J,v>>2,J,k>>2,Le,L>>2,X)},oc:function(h,m,v,k,L,X,ve,be){ke.rf.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(h,J,m>>2,v,J,k>>2,J,L>>2,J,X>>2,Le,ve>>2,be)},Oa:function(h,m){h==3317&&(Ll=m),ke.pixelStorei(h,m)},qc:function(h){ke.readBuffer(h)},Pa:function(h,m,v,k,L,X,ve){if(2<=nr.version)if(ke.df)ke.readPixels(h,m,v,k,L,X,ve);else{var be=Ha(X);ke.readPixels(h,m,v,k,L,X,be,ve>>31-Math.clz32(be.BYTES_PER_ELEMENT))}else(ve=Qf(X,L,v,k,ve))?ke.readPixels(h,m,v,k,L,X,ve):wr(1280)},ac:function(h,m,v,k){ke.renderbufferStorage(h,m,v,k)},Xb:function(h,m,v,k,L){ke.renderbufferStorageMultisample(h,m,v,k,L)},Sb:function(h,m,v){ke.samplerParameteri(Ml[h],m,v)},Tb:function(h,m,v){ke.samplerParameteri(Ml[h],m,J[v>>2])},Qa:function(h,m,v,k){ke.scissor(h,m,v,k)},Ra:function(h,m,v,k){for(var L="",X=0;X<m;++X){var ve=k?J[k+4*X>>2]:-1;L+=ut(J[v+4*X>>2],0>ve?void 0:ve)}ke.shaderSource(ms[h],L)},Sa:function(h,m,v){ke.stencilFunc(h,m,v)},Ta:function(h,m,v,k){ke.stencilFuncSeparate(h,m,v,k)},Ua:function(h){ke.stencilMask(h)},Va:function(h,m){ke.stencilMaskSeparate(h,m)},Wa:function(h,m,v){ke.stencilOp(h,m,v)},Xa:function(h,m,v,k){ke.stencilOpSeparate(h,m,v,k)},Ya:function(h,m,v,k,L,X,ve,be,Fe){if(2<=nr.version)if(ke.Be)ke.texImage2D(h,m,v,k,L,X,ve,be,Fe);else if(Fe){var Ne=Ha(be);ke.texImage2D(h,m,v,k,L,X,ve,be,Ne,Fe>>31-Math.clz32(Ne.BYTES_PER_ELEMENT))}else ke.texImage2D(h,m,v,k,L,X,ve,be,null);else ke.texImage2D(h,m,v,k,L,X,ve,be,Fe?Qf(be,ve,k,L,Fe):null)},Za:function(h,m,v){ke.texParameterf(h,m,v)},_a:function(h,m,v){ke.texParameterf(h,m,F[v>>2])},$a:function(h,m,v){ke.texParameteri(h,m,v)},ab:function(h,m,v){ke.texParameteri(h,m,J[v>>2])},kc:function(h,m,v,k,L){ke.texStorage2D(h,m,v,k,L)},bb:function(h,m,v,k,L,X,ve,be,Fe){if(2<=nr.version)if(ke.Be)ke.texSubImage2D(h,m,v,k,L,X,ve,be,Fe);else if(Fe){var Ne=Ha(be);ke.texSubImage2D(h,m,v,k,L,X,ve,be,Ne,Fe>>31-Math.clz32(Ne.BYTES_PER_ELEMENT))}else ke.texSubImage2D(h,m,v,k,L,X,ve,be,null);else Ne=null,Fe&&(Ne=Qf(be,ve,L,X,Fe)),ke.texSubImage2D(h,m,v,k,L,X,ve,be,Ne)},cb:function(h,m){ke.uniform1f(cr(h),m)},db:function(h,m,v){if(2<=nr.version)ke.uniform1fv(cr(h),F,v>>2,m);else{if(288>=m)for(var k=Wo[m-1],L=0;L<m;++L)k[L]=F[v+4*L>>2];else k=F.subarray(v>>2,v+4*m>>2);ke.uniform1fv(cr(h),k)}},Vc:function(h,m){ke.uniform1i(cr(h),m)},Wc:function(h,m,v){if(2<=nr.version)ke.uniform1iv(cr(h),J,v>>2,m);else{if(288>=m)for(var k=Gl[m-1],L=0;L<m;++L)k[L]=J[v+4*L>>2];else k=J.subarray(v>>2,v+4*m>>2);ke.uniform1iv(cr(h),k)}},Xc:function(h,m,v){ke.uniform2f(cr(h),m,v)},Yc:function(h,m,v){if(2<=nr.version)ke.uniform2fv(cr(h),F,v>>2,2*m);else{if(144>=m)for(var k=Wo[2*m-1],L=0;L<2*m;L+=2)k[L]=F[v+4*L>>2],k[L+1]=F[v+(4*L+4)>>2];else k=F.subarray(v>>2,v+8*m>>2);ke.uniform2fv(cr(h),k)}},Uc:function(h,m,v){ke.uniform2i(cr(h),m,v)},Tc:function(h,m,v){if(2<=nr.version)ke.uniform2iv(cr(h),J,v>>2,2*m);else{if(144>=m)for(var k=Gl[2*m-1],L=0;L<2*m;L+=2)k[L]=J[v+4*L>>2],k[L+1]=J[v+(4*L+4)>>2];else k=J.subarray(v>>2,v+8*m>>2);ke.uniform2iv(cr(h),k)}},Sc:function(h,m,v,k){ke.uniform3f(cr(h),m,v,k)},Rc:function(h,m,v){if(2<=nr.version)ke.uniform3fv(cr(h),F,v>>2,3*m);else{if(96>=m)for(var k=Wo[3*m-1],L=0;L<3*m;L+=3)k[L]=F[v+4*L>>2],k[L+1]=F[v+(4*L+4)>>2],k[L+2]=F[v+(4*L+8)>>2];else k=F.subarray(v>>2,v+12*m>>2);ke.uniform3fv(cr(h),k)}},Qc:function(h,m,v,k){ke.uniform3i(cr(h),m,v,k)},Pc:function(h,m,v){if(2<=nr.version)ke.uniform3iv(cr(h),J,v>>2,3*m);else{if(96>=m)for(var k=Gl[3*m-1],L=0;L<3*m;L+=3)k[L]=J[v+4*L>>2],k[L+1]=J[v+(4*L+4)>>2],k[L+2]=J[v+(4*L+8)>>2];else k=J.subarray(v>>2,v+12*m>>2);ke.uniform3iv(cr(h),k)}},Oc:function(h,m,v,k,L){ke.uniform4f(cr(h),m,v,k,L)},Nc:function(h,m,v){if(2<=nr.version)ke.uniform4fv(cr(h),F,v>>2,4*m);else{if(72>=m){var k=Wo[4*m-1],L=F;v>>=2;for(var X=0;X<4*m;X+=4){var ve=v+X;k[X]=L[ve],k[X+1]=L[ve+1],k[X+2]=L[ve+2],k[X+3]=L[ve+3]}}else k=F.subarray(v>>2,v+16*m>>2);ke.uniform4fv(cr(h),k)}},Bc:function(h,m,v,k,L){ke.uniform4i(cr(h),m,v,k,L)},Cc:function(h,m,v){if(2<=nr.version)ke.uniform4iv(cr(h),J,v>>2,4*m);else{if(72>=m)for(var k=Gl[4*m-1],L=0;L<4*m;L+=4)k[L]=J[v+4*L>>2],k[L+1]=J[v+(4*L+4)>>2],k[L+2]=J[v+(4*L+8)>>2],k[L+3]=J[v+(4*L+12)>>2];else k=J.subarray(v>>2,v+16*m>>2);ke.uniform4iv(cr(h),k)}},Dc:function(h,m,v,k){if(2<=nr.version)ke.uniformMatrix2fv(cr(h),!!v,F,k>>2,4*m);else{if(72>=m)for(var L=Wo[4*m-1],X=0;X<4*m;X+=4)L[X]=F[k+4*X>>2],L[X+1]=F[k+(4*X+4)>>2],L[X+2]=F[k+(4*X+8)>>2],L[X+3]=F[k+(4*X+12)>>2];else L=F.subarray(k>>2,k+16*m>>2);ke.uniformMatrix2fv(cr(h),!!v,L)}},Ec:function(h,m,v,k){if(2<=nr.version)ke.uniformMatrix3fv(cr(h),!!v,F,k>>2,9*m);else{if(32>=m)for(var L=Wo[9*m-1],X=0;X<9*m;X+=9)L[X]=F[k+4*X>>2],L[X+1]=F[k+(4*X+4)>>2],L[X+2]=F[k+(4*X+8)>>2],L[X+3]=F[k+(4*X+12)>>2],L[X+4]=F[k+(4*X+16)>>2],L[X+5]=F[k+(4*X+20)>>2],L[X+6]=F[k+(4*X+24)>>2],L[X+7]=F[k+(4*X+28)>>2],L[X+8]=F[k+(4*X+32)>>2];else L=F.subarray(k>>2,k+36*m>>2);ke.uniformMatrix3fv(cr(h),!!v,L)}},Fc:function(h,m,v,k){if(2<=nr.version)ke.uniformMatrix4fv(cr(h),!!v,F,k>>2,16*m);else{if(18>=m){var L=Wo[16*m-1],X=F;k>>=2;for(var ve=0;ve<16*m;ve+=16){var be=k+ve;L[ve]=X[be],L[ve+1]=X[be+1],L[ve+2]=X[be+2],L[ve+3]=X[be+3],L[ve+4]=X[be+4],L[ve+5]=X[be+5],L[ve+6]=X[be+6],L[ve+7]=X[be+7],L[ve+8]=X[be+8],L[ve+9]=X[be+9],L[ve+10]=X[be+10],L[ve+11]=X[be+11],L[ve+12]=X[be+12],L[ve+13]=X[be+13],L[ve+14]=X[be+14],L[ve+15]=X[be+15]}}else L=F.subarray(k>>2,k+64*m>>2);ke.uniformMatrix4fv(cr(h),!!v,L)}},Gc:function(h){h=gs[h],ke.useProgram(h),ke.Df=h},Hc:function(h,m){ke.vertexAttrib1f(h,m)},Ic:function(h,m){ke.vertexAttrib2f(h,F[m>>2],F[m+4>>2])},Jc:function(h,m){ke.vertexAttrib3f(h,F[m>>2],F[m+4>>2],F[m+8>>2])},Kc:function(h,m){ke.vertexAttrib4f(h,F[m>>2],F[m+4>>2],F[m+8>>2],F[m+12>>2])},lc:function(h,m){ke.vertexAttribDivisor(h,m)},mc:function(h,m,v,k,L){ke.vertexAttribIPointer(h,m,v,k,L)},Lc:function(h,m,v,k,L,X){ke.vertexAttribPointer(h,m,v,!!k,L,X)},Mc:function(h,m,v,k){ke.viewport(h,m,v,k)},gb:function(h,m,v,k){ke.waitSync(Ua[h],m,(v>>>0)+4294967296*k)},e:function(h,m){throw ii(h,m||1),"longjmp"},pb:function(h){var m=de.length;if(h>>>=0,2147483648<h)return!1;for(var v=1;4>=v;v*=2){var k=m*(1+.2/v);k=Math.min(k,h+100663296),k=Math.max(h,k),0<k%65536&&(k+=65536-k%65536);e:{try{re.grow(Math.min(2147483648,k)-Ee.byteLength+65535>>>16),j();var L=1;break e}catch{}L=void 0}if(L)return!0}return!1},ub:function(h,m){var v=0;return Vg().forEach(function(k,L){var X=m+v;for(L=J[h+4*L>>2]=X,X=0;X<k.length;++X)Se[L++>>0]=k.charCodeAt(X);Se[L>>0]=0,v+=k.length+1}),0},vb:function(h,m){var v=Vg();J[h>>2]=v.length;var k=0;return v.forEach(function(L){k+=L.length+1}),J[m>>2]=k,0},Gb:function(h){q||(n.onExit&&n.onExit(h),fe=!0),f(h,new Qg(h))},G:function(){return 0},tb:function(h,m){return h=h==1||h==2?2:Xe(),Se[m>>0]=h,0},nb:function(h,m,v,k,L,X){return h=Mt.Nf(h),m=Mt.Ef(h,m,v,k),J[X>>2]=m,0},wb:function(h,m,v,k){return h=Mt.Nf(h),m=Mt.Ef(h,m,v),J[k>>2]=m,0},mb:function(){},M:function(h,m,v,k){for(var L=0,X=0;X<v;X++){for(var ve=J[m+8*X>>2],be=J[m+(8*X+4)>>2],Fe=0;Fe<be;Fe++){var Ne=de[ve+Fe],ct=Rt[h];Ne===0||Ne===10?((h===1?N:V)(He(ct,0)),ct.length=0):ct.push(Ne)}L+=be}return J[k>>2]=L,0},a:function(){return O},l:$v,o:Kv,g:Yv,C:eE,Lb:Qv,V:Zv,U:iE,T:nE,n:qg,r:qv,i:Xv,q:Jv,Jb:zl,Hb:rE,Ib:tE,b:function(h){O=h},sb:function(h,m,v,k){return Vv(h,m,v,k)}};(function(){function h(L){n.asm=L.exports,re=n.asm.$c,j(),ee=n.asm.cd,ye.unshift(n.asm.ad),we--,n.monitorRunDependencies&&n.monitorRunDependencies(we),we==0&&Re&&(L=Re,Re=null,L())}function m(L){h(L.instance)}function v(L){return _t().then(function(X){return WebAssembly.instantiate(X,k)}).then(L,function(X){V("failed to asynchronously prepare wasm: "+X),Xe(X)})}var k={a:Wv};if(we++,n.monitorRunDependencies&&n.monitorRunDependencies(we),n.instantiateWasm)try{return n.instantiateWasm(k,h)}catch(L){return V("Module.instantiateWasm callback failed with error: "+L),!1}return function(){return W||typeof WebAssembly.instantiateStreaming!="function"||We()||Qe.startsWith("file://")||typeof fetch!="function"?v(m):fetch(Qe,{credentials:"same-origin"}).then(function(L){return WebAssembly.instantiateStreaming(L,k).then(m,function(X){return V("wasm streaming compile failed: "+X),V("falling back to ArrayBuffer instantiation"),v(m)})})}().catch(a),{}})(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.ad).apply(null,arguments)};var Xg=n._memset=function(){return(Xg=n._memset=n.asm.bd).apply(null,arguments)},Hl=n._malloc=function(){return(Hl=n._malloc=n.asm.dd).apply(null,arguments)},rs=n._free=function(){return(rs=n._free=n.asm.ed).apply(null,arguments)},Qu=n.___errno_location=function(){return(Qu=n.___errno_location=n.asm.fd).apply(null,arguments)},Yg=n.___getTypeName=function(){return(Yg=n.___getTypeName=n.asm.gd).apply(null,arguments)};n.___embind_register_native_and_builtin_types=function(){return(n.___embind_register_native_and_builtin_types=n.asm.hd).apply(null,arguments)};var Oi=n.stackSave=function(){return(Oi=n.stackSave=n.asm.id).apply(null,arguments)},Ni=n.stackRestore=function(){return(Ni=n.stackRestore=n.asm.jd).apply(null,arguments)},ii=n._setThrew=function(){return(ii=n._setThrew=n.asm.kd).apply(null,arguments)},xs=n._memalign=function(){return(xs=n._memalign=n.asm.ld).apply(null,arguments)};n.dynCall_iiiji=function(){return(n.dynCall_iiiji=n.asm.md).apply(null,arguments)},n.dynCall_ji=function(){return(n.dynCall_ji=n.asm.nd).apply(null,arguments)},n.dynCall_iiji=function(){return(n.dynCall_iiji=n.asm.od).apply(null,arguments)},n.dynCall_iijjiii=function(){return(n.dynCall_iijjiii=n.asm.pd).apply(null,arguments)},n.dynCall_iij=function(){return(n.dynCall_iij=n.asm.qd).apply(null,arguments)},n.dynCall_vijjjii=function(){return(n.dynCall_vijjjii=n.asm.rd).apply(null,arguments)},n.dynCall_viji=function(){return(n.dynCall_viji=n.asm.sd).apply(null,arguments)},n.dynCall_vijiii=function(){return(n.dynCall_vijiii=n.asm.td).apply(null,arguments)},n.dynCall_viiiiij=function(){return(n.dynCall_viiiiij=n.asm.ud).apply(null,arguments)},n.dynCall_viijii=function(){return(n.dynCall_viijii=n.asm.vd).apply(null,arguments)},n.dynCall_jii=function(){return(n.dynCall_jii=n.asm.wd).apply(null,arguments)},n.dynCall_iiij=function(){return(n.dynCall_iiij=n.asm.xd).apply(null,arguments)},n.dynCall_iiiij=function(){return(n.dynCall_iiiij=n.asm.yd).apply(null,arguments)},n.dynCall_viij=function(){return(n.dynCall_viij=n.asm.zd).apply(null,arguments)},n.dynCall_viiij=function(){return(n.dynCall_viiij=n.asm.Ad).apply(null,arguments)},n.dynCall_vij=function(){return(n.dynCall_vij=n.asm.Bd).apply(null,arguments)},n.dynCall_jiiii=function(){return(n.dynCall_jiiii=n.asm.Cd).apply(null,arguments)},n.dynCall_jiiiiii=function(){return(n.dynCall_jiiiiii=n.asm.Dd).apply(null,arguments)},n.dynCall_jiiiiji=function(){return(n.dynCall_jiiiiji=n.asm.Ed).apply(null,arguments)},n.dynCall_iijj=function(){return(n.dynCall_iijj=n.asm.Fd).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.Gd).apply(null,arguments)},n.dynCall_iiiiij=function(){return(n.dynCall_iiiiij=n.asm.Hd).apply(null,arguments)},n.dynCall_iiiiijj=function(){return(n.dynCall_iiiiijj=n.asm.Id).apply(null,arguments)},n.dynCall_iiiiiijj=function(){return(n.dynCall_iiiiiijj=n.asm.Jd).apply(null,arguments)};function $v(h,m){var v=Oi();try{return ee.get(h)(m)}catch(k){if(Ni(v),k!==k+0&&k!=="longjmp")throw k;ii(1,0)}}function Kv(h,m,v){var k=Oi();try{return ee.get(h)(m,v)}catch(L){if(Ni(k),L!==L+0&&L!=="longjmp")throw L;ii(1,0)}}function Xv(h,m,v,k){var L=Oi();try{ee.get(h)(m,v,k)}catch(X){if(Ni(L),X!==X+0&&X!=="longjmp")throw X;ii(1,0)}}function Yv(h,m,v,k){var L=Oi();try{return ee.get(h)(m,v,k)}catch(X){if(Ni(L),X!==X+0&&X!=="longjmp")throw X;ii(1,0)}}function qg(h,m){var v=Oi();try{ee.get(h)(m)}catch(k){if(Ni(v),k!==k+0&&k!=="longjmp")throw k;ii(1,0)}}function qv(h,m,v){var k=Oi();try{ee.get(h)(m,v)}catch(L){if(Ni(k),L!==L+0&&L!=="longjmp")throw L;ii(1,0)}}function Qv(h,m,v,k,L,X){var ve=Oi();try{return ee.get(h)(m,v,k,L,X)}catch(be){if(Ni(ve),be!==be+0&&be!=="longjmp")throw be;ii(1,0)}}function Jv(h,m,v,k,L){var X=Oi();try{ee.get(h)(m,v,k,L)}catch(ve){if(Ni(X),ve!==ve+0&&ve!=="longjmp")throw ve;ii(1,0)}}function Zv(h,m,v,k,L,X,ve){var be=Oi();try{return ee.get(h)(m,v,k,L,X,ve)}catch(Fe){if(Ni(be),Fe!==Fe+0&&Fe!=="longjmp")throw Fe;ii(1,0)}}function eE(h,m,v,k,L){var X=Oi();try{return ee.get(h)(m,v,k,L)}catch(ve){if(Ni(X),ve!==ve+0&&ve!=="longjmp")throw ve;ii(1,0)}}function zl(h,m,v,k,L,X){var ve=Oi();try{ee.get(h)(m,v,k,L,X)}catch(be){if(Ni(ve),be!==be+0&&be!=="longjmp")throw be;ii(1,0)}}function tE(h,m,v,k,L,X,ve,be,Fe,Ne){var ct=Oi();try{ee.get(h)(m,v,k,L,X,ve,be,Fe,Ne)}catch(kt){if(Ni(ct),kt!==kt+0&&kt!=="longjmp")throw kt;ii(1,0)}}function rE(h,m,v,k,L,X,ve){var be=Oi();try{ee.get(h)(m,v,k,L,X,ve)}catch(Fe){if(Ni(be),Fe!==Fe+0&&Fe!=="longjmp")throw Fe;ii(1,0)}}function iE(h,m,v,k,L,X,ve,be,Fe,Ne){var ct=Oi();try{return ee.get(h)(m,v,k,L,X,ve,be,Fe,Ne)}catch(kt){if(Ni(ct),kt!==kt+0&&kt!=="longjmp")throw kt;ii(1,0)}}function nE(h){var m=Oi();try{ee.get(h)()}catch(v){if(Ni(m),v!==v+0&&v!=="longjmp")throw v;ii(1,0)}}var Wh;function Qg(h){this.name="ExitStatus",this.message="Program terminated with exit("+h+")",this.status=h}Re=function h(){Wh||Zf(),Wh||(Re=h)};function Zf(){function h(){if(!Wh&&(Wh=!0,n.calledRun=!0,!fe)){if(it(ye),o(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var m=n.postRun.shift();oe.unshift(m)}it(oe)}}if(!(0<we)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)ae();it(ce),0<we||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),h()},1)):h())}}if(n.run=Zf,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return Zf(),s.ready}}();r.exports=t})(EN);const p5=EN.exports,g5=""+new URL("canvaskit.63f87ea9.wasm",import.meta.url).href,m5={locateFile:()=>g5};let gr;async function x5(){gr=await p5(m5)}function lc(r){const e=new gr.Paint;try{return r(e)}finally{e.deleteLater()}}function y5(r){return e=>{const t=gr.Path.MakeFromSVGString(r);t||et();try{return e(t)}finally{t.deleteLater()}}}function v5(r){const e=new gr.Path;e||et();try{return r(e)}finally{e.deleteLater()}}var Ui=(r=>(r.none="none",r.arrow="default",r.pointer="pointer",r.grab="grab",r.grabbing="grabbing",r.move="move",r.text="text",r))(Ui||{});class c1 extends Ht{constructor(t,i){super();c(this,"isActivated",!1);c(this,"_cursorBefore");c(this,"_phase",Xs.noop);this.canvas=t,this.cursor=i}get phase(){return this._phase}set phase(t){this._phase=t}activate(){this.isActivated=!0,this._cursorBefore=this.canvas.view.currentCursor(),this.useCursor(this.cursor)}deactivate(){this.isActivated=!1,this._cursorBefore||et(),this.useCursor(this._cursorBefore),this._cursorBefore=void 0}useCursor(t){this.canvas.view.setCursor(t)}resetCursorStyle(){this.useCursor(this.cursor)}convertToPixelCoord(t){return{x:Math.round(t.clientX),y:Math.round(t.clientY)}}processEvent(t){}isStrokeTool(){return!1}}class Z0 extends c1{beginPrimaryAction(e){}continuePrimaryAction(e){}endPrimaryAction(e){}isStrokeTool(){return!0}}const dd=class{constructor(e){this.symbol=e,Object.freeze(this)}static fromFullPath(e){const t=Symbol.for(`${e.join("/")}`);return this.instances.has(t)||this.instances.set(t,new dd(t)),this.instances.get(t)}createChild(e){const t=Symbol.keyFor(this.symbol);return dd.fromFullPath(t.split("/").concat(e))}get key(){return Symbol.keyFor(this.symbol)}get name(){return yo(this.key.split("/"))}get parent(){const e=this.key.split("/");if(e.length!==1)return e.pop(),dd.fromFullPath(e)}get path(){return this.key.split("/")}EQ(e){return this.symbol===e.symbol}NE(e){return this.symbol!==e.symbol}*[Symbol.iterator](){const e=this.path;for(let t=0,i=e.length;t<i;t++)yield dd.fromFullPath(e.slice(0,t+1))}};let jp=dd;c(jp,"instances",new Map);const E5=jp.fromFullPath([""]),hT=class{constructor(e,t){this.id=e,this.scope=t,Object.freeze(this)}static create(e,t){let i=this.scoped.get(t);return i||(i=new Map,this.scoped.set(t,i)),i.has(e)||i.set(e,new hT(e,t)),i.get(e)}EQ(e){return this.id===e.id&&this.scope.EQ(e.scope)}NE(e){return!this.EQ(e)}};let ix=hT;c(ix,"scoped",new WeakMap);var tb=(r=>(r.TrailingBreak="TrailingBreak",r))(tb||{});const Ac="x-id",ew="x-scope",SN="x-root",ny="x-type";function S5(r){return r.getAttribute(ew)||""}function wN(r){return r.getAttribute(SN)||""}function w5(r){return!!wN(r)}function AN(r){return r.getAttribute(Ac)||""}function bN(r){const e=S5(r).split("/");if(w5(r)){const t=AN(r);e.push(t)}return jp.fromFullPath(e)}function s_(r){let e=r;const t=[];let i=0;for(;e;){const s=Object.create(null);if(e.hasAttribute(Ac)){const n=wN(e);n?s.id=n:s.id=AN(e),s.scope=bN(e),t[i++]=s}if(e.tagName==="BODY")break;e=e.parentElement}return t.reverse()}function A5(r){return{[Symbol.iterator](){let e=r;return{next(){if(e){let t=e;return e=e.nextSibling,{value:bn(t),done:!1}}else return{done:!0}}}}}}function b5(r){return{[Symbol.iterator](){let e=r;return{next(){if(e){let t=e;return e=e.parentNode,{value:t,done:!1}}else return{value:void 0,done:!0}}}}}}class di{static FirstChild(e){return e.firstChild}static LastChild(e){return e.lastChild}static NextSibling(e){return e.nextSibling}static PreviousSibling(e){return e.previousSibling}static Parent(e){var t;return(t=e.parentNode)==null?void 0:t.AsContainerNode()}static ChildrenOf(e){return A5(di.FirstChild(e))}static AncestorsOf(e){return b5(di.Parent(e))}static CommonAncestor(e,t){if(!(!e||!t))return e.CommonAncestor(t)}static ChildAt(e,t){let i=e.firstChild;for(;i&&t--;)i=i.nextSibling;return i}}function rb(r,e){return`${Reflect.get(r,"name")}::${Reflect.get(e,"name")}`}var sy=(r=>(r[r.kDispatchSubtreeModifiedEvent=0]="kDispatchSubtreeModifiedEvent",r[r.kOmitSubtreeModifiedEvent=1]="kOmitSubtreeModifiedEvent",r))(sy||{});class k5{constructor(e){c(this,"base_");c(this,"current_");this.base_=e}First(){return this.current_=this.base_.firstChild,this.current_}Next(){if(!!this.current_){if(this.current_.firstChild)this.current_=this.current_.firstChild;else{for(;!this.current_.next_sibling();)if(this.current_=this.current_.parentNode,this.current_===this.base_)return this.current_=void 0,this.current_;this.current_=this.current_.next_sibling()}return this.current_}}}class tw{constructor(){c(this,"collection_",[])}Length(){return this.collection_.length}get length(){return this.Length()}Item(e){return this.collection_[e]}AppendNode(e){this.collection_.push(e)}Clear(){this.collection_.length=0}indexOf(e){return this.collection_.indexOf(e)}[Symbol.iterator](){let e=0;return{next:()=>{if(e<this.Length()){let t=this.Item(e);return e++,{value:t,done:!1}}else return{value:void 0,done:!0}}}}}class T5{constructor(e){c(this,"parent_");c(this,"current_");this.parent_=e}First(){return this.current_=this.parent_.firstChild,this.current_}Next(){return this.current_&&(this.current_=this.current_.next_sibling()),this.current_}}class ib extends tw{constructor(t){super();c(this,"base_");c(this,"base_node_generation_");this.base_=t,this.base_node_generation_=kN.kInvalidNodeGeneration}static CreateWithChildren(t){return Q(t),new Proxy(new ib(t),{get:function(i,s,n){if(ao(s)){let o=parseInt(s);if(!Number.isNaN(o))return i.Item(o)}return Reflect.get(i,s)}})}Length(){return this.MaybeRefreshCollection(),super.Length()}get length(){return this.MaybeRefreshCollection(),super.length}Item(t){return this.MaybeRefreshCollection(),super.Item(t)}MaybeRefreshCollection(){if(this.base_node_generation_!=this.base_.node_generation()){this.Clear();let t=new T5(this.base_),i=t.First();for(;i;)this.AppendNode(i),i=t.Next();this.base_node_generation_=this.base_.node_generation()}}}var So=(r=>(r[r.kElementNode=1]="kElementNode",r[r.kTextNode=3]="kTextNode",r[r.kCommentNode=8]="kCommentNode",r[r.kDocumentNode=9]="kDocumentNode",r))(So||{}),kN=(r=>(r[r.kInvalidNodeGeneration=0]="kInvalidNodeGeneration",r[r.kInitialNodeGeneration=1]="kInitialNodeGeneration",r))(kN||{});class TN{}const nx=2,sx=4,rw=15,P5=17;var R5=(r=>(r[r.kNoStyleChange=0]="kNoStyleChange",r[r.kLocalStyleChange=1<<rw]="kLocalStyleChange",r[r.kSubtreeStyleChange=2<<rw]="kSubtreeStyleChange",r))(R5||{}),D5=(r=>(r[r.kHasRareDataFlag=1]="kHasRareDataFlag",r[r.kIsContainerFlag=2]="kIsContainerFlag",r[r.kDOMNodeTypeMask=3<<nx]="kDOMNodeTypeMask",r[r.kElementNamespaceTypeMask=3<<sx]="kElementNamespaceTypeMask",r[r.kIsLinkFlag=64]="kIsLinkFlag",r[r.kIsUserActionElementFlag=128]="kIsUserActionElementFlag",r[r.kIsConnectedFlag=256]="kIsConnectedFlag",r[r.kIsInShadowTreeFlag=512]="kIsInShadowTreeFlag",r[r.kIsFinishedParsingChildrenFlag=1024]="kIsFinishedParsingChildrenFlag",r[r.kHasCustomStyleCallbacksFlag=2048]="kHasCustomStyleCallbacksFlag",r[r.kChildNeedsStyleInvalidationFlag=4096]="kChildNeedsStyleInvalidationFlag",r[r.kNeedsStyleInvalidationFlag=8192]="kNeedsStyleInvalidationFlag",r[r.kChildNeedsStyleRecalcFlag=16384]="kChildNeedsStyleRecalcFlag",r[r.kStyleChangeMask=3<<rw]="kStyleChangeMask",r[r.kCustomElementStateMask=7<<P5]="kCustomElementStateMask",r[r.kHasNameOrIsEditingTextFlag=1048576]="kHasNameOrIsEditingTextFlag",r[r.kHasEventTargetDataFlag=2097152]="kHasEventTargetDataFlag",r[r.kNeedsReattachLayoutTree=4194304]="kNeedsReattachLayoutTree",r[r.kChildNeedsReattachLayoutTree=8388608]="kChildNeedsReattachLayoutTree",r[r.kHasDuplicateAttributes=16777216]="kHasDuplicateAttributes",r[r.kForceReattachLayoutTree=33554432]="kForceReattachLayoutTree",r[r.kHasDisplayLockContext=67108864]="kHasDisplayLockContext",r[r.kSelfOrAncestorHasDirAutoAttribute=134217728]="kSelfOrAncestorHasDirAutoAttribute",r[r.kCachedDirectionalityIsRtl=268435456]="kCachedDirectionalityIsRtl",r[r.kNeedsInheritDirectionalityFromParent=536870912]="kNeedsInheritDirectionalityFromParent",r[r.kDefaultNodeFlags=1024]="kDefaultNodeFlags",r))(D5||{}),hp=(r=>(r[r.kElement=0]="kElement",r[r.kText=1<<nx]="kText",r[r.kDocumentFragment=2<<nx]="kDocumentFragment",r[r.kOther=3<<nx]="kOther",r))(hp||{}),Ql=(r=>(r[r.kHTML=0]="kHTML",r[r.kMathML=1<<sx]="kMathML",r[r.kSVG=2<<sx]="kSVG",r[r.kOther=3<<sx]="kOther",r))(Ql||{}),Is=(r=>(r[r.kCreateNone=0]="kCreateNone",r[r.kCreateOther=1024|hp.kOther|Ql.kOther]="kCreateOther",r[r.kCreateText=1024|hp.kText|Ql.kOther]="kCreateText",r[r.kCreateContainer=1026|hp.kOther|Ql.kOther]="kCreateContainer",r[r.kCreateElement=1026|Ql.kOther]="kCreateElement",r[r.kCreateDocumentFragment=1026|hp.kDocumentFragment|Ql.kOther]="kCreateDocumentFragment",r[r.kCreateShadowRoot=r.kCreateDocumentFragment|512]="kCreateShadowRoot",r[r.kCreateHTMLElement=1026]="kCreateHTMLElement",r[r.kCreateMathMLElement=1026|Ql.kMathML]="kCreateMathMLElement",r[r.kCreateSVGElement=1026|Ql.kSVG]="kCreateSVGElement",r[r.kCreateDocument=r.kCreateContainer|256]="kCreateDocument",r[r.kCreateEditingText=r.kCreateText|1048576]="kCreateEditingText",r))(Is||{});class PN{constructor(e,t){c(this,"parent_");c(this,"first_child_");c(this,"last_child_");c(this,"next_sibling_");c(this,"previous_sibling_");c(this,"node_document_");c(this,"inserted_into_document_",!1);c(this,"node_value_");c(this,"node_generation_",1);c(this,"node_flags_",0);c(this,"layout_object_");this.node_flags_=e,t&&(this.node_document_=t)}IsDocument(){return this.getNodeType()===9}IsElement(){return this.getNodeType()===1}IsText(){return this.getNodeType()===3}isConnected(){return this.inserted_into_document_}get nodeType(){return this.getNodeType()}get nodeValue(){return this.node_value_}set nodeValue(e){}get firstChild(){return this.first_child_}get lastChild(){return this.last_child_}next_sibling(){return this.next_sibling_}get nextSibling(){return this.next_sibling()}previous_sibling(){return this.previous_sibling_}get previousSibling(){return this.previous_sibling()}SetPreviousSibling(e){this.previous_sibling_=e}SetNextSibling(e){this.next_sibling_=e}get childNodes(){return ib.CreateWithChildren(this)}get parentElement(){var e;return(e=this.parent_)==null?void 0:e.AsElement()}get parentNode(){return this.parent_}SetParentNode(e){this.parent_=e}GetDocument(){return this.node_document_}compareDocumentPosition(e){return Ue()}AsComment(){}AsText(){}AsElement(){}AsCharacterData(){}AsContainerNode(){}get textContent(){let e=this.AsText();if(e)return e.data;let t=this.AsComment();if(t)return t.data;if(this.IsDocument())return"";let i="",s=this.firstChild;for(;s;)(s.IsText()||s.IsElement())&&(i+=s.textContent||""),s=s.next_sibling();return i}set textContent(e){switch(e=e||"",this.getNodeType()){case 3:case 8:this.nodeValue=e;return;case 1:{let t=this.AsContainerNode();if(Q(t),this.childNodes.length==1){let s=this.first_child_.AsText();if(s&&s.data===e&&e.length>0)return}e?(t.RemoveChildren(sy.kOmitSubtreeModifiedEvent),t.appendChild(this.GetDocument().createTextNode(e))):t.RemoveChildren(sy.kDispatchSubtreeModifiedEvent)}case 9:return}et()}first_element_child(){let e=this.firstChild;for(;e;){if(e.IsElement())return e;e=e.nextSibling}}get lastElementChild(){let e=this.lastChild;for(;e;){if(e.IsElement())return e;e=e.previousSibling}}get nextElementSibling(){let e=this.next_sibling();for(;e;){if(e.IsElement())return e.AsElement();e=e.next_sibling()}}contains(e){let t=e;for(;t;){if(this===t)return!0;t=t.parentNode}return!1}CommonAncestor(e){if(this==e)return this;if(this.GetDocument()!=e.GetDocument())return;let t=0;for(let o=this;o;o=o.parentNode){if(o==e)return o;t++}let i=0;for(let o=e;o;o=o.parentNode){if(o==this)return this;i++}let s=this,n=e;if(t>i)for(let o=t;o>i;--o)s=bn(s).parentNode;else if(i>t)for(let o=i;o>t;--o)n=bn(n).parentNode;for(;s;){if(s==n)return s;s=bn(s).parentNode,n=bn(n).parentNode}Q(!n)}HasChildNodes(){return!!this.first_child_}appendChild(e){return this.PreInsert(e)}removeChild(e){return this.PreRemove(e)}insertBefore(e,t){return this.PreInsert(e,t)}ReplaceAll(e){e&&e.AdoptIntoDocument(this.GetDocument());let t=new tw,i=this.first_child_;for(;i;)t.AppendNode(i),i=i.next_sibling();let s=new tw;for(e&&s.AppendNode(e);this.HasChildNodes();)this.Remove(this.firstChild,!0);e&&this.Insert(e,void 0,!0)}cloneNode(e){let t=this.Duplicate();if(Q(t),e){let i=this.first_child_;for(;i;){let s=i.cloneNode(!0);Q(s),t.appendChild(s),i=i.next_sibling_}}return t}node_generation(){return this.node_generation_}UpdateGenerationForNodeAndAncestors(){++this.node_generation_==0&&(this.node_generation_=1),this.parent_&&this.parent_.UpdateGenerationForNodeAndAncestors()}GetRootNode(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}AdoptIntoDocument(e){if(Q(!this.IsDocument()),!e)return;this.parent_&&this.parent_.removeChild(this),this.node_document_=e;let t=new k5(this),i=t.First();for(;i;)i.node_document_=e,i=t.Next()}PreInsert(e,t){if(!!this.EnsurePreInsertionValidity(e,t))return e.AdoptIntoDocument(this.node_document_),this.Insert(e,t==e?t.nextSibling:t),e}EnsurePreInsertionValidity(e,t){if(!e||!this.IsDocument()&&!this.IsElement())return!1;let i=this;for(;i;){if(e==i)return!1;i=i.parentNode}return!(t&&t.parentNode!=this||e.IsDocument())}PreRemove(e){if(!(!e||e.parentNode!==this.AsContainerNode()))return this.Remove(e),e}Insert(e,t,i=!0){var o;e.parent_=this.AsContainerNode();let s=t,n=s?s.previous_sibling_:this.last_child_;n?n.next_sibling_=e:this.first_child_=e,e.previous_sibling_=n,s?s.previous_sibling_=e:this.last_child_=e,e.next_sibling_=s,this.OnMutation(),e.UpdateGenerationForNodeAndAncestors(),this.InvalidateLayoutBoxesOfNodeAndAncestors(),this.inserted_into_document_&&(e.OnInsertedIntoDocument(),(o=this.GetDocument())==null||o.OnDOMMutation())}OnInsertedIntoDocument(){Q(this.node_document_),Q(!this.inserted_into_document_),this.inserted_into_document_=!0;let e=this.first_child_;for(;e;)e.OnInsertedIntoDocument(),e=e.next_sibling_}OnRemovedFromDocument(){Q(this.inserted_into_document_),this.inserted_into_document_=!1;let e=this.first_child_;for(;e;)e.OnRemovedFromDocument(),e=e.next_sibling_}OnMutation(){}Remove(e,t=!0){var o;Q(e),this.OnMutation(),e.UpdateGenerationForNodeAndAncestors(),this.InvalidateLayoutBoxesOfNodeAndAncestors(),e.InvalidateComputedStylesOfNodeAndDescendants(),e.InvalidateLayoutBoxesOfNodeAndDescendants(),e.inserted_into_document_&&(e.OnRemovedFromDocument(),e.MarkNotDisplayedOnNodeAndDescendants());let s=e.previous_sibling_;s?s.next_sibling_=e.next_sibling_:this.first_child_=e.next_sibling_;let n=e.next_sibling_;n?n.previous_sibling_=e.previous_sibling_:this.last_child_=e.previous_sibling_,e.parent_=void 0,e.previous_sibling_=void 0,e.next_sibling_=void 0,(o=e.GetDocument())==null||o.OnDOMMutation()}InvalidateLayoutBoxesOfNodeAndAncestors(){this.InvalidateLayoutBoxesOfAncestors()}InvalidateLayoutBoxesOfNodeAndDescendants(){this.InvalidateLayoutBoxesOfDescendants()}InvalidateLayoutBoxesOfAncestors(){this.parent_&&this.parent_.InvalidateLayoutBoxesOfNodeAndAncestors()}InvalidateLayoutBoxesOfDescendants(){let e=this.first_child_;for(;e;)e.InvalidateLayoutBoxesOfNodeAndDescendants(),e=e.next_sibling()}InvalidateComputedStylesOfNodeAndDescendants(){this.InvalidateComputedStylesOfDescendants()}InvalidateComputedStylesOfDescendants(){let e=this.first_child_;for(;e;)e.InvalidateComputedStylesOfNodeAndDescendants(),e=e.next_sibling()}MarkNotDisplayedOnDescendants(){let e=this.first_child_;for(;e;)e.MarkNotDisplayedOnNodeAndDescendants(),e=e.next_sibling_}MarkNotDisplayedOnNodeAndDescendants(){this.MarkNotDisplayedOnDescendants()}GetLayoutObject(){return this.layout_object_}SetLayoutObject(e){this.layout_object_=e}ClearFlag(e){this.node_flags_&=~e}GetFlag(e){return this.node_flags_&e}SetFlag(e){this.node_flags_|=e}ClearNeedsReattachLayoutTree(){this.ClearFlag(4194304)}ClearChildNeedsReattachLayoutTree(){this.ClearFlag(8388608)}ChildNeedsReattachLayoutTree(){return this.GetFlag(8388608)}SetHasDisplayLockContext(){this.SetFlag(67108864)}HasDisplayLockContext(){return this.GetFlag(67108864)}IsInUserAgentShadowRoot(){return console.warn("shadowroot"),!1}DispatchSubtreeModifiedEvent(){}}class RN extends TN{constructor(){super(...arguments);c(this,"entering_node_",!0);c(this,"out_stream_","")}VisitDocument(t){et()}VisitElement(t){this.entering_node_?(this.out_stream_+="<",this.out_stream_+=t.tagName,this.out_stream_=C5(t,this.out_stream_),this.out_stream_+=">"):(this.out_stream_+="</",this.out_stream_+=t.tagName,this.out_stream_+=">")}VisitText(t){this.entering_node_&&(this.out_stream_+=t.data)}SerializeDescendantsOnly(t){let i=t.firstChild;for(;i;)this.Serialize(i),i=i.next_sibling()}Serialize(t){this.entering_node_=!0,t.Accept(this),this.SerializeDescendantsOnly(t),this.entering_node_=!1,t.Accept(this)}SerializeSelfOnly(t){this.entering_node_=!0,t.Accept(this),t.firstChild&&(this.out_stream_+="..."),this.entering_node_=!1,t.Accept(this)}toString(){return this.out_stream_}VisitComment(t){this.entering_node_&&(this.out_stream_+="<!--",this.out_stream_+=t.data,this.out_stream_+="-->")}}function C5(r,e){let t=r.attributes;{const s=r.AsHTMLElement();s&&(e+=" style=",e+=s.style.toString())}let i=Array.from(t.keys());i.sort((s,n)=>s.localeCompare(n));for(let s of i){let n=s,o=t.get(s);e+=" ",e+=n,o.length&&(e+="=",e+='"',e+=o.toString(),e+='"')}return e}function Wn(r,e,...t){Q(r>=e)}function Rr(r,e){Q(r<=e)}function Kt(r,e,...t){}class DN extends PN{ChildrenChangedAllChildrenRemovedNeedsList(){return!1}RemoveChildren(e){if(!!this.first_child_){this.WillRemoveChildren(),this.ChildrenChangedAllChildrenRemovedNeedsList();{{let t;for(;t=this.first_child_;)this.RemoveBetween(void 0,t.nextSibling,t)}e==sy.kDispatchSubtreeModifiedEvent&&this.DispatchSubtreeModifiedEvent()}}}RemoveBetween(e,t,i){Kt(i.parentNode),t&&t.SetPreviousSibling(e),e&&e.SetNextSibling(t),this.first_child_==i&&this.SetFirstChild(t),this.last_child_==i&&this.SetLastChild(e),i.SetPreviousSibling(void 0),i.SetNextSibling(void 0),i.SetParentNode(void 0)}GetChildNodes(){let e=[];for(let t=this.firstChild;t;t=t.nextSibling)e.push(t);return e}WillRemoveChildren(){let e=this.GetChildNodes();for(let t of e)Q(t),this.DispatchChildRemovalEvents(t)}DispatchChildRemovalEvents(e){}NotifyNodeRemoved(e){}AsContainerNode(){return this}SetFirstChild(e){this.first_child_=e}SetLastChild(e){this.last_child_=e}}const uc="style";class O5 extends DN{constructor(t,i,s){var e=(...args)=>{super(...args);c(this,"local_name_");c(this,"attribute_map_",new Map);c(this,"element_flags_",6)};ao(i)?(e(t||Is.kCreateElement),this.local_name_=i):(e(t||Is.kCreateElement,i),this.local_name_=s)}Accept(t){t.VisitElement(this)}getNodeType(){return So.kElementNode}get nodeName(){return this.tagName}get tagName(){return this.local_name_}get className(){return this.getAttribute("class")||""}AsElement(){return this}AsHTMLElement(){}get attributes(){return this.attribute_map_}copyAttributes(t){this.attribute_map_=sa(t.attribute_map_)}setAttribute(t,i){let s=this.GetDocument(),n=i.toString(),o=t.toString();switch(s&&(o=o.toLocaleLowerCase()),o.length){case 5:if(o==uc)throw new Error("500");default:{if(this.attribute_map_.get(o)===n)return;this.attribute_map_.set(o,n);break}}switch(o.length){case 2:o=="id"&&Ue();break;case 5:o=="class"&&Ue();break}s&&this.GetRootNode()==s&&s.OnDOMMutation(),this.OnSetAttribute(o,n)}getAttribute(t){let i=this.GetDocument(),s=t;switch(i&&(s=s.toLocaleLowerCase()),s.length){case 5:if(s==uc)return this.GetStyleAttribute();default:return this.attribute_map_.get(s)||null}}removeAttribute(t){let i=this.GetDocument(),s=t;switch(i&&!i.IsXMLDocument()&&(s=s.toLowerCase()),this.getAttribute(s),s.length){case 5:if(s==uc){this.RemoveStyleAttribute();break}default:{this.attribute_map_.delete(s);break}}switch(s.length){case 2:break;case 5:s=="class"&&this.UpdateGenerationForNodeAndAncestors();break}i&&this.GetRootNode()==i&&i.OnDOMMutation(),this.OnRemoveAttribute(s)}GetStyleAttribute(){return this.attribute_map_.get(uc)||null}RemoveStyleAttribute(){this.attribute_map_.delete(uc)}hasAttribute(t){let i=this.GetDocument(),s=t;return i&&!i.IsXMLDocument()&&(s=s.toLowerCase()),this.attribute_map_.has(s)}inner_html(){let t=new RN;return t.SerializeDescendantsOnly(this),t.toString()}IsInTopLayer(){return this.HasElementFlag(16)}HasElementFlag(t){return Ti(this.element_flags_)?!1:!!(this.element_flags_&t)}}class Yn{}const N5="absolute",I5="alternate",F5="alternate-reverse",M5="auto",B5="backwards",L5="baseline",U5="block",G5="bold",H5="both",z5="bottom",j5="break-word",V5="center",W5="clip",$5="collapse",K5="column",X5="column-reverse",Y5="contain",q5="content",Q5="cover",J5="currentColor",Z5="cursive",e6="ellipsis",t6="end",r6="equirectangular",i6="fantasy",n6="fixed",s6="flex-end",o6="flex",a6="flex-start",l6="forwards",u6="hidden",c6="infinite",h6="inherit",d6="initial",f6="inline-block",_6="inline-flex",p6="inline",g6="inset",m6="italic",x6="left",y6="line-through",v6="middle",E6="monoscopic",S6="monospace",w6="none",A6="no-repeat",nb="normal",b6="nowrap",k6="oblique",T6="pre",P6="pre-line",R6="pre-wrap",D6="relative",C6="repeat",O6="reverse",N6="right",I6="row",F6="row-reverse",M6="sans-serif",B6="scroll",L6="serif",U6="solid",G6="space-around",H6="space-between",z6="start",j6="static",V6="stereoscopic-left-right",W6="stereoscopic-top-bottom",$6="stretch",K6="top",X6="uppercase",Y6="visible",q6="wrap",Q6="wrap-reverse",om=new Map;function rr(r){if(om.has(r))return om.get(r);let e=om.size+1;return om.set(r,e),e}var J6=typeof global=="object"&&global&&global.Object===Object&&global;const Z6=J6;var e7=typeof self=="object"&&self&&self.Object===Object&&self,t7=Z6||e7||Function("return this")();const r7=t7;var i7=r7.Symbol;const jd=i7;var CN=Object.prototype,n7=CN.hasOwnProperty,s7=CN.toString,o_=jd?jd.toStringTag:void 0;function o7(r){var e=n7.call(r,o_),t=r[o_];try{r[o_]=void 0;var i=!0}catch{}var s=s7.call(r);return i&&(e?r[o_]=t:delete r[o_]),s}var a7=Object.prototype,l7=a7.toString;function u7(r){return l7.call(r)}var c7="[object Null]",h7="[object Undefined]",IP=jd?jd.toStringTag:void 0;function d7(r){return r==null?r===void 0?h7:c7:IP&&IP in Object(r)?o7(r):u7(r)}function f7(r){return r!=null&&typeof r=="object"}var _7="[object Symbol]";function p7(r){return typeof r=="symbol"||f7(r)&&d7(r)==_7}function g7(r,e){for(var t=-1,i=r==null?0:r.length,s=Array(i);++t<i;)s[t]=e(r[t],t,r);return s}var m7=Array.isArray;const x7=m7;var y7=1/0,FP=jd?jd.prototype:void 0,MP=FP?FP.toString:void 0;function ON(r){if(typeof r=="string")return r;if(x7(r))return g7(r,ON)+"";if(p7(r))return MP?MP.call(r):"";var e=r+"";return e=="0"&&1/r==-y7?"-0":e}function h1(r){return r==null?"":ON(r)}function v7(r,e,t){var i=-1,s=r.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var n=Array(s);++i<s;)n[i]=r[i+e];return n}function E7(r,e,t){var i=r.length;return t=t===void 0?i:t,!e&&t>=i?r:v7(r,e,t)}var S7="\\ud800-\\udfff",w7="\\u0300-\\u036f",A7="\\ufe20-\\ufe2f",b7="\\u20d0-\\u20ff",k7=w7+A7+b7,T7="\\ufe0e\\ufe0f",P7="\\u200d",R7=RegExp("["+P7+S7+k7+T7+"]");function NN(r){return R7.test(r)}function D7(r){return r.split("")}var IN="\\ud800-\\udfff",C7="\\u0300-\\u036f",O7="\\ufe20-\\ufe2f",N7="\\u20d0-\\u20ff",I7=C7+O7+N7,F7="\\ufe0e\\ufe0f",M7="["+IN+"]",iw="["+I7+"]",nw="\\ud83c[\\udffb-\\udfff]",B7="(?:"+iw+"|"+nw+")",FN="[^"+IN+"]",MN="(?:\\ud83c[\\udde6-\\uddff]){2}",BN="[\\ud800-\\udbff][\\udc00-\\udfff]",L7="\\u200d",LN=B7+"?",UN="["+F7+"]?",U7="(?:"+L7+"(?:"+[FN,MN,BN].join("|")+")"+UN+LN+")*",G7=UN+LN+U7,H7="(?:"+[FN+iw+"?",iw,MN,BN,M7].join("|")+")",z7=RegExp(nw+"(?="+nw+")|"+H7+G7,"g");function j7(r){return r.match(z7)||[]}function V7(r){return NN(r)?j7(r):D7(r)}function W7(r){return function(e){e=h1(e);var t=NN(e)?V7(e):void 0,i=t?t[0]:e.charAt(0),s=t?E7(t,1).join(""):e.slice(1);return i[r]()+s}}var $7=W7("toUpperCase");const K7=$7;function X7(r){return K7(h1(r).toLowerCase())}function Y7(r,e,t,i){var s=-1,n=r==null?0:r.length;for(i&&n&&(t=r[++s]);++s<n;)t=e(t,r[s],s,r);return t}function q7(r){return function(e){return r==null?void 0:r[e]}}var Q7={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},J7=q7(Q7);const Z7=J7;var eG=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tG="\\u0300-\\u036f",rG="\\ufe20-\\ufe2f",iG="\\u20d0-\\u20ff",nG=tG+rG+iG,sG="["+nG+"]",oG=RegExp(sG,"g");function aG(r){return r=h1(r),r&&r.replace(eG,Z7).replace(oG,"")}var lG=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function uG(r){return r.match(lG)||[]}var cG=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hG(r){return cG.test(r)}var GN="\\ud800-\\udfff",dG="\\u0300-\\u036f",fG="\\ufe20-\\ufe2f",_G="\\u20d0-\\u20ff",pG=dG+fG+_G,HN="\\u2700-\\u27bf",zN="a-z\\xdf-\\xf6\\xf8-\\xff",gG="\\xac\\xb1\\xd7\\xf7",mG="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xG="\\u2000-\\u206f",yG=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jN="A-Z\\xc0-\\xd6\\xd8-\\xde",vG="\\ufe0e\\ufe0f",VN=gG+mG+xG+yG,WN="['\u2019]",BP="["+VN+"]",EG="["+pG+"]",$N="\\d+",SG="["+HN+"]",KN="["+zN+"]",XN="[^"+GN+VN+$N+HN+zN+jN+"]",wG="\\ud83c[\\udffb-\\udfff]",AG="(?:"+EG+"|"+wG+")",bG="[^"+GN+"]",YN="(?:\\ud83c[\\udde6-\\uddff]){2}",qN="[\\ud800-\\udbff][\\udc00-\\udfff]",Zh="["+jN+"]",kG="\\u200d",LP="(?:"+KN+"|"+XN+")",TG="(?:"+Zh+"|"+XN+")",UP="(?:"+WN+"(?:d|ll|m|re|s|t|ve))?",GP="(?:"+WN+"(?:D|LL|M|RE|S|T|VE))?",QN=AG+"?",JN="["+vG+"]?",PG="(?:"+kG+"(?:"+[bG,YN,qN].join("|")+")"+JN+QN+")*",RG="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",DG="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",CG=JN+QN+PG,OG="(?:"+[SG,YN,qN].join("|")+")"+CG,NG=RegExp([Zh+"?"+KN+"+"+UP+"(?="+[BP,Zh,"$"].join("|")+")",TG+"+"+GP+"(?="+[BP,Zh+LP,"$"].join("|")+")",Zh+"?"+LP+"+"+UP,Zh+"+"+GP,DG,RG,$N,OG].join("|"),"g");function IG(r){return r.match(NG)||[]}function FG(r,e,t){return r=h1(r),e=t?void 0:e,e===void 0?hG(r)?IG(r):uG(r):r.match(e)||[]}var MG="['\u2019]",BG=RegExp(MG,"g");function LG(r){return function(e){return Y7(FG(aG(e).replace(BG,"")),r,"")}}var UG=LG(function(r,e,t){return e=e.toLowerCase(),r+(t?X7(e):e)});const GG=UG;var _=(r=>(r[r.kAbsolute=0]="kAbsolute",r[r.kAlternate=1]="kAlternate",r[r.kAlternateReverse=2]="kAlternateReverse",r[r.kAuto=3]="kAuto",r[r.kBackwards=4]="kBackwards",r[r.kBaseline=5]="kBaseline",r[r.kBlock=6]="kBlock",r[r.kBoth=7]="kBoth",r[r.kBottom=8]="kBottom",r[r.kBreakWord=9]="kBreakWord",r[r.kCenter=10]="kCenter",r[r.kClip=11]="kClip",r[r.kCollapse=12]="kCollapse",r[r.kColumn=13]="kColumn",r[r.kColumnReverse=14]="kColumnReverse",r[r.kContain=15]="kContain",r[r.kContent=16]="kContent",r[r.kCover=17]="kCover",r[r.kCurrentColor=18]="kCurrentColor",r[r.kCursive=19]="kCursive",r[r.kEllipsis=20]="kEllipsis",r[r.kEnd=21]="kEnd",r[r.kEquirectangular=22]="kEquirectangular",r[r.kFantasy=23]="kFantasy",r[r.kFixed=24]="kFixed",r[r.kFlex=25]="kFlex",r[r.kFlexEnd=26]="kFlexEnd",r[r.kFlexStart=27]="kFlexStart",r[r.kForwards=28]="kForwards",r[r.kHidden=29]="kHidden",r[r.kInfinite=30]="kInfinite",r[r.kInherit=31]="kInherit",r[r.kInitial=32]="kInitial",r[r.kInline=33]="kInline",r[r.kInlineBlock=34]="kInlineBlock",r[r.kInlineFlex=35]="kInlineFlex",r[r.kLeft=36]="kLeft",r[r.kLineThrough=37]="kLineThrough",r[r.kMiddle=38]="kMiddle",r[r.kMonoscopic=39]="kMonoscopic",r[r.kMonospace=40]="kMonospace",r[r.kNone=41]="kNone",r[r.kNoRepeat=42]="kNoRepeat",r[r.kNormal=43]="kNormal",r[r.kNowrap=44]="kNowrap",r[r.kPre=45]="kPre",r[r.kPreLine=46]="kPreLine",r[r.kPreWrap=47]="kPreWrap",r[r.kRelative=48]="kRelative",r[r.kRepeat=49]="kRepeat",r[r.kReverse=50]="kReverse",r[r.kRight=51]="kRight",r[r.kRow=52]="kRow",r[r.kRowReverse=53]="kRowReverse",r[r.kSansSerif=54]="kSansSerif",r[r.kScroll=55]="kScroll",r[r.kSerif=56]="kSerif",r[r.kSolid=57]="kSolid",r[r.kSpaceAround=58]="kSpaceAround",r[r.kSpaceBetween=59]="kSpaceBetween",r[r.kStart=60]="kStart",r[r.kStatic=61]="kStatic",r[r.kStereoscopicLeftRight=62]="kStereoscopicLeftRight",r[r.kStereoscopicTopBottom=63]="kStereoscopicTopBottom",r[r.kStretch=64]="kStretch",r[r.kTop=65]="kTop",r[r.kUppercase=66]="kUppercase",r[r.kVisible=67]="kVisible",r[r.kWrap=68]="kWrap",r[r.kWrapReverse=69]="kWrapReverse",r[r.kMaxKeywordValue=69]="kMaxKeywordValue",r))(_||{});let Wt;class _e extends Yn{constructor(t){super();c(this,"value_");this.value_=t}GetTypeId(){return rr(_e)}static GetAbsolute(){return Wt.absolute}static GetAuto(){return Wt.auto}static GetBaseline(){return Wt.baseline}static GetBlock(){return Wt.block}static GetBottom(){return Wt.bottom}static GetBreakWord(){return Wt.breakWord}static GetCenter(){return Wt.center}static GetClip(){return Wt.clip}static GetCurrentColor(){return Wt.currentColor}static GetEllipsis(){return Wt.ellipsis}static GetEnd(){return Wt.end}static GetFixed(){return Wt.fixed}static GetFlex(){return Wt.flex}static GetFlexStart(){return Wt.flexStart}static GetHidden(){return Wt.hidden}static GetInherit(){return Wt.inherit}static GetInitial(){return Wt.initial}static GetInline(){return Wt.inline}static GetInlineBlock(){return Wt.inlineBlock}static GetInlineFlex(){return Wt.inlineFlex}static GetLeft(){return Wt.left}static GetMiddle(){return Wt.middle}static GetNone(){return Wt.none}static GetNormal(){return Wt.normal}static GetNowrap(){return Wt.nowrap}static GetPre(){return Wt.pre}static GetPreLine(){return Wt.preLine}static GetPreWrap(){return Wt.preWrap}static GetRelative(){return Wt.relative}static GetRepeat(){return Wt.repeat}static GetRight(){return Wt.right}static GetRow(){return Wt.row}static GetScroll(){return Wt.scroll}static GetSolid(){return Wt.solid}static GetStart(){return Wt.start}static GetStatic(){return Wt.static}static GetStretch(){return Wt.stretch}static GetTop(){return Wt.top}static GetUppercase(){return Wt.uppercase}static GetVisible(){return Wt.visible}static fromString(t){const i=Reflect.get(Wt,GG(t));return i||(Ue(),console.log("404",i)),i}Accept(t){t.VisitKeyword(this)}value(){return this.value_}ToString(){switch(this.value_){case 0:return N5;case 1:return I5;case 2:return F5;case 3:return M5;case 4:return B5;case 5:return L5;case 6:return U5;case 7:return H5;case 8:return z5;case 9:return j5;case 10:return V5;case 11:return W5;case 12:return $5;case 13:return K5;case 14:return X5;case 15:return Y5;case 16:return q5;case 17:return Q5;case 18:return J5;case 19:return Z5;case 20:return e6;case 21:return t6;case 22:return r6;case 23:return i6;case 28:return l6;case 24:return n6;case 25:return o6;case 26:return s6;case 27:return a6;case 29:return u6;case 30:return c6;case 31:return h6;case 32:return d6;case 33:return p6;case 34:return f6;case 35:return _6;case 36:return x6;case 37:return y6;case 38:return v6;case 40:return S6;case 39:return E6;case 41:return w6;case 42:return A6;case 43:return nb;case 44:return b6;case 45:return T6;case 46:return P6;case 47:return R6;case 48:return D6;case 49:return C6;case 50:return O6;case 51:return N6;case 52:return I6;case 53:return F6;case 55:return B6;case 54:return M6;case 56:return L6;case 57:return U6;case 58:return G6;case 59:return H6;case 60:return z6;case 61:return j6;case 62:return V6;case 63:return W6;case 64:return $6;case 65:return K6;case 66:return X6;case 67:return Y6;case 68:return q6;case 69:return Q6}return""}EQ(t){return t instanceof _e?this.value_===t.value_:!1}}class HG{constructor(){c(this,"absolute");c(this,"alternate");c(this,"alternateReverse");c(this,"auto");c(this,"backwards");c(this,"baseline");c(this,"block");c(this,"both");c(this,"bottom");c(this,"breakWord");c(this,"center");c(this,"clip");c(this,"collapse");c(this,"column");c(this,"columnReverse");c(this,"contain");c(this,"content");c(this,"cover");c(this,"currentColor");c(this,"cursive");c(this,"ellipsis");c(this,"end");c(this,"equirectangular");c(this,"fantasy");c(this,"fixed");c(this,"flex");c(this,"flexEnd");c(this,"flexStart");c(this,"forwards");c(this,"hidden");c(this,"infinite");c(this,"inherit");c(this,"initial");c(this,"inlineBlock");c(this,"inlineFlex");c(this,"inline");c(this,"left");c(this,"lineThrough");c(this,"middle");c(this,"monoscopic");c(this,"monospace");c(this,"none");c(this,"noRepeat");c(this,"normal");c(this,"nowrap");c(this,"pre");c(this,"preLine");c(this,"preWrap");c(this,"relative");c(this,"repeat");c(this,"reverse");c(this,"right");c(this,"row");c(this,"rowReverse");c(this,"sansSerif");c(this,"scroll");c(this,"serif");c(this,"solid");c(this,"spaceAround");c(this,"spaceBetween");c(this,"start");c(this,"static");c(this,"stereoscopicLeftRight");c(this,"stereoscopicTopBottom");c(this,"stretch");c(this,"top");c(this,"uppercase");c(this,"visible");c(this,"wrap");c(this,"wrapReverse");this.absolute=new _e(0),this.alternate=new _e(1),this.alternateReverse=new _e(2),this.auto=new _e(3),this.backwards=new _e(4),this.baseline=new _e(5),this.block=new _e(6),this.both=new _e(7),this.bottom=new _e(8),this.breakWord=new _e(9),this.center=new _e(10),this.clip=new _e(11),this.collapse=new _e(12),this.column=new _e(13),this.columnReverse=new _e(14),this.contain=new _e(15),this.content=new _e(16),this.cover=new _e(17),this.currentColor=new _e(18),this.cursive=new _e(19),this.ellipsis=new _e(20),this.end=new _e(21),this.equirectangular=new _e(22),this.fantasy=new _e(23),this.fixed=new _e(24),this.flex=new _e(25),this.flexEnd=new _e(26),this.flexStart=new _e(27),this.forwards=new _e(28),this.hidden=new _e(29),this.infinite=new _e(30),this.inherit=new _e(31),this.initial=new _e(32),this.inlineBlock=new _e(34),this.inlineFlex=new _e(35),this.inline=new _e(33),this.left=new _e(36),this.lineThrough=new _e(37),this.middle=new _e(38),this.monoscopic=new _e(39),this.monospace=new _e(40),this.none=new _e(41),this.noRepeat=new _e(42),this.normal=new _e(43),this.nowrap=new _e(44),this.pre=new _e(45),this.preLine=new _e(46),this.preWrap=new _e(47),this.relative=new _e(48),this.repeat=new _e(49),this.reverse=new _e(50),this.right=new _e(51),this.row=new _e(52),this.rowReverse=new _e(53),this.sansSerif=new _e(54),this.scroll=new _e(55),this.serif=new _e(56),this.solid=new _e(57),this.spaceAround=new _e(58),this.spaceBetween=new _e(59),this.start=new _e(60),this.static=new _e(61),this.stereoscopicLeftRight=new _e(62),this.stereoscopicTopBottom=new _e(63),this.stretch=new _e(64),this.top=new _e(65),this.uppercase=new _e(66),this.visible=new _e(67),this.wrap=new _e(68),this.wrapReverse=new _e(69)}}Wt=new HG;function fu(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}class si{constructor(e,t,i,s=1){c(this,"_rgbaBrand");c(this,"r");c(this,"g");c(this,"b");c(this,"a");this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=fu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class mo{constructor(e,t,i,s){c(this,"_hslaBrand");c(this,"h");c(this,"s");c(this,"l");c(this,"a");this.h=Math.max(Math.min(360,e),0)|0,this.s=fu(Math.max(Math.min(1,t),0),3),this.l=fu(Math.max(Math.min(1,i),0),3),this.a=fu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,n=e.a,o=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,u=0;const d=(a+o)/2,f=o-a;if(f>0){switch(u=Math.min(d<=.5?f/(2*d):f/(2-2*d),1),o){case t:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-t)/f+2;break;case s:l=(t-i)/f+4;break}l*=60,l=Math.round(l)}return new mo(l,u,d,n)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:n}=e;let o,a,l;if(i===0)o=a=l=s;else{const u=s<.5?s*(1+i):s+i-s*i,d=2*s-u;o=mo._hue2rgb(d,u,t+1/3),a=mo._hue2rgb(d,u,t),l=mo._hue2rgb(d,u,t-1/3)}return new si(Math.round(o*255),Math.round(a*255),Math.round(l*255),n)}}class nd{constructor(e,t,i,s){c(this,"_hsvaBrand");c(this,"h");c(this,"s");c(this,"v");c(this,"a");this.h=Math.max(Math.min(360,e),0)|0,this.s=fu(Math.max(Math.min(1,t),0),3),this.v=fu(Math.max(Math.min(1,i),0),3),this.a=fu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,n=Math.max(t,i,s),o=Math.min(t,i,s),a=n-o,l=n===0?0:a/n;let u;return a===0?u=0:n===t?u=((i-s)/a%6+6)%6:n===i?u=(s-t)/a+2:u=(t-i)/a+4,new nd(Math.round(u*60),l,n,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:n}=e,o=s*i,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[u,d,f]=[0,0,0];return t<60?(u=o,d=a):t<120?(u=a,d=o):t<180?(d=o,f=a):t<240?(d=a,f=o):t<300?(u=a,f=o):t<=360&&(u=o,f=a),u=Math.round((u+l)*255),d=Math.round((d+l)*255),f=Math.round((f+l)*255),new si(u,d,f,n)}}const Lr=class{constructor(e){c(this,"rgba");c(this,"_hsla");c(this,"_hsva");c(this,"_toString");if(e)if(e instanceof si)this.rgba=e;else if(e instanceof mo)this._hsla=e,this.rgba=mo.toRGBA(e);else if(e instanceof nd)this._hsva=e,this.rgba=nd.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Lr.Format.CSS.parseHex(e)}get hsla(){return this._hsla?this._hsla:mo.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:nd.fromRGBA(this.rgba)}equals(e){return!!e&&si.equals(this.rgba,e.rgba)&&mo.equals(this.hsla,e.hsla)&&nd.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Lr._relativeLuminanceForComponent(this.rgba.r),t=Lr._relativeLuminanceForComponent(this.rgba.g),i=Lr._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return fu(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new Lr(new mo(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Lr(new mo(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:n}=this.rgba;return new Lr(new si(t,i,s,n*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Lr(new si(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,i=this.rgba.a,s=t.a,n=i+s*(1-i);if(n<1e-6)return Lr.transparent;const o=this.rgba.r*i/n+t.r*s*(1-i)/n,a=this.rgba.g*i/n+t.g*s*(1-i)/n,l=this.rgba.b*i/n+t.b*s*(1-i)/n;return new Lr(new si(o,a,l,n))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:n}=this.rgba;return new Lr(new si(e.rgba.r-n*(e.rgba.r-t),e.rgba.g-n*(e.rgba.g-i),e.rgba.b-n*(e.rgba.b-s),1))}flatten(...e){const t=e.reduceRight((i,s)=>Lr._flatten(s,i));return Lr._flatten(this,t)}static _flatten(e,t){const i=1-e.rgba.a;return new Lr(new si(i*t.rgba.r+e.rgba.a*e.rgba.r,i*t.rgba.g+e.rgba.a*e.rgba.g,i*t.rgba.b+e.rgba.a*e.rgba.b))}toString(){return this._toString||(this._toString=Lr.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),n=t.getRelativeLuminance();return i=i*(n-s)/n,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),n=t.getRelativeLuminance();return i=i*(s-n)/s,e.darken(i)}};let En=Lr;c(En,"white",new Lr(new si(255,255,255,1))),c(En,"black",new Lr(new si(0,0,0,1))),c(En,"red",new Lr(new si(255,0,0,1))),c(En,"blue",new Lr(new si(0,0,255,1))),c(En,"green",new Lr(new si(0,255,0,1))),c(En,"cyan",new Lr(new si(0,255,255,1))),c(En,"lightgrey",new Lr(new si(211,211,211,1))),c(En,"transparent",new Lr(new si(0,0,0,0)));(r=>{(e=>{(t=>{function i(x){return x.rgba.a===1?`rgb(${x.rgba.r}, ${x.rgba.g}, ${x.rgba.b})`:r.Format.CSS.formatRGBA(x)}t.formatRGB=i;function s(x){return`rgba(${x.rgba.r}, ${x.rgba.g}, ${x.rgba.b}, ${+x.rgba.a.toFixed(2)})`}t.formatRGBA=s;function n(x){return x.hsla.a===1?`hsl(${x.hsla.h}, ${(x.hsla.s*100).toFixed(2)}%, ${(x.hsla.l*100).toFixed(2)}%)`:r.Format.CSS.formatHSLA(x)}t.formatHSL=n;function o(x){return`hsla(${x.hsla.h}, ${(x.hsla.s*100).toFixed(2)}%, ${(x.hsla.l*100).toFixed(2)}%, ${x.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(x){const E=x.toString(16);return E.length!==2?"0"+E:E}function l(x){return`#${a(x.rgba.r)}${a(x.rgba.g)}${a(x.rgba.b)}`}t.formatHex=l;function u(x,E=!1){return E&&x.rgba.a===1?r.Format.CSS.formatHex(x):`#${a(x.rgba.r)}${a(x.rgba.g)}${a(x.rgba.b)}${a(Math.round(x.rgba.a*255))}`}t.formatHexA=u;function d(x){return x.isOpaque()?r.Format.CSS.formatHex(x):r.Format.CSS.formatRGBA(x)}t.format=d;function f(x){const E=x.length;if(E===0||x.charCodeAt(0)!==wt.Hash)return null;if(E===7){const P=16*g(x.charCodeAt(1))+g(x.charCodeAt(2)),b=16*g(x.charCodeAt(3))+g(x.charCodeAt(4)),R=16*g(x.charCodeAt(5))+g(x.charCodeAt(6));return new r(new si(P,b,R,1))}if(E===9){const P=16*g(x.charCodeAt(1))+g(x.charCodeAt(2)),b=16*g(x.charCodeAt(3))+g(x.charCodeAt(4)),R=16*g(x.charCodeAt(5))+g(x.charCodeAt(6)),D=16*g(x.charCodeAt(7))+g(x.charCodeAt(8));return new r(new si(P,b,R,D/255))}if(E===4){const P=g(x.charCodeAt(1)),b=g(x.charCodeAt(2)),R=g(x.charCodeAt(3));return new r(new si(16*P+P,16*b+b,16*R+R))}if(E===5){const P=g(x.charCodeAt(1)),b=g(x.charCodeAt(2)),R=g(x.charCodeAt(3)),D=g(x.charCodeAt(4));return new r(new si(16*P+P,16*b+b,16*R+R,(16*D+D)/255))}return null}t.parseHex=f;function g(x){switch(x){case wt.Digit0:return 0;case wt.Digit1:return 1;case wt.Digit2:return 2;case wt.Digit3:return 3;case wt.Digit4:return 4;case wt.Digit5:return 5;case wt.Digit6:return 6;case wt.Digit7:return 7;case wt.Digit8:return 8;case wt.Digit9:return 9;case wt.a:return 10;case wt.A:return 10;case wt.b:return 11;case wt.B:return 11;case wt.c:return 12;case wt.C:return 12;case wt.d:return 13;case wt.D:return 13;case wt.e:return 14;case wt.E:return 14;case wt.f:return 15;case wt.F:return 15}return 0}})(e.CSS||(e.CSS={}))})(r.Format||(r.Format={}))})(En||(En={}));function zG(r){return`${r*100}%`}function am(r,e,t){return Math.min(Math.max(e,r),t)}function As(r){return Math.round(r)}const jG=16777215,VG=255,WG=65535,$G=4278255615,KG=2155905279,XG=8388863,YG=16711935,qG=2147483903,QG=33023,JG=2155872511,ZG=2147516671,e9=4278190335,t9=3233857791,r9=8421631,i9=0,n9=4294967295,s9=4294902015;let ZN;class kr extends Yn{constructor(t,i,s,n){super();c(this,"value_");arguments.length==1?this.value_=As(t):(lm(t),lm(i),lm(s),lm(n),this.value_=As(t<<24)|As(i<<16)|As(s<<8)|As(n<<0))}static fromString(t){const i=Reflect.get(ZN,t);return Q(i),i}static fromHex(t){const i=En.fromHex(t);Q(i);const{rgba:s}=i;return new kr(s.r,s.g,s.b,s.a*255)}Accept(t){t.VisitRGBAColor(this)}value(){return this.value_}r(){return As(this.value_>>24&255)}g(){return As(this.value_>>16&255)}b(){return As(this.value_>>8&255)}a(){return As(this.value_>>0&255)}ToString(){return`rgba(${this.r()}, ${this.g()}, ${this.b()}, ${this.a()/255})`}EQ(t){return this.value_==t.value_}GetTypeId(){return rr(kr)}}function lm(r){Q(0<=r),Q(255>=r)}class o9{constructor(){c(this,"aqua",new kr(jG));c(this,"black",new kr(VG));c(this,"blue",new kr(WG));c(this,"fuchsia",new kr($G));c(this,"gray",new kr(KG));c(this,"green",new kr(XG));c(this,"lime",new kr(YG));c(this,"maroon",new kr(qG));c(this,"navy",new kr(QG));c(this,"olive",new kr(JG));c(this,"purple",new kr(ZG));c(this,"red",new kr(e9));c(this,"silver",new kr(t9));c(this,"teal",new kr(r9));c(this,"transparent",new kr(i9));c(this,"white",new kr(n9));c(this,"yellow",new kr(s9))}}ZN=new o9;class a9 extends Yn{constructor(t){super();c(this,"value_");this.value_=t,Q(t),Q(t.length)}value(){return this.value_}EQ(t){if(this.value_.length!==t.value_.length)return!1;for(let i=0;i<this.value_.length;i++)this.value_[i];return!0}}class wo extends a9{constructor(e){super(e)}Accept(e){e.VisitPropertyList(this)}ToString(){return this.value().map(e=>e.ToString()).join(", ")}GetTypeId(){return rr(wo)}}var Ft=(r=>(r[r.kPixelsUnit=0]="kPixelsUnit",r[r.kAbsoluteUnitMax=0]="kAbsoluteUnitMax",r[r.kFontSizesAkaEmUnit=1]="kFontSizesAkaEmUnit",r[r.kRootElementFontSizesAkaRemUnit=2]="kRootElementFontSizesAkaRemUnit",r[r.kViewportWidthPercentsAkaVwUnit=3]="kViewportWidthPercentsAkaVwUnit",r[r.kViewportHeightPercentsAkaVhUnit=4]="kViewportHeightPercentsAkaVhUnit",r))(Ft||{});class Qt extends Yn{constructor(t,i){super();c(this,"value_");c(this,"unit_");this.value_=t,this.unit_=i}Accept(t){t.VisitLength(this)}value(){return this.value_}unit(){return this.unit_}IsUnitRelative(){return this.unit_>0}ToString(){const t=["px","em","rem","vw","vh"];return`${this.value_}${t[this.unit_]}`}EQ(t){return this.value_==t.value_&&this.unit_==t.unit_}GE(t){return Kt(this.unit_,t.unit_,"Value larger comparison of length values ","can only be done for matching unit types"),this.value_>=t.value_}LE(t){return Kt(this.unit_,t.unit_,"Value smaller comparison of length ","values can only be done for matching ","unit types"),this.value_<=t.value_}GetTypeId(){return rr(Qt)}}class Js extends Yn{constructor(t){super();c(this,"value_");this.value_=t}Accept(t){t.VisitPercentage(this)}value(){return this.value_}ToString(){return zG(this.value_)}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(Js)}}class ca extends Yn{constructor(t,i){super();c(this,"length_value_",new Qt(0,Ft.kPixelsUnit));c(this,"percentage_value_",new Js(0));t instanceof Qt?this.length_value_=t:t instanceof Js&&(this.percentage_value_=t),i&&(this.percentage_value_=i)}Accept(t){t.VisitCalc(this)}length_value(){return this.length_value_}percentage_value(){return this.percentage_value_}ToString(){return`calc(${this.length_value_.ToString()} + ${this.percentage_value_.ToString()})`}EQ(t){return this.length_value_.EQ(t.length_value_)&&this.percentage_value_.EQ(t.percentage_value_)}GetTypeId(){return rr(ca)}}class Vp extends Yn{constructor(t){super();c(this,"value_");this.value_=t}Accept(t){t.VisitNumber(this)}value(){return this.value_}ToString(){return this.value_.toString()}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(Vp)}}class d1 extends Yn{constructor(t){super();c(this,"value_");this.value_=t}Accept(t){t.VisitString(this)}value(){return this.value_}ToString(){return"'"+this.value_+"'"}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(d1)}}var e3=(r=>(r[r.kItalic=0]="kItalic",r[r.kNormal=1]="kNormal",r[r.kOblique=2]="kOblique",r))(e3||{});class bc extends Yn{constructor(t){super();c(this,"value_",1);this.value_=t}static GetItalic(){return yE.italic}static GetNormal(){return yE.normal}static GetOblique(){return yE.oblique}Accept(t){t.VisitFontStyle(this)}value(){return this.value_}ToString(){switch(this.value_){case 0:return m6;case 1:return nb;case 2:return k6;default:return et(),""}}GetTypeId(){return rr(bc)}EQ(t){return t instanceof bc?this.value_===t.value_:!1}}class l9{constructor(){c(this,"italic",new bc(0));c(this,"normal",new bc(1));c(this,"oblique",new bc(2))}}const yE=new l9;var Zo=(r=>(r[r.kThinAka100=0]="kThinAka100",r[r.kExtraLightAka200=1]="kExtraLightAka200",r[r.kLightAka300=2]="kLightAka300",r[r.kNormalAka400=3]="kNormalAka400",r[r.kMediumAka500=4]="kMediumAka500",r[r.kSemiBoldAka600=5]="kSemiBoldAka600",r[r.kBoldAka700=6]="kBoldAka700",r[r.kExtraBoldAka800=7]="kExtraBoldAka800",r[r.kBlackAka900=8]="kBlackAka900",r))(Zo||{});class Ys extends Yn{constructor(t){super();c(this,"value_");this.value_=t}static GetThinAka100(){return $a.thin_aka_100}static GetExtraLightAka200(){return $a.extra_light_aka_200}static GetLightAka300(){return $a.light_aka_300}static GetNormalAka400(){return $a.normal_aka_400}static GetMediumAka500(){return $a.medium_aka_500}static GetSemiBoldAka600(){return $a.semi_bold_aka_600}static GetBoldAka700(){return $a.bold_aka_700}static GetExtraBoldAka800(){return $a.extra_bold_aka_800}static GetBlackAka900(){return $a.black_aka_900}Accept(t){t.VisitFontWeight(this)}value(){return this.value_}ToString(){switch(this.value_){case 3:return nb;case 6:return G5;case 0:case 1:case 2:case 4:case 5:case 7:case 8:default:Ue()}}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(Ys)}}class u9{constructor(){c(this,"thin_aka_100");c(this,"extra_light_aka_200");c(this,"light_aka_300");c(this,"normal_aka_400");c(this,"medium_aka_500");c(this,"semi_bold_aka_600");c(this,"bold_aka_700");c(this,"extra_bold_aka_800");c(this,"black_aka_900");this.thin_aka_100=new Ys(0),this.extra_light_aka_200=new Ys(1),this.light_aka_300=new Ys(2),this.normal_aka_400=new Ys(3),this.medium_aka_500=new Ys(4),this.semi_bold_aka_600=new Ys(5),this.bold_aka_700=new Ys(6),this.extra_bold_aka_800=new Ys(7),this.black_aka_900=new Ys(8)}}let $a=new u9;class oy extends Yn{constructor(t){super();c(this,"value_");this.value_=t}Accept(t){t.VisitInteger(this)}value(){return this.value_}ToString(){return this.value_.toString()}GetTypeId(){return rr(oy)}EQ(t){return t instanceof oy?this.value_===t.value_:!1}}class ay extends Yn{constructor(t,i){super();c(this,"start_");c(this,"end_");this.start_=t,this.end_=i}Accept(t){t.VisitUnicodeRange(this)}start(){return this.start_}end(){return this.end_}ToString(){return this.start_==this.end_?`U+${this.start_.toString(16)}`:`U+${this.start_.toString(16)}-${this.end_.toString(16)}`}EQ(t){return t instanceof ay?this.start_==t.start_&&this.end_==t.end_:!1}IsValid(){return this.start_<=this.end_}GetTypeId(){return rr(ay)}}var T=(r=>(r[r.kNoneProperty=-1]="kNoneProperty",r[r.kAlignContentProperty=0]="kAlignContentProperty",r[r.kAlignItemsProperty=1]="kAlignItemsProperty",r[r.kAlignSelfProperty=2]="kAlignSelfProperty",r[r.kBackgroundColorProperty=3]="kBackgroundColorProperty",r[r.kBackgroundImageProperty=4]="kBackgroundImageProperty",r[r.kBackgroundPositionProperty=5]="kBackgroundPositionProperty",r[r.kBackgroundRepeatProperty=6]="kBackgroundRepeatProperty",r[r.kBackgroundSizeProperty=7]="kBackgroundSizeProperty",r[r.kBorderBottomColorProperty=8]="kBorderBottomColorProperty",r[r.kBorderBottomLeftRadiusProperty=9]="kBorderBottomLeftRadiusProperty",r[r.kBorderBottomRightRadiusProperty=10]="kBorderBottomRightRadiusProperty",r[r.kBorderBottomStyleProperty=11]="kBorderBottomStyleProperty",r[r.kBorderBottomWidthProperty=12]="kBorderBottomWidthProperty",r[r.kBorderLeftColorProperty=13]="kBorderLeftColorProperty",r[r.kBorderLeftStyleProperty=14]="kBorderLeftStyleProperty",r[r.kBorderLeftWidthProperty=15]="kBorderLeftWidthProperty",r[r.kBorderRightColorProperty=16]="kBorderRightColorProperty",r[r.kBorderRightStyleProperty=17]="kBorderRightStyleProperty",r[r.kBorderRightWidthProperty=18]="kBorderRightWidthProperty",r[r.kBorderTopColorProperty=19]="kBorderTopColorProperty",r[r.kBorderTopLeftRadiusProperty=20]="kBorderTopLeftRadiusProperty",r[r.kBorderTopRightRadiusProperty=21]="kBorderTopRightRadiusProperty",r[r.kBorderTopStyleProperty=22]="kBorderTopStyleProperty",r[r.kBorderTopWidthProperty=23]="kBorderTopWidthProperty",r[r.kBottomProperty=24]="kBottomProperty",r[r.kBoxShadowProperty=25]="kBoxShadowProperty",r[r.kColorProperty=26]="kColorProperty",r[r.kContentProperty=27]="kContentProperty",r[r.kDisplayProperty=28]="kDisplayProperty",r[r.kFilterProperty=29]="kFilterProperty",r[r.kFlexBasisProperty=30]="kFlexBasisProperty",r[r.kFlexDirectionProperty=31]="kFlexDirectionProperty",r[r.kFlexGrowProperty=32]="kFlexGrowProperty",r[r.kFlexShrinkProperty=33]="kFlexShrinkProperty",r[r.kFlexWrapProperty=34]="kFlexWrapProperty",r[r.kFontFamilyProperty=35]="kFontFamilyProperty",r[r.kFontSizeProperty=36]="kFontSizeProperty",r[r.kFontStyleProperty=37]="kFontStyleProperty",r[r.kFontWeightProperty=38]="kFontWeightProperty",r[r.kHeightProperty=39]="kHeightProperty",r[r.kIntersectionObserverRootMarginProperty=40]="kIntersectionObserverRootMarginProperty",r[r.kJustifyContentProperty=41]="kJustifyContentProperty",r[r.kLeftProperty=42]="kLeftProperty",r[r.kLineHeightProperty=43]="kLineHeightProperty",r[r.kMarginBottomProperty=44]="kMarginBottomProperty",r[r.kMarginLeftProperty=45]="kMarginLeftProperty",r[r.kMarginRightProperty=46]="kMarginRightProperty",r[r.kMarginTopProperty=47]="kMarginTopProperty",r[r.kMaxHeightProperty=48]="kMaxHeightProperty",r[r.kMaxWidthProperty=49]="kMaxWidthProperty",r[r.kMinHeightProperty=50]="kMinHeightProperty",r[r.kMinWidthProperty=51]="kMinWidthProperty",r[r.kOpacityProperty=52]="kOpacityProperty",r[r.kOrderProperty=53]="kOrderProperty",r[r.kOutlineColorProperty=54]="kOutlineColorProperty",r[r.kOutlineStyleProperty=55]="kOutlineStyleProperty",r[r.kOutlineWidthProperty=56]="kOutlineWidthProperty",r[r.kOverflowProperty=57]="kOverflowProperty",r[r.kOverflowWrapProperty=58]="kOverflowWrapProperty",r[r.kPaddingBottomProperty=59]="kPaddingBottomProperty",r[r.kPaddingLeftProperty=60]="kPaddingLeftProperty",r[r.kPaddingRightProperty=61]="kPaddingRightProperty",r[r.kPaddingTopProperty=62]="kPaddingTopProperty",r[r.kPointerEventsProperty=63]="kPointerEventsProperty",r[r.kPositionProperty=64]="kPositionProperty",r[r.kRightProperty=65]="kRightProperty",r[r.kTextAlignProperty=66]="kTextAlignProperty",r[r.kTextDecorationColorProperty=67]="kTextDecorationColorProperty",r[r.kTextDecorationLineProperty=68]="kTextDecorationLineProperty",r[r.kTextIndentProperty=69]="kTextIndentProperty",r[r.kTextOverflowProperty=70]="kTextOverflowProperty",r[r.kTextShadowProperty=71]="kTextShadowProperty",r[r.kTextTransformProperty=72]="kTextTransformProperty",r[r.kTopProperty=73]="kTopProperty",r[r.kTransformOriginProperty=74]="kTransformOriginProperty",r[r.kTransformProperty=75]="kTransformProperty",r[r.kVerticalAlignProperty=76]="kVerticalAlignProperty",r[r.kVisibilityProperty=77]="kVisibilityProperty",r[r.kWhiteSpaceProperty=78]="kWhiteSpaceProperty",r[r.kWidthProperty=79]="kWidthProperty",r[r.kZIndexProperty=80]="kZIndexProperty",r[r.kMaxLonghandPropertyKey=80]="kMaxLonghandPropertyKey",r[r.kAllProperty=81]="kAllProperty",r[r.kSrcProperty=82]="kSrcProperty",r[r.kUnicodeRangeProperty=83]="kUnicodeRangeProperty",r[r.kWordWrapProperty=84]="kWordWrapProperty",r[r.kFirstShorthandPropertyKey=85]="kFirstShorthandPropertyKey",r[r.kBackgroundProperty=85]="kBackgroundProperty",r[r.kBorderBottomProperty=86]="kBorderBottomProperty",r[r.kBorderColorProperty=87]="kBorderColorProperty",r[r.kBorderLeftProperty=88]="kBorderLeftProperty",r[r.kBorderProperty=89]="kBorderProperty",r[r.kBorderRadiusProperty=90]="kBorderRadiusProperty",r[r.kBorderRightProperty=91]="kBorderRightProperty",r[r.kBorderStyleProperty=92]="kBorderStyleProperty",r[r.kBorderTopProperty=93]="kBorderTopProperty",r[r.kBorderWidthProperty=94]="kBorderWidthProperty",r[r.kFlexProperty=95]="kFlexProperty",r[r.kFlexFlowProperty=96]="kFlexFlowProperty",r[r.kFontProperty=97]="kFontProperty",r[r.kMarginProperty=98]="kMarginProperty",r[r.kOutlineProperty=99]="kOutlineProperty",r[r.kPaddingProperty=100]="kPaddingProperty",r[r.kTextDecorationProperty=101]="kTextDecorationProperty",r[r.kMaxShorthandPropertyKey=101]="kMaxShorthandPropertyKey",r[r.kMaxEveryPropertyKey=101]="kMaxEveryPropertyKey",r[r.kNumLonghandProperties=81]="kNumLonghandProperties",r))(T||{}),ly=(r=>(r[r.kInheritedNo=0]="kInheritedNo",r[r.kInheritedYes=1]="kInheritedYes",r))(ly||{}),t3=(r=>(r[r.kImpactsChildComputedStyleNo=0]="kImpactsChildComputedStyleNo",r[r.kImpactsChildComputedStyleYes=1]="kImpactsChildComputedStyleYes",r))(t3||{}),r3=(r=>(r[r.kImpactsBoxGenerationNo=0]="kImpactsBoxGenerationNo",r[r.kImpactsBoxGenerationYes=1]="kImpactsBoxGenerationYes",r))(r3||{}),i3=(r=>(r[r.kImpactsBoxSizesNo=0]="kImpactsBoxSizesNo",r[r.kImpactsBoxSizesYes=1]="kImpactsBoxSizesYes",r))(i3||{}),n3=(r=>(r[r.kImpactsBoxCrossReferencesNo=0]="kImpactsBoxCrossReferencesNo",r[r.kImpactsBoxCrossReferencesYes=1]="kImpactsBoxCrossReferencesYes",r))(n3||{});class HP{constructor(e){c(this,"name","");c(this,"inherited",0);c(this,"animatable",0);c(this,"impacts_child_computed_style",0);c(this,"impacts_box_generation",0);c(this,"impacts_box_sizes",0);c(this,"impacts_box_cross_references",0);c(this,"initial_value");c(this,"longhand_properties",new Set);this.initial_value=e}}class c9{constructor(){c(this,"properties",[]);c(this,"animatable_properties",[]);c(this,"inherited_animatable_properties",[]);c(this,"inherited_properties",[]);this.SetPropertyDefinition(0,"align-content",0,0,0,0,1,0,_e.GetStretch()),this.SetPropertyDefinition(1,"align-items",0,0,0,0,1,0,_e.GetStretch()),this.SetPropertyDefinition(2,"align-self",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(3,"background-color",0,1,0,0,0,0,new kr(0)),this.SetPropertyDefinition(4,"background-image",0,0,0,0,0,0,zP(_e.GetNone()));let e=new Array(2);e.push(new ca(new Js(0))),e.push(new ca(new Js(0)));let t=new wo(e);this.SetPropertyDefinition(5,"background-position",0,0,0,0,0,0,t);let i=new Array(2);i.push(_e.GetRepeat()),i.push(_e.GetRepeat());let s=new wo(i);this.SetPropertyDefinition(6,"background-repeat",0,0,0,0,0,0,s);let n=new Array(2);n.push(_e.GetAuto()),n.push(_e.GetAuto());let o=new wo(n);this.SetPropertyDefinition(7,"background-size",0,0,0,0,0,0,o),this.SetPropertyDefinition(19,"border-top-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(16,"border-right-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(8,"border-bottom-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(13,"border-left-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(22,"border-top-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(17,"border-right-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(11,"border-bottom-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(14,"border-left-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(23,"border-top-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(18,"border-right-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(12,"border-bottom-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(15,"border-left-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(20,"border-top-left-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(21,"border-top-right-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(10,"border-bottom-right-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(9,"border-bottom-left-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(24,"bottom",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(25,"box-shadow",0,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(26,"color",1,1,1,1,0,0,new kr(255)),this.SetPropertyDefinition(27,"content",0,0,0,1,0,0,_e.GetNormal()),this.SetPropertyDefinition(28,"display",0,0,0,1,0,0,_e.GetBlock()),this.SetPropertyDefinition(29,"filter",0,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(30,"flex-basis",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(31,"flex-direction",0,0,0,0,1,0,_e.GetRow()),this.SetPropertyDefinition(32,"flex-grow",0,0,0,0,1,0,new Vp(0)),this.SetPropertyDefinition(33,"flex-shrink",0,0,0,0,1,0,new Vp(1)),this.SetPropertyDefinition(34,"flex-wrap",0,0,0,0,1,0,_e.GetNowrap()),this.SetPropertyDefinition(35,"font-family",1,0,0,1,1,0,zP(new d1("Noto Mono"))),this.SetPropertyDefinition(36,"font-size",1,0,1,1,1,0,new Qt(16,Ft.kPixelsUnit)),this.SetPropertyDefinition(37,"font-style",1,0,0,1,1,0,bc.GetNormal()),this.SetPropertyDefinition(38,"font-weight",1,0,0,1,1,0,Ys.GetNormalAka400()),this.SetPropertyDefinition(39,"height",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(40,"intersection-observer-root-margin",0,0,0,0,0,0,_e.GetAuto()),this.SetPropertyDefinition(41,"justify-content",0,0,0,0,1,0,_e.GetFlexStart()),this.SetPropertyDefinition(42,"left",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(43,"line-height",1,0,0,0,1,0,_e.GetNormal()),this.SetPropertyDefinition(44,"margin-bottom",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(45,"margin-left",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(46,"margin-right",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(47,"margin-top",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(48,"max-height",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(49,"max-width",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(50,"min-height",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(51,"min-width",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(52,"opacity",0,1,0,0,0,1,new Vp(1)),this.SetPropertyDefinition(53,"order",0,0,0,0,1,0,new oy(0)),this.SetPropertyDefinition(54,"outline-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(55,"outline-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(56,"outline-width",0,1,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(57,"overflow",0,0,0,0,1,1,_e.GetVisible()),this.SetPropertyDefinition(58,"overflow-wrap",1,0,0,0,1,0,_e.GetNormal()),this.SetPropertyDefinition(59,"padding-bottom",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(60,"padding-left",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(61,"padding-right",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(62,"padding-top",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(63,"pointer-events",1,0,0,0,0,0,_e.GetAuto()),this.SetPropertyDefinition(64,"position",0,0,0,1,1,1,_e.GetStatic()),this.SetPropertyDefinition(65,"right",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(66,"text-align",1,0,0,0,1,0,_e.GetStart()),this.SetPropertyDefinition(67,"text-decoration-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(68,"text-decoration-line",0,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(69,"text-indent",1,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(70,"text-overflow",0,0,0,0,1,0,_e.GetClip()),this.SetPropertyDefinition(71,"text-shadow",1,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(72,"text-transform",1,0,0,1,0,0,_e.GetNone()),this.SetPropertyDefinition(73,"top",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(75,"transform",0,1,0,0,1,1,_e.GetNone());let a=new Array(3);a.push(new ca(new Js(.5))),a.push(new ca(new Js(.5))),a.push(new Qt(0,Ft.kPixelsUnit));let l=new wo(a);this.SetPropertyDefinition(74,"transform-origin",0,0,0,0,0,0,l),this.SetPropertyDefinition(76,"vertical-align",0,0,0,0,0,0,_e.GetBaseline()),this.SetPropertyDefinition(77,"visibility",1,0,0,0,0,0,_e.GetVisible()),this.SetPropertyDefinition(78,"white-space",1,0,0,1,1,0,_e.GetNormal()),this.SetPropertyDefinition(79,"width",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(80,"z-index",0,0,0,0,0,1,_e.GetAuto()),this.SetPropertyDefinition(81,"all",0,0,0,0,0,0),this.SetPropertyDefinition(82,"src",0,0,0,0,0,0),this.SetPropertyDefinition(83,"unicode-range",0,0,0,0,0,0,new ay(0,1114111)),this.SetPropertyDefinition(84,"word-wrap",1,0,0,0,1,0,_e.GetNormal());let u=new Set;u.add(3),u.add(4),u.add(5),u.add(6),u.add(7),this.SetShorthandPropertyDefinition(85,"background",u);let d=new Set;d.add(19),d.add(16),d.add(8),d.add(13),this.SetShorthandPropertyDefinition(87,"border-color",d);let f=new Set;f.add(22),f.add(17),f.add(11),f.add(14),this.SetShorthandPropertyDefinition(92,"border-style",f);let g=new Set;g.add(23),g.add(18),g.add(12),g.add(15),this.SetShorthandPropertyDefinition(94,"border-width",g);let x=new Set;x.add(20),x.add(21),x.add(10),x.add(9),this.SetShorthandPropertyDefinition(90,"border-radius",x);let E=new Set;E.add(87),E.add(92),E.add(94),this.SetShorthandPropertyDefinition(89,"border",E);let P=new Set;P.add(19),P.add(22),P.add(23),this.SetShorthandPropertyDefinition(93,"border-top",P);let b=new Set;b.add(16),b.add(17),b.add(18),this.SetShorthandPropertyDefinition(91,"border-right",b);let R=new Set;R.add(8),R.add(11),R.add(12),this.SetShorthandPropertyDefinition(86,"border-bottom",R);let D=new Set;D.add(13),D.add(14),D.add(15),this.SetShorthandPropertyDefinition(88,"border-left",D);let C=new Set;C.add(32),C.add(33),C.add(30),this.SetShorthandPropertyDefinition(95,"flex",C);let I=new Set;I.add(31),I.add(34),this.SetShorthandPropertyDefinition(96,"flex-flow",I);let H=new Set;H.add(37),H.add(38),H.add(36),H.add(35),this.SetShorthandPropertyDefinition(97,"font",H);let N=new Set;N.add(44),N.add(45),N.add(46),N.add(47),this.SetShorthandPropertyDefinition(98,"margin",N);let V=new Set;V.add(54),V.add(55),V.add(56),this.SetShorthandPropertyDefinition(99,"outline",V);let O=new Set;O.add(59),O.add(60),O.add(61),O.add(62),this.SetShorthandPropertyDefinition(100,"padding",O);let W=new Set;W.add(67),W.add(68),this.SetShorthandPropertyDefinition(101,"text-decoration",W),this.CompileSetOfAnimatableProperties()}SetPropertyDefinition(e,t,i,s,n,o,a,l,u){let d=this.properties[e];Q(!(d!=null&&d.name),"Properties can only be defined once.");let f=new HP(u);f.name=t,f.inherited=i,f.animatable=s,f.impacts_child_computed_style=n,f.impacts_box_generation=o,f.impacts_box_sizes=a,f.impacts_box_cross_references=l,this.properties[e]=f}SetShorthandPropertyDefinition(e,t,i){Rr(85,e),Wn(101,e);let s=this.properties[e];Q(!(s!=null&&s.name),"Properties can only be defined once.");let n=new HP;n.name=t,n.longhand_properties=i,this.properties[e]=n}CompileSetOfAnimatableProperties(){for(let e=0;e<101+1;++e)this.properties[e].animatable==1&&(this.animatable_properties.push(e),this.properties[e].inherited==1&&this.inherited_animatable_properties.push(e)),this.properties[e].inherited===1&&this.inherited_properties.push(e)}CompileSortedLonghandProperties(){Ue()}}const Cu=new c9;function st(r){return Rr(r,101),Cu.properties[r].name}function sw(r){return Q(!wf(r)),Rr(r,101),Cu.properties[r].inherited}function wf(r){return r>=85&&r<=101}function sb(r){return Q(!wf(r)),Rr(r,101),Cu.properties[r].initial_value}function h9(){return Cu.inherited_properties.slice()}function d9(r){return Q(!wf(r)),Rr(r,101),Cu.properties[r].impacts_child_computed_style}function f9(r){return Q(!wf(r)),Rr(r,101),Cu.properties[r].impacts_box_generation}function _9(r){return Q(!wf(r)),Rr(r,101),Cu.properties[r].impacts_box_sizes}function p9(r){return Q(!wf(r)),Rr(r,101),Cu.properties[r].impacts_box_cross_references}function zP(r){return new wo([r])}function s3(r){switch(r.length){case 3:return lt(r,st(73))?73:-1;case 4:return lt(r,st(95))?95:lt(r,st(97))?97:lt(r,st(42))?42:-1;case 5:return lt(r,st(26))?26:lt(r,st(53))?53:lt(r,st(65))?65:lt(r,st(79))?79:-1;case 6:return lt(r,st(89))?89:lt(r,st(24))?24:lt(r,st(29))?29:lt(r,st(39))?39:lt(r,st(98))?98:-1;case 7:return lt(r,st(27))?27:lt(r,st(28))?28:lt(r,st(52))?52:lt(r,st(99))?99:lt(r,st(100))?100:lt(r,st(80))?80:-1;case 8:return lt(r,st(57))?57:lt(r,st(64))?64:-1;case 9:return lt(r,st(96))?96:lt(r,st(32))?32:lt(r,st(34))?34:lt(r,st(36))?36:lt(r,st(49))?49:lt(r,st(51))?51:lt(r,st(75))?75:-1;case 10:return lt(r,st(2))?2:lt(r,st(85))?85:lt(r,st(93))?93:lt(r,st(25))?25:lt(r,st(30))?30:lt(r,st(37))?37:lt(r,st(47))?47:lt(r,st(48))?48:lt(r,st(50))?50:lt(r,st(66))?66:lt(r,st(77))?77:-1;case 11:return lt(r,st(1))?1:lt(r,st(88))?88:lt(r,st(33))?33:lt(r,st(35))?35:lt(r,st(38))?38:lt(r,st(43))?43:lt(r,st(45))?45:lt(r,st(62))?62:lt(r,st(69))?69:lt(r,st(71))?71:lt(r,st(78))?78:-1;case 12:return lt(r,st(87))?87:lt(r,st(91))?91:lt(r,st(92))?92:lt(r,st(94))?94:lt(r,st(46))?46:lt(r,st(60))?60:-1;case 13:return lt(r,st(0))?0:lt(r,st(86))?86:lt(r,st(90))?90:lt(r,st(44))?44:lt(r,st(54))?54:lt(r,st(55))?55:lt(r,st(56))?56:lt(r,st(58))?58:lt(r,st(61))?61:lt(r,st(70))?70:-1;case 14:return lt(r,st(31))?31:lt(r,st(59))?59:lt(r,st(63))?63:lt(r,st(72))?72:lt(r,st(76))?76:-1;case 15:return lt(r,st(7))?7:lt(r,st(41))?41:lt(r,st(101))?101:-1;case 16:return lt(r,st(3))?3:lt(r,st(19))?19:lt(r,st(22))?22:lt(r,st(23))?23:lt(r,st(4))?4:lt(r,st(74))?74:-1;case 17:return lt(r,st(6))?6:lt(r,st(13))?13:lt(r,st(14))?14:lt(r,st(15))?15:-1;case 18:return lt(r,st(16))?16:lt(r,st(17))?17:lt(r,st(18))?18:-1;case 19:return lt(r,st(5))?5:lt(r,st(8))?8:lt(r,st(11))?11:lt(r,st(12))?12:-1;case 20:return lt(r,st(68))?68:-1;case 21:return lt(r,st(67))?67:-1;case 22:return lt(r,st(20))?20:-1;case 23:return lt(r,st(21))?21:-1;case 25:return-1;case 26:return lt(r,st(10))?10:-1;case 33:return lt(r,st(40))?40:-1;default:return-1}}class o3{removeProperty(e){this.GetPropertyValue(e)&&this.setProperty(e,"")}GetPropertyValue(e){return this.GetDeclaredPropertyValueStringByKey(s3(e))}SetPropertyValueStringByKey(e,t){this.setProperty(st(e),t)}get alignContent(){return this.GetDeclaredPropertyValueStringByKey(T.kAlignContentProperty)}set alignContent(e){this.SetPropertyValueStringByKey(T.kAlignContentProperty,e)}get alignItems(){return this.GetDeclaredPropertyValueStringByKey(T.kAlignItemsProperty)}set alignItems(e){this.SetPropertyValueStringByKey(T.kAlignItemsProperty,e)}get alignSelf(){return this.GetDeclaredPropertyValueStringByKey(T.kAlignSelfProperty)}set alignSelf(e){this.SetPropertyValueStringByKey(T.kAlignSelfProperty,e)}get background(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundProperty)}set background(e){this.SetPropertyValueStringByKey(T.kBackgroundProperty,e)}get backgroundColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundColorProperty)}set backgroundColor(e){this.SetPropertyValueStringByKey(T.kBackgroundColorProperty,e)}get backgroundImage(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundImageProperty)}set backgroundImage(e){this.SetPropertyValueStringByKey(T.kBackgroundImageProperty,e)}get backgroundPosition(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundPositionProperty)}set backgroundPosition(e){this.SetPropertyValueStringByKey(T.kBackgroundPositionProperty,e)}get backgroundRepeat(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundRepeatProperty)}set backgroundRepeat(e){this.SetPropertyValueStringByKey(T.kBackgroundRepeatProperty,e)}get backgroundSize(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundSizeProperty)}set backgroundSize(e){this.SetPropertyValueStringByKey(T.kBackgroundSizeProperty,e)}get border(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderProperty)}set border(e){this.SetPropertyValueStringByKey(T.kBorderProperty,e)}get borderBottom(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomProperty)}set borderBottom(e){this.SetPropertyValueStringByKey(T.kBorderBottomProperty,e)}get borderLeft(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftProperty)}set borderLeft(e){this.SetPropertyValueStringByKey(T.kBorderLeftProperty,e)}get borderRight(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightProperty)}set borderRight(e){this.SetPropertyValueStringByKey(T.kBorderRightProperty,e)}get borderTop(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopProperty)}set borderTop(e){this.SetPropertyValueStringByKey(T.kBorderTopProperty,e)}get borderColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderColorProperty)}set borderColor(e){this.SetPropertyValueStringByKey(T.kBorderColorProperty,e)}get borderTopColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopColorProperty)}set borderTopColor(e){this.SetPropertyValueStringByKey(T.kBorderTopColorProperty,e)}get borderRightColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightColorProperty)}set borderRightColor(e){this.SetPropertyValueStringByKey(T.kBorderRightColorProperty,e)}get borderBottomColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomColorProperty)}set borderBottomColor(e){this.SetPropertyValueStringByKey(T.kBorderBottomColorProperty,e)}get borderLeftColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftColorProperty)}set borderLeftColor(e){this.SetPropertyValueStringByKey(T.kBorderLeftColorProperty,e)}get borderStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderStyleProperty)}set borderStyle(e){this.SetPropertyValueStringByKey(T.kBorderStyleProperty,e)}get borderTopStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopStyleProperty)}set borderTopStyle(e){this.SetPropertyValueStringByKey(T.kBorderTopStyleProperty,e)}get borderRightStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightStyleProperty)}set borderRightStyle(e){this.SetPropertyValueStringByKey(T.kBorderRightStyleProperty,e)}get borderBottomStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomStyleProperty)}set borderBottomStyle(e){this.SetPropertyValueStringByKey(T.kBorderBottomStyleProperty,e)}get borderLeftStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftStyleProperty)}set borderLeftStyle(e){this.SetPropertyValueStringByKey(T.kBorderLeftStyleProperty,e)}get borderWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderWidthProperty)}set borderWidth(e){this.SetPropertyValueStringByKey(T.kBorderWidthProperty,e)}get borderTopWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopWidthProperty)}set borderTopWidth(e){this.SetPropertyValueStringByKey(T.kBorderTopWidthProperty,e)}get borderRightWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightWidthProperty)}set borderRightWidth(e){this.SetPropertyValueStringByKey(T.kBorderRightWidthProperty,e)}get borderBottomWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomWidthProperty)}set borderBottomWidth(e){this.SetPropertyValueStringByKey(T.kBorderBottomWidthProperty,e)}get borderLeftWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftWidthProperty)}set borderLeftWidth(e){this.SetPropertyValueStringByKey(T.kBorderLeftWidthProperty,e)}get borderRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRadiusProperty)}set borderRadius(e){this.SetPropertyValueStringByKey(T.kBorderRadiusProperty,e)}get borderTopLeftRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopLeftRadiusProperty)}set borderTopLeftRadius(e){this.SetPropertyValueStringByKey(T.kBorderTopLeftRadiusProperty,e)}get borderTopRightRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopRightRadiusProperty)}set borderTopRightRadius(e){this.SetPropertyValueStringByKey(T.kBorderTopRightRadiusProperty,e)}get borderBottomRightRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomRightRadiusProperty)}set borderBottomRightRadius(e){this.SetPropertyValueStringByKey(T.kBorderBottomRightRadiusProperty,e)}get borderBottomLeftradius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomLeftRadiusProperty)}set borderBottomLeftradius(e){this.SetPropertyValueStringByKey(T.kBorderBottomLeftRadiusProperty,e)}get bottom(){return this.GetDeclaredPropertyValueStringByKey(T.kBottomProperty)}set bottom(e){this.SetPropertyValueStringByKey(T.kBottomProperty,e)}get boxShadow(){return this.GetDeclaredPropertyValueStringByKey(T.kBoxShadowProperty)}set boxShadow(e){this.SetPropertyValueStringByKey(T.kBoxShadowProperty,e)}get color(){return this.GetDeclaredPropertyValueStringByKey(T.kColorProperty)}set color(e){this.SetPropertyValueStringByKey(T.kColorProperty,e)}get content(){return this.GetDeclaredPropertyValueStringByKey(T.kContentProperty)}set content(e){this.SetPropertyValueStringByKey(T.kContentProperty,e)}get display(){return this.GetDeclaredPropertyValueStringByKey(T.kDisplayProperty)}set display(e){this.SetPropertyValueStringByKey(T.kDisplayProperty,e)}get filter(){return this.GetDeclaredPropertyValueStringByKey(T.kFilterProperty)}set filter(e){this.SetPropertyValueStringByKey(T.kFilterProperty,e)}get flex(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexProperty)}set flex(e){this.SetPropertyValueStringByKey(T.kFlexProperty,e)}get flexBasis(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexBasisProperty)}set flexBasis(e){this.SetPropertyValueStringByKey(T.kFlexBasisProperty,e)}get flexDirection(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexDirectionProperty)}set flexDirection(e){this.SetPropertyValueStringByKey(T.kFlexDirectionProperty,e)}get flexFlow(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexFlowProperty)}set flexFlow(e){this.SetPropertyValueStringByKey(T.kFlexFlowProperty,e)}get flexGrow(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexGrowProperty)}set flexGrow(e){this.SetPropertyValueStringByKey(T.kFlexGrowProperty,e)}get flexShrink(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexShrinkProperty)}set flexShrink(e){this.SetPropertyValueStringByKey(T.kFlexShrinkProperty,e)}get flexWrap(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexWrapProperty)}set flexWrap(e){this.SetPropertyValueStringByKey(T.kFlexWrapProperty,e)}get font(){return this.GetDeclaredPropertyValueStringByKey(T.kFontProperty)}set font(e){this.SetPropertyValueStringByKey(T.kFontProperty,e)}get fontFamily(){return this.GetDeclaredPropertyValueStringByKey(T.kFontFamilyProperty)}set fontFamily(e){this.SetPropertyValueStringByKey(T.kFontFamilyProperty,e)}get fontSize(){return this.GetDeclaredPropertyValueStringByKey(T.kFontSizeProperty)}set fontSize(e){this.SetPropertyValueStringByKey(T.kFontSizeProperty,e)}get fontStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kFontStyleProperty)}set fontStyle(e){this.SetPropertyValueStringByKey(T.kFontStyleProperty,e)}get fontWeight(){return this.GetDeclaredPropertyValueStringByKey(T.kFontWeightProperty)}set fontWeight(e){this.SetPropertyValueStringByKey(T.kFontWeightProperty,e)}get height(){return this.GetDeclaredPropertyValueStringByKey(T.kHeightProperty)}set height(e){this.SetPropertyValueStringByKey(T.kHeightProperty,e)}get justifyContent(){return this.GetDeclaredPropertyValueStringByKey(T.kJustifyContentProperty)}set justifyContent(e){this.SetPropertyValueStringByKey(T.kJustifyContentProperty,e)}get left(){return this.GetDeclaredPropertyValueStringByKey(T.kLeftProperty)}set left(e){this.SetPropertyValueStringByKey(T.kLeftProperty,e)}get lineHeight(){return this.GetDeclaredPropertyValueStringByKey(T.kLineHeightProperty)}set lineHeight(e){this.SetPropertyValueStringByKey(T.kLineHeightProperty,e)}get margin(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginProperty)}set margin(e){this.SetPropertyValueStringByKey(T.kMarginProperty,e)}get marginBottom(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginBottomProperty)}set marginBottom(e){this.SetPropertyValueStringByKey(T.kMarginBottomProperty,e)}get marginLeft(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginLeftProperty)}set marginLeft(e){this.SetPropertyValueStringByKey(T.kMarginLeftProperty,e)}get marginRight(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginRightProperty)}set marginRight(e){this.SetPropertyValueStringByKey(T.kMarginRightProperty,e)}get marginTop(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginTopProperty)}set marginTop(e){this.SetPropertyValueStringByKey(T.kMarginTopProperty,e)}get maxHeight(){return this.GetDeclaredPropertyValueStringByKey(T.kMaxHeightProperty)}set maxHeight(e){this.SetPropertyValueStringByKey(T.kMaxHeightProperty,e)}get maxWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kMaxWidthProperty)}set maxWidth(e){this.SetPropertyValueStringByKey(T.kMaxWidthProperty,e)}get minHeight(){return this.GetDeclaredPropertyValueStringByKey(T.kMinHeightProperty)}set minHeight(e){this.SetPropertyValueStringByKey(T.kMinHeightProperty,e)}get minWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kMinWidthProperty)}set minWidth(e){this.SetPropertyValueStringByKey(T.kMinWidthProperty,e)}get opacity(){return this.GetDeclaredPropertyValueStringByKey(T.kOpacityProperty)}set opacity(e){this.SetPropertyValueStringByKey(T.kOpacityProperty,e)}get order(){return this.GetDeclaredPropertyValueStringByKey(T.kOrderProperty)}set order(e){this.SetPropertyValueStringByKey(T.kOrderProperty,e)}get outline(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineProperty)}set outline(e){this.SetPropertyValueStringByKey(T.kOutlineProperty,e)}get outlineColor(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineColorProperty)}set outlineColor(e){this.SetPropertyValueStringByKey(T.kOutlineColorProperty,e)}get outlineStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineStyleProperty)}set outlineStyle(e){this.SetPropertyValueStringByKey(T.kOutlineStyleProperty,e)}get outlineWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineWidthProperty)}set outlineWidth(e){this.SetPropertyValueStringByKey(T.kOutlineWidthProperty,e)}get overflow(){return this.GetDeclaredPropertyValueStringByKey(T.kOverflowProperty)}set overflow(e){this.SetPropertyValueStringByKey(T.kOverflowProperty,e)}get overflowWrap(){return this.GetDeclaredPropertyValueStringByKey(T.kOverflowWrapProperty)}set overflowWrap(e){this.SetPropertyValueStringByKey(T.kOverflowWrapProperty,e)}get padding(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingProperty)}set padding(e){this.SetPropertyValueStringByKey(T.kPaddingProperty,e)}get paddingBottom(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingBottomProperty)}set paddingBottom(e){this.SetPropertyValueStringByKey(T.kPaddingBottomProperty,e)}get paddingLeft(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingLeftProperty)}set paddingLeft(e){this.SetPropertyValueStringByKey(T.kPaddingLeftProperty,e)}get paddingRight(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingRightProperty)}set paddingRight(e){this.SetPropertyValueStringByKey(T.kPaddingRightProperty,e)}get paddingTop(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingTopProperty)}set paddingTop(e){this.SetPropertyValueStringByKey(T.kPaddingTopProperty,e)}get pointerEvents(){return this.GetDeclaredPropertyValueStringByKey(T.kPointerEventsProperty)}set pointerEvents(e){this.SetPropertyValueStringByKey(T.kPointerEventsProperty,e)}get position(){return this.GetDeclaredPropertyValueStringByKey(T.kPositionProperty)}set position(e){this.SetPropertyValueStringByKey(T.kPositionProperty,e)}get right(){return this.GetDeclaredPropertyValueStringByKey(T.kRightProperty)}set right(e){this.SetPropertyValueStringByKey(T.kRightProperty,e)}get textAlign(){return this.GetDeclaredPropertyValueStringByKey(T.kTextAlignProperty)}set textAlign(e){this.SetPropertyValueStringByKey(T.kTextAlignProperty,e)}get textDecoration(){return this.GetDeclaredPropertyValueStringByKey(T.kTextDecorationLineProperty)}set textDecoration(e){this.SetPropertyValueStringByKey(T.kTextDecorationLineProperty,e)}get textDecorationColor(){return this.GetDeclaredPropertyValueStringByKey(T.kTextDecorationColorProperty)}set textDecorationColor(e){this.SetPropertyValueStringByKey(T.kTextDecorationColorProperty,e)}get textDecorationLine(){return this.GetDeclaredPropertyValueStringByKey(T.kTextDecorationLineProperty)}set textDecorationLine(e){this.SetPropertyValueStringByKey(T.kTextDecorationLineProperty,e)}get textIndent(){return this.GetDeclaredPropertyValueStringByKey(T.kTextIndentProperty)}set textIndent(e){this.SetPropertyValueStringByKey(T.kTextIndentProperty,e)}get textOverflow(){return this.GetDeclaredPropertyValueStringByKey(T.kTextOverflowProperty)}set textOverflow(e){this.SetPropertyValueStringByKey(T.kTextOverflowProperty,e)}get textShadow(){return this.GetDeclaredPropertyValueStringByKey(T.kTextShadowProperty)}set textShadow(e){this.SetPropertyValueStringByKey(T.kTextShadowProperty,e)}get textTransform(){return this.GetDeclaredPropertyValueStringByKey(T.kTextTransformProperty)}set textTransform(e){this.SetPropertyValueStringByKey(T.kTextTransformProperty,e)}get top(){return this.GetDeclaredPropertyValueStringByKey(T.kTopProperty)}set top(e){this.SetPropertyValueStringByKey(T.kTopProperty,e)}get transform(){return this.GetDeclaredPropertyValueStringByKey(T.kTransformProperty)}set transform(e){this.SetPropertyValueStringByKey(T.kTransformProperty,e)}get transformOrigin(){return this.GetDeclaredPropertyValueStringByKey(T.kTransformOriginProperty)}set transformOrigin(e){this.SetPropertyValueStringByKey(T.kTransformOriginProperty,e)}get verticalAlign(){return this.GetDeclaredPropertyValueStringByKey(T.kVerticalAlignProperty)}set verticalAlign(e){this.SetPropertyValueStringByKey(T.kVerticalAlignProperty,e)}get visibility(){return this.GetDeclaredPropertyValueStringByKey(T.kVisibilityProperty)}set visibility(e){this.SetPropertyValueStringByKey(T.kVisibilityProperty,e)}get whiteSpace(){return this.GetDeclaredPropertyValueStringByKey(T.kWhiteSpaceProperty)}set whiteSpace(e){this.SetPropertyValueStringByKey(T.kWhiteSpaceProperty,e)}get width(){return this.GetDeclaredPropertyValueStringByKey(T.kWidthProperty)}set width(e){this.SetPropertyValueStringByKey(T.kWidthProperty,e)}get wordWrap(){return this.GetDeclaredPropertyValueStringByKey(T.kOverflowWrapProperty)}set wordWrap(e){this.SetPropertyValueStringByKey(T.kWordWrapProperty,e)}get zIndex(){return this.GetDeclaredPropertyValueStringByKey(T.kZIndexProperty)}set zIndex(e){this.SetPropertyValueStringByKey(T.kZIndexProperty,e)}}var a3=(r=>(r[r.kNone=0]="kNone",r[r.kIndexSizeErr=1]="kIndexSizeErr",r[r.kDomstringSizeErr=2]="kDomstringSizeErr",r[r.kHierarchyRequestErr=3]="kHierarchyRequestErr",r[r.kWrongDocumentErr=4]="kWrongDocumentErr",r[r.kInvalidCharacterErr=5]="kInvalidCharacterErr",r[r.kNoDataAllowedErr=6]="kNoDataAllowedErr",r[r.kNoModificationAllowedErr=7]="kNoModificationAllowedErr",r[r.kNotFoundErr=8]="kNotFoundErr",r[r.kNotSupportedErr=9]="kNotSupportedErr",r[r.kInuseAttributeErr=10]="kInuseAttributeErr",r[r.kInvalidStateErr=11]="kInvalidStateErr",r[r.kSyntaxErr=12]="kSyntaxErr",r[r.kInvalidModificationErr=13]="kInvalidModificationErr",r[r.kNamespaceErr=14]="kNamespaceErr",r[r.kInvalidAccessErr=15]="kInvalidAccessErr",r[r.kValidationErr=16]="kValidationErr",r[r.kTypeMismatchErr=17]="kTypeMismatchErr",r[r.kSecurityErr=18]="kSecurityErr",r[r.kNetworkErr=19]="kNetworkErr",r[r.kAbortErr=20]="kAbortErr",r[r.kUrlMismatchErr=21]="kUrlMismatchErr",r[r.kQuotaExceededErr=22]="kQuotaExceededErr",r[r.kTimeoutErr=23]="kTimeoutErr",r[r.kInvalidNodeTypeErr=24]="kInvalidNodeTypeErr",r[r.kDataCloneErr=25]="kDataCloneErr",r[r.kHighestErrCodeValue=25]="kHighestErrCodeValue",r[r.kReadOnlyErr=26]="kReadOnlyErr",r[r.kInvalidPointerIdErr=27]="kInvalidPointerIdErr",r[r.kNotAllowedErr=28]="kNotAllowedErr",r))(a3||{});class ox extends Error{static Raise(e){throw new Error(e.toString())}constructor(e,t){super()}}class qc extends o3{constructor(){super(...arguments);c(this,"data_",null);c(this,"data_with_inherited_properties_",null)}data(){return this.data_}setProperty(t,i){ox.Raise(a3.kInvalidAccessErr)}HasInheritedProperties(){return!!this.data_with_inherited_properties_}GetInheritedPropertyValueReference(t){if(!this.data_with_inherited_properties_)throw new Error("500");return this.data_with_inherited_properties_.GetPropertyValueReference(t)}SetData(t){this.data_=t,this.UpdateInheritedData()}UpdateInheritedData(){if(!this.data_)this.data_with_inherited_properties_=null;else if(this.data_.has_declared_inherited_properties())this.data_with_inherited_properties_=this.data_;else{let t=this.data_.GetParentComputedStyleDeclaration();t?this.data_with_inherited_properties_=t.data_with_inherited_properties_:this.data_with_inherited_properties_=null}}GetDeclaredPropertyValueStringByKey(t){if(t>T.kMaxLonghandPropertyKey)return Rr(t,T.kMaxEveryPropertyKey),Ue(),_i(rn,'Unsupported property query for "',st(t),'": Returning of property value strings is not ',"supported for shorthand properties."),"";Q(this.data_);const i=this.data_.GetPropertyValueReference(t);return Q(i),i.ToString()}}class g9{}class um extends g9{constructor(){super(...arguments);c(this,"declared_property_values_",new Map);c(this,"important_properties_",new Set)}GetPropertyValue(t){return T.kNoneProperty,Rr(t,T.kMaxLonghandPropertyKey),this.declared_property_values_.has(t)?this.declared_property_values_.get(t):sb(t)}SetPropertyValue(t,i){T.kNoneProperty,Rr(t,T.kMaxLonghandPropertyKey),i?this.declared_property_values_.set(t,i):this.declared_property_values_.delete(t)}GetPropertyValueString(t){return T.kNoneProperty,Rr(t,T.kMaxLonghandPropertyKey),this.declared_property_values_.has(t)?this.declared_property_values_.get(t).ToString():""}declared_property_values(){return this.declared_property_values_}IsDeclaredPropertyImportant(t){return this.important_properties_.has(t)}AssignFrom(t){this.declared_property_values_=new Map(t.declared_property_values()),this.important_properties_=new Set(t.important_properties_)}get align_content(){return this.GetPropertyValue(T.kAlignContentProperty)}set align_content(t){this.SetPropertyValue(T.kAlignContentProperty,t)}toString(){const i=Array.from(this.declared_property_values_.keys()).sort();let s=[];for(let n of i){const o=this.GetPropertyValueString(n);s.push(`${st(n)}:${o}`)}return s.join(";")}}var ow={},l3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l3,"__esModule",{value:!0});var u3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(u3,"__esModule",{value:!0});var f1={};function dp(r){return r!=null&&(!!r._isBuffer||c3(r)||m9(r))}function c3(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function m9(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&c3(r.slice(0,0))}var aw;typeof Object.create=="function"?aw=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:aw=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e};const ob=aw;var x9=/%[sdj%]/g;function _1(r){if(!tg(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(bo(arguments[t]));return e.join(" ")}for(var t=1,i=arguments,s=i.length,n=String(r).replace(x9,function(a){if(a==="%%")return"%";if(t>=s)return a;switch(a){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":try{return JSON.stringify(i[t++])}catch{return"[Circular]"}default:return a}}),o=i[t];t<s;o=i[++t])eg(o)||!yh(o)?n+=" "+o:n+=" "+bo(o);return n}function ab(r,e){if(ha(global.process))return function(){return ab(r,e).apply(this,arguments)};if(zp.noDeprecation===!0)return r;var t=!1;function i(){if(!t){if(zp.throwDeprecation)throw new Error(e);zp.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return i}var cm={},vE;function h3(r){if(ha(vE)&&(vE=zp.env.NODE_DEBUG||""),r=r.toUpperCase(),!cm[r])if(new RegExp("\\b"+r+"\\b","i").test(vE)){var e=0;cm[r]=function(){var t=_1.apply(null,arguments);console.error("%s %d: %s",r,e,t)}}else cm[r]=function(){};return cm[r]}function bo(r,e){var t={seen:[],stylize:v9};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),p1(e)?t.showHidden=e:e&&hb(t,e),ha(t.showHidden)&&(t.showHidden=!1),ha(t.depth)&&(t.depth=2),ha(t.colors)&&(t.colors=!1),ha(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=y9),uy(t,r,t.depth)}bo.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};bo.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function y9(r,e){var t=bo.styles[e];return t?"\x1B["+bo.colors[t][0]+"m"+r+"\x1B["+bo.colors[t][1]+"m":r}function v9(r,e){return r}function E9(r){var e={};return r.forEach(function(t,i){e[t]=!0}),e}function uy(r,e,t){if(r.customInspect&&e&&Tc(e.inspect)&&e.inspect!==bo&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(t,r);return tg(i)||(i=uy(r,i,t)),i}var s=S9(r,e);if(s)return s;var n=Object.keys(e),o=E9(n);if(r.showHidden&&(n=Object.getOwnPropertyNames(e)),xd(e)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return EE(e);if(n.length===0){if(Tc(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(kc(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Vd(e))return r.stylize(Date.prototype.toString.call(e),"date");if(xd(e))return EE(e)}var l="",u=!1,d=["{","}"];if(lb(e)&&(u=!0,d=["[","]"]),Tc(e)){var f=e.name?": "+e.name:"";l=" [Function"+f+"]"}if(kc(e)&&(l=" "+RegExp.prototype.toString.call(e)),Vd(e)&&(l=" "+Date.prototype.toUTCString.call(e)),xd(e)&&(l=" "+EE(e)),n.length===0&&(!u||e.length==0))return d[0]+l+d[1];if(t<0)return kc(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var g;return u?g=w9(r,e,t,o,n):g=n.map(function(x){return lw(r,e,t,o,x,u)}),r.seen.pop(),A9(g,l,d)}function S9(r,e){if(ha(e))return r.stylize("undefined","undefined");if(tg(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(ub(e))return r.stylize(""+e,"number");if(p1(e))return r.stylize(""+e,"boolean");if(eg(e))return r.stylize("null","null")}function EE(r){return"["+Error.prototype.toString.call(r)+"]"}function w9(r,e,t,i,s){for(var n=[],o=0,a=e.length;o<a;++o)g3(e,String(o))?n.push(lw(r,e,t,i,String(o),!0)):n.push("");return s.forEach(function(l){l.match(/^\d+$/)||n.push(lw(r,e,t,i,l,!0))}),n}function lw(r,e,t,i,s,n){var o,a,l;if(l=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]},l.get?l.set?a=r.stylize("[Getter/Setter]","special"):a=r.stylize("[Getter]","special"):l.set&&(a=r.stylize("[Setter]","special")),g3(i,s)||(o="["+s+"]"),a||(r.seen.indexOf(l.value)<0?(eg(t)?a=uy(r,l.value,null):a=uy(r,l.value,t-1),a.indexOf(`
`)>-1&&(n?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=r.stylize("[Circular]","special")),ha(o)){if(n&&s.match(/^\d+$/))return a;o=JSON.stringify(""+s),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=r.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=r.stylize(o,"string"))}return o+": "+a}function A9(r,e,t){var i=r.reduce(function(s,n){return n.indexOf(`
`)>=0,s+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function lb(r){return Array.isArray(r)}function p1(r){return typeof r=="boolean"}function eg(r){return r===null}function d3(r){return r==null}function ub(r){return typeof r=="number"}function tg(r){return typeof r=="string"}function f3(r){return typeof r=="symbol"}function ha(r){return r===void 0}function kc(r){return yh(r)&&cb(r)==="[object RegExp]"}function yh(r){return typeof r=="object"&&r!==null}function Vd(r){return yh(r)&&cb(r)==="[object Date]"}function xd(r){return yh(r)&&(cb(r)==="[object Error]"||r instanceof Error)}function Tc(r){return typeof r=="function"}function cy(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function _3(r){return Buffer.isBuffer(r)}function cb(r){return Object.prototype.toString.call(r)}function SE(r){return r<10?"0"+r.toString(10):r.toString(10)}var b9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k9(){var r=new Date,e=[SE(r.getHours()),SE(r.getMinutes()),SE(r.getSeconds())].join(":");return[r.getDate(),b9[r.getMonth()],e].join(" ")}function p3(){console.log("%s - %s",k9(),_1.apply(null,arguments))}function hb(r,e){if(!e||!yh(e))return r;for(var t=Object.keys(e),i=t.length;i--;)r[t[i]]=e[t[i]];return r}function g3(r,e){return Object.prototype.hasOwnProperty.call(r,e)}const T9={inherits:ob,_extend:hb,log:p3,isBuffer:_3,isPrimitive:cy,isFunction:Tc,isError:xd,isDate:Vd,isObject:yh,isRegExp:kc,isUndefined:ha,isSymbol:f3,isString:tg,isNumber:ub,isNullOrUndefined:d3,isNull:eg,isBoolean:p1,isArray:lb,inspect:bo,deprecate:ab,format:_1,debuglog:h3},P9=Object.freeze(Object.defineProperty({__proto__:null,format:_1,deprecate:ab,debuglog:h3,inspect:bo,isArray:lb,isBoolean:p1,isNull:eg,isNullOrUndefined:d3,isNumber:ub,isString:tg,isSymbol:f3,isUndefined:ha,isRegExp:kc,isObject:yh,isDate:Vd,isError:xd,isFunction:Tc,isPrimitive:cy,isBuffer:_3,log:p3,inherits:ob,_extend:hb,default:T9},Symbol.toStringTag,{value:"Module"}));function jP(r,e){if(r===e)return 0;for(var t=r.length,i=e.length,s=0,n=Math.min(t,i);s<n;++s)if(r[s]!==e[s]){t=r[s],i=e[s];break}return t<i?-1:i<t?1:0}var R9=Object.prototype.hasOwnProperty,VP=Object.keys||function(r){var e=[];for(var t in r)R9.call(r,t)&&e.push(t);return e},WP=Array.prototype.slice,wE;function m3(){return typeof wE<"u"?wE:wE=function(){return function(){}.name==="foo"}()}function $P(r){return Object.prototype.toString.call(r)}function KP(r){return dp(r)||typeof global.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function qn(r,e){r||$n(r,!0,e,"==",x0)}var D9=/\s*function\s+([^\(\s]*)\s*/;function x3(r){if(!!Tc(r)){if(m3())return r.name;var e=r.toString(),t=e.match(D9);return t&&t[1]}}qn.AssertionError=g1;function g1(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=C9(this),this.generatedMessage=!0);var e=r.stackStartFunction||$n;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var i=t.stack,s=x3(e),n=i.indexOf(`
`+s);if(n>=0){var o=i.indexOf(`
`,n+1);i=i.substring(o+1)}this.stack=i}}}ob(g1,Error);function XP(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function YP(r){if(m3()||!Tc(r))return bo(r);var e=x3(r),t=e?": "+e:"";return"[Function"+t+"]"}function C9(r){return XP(YP(r.actual),128)+" "+r.operator+" "+XP(YP(r.expected),128)}function $n(r,e,t,i,s){throw new g1({message:t,actual:r,expected:e,operator:i,stackStartFunction:s})}qn.fail=$n;function x0(r,e){r||$n(r,!0,e,"==",x0)}qn.ok=x0;qn.equal=db;function db(r,e,t){r!=e&&$n(r,e,t,"==",db)}qn.notEqual=fb;function fb(r,e,t){r==e&&$n(r,e,t,"!=",fb)}qn.deepEqual=_b;function _b(r,e,t){Wd(r,e,!1)||$n(r,e,t,"deepEqual",_b)}qn.deepStrictEqual=pb;function pb(r,e,t){Wd(r,e,!0)||$n(r,e,t,"deepStrictEqual",pb)}function Wd(r,e,t,i){if(r===e)return!0;if(dp(r)&&dp(e))return jP(r,e)===0;if(Vd(r)&&Vd(e))return r.getTime()===e.getTime();if(kc(r)&&kc(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(KP(r)&&KP(e)&&$P(r)===$P(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return jP(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(dp(r)!==dp(e))return!1;i=i||{actual:[],expected:[]};var s=i.actual.indexOf(r);return s!==-1&&s===i.expected.indexOf(e)?!0:(i.actual.push(r),i.expected.push(e),O9(r,e,t,i))}function qP(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function O9(r,e,t,i){if(r==null||e===null||e===void 0)return!1;if(cy(r)||cy(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var s=qP(r),n=qP(e);if(s&&!n||!s&&n)return!1;if(s)return r=WP.call(r),e=WP.call(e),Wd(r,e,t);var o=VP(r),a=VP(e),l,u;if(o.length!==a.length)return!1;for(o.sort(),a.sort(),u=o.length-1;u>=0;u--)if(o[u]!==a[u])return!1;for(u=o.length-1;u>=0;u--)if(l=o[u],!Wd(r[l],e[l],t,i))return!1;return!0}qn.notDeepEqual=gb;function gb(r,e,t){Wd(r,e,!1)&&$n(r,e,t,"notDeepEqual",gb)}qn.notDeepStrictEqual=mb;function mb(r,e,t){Wd(r,e,!0)&&$n(r,e,t,"notDeepStrictEqual",mb)}qn.strictEqual=xb;function xb(r,e,t){r!==e&&$n(r,e,t,"===",xb)}qn.notStrictEqual=yb;function yb(r,e,t){r===e&&$n(r,e,t,"!==",yb)}function QP(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function N9(r){var e;try{r()}catch(t){e=t}return e}function y3(r,e,t,i){var s;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(i=t,t=null),s=N9(e),i=(t&&t.name?" ("+t.name+").":".")+(i?" "+i:"."),r&&!s&&$n(s,t,"Missing expected exception"+i);var n=typeof i=="string",o=!r&&xd(s),a=!r&&s&&!t;if((o&&n&&QP(s,t)||a)&&$n(s,t,"Got unwanted exception"+i),r&&s&&t&&!QP(s,t)||!r&&s)throw s}qn.throws=v3;function v3(r,e,t){y3(!0,r,e,t)}qn.doesNotThrow=E3;function E3(r,e,t){y3(!1,r,e,t)}qn.ifError=S3;function S3(r){if(r)throw r}const I9=Object.freeze(Object.defineProperty({__proto__:null,default:qn,AssertionError:g1,fail:$n,ok:x0,assert:x0,equal:db,notEqual:fb,deepEqual:_b,deepStrictEqual:pb,notDeepEqual:gb,notDeepStrictEqual:mb,strictEqual:xb,notStrictEqual:yb,throws:v3,doesNotThrow:E3,ifError:S3},Symbol.toStringTag,{value:"Module"})),Us=ZA(I9);var Ke={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ke,"__esModule",{value:!0});Ke.SuppressWarnings=Ke.Override=Ke.Nullable=Ke.NotNull=void 0;function F9(r,e,t){}Ke.NotNull=F9;function M9(r,e,t){}Ke.Nullable=M9;function B9(r,e,t){}Ke.Override=B9;function L9(r){return(e,t,i)=>{}}Ke.SuppressWarnings=L9;var ml={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.IntStream=void 0,function(e){e.EOF=-1,e.UNKNOWN_SOURCE_NAME="<unknown>"}(r.IntStream||(r.IntStream={}))})(ml);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ka=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(f1,"__esModule",{value:!0});f1.ANTLRInputStream=void 0;const U9=Us,Ta=Ke,hm=ml;class Co{constructor(e){this.p=0,this.data=e,this.n=e.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw U9(this.LA(1)===hm.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(e){return e===0?0:e<0&&(e++,this.p+e-1<0)||this.p+e-1>=this.n?hm.IntStream.EOF:this.data.charCodeAt(this.p+e-1)}LT(e){return this.LA(e)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(e){}seek(e){if(e<=this.p){this.p=e;return}for(e=Math.min(e,this.n);this.p<e;)this.consume()}getText(e){let t=e.a,i=e.b;i>=this.n&&(i=this.n-1);let s=i-t+1;return t>=this.n?"":this.data.substr(t,s)}get sourceName(){return this.name?this.name:hm.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}}ka([Ta.Override],Co.prototype,"consume",null);ka([Ta.Override],Co.prototype,"LA",null);ka([Ta.Override],Co.prototype,"index",null);ka([Ta.Override],Co.prototype,"size",null);ka([Ta.Override],Co.prototype,"mark",null);ka([Ta.Override],Co.prototype,"release",null);ka([Ta.Override],Co.prototype,"seek",null);ka([Ta.Override],Co.prototype,"getText",null);ka([Ta.Override],Co.prototype,"sourceName",null);ka([Ta.Override],Co.prototype,"toString",null);f1.ANTLRInputStream=Co;var a_={},l_={},Pa={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,u=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(u=(l<3?d(u):l>3?d(n,o,u):d(n,o))||u);return l>3&&u&&Object.defineProperty(n,o,u),u};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNState=void 0;const t=Ke;class i{constructor(){this.stateNumber=i.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(n){return n instanceof i?this.stateNumber===n.stateNumber:!1}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(n,o){if(this.transitions.length===0)this.epsilonOnlyTransitions=n.isEpsilon;else if(this.epsilonOnlyTransitions!==n.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(o!==void 0?o:this.transitions.length,0,n)}transition(n){return this.transitions[n]}setTransition(n,o){this.transitions[n]=o}removeTransition(n){return this.transitions.splice(n,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(n){this.ruleIndex=n}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(n){return this.optimizedTransitions[n]}addOptimizedTransition(n){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(n)}setOptimizedTransition(n,o){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[n]=o}removeOptimizedTransition(n){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(n,1)}}e([t.Override],i.prototype,"hashCode",null),e([t.Override],i.prototype,"equals",null),e([t.Override],i.prototype,"toString",null),r.ATNState=i,function(s){s.INVALID_STATE_NUMBER=-1}(i=r.ATNState||(r.ATNState={}))})(Pa);var zi={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.ATNStateType=void 0,function(e){e[e.INVALID_TYPE=0]="INVALID_TYPE",e[e.BASIC=1]="BASIC",e[e.RULE_START=2]="RULE_START",e[e.BLOCK_START=3]="BLOCK_START",e[e.PLUS_BLOCK_START=4]="PLUS_BLOCK_START",e[e.STAR_BLOCK_START=5]="STAR_BLOCK_START",e[e.TOKEN_START=6]="TOKEN_START",e[e.RULE_STOP=7]="RULE_STOP",e[e.BLOCK_END=8]="BLOCK_END",e[e.STAR_LOOP_BACK=9]="STAR_LOOP_BACK",e[e.STAR_LOOP_ENTRY=10]="STAR_LOOP_ENTRY",e[e.PLUS_LOOP_BACK=11]="PLUS_LOOP_BACK",e[e.LOOP_END=12]="LOOP_END"}(r.ATNStateType||(r.ATNStateType={}))})(zi);var Af={},Ra={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ra,"__esModule",{value:!0});var Br=Ra.RecognitionException=void 0;class G9 extends Error{constructor(e,t,i,s){super(s),this._offendingState=-1,this._recognizer=e,this.input=t,this.ctx=i,e&&(this._offendingState=e.state)}get offendingState(){return this._offendingState}setOffendingState(e){this._offendingState=e}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(e){if(!(e&&e!==this._recognizer))return this.offendingToken}setOffendingToken(e,t){e===this._recognizer&&(this.offendingToken=t)}get recognizer(){return this._recognizer}}Br=Ra.RecognitionException=G9;var rg={},bf={},Oo={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var w3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},H9=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Transition=void 0;const A3=Ke;let y0=class{constructor(e){if(e==null)throw new Error("target cannot be null.");this.target=e}get isEpsilon(){return!1}get label(){}};y0.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];w3([A3.NotNull],y0.prototype,"target",void 0);y0=w3([H9(0,A3.NotNull)],y0);Oo.Transition=y0;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(bf,"__esModule",{value:!0});bf.AbstractPredicateTransition=void 0;const z9=Oo;class j9 extends z9.Transition{constructor(e){super(e)}}bf.AbstractPredicateTransition=j9;var vh={},No={},m1={},ti={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash=void 0,function(e){function i(l=0){return l}e.initialize=i;function s(l,u){u==null?u=0:typeof u=="string"?u=a(u):typeof u=="object"&&(u=u.hashCode());let b=u;return b=Math.imul(b,3432918353),b=b<<15|b>>>32-15,b=Math.imul(b,461845907),l=l^b,l=l<<13|l>>>32-13,l=Math.imul(l,5)+3864292196,l&4294967295}e.update=s;function n(l,u){return l=l^u*4,l=l^l>>>16,l=Math.imul(l,2246822507),l=l^l>>>13,l=Math.imul(l,3266489909),l=l^l>>>16,l}e.finish=n;function o(l,u=0){let d=i(u),f=0;for(let g of l)d=s(d,g),f++;return d=n(d,f),d}e.hashCode=o;function a(l){let u=l.length;if(u===0)return 0;let d=0;for(let f=0;f<u;f++){let g=l.charCodeAt(f);d=(d<<5>>>0)-d+g,d|=0}return d}}(r.MurmurHash||(r.MurmurHash={}))})(ti);var Gs={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var b3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ObjectEqualityComparator=void 0;const k3=Ke;class v0{hashCode(e){return e==null?0:e.hashCode()}equals(e,t){return e==null?t==null:e.equals(t)}}v0.INSTANCE=new v0;b3([k3.Override],v0.prototype,"hashCode",null);b3([k3.Override],v0.prototype,"equals",null);Gs.ObjectEqualityComparator=v0;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var T3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(m1,"__esModule",{value:!0});m1.DefaultEqualityComparator=void 0;const P3=Ke,V9=ti,JP=Gs;class E0{hashCode(e){return e==null?0:typeof e=="string"||typeof e=="number"?V9.MurmurHash.hashCode([e]):JP.ObjectEqualityComparator.INSTANCE.hashCode(e)}equals(e,t){return e==null?t==null:typeof e=="string"||typeof e=="number"?e===t:JP.ObjectEqualityComparator.INSTANCE.equals(e,t)}}E0.INSTANCE=new E0;T3([P3.Override],E0.prototype,"hashCode",null);T3([P3.Override],E0.prototype,"equals",null);m1.DefaultEqualityComparator=E0;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Rn=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},W9=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(No,"__esModule",{value:!0});No.Array2DHashSet=void 0;const $9=Us,K9=m1,Dn=Ke,AE=ti,dm=16,bE=.75;class oi{constructor(e,t=dm){if(this.n=0,this.threshold=Math.floor(dm*bE),e instanceof oi){this.comparator=e.comparator,this.buckets=e.buckets.slice(0);for(let i=0;i<this.buckets.length;i++){let s=this.buckets[i];s&&(this.buckets[i]=s.slice(0))}this.n=e.n,this.threshold=e.threshold}else this.comparator=e||K9.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(t)}getOrAdd(e){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(e)}getOrAddImpl(e){let t=this.getBucket(e),i=this.buckets[t];if(!i)return i=[e],this.buckets[t]=i,this.n++,e;for(let s of i)if(this.comparator.equals(s,e))return s;return i.push(e),this.n++,e}get(e){if(e==null)return e;let t=this.getBucket(e),i=this.buckets[t];if(!!i){for(let s of i)if(this.comparator.equals(s,e))return s}}getBucket(e){return this.comparator.hashCode(e)&this.buckets.length-1}hashCode(){let e=AE.MurmurHash.initialize();for(let t of this.buckets)if(t!=null)for(let i of t){if(i==null)break;e=AE.MurmurHash.update(e,this.comparator.hashCode(i))}return e=AE.MurmurHash.finish(e,this.size),e}equals(e){return e===this?!0:!(e instanceof oi)||e.size!==this.size?!1:this.containsAll(e)}expand(){let e=this.buckets,t=this.buckets.length*2,i=this.createBuckets(t);this.buckets=i,this.threshold=Math.floor(t*bE);let s=this.size;for(let n of e)if(!!n)for(let o of n){let a=this.getBucket(o),l=this.buckets[a];l||(l=[],this.buckets[a]=l),l.push(o)}$9(this.n===s)}add(e){return this.getOrAdd(e)===e}get size(){return this.n}get isEmpty(){return this.n===0}contains(e){return this.containsFast(this.asElementType(e))}containsFast(e){return e==null?!1:this.get(e)!=null}*[Symbol.iterator](){yield*this.toArray()}toArray(){const e=new Array(this.size);let t=0;for(let i of this.buckets)if(i!=null)for(let s of i){if(s==null)break;e[t++]=s}return e}containsAll(e){if(e instanceof oi){let t=e;for(let i of t.buckets)if(i!=null)for(let s of i){if(s==null)break;if(!this.containsFast(this.asElementType(s)))return!1}}else for(let t of e)if(!this.containsFast(this.asElementType(t)))return!1;return!0}addAll(e){let t=!1;for(let i of e)this.getOrAdd(i)!==i&&(t=!0);return t}clear(){this.buckets=this.createBuckets(dm),this.n=0,this.threshold=Math.floor(dm*bE)}toString(){if(this.size===0)return"{}";let e="{",t=!0;for(let i of this.buckets)if(i!=null)for(let s of i){if(s==null)break;t?t=!1:e+=", ",e+=s.toString()}return e+="}",e}toTableString(){let e="";for(let t of this.buckets){if(t==null){e+=`null
`;continue}e+="[";let i=!0;for(let s of t)i?i=!1:e+=" ",s==null?e+="_":e+=s.toString();e+=`]
`}return e}asElementType(e){return e}createBuckets(e){return new Array(e)}}Rn([Dn.NotNull],oi.prototype,"comparator",void 0);Rn([Dn.Override],oi.prototype,"hashCode",null);Rn([Dn.Override],oi.prototype,"equals",null);Rn([Dn.Override],oi.prototype,"add",null);Rn([Dn.Override],oi.prototype,"size",null);Rn([Dn.Override],oi.prototype,"isEmpty",null);Rn([Dn.Override],oi.prototype,"contains",null);Rn([W9(0,Dn.Nullable)],oi.prototype,"containsFast",null);Rn([Dn.Override],oi.prototype,Symbol.iterator,null);Rn([Dn.Override],oi.prototype,"toArray",null);Rn([Dn.Override],oi.prototype,"containsAll",null);Rn([Dn.Override],oi.prototype,"addAll",null);Rn([Dn.Override],oi.prototype,"clear",null);Rn([Dn.Override],oi.prototype,"toString",null);Rn([Dn.SuppressWarnings("unchecked")],oi.prototype,"asElementType",null);Rn([Dn.SuppressWarnings("unchecked")],oi.prototype,"createBuckets",null);No.Array2DHashSet=oi;var Eh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var R3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.ArrayEqualityComparator=void 0;const D3=Ke,X9=ti,Y9=Gs;class S0{hashCode(e){return e==null?0:X9.MurmurHash.hashCode(e,0)}equals(e,t){if(e==null)return t==null;if(t==null||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Y9.ObjectEqualityComparator.INSTANCE.equals(e[i],t[i]))return!1;return!0}}S0.INSTANCE=new S0;R3([D3.Override],S0.prototype,"hashCode",null);R3([D3.Override],S0.prototype,"equals",null);Eh.ArrayEqualityComparator=S0;var Ei={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ei,"__esModule",{value:!0});var vb=Ei.toCharArray=Ei.toMap=Ei.equals=C3=Ei.join=Ei.escapeWhitespace=void 0;function q9(r,e){return e?r.replace(/ /,"\xB7"):r.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")}Ei.escapeWhitespace=q9;function Q9(r,e){let t="",i=!0;for(let s of r)i?i=!1:t+=e,t+=s;return t}var C3=Ei.join=Q9;function J9(r,e){return r===e?!0:r===void 0||e===void 0?!1:r.equals(e)}Ei.equals=J9;function Z9(r){let e=new Map;for(let t=0;t<r.length;t++)e.set(r[t],t);return e}Ei.toMap=Z9;function eH(r){if(typeof r=="string"){let e=new Uint16Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}else return r.toCharArray()}vb=Ei.toCharArray=eH;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(g,x,E,P){var b=arguments.length,R=b<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,E):P,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(g,x,E,P);else for(var C=g.length-1;C>=0;C--)(D=g[C])&&(R=(b<3?D(R):b>3?D(x,E,R):D(x,E))||R);return b>3&&R&&Object.defineProperty(x,E,R),R},t=$&&$.__param||function(g,x){return function(E,P){x(E,P,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SemanticContext=void 0;const i=No,s=Eh,n=ti,o=Ke,a=Gs,l=Ei;function u(g){let x;for(let E of g){if(x===void 0){x=E;continue}x.compareTo(E)<0&&(x=E)}return x}function d(g){let x;for(let E of g){if(x===void 0){x=E;continue}x.compareTo(E)>0&&(x=E)}return x}class f{static get NONE(){return f._NONE===void 0&&(f._NONE=new f.Predicate),f._NONE}evalPrecedence(x,E){return this}static and(x,E){if(!x||x===f.NONE)return E;if(E===f.NONE)return x;let P=new f.AND(x,E);return P.opnds.length===1?P.opnds[0]:P}static or(x,E){if(!x)return E;if(x===f.NONE||E===f.NONE)return f.NONE;let P=new f.OR(x,E);return P.opnds.length===1?P.opnds[0]:P}}r.SemanticContext=f,function(g){function P(H){let N=[];for(let V=0;V<H.length;V++){let O=H[V];O instanceof g.PrecedencePredicate&&(N.push(O),H.splice(V,1),V--)}return N}class b extends g{constructor(N=-1,V=-1,O=!1){super(),this.ruleIndex=N,this.predIndex=V,this.isCtxDependent=O}eval(N,V){let O=this.isCtxDependent?V:void 0;return N.sempred(O,this.ruleIndex,this.predIndex)}hashCode(){let N=n.MurmurHash.initialize();return N=n.MurmurHash.update(N,this.ruleIndex),N=n.MurmurHash.update(N,this.predIndex),N=n.MurmurHash.update(N,this.isCtxDependent?1:0),N=n.MurmurHash.finish(N,3),N}equals(N){return N instanceof b?this===N?!0:this.ruleIndex===N.ruleIndex&&this.predIndex===N.predIndex&&this.isCtxDependent===N.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}e([o.Override],b.prototype,"eval",null),e([o.Override],b.prototype,"hashCode",null),e([o.Override],b.prototype,"equals",null),e([o.Override],b.prototype,"toString",null),g.Predicate=b;class R extends g{constructor(N){super(),this.precedence=N}eval(N,V){return N.precpred(V,this.precedence)}evalPrecedence(N,V){if(N.precpred(V,this.precedence))return g.NONE}compareTo(N){return this.precedence-N.precedence}hashCode(){let N=1;return N=31*N+this.precedence,N}equals(N){return N instanceof R?this===N?!0:this.precedence===N.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}}e([o.Override],R.prototype,"eval",null),e([o.Override],R.prototype,"evalPrecedence",null),e([o.Override],R.prototype,"compareTo",null),e([o.Override],R.prototype,"hashCode",null),e([o.Override],R.prototype,"equals",null),e([o.Override],R.prototype,"toString",null),g.PrecedencePredicate=R;class D extends g{}g.Operator=D;let C=class ax extends D{constructor(N,V){super();let O=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);N instanceof ax?O.addAll(N.opnds):O.add(N),V instanceof ax?O.addAll(V.opnds):O.add(V),this.opnds=O.toArray();let W=P(this.opnds),q=d(W);q&&this.opnds.push(q)}get operands(){return this.opnds}equals(N){return this===N?!0:N instanceof ax?s.ArrayEqualityComparator.INSTANCE.equals(this.opnds,N.opnds):!1}hashCode(){return n.MurmurHash.hashCode(this.opnds,40363613)}eval(N,V){for(let O of this.opnds)if(!O.eval(N,V))return!1;return!0}evalPrecedence(N,V){let O=!1,W=[];for(let re of this.opnds){let fe=re.evalPrecedence(N,V);if(O=O||fe!==re,fe==null)return;fe!==g.NONE&&W.push(fe)}if(!O)return this;if(W.length===0)return g.NONE;let q=W[0];for(let re=1;re<W.length;re++)q=g.and(q,W[re]);return q}toString(){return l.join(this.opnds,"&&")}};e([o.Override],C.prototype,"operands",null),e([o.Override],C.prototype,"equals",null),e([o.Override],C.prototype,"hashCode",null),e([o.Override],C.prototype,"eval",null),e([o.Override],C.prototype,"evalPrecedence",null),e([o.Override],C.prototype,"toString",null),C=e([t(0,o.NotNull),t(1,o.NotNull)],C),g.AND=C;let I=class lx extends D{constructor(N,V){super();let O=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);N instanceof lx?O.addAll(N.opnds):O.add(N),V instanceof lx?O.addAll(V.opnds):O.add(V),this.opnds=O.toArray();let W=P(this.opnds),q=u(W);q&&this.opnds.push(q)}get operands(){return this.opnds}equals(N){return this===N?!0:N instanceof lx?s.ArrayEqualityComparator.INSTANCE.equals(this.opnds,N.opnds):!1}hashCode(){return n.MurmurHash.hashCode(this.opnds,486279973)}eval(N,V){for(let O of this.opnds)if(O.eval(N,V))return!0;return!1}evalPrecedence(N,V){let O=!1,W=[];for(let re of this.opnds){let fe=re.evalPrecedence(N,V);if(O=O||fe!==re,fe===g.NONE)return g.NONE;fe&&W.push(fe)}if(!O)return this;if(W.length===0)return;let q=W[0];for(let re=1;re<W.length;re++)q=g.or(q,W[re]);return q}toString(){return l.join(this.opnds,"||")}};e([o.Override],I.prototype,"operands",null),e([o.Override],I.prototype,"equals",null),e([o.Override],I.prototype,"hashCode",null),e([o.Override],I.prototype,"eval",null),e([o.Override],I.prototype,"evalPrecedence",null),e([o.Override],I.prototype,"toString",null),I=e([t(0,o.NotNull),t(1,o.NotNull)],I),g.OR=I}(f=r.SemanticContext||(r.SemanticContext={}))})(vh);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ig=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},tH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(rg,"__esModule",{value:!0});rg.PredicateTransition=void 0;const rH=bf,$d=Ke,iH=vh;let Qc=class extends rH.AbstractPredicateTransition{constructor(e,t,i,s){super(e),this.ruleIndex=t,this.predIndex=i,this.isCtxDependent=s}get serializationType(){return 4}get isEpsilon(){return!0}matches(e,t,i){return!1}get predicate(){return new iH.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};ig([$d.Override],Qc.prototype,"serializationType",null);ig([$d.Override],Qc.prototype,"isEpsilon",null);ig([$d.Override],Qc.prototype,"matches",null);ig([$d.Override,$d.NotNull],Qc.prototype,"toString",null);Qc=ig([tH(0,$d.NotNull)],Qc);rg.PredicateTransition=Qc;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var O3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},nH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Af,"__esModule",{value:!0});var N3=Af.FailedPredicateException=void 0;const sH=Ra,I3=Ke,oH=rg;let hy=class F3 extends sH.RecognitionException{constructor(e,t,i){super(e,e.inputStream,e.context,F3.formatMessage(t,i));let n=e.interpreter.atn.states[e.state].transition(0);n instanceof oH.PredicateTransition?(this._ruleIndex=n.ruleIndex,this._predicateIndex=n.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=t,super.setOffendingToken(e,e.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(e,t){return t||`failed predicate: {${e}}?`}};O3([I3.NotNull],hy,"formatMessage",null);hy=O3([nH(0,I3.NotNull)],hy);N3=Af.FailedPredicateException=hy;var Sh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var aH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},lH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.InputMismatchException=void 0;const uH=Ra,cH=Ke;let uw=class extends uH.RecognitionException{constructor(e,t,i){i===void 0&&(i=e.context),super(e,e.inputStream,i),t!==void 0&&this.setOffendingState(t),this.setOffendingToken(e,e.currentToken)}};uw=aH([lH(0,cH.NotNull)],uw);Sh.InputMismatchException=uw;var u_={},kf={},x1={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Arrays=void 0,function(e){function t(n,o,a,l){return i(n,a!==void 0?a:0,l!==void 0?l:n.length,o)}e.binarySearch=t;function i(n,o,a,l){let u=o,d=a-1;for(;u<=d;){let f=u+d>>>1,g=n[f];if(g<l)u=f+1;else if(g>l)d=f-1;else return f}return-(u+1)}function s(n){let o="[",a=!0;for(let l of n)a?a=!1:o+=", ",l===null?o+="null":l===void 0?o+="undefined":o+=l;return o+="]",o}e.toString=s}(r.Arrays||(r.Arrays={}))})(x1);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var y1=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(kf,"__esModule",{value:!0});kf.IntegerList=void 0;const hH=x1,v1=Ke,kE=new Int32Array(0),dH=4,TE=(1<<31>>>0)-1-8;class sl{constructor(e){if(!e)this._data=kE,this._size=0;else if(e instanceof sl)this._data=e._data.slice(0),this._size=e._size;else if(typeof e=="number")e===0?(this._data=kE,this._size=0):(this._data=new Int32Array(e),this._size=0);else{this._data=kE,this._size=0;for(let t of e)this.add(t)}}add(e){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=e,this._size++}addAll(e){if(Array.isArray(e))this.ensureCapacity(this._size+e.length),this._data.subarray(this._size,this._size+e.length).set(e),this._size+=e.length;else if(e instanceof sl)this.ensureCapacity(this._size+e._size),this._data.subarray(this._size,this._size+e.size).set(e._data),this._size+=e._size;else{this.ensureCapacity(this._size+e.size);let t=0;for(let i of e)this._data[this._size+t]=i,t++;this._size+=e.size}}get(e){if(e<0||e>=this._size)throw RangeError();return this._data[e]}contains(e){for(let t=0;t<this._size;t++)if(this._data[t]===e)return!0;return!1}set(e,t){if(e<0||e>=this._size)throw RangeError();let i=this._data[e];return this._data[e]=t,i}removeAt(e){let t=this.get(e);return this._data.copyWithin(e,e+1,this._size),this._data[this._size-1]=0,this._size--,t}removeRange(e,t){if(e<0||t<0||e>this._size||t>this._size||e>t)throw RangeError();this._data.copyWithin(t,e,this._size),this._data.fill(0,this._size-(t-e),this._size),this._size-=t-e}get isEmpty(){return this._size===0}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return this._size===0?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(e){if(e===this)return!0;if(!(e instanceof sl)||this._size!==e._size)return!1;for(let t=0;t<this._size;t++)if(this._data[t]!==e._data[t])return!1;return!0}hashCode(){let e=1;for(let t=0;t<this._size;t++)e=31*e+this._data[t];return e}toString(){return this._data.toString()}binarySearch(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=this._size),t<0||i<0||t>this._size||i>this._size)throw new RangeError;if(t>i)throw new RangeError;return hH.Arrays.binarySearch(this._data,e,t,i)}ensureCapacity(e){if(e<0||e>TE)throw new RangeError;let t;for(this._data.length===0?t=dH:t=this._data.length;t<e;)t=t*2,(t<0||t>TE)&&(t=TE);let i=new Int32Array(t);i.set(this._data),this._data=i}toCharArray(){let e=new Uint16Array(this._size),t=0,i=!1;for(let s=0;s<this._size;s++){let n=this._data[s];if(n>=0&&n<65536){e[t]=n,t++;continue}if(!i){let a=new Uint16Array(this.charArraySize());a.set(e,0),e=a,i=!0}let o=String.fromCodePoint(n);e[t]=o.charCodeAt(0),e[t+1]=o.charCodeAt(1),t+=2}return e}charArraySize(){let e=0;for(let t=0;t<this._size;t++)e+=this._data[t]>=65536?2:1;return e}}y1([v1.NotNull],sl.prototype,"_data",void 0);y1([v1.Override],sl.prototype,"equals",null);y1([v1.Override],sl.prototype,"hashCode",null);y1([v1.Override],sl.prototype,"toString",null);kf.IntegerList=sl;var ln={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Eb=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(ln,"__esModule",{value:!0});ln.Interval=void 0;const Sb=Ke,M3=1e3;class vi{constructor(e,t){this.a=e,this.b=t}static get INVALID(){return vi._INVALID}static of(e,t){return e!==t||e<0||e>M3?new vi(e,t):(vi.cache[e]==null&&(vi.cache[e]=new vi(e,e)),vi.cache[e])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(e){return e===this?!0:e instanceof vi?this.a===e.a&&this.b===e.b:!1}hashCode(){let e=23;return e=e*31+this.a,e=e*31+this.b,e}startsBeforeDisjoint(e){return this.a<e.a&&this.b<e.a}startsBeforeNonDisjoint(e){return this.a<=e.a&&this.b>=e.a}startsAfter(e){return this.a>e.a}startsAfterDisjoint(e){return this.a>e.b}startsAfterNonDisjoint(e){return this.a>e.a&&this.a<=e.b}disjoint(e){return this.startsBeforeDisjoint(e)||this.startsAfterDisjoint(e)}adjacent(e){return this.a===e.b+1||this.b===e.a-1}properlyContains(e){return e.a>=this.a&&e.b<=this.b}union(e){return vi.of(Math.min(this.a,e.a),Math.max(this.b,e.b))}intersection(e){return vi.of(Math.max(this.a,e.a),Math.min(this.b,e.b))}differenceNotProperlyContained(e){let t;return e.startsBeforeNonDisjoint(this)?t=vi.of(Math.max(this.a,e.b+1),this.b):e.startsAfterNonDisjoint(this)&&(t=vi.of(this.a,e.a-1)),t}toString(){return this.a+".."+this.b}}vi._INVALID=new vi(-1,-2);vi.cache=new Array(M3+1);Eb([Sb.Override],vi.prototype,"equals",null);Eb([Sb.Override],vi.prototype,"hashCode",null);Eb([Sb.Override],vi.prototype,"toString",null);ln.Interval=vi;var c_={},E1={},Ou={},dr={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0;const e=ml;(function(t){t.INVALID_TYPE=0,t.EPSILON=-2,t.MIN_USER_TOKEN_TYPE=1,t.EOF=e.IntStream.EOF,t.DEFAULT_CHANNEL=0,t.HIDDEN_CHANNEL=1,t.MIN_USER_CHANNEL_VALUE=2})(r.Token||(r.Token={}))})(dr);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var cs=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},B3=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.CommonToken=void 0;const fH=ln,hs=Ke,ZP=dr;let sn=class fp{constructor(e,t,i=fp.EMPTY_SOURCE,s=ZP.Token.DEFAULT_CHANNEL,n=0,o=0){this._line=0,this._charPositionInLine=-1,this._channel=ZP.Token.DEFAULT_CHANNEL,this.index=-1,this._text=t,this._type=e,this.source=i,this._channel=s,this.start=n,this.stop=o,i.source!=null&&(this._line=i.source.line,this._charPositionInLine=i.source.charPositionInLine)}static fromToken(e){let t=new fp(e.type,void 0,fp.EMPTY_SOURCE,e.channel,e.startIndex,e.stopIndex);return t._line=e.line,t.index=e.tokenIndex,t._charPositionInLine=e.charPositionInLine,e instanceof fp?(t._text=e._text,t.source=e.source):(t._text=e.text,t.source={source:e.tokenSource,stream:e.inputStream}),t}get type(){return this._type}set type(e){this._type=e}get line(){return this._line}set line(e){this._line=e}get text(){if(this._text!=null)return this._text;let e=this.inputStream;if(e==null)return;let t=e.size;return this.start<t&&this.stop<t?e.getText(fH.Interval.of(this.start,this.stop)):"<EOF>"}set text(e){this._text=e}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(e){this._charPositionInLine=e}get channel(){return this._channel}set channel(e){this._channel=e}get startIndex(){return this.start}set startIndex(e){this.start=e}get stopIndex(){return this.stop}set stopIndex(e){this.stop=e}get tokenIndex(){return this.index}set tokenIndex(e){this.index=e}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(e){let t="";this._channel>0&&(t=",channel="+this._channel);let i=this.text;i!=null?(i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i=i.replace(/\t/g,"\\t")):i="<no text>";let s=String(this._type);return e&&(s=e.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+i+"',<"+s+">"+t+","+this._line+":"+this.charPositionInLine+"]"}};sn.EMPTY_SOURCE={source:void 0,stream:void 0};cs([hs.NotNull],sn.prototype,"source",void 0);cs([hs.Override],sn.prototype,"type",null);cs([hs.Override],sn.prototype,"line",null);cs([hs.Override],sn.prototype,"text",null);cs([hs.Override],sn.prototype,"charPositionInLine",null);cs([hs.Override],sn.prototype,"channel",null);cs([hs.Override],sn.prototype,"startIndex",null);cs([hs.Override],sn.prototype,"stopIndex",null);cs([hs.Override],sn.prototype,"tokenIndex",null);cs([hs.Override],sn.prototype,"tokenSource",null);cs([hs.Override],sn.prototype,"inputStream",null);cs([hs.Override],sn.prototype,"toString",null);cs([B3(0,hs.NotNull)],sn,"fromToken",null);sn=cs([B3(2,hs.NotNull)],sn);Ou.CommonToken=sn;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(r,"__esModule",{value:!0}),r.CommonTokenFactory=void 0;const t=Ou,i=ln,s=Ke;class n{constructor(a=!1){this.copyText=a}create(a,l,u,d,f,g,x,E){let P=new t.CommonToken(l,u,a,d,f,g);return P.line=x,P.charPositionInLine=E,u==null&&this.copyText&&a.stream!=null&&(P.text=a.stream.getText(i.Interval.of(f,g))),P}createSimple(a,l){return new t.CommonToken(a,l)}}e([s.Override],n.prototype,"create",null),e([s.Override],n.prototype,"createSimple",null),r.CommonTokenFactory=n,function(o){o.DEFAULT=new o}(n=r.CommonTokenFactory||(r.CommonTokenFactory={}))})(E1);var ng={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(ng,"__esModule",{value:!0});ng.IntegerStack=void 0;const _H=kf;class pH extends _H.IntegerList{constructor(e){super(e)}push(e){this.add(e)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}}ng.IntegerStack=pH;var PE={},sg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(sg,"__esModule",{value:!0});sg.AcceptStateInfo=void 0;class gH{constructor(e,t){this._prediction=e,this._lexerActionExecutor=t}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}}sg.AcceptStateInfo=gH;var RE={},xl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(xl,"__esModule",{value:!0});xl.Array2DHashMap=void 0;const eR=No;class mH{constructor(e){this.keyComparator=e}hashCode(e){return this.keyComparator.hashCode(e.key)}equals(e,t){return this.keyComparator.equals(e.key,t.key)}}class dy{constructor(e){e instanceof dy?this.backingStore=new eR.Array2DHashSet(e.backingStore):this.backingStore=new eR.Array2DHashSet(new mH(e))}clear(){this.backingStore.clear()}containsKey(e){return this.backingStore.contains({key:e})}get(e){let t=this.backingStore.get({key:e});if(!!t)return t.value}get isEmpty(){return this.backingStore.isEmpty}put(e,t){let i=this.backingStore.get({key:e,value:t}),s;return i?(s=i.value,i.value=t):this.backingStore.add({key:e,value:t}),s}putIfAbsent(e,t){let i=this.backingStore.get({key:e,value:t}),s;return i?s=i.value:this.backingStore.add({key:e,value:t}),s}get size(){return this.backingStore.size}hashCode(){return this.backingStore.hashCode()}equals(e){return e instanceof dy?this.backingStore.equals(e.backingStore):!1}}xl.Array2DHashMap=dy;var h_={},d_={},wh={},Da={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Da,"__esModule",{value:!0});Da.DecisionState=void 0;const xH=Pa;class yH extends xH.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}}Da.DecisionState=yH;var DE={},CE={},tR;function wb(){return tR||(tR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(l,u,d,f){var g=arguments.length,x=g<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,d):f,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,u,d,f);else for(var P=l.length-1;P>=0;P--)(E=l[P])&&(x=(g<3?E(x):g>3?E(u,d,x):E(u,d))||x);return g>3&&x&&Object.defineProperty(u,d,x),x};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionContextCache=void 0;const t=xl,i=Ke,s=Gs,n=Io(),o=Us;class a{constructor(u=!0){this.contexts=new t.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.childContexts=new t.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.joinContexts=new t.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.enableCache=u}getAsCached(u){if(!this.enableCache)return u;let d=this.contexts.get(u);return d||(d=u,this.contexts.put(u,u)),d}getChild(u,d){if(!this.enableCache)return u.getChild(d);let f=new a.PredictionContextAndInt(u,d),g=this.childContexts.get(f);return g||(g=u.getChild(d),g=this.getAsCached(g),this.childContexts.put(f,g)),g}join(u,d){if(!this.enableCache)return n.PredictionContext.join(u,d,this);let f=new a.IdentityCommutativePredictionContextOperands(u,d),g=this.joinContexts.get(f);return g||(g=n.PredictionContext.join(u,d,this),g=this.getAsCached(g),this.joinContexts.put(f,g),g)}}r.PredictionContextCache=a,a.UNCACHED=new a(!1),function(l){class u{constructor(g,x){this.obj=g,this.value=x}equals(g){if(g instanceof u){if(g===this)return!0}else return!1;let x=g;return this.value===x.value&&(this.obj===x.obj||this.obj!=null&&this.obj.equals(x.obj))}hashCode(){let g=5;return g=7*g+(this.obj!=null?this.obj.hashCode():0),g=7*g+this.value,g}}e([i.Override],u.prototype,"equals",null),e([i.Override],u.prototype,"hashCode",null),l.PredictionContextAndInt=u;class d{constructor(g,x){o(g!=null),o(x!=null),this._x=g,this._y=x}get x(){return this._x}get y(){return this._y}equals(g){if(g instanceof d){if(this===g)return!0}else return!1;let x=g;return this._x===x._x&&this._y===x._y||this._x===x._y&&this._y===x._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}e([i.Override],d.prototype,"equals",null),e([i.Override],d.prototype,"hashCode",null),l.IdentityCommutativePredictionContextOperands=d}(a=r.PredictionContextCache||(r.PredictionContextCache={}))}(CE)),CE}var rR;function Io(){return rR||(rR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(P,b,R,D){var C=arguments.length,I=C<3?b:D===null?D=Object.getOwnPropertyDescriptor(b,R):D,H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(P,b,R,D);else for(var N=P.length-1;N>=0;N--)(H=P[N])&&(I=(C<3?H(I):C>3?H(b,R,I):H(b,R))||I);return C>3&&I&&Object.defineProperty(b,R,I),I},t=$&&$.__param||function(P,b){return function(R,D){b(R,D,P)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SingletonPredictionContext=r.PredictionContext=void 0;const i=xl,s=No,n=x1,o=ti,a=Ke,l=wb(),u=Us,d=1;class f{constructor(b){this.cachedHashCode=b}static calculateEmptyHashCode(){let b=o.MurmurHash.initialize(d);return b=o.MurmurHash.finish(b,0),b}static calculateSingleHashCode(b,R){let D=o.MurmurHash.initialize(d);return D=o.MurmurHash.update(D,b),D=o.MurmurHash.update(D,R),D=o.MurmurHash.finish(D,2),D}static calculateHashCode(b,R){let D=o.MurmurHash.initialize(d);for(let C of b)D=o.MurmurHash.update(D,C);for(let C of R)D=o.MurmurHash.update(D,C);return D=o.MurmurHash.finish(D,2*b.length),D}static fromRuleContext(b,R,D=!0){if(R.isEmpty)return D?f.EMPTY_FULL:f.EMPTY_LOCAL;let C;R._parent?C=f.fromRuleContext(b,R._parent,D):C=D?f.EMPTY_FULL:f.EMPTY_LOCAL;let H=b.states[R.invokingState].transition(0);return C.getChild(H.followState.stateNumber)}static addEmptyContext(b){return b.addEmptyContext()}static removeEmptyContext(b){return b.removeEmptyContext()}static join(b,R,D=l.PredictionContextCache.UNCACHED){if(b===R)return b;if(b.isEmpty)return f.isEmptyLocal(b)?b:f.addEmptyContext(R);if(R.isEmpty)return f.isEmptyLocal(R)?R:f.addEmptyContext(b);let C=b.size,I=R.size;if(C===1&&I===1&&b.getReturnState(0)===R.getReturnState(0)){let fe=D.join(b.getParent(0),R.getParent(0));return fe===b.getParent(0)?b:fe===R.getParent(0)?R:fe.getChild(b.getReturnState(0))}let H=0,N=new Array(C+I),V=new Array(N.length),O=0,W=0,q=!0,re=!0;for(;O<C&&W<I;)b.getReturnState(O)===R.getReturnState(W)?(N[H]=D.join(b.getParent(O),R.getParent(W)),V[H]=b.getReturnState(O),q=q&&N[H]===b.getParent(O),re=re&&N[H]===R.getParent(W),O++,W++):b.getReturnState(O)<R.getReturnState(W)?(N[H]=b.getParent(O),V[H]=b.getReturnState(O),re=!1,O++):(u(R.getReturnState(W)<b.getReturnState(O)),N[H]=R.getParent(W),V[H]=R.getReturnState(W),q=!1,W++),H++;for(;O<C;)N[H]=b.getParent(O),V[H]=b.getReturnState(O),O++,re=!1,H++;for(;W<I;)N[H]=R.getParent(W),V[H]=R.getReturnState(W),W++,q=!1,H++;return q?b:re?R:(H<N.length&&(N=N.slice(0,H),V=V.slice(0,H)),N.length===0?f.EMPTY_FULL:N.length===1?new E(N[0],V[0]):new x(N,V))}static isEmptyLocal(b){return b===f.EMPTY_LOCAL}static getCachedContext(b,R,D){if(b.isEmpty)return b;let C=D.get(b);if(C)return C;if(C=R.get(b),C)return D.put(b,C),C;let I=!1,H=new Array(b.size);for(let V=0;V<H.length;V++){let O=f.getCachedContext(b.getParent(V),R,D);if(I||O!==b.getParent(V)){if(!I){H=new Array(b.size);for(let W=0;W<b.size;W++)H[W]=b.getParent(W);I=!0}H[V]=O}}if(!I)return C=R.putIfAbsent(b,b),D.put(b,C!=null?C:b),b;let N;if(H.length===1)N=new E(H[0],b.getReturnState(0));else{let V=new Array(b.size);for(let O=0;O<b.size;O++)V[O]=b.getReturnState(O);N=new x(H,V,b.hashCode())}return C=R.putIfAbsent(N,N),D.put(N,C||N),D.put(b,C||N),N}appendSingleContext(b,R){return this.appendContext(f.EMPTY_FULL.getChild(b),R)}getChild(b){return new E(this,b)}hashCode(){return this.cachedHashCode}toStrings(b,R,D=f.EMPTY_FULL){let C=[];e:for(let I=0;;I++){let H=0,N=!0,V=this,O=R,W="";for(W+="[";!V.isEmpty&&V!==D;){let q=0;if(V.size>0){let re=1;for(;1<<re>>>0<V.size;)re++;let fe=(1<<re>>>0)-1;if(q=I>>H&fe,N=N&&q>=V.size-1,q>=V.size)continue e;H+=re}if(b){W.length>1&&(W+=" ");let fe=b.atn.states[O],he=b.ruleNames[fe.ruleIndex];W+=he}else V.getReturnState(q)!==f.EMPTY_FULL_STATE_KEY&&(V.isEmpty||(W.length>1&&(W+=" "),W+=V.getReturnState(q)));O=V.getReturnState(q),V=V.getParent(q)}if(W+="]",C.push(W),N)break}return C}}e([a.Override],f.prototype,"hashCode",null),e([t(0,a.NotNull),t(1,a.NotNull),t(2,a.NotNull)],f,"join",null),e([t(0,a.NotNull),t(1,a.NotNull),t(2,a.NotNull)],f,"getCachedContext",null),r.PredictionContext=f;class g extends f{constructor(b){super(f.calculateEmptyHashCode()),this.fullContext=b}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(b){throw new Error("index out of bounds")}getReturnState(b){throw new Error("index out of bounds")}findReturnState(b){return-1}get size(){return 0}appendSingleContext(b,R){return R.getChild(this,b)}appendContext(b,R){return b}get isEmpty(){return!0}get hasEmpty(){return!0}equals(b){return this===b}toStrings(b,R,D){return["[]"]}}e([a.Override],g.prototype,"addEmptyContext",null),e([a.Override],g.prototype,"removeEmptyContext",null),e([a.Override],g.prototype,"getParent",null),e([a.Override],g.prototype,"getReturnState",null),e([a.Override],g.prototype,"findReturnState",null),e([a.Override],g.prototype,"size",null),e([a.Override],g.prototype,"appendSingleContext",null),e([a.Override],g.prototype,"appendContext",null),e([a.Override],g.prototype,"isEmpty",null),e([a.Override],g.prototype,"hasEmpty",null),e([a.Override],g.prototype,"equals",null),e([a.Override],g.prototype,"toStrings",null);let x=class nc extends f{constructor(b,R,D){super(D||f.calculateHashCode(b,R)),u(b.length===R.length),u(R.length>1||R[0]!==f.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=b,this.returnStates=R}getParent(b){return this.parents[b]}getReturnState(b){return this.returnStates[b]}findReturnState(b){return n.Arrays.binarySearch(this.returnStates,b)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===f.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let b=this.parents.slice(0),R=this.returnStates.slice(0);return b.push(f.EMPTY_FULL),R.push(f.EMPTY_FULL_STATE_KEY),new nc(b,R)}removeEmptyContext(){if(!this.hasEmpty)return this;if(this.returnStates.length===2)return new E(this.parents[0],this.returnStates[0]);{let b=this.parents.slice(0,this.parents.length-1),R=this.returnStates.slice(0,this.returnStates.length-1);return new nc(b,R)}}appendContext(b,R){return nc.appendContextImpl(this,b,new f.IdentityHashMap)}static appendContextImpl(b,R,D){if(R.isEmpty){if(f.isEmptyLocal(R)){if(b.hasEmpty)return f.EMPTY_LOCAL;throw new Error("what to do here?")}return b}if(R.size!==1)throw new Error("Appending a tree suffix is not yet supported.");let C=D.get(b);if(!C){if(b.isEmpty)C=R;else{let I=b.size;b.hasEmpty&&I--;let H=new Array(I),N=new Array(I);for(let V=0;V<I;V++)N[V]=b.getReturnState(V);for(let V=0;V<I;V++)H[V]=nc.appendContextImpl(b.getParent(V),R,D);H.length===1?C=new E(H[0],N[0]):(u(H.length>1),C=new nc(H,N)),b.hasEmpty&&(C=f.join(C,R))}D.put(b,C)}return C}equals(b){if(this===b)return!0;if(!(b instanceof nc)||this.hashCode()!==b.hashCode())return!1;let R=b;return this.equalsImpl(R,new s.Array2DHashSet)}equalsImpl(b,R){let D=[],C=[];for(D.push(this),C.push(b);;){let I=D.pop(),H=C.pop();if(!I||!H)break;let N=new l.PredictionContextCache.IdentityCommutativePredictionContextOperands(I,H);if(!R.add(N))continue;let V=N.x.size;if(V===0){if(!N.x.equals(N.y))return!1;continue}let O=N.y.size;if(V!==O)return!1;for(let W=0;W<V;W++){if(N.x.getReturnState(W)!==N.y.getReturnState(W))return!1;let q=N.x.getParent(W),re=N.y.getParent(W);if(q.hashCode()!==re.hashCode())return!1;q!==re&&(D.push(q),C.push(re))}}return!0}};e([a.NotNull],x.prototype,"parents",void 0),e([a.NotNull],x.prototype,"returnStates",void 0),e([a.Override],x.prototype,"getParent",null),e([a.Override],x.prototype,"getReturnState",null),e([a.Override],x.prototype,"findReturnState",null),e([a.Override],x.prototype,"size",null),e([a.Override],x.prototype,"isEmpty",null),e([a.Override],x.prototype,"hasEmpty",null),e([a.Override],x.prototype,"addEmptyContext",null),e([a.Override],x.prototype,"removeEmptyContext",null),e([a.Override],x.prototype,"appendContext",null),e([a.Override],x.prototype,"equals",null),x=e([t(0,a.NotNull)],x);let E=class L3 extends f{constructor(b,R){super(f.calculateSingleHashCode(b,R)),this.parent=b,this.returnState=R}getParent(b){return this.parent}getReturnState(b){return this.returnState}findReturnState(b){return this.returnState===b?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(b,R){return R.getChild(this.parent.appendContext(b,R),this.returnState)}addEmptyContext(){let b=[this.parent,f.EMPTY_FULL],R=[this.returnState,f.EMPTY_FULL_STATE_KEY];return new x(b,R)}removeEmptyContext(){return this}equals(b){if(b===this)return!0;if(!(b instanceof L3))return!1;let R=b;return this.hashCode()!==R.hashCode()?!1:this.returnState===R.returnState&&this.parent.equals(R.parent)}};e([a.NotNull],E.prototype,"parent",void 0),e([a.Override],E.prototype,"getParent",null),e([a.Override],E.prototype,"getReturnState",null),e([a.Override],E.prototype,"findReturnState",null),e([a.Override],E.prototype,"size",null),e([a.Override],E.prototype,"isEmpty",null),e([a.Override],E.prototype,"hasEmpty",null),e([a.Override],E.prototype,"appendContext",null),e([a.Override],E.prototype,"addEmptyContext",null),e([a.Override],E.prototype,"removeEmptyContext",null),e([a.Override],E.prototype,"equals",null),E=e([t(0,a.NotNull)],E),r.SingletonPredictionContext=E,function(P){P.EMPTY_LOCAL=new g(!1),P.EMPTY_FULL=new g(!0),P.EMPTY_LOCAL_STATE_KEY=-(1<<31>>>0),P.EMPTY_FULL_STATE_KEY=(1<<31>>>0)-1;class b extends i.Array2DHashMap{constructor(){super(R.INSTANCE)}}P.IdentityHashMap=b;class R{IdentityEqualityComparator(){}hashCode(C){return C.hashCode()}equals(C,I){return C===I}}R.INSTANCE=new R,e([a.Override],R.prototype,"hashCode",null),e([a.Override],R.prototype,"equals",null),P.IdentityEqualityComparator=R}(f=r.PredictionContext||(r.PredictionContext={}))}(DE)),DE}/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var mi=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Ms=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(wh,"__esModule",{value:!0});wh.ATNConfig=void 0;const vH=xl,EH=Da,Ka=ti,Dr=Ke,SH=Gs,iR=Io(),sc=vh,nR=Us,OE=2147483648;let Kn=class _p{constructor(e,t,i){typeof t=="number"?(nR((t&16777215)===t),this._state=e,this.altAndOuterContextDepth=t,this._context=i):(this._state=e,this.altAndOuterContextDepth=t.altAndOuterContextDepth,this._context=i)}static create(e,t,i,s=sc.SemanticContext.NONE,n){return s!==sc.SemanticContext.NONE?n!=null?new Xd(n,s,e,t,i,!1):new Jc(s,e,t,i):n!=null?new Kd(n,e,t,i,!1):new _p(e,t,i)}get state(){return this._state}get alt(){return this.altAndOuterContextDepth&16777215}get context(){return this._context}set context(e){this._context=e}get reachesIntoOuterContext(){return this.outerContextDepth!==0}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(e){nR(e>=0),e=Math.min(e,127),this.altAndOuterContextDepth=e<<24|(this.altAndOuterContextDepth&-2130706433)>>>0}get lexerActionExecutor(){}get semanticContext(){return sc.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(e,t,i){return i==null?this.transformImpl(e,this._context,this.semanticContext,t,this.lexerActionExecutor):i instanceof iR.PredictionContext?this.transformImpl(e,i,this.semanticContext,t,this.lexerActionExecutor):i instanceof sc.SemanticContext?this.transformImpl(e,this._context,i,t,this.lexerActionExecutor):this.transformImpl(e,this._context,this.semanticContext,t,i)}transformImpl(e,t,i,s,n){let o=s&&_p.checkNonGreedyDecision(this,e);return i!==sc.SemanticContext.NONE?n!=null||o?new Xd(n,i,e,this,t,o):new Jc(i,e,this,t):n!=null||o?new Kd(n,e,this,t,o):new _p(e,this,t)}static checkNonGreedyDecision(e,t){return e.hasPassedThroughNonGreedyDecision||t instanceof EH.DecisionState&&t.nonGreedy}appendContext(e,t){if(typeof e=="number"){let i=this.context.appendSingleContext(e,t);return this.transform(this.state,!1,i)}else{let i=this.context.appendContext(e,t);return this.transform(this.state,!1,i)}}contains(e){if(this.state.stateNumber!==e.state.stateNumber||this.alt!==e.alt||!this.semanticContext.equals(e.semanticContext))return!1;let t=[],i=[];for(t.push(this.context),i.push(e.context);;){let s=t.pop(),n=i.pop();if(!s||!n)break;if(s===n)return!0;if(s.size<n.size)return!1;if(n.isEmpty)return s.hasEmpty;for(let o=0;o<n.size;o++){let a=s.findReturnState(n.getReturnState(o));if(a<0)return!1;t.push(s.getParent(a)),i.push(n.getParent(o))}}return!1}get isPrecedenceFilterSuppressed(){return(this.altAndOuterContextDepth&OE)!==0}set isPrecedenceFilterSuppressed(e){e?this.altAndOuterContextDepth|=OE:this.altAndOuterContextDepth&=~OE}equals(e){return this===e?!0:e instanceof _p?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.reachesIntoOuterContext===e.reachesIntoOuterContext&&this.context.equals(e.context)&&this.semanticContext.equals(e.semanticContext)&&this.isPrecedenceFilterSuppressed===e.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision===e.hasPassedThroughNonGreedyDecision&&SH.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,e.lexerActionExecutor):!1}hashCode(){let e=Ka.MurmurHash.initialize(7);return e=Ka.MurmurHash.update(e,this.state.stateNumber),e=Ka.MurmurHash.update(e,this.alt),e=Ka.MurmurHash.update(e,this.reachesIntoOuterContext?1:0),e=Ka.MurmurHash.update(e,this.context),e=Ka.MurmurHash.update(e,this.semanticContext),e=Ka.MurmurHash.update(e,this.hasPassedThroughNonGreedyDecision?1:0),e=Ka.MurmurHash.update(e,this.lexerActionExecutor),e=Ka.MurmurHash.finish(e,7),e}toDotString(){let e="";e+=`digraph G {
`,e+=`rankdir=LR;
`;let t=new vH.Array2DHashMap(iR.PredictionContext.IdentityEqualityComparator.INSTANCE),i=[];function s(n){let o=t.size,a=t.putIfAbsent(n,o);return a!=null?a:(i.push(n),o)}for(i.push(this.context),t.put(this.context,0);;){let n=i.pop();if(!n)break;for(let o=0;o<n.size;o++)e+="  s"+s(n),e+="->",e+="s"+s(n.getParent(o)),e+='[label="'+n.getReturnState(o)+`"];
`}return e+=`}
`,e.toString()}toString(e,t,i){i==null&&(i=t!=null),t==null&&(t=!0);let s="",n;i?n=this.context.toStrings(e,this.state.stateNumber):n=["?"];let o=!0;for(let a of n)o?o=!1:s+=", ",s+="(",s+=this.state,t&&(s+=",",s+=this.alt),this.context&&(s+=",",s+=a),this.semanticContext!==sc.SemanticContext.NONE&&(s+=",",s+=this.semanticContext),this.reachesIntoOuterContext&&(s+=",up="+this.outerContextDepth),s+=")";return s.toString()}};mi([Dr.NotNull],Kn.prototype,"_state",void 0);mi([Dr.NotNull],Kn.prototype,"_context",void 0);mi([Dr.NotNull],Kn.prototype,"state",null);mi([Dr.NotNull,Ms(0,Dr.NotNull)],Kn.prototype,"context",null);mi([Dr.NotNull],Kn.prototype,"semanticContext",null);mi([Dr.Override],Kn.prototype,"clone",null);mi([Ms(0,Dr.NotNull),Ms(2,Dr.NotNull)],Kn.prototype,"transformImpl",null);mi([Dr.Override],Kn.prototype,"equals",null);mi([Dr.Override],Kn.prototype,"hashCode",null);mi([Ms(0,Dr.NotNull),Ms(3,Dr.NotNull)],Kn,"create",null);Kn=mi([Ms(0,Dr.NotNull),Ms(2,Dr.NotNull)],Kn);wh.ATNConfig=Kn;let Jc=class extends Kn{constructor(e,t,i,s){typeof i=="number"?super(t,i,s):super(t,i,s),this._semanticContext=e}get semanticContext(){return this._semanticContext}};mi([Dr.NotNull],Jc.prototype,"_semanticContext",void 0);mi([Dr.Override],Jc.prototype,"semanticContext",null);Jc=mi([Ms(1,Dr.NotNull),Ms(2,Dr.NotNull)],Jc);let Kd=class extends Kn{constructor(e,t,i,s,n){if(typeof i=="number")super(t,i,s);else if(super(t,i,s),i.semanticContext!==sc.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=n}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};mi([Dr.Override],Kd.prototype,"lexerActionExecutor",null);mi([Dr.Override],Kd.prototype,"hasPassedThroughNonGreedyDecision",null);Kd=mi([Ms(1,Dr.NotNull),Ms(2,Dr.NotNull)],Kd);let Xd=class extends Jc{constructor(e,t,i,s,n,o){typeof s=="number"?super(t,i,s,n):super(t,i,s,n),this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=o}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};mi([Dr.Override],Xd.prototype,"lexerActionExecutor",null);mi([Dr.Override],Xd.prototype,"hasPassedThroughNonGreedyDecision",null);Xd=mi([Ms(1,Dr.NotNull),Ms(2,Dr.NotNull)],Xd);var Fo={};const wH=ZA(P9);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Fo,"__esModule",{value:!0});Fo.BitSet=void 0;const AH=wH,bH=ti,f_=new Uint16Array(0);function ys(r){return r>>>4}function ed(r){return r*16}function cw(r){let e=1;for(let t=0;t<16;t++){if((r&e)!==0)return t;e=e<<1>>>0}throw new RangeError("No specified bit found")}function sR(r){let e=32768;for(let t=15;t>=0;t--){if((r&e)!==0)return t;e=e>>>1}throw new RangeError("No specified bit found")}function $s(r,e){return r&=15,e&=15,r===e?1<<r>>>0:65535>>>15-e^65535>>>16-r}const hw=new Uint8Array(65536);for(let r=0;r<16;r++){const e=1<<r>>>0;let t=0;for(;t<hw.length;){t+=e;for(let i=0;i<e;i++)hw[t]++,t++}}class sd{constructor(e){if(!e)this.data=f_;else if(typeof e=="number"){if(e<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(ys(e-1)+1)}else if(e instanceof sd)this.data=e.data.slice(0);else{let t=-1;for(let i of e)t<i&&(t=i);this.data=new Uint16Array(ys(t-1)+1);for(let i of e)this.set(i)}}and(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length);let n=-1;for(let o=0;o<s;o++)(t[o]&=i[o])!==0&&(n=o);n===-1&&(this.data=f_),n<t.length-1&&(this.data=t.slice(0,n+1))}andNot(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length);let n=-1;for(let o=0;o<s;o++)(t[o]&=i[o]^65535)!==0&&(n=o);n===-1&&(this.data=f_),n<t.length-1&&(this.data=t.slice(0,n+1))}cardinality(){if(this.isEmpty)return 0;const e=this.data,t=e.length;let i=0;for(let s=0;s<t;s++)i+=hw[e[s]];return i}clear(e,t){e==null?this.data.fill(0):t==null?this.set(e,!1):this.set(e,t,!1)}flip(e,t){if(t==null&&(t=e),e<0||t<e)throw new RangeError;let i=ys(e);const s=ys(t);if(i===s)this.data[i]^=$s(e,t);else{for(this.data[i++]^=$s(e,15);i<s;)this.data[i++]^=65535;this.data[i++]^=$s(0,t)}}get(e,t){if(t===void 0)return!!(this.data[ys(e)]&$s(e,e));{let i=new sd(t+1);for(let s=e;s<=t;s++)i.set(s,this.get(s));return i}}intersects(e){let t=Math.min(this.length(),e.length());if(t===0)return!1;let i=ys(t-1);for(let s=0;s<=i;s++)if((this.data[s]&e.data[s])!==0)return!0;return!1}get isEmpty(){return this.length()===0}length(){return this.data.length?this.previousSetBit(ed(this.data.length)-1)+1:0}nextClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=ys(e);if(s>i)return-1;let n=65535^$s(e,15);if((t[s]|n)===65535){for(s++,n=0;s<i&&t[s]===65535;s++);if(s===i)return-1}return ed(s)+cw((t[s]|n)^65535)}nextSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=ys(e);if(s>i)return-1;let n=$s(e,15);if((t[s]&n)===0){for(s++,n=65535;s<i&&t[s]===0;s++);if(s>=i)return-1}return ed(s)+cw(t[s]&n)}or(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length),n=Math.max(t.length,i.length),o=t.length===n?t:new Uint16Array(n);let a=-1;for(let u=0;u<s;u++)(o[u]=t[u]|i[u])!==0&&(a=u);const l=t.length>i.length?t:i;for(let u=s;u<n;u++)(o[u]=l[u])!==0&&(a=u);a===-1?this.data=f_:o.length===a+1?this.data=o:this.data=o.slice(0,a)}previousClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=ys(e);s>=i&&(s=i-1);let n=65535^$s(0,e);if((t[s]|n)===65535){for(n=0,s--;s>=0&&t[s]===65535;s--);if(s<0)return-1}return ed(s)+sR((t[s]|n)^65535)}previousSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=ys(e);s>=i&&(s=i-1);let n=$s(0,e);if((t[s]&n)===0){for(s--,n=65535;s>=0&&t[s]===0;s--);if(s<0)return-1}return ed(s)+sR(t[s]&n)}set(e,t,i){if(t===void 0?(t=e,i=!0):typeof t=="boolean"&&(i=t,t=e),i===void 0&&(i=!0),e<0||e>t)throw new RangeError;let s=ys(e),n=ys(t);if(i&&n>=this.data.length){let o=new Uint16Array(n+1);this.data.forEach((a,l)=>o[l]=a),this.data=o}else if(!i){if(s>=this.data.length)return;n>=this.data.length&&(n=this.data.length-1,t=this.data.length*16-1)}if(s===n)this._setBits(s,i,$s(e,t));else{for(this._setBits(s++,i,$s(e,15));s<n;)this.data[s++]=i?65535:0;this._setBits(s,i,$s(0,t))}}_setBits(e,t,i){t?this.data[e]|=i:this.data[e]&=65535^i}get size(){return this.data.byteLength*8}hashCode(){return bH.MurmurHash.hashCode(this.data,22)}equals(e){if(e===this)return!0;if(!(e instanceof sd))return!1;const t=this.length();if(t!==e.length())return!1;if(t===0)return!0;let i=ys(t-1);for(let s=0;s<=i;s++)if(this.data[s]!==e.data[s])return!1;return!0}toString(){let e="{",t=!0;for(let i=this.nextSetBit(0);i>=0;i=this.nextSetBit(i+1))t?t=!1:e+=", ",e+=i;return e+="}",e}xor(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length),n=Math.max(t.length,i.length),o=t.length===n?t:new Uint16Array(n);let a=-1;for(let u=0;u<s;u++)(o[u]=t[u]^i[u])!==0&&(a=u);const l=t.length>i.length?t:i;for(let u=s;u<n;u++)(o[u]=l[u])!==0&&(a=u);a===-1?this.data=f_:o.length===a+1?this.data=o:this.data=o.slice(0,a+1)}clone(){return new sd(this)}[Symbol.iterator](){return new kH(this.data)}[AH.inspect.custom](){return"BitSet "+this.toString()}}Fo.BitSet=sd;class kH{constructor(e){this.data=e,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){const e=this.data[this.index]&this.mask;if(e!==0){const t=ed(this.index)+cw(e);return this.mask=$s(t+1,15),{done:!1,value:t}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}var oR;function og(){if(oR)return d_;oR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(R,D,C,I){var H=arguments.length,N=H<3?D:I===null?I=Object.getOwnPropertyDescriptor(D,C):I,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(R,D,C,I);else for(var O=R.length-1;O>=0;O--)(V=R[O])&&(N=(H<3?V(N):H>3?V(D,C,N):V(D,C))||N);return H>3&&N&&Object.defineProperty(D,C,N),N};Object.defineProperty(d_,"__esModule",{value:!0}),d_.ATNConfigSet=void 0;const e=xl,t=No,i=Eh,s=Oa(),n=wh,o=Fo,a=Ke,l=Gs,u=Io(),d=wb(),f=vh,g=Us,x=Ei;class E{hashCode(D){return D.state^D.alt}equals(D,C){return D.state===C.state&&D.alt===C.alt}}E.INSTANCE=new E;function P(R){return R?new e.Array2DHashMap(R):new e.Array2DHashMap(E.INSTANCE)}class b{constructor(D,C){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,D?(C?(this.mergedConfigs=void 0,this.unmerged=void 0):D.isReadOnly?(this.mergedConfigs=P(),this.unmerged=[]):(this.mergedConfigs=P(D.mergedConfigs),this.unmerged=D.unmerged.slice(0)),this.configs=D.configs.slice(0),this._dipsIntoOuterContext=D._dipsIntoOuterContext,this._hasSemanticContext=D._hasSemanticContext,this.outermostConfigSet=D.outermostConfigSet,(C||!D.isReadOnly)&&(this._uniqueAlt=D._uniqueAlt,this._conflictInfo=D._conflictInfo)):(this.mergedConfigs=P(),this.unmerged=[],this.configs=[],this._uniqueAlt=s.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts.clone();let D=new o.BitSet;for(let C of this)D.set(C.alt);return D}get isReadOnly(){return this.mergedConfigs==null}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(D){if(this.outermostConfigSet&&!D)throw new Error("IllegalStateException");g(!D||!this._dipsIntoOuterContext),this.outermostConfigSet=D}getStates(){let D=new t.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE);for(let C of this.configs)D.add(C.state);return D}optimizeConfigs(D){if(this.configs.length!==0)for(let C of this.configs)C.context=D.atn.getCachedContext(C.context)}clone(D){let C=new b(this,D);return!D&&this.isReadOnly&&C.addAll(this.configs),C}get size(){return this.configs.length}get isEmpty(){return this.configs.length===0}contains(D){if(!(D instanceof n.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let C=D,I=this.getKey(C),H=this.mergedConfigs.get(I);if(H!=null&&this.canMerge(C,I,H))return H.contains(C);for(let N of this.unmerged)if(N.contains(D))return!0}else for(let C of this.configs)if(C.contains(D))return!0;return!1}*[Symbol.iterator](){yield*this.configs}toArray(){return this.configs}add(D,C){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");g(!this.outermostConfigSet||!D.reachesIntoOuterContext),C==null&&(C=d.PredictionContextCache.UNCACHED);let I,H=this.getKey(D),N=this.mergedConfigs.get(H);if(I=N==null,N!=null&&this.canMerge(D,H,N)){N.outerContextDepth=Math.max(N.outerContextDepth,D.outerContextDepth),D.isPrecedenceFilterSuppressed&&(N.isPrecedenceFilterSuppressed=!0);let V=u.PredictionContext.join(N.context,D.context,C);return this.updatePropertiesForMergedConfig(D),N.context===V?!1:(N.context=V,!0)}for(let V=0;V<this.unmerged.length;V++){let O=this.unmerged[V];if(this.canMerge(D,H,O)){O.outerContextDepth=Math.max(O.outerContextDepth,D.outerContextDepth),D.isPrecedenceFilterSuppressed&&(O.isPrecedenceFilterSuppressed=!0);let W=u.PredictionContext.join(O.context,D.context,C);return this.updatePropertiesForMergedConfig(D),O.context===W?!1:(O.context=W,I&&(this.mergedConfigs.put(H,O),this.unmerged.splice(V,1)),!0)}}return this.configs.push(D),I?this.mergedConfigs.put(H,D):this.unmerged.push(D),this.updatePropertiesForAddedConfig(D),!0}updatePropertiesForMergedConfig(D){this._dipsIntoOuterContext=this._dipsIntoOuterContext||D.reachesIntoOuterContext,g(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(D){this.configs.length===1?this._uniqueAlt=D.alt:this._uniqueAlt!==D.alt&&(this._uniqueAlt=s.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!f.SemanticContext.NONE.equals(D.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||D.reachesIntoOuterContext,g(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(D,C,I){return D.state.stateNumber!==I.state.stateNumber||C.alt!==I.alt?!1:D.semanticContext.equals(I.semanticContext)}getKey(D){return{state:D.state.stateNumber,alt:D.alt}}containsAll(D){for(let C of D)if(!(C instanceof n.ATNConfig)||!this.contains(C))return!1;return!0}addAll(D,C){this.ensureWritable();let I=!1;for(let H of D)this.add(H,C)&&(I=!0);return I}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=s.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(D){return this===D?!0:D instanceof b?this.outermostConfigSet===D.outermostConfigSet&&x.equals(this._conflictInfo,D._conflictInfo)&&i.ArrayEqualityComparator.INSTANCE.equals(this.configs,D.configs):!1}hashCode(){if(this.isReadOnly&&this.cachedHashCode!==-1)return this.cachedHashCode;let D=1;return D=5*D^(this.outermostConfigSet?1:0),D=5*D^i.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=D),D}toString(D){D==null&&(D=!1);let C="",I=this.configs.slice(0);I.sort((H,N)=>H.alt!==N.alt?H.alt-N.alt:H.state.stateNumber!==N.state.stateNumber?H.state.stateNumber-N.state.stateNumber:H.semanticContext.toString().localeCompare(N.semanticContext.toString())),C+="[";for(let H=0;H<I.length;H++)H>0&&(C+=", "),C+=I[H].toString(void 0,!0,D);return C+="]",this._hasSemanticContext&&(C+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==s.ATN.INVALID_ALT_NUMBER&&(C+=",uniqueAlt="+this._uniqueAlt),this._conflictInfo!=null&&(C+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(C+="*")),this._dipsIntoOuterContext&&(C+=",dipsIntoOuterContext"),C.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(D){this.ensureWritable(),this._hasSemanticContext=D}get conflictInfo(){return this._conflictInfo}set conflictInfo(D){this.ensureWritable(),this._conflictInfo=D}get conflictingAlts(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts}get isExactConflict(){return this._conflictInfo==null?!1:this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(D){return this.configs[D]}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}}return r([a.NotNull],b.prototype,"getRepresentedAlternatives",null),r([a.Override],b.prototype,"size",null),r([a.Override],b.prototype,"isEmpty",null),r([a.Override],b.prototype,"contains",null),r([a.Override],b.prototype,Symbol.iterator,null),r([a.Override],b.prototype,"toArray",null),r([a.Override],b.prototype,"containsAll",null),r([a.Override],b.prototype,"clear",null),r([a.Override],b.prototype,"equals",null),r([a.Override],b.prototype,"hashCode",null),d_.ATNConfigSet=b,d_}var __={},NE={},IE={},aR;function S1(){return aR||(aR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(d,f,g,x){var E=arguments.length,P=E<3?f:x===null?x=Object.getOwnPropertyDescriptor(f,g):x,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(d,f,g,x);else for(var R=d.length-1;R>=0;R--)(b=d[R])&&(P=(E<3?b(P):E>3?b(f,g,P):b(f,g))||P);return E>3&&P&&Object.defineProperty(f,g,P),P},t=$&&$.__param||function(d,f){return function(g,x){f(g,x,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DFAState=void 0;const i=Oa(),s=Fo,n=ti,o=Ke,a=Io(),l=Us;class u{constructor(f){this.stateNumber=-1,this.configs=f,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(f){return this.isContextSensitive?this.contextSymbols.get(f):!1}setContextSymbol(f){l(this.isContextSensitive),this.contextSymbols.set(f)}setContextSensitive(f){l(!this.configs.isOutermostConfigSet),!this.isContextSensitive&&(this.contextSymbols||(this.contextSymbols=new s.BitSet))}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(f){this._acceptStateInfo=f}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:i.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(!!this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(f){return this.edges.get(f)}setTarget(f,g){this.edges.set(f,g)}getEdgeMap(){return this.edges}getContextTarget(f){return f===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(f=-1),this.contextEdges.get(f)}setContextTarget(f,g){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");f===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(f=-1),this.contextEdges.set(f,g)}getContextEdgeMap(){let f=new Map(this.contextEdges),g=f.get(-1);if(g!==void 0)if(f.size===1){let x=new Map;return x.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,g),x}else f.delete(-1),f.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,g);return f}hashCode(){let f=n.MurmurHash.initialize(7);return f=n.MurmurHash.update(f,this.configs.hashCode()),f=n.MurmurHash.finish(f,1),f}equals(f){if(this===f)return!0;if(!(f instanceof u))return!1;let g=f;return this.configs.equals(g.configs)}toString(){let f="";return f+=this.stateNumber+":"+this.configs,this.isAcceptState&&(f+="=>",this.predicates?f+=this.predicates:f+=this.prediction),f.toString()}}e([o.NotNull],u.prototype,"configs",void 0),e([o.NotNull],u.prototype,"edges",void 0),e([o.NotNull],u.prototype,"contextEdges",void 0),e([o.Override],u.prototype,"hashCode",null),e([o.Override],u.prototype,"equals",null),e([o.Override],u.prototype,"toString",null),r.DFAState=u,function(d){let f=class{constructor(x,E){this.alt=E,this.pred=x}toString(){return"("+this.pred+", "+this.alt+")"}};e([o.NotNull],f.prototype,"pred",void 0),e([o.Override],f.prototype,"toString",null),f=e([t(0,o.NotNull)],f),d.PredPrediction=f}(u=r.DFAState||(r.DFAState={}))}(IE)),IE}var lR;function w1(){return lR||(lR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(l,u,d,f){var g=arguments.length,x=g<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,d):f,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,u,d,f);else for(var P=l.length-1;P>=0;P--)(E=l[P])&&(x=(g<3?E(x):g>3?E(u,d,x):E(u,d))||x);return g>3&&x&&Object.defineProperty(u,d,x),x},t=$&&$.__param||function(l,u){return function(d,f){u(d,f,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNSimulator=void 0;const i=og(),s=S1(),n=Ke,o=Io();let a=class pp{constructor(u){this.atn=u}static get ERROR(){return pp._ERROR||(pp._ERROR=new s.DFAState(new i.ATNConfigSet),pp._ERROR.stateNumber=o.PredictionContext.EMPTY_FULL_STATE_KEY),pp._ERROR}clearDFA(){this.atn.clearDFA()}};e([n.NotNull],a.prototype,"atn",void 0),e([n.NotNull],a,"ERROR",null),a=e([t(0,n.NotNull)],a),r.ATNSimulator=a,function(l){}(a=r.ATNSimulator||(r.ATNSimulator={})),r.ATNSimulator=a}(NE)),NE}var Nu={},ag={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(ag,"__esModule",{value:!0});ag.ConsoleErrorListener=void 0;class dw{syntaxError(e,t,i,s,n,o){console.error(`line ${i}:${s} ${n}`)}}ag.ConsoleErrorListener=dw;dw.INSTANCE=new dw;var Tf={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var TH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},uR=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.ProxyErrorListener=void 0;const FE=Ke;class U3{constructor(e){if(this.delegates=e,!e)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(e,t,i,s,n,o){this.delegates.forEach(a=>{a.syntaxError&&a.syntaxError(e,t,i,s,n,o)})}}TH([FE.Override,uR(0,FE.NotNull),uR(4,FE.NotNull)],U3.prototype,"syntaxError",null);Tf.ProxyErrorListener=U3;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ca=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},A1=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.Recognizer=void 0;const PH=ag,RH=Tf,Bs=Ke,cR=dr,DH=Ei;class Ai{constructor(){this._listeners=[PH.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let e=this.vocabulary,t=Ai.tokenTypeMapCache.get(e);if(t==null){let i=new Map;for(let s=0;s<=this.atn.maxTokenType;s++){let n=e.getLiteralName(s);n!=null&&i.set(n,s);let o=e.getSymbolicName(s);o!=null&&i.set(o,s)}i.set("EOF",cR.Token.EOF),t=i,Ai.tokenTypeMapCache.set(e,t)}return t}getRuleIndexMap(){let e=this.ruleNames;if(e==null)throw new Error("The current recognizer does not provide a list of rule names.");let t=Ai.ruleIndexMapCache.get(e);return t==null&&(t=DH.toMap(e),Ai.ruleIndexMapCache.set(e,t)),t}getTokenType(e){let t=this.getTokenTypeMap().get(e);return t!=null?t:cR.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}set interpreter(e){this._interp=e}get parseInfo(){return Promise.resolve(void 0)}getErrorHeader(e){let t=e.getOffendingToken();if(!t)return"";let i=t.line,s=t.charPositionInLine;return"line "+i+":"+s}addErrorListener(e){if(!e)throw new TypeError("listener must not be null");this._listeners.push(e)}removeErrorListener(e){let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new RH.ProxyErrorListener(this.getErrorListeners())}sempred(e,t,i){return!0}precpred(e,t){return!0}action(e,t,i){}get state(){return this._stateNumber}set state(e){this._stateNumber=e}}Ai.EOF=-1;Ai.tokenTypeMapCache=new WeakMap;Ai.ruleIndexMapCache=new WeakMap;Ca([Bs.SuppressWarnings("serial"),Bs.NotNull],Ai.prototype,"_listeners",void 0);Ca([Bs.NotNull],Ai.prototype,"getTokenTypeMap",null);Ca([Bs.NotNull],Ai.prototype,"getRuleIndexMap",null);Ca([Bs.NotNull],Ai.prototype,"serializedATN",null);Ca([Bs.NotNull],Ai.prototype,"atn",null);Ca([Bs.NotNull,A1(0,Bs.NotNull)],Ai.prototype,"interpreter",null);Ca([Bs.NotNull,A1(0,Bs.NotNull)],Ai.prototype,"getErrorHeader",null);Ca([A1(0,Bs.NotNull)],Ai.prototype,"addErrorListener",null);Ca([A1(0,Bs.NotNull)],Ai.prototype,"removeErrorListener",null);Ca([Bs.NotNull],Ai.prototype,"getErrorListeners",null);Nu.Recognizer=Ai;var yl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Iu=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(yl,"__esModule",{value:!0});var Ab=yl.VocabularyImpl=void 0;const cl=Ke,CH=dr;class Do{constructor(e,t,i){this.literalNames=e,this.symbolicNames=t,this.displayNames=i,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(e){if(e>=0&&e<this.literalNames.length)return this.literalNames[e]}getSymbolicName(e){if(e>=0&&e<this.symbolicNames.length)return this.symbolicNames[e];if(e===CH.Token.EOF)return"EOF"}getDisplayName(e){if(e>=0&&e<this.displayNames.length){let s=this.displayNames[e];if(s)return s}let t=this.getLiteralName(e);if(t)return t;let i=this.getSymbolicName(e);return i||String(e)}}Do.EMPTY_VOCABULARY=new Do([],[],[]);Iu([cl.NotNull],Do.prototype,"literalNames",void 0);Iu([cl.NotNull],Do.prototype,"symbolicNames",void 0);Iu([cl.NotNull],Do.prototype,"displayNames",void 0);Iu([cl.Override],Do.prototype,"maxTokenType",null);Iu([cl.Override],Do.prototype,"getLiteralName",null);Iu([cl.Override],Do.prototype,"getSymbolicName",null);Iu([cl.Override,cl.NotNull],Do.prototype,"getDisplayName",null);Iu([cl.NotNull],Do,"EMPTY_VOCABULARY",void 0);Ab=yl.VocabularyImpl=Do;var hR;function G3(){if(hR)return __;hR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(a,l,u,d){var f=arguments.length,g=f<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,u):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(a,l,u,d);else for(var E=a.length-1;E>=0;E--)(x=a[E])&&(g=(f<3?x(g):f>3?x(l,u,g):x(l,u))||g);return f>3&&g&&Object.defineProperty(l,u,g),g};Object.defineProperty(__,"__esModule",{value:!0}),__.DFASerializer=void 0;const e=w1(),t=Ke,i=Io(),s=Nu,n=yl;class o{constructor(l,u,d,f){u instanceof s.Recognizer?(d=u.ruleNames,f=u.atn,u=u.vocabulary):u||(u=n.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=l,this.vocabulary=u,this.ruleNames=d,this.atn=f}toString(){if(!this.dfa.s0)return"";let l="";if(this.dfa.states){let d=new Array(...this.dfa.states.toArray());d.sort((f,g)=>f.stateNumber-g.stateNumber);for(let f of d){let g=f.getEdgeMap(),x=[...g.keys()].sort((b,R)=>b-R),E=f.getContextEdgeMap(),P=[...E.keys()].sort((b,R)=>b-R);for(let b of x){let R=g.get(b);if((R==null||R===e.ATNSimulator.ERROR)&&!f.isContextSymbol(b))continue;let D=!1;l+=this.getStateString(f)+"-"+this.getEdgeLabel(b)+"->",f.isContextSymbol(b)&&(l+="!",D=!0);let C=R;C&&C.stateNumber!==e.ATNSimulator.ERROR.stateNumber?l+=this.getStateString(C)+`
`:D&&(l+=`ctx
`)}if(f.isContextSensitive)for(let b of P)l+=this.getStateString(f)+"-"+this.getContextLabel(b)+"->"+this.getStateString(E.get(b))+`
`}}let u=l;return u.length===0?"":u}getContextLabel(l){if(l===i.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(l===i.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&l>0&&l<=this.atn.states.length){let d=this.atn.states[l].ruleIndex;if(this.ruleNames&&d>=0&&d<this.ruleNames.length)return"ctx:"+String(l)+"("+this.ruleNames[d]+")"}return"ctx:"+String(l)}getEdgeLabel(l){return this.vocabulary.getDisplayName(l)}getStateString(l){if(l===e.ATNSimulator.ERROR)return"ERROR";let u=l.stateNumber,d="s"+u;if(l.isAcceptState&&(l.predicates?d=":s"+u+"=>"+l.predicates:d=":s"+u+"=>"+l.prediction),l.isContextSensitive){d+="*";for(let f of l.configs)if(f.reachesIntoOuterContext){d+="*";break}}return d}}return r([t.NotNull],o.prototype,"dfa",void 0),r([t.NotNull],o.prototype,"vocabulary",void 0),r([t.Override],o.prototype,"toString",null),__.DFASerializer=o,__}var p_={},dR;function OH(){if(dR)return p_;dR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},e=$&&$.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(p_,"__esModule",{value:!0}),p_.LexerDFASerializer=void 0;const t=G3(),i=Ke,s=yl;let n=class extends t.DFASerializer{constructor(a){super(a,s.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(a){return"'"+String.fromCodePoint(a)+"'"}};return r([i.Override,i.NotNull],n.prototype,"getEdgeLabel",null),n=r([e(0,i.NotNull)],n),p_.LexerDFASerializer=n,p_}var Pf={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var NH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.StarLoopEntryState=void 0;const IH=zi,FH=Fo,MH=Da,BH=Ke;class H3 extends MH.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new FH.BitSet}get stateType(){return IH.ATNStateType.STAR_LOOP_ENTRY}}NH([BH.Override],H3.prototype,"stateType",null);Pf.StarLoopEntryState=H3;var fR;function z3(){if(fR)return h_;fR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(g,x,E,P){var b=arguments.length,R=b<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,E):P,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(g,x,E,P);else for(var C=g.length-1;C>=0;C--)(D=g[C])&&(R=(b<3?D(R):b>3?D(x,E,R):D(x,E))||R);return b>3&&R&&Object.defineProperty(x,E,R),R},e=$&&$.__param||function(g,x){return function(E,P){x(E,P,g)}};Object.defineProperty(h_,"__esModule",{value:!0}),h_.DFA=void 0;const t=No,i=og(),s=G3(),n=S1(),o=OH(),a=Ke,l=Gs,u=Pf,d=yl;let f=class{constructor(x,E=0){if(this.states=new t.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!x.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=x,this.atn=x.atn,this.decision=E;let P=!1;x instanceof u.StarLoopEntryState&&x.precedenceRuleDecision&&(P=!0,this.s0=new n.DFAState(new i.ATNConfigSet),this.s0full=new n.DFAState(new i.ATNConfigSet)),this.precedenceDfa=P}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(x,E){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return E?this.s0full.getTarget(x):this.s0.getTarget(x)}setPrecedenceStartState(x,E,P){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");x<0||(E?this.s0full.setTarget(x,P):this.s0.setTarget(x,P))}get isEmpty(){return this.isPrecedenceDfa?this.s0.getEdgeMap().size===0&&this.s0full.getEdgeMap().size===0:this.s0==null&&this.s0full==null}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:this.s0full!=null}addState(x){return x.stateNumber=this.nextStateNumber++,this.states.getOrAdd(x)}toString(x,E){if(x||(x=d.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let P;return E?P=new s.DFASerializer(this,x,E,this.atnStartState.atn):P=new s.DFASerializer(this,x),P.toString()}toLexerString(){return this.s0?new o.LexerDFASerializer(this).toString():""}};return r([a.NotNull],f.prototype,"states",void 0),r([a.NotNull],f.prototype,"atnStartState",void 0),r([a.NotNull],f.prototype,"atn",void 0),f=r([e(0,a.NotNull)],f),h_.DFA=f,h_}var lg={},ug={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var LH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(ug,"__esModule",{value:!0});ug.BasicState=void 0;const UH=Pa,GH=zi,HH=Ke;class j3 extends UH.ATNState{get stateType(){return GH.ATNStateType.BASIC}}LH([HH.Override],j3.prototype,"stateType",null);ug.BasicState=j3;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var zH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(lg,"__esModule",{value:!0});lg.InvalidState=void 0;const jH=zi,VH=ug,WH=Ke;class V3 extends VH.BasicState{get stateType(){return jH.ATNStateType.INVALID_TYPE}}zH([WH.Override],V3.prototype,"stateType",null);lg.InvalidState=V3;var g_={},m_={},x_={},_R;function bb(){if(_R)return x_;_R=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(a,l,u,d){var f=arguments.length,g=f<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,u):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(a,l,u,d);else for(var E=a.length-1;E>=0;E--)(x=a[E])&&(g=(f<3?x(g):f>3?x(l,u,g):x(l,u))||g);return f>3&&g&&Object.defineProperty(l,u,g),g},e=$&&$.__param||function(a,l){return function(u,d){l(u,d,a)}};Object.defineProperty(x_,"__esModule",{value:!0}),x_.SetTransition=void 0;const t=Ph(),i=Ke,s=dr,n=Oo;let o=class extends n.Transition{constructor(l,u){super(l),u==null&&(u=t.IntervalSet.of(s.Token.INVALID_TYPE)),this.set=u}get serializationType(){return 7}get label(){return this.set}matches(l,u,d){return this.set.contains(l)}toString(){return this.set.toString()}};return r([i.NotNull],o.prototype,"set",void 0),r([i.Override],o.prototype,"serializationType",null),r([i.Override,i.NotNull],o.prototype,"label",null),r([i.Override],o.prototype,"matches",null),r([i.Override,i.NotNull],o.prototype,"toString",null),o=r([e(0,i.NotNull),e(1,i.Nullable)],o),x_.SetTransition=o,x_}var pR;function kb(){if(pR)return m_;pR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(m_,"__esModule",{value:!0}),m_.NotSetTransition=void 0;const t=Ke,i=bb();let s=class extends i.SetTransition{constructor(o,a){super(o,a)}get serializationType(){return 8}matches(o,a,l){return o>=a&&o<=l&&!super.matches(o,a,l)}toString(){return"~"+super.toString()}};return r([t.Override],s.prototype,"serializationType",null),r([t.Override],s.prototype,"matches",null),r([t.Override],s.prototype,"toString",null),s=r([e(0,t.NotNull),e(1,t.Nullable)],s),m_.NotSetTransition=s,m_}var Fu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var W3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.RuleStopState=void 0;const $H=Pa,KH=zi,$3=Ke;class Tb extends $H.ATNState{get nonStopStateNumber(){return-1}get stateType(){return KH.ATNStateType.RULE_STOP}}W3([$3.Override],Tb.prototype,"nonStopStateNumber",null);W3([$3.Override],Tb.prototype,"stateType",null);Fu.RuleStopState=Tb;var Rf={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var cg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},gR=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.RuleTransition=void 0;const Yd=Ke,XH=Oo;let Zc=class extends XH.Transition{constructor(e,t,i,s){super(e),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=t,this.precedence=i,this.followState=s}get serializationType(){return 3}get isEpsilon(){return!0}matches(e,t,i){return!1}};cg([Yd.NotNull],Zc.prototype,"followState",void 0);cg([Yd.Override],Zc.prototype,"serializationType",null);cg([Yd.Override],Zc.prototype,"isEpsilon",null);cg([Yd.Override],Zc.prototype,"matches",null);Zc=cg([gR(0,Yd.NotNull),gR(3,Yd.NotNull)],Zc);Rf.RuleTransition=Zc;var hg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var b1=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},YH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(hg,"__esModule",{value:!0});hg.WildcardTransition=void 0;const w0=Ke,qH=Oo;let qd=class extends qH.Transition{constructor(e){super(e)}get serializationType(){return 9}matches(e,t,i){return e>=t&&e<=i}toString(){return"."}};b1([w0.Override],qd.prototype,"serializationType",null);b1([w0.Override],qd.prototype,"matches",null);b1([w0.Override,w0.NotNull],qd.prototype,"toString",null);qd=b1([YH(0,w0.NotNull)],qd);hg.WildcardTransition=qd;var mR;function QH(){if(mR)return g_;mR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(b,R,D,C){var I=arguments.length,H=I<3?R:C===null?C=Object.getOwnPropertyDescriptor(R,D):C,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(b,R,D,C);else for(var V=b.length-1;V>=0;V--)(N=b[V])&&(H=(I<3?N(H):I>3?N(R,D,H):N(R,D))||H);return I>3&&H&&Object.defineProperty(R,D,H),H},e=$&&$.__param||function(b,R){return function(D,C){R(D,C,b)}};Object.defineProperty(g_,"__esModule",{value:!0}),g_.LL1Analyzer=void 0;const t=bf,i=No,s=wh,n=Fo,o=Ph(),a=Ke,l=kb(),u=Gs,d=Io(),f=Fu,g=Rf,x=dr,E=hg;let P=class fw{constructor(R){this.atn=R}getDecisionLookahead(R){if(R==null)return;let D=new Array(R.numberOfTransitions);for(let C=0;C<R.numberOfTransitions;C++){let I=new o.IntervalSet;D[C]=I;let H=new i.Array2DHashSet(u.ObjectEqualityComparator.INSTANCE),N=!1;this._LOOK(R.transition(C).target,void 0,d.PredictionContext.EMPTY_LOCAL,I,H,new n.BitSet,N,!1),(I.size===0||I.contains(fw.HIT_PRED))&&(I=void 0,D[C]=I)}return D}LOOK(R,D,C){if(C===void 0){if(R.atn==null)throw new Error("Illegal state");C=R.atn.ruleToStopState[R.ruleIndex]}else C===null&&(C=void 0);let I=new o.IntervalSet,H=!0,N=!0;return this._LOOK(R,C,D,I,new i.Array2DHashSet,new n.BitSet,H,N),I}_LOOK(R,D,C,I,H,N,V,O){let W=s.ATNConfig.create(R,0,C);if(!H.add(W))return;if(R===D){if(d.PredictionContext.isEmptyLocal(C)){I.add(x.Token.EPSILON);return}else if(C.isEmpty){O&&I.add(x.Token.EOF);return}}if(R instanceof f.RuleStopState){if(C.isEmpty&&!d.PredictionContext.isEmptyLocal(C)){O&&I.add(x.Token.EOF);return}let re=N.get(R.ruleIndex);try{N.clear(R.ruleIndex);for(let fe=0;fe<C.size;fe++){if(C.getReturnState(fe)===d.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let he=this.atn.states[C.getReturnState(fe)];this._LOOK(he,D,C.getParent(fe),I,H,N,V,O)}}finally{re&&N.set(R.ruleIndex)}}let q=R.numberOfTransitions;for(let re=0;re<q;re++){let fe=R.transition(re);if(fe instanceof g.RuleTransition){if(N.get(fe.ruleIndex))continue;let he=C.getChild(fe.followState.stateNumber);try{N.set(fe.ruleIndex),this._LOOK(fe.target,D,he,I,H,N,V,O)}finally{N.clear(fe.ruleIndex)}}else if(fe instanceof t.AbstractPredicateTransition)V?this._LOOK(fe.target,D,C,I,H,N,V,O):I.add(fw.HIT_PRED);else if(fe.isEpsilon)this._LOOK(fe.target,D,C,I,H,N,V,O);else if(fe instanceof E.WildcardTransition)I.addAll(o.IntervalSet.of(x.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let he=fe.label;he!=null&&(fe instanceof l.NotSetTransition&&(he=he.complement(o.IntervalSet.of(x.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),I.addAll(he))}}}};return P.HIT_PRED=x.Token.INVALID_TYPE,r([a.NotNull],P.prototype,"atn",void 0),r([a.NotNull,e(0,a.NotNull),e(1,a.NotNull)],P.prototype,"LOOK",null),r([e(0,a.NotNull),e(2,a.NotNull),e(3,a.NotNull),e(4,a.NotNull),e(5,a.NotNull)],P.prototype,"_LOOK",null),P=r([e(0,a.NotNull)],P),g_.LL1Analyzer=P,g_}var xR;function Oa(){return xR||(xR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(E,P,b,R){var D=arguments.length,C=D<3?P:R===null?R=Object.getOwnPropertyDescriptor(P,b):R,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(E,P,b,R);else for(var H=E.length-1;H>=0;H--)(I=E[H])&&(C=(D<3?I(C):D>3?I(P,b,C):I(P,b))||C);return D>3&&C&&Object.defineProperty(P,b,C),C},t=$&&$.__param||function(E,P){return function(b,R){P(b,R,E)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATN=void 0;const i=xl,s=z3(),n=Ph(),o=lg,a=QH(),l=Ke,u=Gs,d=Io(),f=dr,g=Us;let x=class{constructor(P,b){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new i.Array2DHashMap(u.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=P,this.maxTokenType=b}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let P=0;P<this.decisionToDFA.length;P++)this.decisionToDFA[P]=new s.DFA(this.decisionToState[P],P);this.modeToDFA=new Array(this.modeToStartState.length);for(let P=0;P<this.modeToDFA.length;P++)this.modeToDFA[P]=new s.DFA(this.modeToStartState[P]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(P){return d.PredictionContext.getCachedContext(P,this.contextCache,new d.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return g(this.decisionToDFA!=null&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(P,b){return b?new a.LL1Analyzer(this).LOOK(P,b):(P.nextTokenWithinRule||(P.nextTokenWithinRule=this.nextTokens(P,d.PredictionContext.EMPTY_LOCAL),P.nextTokenWithinRule.setReadonly(!0)),P.nextTokenWithinRule)}addState(P){P.atn=this,P.stateNumber=this.states.length,this.states.push(P)}removeState(P){let b=new o.InvalidState;b.atn=this,b.stateNumber=P.stateNumber,this.states[P.stateNumber]=b}defineMode(P,b){this.modeNameToStartState.set(P,b),this.modeToStartState.push(b),this.modeToDFA.push(new s.DFA(b)),this.defineDecisionState(b)}defineDecisionState(P){return this.decisionToState.push(P),P.decision=this.decisionToState.length-1,this.decisionToDFA.push(new s.DFA(P,P.decision)),P.decision}getDecisionState(P){if(this.decisionToState.length>0)return this.decisionToState[P]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(P,b){if(P<0||P>=this.states.length)throw new RangeError("Invalid state number.");let R=b,D=this.states[P],C=this.nextTokens(D);if(!C.contains(f.Token.EPSILON))return C;let I=new n.IntervalSet;for(I.addAll(C),I.remove(f.Token.EPSILON);R!=null&&R.invokingState>=0&&C.contains(f.Token.EPSILON);){let N=this.states[R.invokingState].transition(0);C=this.nextTokens(N.followState),I.addAll(C),I.remove(f.Token.EPSILON),R=R._parent}return C.contains(f.Token.EPSILON)&&I.add(f.Token.EOF),I}};e([l.NotNull],x.prototype,"states",void 0),e([l.NotNull],x.prototype,"decisionToState",void 0),e([l.NotNull],x.prototype,"modeNameToStartState",void 0),e([l.NotNull],x.prototype,"modeToStartState",void 0),e([l.NotNull],x.prototype,"decisionToDFA",void 0),e([l.NotNull],x.prototype,"modeToDFA",void 0),e([l.NotNull],x.prototype,"nextTokens",null),e([t(0,l.NotNull)],x.prototype,"removeState",null),e([t(0,l.NotNull),t(1,l.NotNull)],x.prototype,"defineMode",null),e([t(0,l.NotNull)],x.prototype,"defineDecisionState",null),e([l.NotNull],x.prototype,"getExpectedTokens",null),x=e([t(0,l.NotNull)],x),r.ATN=x,function(E){E.INVALID_ALT_NUMBER=0}(x=r.ATN||(r.ATN={})),r.ATN=x}(RE)),RE}var k1={},T1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ah=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},JH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(T1,"__esModule",{value:!0});T1.LexerIndexedCustomAction=void 0;const fm=ti,bh=Ke;let hl=class K3{constructor(e,t){this._offset=e,this._action=t}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(e){this._action.execute(e)}hashCode(){let e=fm.MurmurHash.initialize();return e=fm.MurmurHash.update(e,this._offset),e=fm.MurmurHash.update(e,this._action),fm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof K3?this._offset===e._offset&&this._action.equals(e._action):!1}};Ah([bh.NotNull],hl.prototype,"action",null);Ah([bh.Override],hl.prototype,"actionType",null);Ah([bh.Override],hl.prototype,"isPositionDependent",null);Ah([bh.Override],hl.prototype,"execute",null);Ah([bh.Override],hl.prototype,"hashCode",null);Ah([bh.Override],hl.prototype,"equals",null);hl=Ah([JH(1,bh.NotNull)],hl);T1.LexerIndexedCustomAction=hl;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var kh=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Pb=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(k1,"__esModule",{value:!0});k1.LexerActionExecutor=void 0;const ZH=Eh,ME=T1,BE=ti,bu=Ke;let dl=class gp{constructor(e){this._lexerActions=e;let t=BE.MurmurHash.initialize();for(let i of e)t=BE.MurmurHash.update(t,i);this.cachedHashCode=BE.MurmurHash.finish(t,e.length)}static append(e,t){if(!e)return new gp([t]);let i=e._lexerActions.slice(0);return i.push(t),new gp(i)}fixOffsetBeforeMatch(e){let t;for(let i=0;i<this._lexerActions.length;i++)this._lexerActions[i].isPositionDependent&&!(this._lexerActions[i]instanceof ME.LexerIndexedCustomAction)&&(t||(t=this._lexerActions.slice(0)),t[i]=new ME.LexerIndexedCustomAction(e,this._lexerActions[i]));return t?new gp(t):this}get lexerActions(){return this._lexerActions}execute(e,t,i){let s=!1,n=t.index;try{for(let o of this._lexerActions){if(o instanceof ME.LexerIndexedCustomAction){let a=o.offset;t.seek(i+a),o=o.action,s=i+a!==n}else o.isPositionDependent&&(t.seek(n),s=!1);o.execute(e)}}finally{s&&t.seek(n)}}hashCode(){return this.cachedHashCode}equals(e){return e===this?!0:e instanceof gp?this.cachedHashCode===e.cachedHashCode&&ZH.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,e._lexerActions):!1}};kh([bu.NotNull],dl.prototype,"_lexerActions",void 0);kh([bu.NotNull],dl.prototype,"lexerActions",null);kh([Pb(0,bu.NotNull)],dl.prototype,"execute",null);kh([bu.Override],dl.prototype,"hashCode",null);kh([bu.Override],dl.prototype,"equals",null);kh([bu.NotNull,Pb(1,bu.NotNull)],dl,"append",null);dl=kh([Pb(0,bu.NotNull)],dl);k1.LexerActionExecutor=dl;var Th={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Rb=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},ez=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Th,"__esModule",{value:!0});Th.LexerNoViableAltException=void 0;const tz=Ra,Db=Ke,rz=ln,iz=Ei;let A0=class extends tz.RecognitionException{constructor(e,t,i,s){super(e,t),this._startIndex=i,this._deadEndConfigs=s}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let e="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(e=this.inputStream.getText(rz.Interval.of(this._startIndex,this._startIndex)),e=iz.escapeWhitespace(e,!1)),`LexerNoViableAltException('${e}')`}};Rb([Db.Override],A0.prototype,"inputStream",null);Rb([Db.Override],A0.prototype,"toString",null);A0=Rb([ez(1,Db.NotNull)],A0);Th.LexerNoViableAltException=A0;var y_={},yR;function nz(){if(yR)return y_;yR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,u=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(u=(l<3?d(u):l>3?d(n,o,u):d(n,o))||u);return l>3&&u&&Object.defineProperty(n,o,u),u};Object.defineProperty(y_,"__esModule",{value:!0}),y_.OrderedATNConfigSet=void 0;const e=og(),t=Ke;class i extends e.ATNConfigSet{constructor(n,o){n!=null&&o!=null?super(n,o):super()}clone(n){let o=new i(this,n);return!n&&this.isReadOnly&&o.addAll(this),o}getKey(n){return{state:0,alt:n.hashCode()}}canMerge(n,o,a){return n.equals(a)}}return r([t.Override],i.prototype,"clone",null),r([t.Override],i.prototype,"getKey",null),r([t.Override],i.prototype,"canMerge",null),y_.OrderedATNConfigSet=i,y_}var vR;function P1(){return vR||(vR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(H,N,V,O){var W=arguments.length,q=W<3?N:O===null?O=Object.getOwnPropertyDescriptor(N,V):O,re;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(H,N,V,O);else for(var fe=H.length-1;fe>=0;fe--)(re=H[fe])&&(q=(W<3?re(q):W>3?re(N,V,q):re(N,V))||q);return W>3&&q&&Object.defineProperty(N,V,q),q},t=$&&$.__param||function(H,N){return function(V,O){N(V,O,H)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerATNSimulator=void 0;const i=sg,s=Oa(),n=wh,o=og(),a=w1(),l=S1(),u=ln,d=ml,f=Mu(),g=k1,x=Th,E=Ke,P=nz(),b=Io(),R=Fu,D=dr,C=Us;let I=class Es extends a.ATNSimulator{constructor(N,V){super(N),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=f.Lexer.DEFAULT_MODE,this.prevAccept=new Es.SimState,this.recog=V}copyState(N){this._charPositionInLine=N.charPositionInLine,this._line=N._line,this.mode=N.mode,this.startIndex=N.startIndex}match(N,V){this.mode=V;let O=N.mark();try{this.startIndex=N.index,this.prevAccept.reset();let W=this.atn.modeToDFA[V].s0;return W==null?this.matchATN(N):this.execATN(N,W)}finally{N.release(O)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=f.Lexer.DEFAULT_MODE}matchATN(N){let V=this.atn.modeToStartState[this.mode];Es.debug&&console.log(`matchATN mode ${this.mode} start: ${V}`);let O=this.mode,W=this.computeStartState(N,V),q=W.hasSemanticContext;q&&(W.hasSemanticContext=!1);let re=this.addDFAState(W);if(!q){let he=this.atn.modeToDFA[this.mode];he.s0?re=he.s0:he.s0=re}let fe=this.execATN(N,re);return Es.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[O].toLexerString()}`),fe}execATN(N,V){Es.debug&&console.log(`start state closure=${V.configs}`),V.isAcceptState&&this.captureSimState(this.prevAccept,N,V);let O=N.LA(1),W=V;for(;;){Es.debug&&console.log(`execATN loop starting closure: ${W.configs}`);let q=this.getExistingTargetState(W,O);if(q==null&&(q=this.computeTargetState(N,W,O)),q===a.ATNSimulator.ERROR||(O!==d.IntStream.EOF&&this.consume(N),q.isAcceptState&&(this.captureSimState(this.prevAccept,N,q),O===d.IntStream.EOF)))break;O=N.LA(1),W=q}return this.failOrAccept(this.prevAccept,N,W.configs,O)}getExistingTargetState(N,V){let O=N.getTarget(V);return Es.debug&&O!=null&&console.log("reuse state "+N.stateNumber+" edge to "+O.stateNumber),O}computeTargetState(N,V,O){let W=new P.OrderedATNConfigSet;return this.getReachableConfigSet(N,V.configs,W,O),W.isEmpty?(W.hasSemanticContext||this.addDFAEdge(V,O,a.ATNSimulator.ERROR),a.ATNSimulator.ERROR):this.addDFAEdge(V,O,W)}failOrAccept(N,V,O,W){if(N.dfaState!=null){let q=N.dfaState.lexerActionExecutor;return this.accept(V,q,this.startIndex,N.index,N.line,N.charPos),N.dfaState.prediction}else{if(W===d.IntStream.EOF&&V.index===this.startIndex)return D.Token.EOF;throw new x.LexerNoViableAltException(this.recog,V,this.startIndex,O)}}getReachableConfigSet(N,V,O,W){let q=s.ATN.INVALID_ALT_NUMBER;for(let re of V){let fe=re.alt===q;if(fe&&re.hasPassedThroughNonGreedyDecision)continue;Es.debug&&console.log(`testing ${this.getTokenName(W)} at ${re.toString(this.recog,!0)}`);let he=re.state.numberOfOptimizedTransitions;for(let Oe=0;Oe<he;Oe++){let He=re.state.getOptimizedTransition(Oe),ut=this.getReachableTarget(He,W);if(ut!=null){let qe=re.lexerActionExecutor,Be;qe!=null?(qe=qe.fixOffsetBeforeMatch(N.index-this.startIndex),Be=re.transform(ut,!0,qe)):(C(re.lexerActionExecutor==null),Be=re.transform(ut,!0));let nt=W===d.IntStream.EOF;if(this.closure(N,Be,O,fe,!0,nt)){q=re.alt;break}}}}}accept(N,V,O,W,q,re){Es.debug&&console.log(`ACTION ${V}`),N.seek(W),this._line=q,this._charPositionInLine=re,V!=null&&this.recog!=null&&V.execute(this.recog,N,O)}getReachableTarget(N,V){if(N.matches(V,f.Lexer.MIN_CHAR_VALUE,f.Lexer.MAX_CHAR_VALUE))return N.target}computeStartState(N,V){let O=b.PredictionContext.EMPTY_FULL,W=new P.OrderedATNConfigSet;for(let q=0;q<V.numberOfTransitions;q++){let re=V.transition(q).target,fe=n.ATNConfig.create(re,q+1,O);this.closure(N,fe,W,!1,!1,!1)}return W}closure(N,V,O,W,q,re){if(Es.debug&&console.log("closure("+V.toString(this.recog,!0)+")"),V.state instanceof R.RuleStopState){Es.debug&&(this.recog!=null?console.log(`closure at ${this.recog.ruleNames[V.state.ruleIndex]} rule stop ${V}`):console.log(`closure at rule stop ${V}`));let he=V.context;if(he.isEmpty)return O.add(V),!0;he.hasEmpty&&(O.add(V.transform(V.state,!0,b.PredictionContext.EMPTY_FULL)),W=!0);for(let Oe=0;Oe<he.size;Oe++){let He=he.getReturnState(Oe);if(He===b.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let ut=he.getParent(Oe),qe=this.atn.states[He],Be=V.transform(qe,!1,ut);W=this.closure(N,Be,O,W,q,re)}return W}V.state.onlyHasEpsilonTransitions||(!W||!V.hasPassedThroughNonGreedyDecision)&&O.add(V);let fe=V.state;for(let he=0;he<fe.numberOfOptimizedTransitions;he++){let Oe=fe.getOptimizedTransition(he),He=this.getEpsilonTarget(N,V,Oe,O,q,re);He!=null&&(W=this.closure(N,He,O,W,q,re))}return W}getEpsilonTarget(N,V,O,W,q,re){let fe;switch(O.serializationType){case 3:let he=O;if(this.optimize_tail_calls&&he.optimizedTailCall&&!V.context.hasEmpty)fe=V.transform(O.target,!0);else{let He=V.context.getChild(he.followState.stateNumber);fe=V.transform(O.target,!0,He)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let Oe=O;Es.debug&&console.log("EVAL rule "+Oe.ruleIndex+":"+Oe.predIndex),W.hasSemanticContext=!0,this.evaluatePredicate(N,Oe.ruleIndex,Oe.predIndex,q)?fe=V.transform(O.target,!0):fe=void 0;break;case 6:if(V.context.hasEmpty){let He=g.LexerActionExecutor.append(V.lexerActionExecutor,this.atn.lexerActions[O.actionIndex]);fe=V.transform(O.target,!0,He);break}else{fe=V.transform(O.target,!0);break}case 1:fe=V.transform(O.target,!0);break;case 5:case 2:case 7:if(re&&O.matches(d.IntStream.EOF,f.Lexer.MIN_CHAR_VALUE,f.Lexer.MAX_CHAR_VALUE)){fe=V.transform(O.target,!1);break}fe=void 0;break;default:fe=void 0;break}return fe}evaluatePredicate(N,V,O,W){if(this.recog==null)return!0;if(!W)return this.recog.sempred(void 0,V,O);let q=this._charPositionInLine,re=this._line,fe=N.index,he=N.mark();try{return this.consume(N),this.recog.sempred(void 0,V,O)}finally{this._charPositionInLine=q,this._line=re,N.seek(fe),N.release(he)}}captureSimState(N,V,O){N.index=V.index,N.line=this._line,N.charPos=this._charPositionInLine,N.dfaState=O}addDFAEdge(N,V,O){if(O instanceof o.ATNConfigSet){let W=O.hasSemanticContext;W&&(O.hasSemanticContext=!1);let q=this.addDFAState(O);return W||this.addDFAEdge(N,V,q),q}else Es.debug&&console.log("EDGE "+N+" -> "+O+" upon "+String.fromCharCode(V)),N!=null&&N.setTarget(V,O)}addDFAState(N){C(!N.hasSemanticContext);let V=new l.DFAState(N),O=this.atn.modeToDFA[this.mode].states.get(V);if(O!=null)return O;N.optimizeConfigs(this);let W=new l.DFAState(N.clone(!0)),q;for(let re of N)if(re.state instanceof R.RuleStopState){q=re;break}if(q!=null){let re=this.atn.ruleToTokenType[q.state.ruleIndex],fe=q.lexerActionExecutor;W.acceptStateInfo=new i.AcceptStateInfo(re,fe)}return this.atn.modeToDFA[this.mode].addState(W)}getDFA(N){return this.atn.modeToDFA[N]}getText(N){return N.getText(u.Interval.of(this.startIndex,N.index-1))}get line(){return this._line}set line(N){this._line=N}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(N){this._charPositionInLine=N}consume(N){N.LA(1)===`
`.charCodeAt(0)?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,N.consume()}getTokenName(N){return N===-1?"EOF":"'"+String.fromCharCode(N)+"'"}};e([E.NotNull],I.prototype,"prevAccept",void 0),e([t(0,E.NotNull)],I.prototype,"copyState",null),e([t(0,E.NotNull)],I.prototype,"match",null),e([E.Override],I.prototype,"reset",null),e([t(0,E.NotNull)],I.prototype,"matchATN",null),e([t(0,E.NotNull),t(1,E.NotNull)],I.prototype,"execATN",null),e([t(0,E.NotNull)],I.prototype,"getExistingTargetState",null),e([E.NotNull,t(0,E.NotNull),t(1,E.NotNull)],I.prototype,"computeTargetState",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull)],I.prototype,"getReachableConfigSet",null),e([t(0,E.NotNull)],I.prototype,"accept",null),e([E.NotNull,t(0,E.NotNull),t(1,E.NotNull)],I.prototype,"computeStartState",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull)],I.prototype,"closure",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull),t(3,E.NotNull)],I.prototype,"getEpsilonTarget",null),e([t(0,E.NotNull)],I.prototype,"evaluatePredicate",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull)],I.prototype,"captureSimState",null),e([E.NotNull,t(0,E.NotNull)],I.prototype,"addDFAState",null),e([E.NotNull],I.prototype,"getDFA",null),e([E.NotNull,t(0,E.NotNull)],I.prototype,"getText",null),e([t(0,E.NotNull)],I.prototype,"consume",null),e([E.NotNull],I.prototype,"getTokenName",null),I=e([t(0,E.NotNull)],I),r.LexerATNSimulator=I,function(H){H.debug=!1,H.dfa_debug=!1;class N{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}H.SimState=N}(I=r.LexerATNSimulator||(r.LexerATNSimulator={})),r.LexerATNSimulator=I}(PE)),PE}var ER;function Mu(){if(ER)return c_;ER=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(f,g,x,E){var P=arguments.length,b=P<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,x):E,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(f,g,x,E);else for(var D=f.length-1;D>=0;D--)(R=f[D])&&(b=(P<3?R(b):P>3?R(g,x,b):R(g,x))||b);return P>3&&b&&Object.defineProperty(g,x,b),b};Object.defineProperty(c_,"__esModule",{value:!0}),c_.Lexer=void 0;const e=E1,t=ng,i=ln,s=ml,n=P1(),o=Th,a=Ke,l=Nu,u=dr;class d extends l.Recognizer{constructor(g){super(),this._factory=e.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new t.IntegerStack,this._mode=d.DEFAULT_MODE,this._input=g,this._tokenFactorySourcePair={source:this,stream:g}}static get DEFAULT_TOKEN_CHANNEL(){return u.Token.DEFAULT_CHANNEL}static get HIDDEN(){return u.Token.HIDDEN_CHANNEL}reset(g){(g===void 0||g)&&this._input.seek(0),this._token=void 0,this._type=u.Token.INVALID_TYPE,this._channel=u.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=d.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(this._input==null)throw new Error("nextToken requires a non-null input stream.");let g=this._input.mark();try{e:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=u.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{this._type=u.Token.INVALID_TYPE;let x;try{x=this.interpreter.match(this._input,this._mode)}catch(E){if(E instanceof o.LexerNoViableAltException)this.notifyListeners(E),this.recover(E),x=d.SKIP;else throw E}if(this._input.LA(1)===s.IntStream.EOF&&(this._hitEOF=!0),this._type===u.Token.INVALID_TYPE&&(this._type=x),this._type===d.SKIP)continue e}while(this._type===d.MORE);return this._token==null?this.emit():this._token}}finally{this._input.release(g)}}skip(){this._type=d.SKIP}more(){this._type=d.MORE}mode(g){this._mode=g}pushMode(g){n.LexerATNSimulator.debug&&console.log("pushMode "+g),this._modeStack.push(this._mode),this.mode(g)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return n.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(g){this._factory=g}get inputStream(){return this._input}set inputStream(g){this.reset(!1),this._input=g,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}emit(g){return g||(g=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=g,g}emitEOF(){let g=this.charPositionInLine,x=this.line,E=this._factory.create(this._tokenFactorySourcePair,u.Token.EOF,void 0,u.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,x,g);return this.emit(E),E}get line(){return this.interpreter.line}set line(g){this.interpreter.line=g}get charPositionInLine(){return this.interpreter.charPositionInLine}set charPositionInLine(g){this.interpreter.charPositionInLine=g}get charIndex(){return this._input.index}get text(){return this._text!=null?this._text:this.interpreter.getText(this._input)}set text(g){this._text=g}get token(){return this._token}set token(g){this._token=g}set type(g){this._type=g}get type(){return this._type}set channel(g){this._channel=g}get channel(){return this._channel}getAllTokens(){let g=[],x=this.nextToken();for(;x.type!==u.Token.EOF;)g.push(x),x=this.nextToken();return g}notifyListeners(g){let x=this._input.getText(i.Interval.of(this._tokenStartCharIndex,this._input.index)),E="token recognition error at: '"+this.getErrorDisplay(x)+"'",P=this.getErrorListenerDispatch();P.syntaxError&&P.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,E,g)}getErrorDisplay(g){if(typeof g=="number"){switch(g){case u.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(g)}return g.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(g){return"'"+this.getErrorDisplay(g)+"'"}recover(g){g instanceof o.LexerNoViableAltException?this._input.LA(1)!==s.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}}return d.DEFAULT_MODE=0,d.MORE=-2,d.SKIP=-3,d.MIN_CHAR_VALUE=0,d.MAX_CHAR_VALUE=1114111,r([a.Override],d.prototype,"nextToken",null),r([a.Override],d.prototype,"tokenFactory",null),r([a.Override],d.prototype,"inputStream",null),r([a.Override],d.prototype,"sourceName",null),r([a.Override],d.prototype,"line",null),r([a.Override],d.prototype,"charPositionInLine",null),c_.Lexer=d,c_}var SR;function Ph(){if(SR)return u_;SR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(d,f,g,x){var E=arguments.length,P=E<3?f:x===null?x=Object.getOwnPropertyDescriptor(f,g):x,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(d,f,g,x);else for(var R=d.length-1;R>=0;R--)(b=d[R])&&(P=(E<3?b(P):E>3?b(f,g,P):b(f,g))||P);return E>3&&P&&Object.defineProperty(f,g,P),P},e=$&&$.__param||function(d,f){return function(g,x){f(g,x,d)}};Object.defineProperty(u_,"__esModule",{value:!0}),u_.IntervalSet=void 0;const t=Eh,i=kf,s=ln,n=Mu(),o=ti,a=Ke,l=dr;class u{constructor(f){this.readonly=!1,f!=null?this._intervals=f.slice(0):this._intervals=[]}static get COMPLETE_CHAR_SET(){return u._COMPLETE_CHAR_SET===void 0&&(u._COMPLETE_CHAR_SET=u.of(n.Lexer.MIN_CHAR_VALUE,n.Lexer.MAX_CHAR_VALUE),u._COMPLETE_CHAR_SET.setReadonly(!0)),u._COMPLETE_CHAR_SET}static get EMPTY_SET(){return u._EMPTY_SET==null&&(u._EMPTY_SET=new u,u._EMPTY_SET.setReadonly(!0)),u._EMPTY_SET}static of(f,g=f){let x=new u;return x.add(f,g),x}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(f,g=f){this.addRange(s.Interval.of(f,g))}addRange(f){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(f.b<f.a)){for(let g=0;g<this._intervals.length;g++){let x=this._intervals[g];if(f.equals(x))return;if(f.adjacent(x)||!f.disjoint(x)){let E=f.union(x);for(this._intervals[g]=E;g<this._intervals.length-1;){g++;let P=this._intervals[g];if(!E.adjacent(P)&&E.disjoint(P))break;this._intervals.splice(g,1),g--,this._intervals[g]=E.union(P)}return}if(f.startsBeforeDisjoint(x)){this._intervals.splice(g,0,f);return}}this._intervals.push(f)}}static or(f){let g=new u;for(let x of f)g.addAll(x);return g}addAll(f){if(f==null)return this;if(f instanceof u){let g=f,x=g._intervals.length;for(let E=0;E<x;E++){let P=g._intervals[E];this.add(P.a,P.b)}}else for(let g of f.toArray())this.add(g);return this}complementRange(f,g){return this.complement(u.of(f,g))}complement(f){if(f.isNil)return u.EMPTY_SET;let g;return f instanceof u?g=f:(g=new u,g.addAll(f)),g.subtract(this)}subtract(f){if(f==null||f.isNil)return new u(this._intervals);if(f instanceof u)return u.subtract(this,f);let g=new u;return g.addAll(f),u.subtract(this,g)}static subtract(f,g){if(f.isNil)return new u;let x=new u(f._intervals);if(g.isNil)return x;let E=0,P=0;for(;E<x._intervals.length&&P<g._intervals.length;){let b=x._intervals[E],R=g._intervals[P];if(R.b<b.a){P++;continue}if(R.a>b.b){E++;continue}let D,C;if(R.a>b.a&&(D=new s.Interval(b.a,R.a-1)),R.b<b.b&&(C=new s.Interval(R.b+1,b.b)),D)if(C){x._intervals[E]=D,x._intervals.splice(E+1,0,C),E++,P++;continue}else{x._intervals[E]=D,E++;continue}else if(C){x._intervals[E]=C,P++;continue}else{x._intervals.splice(E,1);continue}}return x}or(f){let g=new u;return g.addAll(this),g.addAll(f),g}and(f){if(f.isNil)return new u;let g=this._intervals,x=f._intervals,E,P=g.length,b=x.length,R=0,D=0;for(;R<P&&D<b;){let C=g[R],I=x[D];C.startsBeforeDisjoint(I)?R++:I.startsBeforeDisjoint(C)?D++:C.properlyContains(I)?(E||(E=new u),E.addRange(C.intersection(I)),D++):I.properlyContains(C)?(E||(E=new u),E.addRange(C.intersection(I)),R++):C.disjoint(I)||(E||(E=new u),E.addRange(C.intersection(I)),C.startsAfterNonDisjoint(I)?D++:I.startsAfterNonDisjoint(C)&&R++)}return E||new u}contains(f){let g=this._intervals.length,x=0,E=g-1;for(;x<=E;){let P=x+E>>1,b=this._intervals[P],R=b.a;if(b.b<f)x=P+1;else if(R>f)E=P-1;else return!0}return!1}get isNil(){return this._intervals==null||this._intervals.length===0}get maxElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[this._intervals.length-1].b}get minElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let f=o.MurmurHash.initialize();for(let g of this._intervals)f=o.MurmurHash.update(f,g.a),f=o.MurmurHash.update(f,g.b);return f=o.MurmurHash.finish(f,this._intervals.length*2),f}equals(f){return f==null||!(f instanceof u)?!1:t.ArrayEqualityComparator.INSTANCE.equals(this._intervals,f._intervals)}toString(f=!1){let g="";if(this._intervals==null||this._intervals.length===0)return"{}";this.size>1&&(g+="{");let x=!0;for(let E of this._intervals){x?x=!1:g+=", ";let P=E.a,b=E.b;P===b?P===l.Token.EOF?g+="<EOF>":f?g+="'"+String.fromCodePoint(P)+"'":g+=P:f?g+="'"+String.fromCodePoint(P)+"'..'"+String.fromCodePoint(b)+"'":g+=P+".."+b}return this.size>1&&(g+="}"),g}toStringVocabulary(f){if(this._intervals==null||this._intervals.length===0)return"{}";let g="";this.size>1&&(g+="{");let x=!0;for(let E of this._intervals){x?x=!1:g+=", ";let P=E.a,b=E.b;if(P===b)g+=this.elementName(f,P);else for(let R=P;R<=b;R++)R>P&&(g+=", "),g+=this.elementName(f,R)}return this.size>1&&(g+="}"),g}elementName(f,g){return g===l.Token.EOF?"<EOF>":g===l.Token.EPSILON?"<EPSILON>":f.getDisplayName(g)}get size(){let f=0,g=this._intervals.length;if(g===1){let x=this._intervals[0];return x.b-x.a+1}for(let x=0;x<g;x++){let E=this._intervals[x];f+=E.b-E.a+1}return f}toIntegerList(){let f=new i.IntegerList(this.size),g=this._intervals.length;for(let x=0;x<g;x++){let E=this._intervals[x],P=E.a,b=E.b;for(let R=P;R<=b;R++)f.add(R)}return f}toSet(){let f=new Set;for(let g of this._intervals){let x=g.a,E=g.b;for(let P=x;P<=E;P++)f.add(P)}return f}toArray(){let f=new Array,g=this._intervals.length;for(let x=0;x<g;x++){let E=this._intervals[x],P=E.a,b=E.b;for(let R=P;R<=b;R++)f.push(R)}return f}remove(f){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let g=this._intervals.length;for(let x=0;x<g;x++){let E=this._intervals[x],P=E.a,b=E.b;if(f<P)break;if(f===P&&f===b){this._intervals.splice(x,1);break}if(f===P){this._intervals[x]=s.Interval.of(E.a+1,E.b);break}if(f===b){this._intervals[x]=s.Interval.of(E.a,E.b-1);break}if(f>P&&f<b){let R=E.b;this._intervals[x]=s.Interval.of(E.a,f-1),this.add(f+1,R)}}}get isReadonly(){return this.readonly}setReadonly(f){if(this.readonly&&!f)throw new Error("can't alter readonly IntervalSet");this.readonly=f}}return r([a.Override],u.prototype,"addAll",null),r([a.Override],u.prototype,"complement",null),r([a.Override],u.prototype,"subtract",null),r([a.Override],u.prototype,"or",null),r([a.Override],u.prototype,"and",null),r([a.Override],u.prototype,"contains",null),r([a.Override],u.prototype,"isNil",null),r([a.Override],u.prototype,"hashCode",null),r([a.Override],u.prototype,"equals",null),r([e(0,a.NotNull)],u.prototype,"toStringVocabulary",null),r([a.NotNull,e(0,a.NotNull)],u.prototype,"elementName",null),r([a.Override],u.prototype,"size",null),r([a.Override],u.prototype,"remove",null),r([a.NotNull],u,"of",null),r([a.NotNull],u,"subtract",null),u_.IntervalSet=u,u_}var v_={},E_={},dg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var sz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(dg,"__esModule",{value:!0});dg.ATNDeserializationOptions=void 0;const oz=Ke;class ou{constructor(e){this.readOnly=!1,e?(this.verifyATN=e.verifyATN,this.generateRuleBypassTransitions=e.generateRuleBypassTransitions,this.optimize=e.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return ou._defaultOptions==null&&(ou._defaultOptions=new ou,ou._defaultOptions.makeReadOnly()),ou._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(e){this.throwIfReadOnly(),this.verifyATN=e}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(e){this.throwIfReadOnly(),this.generateRuleBypassTransitions=e}get isOptimize(){return this.optimize}set isOptimize(e){this.throwIfReadOnly(),this.optimize=e}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}}sz([oz.NotNull],ou,"defaultOptions",null);dg.ATNDeserializationOptions=ou;var S_={},fg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _g=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},az=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(fg,"__esModule",{value:!0});fg.ActionTransition=void 0;const pg=Ke,lz=Oo;let eh=class extends lz.Transition{constructor(e,t,i=-1,s=!1){super(e),this.ruleIndex=t,this.actionIndex=i,this.isCtxDependent=s}get serializationType(){return 6}get isEpsilon(){return!0}matches(e,t,i){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};_g([pg.Override],eh.prototype,"serializationType",null);_g([pg.Override],eh.prototype,"isEpsilon",null);_g([pg.Override],eh.prototype,"matches",null);_g([pg.Override],eh.prototype,"toString",null);eh=_g([az(0,pg.NotNull)],eh);fg.ActionTransition=eh;var gg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var mg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},uz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(gg,"__esModule",{value:!0});gg.AtomTransition=void 0;const cz=Ph(),th=Ke,hz=Oo;let rh=class extends hz.Transition{constructor(e,t){super(e),this._label=t}get serializationType(){return 5}get label(){return cz.IntervalSet.of(this._label)}matches(e,t,i){return this._label===e}toString(){return String(this.label)}};mg([th.Override],rh.prototype,"serializationType",null);mg([th.Override,th.NotNull],rh.prototype,"label",null);mg([th.Override],rh.prototype,"matches",null);mg([th.Override,th.NotNull],rh.prototype,"toString",null);rh=mg([uz(0,th.NotNull)],rh);gg.AtomTransition=rh;var R1={},Rh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Rh,"__esModule",{value:!0});Rh.BlockStartState=void 0;const dz=Da;class fz extends dz.DecisionState{}Rh.BlockStartState=fz;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _z=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(R1,"__esModule",{value:!0});R1.BasicBlockStartState=void 0;const pz=zi,gz=Rh,mz=Ke;class X3 extends gz.BlockStartState{get stateType(){return pz.ATNStateType.BLOCK_START}}_z([mz.Override],X3.prototype,"stateType",null);R1.BasicBlockStartState=X3;var D1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(D1,"__esModule",{value:!0});D1.BlockEndState=void 0;const yz=Pa,vz=zi,Ez=Ke;class Y3 extends yz.ATNState{get stateType(){return vz.ATNStateType.BLOCK_END}}xz([Ez.Override],Y3.prototype,"stateType",null);D1.BlockEndState=Y3;var C1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Sz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(C1,"__esModule",{value:!0});C1.EpsilonTransition=void 0;const Qd=Ke,wz=Oo;let ih=class extends wz.Transition{constructor(e,t=-1){super(e),this._outermostPrecedenceReturn=t}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(e,t,i){return!1}toString(){return"epsilon"}};xg([Qd.Override],ih.prototype,"serializationType",null);xg([Qd.Override],ih.prototype,"isEpsilon",null);xg([Qd.Override],ih.prototype,"matches",null);xg([Qd.Override,Qd.NotNull],ih.prototype,"toString",null);ih=xg([Sz(0,Qd.NotNull)],ih);C1.EpsilonTransition=ih;var O1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Df=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Az=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(O1,"__esModule",{value:!0});O1.LexerChannelAction=void 0;const _m=ti,nh=Ke;class vl{constructor(e){this._channel=e}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(e){e.channel=this._channel}hashCode(){let e=_m.MurmurHash.initialize();return e=_m.MurmurHash.update(e,this.actionType),e=_m.MurmurHash.update(e,this._channel),_m.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof vl?this._channel===e._channel:!1}toString(){return`channel(${this._channel})`}}Df([nh.Override],vl.prototype,"actionType",null);Df([nh.Override],vl.prototype,"isPositionDependent",null);Df([nh.Override,Az(0,nh.NotNull)],vl.prototype,"execute",null);Df([nh.Override],vl.prototype,"hashCode",null);Df([nh.Override],vl.prototype,"equals",null);Df([nh.Override],vl.prototype,"toString",null);O1.LexerChannelAction=vl;var N1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var yg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},bz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(N1,"__esModule",{value:!0});N1.LexerCustomAction=void 0;const w_=ti,Jd=Ke;class Bu{constructor(e,t){this._ruleIndex=e,this._actionIndex=t}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(e){e.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let e=w_.MurmurHash.initialize();return e=w_.MurmurHash.update(e,this.actionType),e=w_.MurmurHash.update(e,this._ruleIndex),e=w_.MurmurHash.update(e,this._actionIndex),w_.MurmurHash.finish(e,3)}equals(e){return e===this?!0:e instanceof Bu?this._ruleIndex===e._ruleIndex&&this._actionIndex===e._actionIndex:!1}}yg([Jd.Override],Bu.prototype,"actionType",null);yg([Jd.Override],Bu.prototype,"isPositionDependent",null);yg([Jd.Override,bz(0,Jd.NotNull)],Bu.prototype,"execute",null);yg([Jd.Override],Bu.prototype,"hashCode",null);yg([Jd.Override],Bu.prototype,"equals",null);N1.LexerCustomAction=Bu;var I1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Cf=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},kz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(I1,"__esModule",{value:!0});I1.LexerModeAction=void 0;const pm=ti,sh=Ke;class El{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(e){e.mode(this._mode)}hashCode(){let e=pm.MurmurHash.initialize();return e=pm.MurmurHash.update(e,this.actionType),e=pm.MurmurHash.update(e,this._mode),pm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof El?this._mode===e._mode:!1}toString(){return`mode(${this._mode})`}}Cf([sh.Override],El.prototype,"actionType",null);Cf([sh.Override],El.prototype,"isPositionDependent",null);Cf([sh.Override,kz(0,sh.NotNull)],El.prototype,"execute",null);Cf([sh.Override],El.prototype,"hashCode",null);Cf([sh.Override],El.prototype,"equals",null);Cf([sh.Override],El.prototype,"toString",null);I1.LexerModeAction=El;var q3={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},t=$&&$.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerMoreAction=void 0;const i=ti,s=Ke;class n{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(a){a.more()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"more"}}e([s.Override],n.prototype,"actionType",null),e([s.Override],n.prototype,"isPositionDependent",null),e([s.Override,t(0,s.NotNull)],n.prototype,"execute",null),e([s.Override],n.prototype,"hashCode",null),e([s.Override],n.prototype,"equals",null),e([s.Override],n.prototype,"toString",null),r.LexerMoreAction=n,function(o){o.INSTANCE=new o}(n=r.LexerMoreAction||(r.LexerMoreAction={}))})(q3);var Q3={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},t=$&&$.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerPopModeAction=void 0;const i=ti,s=Ke;class n{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(a){a.popMode()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"popMode"}}e([s.Override],n.prototype,"actionType",null),e([s.Override],n.prototype,"isPositionDependent",null),e([s.Override,t(0,s.NotNull)],n.prototype,"execute",null),e([s.Override],n.prototype,"hashCode",null),e([s.Override],n.prototype,"equals",null),e([s.Override],n.prototype,"toString",null),r.LexerPopModeAction=n,function(o){o.INSTANCE=new o}(n=r.LexerPopModeAction||(r.LexerPopModeAction={}))})(Q3);var F1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Of=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Tz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(F1,"__esModule",{value:!0});F1.LexerPushModeAction=void 0;const gm=ti,oh=Ke;class Sl{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(e){e.pushMode(this._mode)}hashCode(){let e=gm.MurmurHash.initialize();return e=gm.MurmurHash.update(e,this.actionType),e=gm.MurmurHash.update(e,this._mode),gm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof Sl?this._mode===e._mode:!1}toString(){return`pushMode(${this._mode})`}}Of([oh.Override],Sl.prototype,"actionType",null);Of([oh.Override],Sl.prototype,"isPositionDependent",null);Of([oh.Override,Tz(0,oh.NotNull)],Sl.prototype,"execute",null);Of([oh.Override],Sl.prototype,"hashCode",null);Of([oh.Override],Sl.prototype,"equals",null);Of([oh.Override],Sl.prototype,"toString",null);F1.LexerPushModeAction=Sl;var J3={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},t=$&&$.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerSkipAction=void 0;const i=ti,s=Ke;class n{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(a){a.skip()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"skip"}}e([s.Override],n.prototype,"actionType",null),e([s.Override],n.prototype,"isPositionDependent",null),e([s.Override,t(0,s.NotNull)],n.prototype,"execute",null),e([s.Override],n.prototype,"hashCode",null),e([s.Override],n.prototype,"equals",null),e([s.Override],n.prototype,"toString",null),r.LexerSkipAction=n,function(o){o.INSTANCE=new o}(n=r.LexerSkipAction||(r.LexerSkipAction={}))})(J3);var M1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Nf=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Pz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(M1,"__esModule",{value:!0});M1.LexerTypeAction=void 0;const mm=ti,ah=Ke;class wl{constructor(e){this._type=e}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(e){e.type=this._type}hashCode(){let e=mm.MurmurHash.initialize();return e=mm.MurmurHash.update(e,this.actionType),e=mm.MurmurHash.update(e,this._type),mm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof wl?this._type===e._type:!1}toString(){return`type(${this._type})`}}Nf([ah.Override],wl.prototype,"actionType",null);Nf([ah.Override],wl.prototype,"isPositionDependent",null);Nf([ah.Override,Pz(0,ah.NotNull)],wl.prototype,"execute",null);Nf([ah.Override],wl.prototype,"hashCode",null);Nf([ah.Override],wl.prototype,"equals",null);Nf([ah.Override],wl.prototype,"toString",null);M1.LexerTypeAction=wl;var vg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Rz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(vg,"__esModule",{value:!0});vg.LoopEndState=void 0;const Dz=Pa,Cz=zi,Oz=Ke;class Z3 extends Dz.ATNState{get stateType(){return Cz.ATNStateType.LOOP_END}}Rz([Oz.Override],Z3.prototype,"stateType",null);vg.LoopEndState=Z3;var A_={},B1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var eI=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(B1,"__esModule",{value:!0});B1.ConflictInfo=void 0;const tI=Ke,Nz=Ei;class Eg{constructor(e,t){this._conflictedAlts=e,this.exact=t}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(e){return e===this?!0:e instanceof Eg?this.isExact===e.isExact&&Nz.equals(this.conflictedAlts,e.conflictedAlts):!1}hashCode(){return this.conflictedAlts.hashCode()}}eI([tI.Override],Eg.prototype,"equals",null);eI([tI.Override],Eg.prototype,"hashCode",null);B1.ConflictInfo=Eg;var b_={},If={},Al={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Na=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Al,"__esModule",{value:!0});Al.TerminalNode=void 0;const Iz=ln,Ia=Ke,Fz=dr;class Mo{constructor(e){this._symbol=e}getChild(e){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}setParent(e){this._parent=e}get payload(){return this._symbol}get sourceInterval(){let e=this._symbol.tokenIndex;return new Iz.Interval(e,e)}get childCount(){return 0}accept(e){return e.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(e){return this.toString()}toString(){return this._symbol.type===Fz.Token.EOF?"<EOF>":this._symbol.text||""}}Na([Ia.Override],Mo.prototype,"getChild",null);Na([Ia.Override],Mo.prototype,"parent",null);Na([Ia.Override],Mo.prototype,"setParent",null);Na([Ia.Override],Mo.prototype,"payload",null);Na([Ia.Override],Mo.prototype,"sourceInterval",null);Na([Ia.Override],Mo.prototype,"childCount",null);Na([Ia.Override],Mo.prototype,"accept",null);Na([Ia.Override],Mo.prototype,"text",null);Na([Ia.Override],Mo.prototype,"toStringTree",null);Na([Ia.Override],Mo.prototype,"toString",null);Al.TerminalNode=Mo;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Mz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(If,"__esModule",{value:!0});If.ErrorNode=void 0;const Bz=Ke,Lz=Al;class rI extends Lz.TerminalNode{constructor(e){super(e)}accept(e){return e.visitErrorNode(this)}}Mz([Bz.Override],rI.prototype,"accept",null);If.ErrorNode=rI;var k_={},Ff={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ff,"__esModule",{value:!0});Ff.RuleNode=void 0;class Uz{}Ff.RuleNode=Uz;var T_={},wR;function Dh(){if(wR)return T_;wR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(x,E,P,b){var R=arguments.length,D=R<3?E:b===null?b=Object.getOwnPropertyDescriptor(E,P):b,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,E,P,b);else for(var I=x.length-1;I>=0;I--)(C=x[I])&&(D=(R<3?C(D):R>3?C(E,P,D):C(E,P))||D);return R>3&&D&&Object.defineProperty(E,P,D),D},e=$&&$.__param||function(x,E){return function(P,b){E(P,b,x)}};Object.defineProperty(T_,"__esModule",{value:!0}),T_.Trees=void 0;const t=Oa(),i=Ou,s=If,n=Ke,o=Og(),a=Bo(),l=Ff,u=Al,d=dr,f=Ei;class g{static toStringTree(E,P){let b;P instanceof o.Parser?b=P.ruleNames:b=P;let R=f.escapeWhitespace(this.getNodeText(E,b),!1);if(E.childCount===0)return R;let D="";D+="(",R=f.escapeWhitespace(this.getNodeText(E,b),!1),D+=R,D+=" ";for(let C=0;C<E.childCount;C++)C>0&&(D+=" "),D+=this.toStringTree(E.getChild(C),b);return D+=")",D}static getNodeText(E,P){let b;if(P instanceof o.Parser)b=P.ruleNames;else if(P)b=P;else{let R=E.payload;return typeof R.text=="string"?R.text:E.payload.toString()}if(E instanceof l.RuleNode){let R=E.ruleContext,D=R.ruleIndex,C=b[D],I=R.altNumber;return I!==t.ATN.INVALID_ALT_NUMBER?C+":"+I:C}else{if(E instanceof s.ErrorNode)return E.toString();if(E instanceof u.TerminalNode)return E.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(E){let P=[];for(let b=0;b<E.childCount;b++)P.push(E.getChild(b));return P}static getAncestors(E){let P=[],b=E.parent;for(;b;)P.unshift(b),b=b.parent;return P}static isAncestorOf(E,P){if(!E||!P||!E.parent)return!1;let b=P.parent;for(;b;){if(E===b)return!0;b=b.parent}return!1}static findAllTokenNodes(E,P){return g.findAllNodes(E,P,!0)}static findAllRuleNodes(E,P){return g.findAllNodes(E,P,!1)}static findAllNodes(E,P,b){let R=[];return g._findAllNodes(E,P,b,R),R}static _findAllNodes(E,P,b,R){b&&E instanceof u.TerminalNode?E.symbol.type===P&&R.push(E):!b&&E instanceof a.ParserRuleContext&&E.ruleIndex===P&&R.push(E);for(let D=0;D<E.childCount;D++)g._findAllNodes(E.getChild(D),P,b,R)}static getDescendants(E){let P=[];function b(R){P.push(R);const D=R.childCount;for(let C=0;C<D;C++)b(R.getChild(C))}return b(E),P}static getRootOfSubtreeEnclosingRegion(E,P,b){let R=E.childCount;for(let D=0;D<R;D++){let C=E.getChild(D),I=g.getRootOfSubtreeEnclosingRegion(C,P,b);if(I)return I}if(E instanceof a.ParserRuleContext){let D=E.stop;if(P>=E.start.tokenIndex&&(D==null||b<=D.tokenIndex))return E}}static stripChildrenOutOfRange(E,P,b,R){if(!E)return;let D=E.childCount;for(let C=0;C<D;C++){let I=E.getChild(C),H=I.sourceInterval;if(I instanceof a.ParserRuleContext&&(H.b<b||H.a>R)&&g.isAncestorOf(I,P)){let N=new i.CommonToken(d.Token.INVALID_TYPE,"...");E.children[C]=new u.TerminalNode(N)}}}static findNodeSuchThat(E,P){if(P(E))return E;let b=E.childCount;for(let R=0;R<b;R++){let D=g.findNodeSuchThat(E.getChild(R),P);if(D!==void 0)return D}}}return r([e(0,n.NotNull)],g,"toStringTree",null),r([n.NotNull,e(0,n.NotNull)],g,"getAncestors",null),r([e(0,n.NotNull)],g,"getRootOfSubtreeEnclosingRegion",null),T_.Trees=g,T_}var AR;function iI(){if(AR)return k_;AR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(u,d,f,g){var x=arguments.length,E=x<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,f):g,P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(u,d,f,g);else for(var b=u.length-1;b>=0;b--)(P=u[b])&&(E=(x<3?P(E):x>3?P(d,f,E):P(d,f))||E);return x>3&&E&&Object.defineProperty(d,f,E),E};Object.defineProperty(k_,"__esModule",{value:!0}),k_.RuleContext=void 0;const e=Oa(),t=Nu,i=Ff,s=ln,n=Ke,o=Dh(),a=Bo();class l extends i.RuleNode{constructor(d,f){super(),this._parent=d,this.invokingState=f!=null?f:-1}static getChildContext(d,f){return new l(d,f)}depth(){let d=0,f=this;for(;f;)f=f._parent,d++;return d}get isEmpty(){return this.invokingState===-1}get sourceInterval(){return s.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}setParent(d){this._parent=d}get payload(){return this}get text(){if(this.childCount===0)return"";let d="";for(let f=0;f<this.childCount;f++)d+=this.getChild(f).text;return d.toString()}get ruleIndex(){return-1}get altNumber(){return e.ATN.INVALID_ALT_NUMBER}set altNumber(d){}getChild(d){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(d){return d.visitChildren(this)}toStringTree(d){return o.Trees.toStringTree(this,d)}toString(d,f){const g=d instanceof t.Recognizer?d.ruleNames:d;f=f||a.ParserRuleContext.emptyContext();let x="",E=this;for(x+="[";E&&E!==f;){if(!g)E.isEmpty||(x+=E.invokingState);else{let P=E.ruleIndex,b=P>=0&&P<g.length?g[P]:P.toString();x+=b}E._parent&&(g||!E._parent.isEmpty)&&(x+=" "),E=E._parent}return x+="]",x.toString()}}return r([n.Override],l.prototype,"sourceInterval",null),r([n.Override],l.prototype,"ruleContext",null),r([n.Override],l.prototype,"parent",null),r([n.Override],l.prototype,"setParent",null),r([n.Override],l.prototype,"payload",null),r([n.Override],l.prototype,"text",null),r([n.Override],l.prototype,"getChild",null),r([n.Override],l.prototype,"childCount",null),r([n.Override],l.prototype,"accept",null),r([n.Override],l.prototype,"toStringTree",null),k_.RuleContext=l,k_}var bR;function Bo(){if(bR)return b_;bR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(a,l,u,d){var f=arguments.length,g=f<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,u):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(a,l,u,d);else for(var E=a.length-1;E>=0;E--)(x=a[E])&&(g=(f<3?x(g):f>3?x(l,u,g):x(l,u))||g);return f>3&&g&&Object.defineProperty(l,u,g),g};Object.defineProperty(b_,"__esModule",{value:!0}),b_.ParserRuleContext=void 0;const e=If,t=ln,i=Ke,s=iI(),n=Al;class o extends s.RuleContext{constructor(l,u){u==null?super():super(l,u)}static emptyContext(){return o.EMPTY}copyFrom(l){if(this._parent=l._parent,this.invokingState=l.invokingState,this._start=l._start,this._stop=l._stop,l.children){this.children=[];for(let u of l.children)u instanceof e.ErrorNode&&this.addChild(u)}}enterRule(l){}exitRule(l){}addAnyChild(l){return this.children?this.children.push(l):this.children=[l],l}addChild(l){if(l instanceof n.TerminalNode){l.setParent(this),this.addAnyChild(l);return}else if(l instanceof s.RuleContext){this.addAnyChild(l);return}else return l=new n.TerminalNode(l),this.addAnyChild(l),l.setParent(this),l}addErrorNode(l){if(l instanceof e.ErrorNode){const u=l;return u.setParent(this),this.addAnyChild(u)}else{const u=l;let d=new e.ErrorNode(u);return this.addAnyChild(d),d.setParent(this),d}}removeLastChild(){this.children&&this.children.pop()}get parent(){let l=super.parent;if(l===void 0||l instanceof o)return l;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(l,u){if(!this.children||l<0||l>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(u==null)return this.children[l];let d=this.tryGetChild(l,u);if(d===void 0)throw new Error("The specified node does not exist");return d}tryGetChild(l,u){if(!this.children||l<0||l>=this.children.length)return;let d=-1;for(let f of this.children)if(f instanceof u&&(d++,d===l))return f}getToken(l,u){let d=this.tryGetToken(l,u);if(d===void 0)throw new Error("The specified token does not exist");return d}tryGetToken(l,u){if(!this.children||u<0||u>=this.children.length)return;let d=-1;for(let f of this.children)if(f instanceof n.TerminalNode&&f.symbol.type===l&&(d++,d===u))return f}getTokens(l){let u=[];if(!this.children)return u;for(let d of this.children)d instanceof n.TerminalNode&&d.symbol.type===l&&u.push(d);return u}get ruleContext(){return this}getRuleContext(l,u){return this.getChild(l,u)}tryGetRuleContext(l,u){return this.tryGetChild(l,u)}getRuleContexts(l){let u=[];if(!this.children)return u;for(let d of this.children)d instanceof l&&u.push(d);return u}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?t.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):t.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):t.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(l){return"ParserRuleContext"+l.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}}return o.EMPTY=new o,r([i.Override],o.prototype,"parent",null),r([i.Override],o.prototype,"childCount",null),r([i.Override],o.prototype,"sourceInterval",null),b_.ParserRuleContext=o,b_}var nI={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionMode=void 0;const t=xl,i=ti,s=Ke,n=Fu;(function(o){o[o.SLL=0]="SLL",o[o.LL=1]="LL",o[o.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"})(r.PredictionMode||(r.PredictionMode={})),function(o){class a extends t.Array2DHashMap{constructor(){super(l.INSTANCE)}}class l{AltAndContextConfigEqualityComparator(){}hashCode(g){let x=i.MurmurHash.initialize(7);return x=i.MurmurHash.update(x,g.state.stateNumber),x=i.MurmurHash.update(x,g.context),x=i.MurmurHash.finish(x,2),x}equals(g,x){return g===x?!0:g==null||x==null?!1:g.state.stateNumber===x.state.stateNumber&&g.context.equals(x.context)}}l.INSTANCE=new l,e([s.Override],l.prototype,"hashCode",null),e([s.Override],l.prototype,"equals",null);function u(f){for(let g of f)if(g.state instanceof n.RuleStopState)return!0;return!1}o.hasConfigInRuleStopState=u;function d(f){for(let g of f)if(!(g.state instanceof n.RuleStopState))return!1;return!0}o.allConfigsInRuleStopStates=d}(r.PredictionMode||(r.PredictionMode={}))})(nI);var P_={},kR;function sI(){if(kR)return P_;kR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(P_,"__esModule",{value:!0}),P_.SimulatorState=void 0;const t=Ke,i=Bo();let s=class{constructor(o,a,l,u){this.outerContext=o!=null?o:i.ParserRuleContext.emptyContext(),this.s0=a,this.useContext=l,this.remainingOuterContext=u}};return s=r([e(1,t.NotNull)],s),P_.SimulatorState=s,P_}var TR;function Sg(){if(TR)return A_;TR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(bt,Z,ne,se){var Ee=arguments.length,Se=Ee<3?Z:se===null?se=Object.getOwnPropertyDescriptor(Z,ne):se,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Se=Reflect.decorate(bt,Z,ne,se);else for(var Pe=bt.length-1;Pe>=0;Pe--)(de=bt[Pe])&&(Se=(Ee<3?de(Se):Ee>3?de(Z,ne,Se):de(Z,ne))||Se);return Ee>3&&Se&&Object.defineProperty(Z,ne,Se),Se},e=$&&$.__param||function(bt,Z){return function(ne,se){Z(ne,se,bt)}};Object.defineProperty(A_,"__esModule",{value:!0}),A_.ParserATNSimulator=void 0;const t=sg,i=fg,s=No,n=x1,o=Oa(),a=wh,l=og(),u=w1(),d=zi,f=gg,g=Fo,x=B1,E=Da,P=S1(),b=kf,R=ln,D=ml,C=Ke,I=kb(),H=J1(),N=Gs,V=Bo(),O=Io(),W=wb(),q=nI,re=Fu,fe=Rf,he=vh,Oe=bb(),He=sI(),ut=dr,qe=yl,Be=Us,nt=65535,dt=-(1<<31>>>0);let rt=class $t extends u.ATNSimulator{constructor(Z,ne){super(Z),this.predictionMode=q.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=ne}getPredictionMode(){return this.predictionMode}setPredictionMode(Z){this.predictionMode=Z}reset(){}adaptivePredict(Z,ne,se,Ee){Ee===void 0&&(Ee=!1);let Se=this.atn.decisionToDFA[ne];if(Be(Se!=null),this.optimize_ll1&&!Se.isPrecedenceDfa&&!Se.isEmpty){let J=Z.LA(1);if(J>=0&&J<=65535){let Le=(ne<<16>>>0)+J,F=this.atn.LL1Table.get(Le);if(F!=null)return F}}this.dfa=Se,this.force_global_context?Ee=!0:this.always_try_local_context||(Ee=Ee||Se.isContextSensitive),this.userWantsCtxSensitive=Ee||this.predictionMode!==q.PredictionMode.SLL&&se!=null&&!this.atn.decisionToState[ne].sll,se==null&&(se=V.ParserRuleContext.emptyContext());let de;Se.isEmpty||(de=this.getStartState(Se,Z,se,Ee)),de==null&&(se==null&&(se=V.ParserRuleContext.emptyContext()),$t.debug&&console.log("ATN decision "+Se.decision+" exec LA(1)=="+this.getLookaheadName(Z)+", outerContext="+se.toString(this._parser)),de=this.computeStartState(Se,se,Ee));let Pe=Z.mark(),ze=Z.index;try{let J=this.execDFA(Se,Z,ze,de);return $t.debug&&console.log("DFA after predictATN: "+Se.toString(this._parser.vocabulary,this._parser.ruleNames)),J}finally{this.dfa=void 0,Z.seek(ze),Z.release(Pe)}}getStartState(Z,ne,se,Ee){if(!Ee)if(Z.isPrecedenceDfa){let Pe=Z.getPrecedenceStartState(this._parser.precedence,!1);return Pe==null?void 0:new He.SimulatorState(se,Pe,!1,se)}else return Z.s0==null?void 0:new He.SimulatorState(se,Z.s0,!1,se);if(!this.enable_global_context_dfa)return;let Se=se;Be(se!=null);let de;for(Z.isPrecedenceDfa?de=Z.getPrecedenceStartState(this._parser.precedence,!0):de=Z.s0full;Se!=null&&de!=null&&de.isContextSensitive;)Se=this.skipTailCalls(Se),de=de.getContextTarget(this.getReturnState(Se)),Se.isEmpty?Be(de==null||!de.isContextSensitive):Se=Se.parent;if(de!=null)return new He.SimulatorState(se,de,Ee,Se)}execDFA(Z,ne,se,Ee){let Se=Ee.outerContext;$t.dfa_debug&&console.log("DFA decision "+Z.decision+" exec LA(1)=="+this.getLookaheadName(ne)+", outerContext="+Se.toString(this._parser)),$t.dfa_debug&&console.log(Z.toString(this._parser.vocabulary,this._parser.ruleNames));let de=Ee.s0,Pe=ne.LA(1),ze=Ee.remainingOuterContext;for(;;){if($t.dfa_debug&&console.log("DFA state "+de.stateNumber+" LA(1)=="+this.getLookaheadName(ne)),Ee.useContext)for(;de.isContextSymbol(Pe);){let F;if(ze!=null&&(ze=this.skipTailCalls(ze),F=de.getContextTarget(this.getReturnState(ze))),F==null){let U=new He.SimulatorState(Ee.outerContext,de,Ee.useContext,ze);return this.execATN(Z,ne,se,U)}Be(ze!=null),ze=ze.parent,de=F}if(this.isAcceptState(de,Ee.useContext)){de.predicates!=null?$t.dfa_debug&&console.log("accept "+de):$t.dfa_debug&&console.log("accept; predict "+de.prediction+" in state "+de.stateNumber);break}Be(!this.isAcceptState(de,Ee.useContext));let Le=this.getExistingTargetState(de,Pe);if(Le==null){$t.dfa_debug&&Pe>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName(Pe));let F;if($t.dfa_debug){let j=R.Interval.of(se,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText(j)+" at DFA state "+de.stateNumber)}let U=new He.SimulatorState(Se,de,Ee.useContext,ze);return F=this.execATN(Z,ne,se,U),$t.dfa_debug&&console.log("back from DFA update, alt="+F+`, dfa=
`+Z.toString(this._parser.vocabulary,this._parser.ruleNames)),$t.dfa_debug&&console.log("DFA decision "+Z.decision+" predicts "+F),F}else if(Le===u.ATNSimulator.ERROR){let F=new He.SimulatorState(Se,de,Ee.useContext,ze);return this.handleNoViableAlt(ne,se,F)}de=Le,!this.isAcceptState(de,Ee.useContext)&&Pe!==D.IntStream.EOF&&(ne.consume(),Pe=ne.LA(1))}if(!Ee.useContext&&de.configs.conflictInfo!=null&&Z.atnStartState instanceof E.DecisionState&&!(!this.userWantsCtxSensitive||!de.configs.dipsIntoOuterContext&&de.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&ne.index===se)){Be(!Ee.useContext);let Le,F=de.predicates;if(F!=null){let U=ne.index;if(U!==se&&ne.seek(se),Le=this.evalSemanticContext(F,Se,!0),Le.cardinality()===1)return Le.nextSetBit(0);U!==se&&ne.seek(U)}if(this.reportAmbiguities){let U=new He.SimulatorState(Se,de,Ee.useContext,ze);this.reportAttemptingFullContext(Z,Le,U,se,ne.index)}return ne.seek(se),this.adaptivePredict(ne,Z.decision,Se,!0)}let J=de.predicates;if(J!=null){let Le=ne.index;se!==Le&&ne.seek(se);let F=this.evalSemanticContext(J,Se,this.reportAmbiguities&&this.predictionMode===q.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch(F.cardinality()){case 0:throw this.noViableAlt(ne,Se,de.configs,se);case 1:return F.nextSetBit(0);default:return se!==Le&&ne.seek(Le),this.reportAmbiguity(Z,de,se,Le,de.configs.isExactConflict,F,de.configs),F.nextSetBit(0)}}return $t.dfa_debug&&console.log("DFA decision "+Z.decision+" predicts "+de.prediction),de.prediction}isAcceptState(Z,ne){return Z.isAcceptState?Z.configs.conflictingAlts==null?!0:ne&&this.predictionMode===q.PredictionMode.LL_EXACT_AMBIG_DETECTION?Z.configs.isExactConflict:!0:!1}execATN(Z,ne,se,Ee){$t.debug&&console.log("execATN decision "+Z.decision+" exec LA(1)=="+this.getLookaheadName(ne));let Se=Ee.outerContext,de=Ee.useContext,Pe=ne.LA(1),ze=Ee,J=new W.PredictionContextCache;for(;;){let Le=this.computeReachSet(Z,ze,Pe,J);if(Le==null)return this.setDFAEdge(ze.s0,ne.LA(1),u.ATNSimulator.ERROR),this.handleNoViableAlt(ne,se,ze);let F=Le.s0;if(Be(F.isAcceptState||F.prediction===o.ATN.INVALID_ALT_NUMBER),Be(F.isAcceptState||F.configs.conflictInfo==null),this.isAcceptState(F,de)){let U=F.configs.conflictingAlts,j=U==null?F.prediction:o.ATN.INVALID_ALT_NUMBER;if(j!==o.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&ne.index===se&&!Z.isPrecedenceDfa&&Le.outerContext===Le.remainingOuterContext&&Z.decision>=0&&!F.configs.hasSemanticContext&&Pe>=0&&Pe<=nt){let ce=(Z.decision<<16>>>0)+Pe;this.atn.LL1Table.set(ce,j)}de&&this.always_try_local_context&&this.reportContextSensitivity(Z,j,Le,se,ne.index)}j=F.prediction;let ee=U!=null&&this.userWantsCtxSensitive;if(ee&&(ee=!de&&(F.configs.dipsIntoOuterContext||!F.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||ne.index!==se)),F.configs.hasSemanticContext){let ce=F.predicates;if(ce!=null){let ye=ne.index;switch(ye!==se&&ne.seek(se),U=this.evalSemanticContext(ce,Se,ee||this.reportAmbiguities),U.cardinality()){case 0:throw this.noViableAlt(ne,Se,F.configs,se);case 1:return U.nextSetBit(0)}ye!==se&&ne.seek(ye)}}if(ee){Be(!de),Be(this.isAcceptState(F,!1)),$t.debug&&console.log("RETRY with outerContext="+Se);let ce=this.computeStartState(Z,Se,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(Z,U,Le,se,ne.index),ne.seek(se),this.execATN(Z,ne,se,ce)}else return U!=null&&(this.reportAmbiguities&&U.cardinality()>1&&this.reportAmbiguity(Z,F,se,ne.index,F.configs.isExactConflict,U,F.configs),j=U.nextSetBit(0)),j}ze=Le,Pe!==D.IntStream.EOF&&(ne.consume(),Pe=ne.LA(1))}}handleNoViableAlt(Z,ne,se){if(se.s0!=null){let Ee=new g.BitSet,Se=0;for(let de of se.s0.configs)(de.reachesIntoOuterContext||de.state instanceof re.RuleStopState)&&(Ee.set(de.alt),Se=Math.max(Se,de.alt));switch(Ee.cardinality()){case 0:break;case 1:return Ee.nextSetBit(0);default:if(!se.s0.configs.hasSemanticContext)return Ee.nextSetBit(0);let de=new l.ATNConfigSet;for(let ze of se.s0.configs)(ze.reachesIntoOuterContext||ze.state instanceof re.RuleStopState)&&de.add(ze);let Pe=this.getPredsForAmbigAlts(Ee,de,Se);if(Pe!=null){let ze=this.getPredicatePredictions(Ee,Pe);if(ze!=null){let J=Z.index;try{Z.seek(ne);let Le=this.evalSemanticContext(ze,se.outerContext,!1);if(!Le.isEmpty)return Le.nextSetBit(0)}finally{Z.seek(J)}}}return Ee.nextSetBit(0)}}throw this.noViableAlt(Z,se.outerContext,se.s0.configs,ne)}computeReachSet(Z,ne,se,Ee){let Se=ne.useContext,de=ne.remainingOuterContext,Pe=ne.s0;if(Se)for(;Pe.isContextSymbol(se);){let Le;if(de!=null&&(de=this.skipTailCalls(de),Le=Pe.getContextTarget(this.getReturnState(de))),Le==null)break;Be(de!=null),de=de.parent,Pe=Le}if(Be(!this.isAcceptState(Pe,Se)),this.isAcceptState(Pe,Se))return new He.SimulatorState(ne.outerContext,Pe,Se,de);let ze=Pe,J=this.getExistingTargetState(ze,se);if(J==null){let Le=this.computeTargetState(Z,ze,de,se,Se,Ee);J=Le[0],de=Le[1]}if(J!==u.ATNSimulator.ERROR)return Be(!Se||!J.configs.dipsIntoOuterContext),new He.SimulatorState(ne.outerContext,J,Se,de)}getExistingTargetState(Z,ne){return Z.getTarget(ne)}computeTargetState(Z,ne,se,Ee,Se,de){let Pe=ne.configs.toArray(),ze,J=new l.ATNConfigSet,Le;do{let U=!Se||se!=null;U||(J.isOutermostConfigSet=!0);let j=new l.ATNConfigSet,ee;for(let oe of Pe){if($t.debug&&console.log("testing "+this.getTokenName(Ee)+" at "+oe.toString()),oe.state instanceof re.RuleStopState){Be(oe.context.isEmpty),(Se&&!oe.reachesIntoOuterContext||Ee===D.IntStream.EOF)&&(ee==null&&(ee=[]),ee.push(oe));continue}let ae=oe.state.numberOfOptimizedTransitions;for(let we=0;we<ae;we++){let Re=oe.state.getOptimizedTransition(we),Xe=this.getReachableTarget(oe,Re,Ee);Xe!=null&&j.add(oe.transform(Xe,!1),de)}}if(this.optimize_unique_closure&&ee==null&&Ee!==ut.Token.EOF&&j.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER){j.isOutermostConfigSet=J.isOutermostConfigSet,J=j;break}let ce=!1,ye=Ee===ut.Token.EOF;if(this.closure(j,J,ce,U,de,ye),Le=J.dipsIntoOuterContext,Ee===D.IntStream.EOF&&(J=this.removeAllConfigsNotInRuleStopState(J,de)),ee!=null&&(!Se||!q.PredictionMode.hasConfigInRuleStopState(J))){Be(ee.length>0);for(let oe of ee)J.add(oe,de)}if(Se&&Le){J.clear(),se=se,se=this.skipTailCalls(se);let oe=this.getReturnState(se);if(ze==null&&(ze=new b.IntegerList),se.isEmpty?se=void 0:se=se.parent,ze.add(oe),oe!==O.PredictionContext.EMPTY_FULL_STATE_KEY)for(let ae=0;ae<Pe.length;ae++)Pe[ae]=Pe[ae].appendContext(oe,de)}}while(Se&&Le);return J.isEmpty?(this.setDFAEdge(ne,Ee,u.ATNSimulator.ERROR),[u.ATNSimulator.ERROR,se]):[this.addDFAEdge(Z,ne,Ee,ze,J,de),se]}removeAllConfigsNotInRuleStopState(Z,ne){if(q.PredictionMode.allConfigsInRuleStopStates(Z))return Z;let se=new l.ATNConfigSet;for(let Ee of Z)Ee.state instanceof re.RuleStopState&&se.add(Ee,ne);return se}computeStartState(Z,ne,se){let Ee=Z.isPrecedenceDfa?Z.getPrecedenceStartState(this._parser.precedence,se):se?Z.s0full:Z.s0;if(Ee!=null){if(!se)return new He.SimulatorState(ne,Ee,se,ne);Ee.setContextSensitive(this.atn)}Z.decision;let Se=Z.atnStartState,de=0,Pe=ne,ze=se?O.PredictionContext.EMPTY_FULL:O.PredictionContext.EMPTY_LOCAL,J=new W.PredictionContextCache;if(se){if(!this.enable_global_context_dfa)for(;Pe!=null;)Pe.isEmpty?(de=O.PredictionContext.EMPTY_FULL_STATE_KEY,Pe=void 0):(de=this.getReturnState(Pe),ze=ze.appendSingleContext(de,J),Pe=Pe.parent);for(;Ee!=null&&Ee.isContextSensitive&&Pe!=null;){let F;if(Pe=this.skipTailCalls(Pe),Pe.isEmpty?(F=Ee.getContextTarget(O.PredictionContext.EMPTY_FULL_STATE_KEY),de=O.PredictionContext.EMPTY_FULL_STATE_KEY,Pe=void 0):(de=this.getReturnState(Pe),F=Ee.getContextTarget(de),ze=ze.appendSingleContext(de,J),Pe=Pe.parent),F==null)break;Ee=F}}if(Ee!=null&&!Ee.isContextSensitive)return new He.SimulatorState(ne,Ee,se,Pe);let Le=new l.ATNConfigSet;for(;;){let F=new l.ATNConfigSet,U=Se.numberOfTransitions;for(let ae=0;ae<U;ae++){let we=Se.transition(ae).target;F.add(a.ATNConfig.create(we,ae+1,ze))}let j=Pe!=null;j||(Le.isOutermostConfigSet=!0);let ee=!0;this.closure(F,Le,ee,j,J,!1);let ce=Le.dipsIntoOuterContext,ye;if(se&&!this.enable_global_context_dfa){Ee=this.addDFAState(Z,Le,J);break}else Ee==null?Z.isPrecedenceDfa?(Le=this.applyPrecedenceFilter(Le,ne,J),ye=this.addDFAState(Z,Le,J),Z.setPrecedenceStartState(this._parser.precedence,se,ye)):(ye=this.addDFAState(Z,Le,J),se?Z.s0full?ye=Z.s0full:Z.s0full=ye:Z.s0?ye=Z.s0:Z.s0=ye):(Z.isPrecedenceDfa&&(Le=this.applyPrecedenceFilter(Le,ne,J)),ye=this.addDFAState(Z,Le,J),Ee.setContextTarget(de,ye));if(Ee=ye,!se||!ce)break;ye.setContextSensitive(this.atn),Pe=Pe,Le.clear(),Pe=this.skipTailCalls(Pe);let oe=this.getReturnState(Pe);Pe.isEmpty?Pe=void 0:Pe=Pe.parent,oe!==O.PredictionContext.EMPTY_FULL_STATE_KEY&&(ze=ze.appendSingleContext(oe,J)),de=oe}return new He.SimulatorState(ne,Ee,se,Pe)}applyPrecedenceFilter(Z,ne,se){let Ee=new Map,Se=new l.ATNConfigSet;for(let de of Z){if(de.alt!==1)continue;let Pe=de.semanticContext.evalPrecedence(this._parser,ne);Pe!=null&&(Ee.set(de.state.stateNumber,de.context),Pe!==de.semanticContext?Se.add(de.transform(de.state,!1,Pe),se):Se.add(de,se))}for(let de of Z)if(de.alt!==1){if(!de.isPrecedenceFilterSuppressed){let Pe=Ee.get(de.state.stateNumber);if(Pe!=null&&Pe.equals(de.context))continue}Se.add(de,se)}return Se}getReachableTarget(Z,ne,se){if(ne.matches(se,0,this.atn.maxTokenType))return ne.target}predicateDFAState(Z,ne,se){let Ee=this.getConflictingAltsFromConfigSet(ne);if(!Ee)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");$t.debug&&console.log("predicateDFAState "+Z);let Se=this.getPredsForAmbigAlts(Ee,ne,se),de;return Se!=null&&(de=this.getPredicatePredictions(Ee,Se),Z.predicates=de),de}getPredsForAmbigAlts(Z,ne,se){let Ee=new Array(se+1),Se=Ee.length;for(let ze of ne)Z.get(ze.alt)&&(Ee[ze.alt]=he.SemanticContext.or(Ee[ze.alt],ze.semanticContext));let de=0;for(let ze=0;ze<Se;ze++)Ee[ze]==null?Ee[ze]=he.SemanticContext.NONE:Ee[ze]!==he.SemanticContext.NONE&&de++;let Pe=Ee;return de===0&&(Pe=void 0),$t.debug&&console.log("getPredsForAmbigAlts result "+(Pe?n.Arrays.toString(Pe):"undefined")),Pe}getPredicatePredictions(Z,ne){let se=[],Ee=!1;for(let Se=1;Se<ne.length;Se++){let de=ne[Se];Be(de!=null),Z!=null&&Z.get(Se)&&de===he.SemanticContext.NONE?se.push(new P.DFAState.PredPrediction(de,Se)):de!==he.SemanticContext.NONE&&(Ee=!0,se.push(new P.DFAState.PredPrediction(de,Se)))}if(!!Ee)return se}evalSemanticContext(Z,ne,se){let Ee=new g.BitSet;for(let Se of Z){if(Se.pred===he.SemanticContext.NONE){if(Ee.set(Se.alt),!se)break;continue}let de=this.evalSemanticContextImpl(Se.pred,ne,Se.alt);if(($t.debug||$t.dfa_debug)&&console.log("eval pred "+Se+"="+de),de&&(($t.debug||$t.dfa_debug)&&console.log("PREDICT "+Se.alt),Ee.set(Se.alt),!se))break}return Ee}evalSemanticContextImpl(Z,ne,se){return Z.eval(this._parser,ne)}closure(Z,ne,se,Ee,Se,de){Se==null&&(Se=W.PredictionContextCache.UNCACHED);let Pe=Z,ze=new s.Array2DHashSet(N.ObjectEqualityComparator.INSTANCE);for(;Pe.size>0;){let J=new l.ATNConfigSet;for(let Le of Pe)this.closureImpl(Le,ne,J,ze,se,Ee,Se,0,de);Pe=J}}closureImpl(Z,ne,se,Ee,Se,de,Pe,ze,J){if($t.debug&&console.log("closure("+Z.toString(this._parser,!0)+")"),Z.state instanceof re.RuleStopState)if(Z.context.isEmpty)if(de)$t.debug&&console.log("FALLING off rule "+this.getRuleName(Z.state.ruleIndex)),Z.context===O.PredictionContext.EMPTY_FULL?Z=Z.transform(Z.state,!1,O.PredictionContext.EMPTY_LOCAL):!Z.reachesIntoOuterContext&&O.PredictionContext.isEmptyLocal(Z.context)&&ne.add(Z,Pe);else{ne.add(Z,Pe);return}else{let F=Z.context.hasEmpty,U=Z.context.size-(F?1:0);for(let j=0;j<U;j++){let ee=Z.context.getParent(j),ce=this.atn.states[Z.context.getReturnState(j)],ye=a.ATNConfig.create(ce,Z.alt,ee,Z.semanticContext);ye.outerContextDepth=Z.outerContextDepth,ye.isPrecedenceFilterSuppressed=Z.isPrecedenceFilterSuppressed,Be(ze>dt),this.closureImpl(ye,ne,se,Ee,Se,de,Pe,ze-1,J)}if(!F||!de)return;Z=Z.transform(Z.state,!1,O.PredictionContext.EMPTY_LOCAL)}let Le=Z.state;Le.onlyHasEpsilonTransitions||(ne.add(Z,Pe),$t.debug&&console.log("added config "+ne));for(let F=0;F<Le.numberOfOptimizedTransitions;F++){if(F===0&&Le.stateType===d.ATNStateType.STAR_LOOP_ENTRY&&Le.precedenceRuleDecision&&!Z.context.hasEmpty){let ce=Le,ye=!0;for(let oe=0;oe<Z.context.size;oe++)if(!ce.precedenceLoopbackStates.get(Z.context.getReturnState(oe))){ye=!1;break}if(ye)continue}let U=Le.getOptimizedTransition(F),j=!(U instanceof i.ActionTransition)&&Se,ee=this.getEpsilonTarget(Z,U,j,ze===0,Pe,J);if(ee!=null){if(U instanceof fe.RuleTransition&&se!=null&&!Se){se.add(ee,Pe);continue}let ce=ze;if(Z.state instanceof re.RuleStopState){if(this.dfa!=null&&this.dfa.isPrecedenceDfa&&U.outermostPrecedenceReturn===this.dfa.atnStartState.ruleIndex&&(ee.isPrecedenceFilterSuppressed=!0),ee.outerContextDepth=ee.outerContextDepth+1,!Ee.add(ee))continue;Be(ce>dt),ce--,$t.debug&&console.log("dips into outer ctx: "+ee)}else if(U instanceof fe.RuleTransition)this.optimize_tail_calls&&U.optimizedTailCall&&(!this.tail_call_preserves_sll||!O.PredictionContext.isEmptyLocal(Z.context))?(Be(ee.context===Z.context),ce===0&&(ce--,!this.tail_call_preserves_sll&&O.PredictionContext.isEmptyLocal(Z.context)&&(ee.outerContextDepth=ee.outerContextDepth+1))):ce>=0&&ce++;else if(!U.isEpsilon&&!Ee.add(ee))continue;this.closureImpl(ee,ne,se,Ee,j,de,Pe,ce,J)}}}getRuleName(Z){return this._parser!=null&&Z>=0?this._parser.ruleNames[Z]:"<rule "+Z+">"}getEpsilonTarget(Z,ne,se,Ee,Se,de){switch(ne.serializationType){case 3:return this.ruleTransition(Z,ne,Se);case 10:return this.precedenceTransition(Z,ne,se,Ee);case 4:return this.predTransition(Z,ne,se,Ee);case 6:return this.actionTransition(Z,ne);case 1:return Z.transform(ne.target,!1);case 5:case 2:case 7:return de&&ne.matches(ut.Token.EOF,0,1)?Z.transform(ne.target,!1):void 0;default:return}}actionTransition(Z,ne){return $t.debug&&console.log("ACTION edge "+ne.ruleIndex+":"+ne.actionIndex),Z.transform(ne.target,!1)}precedenceTransition(Z,ne,se,Ee){$t.debug&&(console.log("PRED (collectPredicates="+se+") "+ne.precedence+">=_p, ctx dependent=true"),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let Se;if(se&&Ee){let de=he.SemanticContext.and(Z.semanticContext,ne.predicate);Se=Z.transform(ne.target,!1,de)}else Se=Z.transform(ne.target,!1);return $t.debug&&console.log("config from pred transition="+Se),Se}predTransition(Z,ne,se,Ee){$t.debug&&(console.log("PRED (collectPredicates="+se+") "+ne.ruleIndex+":"+ne.predIndex+", ctx dependent="+ne.isCtxDependent),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let Se;if(se&&(!ne.isCtxDependent||ne.isCtxDependent&&Ee)){let de=he.SemanticContext.and(Z.semanticContext,ne.predicate);Se=Z.transform(ne.target,!1,de)}else Se=Z.transform(ne.target,!1);return $t.debug&&console.log("config from pred transition="+Se),Se}ruleTransition(Z,ne,se){$t.debug&&console.log("CALL rule "+this.getRuleName(ne.target.ruleIndex)+", ctx="+Z.context);let Ee=ne.followState,Se;return this.optimize_tail_calls&&ne.optimizedTailCall&&(!this.tail_call_preserves_sll||!O.PredictionContext.isEmptyLocal(Z.context))?Se=Z.context:se!=null?Se=se.getChild(Z.context,Ee.stateNumber):Se=Z.context.getChild(Ee.stateNumber),Z.transform(ne.target,!1,Se)}isConflicted(Z,ne){if(Z.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER||Z.size<=1)return;let se=Z.toArray();se.sort($t.STATE_ALT_SORT_COMPARATOR);let Ee=!Z.dipsIntoOuterContext,Se=new g.BitSet,de=se[0].alt;Se.set(de);let Pe=se[0].state.nonStopStateNumber;for(let U of se){let j=U.state.nonStopStateNumber;if(j!==Pe){if(U.alt!==de)return;Pe=j}}let ze;if(Ee){Pe=se[0].state.nonStopStateNumber,ze=new g.BitSet;let U=de;for(let ee of se){if(ee.state.nonStopStateNumber!==Pe)break;let ce=ee.alt;ze.set(ce),U=ce}Pe=se[0].state.nonStopStateNumber;let j=de;for(let ee of se){let ce=ee.state.nonStopStateNumber,ye=ee.alt;if(ce!==Pe){if(j!==U){Ee=!1;break}Pe=ce,j=de}else if(ye!==j){if(ye!==ze.nextSetBit(j+1)){Ee=!1;break}j=ye}}}Pe=se[0].state.nonStopStateNumber;let J=0,Le=0,F=se[0].context;for(let U=1;U<se.length;U++){let j=se[U];if(j.alt!==de||j.state.nonStopStateNumber!==Pe)break;Le=U,F=ne.join(F,se[U].context)}for(let U=Le+1;U<se.length;U++){let j=se[U],ee=j.state;if(Se.set(j.alt),ee.nonStopStateNumber!==Pe){Pe=ee.nonStopStateNumber,J=U,Le=U,F=j.context;for(let we=J+1;we<se.length;we++){let Re=se[we];if(Re.alt!==de||Re.state.nonStopStateNumber!==Pe)break;Le=we,F=ne.join(F,Re.context)}U=Le;continue}let ce=j.context,ye=j.alt,oe=U;for(let we=oe+1;we<se.length;we++){let Re=se[we];if(Re.alt!==ye||Re.state.nonStopStateNumber!==Pe)break;oe=we,ce=ne.join(ce,Re.context)}U=oe;let ae=ne.join(F,ce);if(!F.equals(ae))return;Ee=Ee&&F.equals(ce)}return new x.ConflictInfo(Se,Ee)}getConflictingAltsFromConfigSet(Z){let ne=Z.conflictingAlts;return ne==null&&Z.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER&&(ne=new g.BitSet,ne.set(Z.uniqueAlt)),ne}getTokenName(Z){if(Z===ut.Token.EOF)return"EOF";let se=(this._parser!=null?this._parser.vocabulary:qe.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(Z);return se===String(Z)?se:se+"<"+Z+">"}getLookaheadName(Z){return this.getTokenName(Z.LA(1))}dumpDeadEndConfigs(Z){console.log("dead end configs: ");let ne=Z.deadEndConfigs;if(!!ne)for(let se of ne){let Ee="no edges";if(se.state.numberOfOptimizedTransitions>0){let Se=se.state.getOptimizedTransition(0);Se instanceof f.AtomTransition?Ee="Atom "+this.getTokenName(Se._label):Se instanceof Oe.SetTransition&&(Ee=(Se instanceof I.NotSetTransition?"~":"")+"Set "+Se.set.toString())}console.log(se.toString(this._parser,!0)+":"+Ee)}}noViableAlt(Z,ne,se,Ee){return new H.NoViableAltException(this._parser,Z,Z.get(Ee),Z.LT(1),se,ne)}getUniqueAlt(Z){let ne=o.ATN.INVALID_ALT_NUMBER;for(let se of Z)if(ne===o.ATN.INVALID_ALT_NUMBER)ne=se.alt;else if(se.alt!==ne)return o.ATN.INVALID_ALT_NUMBER;return ne}configWithAltAtStopState(Z,ne){for(let se of Z)if(se.alt===ne&&se.state instanceof re.RuleStopState)return!0;return!1}addDFAEdge(Z,ne,se,Ee,Se,de){Be(Ee==null||Ee.isEmpty||Z.isContextSensitive);let Pe=ne,ze=this.addDFAState(Z,Se,de);if(Ee!=null)for(let J of Ee.toArray()){if(J===O.PredictionContext.EMPTY_FULL_STATE_KEY&&Pe.configs.isOutermostConfigSet)continue;Pe.setContextSensitive(this.atn),Pe.setContextSymbol(se);let Le=Pe.getContextTarget(J);if(Le!=null){Pe=Le;continue}Le=this.addDFAContextState(Z,Pe.configs,J,de),Be(J!==O.PredictionContext.EMPTY_FULL_STATE_KEY||Le.configs.isOutermostConfigSet),Pe.setContextTarget(J,Le),Pe=Le}return $t.debug&&console.log("EDGE "+Pe+" -> "+ze+" upon "+this.getTokenName(se)),this.setDFAEdge(Pe,se,ze),$t.debug&&console.log(`DFA=
`+Z.toString(this._parser!=null?this._parser.vocabulary:qe.VocabularyImpl.EMPTY_VOCABULARY,this._parser!=null?this._parser.ruleNames:void 0)),ze}setDFAEdge(Z,ne,se){Z!=null&&Z.setTarget(ne,se)}addDFAContextState(Z,ne,se,Ee){if(se!==O.PredictionContext.EMPTY_FULL_STATE_KEY){let Se=new l.ATNConfigSet;for(let de of ne)Se.add(de.appendContext(se,Ee));return this.addDFAState(Z,Se,Ee)}else return Be(!ne.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),ne=ne.clone(!0),ne.isOutermostConfigSet=!0,this.addDFAState(Z,ne,Ee)}addDFAState(Z,ne,se){let Ee=this.enable_global_context_dfa||!ne.isOutermostConfigSet;if(Ee){ne.isReadOnly||ne.optimizeConfigs(this);let J=this.createDFAState(Z,ne),Le=Z.states.get(J);if(Le!=null)return Le}ne.isReadOnly||ne.conflictInfo==null&&(ne.conflictInfo=this.isConflicted(ne,se));let Se=this.createDFAState(Z,ne.clone(!0)),de=this.atn.getDecisionState(Z.decision),Pe=this.getUniqueAlt(ne);if(Pe!==o.ATN.INVALID_ALT_NUMBER)Se.acceptStateInfo=new t.AcceptStateInfo(Pe);else if(ne.conflictingAlts!=null){let J=ne.conflictingAlts;J&&(Se.acceptStateInfo=new t.AcceptStateInfo(J.nextSetBit(0)))}if(Se.isAcceptState&&ne.hasSemanticContext&&this.predicateDFAState(Se,ne,de.numberOfTransitions),!Ee)return Se;let ze=Z.addState(Se);return $t.debug&&ze===Se&&console.log("adding new DFA state: "+Se),ze}createDFAState(Z,ne){return new P.DFAState(ne)}reportAttemptingFullContext(Z,ne,se,Ee,Se){if($t.debug||$t.retry_debug){let de=R.Interval.of(Ee,Se);console.log("reportAttemptingFullContext decision="+Z.decision+":"+se.s0.configs+", input="+this._parser.inputStream.getText(de))}if(this._parser!=null){let de=this._parser.getErrorListenerDispatch();de.reportAttemptingFullContext&&de.reportAttemptingFullContext(this._parser,Z,Ee,Se,ne,se)}}reportContextSensitivity(Z,ne,se,Ee,Se){if($t.debug||$t.retry_debug){let de=R.Interval.of(Ee,Se);console.log("reportContextSensitivity decision="+Z.decision+":"+se.s0.configs+", input="+this._parser.inputStream.getText(de))}if(this._parser!=null){let de=this._parser.getErrorListenerDispatch();de.reportContextSensitivity&&de.reportContextSensitivity(this._parser,Z,Ee,Se,ne,se)}}reportAmbiguity(Z,ne,se,Ee,Se,de,Pe){if($t.debug||$t.retry_debug){let ze=R.Interval.of(se,Ee);console.log("reportAmbiguity "+de+":"+Pe+", input="+this._parser.inputStream.getText(ze))}if(this._parser!=null){let ze=this._parser.getErrorListenerDispatch();ze.reportAmbiguity&&ze.reportAmbiguity(this._parser,Z,se,Ee,Se,de,Pe)}}getReturnState(Z){return Z.isEmpty?O.PredictionContext.EMPTY_FULL_STATE_KEY:this.atn.states[Z.invokingState].transition(0).followState.stateNumber}skipTailCalls(Z){if(!this.optimize_tail_calls)return Z;for(;!Z.isEmpty;){let ne=this.atn.states[Z.invokingState];if(Be(ne.numberOfTransitions===1&&ne.transition(0).serializationType===3),!ne.transition(0).tailCall)break;Z=Z.parent}return Z}get parser(){return this._parser}};return rt.debug=!1,rt.dfa_debug=!1,rt.retry_debug=!1,rt.STATE_ALT_SORT_COMPARATOR=(bt,Z)=>{let ne=bt.state.nonStopStateNumber-Z.state.nonStopStateNumber;return ne!==0||(ne=bt.alt-Z.alt,ne!==0)?ne:0},r([C.NotNull],rt.prototype,"predictionMode",void 0),r([C.NotNull],rt.prototype,"getPredictionMode",null),r([e(0,C.NotNull)],rt.prototype,"setPredictionMode",null),r([C.Override],rt.prototype,"reset",null),r([e(0,C.NotNull)],rt.prototype,"adaptivePredict",null),r([e(0,C.NotNull),e(1,C.NotNull),e(2,C.NotNull)],rt.prototype,"getStartState",null),r([e(0,C.NotNull),e(1,C.NotNull),e(3,C.NotNull)],rt.prototype,"execDFA",null),r([e(0,C.NotNull),e(1,C.NotNull),e(3,C.NotNull)],rt.prototype,"execATN",null),r([e(0,C.NotNull),e(2,C.NotNull)],rt.prototype,"handleNoViableAlt",null),r([e(0,C.NotNull)],rt.prototype,"getExistingTargetState",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"computeTargetState",null),r([C.NotNull,e(0,C.NotNull)],rt.prototype,"removeAllConfigsNotInRuleStopState",null),r([C.NotNull],rt.prototype,"computeStartState",null),r([C.NotNull,e(0,C.NotNull)],rt.prototype,"applyPrecedenceFilter",null),r([e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"getReachableTarget",null),r([e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"getPredsForAmbigAlts",null),r([e(0,C.NotNull)],rt.prototype,"evalSemanticContext",null),r([e(0,C.NotNull)],rt.prototype,"evalSemanticContextImpl",null),r([e(1,C.NotNull),e(4,C.Nullable)],rt.prototype,"closure",null),r([e(0,C.NotNull),e(1,C.NotNull),e(2,C.Nullable),e(3,C.NotNull),e(6,C.NotNull)],rt.prototype,"closureImpl",null),r([C.NotNull],rt.prototype,"getRuleName",null),r([e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"getEpsilonTarget",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"actionTransition",null),r([C.Nullable,e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"precedenceTransition",null),r([C.Nullable,e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"predTransition",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull),e(2,C.Nullable)],rt.prototype,"ruleTransition",null),r([e(0,C.NotNull)],rt.prototype,"isConflicted",null),r([C.NotNull],rt.prototype,"getTokenName",null),r([e(0,C.NotNull)],rt.prototype,"dumpDeadEndConfigs",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull),e(2,C.NotNull)],rt.prototype,"noViableAlt",null),r([e(0,C.NotNull)],rt.prototype,"getUniqueAlt",null),r([e(0,C.NotNull)],rt.prototype,"configWithAltAtStopState",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull),e(4,C.NotNull)],rt.prototype,"addDFAEdge",null),r([e(0,C.Nullable),e(2,C.Nullable)],rt.prototype,"setDFAEdge",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"addDFAContextState",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"addDFAState",null),r([C.NotNull,e(0,C.NotNull),e(1,C.NotNull)],rt.prototype,"createDFAState",null),r([e(0,C.NotNull),e(2,C.NotNull)],rt.prototype,"reportAttemptingFullContext",null),r([e(0,C.NotNull),e(2,C.NotNull)],rt.prototype,"reportContextSensitivity",null),r([e(0,C.NotNull),e(5,C.NotNull),e(6,C.NotNull)],rt.prototype,"reportAmbiguity",null),rt=r([e(0,C.NotNull)],rt),A_.ParserATNSimulator=rt,A_}var L1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Gz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(L1,"__esModule",{value:!0});L1.PlusBlockStartState=void 0;const Hz=zi,zz=Rh,jz=Ke;class oI extends zz.BlockStartState{get stateType(){return Hz.ATNStateType.PLUS_BLOCK_START}}Gz([jz.Override],oI.prototype,"stateType",null);L1.PlusBlockStartState=oI;var U1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Vz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(U1,"__esModule",{value:!0});U1.PlusLoopbackState=void 0;const Wz=zi,$z=Da,Kz=Ke;class aI extends $z.DecisionState{get stateType(){return Wz.ATNStateType.PLUS_LOOP_BACK}}Vz([Kz.Override],aI.prototype,"stateType",null);U1.PlusLoopbackState=aI;var G1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var wg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Xz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(G1,"__esModule",{value:!0});G1.PrecedencePredicateTransition=void 0;const Yz=bf,Ag=Ke,qz=vh;let lh=class extends Yz.AbstractPredicateTransition{constructor(e,t){super(e),this.precedence=t}get serializationType(){return 10}get isEpsilon(){return!0}matches(e,t,i){return!1}get predicate(){return new qz.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};wg([Ag.Override],lh.prototype,"serializationType",null);wg([Ag.Override],lh.prototype,"isEpsilon",null);wg([Ag.Override],lh.prototype,"matches",null);wg([Ag.Override],lh.prototype,"toString",null);lh=wg([Xz(0,Ag.NotNull)],lh);G1.PrecedencePredicateTransition=lh;var H1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var bg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Qz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(H1,"__esModule",{value:!0});H1.RangeTransition=void 0;const Jz=Ph(),uh=Ke,Zz=Oo;let ch=class extends Zz.Transition{constructor(e,t,i){super(e),this.from=t,this.to=i}get serializationType(){return 2}get label(){return Jz.IntervalSet.of(this.from,this.to)}matches(e,t,i){return e>=this.from&&e<=this.to}toString(){return"'"+String.fromCodePoint(this.from)+"'..'"+String.fromCodePoint(this.to)+"'"}};bg([uh.Override],ch.prototype,"serializationType",null);bg([uh.Override,uh.NotNull],ch.prototype,"label",null);bg([uh.Override],ch.prototype,"matches",null);bg([uh.Override,uh.NotNull],ch.prototype,"toString",null);ch=bg([Qz(0,uh.NotNull)],ch);H1.RangeTransition=ch;var z1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ej=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(z1,"__esModule",{value:!0});z1.RuleStartState=void 0;const tj=Pa,rj=zi,ij=Ke;class lI extends tj.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return rj.ATNStateType.RULE_START}}ej([ij.Override],lI.prototype,"stateType",null);z1.RuleStartState=lI;var j1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var nj=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(j1,"__esModule",{value:!0});j1.StarBlockStartState=void 0;const sj=zi,oj=Rh,aj=Ke;class uI extends oj.BlockStartState{get stateType(){return sj.ATNStateType.STAR_BLOCK_START}}nj([aj.Override],uI.prototype,"stateType",null);j1.StarBlockStartState=uI;var V1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var lj=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(V1,"__esModule",{value:!0});V1.StarLoopbackState=void 0;const uj=Pa,cj=zi,hj=Ke;class cI extends uj.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return cj.ATNStateType.STAR_LOOP_BACK}}lj([hj.Override],cI.prototype,"stateType",null);V1.StarLoopbackState=cI;var W1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var dj=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(W1,"__esModule",{value:!0});W1.TokensStartState=void 0;const fj=zi,_j=Da,pj=Ke;class hI extends _j.DecisionState{get stateType(){return fj.ATNStateType.TOKEN_START}}dj([pj.Override],hI.prototype,"stateType",null);W1.TokensStartState=hI;var $1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty($1,"__esModule",{value:!0});$1.UUID=void 0;const gj=ti;class fy{constructor(e,t,i,s){this.data=new Uint32Array(4),this.data[0]=e,this.data[1]=t,this.data[2]=i,this.data[3]=s}static fromString(e){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(e))throw new Error("Incorrectly formatted UUID");let t=e.split("-"),i=parseInt(t[0],16),s=(parseInt(t[1],16)<<16>>>0)+parseInt(t[2],16),n=(parseInt(t[3],16)<<16>>>0)+parseInt(t[4].substr(0,4),16),o=parseInt(t[4].substr(-8),16);return new fy(i,s,n,o)}hashCode(){return gj.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(e){return e===this?!0:e instanceof fy?this.data[0]===e.data[0]&&this.data[1]===e.data[1]&&this.data[2]===e.data[2]&&this.data[3]===e.data[3]:!1}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}}$1.UUID=fy;var PR;function Cb(){if(PR)return S_;PR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(Le,F,U,j){var ee=arguments.length,ce=ee<3?F:j===null?j=Object.getOwnPropertyDescriptor(F,U):j,ye;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(Le,F,U,j);else for(var oe=Le.length-1;oe>=0;oe--)(ye=Le[oe])&&(ce=(ee<3?ye(ce):ee>3?ye(F,U,ce):ye(F,U))||ce);return ee>3&&ce&&Object.defineProperty(F,U,ce),ce},e=$&&$.__param||function(Le,F){return function(U,j){F(U,j,Le)}};Object.defineProperty(S_,"__esModule",{value:!0}),S_.ATNDeserializer=void 0;const t=fg,i=No,s=Oa(),n=dg,o=zi,a=gg,l=R1,u=ug,d=Fo,f=D1,g=Rh,x=Da,E=z3(),P=C1,b=Ph(),R=lg,D=O1,C=N1,I=I1,H=q3,N=Q3,V=F1,O=J3,W=M1,q=vg,re=Ke,fe=kb(),he=Sg(),Oe=L1,He=U1,ut=G1,qe=rg,Be=H1,nt=z1,dt=Fu,rt=Rf,bt=bb(),Z=j1,ne=V1,se=Pf,Ee=dr,Se=W1,de=$1,Pe=hg;var ze;(function(Le){Le[Le.UNICODE_BMP=0]="UNICODE_BMP",Le[Le.UNICODE_SMP=1]="UNICODE_SMP"})(ze||(ze={}));class J{constructor(F){F===void 0&&(F=n.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=F}static get SERIALIZED_VERSION(){return 3}static isFeatureSupported(F,U){let j=J.SUPPORTED_UUIDS.findIndex(ee=>ee.equals(F));return j<0?!1:J.SUPPORTED_UUIDS.findIndex(ee=>ee.equals(U))>=j}static getUnicodeDeserializer(F){return F===0?{readUnicode:(U,j)=>J.toInt(U[j]),size:1}:{readUnicode:(U,j)=>J.toInt32(U,j),size:2}}deserialize(F){F=F.slice(0);for(let Ie=1;Ie<F.length;Ie++)F[Ie]=F[Ie]-2&65535;let U=0,j=J.toInt(F[U++]);if(j!==J.SERIALIZED_VERSION){let Ie=`Could not deserialize ATN with version ${j} (expected ${J.SERIALIZED_VERSION}).`;throw new Error(Ie)}let ee=J.toUUID(F,U);if(U+=8,J.SUPPORTED_UUIDS.findIndex(Ie=>Ie.equals(ee))<0){let Ie=`Could not deserialize ATN with UUID ${ee} (expected ${J.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(Ie)}let ce=J.isFeatureSupported(J.ADDED_LEXER_ACTIONS,ee),ye=J.toInt(F[U++]),oe=J.toInt(F[U++]),ae=new s.ATN(ye,oe),we=[],Re=[],Xe=J.toInt(F[U++]);for(let Ie=0;Ie<Xe;Ie++){let gt=J.toInt(F[U++]);if(gt===o.ATNStateType.INVALID_TYPE){ae.addState(new R.InvalidState);continue}let mt=J.toInt(F[U++]);mt===65535&&(mt=-1);let Et=this.stateFactory(gt,mt);if(gt===o.ATNStateType.LOOP_END){let zt=J.toInt(F[U++]);we.push([Et,zt])}else if(Et instanceof g.BlockStartState){let zt=J.toInt(F[U++]);Re.push([Et,zt])}ae.addState(Et)}for(let Ie of we)Ie[0].loopBackState=ae.states[Ie[1]];for(let Ie of Re)Ie[0].endState=ae.states[Ie[1]];let We=J.toInt(F[U++]);for(let Ie=0;Ie<We;Ie++){let gt=J.toInt(F[U++]);ae.states[gt].nonGreedy=!0}let Qe=J.toInt(F[U++]);for(let Ie=0;Ie<Qe;Ie++){let gt=J.toInt(F[U++]);ae.states[gt].sll=!0}let $e=J.toInt(F[U++]);for(let Ie=0;Ie<$e;Ie++){let gt=J.toInt(F[U++]);ae.states[gt].isPrecedenceRule=!0}let tt=J.toInt(F[U++]);ae.grammarType===0&&(ae.ruleToTokenType=new Int32Array(tt)),ae.ruleToStartState=new Array(tt);for(let Ie=0;Ie<tt;Ie++){let gt=J.toInt(F[U++]),mt=ae.states[gt];if(mt.leftFactored=J.toInt(F[U++])!==0,ae.ruleToStartState[Ie]=mt,ae.grammarType===0){let Et=J.toInt(F[U++]);Et===65535&&(Et=Ee.Token.EOF),ae.ruleToTokenType[Ie]=Et,J.isFeatureSupported(J.ADDED_LEXER_ACTIONS,ee)||J.toInt(F[U++])}}ae.ruleToStopState=new Array(tt);for(let Ie of ae.states)Ie instanceof dt.RuleStopState&&(ae.ruleToStopState[Ie.ruleIndex]=Ie,ae.ruleToStartState[Ie.ruleIndex].stopState=Ie);let _t=J.toInt(F[U++]);for(let Ie=0;Ie<_t;Ie++){let gt=J.toInt(F[U++]);ae.modeToStartState.push(ae.states[gt])}ae.modeToDFA=new Array(_t);for(let Ie=0;Ie<_t;Ie++)ae.modeToDFA[Ie]=new E.DFA(ae.modeToStartState[Ie]);let it=[];U=this.deserializeSets(F,U,it,J.getUnicodeDeserializer(0)),J.isFeatureSupported(J.ADDED_UNICODE_SMP,ee)&&(U=this.deserializeSets(F,U,it,J.getUnicodeDeserializer(1)));let St=J.toInt(F[U++]);for(let Ie=0;Ie<St;Ie++){let gt=J.toInt(F[U]),mt=J.toInt(F[U+1]),Et=J.toInt(F[U+2]),zt=J.toInt(F[U+3]),ai=J.toInt(F[U+4]),Er=J.toInt(F[U+5]),mr=this.edgeFactory(ae,Et,gt,mt,zt,ai,Er,it);ae.states[gt].addTransition(mr),U+=6}let Ot=new i.Array2DHashSet({hashCode:Ie=>Ie.stopState^Ie.returnState^Ie.outermostPrecedenceReturn,equals:(Ie,gt)=>Ie.stopState===gt.stopState&&Ie.returnState===gt.returnState&&Ie.outermostPrecedenceReturn===gt.outermostPrecedenceReturn}),Rt=[];for(let Ie of ae.states){let gt=Ie.ruleIndex>=0&&ae.ruleToStartState[Ie.ruleIndex].leftFactored;for(let mt=0;mt<Ie.numberOfTransitions;mt++){let Et=Ie.transition(mt);if(!(Et instanceof rt.RuleTransition))continue;let zt=Et;if(!ae.ruleToStartState[zt.target.ruleIndex].leftFactored&&gt)continue;let Er=-1;ae.ruleToStartState[zt.target.ruleIndex].isPrecedenceRule&&zt.precedence===0&&(Er=zt.target.ruleIndex);let mr={stopState:zt.target.ruleIndex,returnState:zt.followState.stateNumber,outermostPrecedenceReturn:Er};Ot.add(mr)&&Rt.push(mr)}}for(let Ie of Rt){let gt=new P.EpsilonTransition(ae.states[Ie.returnState],Ie.outermostPrecedenceReturn);ae.ruleToStopState[Ie.stopState].addTransition(gt)}for(let Ie of ae.states){if(Ie instanceof g.BlockStartState){if(Ie.endState===void 0)throw new Error("IllegalStateException");if(Ie.endState.startState!==void 0)throw new Error("IllegalStateException");Ie.endState.startState=Ie}if(Ie instanceof He.PlusLoopbackState){let gt=Ie;for(let mt=0;mt<gt.numberOfTransitions;mt++){let Et=gt.transition(mt).target;Et instanceof Oe.PlusBlockStartState&&(Et.loopBackState=gt)}}else if(Ie instanceof ne.StarLoopbackState){let gt=Ie;for(let mt=0;mt<gt.numberOfTransitions;mt++){let Et=gt.transition(mt).target;Et instanceof se.StarLoopEntryState&&(Et.loopBackState=gt)}}}let Mt=J.toInt(F[U++]);for(let Ie=1;Ie<=Mt;Ie++){let gt=J.toInt(F[U++]),mt=ae.states[gt];ae.decisionToState.push(mt),mt.decision=Ie-1}if(ae.grammarType===0)if(ce){ae.lexerActions=new Array(J.toInt(F[U++]));for(let Ie=0;Ie<ae.lexerActions.length;Ie++){let gt=J.toInt(F[U++]),mt=J.toInt(F[U++]);mt===65535&&(mt=-1);let Et=J.toInt(F[U++]);Et===65535&&(Et=-1);let zt=this.lexerActionFactory(gt,mt,Et);ae.lexerActions[Ie]=zt}}else{let Ie=[];for(let gt of ae.states)for(let mt=0;mt<gt.numberOfTransitions;mt++){let Et=gt.transition(mt);if(!(Et instanceof t.ActionTransition))continue;let zt=Et.ruleIndex,ai=Et.actionIndex,Er=new C.LexerCustomAction(zt,ai);gt.setTransition(mt,new t.ActionTransition(Et.target,zt,Ie.length,!1)),Ie.push(Er)}ae.lexerActions=Ie}this.markPrecedenceDecisions(ae),ae.decisionToDFA=new Array(Mt);for(let Ie=0;Ie<Mt;Ie++)ae.decisionToDFA[Ie]=new E.DFA(ae.decisionToState[Ie],Ie);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(ae),this.deserializationOptions.isGenerateRuleBypassTransitions&&ae.grammarType===1){ae.ruleToTokenType=new Int32Array(ae.ruleToStartState.length);for(let Ie=0;Ie<ae.ruleToStartState.length;Ie++)ae.ruleToTokenType[Ie]=ae.maxTokenType+Ie+1;for(let Ie=0;Ie<ae.ruleToStartState.length;Ie++){let gt=new l.BasicBlockStartState;gt.ruleIndex=Ie,ae.addState(gt);let mt=new f.BlockEndState;mt.ruleIndex=Ie,ae.addState(mt),gt.endState=mt,ae.defineDecisionState(gt),mt.startState=gt;let Et,zt;if(ae.ruleToStartState[Ie].isPrecedenceRule){Et=void 0;for(let Er of ae.states){if(Er.ruleIndex!==Ie||!(Er instanceof se.StarLoopEntryState))continue;let mr=Er.transition(Er.numberOfTransitions-1).target;if(mr instanceof q.LoopEndState&&mr.epsilonOnlyTransitions&&mr.transition(0).target instanceof dt.RuleStopState){Et=Er;break}}if(!Et)throw new Error("Couldn't identify final state of the precedence rule prefix section.");zt=Et.loopBackState.transition(0)}else Et=ae.ruleToStopState[Ie];for(let Er of ae.states)for(let mr=0;mr<Er.numberOfTransitions;mr++){let xi=Er.transition(mr);xi!==zt&&xi.target===Et&&(xi.target=mt)}for(;ae.ruleToStartState[Ie].numberOfTransitions>0;){let Er=ae.ruleToStartState[Ie].removeTransition(ae.ruleToStartState[Ie].numberOfTransitions-1);gt.addTransition(Er)}ae.ruleToStartState[Ie].addTransition(new P.EpsilonTransition(gt)),mt.addTransition(new P.EpsilonTransition(Et));let ai=new u.BasicState;ae.addState(ai),ai.addTransition(new a.AtomTransition(mt,ae.ruleToTokenType[Ie])),gt.addTransition(new P.EpsilonTransition(ai))}this.deserializationOptions.isVerifyATN&&this.verifyATN(ae)}if(this.deserializationOptions.isOptimize){for(;;){let Ie=0;Ie+=J.inlineSetRules(ae),Ie+=J.combineChainedEpsilons(ae);let gt=ae.grammarType===0;if(Ie+=J.optimizeSets(ae,gt),Ie===0)break}this.deserializationOptions.isVerifyATN&&this.verifyATN(ae)}return J.identifyTailCalls(ae),ae}deserializeSets(F,U,j,ee){let ce=J.toInt(F[U++]);for(let ye=0;ye<ce;ye++){let oe=J.toInt(F[U]);U++;let ae=new b.IntervalSet;j.push(ae),J.toInt(F[U++])!==0&&ae.add(-1);for(let Re=0;Re<oe;Re++){let Xe=ee.readUnicode(F,U);U+=ee.size;let We=ee.readUnicode(F,U);U+=ee.size,ae.add(Xe,We)}}return U}markPrecedenceDecisions(F){let U=new Map;for(let j of F.states)if(j instanceof se.StarLoopEntryState&&F.ruleToStartState[j.ruleIndex].isPrecedenceRule){let ee=j.transition(j.numberOfTransitions-1).target;ee instanceof q.LoopEndState&&ee.epsilonOnlyTransitions&&ee.transition(0).target instanceof dt.RuleStopState&&(U.set(j.ruleIndex,j),j.precedenceRuleDecision=!0,j.precedenceLoopbackStates=new d.BitSet(F.states.length))}for(let j of U)for(let ee of F.ruleToStopState[j[0]].getTransitions())ee.serializationType!==1||ee.outermostPrecedenceReturn!==-1||j[1].precedenceLoopbackStates.set(ee.target.stateNumber)}verifyATN(F){for(let U of F.states)if(this.checkCondition(U!==void 0,"ATN states should not be undefined."),U.stateType!==o.ATNStateType.INVALID_TYPE){if(this.checkCondition(U.onlyHasEpsilonTransitions||U.numberOfTransitions<=1),U instanceof Oe.PlusBlockStartState&&this.checkCondition(U.loopBackState!==void 0),U instanceof se.StarLoopEntryState){let j=U;if(this.checkCondition(j.loopBackState!==void 0),this.checkCondition(j.numberOfTransitions===2),j.transition(0).target instanceof Z.StarBlockStartState)this.checkCondition(j.transition(1).target instanceof q.LoopEndState),this.checkCondition(!j.nonGreedy);else if(j.transition(0).target instanceof q.LoopEndState)this.checkCondition(j.transition(1).target instanceof Z.StarBlockStartState),this.checkCondition(j.nonGreedy);else throw new Error("IllegalStateException")}if(U instanceof ne.StarLoopbackState&&(this.checkCondition(U.numberOfTransitions===1),this.checkCondition(U.transition(0).target instanceof se.StarLoopEntryState)),U instanceof q.LoopEndState&&this.checkCondition(U.loopBackState!==void 0),U instanceof nt.RuleStartState&&this.checkCondition(U.stopState!==void 0),U instanceof g.BlockStartState&&this.checkCondition(U.endState!==void 0),U instanceof f.BlockEndState&&this.checkCondition(U.startState!==void 0),U instanceof x.DecisionState){let j=U;this.checkCondition(j.numberOfTransitions<=1||j.decision>=0)}else this.checkCondition(U.numberOfTransitions<=1||U instanceof dt.RuleStopState)}}checkCondition(F,U){if(!F)throw new Error("IllegalStateException: "+U)}static inlineSetRules(F){let U=0,j=new Array(F.ruleToStartState.length);for(let ee=0;ee<F.ruleToStartState.length;ee++){let ye=F.ruleToStartState[ee];for(;ye.onlyHasEpsilonTransitions&&ye.numberOfOptimizedTransitions===1&&ye.getOptimizedTransition(0).serializationType===1;)ye=ye.getOptimizedTransition(0).target;if(ye.numberOfOptimizedTransitions!==1)continue;let oe=ye.getOptimizedTransition(0),ae=oe.target;if(!(oe.isEpsilon||!ae.onlyHasEpsilonTransitions||ae.numberOfOptimizedTransitions!==1||!(ae.getOptimizedTransition(0).target instanceof dt.RuleStopState)))switch(oe.serializationType){case 5:case 2:case 7:j[ee]=oe;break;case 8:case 9:continue;default:continue}}for(let ee of F.states){if(ee.ruleIndex<0)continue;let ce;for(let ye=0;ye<ee.numberOfOptimizedTransitions;ye++){let oe=ee.getOptimizedTransition(ye);if(!(oe instanceof rt.RuleTransition)){ce!==void 0&&ce.push(oe);continue}let ae=oe,we=j[ae.target.ruleIndex];if(we===void 0){ce!==void 0&&ce.push(oe);continue}if(ce===void 0){ce=[];for(let We=0;We<ye;We++)ce.push(ee.getOptimizedTransition(ye))}U++;let Re=ae.followState,Xe=new u.BasicState;switch(Xe.setRuleIndex(Re.ruleIndex),F.addState(Xe),ce.push(new P.EpsilonTransition(Xe)),we.serializationType){case 5:Xe.addTransition(new a.AtomTransition(Re,we._label));break;case 2:Xe.addTransition(new Be.RangeTransition(Re,we.from,we.to));break;case 7:Xe.addTransition(new bt.SetTransition(Re,we.label));break;default:throw new Error("UnsupportedOperationException")}}if(ce!==void 0){if(ee.isOptimized)for(;ee.numberOfOptimizedTransitions>0;)ee.removeOptimizedTransition(ee.numberOfOptimizedTransitions-1);for(let ye of ce)ee.addOptimizedTransition(ye)}}return he.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+U+" rule invocations by inlining sets."),U}static combineChainedEpsilons(F){let U=0;for(let j of F.states){if(!j.onlyHasEpsilonTransitions||j instanceof dt.RuleStopState)continue;let ee;e:for(let ce=0;ce<j.numberOfOptimizedTransitions;ce++){let ye=j.getOptimizedTransition(ce),oe=ye.target;if(ye.serializationType!==1||ye.outermostPrecedenceReturn!==-1||oe.stateType!==o.ATNStateType.BASIC||!oe.onlyHasEpsilonTransitions){ee!==void 0&&ee.push(ye);continue e}for(let ae=0;ae<oe.numberOfOptimizedTransitions;ae++)if(oe.getOptimizedTransition(ae).serializationType!==1||oe.getOptimizedTransition(ae).outermostPrecedenceReturn!==-1){ee!==void 0&&ee.push(ye);continue e}if(U++,ee===void 0){ee=[];for(let ae=0;ae<ce;ae++)ee.push(j.getOptimizedTransition(ae))}for(let ae=0;ae<oe.numberOfOptimizedTransitions;ae++){let we=oe.getOptimizedTransition(ae).target;ee.push(new P.EpsilonTransition(we))}}if(ee!==void 0){if(j.isOptimized)for(;j.numberOfOptimizedTransitions>0;)j.removeOptimizedTransition(j.numberOfOptimizedTransitions-1);for(let ce of ee)j.addOptimizedTransition(ce)}}return he.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+U+" transitions by combining chained epsilon transitions."),U}static optimizeSets(F,U){if(U)return 0;let j=0,ee=F.decisionToState;for(let ce of ee){let ye=new b.IntervalSet;for(let We=0;We<ce.numberOfOptimizedTransitions;We++){let Qe=ce.getOptimizedTransition(We);if(!(Qe instanceof P.EpsilonTransition)||Qe.target.numberOfOptimizedTransitions!==1)continue;let $e=Qe.target.getOptimizedTransition(0);$e.target instanceof f.BlockEndState&&($e instanceof fe.NotSetTransition||($e instanceof a.AtomTransition||$e instanceof Be.RangeTransition||$e instanceof bt.SetTransition)&&ye.add(We))}if(ye.size<=1)continue;let oe=[];for(let We=0;We<ce.numberOfOptimizedTransitions;We++)ye.contains(We)||oe.push(ce.getOptimizedTransition(We));let ae=ce.getOptimizedTransition(ye.minElement).target.getOptimizedTransition(0).target,we=new b.IntervalSet;for(let We of ye.intervals)for(let Qe=We.a;Qe<=We.b;Qe++){let $e=ce.getOptimizedTransition(Qe).target.getOptimizedTransition(0);if($e instanceof fe.NotSetTransition)throw new Error("Not yet implemented.");we.addAll($e.label)}let Re;if(we.intervals.length===1)if(we.size===1)Re=new a.AtomTransition(ae,we.minElement);else{let We=we.intervals[0];Re=new Be.RangeTransition(ae,We.a,We.b)}else Re=new bt.SetTransition(ae,we);let Xe=new u.BasicState;if(Xe.setRuleIndex(ce.ruleIndex),F.addState(Xe),Xe.addTransition(Re),oe.push(new P.EpsilonTransition(Xe)),j+=ce.numberOfOptimizedTransitions-oe.length,ce.isOptimized)for(;ce.numberOfOptimizedTransitions>0;)ce.removeOptimizedTransition(ce.numberOfOptimizedTransitions-1);for(let We of oe)ce.addOptimizedTransition(We)}return he.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+j+" paths by collapsing sets."),j}static identifyTailCalls(F){for(let U of F.states){for(let j=0;j<U.numberOfTransitions;j++){let ee=U.transition(j);ee instanceof rt.RuleTransition&&(ee.tailCall=this.testTailCall(F,ee,!1),ee.optimizedTailCall=this.testTailCall(F,ee,!0))}if(!!U.isOptimized)for(let j=0;j<U.numberOfOptimizedTransitions;j++){let ee=U.getOptimizedTransition(j);ee instanceof rt.RuleTransition&&(ee.tailCall=this.testTailCall(F,ee,!1),ee.optimizedTailCall=this.testTailCall(F,ee,!0))}}}static testTailCall(F,U,j){if(!j&&U.tailCall||j&&U.optimizedTailCall)return!0;let ee=new d.BitSet(F.states.length),ce=[];for(ce.push(U.followState);;){let ye=ce.pop();if(!ye)break;if(ee.get(ye.stateNumber)||ye instanceof dt.RuleStopState)continue;if(!ye.onlyHasEpsilonTransitions)return!1;let oe=j?ye.numberOfOptimizedTransitions:ye.numberOfTransitions;for(let ae=0;ae<oe;ae++){let we=j?ye.getOptimizedTransition(ae):ye.transition(ae);if(we.serializationType!==1)return!1;ce.push(we.target)}}return!0}static toInt(F){return F}static toInt32(F,U){return(F[U]|F[U+1]<<16)>>>0}static toUUID(F,U){let j=J.toInt32(F,U),ee=J.toInt32(F,U+2),ce=J.toInt32(F,U+4),ye=J.toInt32(F,U+6);return new de.UUID(ye,ce,ee,j)}edgeFactory(F,U,j,ee,ce,ye,oe,ae){let we=F.states[ee];switch(U){case 1:return new P.EpsilonTransition(we);case 2:return oe!==0?new Be.RangeTransition(we,Ee.Token.EOF,ye):new Be.RangeTransition(we,ce,ye);case 3:return new rt.RuleTransition(F.states[ce],ye,oe,we);case 4:return new qe.PredicateTransition(we,ce,ye,oe!==0);case 10:return new ut.PrecedencePredicateTransition(we,ce);case 5:return oe!==0?new a.AtomTransition(we,Ee.Token.EOF):new a.AtomTransition(we,ce);case 6:return new t.ActionTransition(we,ce,ye,oe!==0);case 7:return new bt.SetTransition(we,ae[ce]);case 8:return new fe.NotSetTransition(we,ae[ce]);case 9:return new Pe.WildcardTransition(we)}throw new Error("The specified transition type is not valid.")}stateFactory(F,U){let j;switch(F){case o.ATNStateType.INVALID_TYPE:return new R.InvalidState;case o.ATNStateType.BASIC:j=new u.BasicState;break;case o.ATNStateType.RULE_START:j=new nt.RuleStartState;break;case o.ATNStateType.BLOCK_START:j=new l.BasicBlockStartState;break;case o.ATNStateType.PLUS_BLOCK_START:j=new Oe.PlusBlockStartState;break;case o.ATNStateType.STAR_BLOCK_START:j=new Z.StarBlockStartState;break;case o.ATNStateType.TOKEN_START:j=new Se.TokensStartState;break;case o.ATNStateType.RULE_STOP:j=new dt.RuleStopState;break;case o.ATNStateType.BLOCK_END:j=new f.BlockEndState;break;case o.ATNStateType.STAR_LOOP_BACK:j=new ne.StarLoopbackState;break;case o.ATNStateType.STAR_LOOP_ENTRY:j=new se.StarLoopEntryState;break;case o.ATNStateType.PLUS_LOOP_BACK:j=new He.PlusLoopbackState;break;case o.ATNStateType.LOOP_END:j=new q.LoopEndState;break;default:let ee=`The specified state type ${F} is not valid.`;throw new Error(ee)}return j.ruleIndex=U,j}lexerActionFactory(F,U,j){switch(F){case 0:return new D.LexerChannelAction(U);case 1:return new C.LexerCustomAction(U,j);case 2:return new I.LexerModeAction(U);case 3:return H.LexerMoreAction.INSTANCE;case 4:return N.LexerPopModeAction.INSTANCE;case 5:return new V.LexerPushModeAction(U);case 6:return O.LexerSkipAction.INSTANCE;case 7:return new W.LexerTypeAction(U);default:let ee=`The specified lexer action type ${F} is not valid.`;throw new Error(ee)}}}return J.BASE_SERIALIZED_UUID=de.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3"),J.ADDED_LEXER_ACTIONS=de.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D"),J.ADDED_UNICODE_SMP=de.UUID.fromString("C23FEA89-0605-4f51-AFB8-058BCAB8C91B"),J.SUPPORTED_UUIDS=[J.BASE_SERIALIZED_UUID,J.ADDED_LEXER_ACTIONS,J.ADDED_UNICODE_SMP],J.SERIALIZED_UUID=J.ADDED_UNICODE_SMP,r([re.NotNull],J.prototype,"deserializationOptions",void 0),r([e(0,re.NotNull)],J.prototype,"deserialize",null),r([e(0,re.NotNull)],J.prototype,"markPrecedenceDecisions",null),r([re.NotNull,e(0,re.NotNull)],J.prototype,"edgeFactory",null),S_.ATNDeserializer=J,S_}var K1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ob=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},mj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(K1,"__esModule",{value:!0});K1.ParseInfo=void 0;const Nb=Ke;let b0=class{constructor(e){this.atnSimulator=e}getDecisionInfo(){return this.atnSimulator.getDecisionInfo()}getLLDecisions(){let e=this.atnSimulator.getDecisionInfo(),t=[];for(let i=0;i<e.length;i++)e[i].LL_Fallback>0&&t.push(i);return t}getTotalTimeInPrediction(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.timeInPrediction;return t}getTotalSLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.SLL_TotalLook;return t}getTotalLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.LL_TotalLook;return t}getTotalSLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.SLL_ATNTransitions;return t}getTotalLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.LL_ATNTransitions;return t}getTotalATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.SLL_ATNTransitions,t+=i.LL_ATNTransitions;return t}getDFASize(e){if(e)return this.atnSimulator.atn.decisionToDFA[e].states.size;{let t=0,i=this.atnSimulator.atn.decisionToDFA;for(let s=0;s<i.length;s++)t+=this.getDFASize(s);return t}}};Ob([Nb.NotNull],b0.prototype,"getDecisionInfo",null);Ob([Nb.NotNull],b0.prototype,"getLLDecisions",null);b0=Ob([mj(0,Nb.NotNull)],b0);K1.ParseInfo=b0;var kg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ib=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(kg,"__esModule",{value:!0});kg.ProxyParserErrorListener=void 0;const xj=Tf,Fb=Ke;class X1 extends xj.ProxyErrorListener{constructor(e){super(e)}reportAmbiguity(e,t,i,s,n,o,a){this.getDelegates().forEach(l=>{l.reportAmbiguity&&l.reportAmbiguity(e,t,i,s,n,o,a)})}reportAttemptingFullContext(e,t,i,s,n,o){this.getDelegates().forEach(a=>{a.reportAttemptingFullContext&&a.reportAttemptingFullContext(e,t,i,s,n,o)})}reportContextSensitivity(e,t,i,s,n,o){this.getDelegates().forEach(a=>{a.reportContextSensitivity&&a.reportContextSensitivity(e,t,i,s,n,o)})}}Ib([Fb.Override],X1.prototype,"reportAmbiguity",null);Ib([Fb.Override],X1.prototype,"reportAttemptingFullContext",null);Ib([Fb.Override],X1.prototype,"reportContextSensitivity",null);kg.ProxyParserErrorListener=X1;var LE={},Y1={},Mb={},_u={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(_u,"__esModule",{value:!0});_u.isSupplementaryCodePoint=_u.isLowSurrogate=_u.isHighSurrogate=void 0;function yj(r){return r>=55296&&r<=56319}_u.isHighSurrogate=yj;function vj(r){return r>=56320&&r<=57343}_u.isLowSurrogate=vj;function Ej(r){return r>=65536}_u.isSupplementaryCodePoint=Ej;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CodePointBuffer=void 0;const e=Us,t=_u;class i{constructor(n,o){this.buffer=n,this._position=0,this._size=o}static withArray(n){return new i(n,n.length)}get position(){return this._position}set position(n){if(n<0||n>this._size)throw new RangeError;this._position=n}get remaining(){return this._size-this.position}get(n){return this.buffer[n]}array(){return this.buffer.slice(0,this._size)}static builder(n){return new i.Builder(n)}}r.CodePointBuffer=i,function(s){let n;(function(a){a[a.BYTE=0]="BYTE",a[a.CHAR=1]="CHAR",a[a.INT=2]="INT"})(n||(n={}));class o{constructor(l){this.type=0,this.buffer=new Uint8Array(l),this.prevHighSurrogate=-1,this.position=0}build(){return new s(this.buffer,this.position)}static roundUpToNextPowerOfTwo(l){let u=32-Math.clz32(l-1);return Math.pow(2,u)}ensureRemaining(l){switch(this.type){case 0:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),d=new Uint8Array(u);d.set(this.buffer.subarray(0,this.position),0),this.buffer=d}break;case 1:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),d=new Uint16Array(u);d.set(this.buffer.subarray(0,this.position),0),this.buffer=d}break;case 2:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),d=new Int32Array(u);d.set(this.buffer.subarray(0,this.position),0),this.buffer=d}break}}append(l){this.ensureRemaining(l.length),this.appendArray(l)}appendArray(l){switch(this.type){case 0:this.appendArrayByte(l);break;case 1:this.appendArrayChar(l);break;case 2:this.appendArrayInt(l);break}}appendArrayByte(l){e(this.prevHighSurrogate===-1);let u=l,d=0,f=l.length,g=this.buffer,x=this.position;for(;d<f;){let E=u[d];if(E<=255)g[x]=E;else if(l=l.subarray(d,f),this.position=x,t.isHighSurrogate(E)){this.byteToIntBuffer(l.length),this.appendArrayInt(l);return}else{this.byteToCharBuffer(l.length),this.appendArrayChar(l);return}d++,x++}this.position=x}appendArrayChar(l){e(this.prevHighSurrogate===-1);let u=l,d=0,f=l.length,g=this.buffer,x=this.position;for(;d<f;){let E=u[d];if(!t.isHighSurrogate(E))g[x]=E;else{l=l.subarray(d,f),this.position=x,this.charToIntBuffer(l.length),this.appendArrayInt(l);return}d++,x++}this.position=x}appendArrayInt(l){let u=l,d=0,f=l.length,g=this.buffer,x=this.position;for(;d<f;){let E=u[d];d++,this.prevHighSurrogate!==-1?t.isLowSurrogate(E)?(g[x]=String.fromCharCode(this.prevHighSurrogate,E).codePointAt(0),x++,this.prevHighSurrogate=-1):(g[x]=this.prevHighSurrogate,x++,t.isHighSurrogate(E)?this.prevHighSurrogate=E:(g[x]=E,x++,this.prevHighSurrogate=-1)):t.isHighSurrogate(E)?this.prevHighSurrogate=E:(g[x]=E,x++)}this.prevHighSurrogate!==-1&&(g[x]=this.prevHighSurrogate,x++),this.position=x}byteToCharBuffer(l){let u=new Uint16Array(Math.max(this.position+l,this.buffer.length>>1));u.set(this.buffer.subarray(0,this.position),0),this.type=1,this.buffer=u}byteToIntBuffer(l){let u=new Int32Array(Math.max(this.position+l,this.buffer.length>>2));u.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=u}charToIntBuffer(l){let u=new Int32Array(Math.max(this.position+l,this.buffer.length>>1));u.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=u}}s.Builder=o}(i=r.CodePointBuffer||(r.CodePointBuffer={}))})(Mb);var Tg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Fa=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Tg,"__esModule",{value:!0});Tg.CodePointCharStream=void 0;const RR=Us,xm=ml,Sj=ln,Ma=Ke;class Hs{constructor(e,t,i,s){RR(t===0),this._array=e,this._size=i,this._name=s,this._position=0}get internalStorage(){return this._array}static fromBuffer(e,t){return(t===void 0||t.length===0)&&(t=xm.IntStream.UNKNOWN_SOURCE_NAME),new Hs(e.array(),e.position,e.remaining,t)}consume(){if(this._size-this._position===0)throw RR(this.LA(1)===xm.IntStream.EOF),new RangeError("cannot consume EOF");this._position++}get index(){return this._position}get size(){return this._size}mark(){return-1}release(e){}seek(e){this._position=e}get sourceName(){return this._name}toString(){return this.getText(Sj.Interval.of(0,this.size-1))}LA(e){let t;switch(Math.sign(e)){case-1:return t=this.index+e,t<0?xm.IntStream.EOF:this._array[t];case 0:return 0;case 1:return t=this.index+e-1,t>=this.size?xm.IntStream.EOF:this._array[t]}throw new RangeError("Not reached")}getText(e){const t=Math.min(e.a,this.size),i=Math.min(e.b-e.a+1,this.size-t);return this._array instanceof Int32Array?String.fromCodePoint(...Array.from(this._array.subarray(t,t+i))):String.fromCharCode(...Array.from(this._array.subarray(t,t+i)))}}Fa([Ma.Override],Hs.prototype,"consume",null);Fa([Ma.Override],Hs.prototype,"index",null);Fa([Ma.Override],Hs.prototype,"size",null);Fa([Ma.Override],Hs.prototype,"mark",null);Fa([Ma.Override],Hs.prototype,"release",null);Fa([Ma.Override],Hs.prototype,"seek",null);Fa([Ma.Override],Hs.prototype,"sourceName",null);Fa([Ma.Override],Hs.prototype,"toString",null);Fa([Ma.Override],Hs.prototype,"LA",null);Fa([Ma.Override],Hs.prototype,"getText",null);Tg.CodePointCharStream=Hs;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CharStreams=void 0;const e=Mb,t=Tg,i=ml;(function(s){function n(o,a){(a===void 0||a.length===0)&&(a=i.IntStream.UNKNOWN_SOURCE_NAME);let l=e.CodePointBuffer.builder(o.length),u=new Uint16Array(o.length);for(let d=0;d<o.length;d++)u[d]=o.charCodeAt(d);return l.append(u),t.CodePointCharStream.fromBuffer(l.build(),a)}s.fromString=n})(r.CharStreams||(r.CharStreams={}))})(Y1);var Mf={},Pg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Qn=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},wj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Pg,"__esModule",{value:!0});Pg.BufferedTokenStream=void 0;const DR=Us,CR=Ou,UE=ln,GE=Mu(),Hi=Ke,Zu=dr;let on=class{constructor(e){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,e==null)throw new Error("tokenSource cannot be null");this._tokenSource=e}get tokenSource(){return this._tokenSource}set tokenSource(e){this._tokenSource=e,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}get index(){return this.p}mark(){return 0}release(e){}seek(e){this.lazyInit(),this.p=this.adjustSeekIndex(e)}get size(){return this.tokens.length}consume(){let e;if(this.p>=0?this.fetchedEOF?e=this.p<this.tokens.length-1:e=this.p<this.tokens.length:e=!1,!e&&this.LA(1)===Zu.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(e){DR(e>=0);let t=e-this.tokens.length+1;return t>0?this.fetch(t)>=t:!0}fetch(e){if(this.fetchedEOF)return 0;for(let t=0;t<e;t++){let i=this.tokenSource.nextToken();if(this.isWritableToken(i)&&(i.tokenIndex=this.tokens.length),this.tokens.push(i),i.type===Zu.Token.EOF)return this.fetchedEOF=!0,t+1}return e}get(e){if(e<0||e>=this.tokens.length)throw new RangeError("token index "+e+" out of range 0.."+(this.tokens.length-1));return this.tokens[e]}getRange(e,t){if(e<0||t<0)return[];this.lazyInit();let i=new Array;t>=this.tokens.length&&(t=this.tokens.length-1);for(let s=e;s<=t;s++){let n=this.tokens[s];if(n.type===Zu.Token.EOF)break;i.push(n)}return i}LA(e){let t=this.LT(e);return t?t.type:Zu.Token.INVALID_TYPE}tryLB(e){if(!(this.p-e<0))return this.tokens[this.p-e]}LT(e){let t=this.tryLT(e);if(t===void 0)throw new RangeError("requested lookback index out of range");return t}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p+e-1;return this.sync(t),t>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[t]}adjustSeekIndex(e){return e}lazyInit(){this.p===-1&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}getTokens(e,t,i){if(this.lazyInit(),e===void 0)return DR(t===void 0&&i===void 0),this.tokens;if(t===void 0&&(t=this.tokens.length-1),e<0||t>=this.tokens.length||t<0||e>=this.tokens.length)throw new RangeError("start "+e+" or stop "+t+" not in 0.."+(this.tokens.length-1));if(e>t)return[];if(i===void 0)return this.tokens.slice(e,t+1);typeof i=="number"&&(i=new Set().add(i));let s=i,n=this.tokens.slice(e,t+1);return n=n.filter(o=>s.has(o.type)),n}nextTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;let i=this.tokens[e];for(;i.channel!==t;){if(i.type===Zu.Token.EOF)return e;e++,this.sync(e),i=this.tokens[e]}return e}previousTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;for(;e>=0;){let i=this.tokens[e];if(i.type===Zu.Token.EOF||i.channel===t)return e;e--}return e}getHiddenTokensToRight(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));let i=this.nextTokenOnChannel(e+1,GE.Lexer.DEFAULT_TOKEN_CHANNEL),s,n=e+1;return i===-1?s=this.size-1:s=i,this.filterForChannel(n,s,t)}getHiddenTokensToLeft(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));if(e===0)return[];let i=this.previousTokenOnChannel(e-1,GE.Lexer.DEFAULT_TOKEN_CHANNEL);if(i===e-1)return[];let s=i+1,n=e-1;return this.filterForChannel(s,n,t)}filterForChannel(e,t,i){let s=new Array;for(let n=e;n<=t;n++){let o=this.tokens[n];i===-1?o.channel!==GE.Lexer.DEFAULT_TOKEN_CHANNEL&&s.push(o):o.channel===i&&s.push(o)}return s}get sourceName(){return this.tokenSource.sourceName}getText(e){e===void 0?e=UE.Interval.of(0,this.size-1):e instanceof UE.Interval||(e=e.sourceInterval);let t=e.a,i=e.b;if(t<0||i<0)return"";this.fill(),i>=this.tokens.length&&(i=this.tokens.length-1);let s="";for(let n=t;n<=i;n++){let o=this.tokens[n];if(o.type===Zu.Token.EOF)break;s+=o.text}return s.toString()}getTextFromRange(e,t){return this.isToken(e)&&this.isToken(t)?this.getText(UE.Interval.of(e.tokenIndex,t.tokenIndex)):""}fill(){this.lazyInit();const e=1e3;for(;;)if(this.fetch(e)<e)return}isWritableToken(e){return e instanceof CR.CommonToken}isToken(e){return e instanceof CR.CommonToken}};Qn([Hi.NotNull],on.prototype,"_tokenSource",void 0);Qn([Hi.Override],on.prototype,"tokenSource",null);Qn([Hi.Override],on.prototype,"index",null);Qn([Hi.Override],on.prototype,"mark",null);Qn([Hi.Override],on.prototype,"release",null);Qn([Hi.Override],on.prototype,"seek",null);Qn([Hi.Override],on.prototype,"size",null);Qn([Hi.Override],on.prototype,"consume",null);Qn([Hi.Override],on.prototype,"get",null);Qn([Hi.Override],on.prototype,"LA",null);Qn([Hi.NotNull,Hi.Override],on.prototype,"LT",null);Qn([Hi.Override],on.prototype,"sourceName",null);Qn([Hi.NotNull,Hi.Override],on.prototype,"getText",null);Qn([Hi.NotNull,Hi.Override],on.prototype,"getTextFromRange",null);on=Qn([wj(0,Hi.NotNull)],on);Pg.BufferedTokenStream=on;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var q1=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Aj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.CommonTokenStream=void 0;const bj=Pg,Q1=Ke,OR=dr;let Zd=class extends bj.BufferedTokenStream{constructor(e,t=OR.Token.DEFAULT_CHANNEL){super(e),this.channel=t}adjustSeekIndex(e){return this.nextTokenOnChannel(e,this.channel)}tryLB(e){if(this.p-e<0)return;let t=this.p,i=1;for(;i<=e&&t>0;)t=this.previousTokenOnChannel(t-1,this.channel),i++;if(!(t<0))return this.tokens[t]}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p,i=1;for(;i<e;)this.sync(t+1)&&(t=this.nextTokenOnChannel(t+1,this.channel)),i++;return this.tokens[t]}getNumberOfOnChannelTokens(){let e=0;this.fill();for(let t of this.tokens)if(t.channel===this.channel&&e++,t.type===OR.Token.EOF)break;return e}};q1([Q1.Override],Zd.prototype,"adjustSeekIndex",null);q1([Q1.Override],Zd.prototype,"tryLB",null);q1([Q1.Override],Zd.prototype,"tryLT",null);Zd=q1([Aj(0,Q1.NotNull)],Zd);Mf.CommonTokenStream=Zd;var Rg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ch=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},dI=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Rg,"__esModule",{value:!0});Rg.ListTokenSource=void 0;const kj=E1,ol=Ke,HE=dr;let fl=class{constructor(e,t){if(this.i=0,this._factory=kj.CommonTokenFactory.DEFAULT,e==null)throw new Error("tokens cannot be null");this.tokens=e,this._sourceName=t}get charPositionInLine(){if(this.i<this.tokens.length)return this.tokens[this.i].charPositionInLine;if(this.eofToken!=null)return this.eofToken.charPositionInLine;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],t=e.text;if(t!=null){let i=t.lastIndexOf(`
`);if(i>=0)return t.length-i-1}return e.charPositionInLine+e.stopIndex-e.startIndex+1}return 0}nextToken(){if(this.i>=this.tokens.length){if(this.eofToken==null){let t=-1;if(this.tokens.length>0){let s=this.tokens[this.tokens.length-1].stopIndex;s!==-1&&(t=s+1)}let i=Math.max(-1,t-1);this.eofToken=this._factory.create({source:this,stream:this.inputStream},HE.Token.EOF,"EOF",HE.Token.DEFAULT_CHANNEL,t,i,this.line,this.charPositionInLine)}return this.eofToken}let e=this.tokens[this.i];return this.i===this.tokens.length-1&&e.type===HE.Token.EOF&&(this.eofToken=e),this.i++,e}get line(){if(this.i<this.tokens.length)return this.tokens[this.i].line;if(this.eofToken!=null)return this.eofToken.line;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],t=e.line,i=e.text;if(i!=null)for(let s=0;s<i.length;s++)i.charAt(s)===`
`&&t++;return t}return 1}get inputStream(){if(this.i<this.tokens.length)return this.tokens[this.i].inputStream;if(this.eofToken!=null)return this.eofToken.inputStream;if(this.tokens.length>0)return this.tokens[this.tokens.length-1].inputStream}get sourceName(){if(this._sourceName)return this._sourceName;let e=this.inputStream;return e!=null?e.sourceName:"List"}set tokenFactory(e){this._factory=e}get tokenFactory(){return this._factory}};Ch([ol.Override],fl.prototype,"charPositionInLine",null);Ch([ol.Override],fl.prototype,"nextToken",null);Ch([ol.Override],fl.prototype,"line",null);Ch([ol.Override],fl.prototype,"inputStream",null);Ch([ol.Override],fl.prototype,"sourceName",null);Ch([ol.Override,ol.NotNull,dI(0,ol.NotNull)],fl.prototype,"tokenFactory",null);fl=Ch([dI(0,ol.NotNull)],fl);Rg.ListTokenSource=fl;var R_={},NR;function Tj(){if(NR)return R_;NR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(R_,"__esModule",{value:!0}),R_.MultiMap=void 0;class r extends Map{constructor(){super()}map(t,i){let s=super.get(t);s||(s=[],super.set(t,s)),s.push(i)}getPairs(){let t=[];return this.forEach((i,s)=>{i.forEach(n=>{t.push([s,n])})}),t}}return R_.MultiMap=r,R_}var Dg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Dg,"__esModule",{value:!0});Dg.ParseCancellationException=void 0;class Pj extends Error{constructor(e){super(e.message),this.cause=e,this.stack=e.stack}getCause(){return this.cause}}Dg.ParseCancellationException=Pj;var D_={},C_={},IR;function fI(){if(IR)return C_;IR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,u=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(u=(l<3?d(u):l>3?d(n,o,u):d(n,o))||u);return l>3&&u&&Object.defineProperty(n,o,u),u};Object.defineProperty(C_,"__esModule",{value:!0}),C_.InterpreterRuleContext=void 0;const e=Ke,t=Bo();class i extends t.ParserRuleContext{constructor(n,o,a){a!==void 0?super(o,a):super(),this._ruleIndex=n}get ruleIndex(){return this._ruleIndex}}return r([e.Override],i.prototype,"ruleIndex",null),C_.InterpreterRuleContext=i,C_}var FR;function _I(){if(FR)return D_;FR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(R,D,C,I){var H=arguments.length,N=H<3?D:I===null?I=Object.getOwnPropertyDescriptor(D,C):I,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(R,D,C,I);else for(var O=R.length-1;O>=0;O--)(V=R[O])&&(N=(H<3?V(N):H>3?V(D,C,N):V(D,C))||N);return H>3&&N&&Object.defineProperty(D,C,N),N},e=$&&$.__param||function(R,D){return function(C,I){D(C,I,R)}};Object.defineProperty(D_,"__esModule",{value:!0}),D_.ParserInterpreter=void 0;const t=Pa,i=zi,s=Fo,n=Af,o=Sh,a=fI(),l=vg,u=Ke,d=Ke,f=Og(),g=Sg(),x=Ra,E=Pf,P=dr;let b=class _w extends f.Parser{constructor(D,C,I,H,N){if(super(D instanceof _w?D.inputStream:N),this._parentContextStack=[],this.overrideDecision=-1,this.overrideDecisionInputIndex=-1,this.overrideDecisionAlt=-1,this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0,D instanceof _w){let V=D;this._grammarFileName=V._grammarFileName,this._atn=V._atn,this.pushRecursionContextStates=V.pushRecursionContextStates,this._ruleNames=V._ruleNames,this._vocabulary=V._vocabulary,this.interpreter=new g.ParserATNSimulator(this._atn,this)}else{C=C,I=I,H=H,this._grammarFileName=D,this._atn=H,this._ruleNames=I.slice(0),this._vocabulary=C,this.pushRecursionContextStates=new s.BitSet(H.states.length);for(let V of H.states)V instanceof E.StarLoopEntryState&&V.precedenceRuleDecision&&this.pushRecursionContextStates.set(V.stateNumber);this.interpreter=new g.ParserATNSimulator(H,this)}}reset(D){D===void 0?super.reset():super.reset(D),this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0}get atn(){return this._atn}get vocabulary(){return this._vocabulary}get ruleNames(){return this._ruleNames}get grammarFileName(){return this._grammarFileName}parse(D){let C=this._atn.ruleToStartState[D];for(this._rootContext=this.createInterpreterRuleContext(void 0,t.ATNState.INVALID_STATE_NUMBER,D),C.isPrecedenceRule?this.enterRecursionRule(this._rootContext,C.stateNumber,D,0):this.enterRule(this._rootContext,C.stateNumber,D);;){let I=this.atnState;switch(I.stateType){case i.ATNStateType.RULE_STOP:if(this._ctx.isEmpty)if(C.isPrecedenceRule){let H=this._ctx,N=this._parentContextStack.pop();return this.unrollRecursionContexts(N[0]),H}else return this.exitRule(),this._rootContext;this.visitRuleStopState(I);break;default:try{this.visitState(I)}catch(H){if(H instanceof x.RecognitionException)this.state=this._atn.ruleToStopState[I.ruleIndex].stateNumber,this.context.exception=H,this.errorHandler.reportError(this,H),this.recover(H);else throw H}break}}}enterRecursionRule(D,C,I,H){this._parentContextStack.push([this._ctx,D.invokingState]),super.enterRecursionRule(D,C,I,H)}get atnState(){return this._atn.states[this.state]}visitState(D){let C=1;D.numberOfTransitions>1&&(C=this.visitDecisionState(D));let I=D.transition(C-1);switch(I.serializationType){case 1:if(this.pushRecursionContextStates.get(D.stateNumber)&&!(I.target instanceof l.LoopEndState)){let q=this._parentContextStack[this._parentContextStack.length-1],re=this.createInterpreterRuleContext(q[0],q[1],this._ctx.ruleIndex);this.pushNewRecursionContext(re,this._atn.ruleToStartState[D.ruleIndex].stateNumber,this._ctx.ruleIndex)}break;case 5:this.match(I._label);break;case 2:case 7:case 8:I.matches(this._input.LA(1),P.Token.MIN_USER_TOKEN_TYPE,65535)||this.recoverInline(),this.matchWildcard();break;case 9:this.matchWildcard();break;case 3:let H=I.target,N=H.ruleIndex,V=this.createInterpreterRuleContext(this._ctx,D.stateNumber,N);H.isPrecedenceRule?this.enterRecursionRule(V,H.stateNumber,N,I.precedence):this.enterRule(V,I.target.stateNumber,N);break;case 4:let O=I;if(!this.sempred(this._ctx,O.ruleIndex,O.predIndex))throw new n.FailedPredicateException(this);break;case 6:let W=I;this.action(this._ctx,W.ruleIndex,W.actionIndex);break;case 10:if(!this.precpred(this._ctx,I.precedence)){let q=I.precedence;throw new n.FailedPredicateException(this,`precpred(_ctx, ${q})`)}break;default:throw new Error("UnsupportedOperationException: Unrecognized ATN transition type.")}this.state=I.target.stateNumber}visitDecisionState(D){let C;this.errorHandler.sync(this);let I=D.decision;return I===this.overrideDecision&&this._input.index===this.overrideDecisionInputIndex&&!this.overrideDecisionReached?(C=this.overrideDecisionAlt,this.overrideDecisionReached=!0):C=this.interpreter.adaptivePredict(this._input,I,this._ctx),C}createInterpreterRuleContext(D,C,I){return new a.InterpreterRuleContext(I,D,C)}visitRuleStopState(D){if(this._atn.ruleToStartState[D.ruleIndex].isPrecedenceRule){let H=this._parentContextStack.pop();this.unrollRecursionContexts(H[0]),this.state=H[1]}else this.exitRule();let I=this._atn.states[this.state].transition(0);this.state=I.followState.stateNumber}addDecisionOverride(D,C,I){this.overrideDecision=D,this.overrideDecisionInputIndex=C,this.overrideDecisionAlt=I}get overrideDecisionRoot(){return this._overrideDecisionRoot}recover(D){let C=this._input.index;if(this.errorHandler.recover(this,D),this._input.index===C){let I=D.getOffendingToken();if(!I)throw new Error("Expected exception to have an offending token");let H=I.tokenSource,N=H!==void 0?H.inputStream:void 0,V={source:H,stream:N};if(D instanceof o.InputMismatchException){let O=D.expectedTokens;if(O===void 0)throw new Error("Expected the exception to provide expected tokens");let W=P.Token.INVALID_TYPE;O.isNil||(W=O.minElement);let q=this.tokenFactory.create(V,W,I.text,P.Token.DEFAULT_CHANNEL,-1,-1,I.line,I.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,q))}else{I.tokenSource;let O=this.tokenFactory.create(V,P.Token.INVALID_TYPE,I.text,P.Token.DEFAULT_CHANNEL,-1,-1,I.line,I.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,O))}}}recoverInline(){return this._errHandler.recoverInline(this)}get rootContext(){return this._rootContext}};return r([u.NotNull],b.prototype,"_vocabulary",void 0),r([d.Override],b.prototype,"reset",null),r([d.Override],b.prototype,"atn",null),r([d.Override],b.prototype,"vocabulary",null),r([d.Override],b.prototype,"ruleNames",null),r([d.Override],b.prototype,"grammarFileName",null),r([d.Override],b.prototype,"enterRecursionRule",null),b=r([e(1,u.NotNull)],b),D_.ParserInterpreter=b,D_}var O_={},MR;function Rj(){if(MR)return O_;MR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,u=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(u=(l<3?d(u):l>3?d(n,o,u):d(n,o))||u);return l>3&&u&&Object.defineProperty(n,o,u),u},e=$&&$.__param||function(s,n){return function(o,a){n(o,a,s)}};Object.defineProperty(O_,"__esModule",{value:!0}),O_.ParseTreeMatch=void 0;const t=Ke;let i=class{constructor(n,o,a,l){if(!n)throw new Error("tree cannot be null");if(!o)throw new Error("pattern cannot be null");if(!a)throw new Error("labels cannot be null");this._tree=n,this._pattern=o,this._labels=a,this._mismatchedNode=l}get(n){let o=this._labels.get(n);if(!(!o||o.length===0))return o[o.length-1]}getAll(n){const o=this._labels.get(n);return o||[]}get labels(){return this._labels}get mismatchedNode(){return this._mismatchedNode}get succeeded(){return!this._mismatchedNode}get pattern(){return this._pattern}get tree(){return this._tree}toString(){return`Match ${this.succeeded?"succeeded":"failed"}; found ${this.labels.size} labels`}};return r([t.NotNull,e(0,t.NotNull)],i.prototype,"getAll",null),r([t.NotNull],i.prototype,"labels",null),r([t.NotNull],i.prototype,"pattern",null),r([t.NotNull],i.prototype,"tree",null),r([t.Override],i.prototype,"toString",null),i=r([e(0,t.NotNull),e(1,t.NotNull),e(2,t.NotNull)],i),O_.ParseTreeMatch=i,O_}var N_={},I_={},F_={},BR;function Dj(){if(BR)return F_;BR=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.XPathLexer=void 0;const r=Cb(),e=Mu(),t=P1(),i=yl,s=Ei;class n extends e.Lexer{constructor(a){super(a),this._interp=new t.LexerATNSimulator(n._ATN,this)}get vocabulary(){return n.VOCABULARY}get grammarFileName(){return"XPathLexer.g4"}get ruleNames(){return n.ruleNames}get serializedATN(){return n._serializedATN}get channelNames(){return n.channelNames}get modeNames(){return n.modeNames}action(a,l,u){switch(l){case 4:this.ID_action(a,u);break}}ID_action(a,l){switch(l){case 0:let u=this.text;u.charAt(0)===u.charAt(0).toUpperCase()?this.type=n.TOKEN_REF:this.type=n.RULE_REF;break}}static get _ATN(){return n.__ATN||(n.__ATN=new r.ATNDeserializer().deserialize(s.toCharArray(n._serializedATN))),n.__ATN}}return F_.XPathLexer=n,n.TOKEN_REF=1,n.RULE_REF=2,n.ANYWHERE=3,n.ROOT=4,n.WILDCARD=5,n.BANG=6,n.ID=7,n.STRING=8,n.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],n.modeNames=["DEFAULT_MODE"],n.ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"],n._LITERAL_NAMES=[void 0,void 0,void 0,"'//'","'/'","'*'","'!'"],n._SYMBOLIC_NAMES=[void 0,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"],n.VOCABULARY=new i.VocabularyImpl(n._LITERAL_NAMES,n._SYMBOLIC_NAMES,[]),n._serializedATNSegments=2,n._serializedATNSegment0=`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241
2\b					\x07	\x07\b	\b			\x07
\f"\v\x07\x07\b\b		\x07	,
	\f		/\v			-
\x07\x07	\b\v	\r
\u02B6
2;C\\aac|\x81\xA1\xAC\xAC\xAF\xAF\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0302\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u0485\u0489\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u0593\u05BF\u05C1\u05C1\u05C3\u05C4\u05C6\u05C7\u05C9\u05C9\u05D2\u05EC\u05F2\u05F4\u0602\u0607\u0612\u061C\u061E\u061E\u0622\u066B\u0670\u06D5\u06D7\u06DF\u06E1\u06EA\u06EC\u06FE\u0701\u0701\u0711\u074C\u074F\u07B3\u07C2\u07F7\u07FC\u07FC\u0802\u082F\u0842\u085D\u08A2\u08B6\u08B8\u08BF\u08D6\u0965\u0968\u0971\u0973\u0985\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BE\u09C6\u09C9\u09CA\u09CD\u09D0\u09D9\u09D9\u09DE\u09DF\u09E1\u09E5\u09E8\u09F3\u0A03\u0A05\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A3E\u0A3E\u0A40\u0A44\u0A49\u0A4A\u0A4D\u0A4F\u0A53\u0A53\u0A5B\u0A5E\u0A60\u0A60\u0A68\u0A77\u0A83\u0A85\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABE\u0AC7\u0AC9\u0ACB\u0ACD\u0ACF\u0AD2\u0AD2\u0AE2\u0AE5\u0AE8\u0AF1\u0AFB\u0AFB\u0B03\u0B05\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3E\u0B46\u0B49\u0B4A\u0B4D\u0B4F\u0B58\u0B59\u0B5E\u0B5F\u0B61\u0B65\u0B68\u0B71\u0B73\u0B73\u0B84\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BC0\u0BC4\u0BC8\u0BCA\u0BCC\u0BCF\u0BD2\u0BD2\u0BD9\u0BD9\u0BE8\u0BF1\u0C02\u0C05\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C46\u0C48\u0C4A\u0C4C\u0C4F\u0C57\u0C58\u0C5A\u0C5C\u0C62\u0C65\u0C68\u0C71\u0C82\u0C85\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBE\u0CC6\u0CC8\u0CCA\u0CCC\u0CCF\u0CD7\u0CD8\u0CE0\u0CE0\u0CE2\u0CE5\u0CE8\u0CF1\u0CF3\u0CF4\u0D03\u0D05\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D46\u0D48\u0D4A\u0D4C\u0D50\u0D56\u0D59\u0D61\u0D65\u0D68\u0D71\u0D7C\u0D81\u0D84\u0D85\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0DCC\u0DCC\u0DD1\u0DD6\u0DD8\u0DD8\u0DDA\u0DE1\u0DE8\u0DF1\u0DF4\u0DF5\u0E03\u0E3C\u0E42\u0E50\u0E52\u0E5B\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EBB\u0EBD\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0ECA\u0ECF\u0ED2\u0EDB\u0EDE\u0EE1\u0F02\u0F02\u0F1A\u0F1B\u0F22\u0F2B\u0F37\u0F37\u0F39\u0F39\u0F3B\u0F3B\u0F40\u0F49\u0F4B\u0F6E\u0F73\u0F86\u0F88\u0F99\u0F9B\u0FBE\u0FC8\u0FC8\u1002\u104B\u1052\u109F\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u135F\u1361\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1716\u1722\u1736\u1742\u1755\u1762\u176E\u1770\u1772\u1774\u1775\u1782\u17D5\u17D9\u17D9\u17DE\u17DF\u17E2\u17EB\u180D\u1810\u1812\u181B\u1822\u1879\u1882\u18AC\u18B2\u18F7\u1902\u1920\u1922\u192D\u1932\u193D\u1948\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u19D2\u19DB\u1A02\u1A1D\u1A22\u1A60\u1A62\u1A7E\u1A81\u1A8B\u1A92\u1A9B\u1AA9\u1AA9\u1AB2\u1ABF\u1B02\u1B4D\u1B52\u1B5B\u1B6D\u1B75\u1B82\u1BF5\u1C02\u1C39\u1C42\u1C4B\u1C4F\u1C7F\u1C82\u1C8A\u1CD2\u1CD4\u1CD6\u1CF8\u1CFA\u1CFB\u1D02\u1DF7\u1DFD\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u200D\u2011\u202C\u2030\u2041\u2042\u2056\u2056\u2062\u2066\u2068\u2071\u2073\u2073\u2081\u2081\u2092\u209E\u20D2\u20DE\u20E3\u20E3\u20E7\u20F2\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D81\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2DE2\u2E01\u2E31\u2E31\u3007\u3009\u3023\u3031\u3033\u3037\u303A\u303E\u3043\u3098\u309B\u309C\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA62D\uA642\uA671\uA676\uA67F\uA681\uA6F3\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA829\uA842\uA875\uA882\uA8C7\uA8D2\uA8DB\uA8E2\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA902\uA92F\uA932\uA955\uA962\uA97E\uA982\uA9C2\uA9D1\uA9DB\uA9E2\uAA00\uAA02\uAA38\uAA42\uAA4F\uAA52\uAA5B\uAA62\uAA78\uAA7C\uAAC4\uAADD\uAADF\uAAE2\uAAF1\uAAF4\uAAF8\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABEC\uABEE\uABEF\uABF2\uABFB\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE02\uFE11\uFE22\uFE31\uFE35\uFE36\uFE4F\uFE51\uFE72\uFE76\uFE78\uFEFE\uFF01\uFF01\uFF12\uFF1B\uFF23\uFF3C\uFF41\uFF41\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\uFFFB\uFFFD\r(*<>?AOR_\x82\xFC\u0142\u0176\u01FF\u01FF\u0282\u029E\u02A2\u02D2\u02E2\u02E2\u0302\u0321\u0332\u034C\u0352\u037C\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04A2\u04AB\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A05\u0A07\u0A08\u0A0E\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A3A\u0A3C\u0A41\u0A41\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE8\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1002\u1048\u1068\u1071\u1081\u10BC\u10BF\u10BF\u10D2\u10EA\u10F2\u10FB\u1102\u1136\u1138\u1141\u1152\u1175\u1178\u1178\u1182\u11C6\u11CC\u11CE\u11D2\u11DC\u11DE\u11DE\u1202\u1213\u1215\u1239\u1240\u1240\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12EC\u12F2\u12FB\u1302\u1305\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133E\u1346\u1349\u134A\u134D\u134F\u1352\u1352\u1359\u1359\u135F\u1365\u1368\u136E\u1372\u1376\u1402\u144C\u1452\u145B\u1482\u14C7\u14C9\u14C9\u14D2\u14DB\u1582\u15B7\u15BA\u15C2\u15DA\u15DF\u1602\u1642\u1646\u1646\u1652\u165B\u1682\u16B9\u16C2\u16CB\u1702\u171B\u171F\u172D\u1732\u173B\u18A2\u18EB\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C38\u1C3A\u1C42\u1C52\u1C5B\u1C74\u1C91\u1C94\u1CA9\u1CAB\u1CB8\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6A62\u6A6B\u6AD2\u6AEF\u6AF2\u6AF6\u6B02\u6B38\u6B42\u6B45\u6B52\u6B5B\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F80\u6F91\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uBC9F\uBCA0\uBCA2\uBCA5\uD167\uD16B\uD16F\uD184\uD187\uD18D\uD1AC\uD1AF\uD244\uD246\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uD7D0\uD801\uDA02\uDA38\uDA3D\uDA6E\uDA77\uDA77\uDA86\uDA86\uDA9D\uDAA1\uDAA3\uDAB1\uE002\uE008\uE00A\uE01A\uE01D\uE023\uE025\uE026\uE028\uE02C\uE802\uE8C6\uE8D2\uE8D8\uE902\uE94C\uE952\uE95B\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F"\x81\u0102\u01F1\u0240C\\c|\xAC\xAC\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0372\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u05D2\u05EC\u05F2\u05F4\u0622\u064C\u0670\u0671\u0673\u06D5\u06D7\u06D7\u06E7\u06E8\u06F0\u06F1\u06FC\u06FE\u0701\u0701\u0712\u0712\u0714\u0731\u074F\u07A7\u07B3\u07B3\u07CC\u07EC\u07F6\u07F7\u07FC\u07FC\u0802\u0817\u081C\u081C\u0826\u0826\u082A\u082A\u0842\u085A\u08A2\u08B6\u08B8\u08BF\u0906\u093B\u093F\u093F\u0952\u0952\u095A\u0963\u0973\u0982\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BF\u09BF\u09D0\u09D0\u09DE\u09DF\u09E1\u09E3\u09F2\u09F3\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A5B\u0A5E\u0A60\u0A60\u0A74\u0A76\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABF\u0ABF\u0AD2\u0AD2\u0AE2\u0AE3\u0AFB\u0AFB\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3F\u0B3F\u0B5E\u0B5F\u0B61\u0B63\u0B73\u0B73\u0B85\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BD2\u0BD2\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C3F\u0C5A\u0C5C\u0C62\u0C63\u0C82\u0C82\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBF\u0CBF\u0CE0\u0CE0\u0CE2\u0CE3\u0CF3\u0CF4\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D3F\u0D50\u0D50\u0D56\u0D58\u0D61\u0D63\u0D7C\u0D81\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0E03\u0E32\u0E34\u0E35\u0E42\u0E48\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EB2\u0EB4\u0EB5\u0EBF\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0EDE\u0EE1\u0F02\u0F02\u0F42\u0F49\u0F4B\u0F6E\u0F8A\u0F8E\u1002\u102C\u1041\u1041\u1052\u1057\u105C\u105F\u1063\u1063\u1067\u1068\u1070\u1072\u1077\u1083\u1090\u1090\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1713\u1722\u1733\u1742\u1753\u1762\u176E\u1770\u1772\u1782\u17B5\u17D9\u17D9\u17DE\u17DE\u1822\u1879\u1882\u1886\u1889\u18AA\u18AC\u18AC\u18B2\u18F7\u1902\u1920\u1952\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u1A02\u1A18\u1A22\u1A56\u1AA9\u1AA9\u1B07\u1B35\u1B47\u1B4D\u1B85\u1BA2\u1BB0\u1BB1\u1BBC\u1BE7\u1C02\u1C25\u1C4F\u1C51\u1C5C\u1C7F\u1C82\u1C8A\u1CEB\u1CEE\u1CF0\u1CF3\u1CF7\u1CF8\u1D02\u1DC1\u1E02\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u2073\u2073\u2081\u2081\u2092\u209E\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF0\u2CF4\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D82\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2E31\u2E31\u3007\u3009\u3023\u302B\u3033\u3037\u303A\u303E\u3043\u3098\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA621\uA62C\uA62D\uA642\uA670\uA681\uA69F\uA6A2\uA6F1\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA803\uA805\uA807\uA809\uA80C\uA80E\uA824\uA842\uA875\uA884\uA8B5\uA8F4\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA90C\uA927\uA932\uA948\uA962\uA97E\uA986\uA9B4\uA9D1\uA9D1\uA9E2\uA9E6\uA9E8\uA9F1\uA9FC\uAA00\uAA02\uAA2A\uAA42\uAA44\uAA46\uAA4D\uAA62\uAA78\uAA7C\uAA7C\uAA80\uAAB1\uAAB3\uAAB3\uAAB7\uAAB8\uAABB\uAABF\uAAC2\uAAC2\uAAC4\uAAC4\uAADD\uAADF\uAAE2\uAAEC\uAAF4\uAAF6\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABE4\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB1F\uFB21\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE72\uFE76\uFE78\uFEFE\uFF23\uFF3C\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\r(*<>?AOR_\x82\xFC\u0142\u0176\u0282\u029E\u02A2\u02D2\u0302\u0321\u0332\u034C\u0352\u0377\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A02\u0A12\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE6\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1005\u1039\u1085\u10B1\u10D2\u10EA\u1105\u1128\u1152\u1174\u1178\u1178\u1185\u11B4\u11C3\u11C6\u11DC\u11DC\u11DE\u11DE\u1202\u1213\u1215\u122D\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12E0\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133F\u133F\u1352\u1352\u135F\u1363\u1402\u1436\u1449\u144C\u1482\u14B1\u14C6\u14C7\u14C9\u14C9\u1582\u15B0\u15DA\u15DD\u1602\u1631\u1646\u1646\u1682\u16AC\u1702\u171B\u18A2\u18E1\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C30\u1C42\u1C42\u1C74\u1C91\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6AD2\u6AEF\u6B02\u6B31\u6B42\u6B45\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F52\u6F95\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548`,n._serializedATNSegment1=`\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uE802\uE8C6\uE902\uE945\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F1\x07	\v\x07	\v\r%')\x071\x071\x071\x07,\b\x1B\x07#\x1B
 \b\r\x07"  !!#" #$\b$\f%&	&'(	()-\x07)*,\v+*,/-.-+.0/-01\x07)1 -`,n._serializedATN=s.join([n._serializedATNSegment0,n._serializedATNSegment1],""),F_}var M_={},LR;function Cj(){if(LR)return M_;LR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(i,s,n,o){var a=arguments.length,l=a<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,n):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,s,n,o);else for(var d=i.length-1;d>=0;d--)(u=i[d])&&(l=(a<3?u(l):a>3?u(s,n,l):u(s,n))||l);return a>3&&l&&Object.defineProperty(s,n,l),l};Object.defineProperty(M_,"__esModule",{value:!0}),M_.XPathLexerErrorListener=void 0;const e=Ke;class t{syntaxError(s,n,o,a,l,u){}}return r([e.Override],t.prototype,"syntaxError",null),M_.XPathLexerErrorListener=t,M_}var B_={},L_={},UR;function Bf(){if(UR)return L_;UR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(i,s,n,o){var a=arguments.length,l=a<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,n):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,s,n,o);else for(var d=i.length-1;d>=0;d--)(u=i[d])&&(l=(a<3?u(l):a>3?u(s,n,l):u(s,n))||l);return a>3&&l&&Object.defineProperty(s,n,l),l};Object.defineProperty(L_,"__esModule",{value:!0}),L_.XPathElement=void 0;const e=Ke;class t{constructor(s){this.nodeName=s,this.invert=!1}toString(){let s=this.invert?"!":"";return Object.constructor.name+"["+s+this.nodeName+"]"}}return r([e.Override],t.prototype,"toString",null),L_.XPathElement=t,L_}var GR;function Oj(){if(GR)return B_;GR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d};Object.defineProperty(B_,"__esModule",{value:!0}),B_.XPathRuleAnywhereElement=void 0;const e=Ke,t=Dh(),i=Bf();class s extends i.XPathElement{constructor(o,a){super(o),this.ruleIndex=a}evaluate(o){return t.Trees.findAllRuleNodes(o,this.ruleIndex)}}return r([e.Override],s.prototype,"evaluate",null),B_.XPathRuleAnywhereElement=s,B_}var U_={},HR;function Nj(){if(HR)return U_;HR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(U_,"__esModule",{value:!0}),U_.XPathRuleElement=void 0;const e=Bo(),t=Ke,i=Dh(),s=Bf();class n extends s.XPathElement{constructor(a,l){super(a),this.ruleIndex=l}evaluate(a){let l=[];for(let u of i.Trees.getChildren(a))u instanceof e.ParserRuleContext&&(u.ruleIndex===this.ruleIndex&&!this.invert||u.ruleIndex!==this.ruleIndex&&this.invert)&&l.push(u);return l}}return r([t.Override],n.prototype,"evaluate",null),U_.XPathRuleElement=n,U_}var G_={},zR;function Ij(){if(zR)return G_;zR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d};Object.defineProperty(G_,"__esModule",{value:!0}),G_.XPathTokenAnywhereElement=void 0;const e=Ke,t=Dh(),i=Bf();class s extends i.XPathElement{constructor(o,a){super(o),this.tokenType=a}evaluate(o){return t.Trees.findAllTokenNodes(o,this.tokenType)}}return r([e.Override],s.prototype,"evaluate",null),G_.XPathTokenAnywhereElement=s,G_}var H_={},jR;function Fj(){if(jR)return H_;jR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(H_,"__esModule",{value:!0}),H_.XPathTokenElement=void 0;const e=Ke,t=Al,i=Dh(),s=Bf();class n extends s.XPathElement{constructor(a,l){super(a),this.tokenType=l}evaluate(a){let l=[];for(let u of i.Trees.getChildren(a))u instanceof t.TerminalNode&&(u.symbol.type===this.tokenType&&!this.invert||u.symbol.type!==this.tokenType&&this.invert)&&l.push(u);return l}}return r([e.Override],n.prototype,"evaluate",null),H_.XPathTokenElement=n,H_}var z_={},VR;function Mj(){if(VR)return z_;VR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(z_,"__esModule",{value:!0}),z_.XPathWildcardAnywhereElement=void 0;const e=Ke,t=Dh(),i=Bb(),s=Bf();class n extends s.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){return this.invert?[]:t.Trees.getDescendants(a)}}return r([e.Override],n.prototype,"evaluate",null),z_.XPathWildcardAnywhereElement=n,z_}var j_={},WR;function Bj(){if(WR)return j_;WR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(j_,"__esModule",{value:!0}),j_.XPathWildcardElement=void 0;const e=Ke,t=Dh(),i=Bb(),s=Bf();class n extends s.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){let l=[];if(this.invert)return l;for(let u of t.Trees.getChildren(a))l.push(u);return l}}return r([e.Override],n.prototype,"evaluate",null),j_.XPathWildcardElement=n,j_}var $R;function Bb(){if($R)return I_;$R=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(I_,"__esModule",{value:!0}),I_.XPath=void 0;const r=Y1,e=Mf,t=Th,i=Bo(),s=dr,n=Dj(),o=Cj(),a=Oj(),l=Nj(),u=Ij(),d=Fj(),f=Mj(),g=Bj();class x{constructor(P,b){this.parser=P,this.path=b,this.elements=this.split(b)}split(P){let b=new n.XPathLexer(r.CharStreams.fromString(P));b.recover=N=>{throw N},b.removeErrorListeners(),b.addErrorListener(new o.XPathLexerErrorListener);let R=new e.CommonTokenStream(b);try{R.fill()}catch(N){if(N instanceof t.LexerNoViableAltException){let O="Invalid tokens or characters at index "+b.charPositionInLine+" in path '"+P+"' -- "+N.message;throw new RangeError(O)}throw N}let D=R.getTokens(),C=[],I=D.length,H=0;e:for(;H<I;){let N=D[H],V;switch(N.type){case n.XPathLexer.ROOT:case n.XPathLexer.ANYWHERE:let O=N.type===n.XPathLexer.ANYWHERE;H++,V=D[H];let W=V.type===n.XPathLexer.BANG;W&&(H++,V=D[H]);let q=this.getXPathElement(V,O);q.invert=W,C.push(q),H++;break;case n.XPathLexer.TOKEN_REF:case n.XPathLexer.RULE_REF:case n.XPathLexer.WILDCARD:C.push(this.getXPathElement(N,!1)),H++;break;case s.Token.EOF:break e;default:throw new Error("Unknowth path element "+N)}}return C}getXPathElement(P,b){if(P.type===s.Token.EOF)throw new Error("Missing path element at end of path");let R=P.text;if(R==null)throw new Error("Expected wordToken to have text content.");let D=this.parser.getTokenType(R),C=this.parser.getRuleIndex(R);switch(P.type){case n.XPathLexer.WILDCARD:return b?new f.XPathWildcardAnywhereElement:new g.XPathWildcardElement;case n.XPathLexer.TOKEN_REF:case n.XPathLexer.STRING:if(D===s.Token.INVALID_TYPE)throw new Error(R+" at index "+P.startIndex+" isn't a valid token name");return b?new u.XPathTokenAnywhereElement(R,D):new d.XPathTokenElement(R,D);default:if(C===-1)throw new Error(R+" at index "+P.startIndex+" isn't a valid rule name");return b?new a.XPathRuleAnywhereElement(R,C):new l.XPathRuleElement(R,C)}}static findAll(P,b,R){return new x(R,b).evaluate(P)}evaluate(P){let b=new i.ParserRuleContext;b.addChild(P);let R=new Set([b]),D=0;for(;D<this.elements.length;){let C=new Set;for(let I of R)I.childCount>0&&this.elements[D].evaluate(I).forEach(C.add,C);D++,R=C}return R}}return I_.XPath=x,x.WILDCARD="*",x.NOT="!",I_}var KR;function Lj(){if(KR)return N_;KR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(N_,"__esModule",{value:!0}),N_.ParseTreePattern=void 0;const t=Ke,i=Bb();let s=class{constructor(o,a,l,u){this._matcher=o,this._patternRuleIndex=l,this._pattern=a,this._patternTree=u}match(o){return this._matcher.match(o,this)}matches(o){return this._matcher.match(o,this).succeeded}findAll(o,a){let l=i.XPath.findAll(o,a,this._matcher.parser),u=[];for(let d of l){let f=this.match(d);f.succeeded&&u.push(f)}return u}get matcher(){return this._matcher}get pattern(){return this._pattern}get patternRuleIndex(){return this._patternRuleIndex}get patternTree(){return this._patternTree}};return r([t.NotNull],s.prototype,"_pattern",void 0),r([t.NotNull],s.prototype,"_patternTree",void 0),r([t.NotNull],s.prototype,"_matcher",void 0),r([t.NotNull,e(0,t.NotNull)],s.prototype,"match",null),r([e(0,t.NotNull)],s.prototype,"matches",null),r([t.NotNull,e(0,t.NotNull),e(1,t.NotNull)],s.prototype,"findAll",null),r([t.NotNull],s.prototype,"matcher",null),r([t.NotNull],s.prototype,"pattern",null),r([t.NotNull],s.prototype,"patternTree",null),s=r([e(0,t.NotNull),e(1,t.NotNull),e(3,t.NotNull)],s),N_.ParseTreePattern=s,N_}var V_={},XR;function Uj(){if(XR)return V_;XR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(V_,"__esModule",{value:!0}),V_.RuleTagToken=void 0;const t=Ke,i=dr;let s=class{constructor(o,a,l){if(o==null||o.length===0)throw new Error("ruleName cannot be null or empty.");this._ruleName=o,this.bypassTokenType=a,this._label=l}get ruleName(){return this._ruleName}get label(){return this._label}get channel(){return i.Token.DEFAULT_CHANNEL}get text(){return this._label!=null?"<"+this._label+":"+this._ruleName+">":"<"+this._ruleName+">"}get type(){return this.bypassTokenType}get line(){return 0}get charPositionInLine(){return-1}get tokenIndex(){return-1}get startIndex(){return-1}get stopIndex(){return-1}get tokenSource(){}get inputStream(){}toString(){return this._ruleName+":"+this.bypassTokenType}};return r([t.NotNull],s.prototype,"ruleName",null),r([t.Override],s.prototype,"channel",null),r([t.Override],s.prototype,"text",null),r([t.Override],s.prototype,"type",null),r([t.Override],s.prototype,"line",null),r([t.Override],s.prototype,"charPositionInLine",null),r([t.Override],s.prototype,"tokenIndex",null),r([t.Override],s.prototype,"startIndex",null),r([t.Override],s.prototype,"stopIndex",null),r([t.Override],s.prototype,"tokenSource",null),r([t.Override],s.prototype,"inputStream",null),r([t.Override],s.prototype,"toString",null),s=r([e(0,t.NotNull)],s),V_.RuleTagToken=s,V_}var W_={},$_={},YR;function pI(){if(YR)return $_;YR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty($_,"__esModule",{value:!0}),$_.Chunk=void 0;class r{}return $_.Chunk=r,$_}var qR;function Gj(){if(qR)return W_;qR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,u=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(u=(l<3?d(u):l>3?d(n,o,u):d(n,o))||u);return l>3&&u&&Object.defineProperty(n,o,u),u};Object.defineProperty(W_,"__esModule",{value:!0}),W_.TagChunk=void 0;const e=pI(),t=Ke;class i extends e.Chunk{constructor(n,o){if(super(),n==null||n.length===0)throw new Error("tag cannot be null or empty");this._tag=n,this._label=o}get tag(){return this._tag}get label(){return this._label}toString(){return this._label!=null?this._label+":"+this._tag:this._tag}}return r([t.NotNull],i.prototype,"tag",null),r([t.Override],i.prototype,"toString",null),W_.TagChunk=i,W_}var K_={},QR;function Hj(){if(QR)return K_;QR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(K_,"__esModule",{value:!0}),K_.TextChunk=void 0;const t=pI(),i=Ke;let s=class extends t.Chunk{constructor(o){if(super(),o==null)throw new Error("text cannot be null");this._text=o}get text(){return this._text}toString(){return"'"+this._text+"'"}};return r([i.NotNull],s.prototype,"_text",void 0),r([i.NotNull],s.prototype,"text",null),r([i.Override],s.prototype,"toString",null),s=r([e(0,i.NotNull)],s),K_.TextChunk=s,K_}var X_={},JR;function zj(){if(JR)return X_;JR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(X_,"__esModule",{value:!0}),X_.TokenTagToken=void 0;const t=Ou,i=Ke;let s=class extends t.CommonToken{constructor(o,a,l){super(a),this._tokenName=o,this._label=l}get tokenName(){return this._tokenName}get label(){return this._label}get text(){return this._label!=null?"<"+this._label+":"+this._tokenName+">":"<"+this._tokenName+">"}toString(){return this._tokenName+":"+this.type}};return r([i.NotNull],s.prototype,"_tokenName",void 0),r([i.NotNull],s.prototype,"tokenName",null),r([i.Override],s.prototype,"text",null),r([i.Override],s.prototype,"toString",null),s=r([e(0,i.NotNull)],s),X_.TokenTagToken=s,X_}var ZR;function jj(){return ZR||(ZR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(V,O,W,q){var re=arguments.length,fe=re<3?O:q===null?q=Object.getOwnPropertyDescriptor(O,W):q,he;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")fe=Reflect.decorate(V,O,W,q);else for(var Oe=V.length-1;Oe>=0;Oe--)(he=V[Oe])&&(fe=(re<3?he(fe):re>3?he(O,W,fe):he(O,W))||fe);return re>3&&fe&&Object.defineProperty(O,W,fe),fe},t=$&&$.__param||function(V,O){return function(W,q){O(W,q,V)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ParseTreePatternMatcher=void 0;const i=gI(),s=Y1,n=Mf,o=Rg,a=Tj(),l=Ke,u=Dg,d=_I(),f=Bo(),g=Rj(),x=Lj(),E=Ra,P=Ff,b=Uj(),R=Gj(),D=Al,C=Hj(),I=dr,H=zj();class N{constructor(O,W){this.start="<",this.stop=">",this.escape="\\",this.escapeRE=/\\/g,this._lexer=O,this._parser=W}setDelimiters(O,W,q){if(!O)throw new Error("start cannot be null or empty");if(!W)throw new Error("stop cannot be null or empty");this.start=O,this.stop=W,this.escape=q,this.escapeRE=new RegExp(q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}matches(O,W,q=0){if(typeof W=="string"){let re=this.compile(W,q);return this.matches(O,re)}else{let re=new a.MultiMap;return!this.matchImpl(O,W.patternTree,re)}}match(O,W,q=0){if(typeof W=="string"){let re=this.compile(W,q);return this.match(O,re)}else{let re=new a.MultiMap,fe=this.matchImpl(O,W.patternTree,re);return new g.ParseTreeMatch(O,W,re,fe)}}compile(O,W){let q=this.tokenize(O),re=new o.ListTokenSource(q),fe=new n.CommonTokenStream(re);const he=this._parser;let Oe=new d.ParserInterpreter(he.grammarFileName,he.vocabulary,he.ruleNames,he.getATNWithBypassAlts(),fe),He;try{Oe.errorHandler=new i.BailErrorStrategy,He=Oe.parse(W)}catch(ut){throw ut instanceof u.ParseCancellationException?ut.getCause():ut instanceof E.RecognitionException?ut:ut instanceof Error?new N.CannotInvokeStartRule(ut):ut}if(fe.LA(1)!==I.Token.EOF)throw new N.StartRuleDoesNotConsumeFullPattern;return new x.ParseTreePattern(this,O,W,He)}get lexer(){return this._lexer}get parser(){return this._parser}matchImpl(O,W,q){if(!O)throw new TypeError("tree cannot be null");if(!W)throw new TypeError("patternTree cannot be null");if(O instanceof D.TerminalNode&&W instanceof D.TerminalNode){let re;if(O.symbol.type===W.symbol.type)if(W.symbol instanceof H.TokenTagToken){let fe=W.symbol;q.map(fe.tokenName,O);const he=fe.label;he&&q.map(he,O)}else O.text===W.text||re||(re=O);else re||(re=O);return re}if(O instanceof f.ParserRuleContext&&W instanceof f.ParserRuleContext){let re,fe=this.getRuleTagToken(W);if(fe){if(O.ruleContext.ruleIndex===W.ruleContext.ruleIndex){q.map(fe.ruleName,O);const Oe=fe.label;Oe&&q.map(Oe,O)}else re||(re=O);return re}if(O.childCount!==W.childCount)return re||(re=O),re;let he=O.childCount;for(let Oe=0;Oe<he;Oe++){let He=this.matchImpl(O.getChild(Oe),W.getChild(Oe),q);if(He)return He}return re}return O}getRuleTagToken(O){if(O instanceof P.RuleNode&&O.childCount===1&&O.getChild(0)instanceof D.TerminalNode){let W=O.getChild(0);if(W.symbol instanceof b.RuleTagToken)return W.symbol}}tokenize(O){let W=this.split(O),q=[];for(let re of W)if(re instanceof R.TagChunk){let fe=re;const he=fe.tag.substr(0,1);if(he===he.toUpperCase()){let Oe=this._parser.getTokenType(fe.tag);if(Oe===I.Token.INVALID_TYPE)throw new Error("Unknown token "+fe.tag+" in pattern: "+O);let He=new H.TokenTagToken(fe.tag,Oe,fe.label);q.push(He)}else if(he===he.toLowerCase()){let Oe=this._parser.getRuleIndex(fe.tag);if(Oe===-1)throw new Error("Unknown rule "+fe.tag+" in pattern: "+O);let He=this._parser.getATNWithBypassAlts().ruleToTokenType[Oe];q.push(new b.RuleTagToken(fe.tag,He,fe.label))}else throw new Error("invalid tag: "+fe.tag+" in pattern: "+O)}else{let fe=re;this._lexer.inputStream=s.CharStreams.fromString(fe.text);let he=this._lexer.nextToken();for(;he.type!==I.Token.EOF;)q.push(he),he=this._lexer.nextToken()}return q}split(O){let W=0,q=O.length,re=[],fe=[],he=[];for(;W<q;)W===O.indexOf(this.escape+this.start,W)?W+=this.escape.length+this.start.length:W===O.indexOf(this.escape+this.stop,W)?W+=this.escape.length+this.stop.length:W===O.indexOf(this.start,W)?(fe.push(W),W+=this.start.length):W===O.indexOf(this.stop,W)?(he.push(W),W+=this.stop.length):W++;if(fe.length>he.length)throw new Error("unterminated tag in pattern: "+O);if(fe.length<he.length)throw new Error("missing start tag in pattern: "+O);let Oe=fe.length;for(let He=0;He<Oe;He++)if(fe[He]>=he[He])throw new Error("tag delimiters out of order in pattern: "+O);if(Oe===0){let He=O.substring(0,q);re.push(new C.TextChunk(He))}if(Oe>0&&fe[0]>0){let He=O.substring(0,fe[0]);re.push(new C.TextChunk(He))}for(let He=0;He<Oe;He++){let ut=O.substring(fe[He]+this.start.length,he[He]),qe=ut,Be,nt=ut.indexOf(":");if(nt>=0&&(Be=ut.substring(0,nt),qe=ut.substring(nt+1,ut.length)),re.push(new R.TagChunk(qe,Be)),He+1<Oe){let dt=O.substring(he[He]+this.stop.length,fe[He+1]);re.push(new C.TextChunk(dt))}}if(Oe>0){let He=he[Oe-1]+this.stop.length;if(He<q){let ut=O.substring(He,q);re.push(new C.TextChunk(ut))}}for(let He=0;He<re.length;He++){let ut=re[He];if(ut instanceof C.TextChunk){let qe=ut.text.replace(this.escapeRE,"");qe.length<ut.text.length&&(re[He]=new C.TextChunk(qe))}}return re}}e([l.NotNull,t(1,l.NotNull)],N.prototype,"match",null),e([l.NotNull],N.prototype,"lexer",null),e([l.NotNull],N.prototype,"parser",null),e([t(0,l.NotNull),t(1,l.NotNull),t(2,l.NotNull)],N.prototype,"matchImpl",null),r.ParseTreePatternMatcher=N,function(V){class O extends Error{constructor(re){super(`CannotInvokeStartRule: ${re}`),this.error=re}}V.CannotInvokeStartRule=O;class W extends Error{constructor(){super("StartRuleDoesNotConsumeFullPattern")}}V.StartRuleDoesNotConsumeFullPattern=W}(N=r.ParseTreePatternMatcher||(r.ParseTreePatternMatcher={}))}(LE)),LE}var Y_={},q_={},Q_={},eD;function Cg(){if(eD)return Q_;eD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,u=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(u=(l<3?d(u):l>3?d(n,o,u):d(n,o))||u);return l>3&&u&&Object.defineProperty(n,o,u),u},e=$&&$.__param||function(s,n){return function(o,a){n(o,a,s)}};Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.DecisionEventInfo=void 0;const t=Ke;let i=class{constructor(n,o,a,l,u,d){this.decision=n,this.fullCtx=d,this.stopIndex=u,this.input=a,this.startIndex=l,this.state=o}};return r([t.NotNull],i.prototype,"input",void 0),i=r([e(2,t.NotNull)],i),Q_.DecisionEventInfo=i,Q_}var tD;function Vj(){if(tD)return q_;tD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(q_,"__esModule",{value:!0}),q_.AmbiguityInfo=void 0;const t=Cg(),i=Ke;let s=class extends t.DecisionEventInfo{constructor(o,a,l,u,d,f){super(o,a,u,d,f,a.useContext),this.ambigAlts=l}get ambiguousAlternatives(){return this.ambigAlts}};return r([i.NotNull],s.prototype,"ambigAlts",void 0),r([i.NotNull],s.prototype,"ambiguousAlternatives",null),s=r([e(1,i.NotNull),e(2,i.NotNull),e(3,i.NotNull)],s),q_.AmbiguityInfo=s,q_}var J_={},rD;function Wj(){if(rD)return J_;rD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(J_,"__esModule",{value:!0}),J_.ContextSensitivityInfo=void 0;const t=Cg(),i=Ke;let s=class extends t.DecisionEventInfo{constructor(o,a,l,u,d){super(o,a,l,u,d,!0)}};return s=r([e(1,i.NotNull),e(2,i.NotNull)],s),J_.ContextSensitivityInfo=s,J_}var Z_={},iD;function $j(){if(iD)return Z_;iD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(i,s,n,o){var a=arguments.length,l=a<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,n):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,s,n,o);else for(var d=i.length-1;d>=0;d--)(u=i[d])&&(l=(a<3?u(l):a>3?u(s,n,l):u(s,n))||l);return a>3&&l&&Object.defineProperty(s,n,l),l};Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.DecisionInfo=void 0;const e=Ke;class t{constructor(s){this.invocations=0,this.timeInPrediction=0,this.SLL_TotalLook=0,this.SLL_MinLook=0,this.SLL_MaxLook=0,this.LL_TotalLook=0,this.LL_MinLook=0,this.LL_MaxLook=0,this.contextSensitivities=[],this.errors=[],this.ambiguities=[],this.predicateEvals=[],this.SLL_ATNTransitions=0,this.SLL_DFATransitions=0,this.LL_Fallback=0,this.LL_ATNTransitions=0,this.LL_DFATransitions=0,this.decision=s}toString(){return"{decision="+this.decision+", contextSensitivities="+this.contextSensitivities.length+", errors="+this.errors.length+", ambiguities="+this.ambiguities.length+", SLL_lookahead="+this.SLL_TotalLook+", SLL_ATNTransitions="+this.SLL_ATNTransitions+", SLL_DFATransitions="+this.SLL_DFATransitions+", LL_Fallback="+this.LL_Fallback+", LL_lookahead="+this.LL_TotalLook+", LL_ATNTransitions="+this.LL_ATNTransitions+"}"}}return r([e.Override],t.prototype,"toString",null),Z_.DecisionInfo=t,Z_}var ep={},nD;function Kj(){if(nD)return ep;nD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(ep,"__esModule",{value:!0}),ep.ErrorInfo=void 0;const t=Cg(),i=Ke;let s=class extends t.DecisionEventInfo{constructor(o,a,l,u,d){super(o,a,l,u,d,a.useContext)}};return s=r([e(1,i.NotNull),e(2,i.NotNull)],s),ep.ErrorInfo=s,ep}var tp={},sD;function Xj(){if(sD)return tp;sD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(tp,"__esModule",{value:!0}),tp.LookaheadEventInfo=void 0;const t=Cg(),i=Ke;let s=class extends t.DecisionEventInfo{constructor(o,a,l,u,d,f,g){super(o,a,u,d,f,g),this.predictedAlt=l}};return s=r([e(3,i.NotNull)],s),tp.LookaheadEventInfo=s,tp}var rp={},oD;function Yj(){if(oD)return rp;oD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(rp,"__esModule",{value:!0}),rp.PredicateEvalInfo=void 0;const t=Cg(),i=Ke;let s=class extends t.DecisionEventInfo{constructor(o,a,l,u,d,f,g,x){super(a,o,l,u,d,o.useContext),this.semctx=f,this.evalResult=g,this.predictedAlt=x}};return s=r([e(0,i.NotNull),e(2,i.NotNull),e(5,i.NotNull)],s),rp.PredicateEvalInfo=s,rp}var aD;function lD(){if(aD)return Y_;aD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(P,b,R,D){var C=arguments.length,I=C<3?b:D===null?D=Object.getOwnPropertyDescriptor(b,R):D,H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(P,b,R,D);else for(var N=P.length-1;N>=0;N--)(H=P[N])&&(I=(C<3?H(I):C>3?H(b,R,I):H(b,R))||I);return C>3&&I&&Object.defineProperty(b,R,I),I},e=$&&$.__param||function(P,b){return function(R,D){b(R,D,P)}};Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.ProfilingATNSimulator=void 0;const t=Vj(),i=Oa(),s=w1(),n=Wj(),o=$j(),a=Kj(),l=Ke,u=Xj(),d=Sg(),f=Yj(),g=vh,x=sI();class E extends d.ParserATNSimulator{constructor(b){super(b.interpreter.atn,b),this._startIndex=0,this._sllStopIndex=0,this._llStopIndex=0,this.currentDecision=0,this.conflictingAltResolvedBySLL=0,this.optimize_ll1=!1,this.reportAmbiguities=!0,this.numDecisions=this.atn.decisionToState.length,this.decisions=[];for(let R=0;R<this.numDecisions;R++)this.decisions.push(new o.DecisionInfo(R))}adaptivePredict(b,R,D,C){if(C!==void 0)return super.adaptivePredict(b,R,D,C);try{this._input=b,this._startIndex=b.index,this._sllStopIndex=this._startIndex-1,this._llStopIndex=-1,this.currentDecision=R,this.currentState=void 0,this.conflictingAltResolvedBySLL=i.ATN.INVALID_ALT_NUMBER;let I=process.hrtime(),H=super.adaptivePredict(b,R,D),N=process.hrtime(),V=(N[0]-I[0])*1e9;V===0?V=N[1]-I[1]:V+=1e9-I[1]+N[1],this.decisions[R].timeInPrediction+=V,this.decisions[R].invocations++;let O=this._sllStopIndex-this._startIndex+1;if(this.decisions[R].SLL_TotalLook+=O,this.decisions[R].SLL_MinLook=this.decisions[R].SLL_MinLook===0?O:Math.min(this.decisions[R].SLL_MinLook,O),O>this.decisions[R].SLL_MaxLook&&(this.decisions[R].SLL_MaxLook=O,this.decisions[R].SLL_MaxLookEvent=new u.LookaheadEventInfo(R,void 0,H,b,this._startIndex,this._sllStopIndex,!1)),this._llStopIndex>=0){let W=this._llStopIndex-this._startIndex+1;this.decisions[R].LL_TotalLook+=W,this.decisions[R].LL_MinLook=this.decisions[R].LL_MinLook===0?W:Math.min(this.decisions[R].LL_MinLook,W),W>this.decisions[R].LL_MaxLook&&(this.decisions[R].LL_MaxLook=W,this.decisions[R].LL_MaxLookEvent=new u.LookaheadEventInfo(R,void 0,H,b,this._startIndex,this._llStopIndex,!0))}return H}finally{this._input=void 0,this.currentDecision=-1}}getStartState(b,R,D,C){let I=super.getStartState(b,R,D,C);return this.currentState=I,I}computeStartState(b,R,D){let C=super.computeStartState(b,R,D);return this.currentState=C,C}computeReachSet(b,R,D,C){if(this._input===void 0)throw new Error("Invalid state");let I=super.computeReachSet(b,R,D,C);return I==null&&this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,R,this._input,this._startIndex,this._input.index)),this.currentState=I,I}getExistingTargetState(b,R){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");this.currentState.useContext?this._llStopIndex=this._input.index:this._sllStopIndex=this._input.index;let D=super.getExistingTargetState(b,R);if(D!=null&&(this.currentState=new x.SimulatorState(this.currentState.outerContext,D,this.currentState.useContext,this.currentState.remainingOuterContext),this.currentState.useContext?this.decisions[this.currentDecision].LL_DFATransitions++:this.decisions[this.currentDecision].SLL_DFATransitions++,D===s.ATNSimulator.ERROR)){let C=new x.SimulatorState(this.currentState.outerContext,b,this.currentState.useContext,this.currentState.remainingOuterContext);this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,C,this._input,this._startIndex,this._input.index))}return D}computeTargetState(b,R,D,C,I,H){let N=super.computeTargetState(b,R,D,C,I,H);return I?this.decisions[this.currentDecision].LL_ATNTransitions++:this.decisions[this.currentDecision].SLL_ATNTransitions++,N}evalSemanticContextImpl(b,R,D){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let C=super.evalSemanticContextImpl(b,R,D);if(!(b instanceof g.SemanticContext.PrecedencePredicate)){let H=this._llStopIndex>=0?this._llStopIndex:this._sllStopIndex;this.decisions[this.currentDecision].predicateEvals.push(new f.PredicateEvalInfo(this.currentState,this.currentDecision,this._input,this._startIndex,H,b,C,D))}return C}reportContextSensitivity(b,R,D,C,I){if(this._input===void 0)throw new Error("Invalid state");R!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new n.ContextSensitivityInfo(this.currentDecision,D,this._input,C,I)),super.reportContextSensitivity(b,R,D,C,I)}reportAttemptingFullContext(b,R,D,C,I){R!=null?this.conflictingAltResolvedBySLL=R.nextSetBit(0):this.conflictingAltResolvedBySLL=D.s0.configs.getRepresentedAlternatives().nextSetBit(0),this.decisions[this.currentDecision].LL_Fallback++,super.reportAttemptingFullContext(b,R,D,C,I)}reportAmbiguity(b,R,D,C,I,H,N){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let V;H!=null?V=H.nextSetBit(0):V=N.getRepresentedAlternatives().nextSetBit(0),this.conflictingAltResolvedBySLL!==i.ATN.INVALID_ALT_NUMBER&&V!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new n.ContextSensitivityInfo(this.currentDecision,this.currentState,this._input,D,C)),this.decisions[this.currentDecision].ambiguities.push(new t.AmbiguityInfo(this.currentDecision,this.currentState,H,this._input,D,C)),super.reportAmbiguity(b,R,D,C,I,H,N)}getDecisionInfo(){return this.decisions}getCurrentState(){return this.currentState}}return r([l.Override,e(0,l.NotNull)],E.prototype,"adaptivePredict",null),r([l.Override],E.prototype,"getStartState",null),r([l.Override],E.prototype,"computeStartState",null),r([l.Override],E.prototype,"computeReachSet",null),r([l.Override],E.prototype,"getExistingTargetState",null),r([l.Override],E.prototype,"computeTargetState",null),r([l.Override],E.prototype,"evalSemanticContextImpl",null),r([l.Override],E.prototype,"reportContextSensitivity",null),r([l.Override],E.prototype,"reportAttemptingFullContext",null),r([l.Override,e(0,l.NotNull),e(5,l.NotNull),e(6,l.NotNull)],E.prototype,"reportAmbiguity",null),Y_.ProfilingATNSimulator=E,Y_}var uD;function Og(){if(uD)return E_;uD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(C,I,H,N){var V=arguments.length,O=V<3?I:N===null?N=Object.getOwnPropertyDescriptor(I,H):N,W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(C,I,H,N);else for(var q=C.length-1;q>=0;q--)(W=C[q])&&(O=(V<3?W(O):V>3?W(I,H,O):W(I,H))||O);return V>3&&O&&Object.defineProperty(I,H,O),O},e=$&&$.__param||function(C,I){return function(H,N){I(H,N,C)}},t=$&&$.__awaiter||function(C,I,H,N){function V(O){return O instanceof H?O:new H(function(W){W(O)})}return new(H||(H=Promise))(function(O,W){function q(he){try{fe(N.next(he))}catch(Oe){W(Oe)}}function re(he){try{fe(N.throw(he))}catch(Oe){W(Oe)}}function fe(he){he.done?O(he.value):V(he.value).then(q,re)}fe((N=N.apply(C,I||[])).next())})};Object.defineProperty(E_,"__esModule",{value:!0}),E_.Parser=void 0;const i=Ei,s=dg,n=Cb(),o=Lb(),a=If,l=ng,u=Mu(),d=Ke,f=K1,g=Sg(),x=kg,E=Nu,P=Al,b=dr;class R{constructor(I,H){this.ruleNames=I,this.tokenStream=H}enterEveryRule(I){console.log("enter   "+this.ruleNames[I.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(I){console.log("exit    "+this.ruleNames[I.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(I){}visitTerminal(I){let H=I.parent.ruleContext,N=I.symbol;console.log("consume "+N+" rule "+this.ruleNames[H.ruleIndex])}}r([d.Override],R.prototype,"enterEveryRule",null),r([d.Override],R.prototype,"exitEveryRule",null),r([d.Override],R.prototype,"visitErrorNode",null),r([d.Override],R.prototype,"visitTerminal",null);class D extends E.Recognizer{constructor(I){super(),this._errHandler=new o.DefaultErrorStrategy,this._precedenceStack=new l.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=I}reset(I){(I===void 0||I)&&this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let H=this.interpreter;H!=null&&H.reset()}match(I){let H=this.currentToken;return H.type===I?(I===b.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(H=this._errHandler.recoverInline(this),this._buildParseTrees&&H.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,H))),H}matchWildcard(){let I=this.currentToken;return I.type>0?(this._errHandler.reportMatch(this),this.consume()):(I=this._errHandler.recoverInline(this),this._buildParseTrees&&I.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,I))),I}set buildParseTree(I){this._buildParseTrees=I}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(I){if(I==null)throw new TypeError("listener cannot be null");this._parseListeners.push(I)}removeParseListener(I){let H=this._parseListeners.findIndex(N=>N===I);H!==-1&&this._parseListeners.splice(H,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let I of this._parseListeners)I.enterEveryRule&&I.enterEveryRule(this._ctx),this._ctx.enterRule(I)}triggerExitRuleEvent(){for(let I=this._parseListeners.length-1;I>=0;I--){let H=this._parseListeners[I];this._ctx.exitRule(H),H.exitEveryRule&&H.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let I=this.serializedATN;if(I==null)throw new Error("The current parser does not support an ATN with bypass alternatives.");let H=D.bypassAltsAtnCache.get(I);if(H==null){let N=new s.ATNDeserializationOptions;N.isGenerateRuleBypassTransitions=!0,H=new n.ATNDeserializer(N).deserialize(i.toCharArray(I)),D.bypassAltsAtnCache.set(I,H)}return H}compileParseTreePattern(I,H,N){return t(this,void 0,void 0,function*(){if(!N){if(this.inputStream){let q=this.inputStream.tokenSource;q instanceof u.Lexer&&(N=q)}if(!N)throw new Error("Parser can't discover a lexer to use")}let V=N,O=yield Promise.resolve().then(()=>jj());return new O.ParseTreePatternMatcher(V,this).compile(I,H)})}get errorHandler(){return this._errHandler}set errorHandler(I){this._errHandler=I}get inputStream(){return this._input}set inputStream(I){this.reset(!1),this._input=I}get currentToken(){return this._input.LT(1)}notifyErrorListeners(I,H,N){H===void 0?H=this.currentToken:H===null&&(H=void 0),this._syntaxErrors++;let V=-1,O=-1;H!=null&&(V=H.line,O=H.charPositionInLine);let W=this.getErrorListenerDispatch();W.syntaxError&&W.syntaxError(this,H,V,O,I,N)}consume(){let I=this.currentToken;I.type!==D.EOF&&this.inputStream.consume();let H=this._parseListeners.length!==0;if(this._buildParseTrees||H)if(this._errHandler.inErrorRecoveryMode(this)){let N=this._ctx.addErrorNode(this.createErrorNode(this._ctx,I));if(H)for(let V of this._parseListeners)V.visitErrorNode&&V.visitErrorNode(N)}else{let N=this.createTerminalNode(this._ctx,I);if(this._ctx.addChild(N),H)for(let V of this._parseListeners)V.visitTerminal&&V.visitTerminal(N)}return I}createTerminalNode(I,H){return new P.TerminalNode(H)}createErrorNode(I,H){return new a.ErrorNode(H)}addContextToParseTree(){let I=this._ctx._parent;I!=null&&I.addChild(this._ctx)}enterRule(I,H,N){this.state=H,this._ctx=I,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(I,H,N){if(this.state=H,this._buildParseTrees){let V=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),V._parent=I,I.addChild(V)}this._ctx=I,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(I,H){if(I.altNumber=H,this._buildParseTrees&&this._ctx!==I){let N=this._ctx._parent;N!=null&&(N.removeLastChild(),N.addChild(I))}this._ctx=I}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(I,H,N,V){this.state=H,this._precedenceStack.push(V),this._ctx=I,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(I,H,N){let V=this._ctx;V._parent=I,V.invokingState=H,V._stop=this._input.tryLT(-1),this._ctx=I,this._ctx._start=V._start,this._buildParseTrees&&this._ctx.addChild(V),this.triggerEnterRuleEvent()}unrollRecursionContexts(I){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let H=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==I;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=I;H._parent=I,this._buildParseTrees&&I!=null&&I.addChild(H)}getInvokingContext(I){let H=this._ctx;for(;H&&H.ruleIndex!==I;)H=H._parent;return H}get context(){return this._ctx}set context(I){this._ctx=I}precpred(I,H){return H>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new x.ProxyParserErrorListener(this.getErrorListeners())}inContext(I){return!1}isExpectedToken(I){let H=this.interpreter.atn,N=this._ctx,V=H.states[this.state],O=H.nextTokens(V);if(O.contains(I))return!0;if(!O.contains(b.Token.EPSILON))return!1;for(;N!=null&&N.invokingState>=0&&O.contains(b.Token.EPSILON);){let q=H.states[N.invokingState].transition(0);if(O=H.nextTokens(q.followState),O.contains(I))return!0;N=N._parent}return!!(O.contains(b.Token.EPSILON)&&I===b.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let I=this.interpreter.atn,H=I.states[this.state];return I.nextTokens(H)}getRuleIndex(I){let H=this.getRuleIndexMap().get(I);return H!=null?H:-1}get ruleContext(){return this._ctx}getRuleInvocationStack(I=this._ctx){let H=I,N=this.ruleNames,V=[];for(;H!=null;){let O=H.ruleIndex;O<0?V.push("n/a"):V.push(N[O]),H=H._parent}return V}getDFAStrings(){let I=[];for(let H of this._interp.atn.decisionToDFA)I.push(H.toString(this.vocabulary,this.ruleNames));return I}dumpDFA(){let I=!1;for(let H of this._interp.atn.decisionToDFA)H.isEmpty||(I&&console.log(),console.log("Decision "+H.decision+":"),process.stdout.write(H.toString(this.vocabulary,this.ruleNames)),I=!0)}get sourceName(){return this._input.sourceName}get parseInfo(){return Promise.resolve().then(()=>lD()).then(I=>{let H=this.interpreter;if(H instanceof I.ProfilingATNSimulator)return new f.ParseInfo(H)})}setProfile(I){return t(this,void 0,void 0,function*(){let H=yield Promise.resolve().then(()=>lD()),N=this.interpreter;I?N instanceof H.ProfilingATNSimulator||(this.interpreter=new H.ProfilingATNSimulator(this)):N instanceof H.ProfilingATNSimulator&&(this.interpreter=new g.ParserATNSimulator(this.atn,this)),this.interpreter.setPredictionMode(N.getPredictionMode())})}set isTrace(I){I?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new R(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return this._tracer!=null}}return D.bypassAltsAtnCache=new Map,r([d.NotNull],D.prototype,"_errHandler",void 0),r([d.NotNull],D.prototype,"match",null),r([d.NotNull],D.prototype,"matchWildcard",null),r([d.NotNull],D.prototype,"getParseListeners",null),r([e(0,d.NotNull)],D.prototype,"addParseListener",null),r([d.NotNull],D.prototype,"getATNWithBypassAlts",null),r([d.NotNull,e(0,d.NotNull)],D.prototype,"errorHandler",null),r([d.Override],D.prototype,"inputStream",null),r([d.NotNull],D.prototype,"currentToken",null),r([e(0,d.NotNull)],D.prototype,"enterRule",null),r([d.Override,e(0,d.Nullable)],D.prototype,"precpred",null),r([d.Override],D.prototype,"getErrorListenerDispatch",null),r([d.NotNull],D.prototype,"getExpectedTokens",null),r([d.NotNull],D.prototype,"getExpectedTokensWithinCurrentRule",null),r([d.Override],D.prototype,"parseInfo",null),E_.Parser=D,E_}var cD;function J1(){if(cD)return v_;cD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var u=arguments.length,d=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(u<3?f(d):u>3?f(o,a,d):f(o,a))||d);return u>3&&d&&Object.defineProperty(o,a,d),d};Object.defineProperty(v_,"__esModule",{value:!0}),v_.NoViableAltException=void 0;const e=Og(),t=Ra,i=Ke;class s extends t.RecognitionException{constructor(o,a,l,u,d,f){o instanceof e.Parser&&(a===void 0&&(a=o.inputStream),l===void 0&&(l=o.currentToken),u===void 0&&(u=o.currentToken),f===void 0&&(f=o.context)),super(o,a,f),this._deadEndConfigs=d,this._startToken=l,this.setOffendingToken(o,u)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}}return r([i.NotNull],s.prototype,"_startToken",void 0),v_.NoViableAltException=s,v_}var hD;function Lb(){if(hD)return l_;hD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(g,x,E,P){var b=arguments.length,R=b<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,E):P,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(g,x,E,P);else for(var C=g.length-1;C>=0;C--)(D=g[C])&&(R=(b<3?D(R):b>3?D(x,E,R):D(x,E))||R);return b>3&&R&&Object.defineProperty(x,E,R),R},e=$&&$.__param||function(g,x){return function(E,P){x(E,P,g)}};Object.defineProperty(l_,"__esModule",{value:!0}),l_.DefaultErrorStrategy=void 0;const t=Pa,i=zi,s=Af,n=Sh,o=Ph(),a=J1(),l=Io(),u=dr,d=Ke;class f{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER}reset(x){this.endErrorCondition(x)}beginErrorCondition(x){this.errorRecoveryMode=!0}inErrorRecoveryMode(x){return this.errorRecoveryMode}endErrorCondition(x){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(x){this.endErrorCondition(x)}reportError(x,E){this.inErrorRecoveryMode(x)||(this.beginErrorCondition(x),E instanceof a.NoViableAltException?this.reportNoViableAlternative(x,E):E instanceof n.InputMismatchException?this.reportInputMismatch(x,E):E instanceof s.FailedPredicateException?this.reportFailedPredicate(x,E):(console.error(`unknown recognition error type: ${E}`),this.notifyErrorListeners(x,E.toString(),E)))}notifyErrorListeners(x,E,P){let b=P.getOffendingToken(x);b===void 0&&(b=null),x.notifyErrorListeners(E,b,P)}recover(x,E){this.lastErrorIndex===x.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(x.state)&&x.consume(),this.lastErrorIndex=x.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new o.IntervalSet),this.lastErrorStates.add(x.state);let P=this.getErrorRecoverySet(x);this.consumeUntil(x,P)}sync(x){let E=x.interpreter.atn.states[x.state];if(this.inErrorRecoveryMode(x))return;let b=x.inputStream.LA(1),R=x.atn.nextTokens(E);if(R.contains(b)){this.nextTokensContext=void 0,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER;return}if(R.contains(u.Token.EPSILON)){this.nextTokensContext===void 0&&(this.nextTokensContext=x.context,this.nextTokensState=x.state);return}switch(E.stateType){case i.ATNStateType.BLOCK_START:case i.ATNStateType.STAR_BLOCK_START:case i.ATNStateType.PLUS_BLOCK_START:case i.ATNStateType.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(x))return;throw new n.InputMismatchException(x);case i.ATNStateType.PLUS_LOOP_BACK:case i.ATNStateType.STAR_LOOP_BACK:this.reportUnwantedToken(x);let C=x.getExpectedTokens().or(this.getErrorRecoverySet(x));this.consumeUntil(x,C);break}}reportNoViableAlternative(x,E){let P=x.inputStream,b;P?E.startToken.type===u.Token.EOF?b="<EOF>":b=P.getTextFromRange(E.startToken,E.getOffendingToken()):b="<unknown input>";let R="no viable alternative at input "+this.escapeWSAndQuote(b);this.notifyErrorListeners(x,R,E)}reportInputMismatch(x,E){let P=E.expectedTokens,b=P?P.toStringVocabulary(x.vocabulary):"",R="mismatched input "+this.getTokenErrorDisplay(E.getOffendingToken(x))+" expecting "+b;this.notifyErrorListeners(x,R,E)}reportFailedPredicate(x,E){let b="rule "+x.ruleNames[x.context.ruleIndex]+" "+E.message;this.notifyErrorListeners(x,b,E)}reportUnwantedToken(x){if(this.inErrorRecoveryMode(x))return;this.beginErrorCondition(x);let E=x.currentToken,P=this.getTokenErrorDisplay(E),b=this.getExpectedTokens(x),R="extraneous input "+P+" expecting "+b.toStringVocabulary(x.vocabulary);x.notifyErrorListeners(R,E,void 0)}reportMissingToken(x){if(this.inErrorRecoveryMode(x))return;this.beginErrorCondition(x);let E=x.currentToken,b="missing "+this.getExpectedTokens(x).toStringVocabulary(x.vocabulary)+" at "+this.getTokenErrorDisplay(E);x.notifyErrorListeners(b,E,void 0)}recoverInline(x){let E=this.singleTokenDeletion(x);if(E)return x.consume(),E;if(this.singleTokenInsertion(x))return this.getMissingSymbol(x);throw this.nextTokensContext===void 0?new n.InputMismatchException(x):new n.InputMismatchException(x,this.nextTokensState,this.nextTokensContext)}singleTokenInsertion(x){let E=x.inputStream.LA(1),b=x.interpreter.atn.states[x.state].transition(0).target,R=x.interpreter.atn;return R.nextTokens(b,l.PredictionContext.fromRuleContext(R,x.context)).contains(E)?(this.reportMissingToken(x),!0):!1}singleTokenDeletion(x){let E=x.inputStream.LA(2);if(this.getExpectedTokens(x).contains(E)){this.reportUnwantedToken(x),x.consume();let b=x.currentToken;return this.reportMatch(x),b}}getMissingSymbol(x){let E=x.currentToken,P=this.getExpectedTokens(x),b=u.Token.INVALID_TYPE;P.isNil||(b=P.minElement);let R;b===u.Token.EOF?R="<missing EOF>":R="<missing "+x.vocabulary.getDisplayName(b)+">";let D=E,C=x.inputStream.tryLT(-1);return D.type===u.Token.EOF&&C!=null&&(D=C),this.constructToken(x.inputStream.tokenSource,b,R,D)}constructToken(x,E,P,b){let R=x.tokenFactory,D=b.tokenSource,C=D?D.inputStream:void 0;return R.create({source:x,stream:C},E,P,u.Token.DEFAULT_CHANNEL,-1,-1,b.line,b.charPositionInLine)}getExpectedTokens(x){return x.getExpectedTokens()}getTokenErrorDisplay(x){if(!x)return"<no token>";let E=this.getSymbolText(x);return E||(this.getSymbolType(x)===u.Token.EOF?E="<EOF>":E=`<${this.getSymbolType(x)}>`),this.escapeWSAndQuote(E)}getSymbolText(x){return x.text}getSymbolType(x){return x.type}escapeWSAndQuote(x){return x=x.replace(`
`,"\\n"),x=x.replace("\r","\\r"),x=x.replace("	","\\t"),"'"+x+"'"}getErrorRecoverySet(x){let E=x.interpreter.atn,P=x.context,b=new o.IntervalSet;for(;P&&P.invokingState>=0;){let D=E.states[P.invokingState].transition(0),C=E.nextTokens(D.followState);b.addAll(C),P=P._parent}return b.remove(u.Token.EPSILON),b}consumeUntil(x,E){let P=x.inputStream.LA(1);for(;P!==u.Token.EOF&&!E.contains(P);)x.consume(),P=x.inputStream.LA(1)}}return r([d.Override],f.prototype,"reset",null),r([e(0,d.NotNull)],f.prototype,"beginErrorCondition",null),r([d.Override],f.prototype,"inErrorRecoveryMode",null),r([e(0,d.NotNull)],f.prototype,"endErrorCondition",null),r([d.Override],f.prototype,"reportMatch",null),r([d.Override],f.prototype,"reportError",null),r([e(0,d.NotNull)],f.prototype,"notifyErrorListeners",null),r([d.Override],f.prototype,"recover",null),r([d.Override],f.prototype,"sync",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"reportNoViableAlternative",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"reportInputMismatch",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"reportFailedPredicate",null),r([e(0,d.NotNull)],f.prototype,"reportUnwantedToken",null),r([e(0,d.NotNull)],f.prototype,"reportMissingToken",null),r([d.Override],f.prototype,"recoverInline",null),r([e(0,d.NotNull)],f.prototype,"singleTokenInsertion",null),r([e(0,d.NotNull)],f.prototype,"singleTokenDeletion",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"getMissingSymbol",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"getExpectedTokens",null),r([e(0,d.NotNull)],f.prototype,"getSymbolText",null),r([e(0,d.NotNull)],f.prototype,"getSymbolType",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"escapeWSAndQuote",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"getErrorRecoverySet",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"consumeUntil",null),l_.DefaultErrorStrategy=f,l_}var dD;function gI(){if(dD)return a_;dD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,u){var d=arguments.length,f=d<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,u);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(a_,"__esModule",{value:!0}),a_.BailErrorStrategy=void 0;const e=Lb(),t=Sh,i=Ke,s=Dg;class n extends e.DefaultErrorStrategy{recover(a,l){for(let u=a.context;u;u=u.parent)u.exception=l;throw new s.ParseCancellationException(l)}recoverInline(a){let l=new t.InputMismatchException(a);for(let u=a.context;u;u=u.parent)u.exception=l;throw new s.ParseCancellationException(l)}sync(a){}}return r([i.Override],n.prototype,"recover",null),r([i.Override],n.prototype,"recoverInline",null),r([i.Override],n.prototype,"sync",null),a_.BailErrorStrategy=n,a_}var mI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(mI,"__esModule",{value:!0});var xI={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Dependents=void 0,function(e){e[e.SELF=0]="SELF",e[e.PARENTS=1]="PARENTS",e[e.CHILDREN=2]="CHILDREN",e[e.ANCESTORS=3]="ANCESTORS",e[e.DESCENDANTS=4]="DESCENDANTS",e[e.SIBLINGS=5]="SIBLINGS",e[e.PRECEEDING_SIBLINGS=6]="PRECEEDING_SIBLINGS",e[e.FOLLOWING_SIBLINGS=7]="FOLLOWING_SIBLINGS",e[e.PRECEEDING=8]="PRECEEDING",e[e.FOLLOWING=9]="FOLLOWING"}(r.Dependents||(r.Dependents={}))})(xI);var Z1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Lf=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},ro=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.DiagnosticErrorListener=void 0;const qj=Fo,Ji=Ke,zE=ln;class Oh{constructor(e=!0){this.exactOnly=e,this.exactOnly=e}syntaxError(e,t,i,s,n,o){}reportAmbiguity(e,t,i,s,n,o,a){if(this.exactOnly&&!n)return;let l=this.getDecisionDescription(e,t),u=this.getConflictingAlts(o,a),d=e.inputStream.getText(zE.Interval.of(i,s)),f=`reportAmbiguity d=${l}: ambigAlts=${u}, input='${d}'`;e.notifyErrorListeners(f)}reportAttemptingFullContext(e,t,i,s,n,o){let a=this.getDecisionDescription(e,t),l=e.inputStream.getText(zE.Interval.of(i,s)),u=`reportAttemptingFullContext d=${a}, input='${l}'`;e.notifyErrorListeners(u)}reportContextSensitivity(e,t,i,s,n,o){let a=this.getDecisionDescription(e,t),l=e.inputStream.getText(zE.Interval.of(i,s)),u=`reportContextSensitivity d=${a}, input='${l}'`;e.notifyErrorListeners(u)}getDecisionDescription(e,t){let i=t.decision,s=t.atnStartState.ruleIndex,n=e.ruleNames;if(s<0||s>=n.length)return i.toString();let o=n[s];return o?`${i} (${o})`:i.toString()}getConflictingAlts(e,t){if(e!=null)return e;let i=new qj.BitSet;for(let s of t)i.set(s.alt);return i}}Lf([Ji.Override],Oh.prototype,"syntaxError",null);Lf([Ji.Override,ro(0,Ji.NotNull),ro(1,Ji.NotNull),ro(6,Ji.NotNull)],Oh.prototype,"reportAmbiguity",null);Lf([Ji.Override,ro(0,Ji.NotNull),ro(1,Ji.NotNull),ro(5,Ji.NotNull)],Oh.prototype,"reportAttemptingFullContext",null);Lf([Ji.Override,ro(0,Ji.NotNull),ro(1,Ji.NotNull),ro(5,Ji.NotNull)],Oh.prototype,"reportContextSensitivity",null);Lf([ro(0,Ji.NotNull),ro(1,Ji.NotNull)],Oh.prototype,"getDecisionDescription",null);Lf([Ji.NotNull,ro(1,Ji.NotNull)],Oh.prototype,"getConflictingAlts",null);Z1.DiagnosticErrorListener=Oh;var ev={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Lu=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Qj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(ev,"__esModule",{value:!0});ev.LexerInterpreter=void 0;const Jj=Mu(),Zj=P1(),yI=Ke,Uf=Ke;let wa=class extends Jj.Lexer{constructor(e,t,i,s,n,o,a){if(super(a),o.grammarType!==0)throw new Error("IllegalArgumentException: The ATN must be a lexer ATN.");this._grammarFileName=e,this._atn=o,this._ruleNames=i.slice(0),this._channelNames=s.slice(0),this._modeNames=n.slice(0),this._vocabulary=t,this._interp=new Zj.LexerATNSimulator(o,this)}get atn(){return this._atn}get grammarFileName(){return this._grammarFileName}get ruleNames(){return this._ruleNames}get channelNames(){return this._channelNames}get modeNames(){return this._modeNames}get vocabulary(){return this._vocabulary}};Lu([yI.NotNull],wa.prototype,"_vocabulary",void 0);Lu([Uf.Override],wa.prototype,"atn",null);Lu([Uf.Override],wa.prototype,"grammarFileName",null);Lu([Uf.Override],wa.prototype,"ruleNames",null);Lu([Uf.Override],wa.prototype,"channelNames",null);Lu([Uf.Override],wa.prototype,"modeNames",null);Lu([Uf.Override],wa.prototype,"vocabulary",null);wa=Lu([Qj(1,yI.NotNull)],wa);ev.LexerInterpreter=wa;var vI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(vI,"__esModule",{value:!0});var tv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var eV=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(tv,"__esModule",{value:!0});tv.RuleContextWithAltNum=void 0;const tV=Oa(),rV=Ke,iV=Bo();class EI extends iV.ParserRuleContext{constructor(e,t){t!==void 0?super(e,t):super(),this._altNumber=tV.ATN.INVALID_ALT_NUMBER}get altNumber(){return this._altNumber}set altNumber(e){this._altNumber=e}}eV([rV.Override],EI.prototype,"altNumber",null);tv.RuleContextWithAltNum=EI;var rv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(rv,"__esModule",{value:!0});rv.RuleDependency=void 0;function nV(r){return(e,t,i)=>{}}rv.RuleDependency=nV;var iv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(iv,"__esModule",{value:!0});iv.RuleVersion=void 0;function sV(r){return(e,t,i)=>{}}iv.RuleVersion=sV;var SI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(SI,"__esModule",{value:!0});var wI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(wI,"__esModule",{value:!0});var AI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(AI,"__esModule",{value:!0});var ef={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var nv=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(ef,"__esModule",{value:!0});ef.RewriteOperation=ef.TokenStreamRewriter=void 0;const fD=ln,sv=Ke,bI=dr;class vn{constructor(e){this.tokens=e,this.programs=new Map,this.programs.set(vn.DEFAULT_PROGRAM_NAME,[]),this.lastRewriteTokenIndexes=new Map}getTokenStream(){return this.tokens}rollback(e,t=vn.DEFAULT_PROGRAM_NAME){let i=this.programs.get(t);i!=null&&this.programs.set(t,i.slice(vn.MIN_TOKEN_INDEX,e))}deleteProgram(e=vn.DEFAULT_PROGRAM_NAME){this.rollback(vn.MIN_TOKEN_INDEX,e)}insertAfter(e,t,i=vn.DEFAULT_PROGRAM_NAME){let s;typeof e=="number"?s=e:s=e.tokenIndex;let n=this.getProgram(i),o=new _D(this.tokens,s,n.length,t);n.push(o)}insertBefore(e,t,i=vn.DEFAULT_PROGRAM_NAME){let s;typeof e=="number"?s=e:s=e.tokenIndex;let n=this.getProgram(i),o=new cc(this.tokens,s,n.length,t);n.push(o)}replaceSingle(e,t){typeof e=="number"?this.replace(e,e,t):this.replace(e,e,t)}replace(e,t,i,s=vn.DEFAULT_PROGRAM_NAME){if(typeof e!="number"&&(e=e.tokenIndex),typeof t!="number"&&(t=t.tokenIndex),e>t||e<0||t<0||t>=this.tokens.size)throw new RangeError(`replace: range invalid: ${e}..${t}(size=${this.tokens.size})`);let n=this.getProgram(s),o=new od(this.tokens,e,t,n.length,i);n.push(o)}delete(e,t,i=vn.DEFAULT_PROGRAM_NAME){t===void 0&&(t=e),typeof e=="number"?this.replace(e,t,"",i):this.replace(e,t,"",i)}getLastRewriteTokenIndex(e=vn.DEFAULT_PROGRAM_NAME){let t=this.lastRewriteTokenIndexes.get(e);return t==null?-1:t}setLastRewriteTokenIndex(e,t){this.lastRewriteTokenIndexes.set(e,t)}getProgram(e){let t=this.programs.get(e);return t==null&&(t=this.initializeProgram(e)),t}initializeProgram(e){let t=[];return this.programs.set(e,t),t}getText(e,t=vn.DEFAULT_PROGRAM_NAME){let i;e instanceof fD.Interval?i=e:i=fD.Interval.of(0,this.tokens.size-1),typeof e=="string"&&(t=e);let s=this.programs.get(t),n=i.a,o=i.b;if(o>this.tokens.size-1&&(o=this.tokens.size-1),n<0&&(n=0),s==null||s.length===0)return this.tokens.getText(i);let a=[],l=this.reduceToSingleOperationPerIndex(s),u=n;for(;u<=o&&u<this.tokens.size;){let d=l.get(u);l.delete(u);let f=this.tokens.get(u);d==null?(f.type!==bI.Token.EOF&&a.push(String(f.text)),u++):u=d.execute(a)}if(o===this.tokens.size-1)for(let d of l.values())d.index>=this.tokens.size-1&&a.push(d.text.toString());return a.join("")}reduceToSingleOperationPerIndex(e){for(let i=0;i<e.length;i++){let s=e[i];if(s==null||!(s instanceof od))continue;let n=s,o=this.getKindOfOps(e,cc,i);for(let l of o)l.index===n.index?(e[l.instructionIndex]=void 0,n.text=l.text.toString()+(n.text!=null?n.text.toString():"")):l.index>n.index&&l.index<=n.lastIndex&&(e[l.instructionIndex]=void 0);let a=this.getKindOfOps(e,od,i);for(let l of a){if(l.index>=n.index&&l.lastIndex<=n.lastIndex){e[l.instructionIndex]=void 0;continue}let u=l.lastIndex<n.index||l.index>n.lastIndex;if(l.text==null&&n.text==null&&!u)e[l.instructionIndex]=void 0,n.index=Math.min(l.index,n.index),n.lastIndex=Math.max(l.lastIndex,n.lastIndex);else if(!u)throw new Error(`replace op boundaries of ${n} overlap with previous ${l}`)}}for(let i=0;i<e.length;i++){let s=e[i];if(s==null||!(s instanceof cc))continue;let n=s,o=this.getKindOfOps(e,cc,i);for(let l of o)l.index===n.index&&(l instanceof _D?(n.text=this.catOpText(l.text,n.text),e[l.instructionIndex]=void 0):l instanceof cc&&(n.text=this.catOpText(n.text,l.text),e[l.instructionIndex]=void 0));let a=this.getKindOfOps(e,od,i);for(let l of a){if(n.index===l.index){l.text=this.catOpText(n.text,l.text),e[i]=void 0;continue}if(n.index>=l.index&&n.index<=l.lastIndex)throw new Error(`insert op ${n} within boundaries of previous ${l}`)}}let t=new Map;for(let i of e)if(i!=null){if(t.get(i.index)!=null)throw new Error("should only be one op per index");t.set(i.index,i)}return t}catOpText(e,t){let i="",s="";return e!=null&&(i=e.toString()),t!=null&&(s=t.toString()),i+s}getKindOfOps(e,t,i){let s=[];for(let n=0;n<i&&n<e.length;n++){let o=e[n];o!=null&&o instanceof t&&s.push(o)}return s}}ef.TokenStreamRewriter=vn;vn.DEFAULT_PROGRAM_NAME="default";vn.PROGRAM_INIT_SIZE=100;vn.MIN_TOKEN_INDEX=0;class ov{constructor(e,t,i,s){this.tokens=e,this.instructionIndex=i,this.index=t,this.text=s===void 0?"":s}execute(e){return this.index}toString(){let e=this.constructor.name,t=e.indexOf("$");return e=e.substring(t+1,e.length),"<"+e+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}}nv([sv.Override],ov.prototype,"toString",null);ef.RewriteOperation=ov;class cc extends ov{constructor(e,t,i,s){super(e,t,i,s)}execute(e){return e.push(this.text.toString()),this.tokens.get(this.index).type!==bI.Token.EOF&&e.push(String(this.tokens.get(this.index).text)),this.index+1}}nv([sv.Override],cc.prototype,"execute",null);class _D extends cc{constructor(e,t,i,s){super(e,t+1,i,s)}}class od extends ov{constructor(e,t,i,s,n){super(e,t,s,n),this.lastIndex=i}execute(e){return this.text!=null&&e.push(this.text.toString()),this.lastIndex+1}toString(){return this.text==null?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}}nv([sv.Override],od.prototype,"execute",null);nv([sv.Override],od.prototype,"toString",null);var kI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(kI,"__esModule",{value:!0});var TI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(TI,"__esModule",{value:!0});(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__createBinding||(Object.create?function(i,s,n,o){o===void 0&&(o=n),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[n]}})}:function(i,s,n,o){o===void 0&&(o=n),i[o]=s[n]}),t=$&&$.__exportStar||function(i,s){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(s,n)&&e(s,i,n)};Object.defineProperty(r,"__esModule",{value:!0}),t(l3,r),t(u3,r),t(f1,r),t(gI(),r),t(Pg,r),t(mI,r),t(Y1,r),t(Mb,r),t(Tg,r),t(Ou,r),t(E1,r),t(Mf,r),t(ag,r),t(Lb(),r),t(xI,r),t(Z1,r),t(Af,r),t(Sh,r),t(fI(),r),t(ml,r),t(Mu(),r),t(ev,r),t(Th,r),t(Rg,r),t(J1(),r),t(Og(),r),t(vI,r),t(_I(),r),t(Bo(),r),t(Tf,r),t(kg,r),t(Ra,r),t(Nu,r),t(iI(),r),t(tv,r),t(rv,r),t(iv,r),t(dr,r),t(SI,r),t(wI,r),t(AI,r),t(ef,r),t(kI,r),t(yl,r),t(TI,r)})(ow);class pD{constructor(){c(this,"_isValid",!0);c(this,"_errorMessage")}get isValid(){return this._isValid}get errorMessage(){return this._errorMessage}syntaxError(e,t,i,s,n,o){this._isValid=!1,this._errorMessage=`line ${i}:${s} ${n}`}}var ip=Oa(),PI=Cb(),Vl=J1(),oV=Og(),Kr=Bo(),aV=Sg();const le=class extends oV.Parser{get vocabulary(){return le.VOCABULARY}get grammarFileName(){return"inline.g4"}get ruleNames(){return le.ruleNames}get serializedATN(){return le._serializedATN}createFailedPredicateException(e,t){return new N3(this,e,t)}constructor(e){super(e),this._interp=new aV.ParserATNSimulator(le._ATN,this)}inlineStyle(){let e=new lV(this._ctx,this.state);this.enterRule(e,0,le.RULE_inlineStyle);try{let t;this.enterOuterAlt(e,1);{for(this.state=48,this.ws(),this.state=55,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,1,this._ctx);t!==2&&t!==ip.ATN.INVALID_ALT_NUMBER;){if(t===1)switch(this.state=53,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,0,this._ctx)){case 1:this.state=49,this.declarationList();break;case 2:this.state=50,this.any_();break;case 3:this.state=51,this.match(le.T__0),this.state=52,this.ws();break}this.state=57,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,1,this._ctx)}this.state=58,this.ws()}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}declarationList(){let e=new pw(this._ctx,this.state);this.enterRule(e,2,le.RULE_declarationList);let t;try{let i;this.enterOuterAlt(e,1);{for(this.state=64,this._errHandler.sync(this),t=this._input.LA(1);t===le.T__0;)this.state=60,this.match(le.T__0),this.state=61,this.ws(),this.state=66,this._errHandler.sync(this),t=this._input.LA(1);for(this.state=67,this.declaration(),this.state=68,this.ws(),this.state=76,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,4,this._ctx);i!==2&&i!==ip.ATN.INVALID_ALT_NUMBER;){if(i===1)switch(this.state=69,this.match(le.T__0),this.state=70,this.ws(),this.state=72,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,3,this._ctx)){case 1:this.state=71,this.declaration();break}this.state=78,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,4,this._ctx)}}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}operator_(){let e=new _y(this._ctx,this.state);this.enterRule(e,4,le.RULE_operator_);try{switch(this.state=85,this._errHandler.sync(this),this._input.LA(1)){case le.T__1:e=new jE(e),this.enterOuterAlt(e,1),this.state=79,this.match(le.T__1),this.state=80,this.ws();break;case le.Comma:e=new jE(e),this.enterOuterAlt(e,2),this.state=81,this.match(le.Comma),this.state=82,this.ws();break;case le.Space:e=new jE(e),this.enterOuterAlt(e,3),this.state=83,this.match(le.Space),this.state=84,this.ws();break;default:throw new Vl.NoViableAltException(this)}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}property_(){let e=new Ng(this._ctx,this.state);this.enterRule(e,6,le.RULE_property_);try{switch(this.state=96,this._errHandler.sync(this),this._input.LA(1)){case le.Ident:e=new gD(e),this.enterOuterAlt(e,1),this.state=87,this.ident(),this.state=88,this.ws();break;case le.Variable:e=new gD(e),this.enterOuterAlt(e,2),this.state=90,this.match(le.Variable),this.state=91,this.ws();break;case le.T__2:e=new mD(e),this.enterOuterAlt(e,3),this.state=92,this.match(le.T__2),this.state=93,this.ident();break;case le.T__3:e=new mD(e),this.enterOuterAlt(e,4),this.state=94,this.match(le.T__3),this.state=95,this.ident();break;default:throw new Vl.NoViableAltException(this)}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}declaration(){let e=new k0(this._ctx,this.state);this.enterRule(e,8,le.RULE_declaration);try{switch(this.state=108,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,7,this._ctx)){case 1:e=new uV(e),this.enterOuterAlt(e,1),this.state=98,this.property_(),this.state=99,this.match(le.T__4),this.state=100,this.ws(),this.state=101,this.expr();break;case 2:e=new cV(e),this.enterOuterAlt(e,2),this.state=103,this.property_(),this.state=104,this.match(le.T__4),this.state=105,this.ws(),this.state=106,this.value();break}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}value(){let e=new RI(this._ctx,this.state);this.enterRule(e,10,le.RULE_value);try{let t;this.enterOuterAlt(e,1);{this.state=111,this._errHandler.sync(this),t=1;do{switch(t){case 1:this.state=110,this.any_();break;default:throw new Vl.NoViableAltException(this)}this.state=113,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,8,this._ctx)}while(t!==2&&t!==ip.ATN.INVALID_ALT_NUMBER)}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expr(){let e=new Ub(this._ctx,this.state);this.enterRule(e,12,le.RULE_expr);let t;try{let i;for(this.enterOuterAlt(e,1),this.state=115,this.term(),this.state=122,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,10,this._ctx);i!==2&&i!==ip.ATN.INVALID_ALT_NUMBER;)i===1&&(this.state=117,this._errHandler.sync(this),t=this._input.LA(1),(t&-32)===0&&(1<<t&(1<<le.T__1|1<<le.Space|1<<le.Comma))!==0&&(this.state=116,this.operator_()),this.state=119,this.term()),this.state=124,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,10,this._ctx)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}term(){let e=new T0(this._ctx,this.state);this.enterRule(e,14,le.RULE_term);try{switch(this.state=150,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,11,this._ctx)){case 1:e=new Ks(e),this.enterOuterAlt(e,1),this.state=125,this.number(),this.state=126,this.ws();break;case 2:e=new Ks(e),this.enterOuterAlt(e,2),this.state=128,this.percentage(),this.state=129,this.ws();break;case 3:e=new Ks(e),this.enterOuterAlt(e,3),this.state=131,this.dimension(),this.state=132,this.ws();break;case 4:e=new Ks(e),this.enterOuterAlt(e,4),this.state=134,this.match(le.String_),this.state=135,this.ws();break;case 5:e=new Ks(e),this.enterOuterAlt(e,5),this.state=136,this.match(le.UnicodeRange),this.state=137,this.ws();break;case 6:e=new Ks(e),this.enterOuterAlt(e,6),this.state=138,this.ident(),this.state=139,this.ws();break;case 7:e=new Ks(e),this.enterOuterAlt(e,7),this.state=141,this.var_();break;case 8:e=new Ks(e),this.enterOuterAlt(e,8),this.state=142,this.match(le.Uri),this.state=143,this.ws();break;case 9:e=new Ks(e),this.enterOuterAlt(e,9),this.state=144,this.hexcolor();break;case 10:e=new Ks(e),this.enterOuterAlt(e,10),this.state=145,this.calc();break;case 11:e=new Ks(e),this.enterOuterAlt(e,11),this.state=146,this.function_();break;case 12:e=new hV(e),this.enterOuterAlt(e,12),this.state=147,this.unknownDimension(),this.state=148,this.ws();break}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}function_(){let e=new DI(this._ctx,this.state);this.enterRule(e,16,le.RULE_function_);try{this.enterOuterAlt(e,1),this.state=152,this.match(le.Function_),this.state=153,this.ws(),this.state=154,this.expr(),this.state=155,this.match(le.T__5),this.state=156,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}hexcolor(){let e=new CI(this._ctx,this.state);this.enterRule(e,18,le.RULE_hexcolor);try{this.enterOuterAlt(e,1),this.state=158,this.match(le.Hash),this.state=159,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}number(){let e=new tf(this._ctx,this.state);this.enterRule(e,20,le.RULE_number);let t;try{this.enterOuterAlt(e,1),this.state=162,this._errHandler.sync(this),t=this._input.LA(1),(t===le.Plus||t===le.Minus)&&(this.state=161,t=this._input.LA(1),t===le.Plus||t===le.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=164,this.match(le.Number)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}percentage(){let e=new av(this._ctx,this.state);this.enterRule(e,22,le.RULE_percentage);let t;try{this.enterOuterAlt(e,1),this.state=167,this._errHandler.sync(this),t=this._input.LA(1),(t===le.Plus||t===le.Minus)&&(this.state=166,t=this._input.LA(1),t===le.Plus||t===le.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=169,this.match(le.Percentage)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}dimension(){let e=new lv(this._ctx,this.state);this.enterRule(e,24,le.RULE_dimension);let t;try{this.enterOuterAlt(e,1),this.state=172,this._errHandler.sync(this),t=this._input.LA(1),(t===le.Plus||t===le.Minus)&&(this.state=171,t=this._input.LA(1),t===le.Plus||t===le.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=174,this.match(le.Dimension)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}unknownDimension(){let e=new uv(this._ctx,this.state);this.enterRule(e,26,le.RULE_unknownDimension);let t;try{this.enterOuterAlt(e,1),this.state=177,this._errHandler.sync(this),t=this._input.LA(1),(t===le.Plus||t===le.Minus)&&(this.state=176,t=this._input.LA(1),t===le.Plus||t===le.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=179,this.match(le.UnknownDimension)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}any_(){let e=new Aa(this._ctx,this.state);this.enterRule(e,28,le.RULE_any_);let t;try{switch(this.state=246,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,22,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=181,this.ident(),this.state=182,this.ws();break;case 2:this.enterOuterAlt(e,2),this.state=184,this.number(),this.state=185,this.ws();break;case 3:this.enterOuterAlt(e,3),this.state=187,this.percentage(),this.state=188,this.ws();break;case 4:this.enterOuterAlt(e,4),this.state=190,this.dimension(),this.state=191,this.ws();break;case 5:this.enterOuterAlt(e,5),this.state=193,this.unknownDimension(),this.state=194,this.ws();break;case 6:this.enterOuterAlt(e,6),this.state=196,this.match(le.String_),this.state=197,this.ws();break;case 7:this.enterOuterAlt(e,7),this.state=198,this.match(le.Uri),this.state=199,this.ws();break;case 8:this.enterOuterAlt(e,8),this.state=200,this.match(le.Hash),this.state=201,this.ws();break;case 9:this.enterOuterAlt(e,9),this.state=202,this.match(le.UnicodeRange),this.state=203,this.ws();break;case 10:this.enterOuterAlt(e,10),this.state=204,this.match(le.Includes),this.state=205,this.ws();break;case 11:this.enterOuterAlt(e,11),this.state=206,this.match(le.DashMatch),this.state=207,this.ws();break;case 12:this.enterOuterAlt(e,12),this.state=208,this.match(le.T__4),this.state=209,this.ws();break;case 13:this.enterOuterAlt(e,13);{for(this.state=210,this.match(le.Function_),this.state=211,this.ws(),this.state=216,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<le.T__0|1<<le.T__4|1<<le.T__6|1<<le.T__7|1<<le.Includes|1<<le.DashMatch|1<<le.Hash|1<<le.Percentage|1<<le.Uri|1<<le.UnicodeRange|1<<le.Dimension|1<<le.UnknownDimension|1<<le.Plus|1<<le.Minus|1<<le.Number|1<<le.String_))!==0||t===le.Ident||t===le.Function_;){switch(this.state=214,this._errHandler.sync(this),this._input.LA(1)){case le.T__4:case le.T__6:case le.T__7:case le.Includes:case le.DashMatch:case le.Hash:case le.Percentage:case le.Uri:case le.UnicodeRange:case le.Dimension:case le.UnknownDimension:case le.Plus:case le.Minus:case le.Number:case le.String_:case le.Ident:case le.Function_:this.state=212,this.any_();break;case le.T__0:this.state=213,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=218,this._errHandler.sync(this),t=this._input.LA(1)}this.state=219,this.match(le.T__5),this.state=220,this.ws()}break;case 14:this.enterOuterAlt(e,14);{for(this.state=222,this.match(le.T__6),this.state=223,this.ws(),this.state=228,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<le.T__0|1<<le.T__4|1<<le.T__6|1<<le.T__7|1<<le.Includes|1<<le.DashMatch|1<<le.Hash|1<<le.Percentage|1<<le.Uri|1<<le.UnicodeRange|1<<le.Dimension|1<<le.UnknownDimension|1<<le.Plus|1<<le.Minus|1<<le.Number|1<<le.String_))!==0||t===le.Ident||t===le.Function_;){switch(this.state=226,this._errHandler.sync(this),this._input.LA(1)){case le.T__4:case le.T__6:case le.T__7:case le.Includes:case le.DashMatch:case le.Hash:case le.Percentage:case le.Uri:case le.UnicodeRange:case le.Dimension:case le.UnknownDimension:case le.Plus:case le.Minus:case le.Number:case le.String_:case le.Ident:case le.Function_:this.state=224,this.any_();break;case le.T__0:this.state=225,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=230,this._errHandler.sync(this),t=this._input.LA(1)}this.state=231,this.match(le.T__5),this.state=232,this.ws()}break;case 15:this.enterOuterAlt(e,15);{for(this.state=234,this.match(le.T__7),this.state=235,this.ws(),this.state=240,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<le.T__0|1<<le.T__4|1<<le.T__6|1<<le.T__7|1<<le.Includes|1<<le.DashMatch|1<<le.Hash|1<<le.Percentage|1<<le.Uri|1<<le.UnicodeRange|1<<le.Dimension|1<<le.UnknownDimension|1<<le.Plus|1<<le.Minus|1<<le.Number|1<<le.String_))!==0||t===le.Ident||t===le.Function_;){switch(this.state=238,this._errHandler.sync(this),this._input.LA(1)){case le.T__4:case le.T__6:case le.T__7:case le.Includes:case le.DashMatch:case le.Hash:case le.Percentage:case le.Uri:case le.UnicodeRange:case le.Dimension:case le.UnknownDimension:case le.Plus:case le.Minus:case le.Number:case le.String_:case le.Ident:case le.Function_:this.state=236,this.any_();break;case le.T__0:this.state=237,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=242,this._errHandler.sync(this),t=this._input.LA(1)}this.state=243,this.match(le.T__8),this.state=244,this.ws()}break}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}generalEnclosed(){let e=new dV(this._ctx,this.state);this.enterRule(e,30,le.RULE_generalEnclosed);let t;try{this.enterOuterAlt(e,1);{for(this.state=248,t=this._input.LA(1),t===le.T__6||t===le.Function_?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=253,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<le.T__0|1<<le.T__4|1<<le.T__6|1<<le.T__7|1<<le.Includes|1<<le.DashMatch|1<<le.Hash|1<<le.Percentage|1<<le.Uri|1<<le.UnicodeRange|1<<le.Dimension|1<<le.UnknownDimension|1<<le.Plus|1<<le.Minus|1<<le.Number|1<<le.String_))!==0||t===le.Ident||t===le.Function_;){switch(this.state=251,this._errHandler.sync(this),this._input.LA(1)){case le.T__4:case le.T__6:case le.T__7:case le.Includes:case le.DashMatch:case le.Hash:case le.Percentage:case le.Uri:case le.UnicodeRange:case le.Dimension:case le.UnknownDimension:case le.Plus:case le.Minus:case le.Number:case le.String_:case le.Ident:case le.Function_:this.state=249,this.any_();break;case le.T__0:this.state=250,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=255,this._errHandler.sync(this),t=this._input.LA(1)}this.state=256,this.match(le.T__5)}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}unused(){let e=new P0(this._ctx,this.state);this.enterRule(e,32,le.RULE_unused);try{this.enterOuterAlt(e,1),this.state=258,this.match(le.T__0),this.state=259,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}var_(){let e=new OI(this._ctx,this.state);this.enterRule(e,34,le.RULE_var_);try{this.enterOuterAlt(e,1),this.state=261,this.match(le.Var),this.state=262,this.ws(),this.state=263,this.match(le.Variable),this.state=264,this.ws(),this.state=265,this.match(le.T__5),this.state=266,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}calc(){let e=new NI(this._ctx,this.state);this.enterRule(e,36,le.RULE_calc);try{this.enterOuterAlt(e,1),this.state=268,this.match(le.Calc),this.state=269,this.ws(),this.state=270,this.calcSum(),this.state=271,this.match(le.T__5),this.state=272,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}calcSum(){let e=new Gb(this._ctx,this.state);this.enterRule(e,38,le.RULE_calcSum);let t;try{for(this.enterOuterAlt(e,1),this.state=274,this.calcProduct(),this.state=285,this._errHandler.sync(this),t=this._input.LA(1);t===le.Space;)this.state=275,this.match(le.Space),this.state=276,this.ws(),this.state=277,t=this._input.LA(1),t===le.Plus||t===le.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=278,this.ws(),this.state=279,this.match(le.Space),this.state=280,this.ws(),this.state=281,this.calcProduct(),this.state=287,this._errHandler.sync(this),t=this._input.LA(1)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}calcProduct(){let e=new gw(this._ctx,this.state);this.enterRule(e,40,le.RULE_calcProduct);let t;try{for(this.enterOuterAlt(e,1),this.state=288,this.calcValue(),this.state=300,this._errHandler.sync(this),t=this._input.LA(1);t===le.T__1||t===le.T__2;){switch(this.state=298,this._errHandler.sync(this),this._input.LA(1)){case le.T__2:this.state=289,this.match(le.T__2),this.state=290,this.ws(),this.state=291,this.calcValue();break;case le.T__1:this.state=293,this.match(le.T__1),this.state=294,this.ws(),this.state=295,this.number(),this.state=296,this.ws();break;default:throw new Vl.NoViableAltException(this)}this.state=302,this._errHandler.sync(this),t=this._input.LA(1)}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}calcValue(){let e=new mw(this._ctx,this.state);this.enterRule(e,42,le.RULE_calcValue);try{switch(this.state=321,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,28,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=303,this.number(),this.state=304,this.ws();break;case 2:this.enterOuterAlt(e,2),this.state=306,this.dimension(),this.state=307,this.ws();break;case 3:this.enterOuterAlt(e,3),this.state=309,this.unknownDimension(),this.state=310,this.ws();break;case 4:this.enterOuterAlt(e,4),this.state=312,this.percentage(),this.state=313,this.ws();break;case 5:this.enterOuterAlt(e,5),this.state=315,this.match(le.T__6),this.state=316,this.ws(),this.state=317,this.calcSum(),this.state=318,this.match(le.T__5),this.state=319,this.ws();break}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}ident(){let e=new Ig(this._ctx,this.state);this.enterRule(e,44,le.RULE_ident);try{this.enterOuterAlt(e,1),this.state=323,this.match(le.Ident)}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}ws(){let e=new Cr(this._ctx,this.state);this.enterRule(e,46,le.RULE_ws);let t;try{let i;for(this.enterOuterAlt(e,1),this.state=328,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,29,this._ctx);i!==2&&i!==ip.ATN.INVALID_ALT_NUMBER;)i===1&&(this.state=325,t=this._input.LA(1),t===le.Comment||t===le.Space?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=330,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,29,this._ctx)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}static get _ATN(){return le.__ATN||(le.__ATN=new PI.ATNDeserializer().deserialize(vb(le._serializedATN))),le.__ATN}};let je=le;c(je,"T__0",1),c(je,"T__1",2),c(je,"T__2",3),c(je,"T__3",4),c(je,"T__4",5),c(je,"T__5",6),c(je,"T__6",7),c(je,"T__7",8),c(je,"T__8",9),c(je,"Comment",10),c(je,"Space",11),c(je,"Includes",12),c(je,"DashMatch",13),c(je,"Hash",14),c(je,"Important",15),c(je,"Percentage",16),c(je,"Uri",17),c(je,"UnicodeRange",18),c(je,"Dimension",19),c(je,"UnknownDimension",20),c(je,"Plus",21),c(je,"Minus",22),c(je,"Greater",23),c(je,"Comma",24),c(je,"Tilde",25),c(je,"PseudoNot",26),c(je,"Number",27),c(je,"String_",28),c(je,"PrefixMatch",29),c(je,"SuffixMatch",30),c(je,"SubstringMatch",31),c(je,"Or",32),c(je,"Calc",33),c(je,"Variable",34),c(je,"Var",35),c(je,"Ident",36),c(je,"Function_",37),c(je,"RULE_inlineStyle",0),c(je,"RULE_declarationList",1),c(je,"RULE_operator_",2),c(je,"RULE_property_",3),c(je,"RULE_declaration",4),c(je,"RULE_value",5),c(je,"RULE_expr",6),c(je,"RULE_term",7),c(je,"RULE_function_",8),c(je,"RULE_hexcolor",9),c(je,"RULE_number",10),c(je,"RULE_percentage",11),c(je,"RULE_dimension",12),c(je,"RULE_unknownDimension",13),c(je,"RULE_any_",14),c(je,"RULE_generalEnclosed",15),c(je,"RULE_unused",16),c(je,"RULE_var_",17),c(je,"RULE_calc",18),c(je,"RULE_calcSum",19),c(je,"RULE_calcProduct",20),c(je,"RULE_calcValue",21),c(je,"RULE_ident",22),c(je,"RULE_ws",23),c(je,"ruleNames",["inlineStyle","declarationList","operator_","property_","declaration","value","expr","term","function_","hexcolor","number","percentage","dimension","unknownDimension","any_","generalEnclosed","unused","var_","calc","calcSum","calcProduct","calcValue","ident","ws"]),c(je,"_LITERAL_NAMES",[void 0,"';'","'/'","'*'","'_'","':'","')'","'('","'['","']'",void 0,void 0,"'~='","'|='",void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'+'","'-'","'>'","','","'~'",void 0,void 0,void 0,"'^='","'$='","'*='",void 0,"'calc('",void 0,"'var('"]),c(je,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"Comment","Space","Includes","DashMatch","Hash","Important","Percentage","Uri","UnicodeRange","Dimension","UnknownDimension","Plus","Minus","Greater","Comma","Tilde","PseudoNot","Number","String_","PrefixMatch","SuffixMatch","SubstringMatch","Or","Calc","Variable","Var","Ident","Function_"]),c(je,"VOCABULARY",new Ab(le._LITERAL_NAMES,le._SYMBOLIC_NAMES,[])),c(je,"_serializedATN",`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241'\u014E					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r												\x078
\f;\v\x07A
\fD\vK
\x07M
\fP\vX
c
o
\x07\x07r
\x07\r\x07\x07s\b\b\bx
\b\b\x07\b{
\b\f\b\b~\v\b																										\x99
	





\v\v\v\f\f\xA5
\f\f\f\r\r\xAA
\r\r\r\xAF
\xB4
\x07\xD9
\f\xDC\v\x07\xE5
\f\xE8\v\x07\xF1
\f\xF4\v\xF9
\x07\xFE
\f\u0101\v\x07\u011E
\f\u0121\v\x07\u012D
\f\u0130\v\u0144
\x07\u0149
\f\u014C\v\b
\f "$&(*,.0		''\f\r\u01712BW\bb
n\fqu\x98\x9A\xA0\xA4\xA9\xAE\xB3\xF8 \xFA"\u0104$\u0107&\u010E(\u0114*\u0122,\u0143.\u01450\u014A290384856\x076807374758;979::<;9<=0=>?\x07?A0@>ADB@BCCEDBEF
FN0GH\x07HJ0IK
JIJKKMLGMPNLNOOPNQR\x07RX0ST\x07TX0UV\x07\rVX0WQWSWUX\x07YZ.Z[0[c\\]\x07$]c0^_\x07_c.\`a\x07ac.bYb\\b^b\`c	de\bef\x07\x07fg0gh\bhoij\bjk\x07\x07kl0lm\f\x07mondnio\vprqprssqstt\ru|	vxwvwxxyy{	zw{~|z|}}~|\x7F\x80\f\x80\x810\x81\x99\x82\x83\r\x83\x840\x84\x99\x85\x86\x86\x870\x87\x99\x88\x89\x07\x89\x990\x8A\x8B\x07\x8B\x990\x8C\x8D.\x8D\x8E0\x8E\x99\x8F\x99$\x90\x91\x07\x91\x990\x92\x99\v\x93\x99&\x94\x99
\x95\x96\x96\x970\x97\x99\x98\x7F\x98\x82\x98\x85\x98\x88\x98\x8A\x98\x8C\x98\x8F\x98\x90\x98\x92\x98\x93\x98\x94\x98\x95\x99\x9A\x9B\x07'\x9B\x9C0\x9C\x9D\b\x9D\x9E\x07\b\x9E\x9F0\x9F\xA0\xA1\x07\xA1\xA20\xA2\xA3\xA5	\xA4\xA3\xA4\xA5\xA5\xA6\xA6\xA7\x07\xA7\xA8\xAA	\xA9\xA8\xA9\xAA\xAA\xAB\xAB\xAC\x07\xAC\xAD\xAF	\xAE\xAD\xAE\xAF\xAF\xB0\xB0\xB1\x07\xB1\x1B\xB2\xB4	\xB3\xB2\xB3\xB4\xB4\xB5\xB5\xB6\x07\xB6\xB7\xB8.\xB8\xB90\xB9\xF9\xBA\xBB\f\xBB\xBC0\xBC\xF9\xBD\xBE\r\xBE\xBF0\xBF\xF9\xC0\xC1\xC1\xC20\xC2\xF9\xC3\xC4\xC4\xC50\xC5\xF9\xC6\xC7\x07\xC7\xF90\xC8\xC9\x07\xC9\xF90\xCA\xCB\x07\xCB\xF90\xCC\xCD\x07\xCD\xF90\xCE\xCF\x07\xCF\xF90\xD0\xD1\x07\xD1\xF90\xD2\xD3\x07\x07\xD3\xF90\xD4\xD5\x07'\xD5\xDA0\xD6\xD9\xD7\xD9"\xD8\xD6\xD8\xD7\xD9\xDC\xDA\xD8\xDA\xDB\xDB\xDD\xDC\xDA\xDD\xDE\x07\b\xDE\xDF0\xDF\xF9\xE0\xE1\x07	\xE1\xE60\xE2\xE5\xE3\xE5"\xE4\xE2\xE4\xE3\xE5\xE8\xE6\xE4\xE6\xE7\xE7\xE9\xE8\xE6\xE9\xEA\x07\b\xEA\xEB0\xEB\xF9\xEC\xED\x07
\xED\xF20\xEE\xF1\xEF\xF1"\xF0\xEE\xF0\xEF\xF1\xF4\xF2\xF0\xF2\xF3\xF3\xF5\xF4\xF2\xF5\xF6\x07\v\xF6\xF70\xF7\xF9\xF8\xB7\xF8\xBA\xF8\xBD\xF8\xC0\xF8\xC3\xF8\xC6\xF8\xC8\xF8\xCA\xF8\xCC\xF8\xCE\xF8\xD0\xF8\xD2\xF8\xD4\xF8\xE0\xF8\xEC\xF9\xFA\xFF	\xFB\xFE\xFC\xFE"\xFD\xFB\xFD\xFC\xFE\u0101\xFF\xFD\xFF\u0100\u0100\u0102\u0101\xFF\u0102\u0103\x07\b\u0103!\u0104\u0105\x07\u0105\u01060\u0106#\u0107\u0108\x07%\u0108\u01090\u0109\u010A\x07$\u010A\u010B0\u010B\u010C\x07\b\u010C\u010D0\u010D%\u010E\u010F\x07#\u010F\u01100\u0110\u0111(\u0111\u0112\x07\b\u0112\u01130\u0113'\u0114\u011F*\u0115\u0116\x07\r\u0116\u01170\u0117\u0118	\u0118\u01190\u0119\u011A\x07\r\u011A\u011B0\u011B\u011C*\u011C\u011E\u011D\u0115\u011E\u0121\u011F\u011D\u011F\u0120\u0120)\u0121\u011F\u0122\u012E,\u0123\u0124\x07\u0124\u01250\u0125\u0126,\u0126\u012D\u0127\u0128\x07\u0128\u01290\u0129\u012A\f\u012A\u012B0\u012B\u012D\u012C\u0123\u012C\u0127\u012D\u0130\u012E\u012C\u012E\u012F\u012F+\u0130\u012E\u0131\u0132\f\u0132\u01330\u0133\u0144\u0134\u0135\u0135\u01360\u0136\u0144\u0137\u0138\u0138\u01390\u0139\u0144\u013A\u013B\r\u013B\u013C0\u013C\u0144\u013D\u013E\x07	\u013E\u013F0\u013F\u0140(\u0140\u0141\x07\b\u0141\u01420\u0142\u0144\u0143\u0131\u0143\u0134\u0143\u0137\u0143\u013A\u0143\u013D\u0144-\u0145\u0146\x07&\u0146/\u0147\u0149	\u0148\u0147\u0149\u014C\u014A\u0148\u014A\u014B\u014B1\u014C\u014A 79BJNWbnsw|\x98\xA4\xA9\xAE\xB3\xD8\xDA\xE4\xE6\xF0\xF2\xF8\xFD\xFF\u011F\u012C\u012E\u0143\u014A`),c(je,"__ATN");class lV extends Kr.ParserRuleContext{ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}declarationList(e){return e===void 0?this.getRuleContexts(pw):this.getRuleContext(e,pw)}any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_inlineStyle}enterRule(e){e.enterInlineStyle&&e.enterInlineStyle(this)}exitRule(e){e.exitInlineStyle&&e.exitInlineStyle(this)}accept(e){return e.visitInlineStyle?e.visitInlineStyle(this):e.visitChildren(this)}}class pw extends Kr.ParserRuleContext{declaration(e){return e===void 0?this.getRuleContexts(k0):this.getRuleContext(e,k0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_declarationList}enterRule(e){e.enterDeclarationList&&e.enterDeclarationList(this)}exitRule(e){e.exitDeclarationList&&e.exitDeclarationList(this)}accept(e){return e.visitDeclarationList?e.visitDeclarationList(this):e.visitChildren(this)}}class _y extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_operator_}copyFrom(e){super.copyFrom(e)}}class jE extends _y{ws(){return this.getRuleContext(0,Cr)}Comma(){return this.tryGetToken(je.Comma,0)}Space(){return this.tryGetToken(je.Space,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGoodOperator&&e.enterGoodOperator(this)}exitRule(e){e.exitGoodOperator&&e.exitGoodOperator(this)}accept(e){return e.visitGoodOperator?e.visitGoodOperator(this):e.visitChildren(this)}}class Ng extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_property_}copyFrom(e){super.copyFrom(e)}}class gD extends Ng{ident(){return this.tryGetRuleContext(0,Ig)}ws(){return this.getRuleContext(0,Cr)}Variable(){return this.tryGetToken(je.Variable,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGoodProperty&&e.enterGoodProperty(this)}exitRule(e){e.exitGoodProperty&&e.exitGoodProperty(this)}accept(e){return e.visitGoodProperty?e.visitGoodProperty(this):e.visitChildren(this)}}class mD extends Ng{ident(){return this.getRuleContext(0,Ig)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterBadProperty&&e.enterBadProperty(this)}exitRule(e){e.exitBadProperty&&e.exitBadProperty(this)}accept(e){return e.visitBadProperty?e.visitBadProperty(this):e.visitChildren(this)}}class k0 extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_declaration}copyFrom(e){super.copyFrom(e)}}class uV extends k0{property_(){return this.getRuleContext(0,Ng)}ws(){return this.getRuleContext(0,Cr)}expr(){return this.getRuleContext(0,Ub)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterKnownDeclaration&&e.enterKnownDeclaration(this)}exitRule(e){e.exitKnownDeclaration&&e.exitKnownDeclaration(this)}accept(e){return e.visitKnownDeclaration?e.visitKnownDeclaration(this):e.visitChildren(this)}}class cV extends k0{property_(){return this.getRuleContext(0,Ng)}ws(){return this.getRuleContext(0,Cr)}value(){return this.getRuleContext(0,RI)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnknownDeclaration&&e.enterUnknownDeclaration(this)}exitRule(e){e.exitUnknownDeclaration&&e.exitUnknownDeclaration(this)}accept(e){return e.visitUnknownDeclaration?e.visitUnknownDeclaration(this):e.visitChildren(this)}}class RI extends Kr.ParserRuleContext{any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_value}enterRule(e){e.enterValue&&e.enterValue(this)}exitRule(e){e.exitValue&&e.exitValue(this)}accept(e){return e.visitValue?e.visitValue(this):e.visitChildren(this)}}class Ub extends Kr.ParserRuleContext{term(e){return e===void 0?this.getRuleContexts(T0):this.getRuleContext(e,T0)}operator_(e){return e===void 0?this.getRuleContexts(_y):this.getRuleContext(e,_y)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_expr}enterRule(e){e.enterExpr&&e.enterExpr(this)}exitRule(e){e.exitExpr&&e.exitExpr(this)}accept(e){return e.visitExpr?e.visitExpr(this):e.visitChildren(this)}}class T0 extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_term}copyFrom(e){super.copyFrom(e)}}class Ks extends T0{number(){return this.tryGetRuleContext(0,tf)}ws(){return this.tryGetRuleContext(0,Cr)}percentage(){return this.tryGetRuleContext(0,av)}dimension(){return this.tryGetRuleContext(0,lv)}String_(){return this.tryGetToken(je.String_,0)}UnicodeRange(){return this.tryGetToken(je.UnicodeRange,0)}ident(){return this.tryGetRuleContext(0,Ig)}var_(){return this.tryGetRuleContext(0,OI)}Uri(){return this.tryGetToken(je.Uri,0)}hexcolor(){return this.tryGetRuleContext(0,CI)}calc(){return this.tryGetRuleContext(0,NI)}function_(){return this.tryGetRuleContext(0,DI)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterKnownTerm&&e.enterKnownTerm(this)}exitRule(e){e.exitKnownTerm&&e.exitKnownTerm(this)}accept(e){return e.visitKnownTerm?e.visitKnownTerm(this):e.visitChildren(this)}}class hV extends T0{unknownDimension(){return this.getRuleContext(0,uv)}ws(){return this.getRuleContext(0,Cr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnknownTerm&&e.enterUnknownTerm(this)}exitRule(e){e.exitUnknownTerm&&e.exitUnknownTerm(this)}accept(e){return e.visitUnknownTerm?e.visitUnknownTerm(this):e.visitChildren(this)}}class DI extends Kr.ParserRuleContext{Function_(){return this.getToken(je.Function_,0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}expr(){return this.getRuleContext(0,Ub)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_function_}enterRule(e){e.enterFunction_&&e.enterFunction_(this)}exitRule(e){e.exitFunction_&&e.exitFunction_(this)}accept(e){return e.visitFunction_?e.visitFunction_(this):e.visitChildren(this)}}class CI extends Kr.ParserRuleContext{Hash(){return this.getToken(je.Hash,0)}ws(){return this.getRuleContext(0,Cr)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_hexcolor}enterRule(e){e.enterHexcolor&&e.enterHexcolor(this)}exitRule(e){e.exitHexcolor&&e.exitHexcolor(this)}accept(e){return e.visitHexcolor?e.visitHexcolor(this):e.visitChildren(this)}}class tf extends Kr.ParserRuleContext{Number(){return this.getToken(je.Number,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_number}enterRule(e){e.enterNumber&&e.enterNumber(this)}exitRule(e){e.exitNumber&&e.exitNumber(this)}accept(e){return e.visitNumber?e.visitNumber(this):e.visitChildren(this)}}class av extends Kr.ParserRuleContext{Percentage(){return this.getToken(je.Percentage,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_percentage}enterRule(e){e.enterPercentage&&e.enterPercentage(this)}exitRule(e){e.exitPercentage&&e.exitPercentage(this)}accept(e){return e.visitPercentage?e.visitPercentage(this):e.visitChildren(this)}}class lv extends Kr.ParserRuleContext{Dimension(){return this.getToken(je.Dimension,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_dimension}enterRule(e){e.enterDimension&&e.enterDimension(this)}exitRule(e){e.exitDimension&&e.exitDimension(this)}accept(e){return e.visitDimension?e.visitDimension(this):e.visitChildren(this)}}class uv extends Kr.ParserRuleContext{UnknownDimension(){return this.getToken(je.UnknownDimension,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_unknownDimension}enterRule(e){e.enterUnknownDimension&&e.enterUnknownDimension(this)}exitRule(e){e.exitUnknownDimension&&e.exitUnknownDimension(this)}accept(e){return e.visitUnknownDimension?e.visitUnknownDimension(this):e.visitChildren(this)}}class Aa extends Kr.ParserRuleContext{ident(){return this.tryGetRuleContext(0,Ig)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}number(){return this.tryGetRuleContext(0,tf)}percentage(){return this.tryGetRuleContext(0,av)}dimension(){return this.tryGetRuleContext(0,lv)}unknownDimension(){return this.tryGetRuleContext(0,uv)}String_(){return this.tryGetToken(je.String_,0)}Uri(){return this.tryGetToken(je.Uri,0)}Hash(){return this.tryGetToken(je.Hash,0)}UnicodeRange(){return this.tryGetToken(je.UnicodeRange,0)}Includes(){return this.tryGetToken(je.Includes,0)}DashMatch(){return this.tryGetToken(je.DashMatch,0)}Function_(){return this.tryGetToken(je.Function_,0)}any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}unused(e){return e===void 0?this.getRuleContexts(P0):this.getRuleContext(e,P0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_any_}enterRule(e){e.enterAny_&&e.enterAny_(this)}exitRule(e){e.exitAny_&&e.exitAny_(this)}accept(e){return e.visitAny_?e.visitAny_(this):e.visitChildren(this)}}class dV extends Kr.ParserRuleContext{Function_(){return this.getToken(je.Function_,0)}any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}unused(e){return e===void 0?this.getRuleContexts(P0):this.getRuleContext(e,P0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_generalEnclosed}enterRule(e){e.enterGeneralEnclosed&&e.enterGeneralEnclosed(this)}exitRule(e){e.exitGeneralEnclosed&&e.exitGeneralEnclosed(this)}accept(e){return e.visitGeneralEnclosed?e.visitGeneralEnclosed(this):e.visitChildren(this)}}class P0 extends Kr.ParserRuleContext{ws(){return this.getRuleContext(0,Cr)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_unused}enterRule(e){e.enterUnused&&e.enterUnused(this)}exitRule(e){e.exitUnused&&e.exitUnused(this)}accept(e){return e.visitUnused?e.visitUnused(this):e.visitChildren(this)}}class OI extends Kr.ParserRuleContext{Var(){return this.getToken(je.Var,0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}Variable(){return this.getToken(je.Variable,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_var_}enterRule(e){e.enterVar_&&e.enterVar_(this)}exitRule(e){e.exitVar_&&e.exitVar_(this)}accept(e){return e.visitVar_?e.visitVar_(this):e.visitChildren(this)}}class NI extends Kr.ParserRuleContext{Calc(){return this.getToken(je.Calc,0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}calcSum(){return this.getRuleContext(0,Gb)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calc}enterRule(e){e.enterCalc&&e.enterCalc(this)}exitRule(e){e.exitCalc&&e.exitCalc(this)}accept(e){return e.visitCalc?e.visitCalc(this):e.visitChildren(this)}}class Gb extends Kr.ParserRuleContext{calcProduct(e){return e===void 0?this.getRuleContexts(gw):this.getRuleContext(e,gw)}Space(e){return e===void 0?this.getTokens(je.Space):this.getToken(je.Space,e)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}Plus(e){return e===void 0?this.getTokens(je.Plus):this.getToken(je.Plus,e)}Minus(e){return e===void 0?this.getTokens(je.Minus):this.getToken(je.Minus,e)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calcSum}enterRule(e){e.enterCalcSum&&e.enterCalcSum(this)}exitRule(e){e.exitCalcSum&&e.exitCalcSum(this)}accept(e){return e.visitCalcSum?e.visitCalcSum(this):e.visitChildren(this)}}class gw extends Kr.ParserRuleContext{calcValue(e){return e===void 0?this.getRuleContexts(mw):this.getRuleContext(e,mw)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}number(e){return e===void 0?this.getRuleContexts(tf):this.getRuleContext(e,tf)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calcProduct}enterRule(e){e.enterCalcProduct&&e.enterCalcProduct(this)}exitRule(e){e.exitCalcProduct&&e.exitCalcProduct(this)}accept(e){return e.visitCalcProduct?e.visitCalcProduct(this):e.visitChildren(this)}}class mw extends Kr.ParserRuleContext{number(){return this.tryGetRuleContext(0,tf)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}dimension(){return this.tryGetRuleContext(0,lv)}unknownDimension(){return this.tryGetRuleContext(0,uv)}percentage(){return this.tryGetRuleContext(0,av)}calcSum(){return this.tryGetRuleContext(0,Gb)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calcValue}enterRule(e){e.enterCalcValue&&e.enterCalcValue(this)}exitRule(e){e.exitCalcValue&&e.exitCalcValue(this)}accept(e){return e.visitCalcValue?e.visitCalcValue(this):e.visitChildren(this)}}class Ig extends Kr.ParserRuleContext{Ident(){return this.getToken(je.Ident,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_ident}enterRule(e){e.enterIdent&&e.enterIdent(this)}exitRule(e){e.exitIdent&&e.exitIdent(this)}accept(e){return e.visitIdent?e.visitIdent(this):e.visitChildren(this)}}class Cr extends Kr.ParserRuleContext{Comment(e){return e===void 0?this.getTokens(je.Comment):this.getToken(je.Comment,e)}Space(e){return e===void 0?this.getTokens(je.Space):this.getToken(je.Space,e)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_ws}enterRule(e){e.enterWs&&e.enterWs(this)}exitRule(e){e.exitWs&&e.exitWs(this)}accept(e){return e.visitWs?e.visitWs(this):e.visitChildren(this)}}class Hb extends Yn{constructor(t){super();c(this,"url_");this.url_=t}Accept(t){Ue()}EQ(t){return this.url_===t.url_}GetTypeId(){return rr(Hb)}ToString(){return"url("+this.url_+")"}}function VE(r,e,t,i){for(let s of t)r.SetPropertyValue(s,i)}class fV{constructor(e){c(this,"currentKey",null);c(this,"currentValue",null);c(this,"terms",[]);this.style=e}currentKeyIsColor(){return Q(this.currentKey),this.currentKey.endsWith("color")||this.currentKey.endsWith("Color")}visitInlineStyle(e){e.children.forEach(t=>t.accept(this))}visitAny_(e){Ue()}visitBadProperty(e){Ue()}visitCalc(e){Ue()}visitCalcProduct(e){Ue()}visitCalcSum(e){Ue()}visitCalcValue(e){Ue()}visitDeclarationList(e){e.children.forEach(t=>t.accept(this))}visitDimension(e){const{text:t}=e;t.endsWith("px")?this.terms.push(new Qt(parseFloat(t),Ft.kPixelsUnit)):Ue()}visitExpr(e){e.children.length===1?(e.children[0].accept(this),this.currentValue=this.terms[0]):Ue(),this.terms.length=0}visitFunction_(e){if(e.Function_().text==="rgb("){let t=e.expr();Q(t);const i=[];for(let a of t.children)a instanceof Ks&&i.push(+a.number().text);const[s,n,o]=i;this.terms.push(new kr(s,n,o,1))}else Ue()}visitGeneralEnclosed(e){Ue()}visitGoodOperator(e){Ue()}visitGoodProperty(e){e.ident()?this.currentKey=e.ident().text:Ue()}visitHexcolor(e){Ue()}visitIdent(e){this.terms.push(_e.fromString(e.text))}visitKnownDeclaration(e){if(e.children.forEach(t=>t.accept(this)),this.currentKey&&this.currentValue){const t=s3(this.currentKey);Q(t);const i=this.style.data();switch(t){case T.kBorderColorProperty:{VE(i,T.kBorderColorProperty,[T.kBorderTopColorProperty,T.kBorderRightColorProperty,T.kBorderBottomColorProperty,T.kBorderLeftColorProperty],this.currentValue);break}case T.kBorderStyleProperty:{VE(i,T.kBorderStyleProperty,[T.kBorderTopStyleProperty,T.kBorderRightStyleProperty,T.kBorderBottomStyleProperty,T.kBorderLeftStyleProperty],this.currentValue);break}case T.kBorderWidthProperty:{VE(i,T.kBorderWidthProperty,[T.kBorderTopWidthProperty,T.kBorderRightWidthProperty,T.kBorderBottomWidthProperty,T.kBorderLeftWidthProperty],this.currentValue);break}default:{i.SetPropertyValue(t,this.currentValue);break}}this.currentKey=null,this.currentValue=null}else Ue()}visitKnownTerm(e){e.number()||e.percentage()?Ue():e.dimension()?e.dimension().accept(this):e.String_()?this.terms.push(new d1(e.String_().text)):e.UnicodeRange()?Ue():e.ident()?this.currentKeyIsColor()?this.terms.push(kr.fromString(e.ident().text)):e.ident().accept(this):e.var_()?Ue():e.Uri()?this.visitUri(e.Uri()):e.hexcolor()?this.terms.push(kr.fromHex(e.text)):e.calc()?Ue():e.function_()?this.visitFunction_(e.function_()):Ue()}visitNumber(e){Ue()}visitOperator_(e){Ue()}visitPercentage(e){Ue()}visitProperty_(e){Ue()}visitTerm(e){Ue()}visitUnknownDeclaration(e){Ue()}visitUnknownDimension(e){Ue()}visitUnknownTerm(e){Ue()}visitUnused(e){Ue()}visitValue(e){Ue()}visitVar_(e){Ue()}visitWs(e){}visit(e){Ue()}visitChildren(e){Ue()}visitErrorNode(e){Ue()}visitTerminal(e){}visitUri(e){const t=e.text.match(/^url\('?(.+)'?\)$/i);t||et(),this.terms.push(new Hb(t[1]))}}var _V=Mu(),pV=P1();const Ki=class extends _V.Lexer{get vocabulary(){return Ki.VOCABULARY}constructor(e){super(e),this._interp=new pV.LexerATNSimulator(Ki._ATN,this)}get grammarFileName(){return"inline.g4"}get ruleNames(){return Ki.ruleNames}get serializedATN(){return Ki._serializedATN}get channelNames(){return Ki.channelNames}get modeNames(){return Ki.modeNames}static get _ATN(){return Ki.__ATN||(Ki.__ATN=new PI.ATNDeserializer().deserialize(vb(Ki._serializedATN))),Ki.__ATN}};let It=Ki;c(It,"T__0",1),c(It,"T__1",2),c(It,"T__2",3),c(It,"T__3",4),c(It,"T__4",5),c(It,"T__5",6),c(It,"T__6",7),c(It,"T__7",8),c(It,"T__8",9),c(It,"Comment",10),c(It,"Space",11),c(It,"Includes",12),c(It,"DashMatch",13),c(It,"Hash",14),c(It,"Important",15),c(It,"Percentage",16),c(It,"Uri",17),c(It,"UnicodeRange",18),c(It,"Dimension",19),c(It,"UnknownDimension",20),c(It,"Plus",21),c(It,"Minus",22),c(It,"Greater",23),c(It,"Comma",24),c(It,"Tilde",25),c(It,"PseudoNot",26),c(It,"Number",27),c(It,"String_",28),c(It,"PrefixMatch",29),c(It,"SuffixMatch",30),c(It,"SubstringMatch",31),c(It,"Or",32),c(It,"Calc",33),c(It,"Variable",34),c(It,"Var",35),c(It,"Ident",36),c(It,"Function_",37),c(It,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),c(It,"modeNames",["DEFAULT_MODE"]),c(It,"ruleNames",["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","Hex","NewlineOrSpace","Unicode","Escape","Nmstart","Nmchar","Comment","Name","Url","Space","Whitespace","Newline","ZeroToFourZeros","A","B","C","D","E","F","G","H","I","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","DashChar","Includes","DashMatch","Hash","Important","FontRelative","ViewportRelative","AbsLength","Angle","Time","Freq","Percentage","Uri","UnicodeRange","Resolution","Length","Dimension","UnknownDimension","Nonascii","Plus","Minus","Greater","Comma","Tilde","PseudoNot","Number","String_","PrefixMatch","SuffixMatch","SubstringMatch","Or","VendorPrefix","Calc","Variable","Var","Ident","Function_"]),c(It,"_LITERAL_NAMES",[void 0,"';'","'/'","'*'","'_'","':'","')'","'('","'['","']'",void 0,void 0,"'~='","'|='",void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'+'","'-'","'>'","','","'~'",void 0,void 0,void 0,"'^='","'$='","'*='",void 0,"'calc('",void 0,"'var('"]),c(It,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"Comment","Space","Includes","DashMatch","Hash","Important","Percentage","Uri","UnicodeRange","Dimension","UnknownDimension","Plus","Minus","Greater","Comma","Tilde","PseudoNot","Number","String_","PrefixMatch","SuffixMatch","SubstringMatch","Or","Calc","Variable","Var","Ident","Function_"]),c(It,"VOCABULARY",new Ab(Ki._LITERAL_NAMES,Ki._SYMBOLIC_NAMES,[])),c(It,"_serializedATNSegments",3),c(It,"_serializedATNSegment0",`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241'\u046E\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)*	*+	+,	,-	-.	./	/0	01	12	23	34	45	56	67	78	89	9:	:;	;<	<=	=>	>?	?@	@A	AB	BC	CD	DE	EF	FG	GH	HI	IJ	JK	KL	LM	MN	NO	OP	PQ	QR	RS	ST	TU	U\x07\x07\b\b		

\v\v\f\f\f\f\f\xC4
\f\r\r\r\r\xC9
\r\r\r\xCC
\r\r\r\xCF
\r\r\r\xD2
\r\r\r\xD5
\r\r\r\xDC
\xE1
\xE6
\x07\xEC
\f\xEF\v\xF2
\r\xF3\x07\xF8
\f\xFB\v\xFE
\r\xFF\x07\u0102
\f\u0105\v\u010A
\r\u010B\x07\u0111
\f\u0114\v\u0117
\r\u0118\u011D
\u0123
\u0126
\u0129
\u012C
\u012F
\u0138
\u013C
\u0145
\u0149
\u0152
\u0156
\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\u015F
\x1B\x1B\x1B\x1B\u0163
\x1B\u016C
\u0170
\u0179
\u017D
\u0186
\u018E
\u0197
\u019F
        \u01A8
        \u01B0
 !!!!!!!!\u01B9
!!!!!!!!\u01C1
!""""""""\u01CA
""""""""\u01D2
"########\u01DB
########\u01E3
#$$$$$$$$\u01EC
$$$$$$$$\u01F4
$%%%%%%%%\u01FD
%%%%%%%%\u0205
%&&&&&&&&\u020E
&&&&&&&&\u0216
&''''''''\u021F
''''''''\u0227
'((((((((\u0230
((((((((\u0238
())))))))\u0241
))))))))\u0249
)********\u0252
********\u025A
*++++++++\u0263
++++++++\u026B
+,,,,,,,,\u0274
,,,,,,,,\u027C
,--------\u0285
--------\u028D
-........\u0296
........\u029E
.////////\u02A7
////////\u02AF
/00000000\u02B8
00000000\u02C0
0111111111\u02CA
1222333444555\x075\u02D8
5\f55\u02DB\v55555555555666666666666666666\u02F8
6777777777777777777777\u030E
78888888888888888888888888888\u032B
899999999999999999999999\u0343
9::::::::\u034C
:;;;;;;;;;;\u0357
;<<<===================\u036E
=>>>>>>\u0375
>>>\u0378
>>>\u037B
>>>\u037E
>>>\u0381
>>>>>>\u0387
>>>\u038A
>>>\u038D
>>>\u0390
>>>\u0393
>>>>>>>\u039A
>>>\u039D
>>>\u03A0
>>>\u03A3
>>>>>>>>\u03AB
>>>\u03AE
>>>\u03B1
>>>>>>>>>\u03BA
>>>\u03BD
>>>>>>>>>>\u03C7
>>\u03C9
>??????????????????\u03DC
?@@@@\u03E1
@AAAAAA\u03E8
ABBBCCDDEEFFGGHHIIIIIIJJ\u0400
J\rJJ\u0401J\x07J\u0405
J\fJJ\u0408\vJJJJ\u040C
J\rJJ\u040DJ\u0410
JKKKKKK\x07K\u0418
K\fKK\u041B\vKKKKKKKK\x07K\u0424
K\fKK\u0427\vKKK\u042A
KLLLMMMNNNOOOPPPPPPPPPPPPPPPPPPPP\u044B
PQQQQQQRRRRR\x07R\u0458
R\fRR\u045B\vRSSSSSTT\u0463
TTT\x07T\u0467
T\fTT\u046A\vTUUUV\x07	\v\x07\r\b	
\v\x1B!\f#%'\r)+-/13579;=?ACEGIKMOQSUWY[]_acegikmoqsuwy{}\x7F\x81\x83\x85\x87\x89\x8B\x8D\x8F\x1B\x91\x93\x95\x97\x99 \x9B!\x9D"\x9F\xA1#\xA3$\xA5%\xA7&\xA9'(2;CHch\v\f""\x07\f\f2;CHchC\\aac|\x07//2;C\\aac|,,,,11##%(,\x80CCccDDddEEeeFFffGGggHHhhIIiiJJjjKKkkMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||WWww~~\x812;\f\f$$^^\f\f))^^\u04FB\x07	\v\r!'cegiwy{\x81\x83\x87\x89\x8B\x8D\x8F\x91\x93\x95\x97\x99\x9B\x9D\xA1\xA3\xA5\xA7\xA9\xAB\xAD\x07\xAF	\xB1\v\xB3\r\xB5\xB7\xB9\xBB\xBD\xC3\xC5\x1B\xDB\xE0\xE5!\xE7#\u0109%\u0112'\u0116)\u011C+\u0122-\u0125/\u013B1\u01483\u01555\u01627\u016F9\u017C;\u018D=\u019E?\u01AFA\u01C0C\u01D1E\u01E2G\u01F3I\u0204K\u0215M\u0226O\u0237Q\u0248S\u0259U\u026AW\u027BY\u028C[\u029D]\u02AE_\u02BFa\u02C9c\u02CBe\u02CEg\u02D1i\u02D4k\u02F7m\u030Do\u032Aq\u0342s\u034Bu\u0356w\u0358y\u036D{\u03C8}\u03DB\x7F\u03E0\x81\u03E7\x83\u03E9\x85\u03EC\x87\u03EE\x89\u03F0\x8B\u03F2\x8D\u03F4\x8F\u03F6\x91\u03F8\x93\u040F\x95\u0429\x97\u042B\x99\u042E\x9B\u0431\x9D\u0434\x9F\u044A\xA1\u044C\xA3\u0452\xA5\u045C\xA7\u0462\xA9\u046B\xAB\xAC\x07=\xAC\xAD\xAE\x071\xAE\xAF\xB0\x07,\xB0\b\xB1\xB2\x07a\xB2
\xB3\xB4\x07<\xB4\f\xB5\xB6\x07+\xB6\xB7\xB8\x07*\xB8\xB9\xBA\x07]\xBA\xBB\xBC\x07_\xBC\xBD\xBE	\xBE\xBF\xC0\x07\xC0\xC4\x07\f\xC1\xC4	\xC2\xC4\xC3\xBF\xC3\xC1\xC3\xC2\xC4\xC5\xC6\x07^\xC6\xC8\v\xC7\xC9\v\xC8\xC7\xC8\xC9\xC9\xCB\xCA\xCC\v\xCB\xCA\xCB\xCC\xCC\xCE\xCD\xCF\v\xCE\xCD\xCE\xCF\xCF\xD1\xD0\xD2\v\xD1\xD0\xD1\xD2\xD2\xD4\xD3\xD5\v\xD4\xD3\xD4\xD5\xD5\xD6\xD6\xD7\f\xD7\xD8\xDC\r\xD9\xDA\x07^\xDA\xDC
\xDB\xD8\xDB\xD9\xDC\xDD\xE1	\xDE\xE1\x85C\xDF\xE1\x1B\xE0\xDD\xE0\xDE\xE0\xDF\xE1\xE2\xE6	\xE3\xE6\x85C\xE4\xE6\x1B\xE5\xE2\xE5\xE3\xE5\xE4\xE6 \xE7\xE8\x071\xE8\xE9\x07,\xE9\xED\xEA\xEC
\x07\xEB\xEA\xEC\xEF\xED\xEB\xED\xEE\xEE\xF1\xEF\xED\xF0\xF2\x07,\xF1\xF0\xF2\xF3\xF3\xF1\xF3\xF4\xF4\u0103\xF5\xF9
\b\xF6\xF8
\x07\xF7\xF6\xF8\xFB\xF9\xF7\xF9\xFA\xFA\xFD\xFB\xF9\xFC\xFE\x07,\xFD\xFC\xFE\xFF\xFF\xFD\xFF\u0100\u0100\u0102\u0101\xF5\u0102\u0105\u0103\u0101\u0103\u0104\u0104\u0106\u0105\u0103\u0106\u0107\x071\u0107"\u0108\u010A\u0109\u0108\u010A\u010B\u010B\u0109\u010B\u010C\u010C$\u010D\u0111		\u010E\u0111\x85C\u010F\u0111\x1B\u0110\u010D\u0110\u010E\u0110\u010F\u0111\u0114\u0112\u0110\u0112\u0113\u0113&\u0114\u0112\u0115\u0117	\u0116\u0115\u0117\u0118\u0118\u0116\u0118\u0119\u0119(\u011A\u011D'\u011B\u011D\u011C\u011A\u011C\u011B\u011D*\u011E\u0123\x07\f\u011F\u0120\x07\u0120\u0123\x07\f\u0121\u0123\u0122\u011E\u0122\u011F\u0122\u0121\u0123,\u0124\u0126\x072\u0125\u0124\u0125\u0126\u0126\u0128\u0127\u0129\x072\u0128\u0127\u0128\u0129\u0129\u012B\u012A\u012C\x072\u012B\u012A\u012B\u012C\u012C\u012E\u012D\u012F\x072\u012E\u012D\u012E\u012F\u012F.\u0130\u013C	
\u0131\u0132\x07^\u0132\u0137-\u0133\u0134\x076\u0134\u0138\x073\u0135\u0136\x078\u0136\u0138\x073\u0137\u0133\u0137\u0135\u0138\u0139\u0139\u013A\f\u013A\u013C\u013B\u0130\u013B\u0131\u013C0\u013D\u0149	\v\u013E\u013F\x07^\u013F\u0144-\u0140\u0141\x076\u0141\u0145\x074\u0142\u0143\x078\u0143\u0145\x074\u0144\u0140\u0144\u0142\u0145\u0146\u0146\u0147\f\u0147\u0149\u0148\u013D\u0148\u013E\u01492\u014A\u0156	\f\u014B\u014C\x07^\u014C\u0151-\u014D\u014E\x076\u014E\u0152\x075\u014F\u0150\x078\u0150\u0152\x075\u0151\u014D\u0151\u014F\u0152\u0153\u0153\u0154\f\u0154\u0156\u0155\u014A\u0155\u014B\u01564\u0157\u0163	\r\u0158\u0159\x07^\u0159\u015E-\u015A\u015B\x076\u015B\u015F\x076\u015C\u015D\x078\u015D\u015F\x076\u015E\u015A\u015E\u015C\u015F\u0160\u0160\u0161\f\u0161\u0163\u0162\u0157\u0162\u0158\u01636\u0164\u0170	\u0165\u0166\x07^\u0166\u016B-\u0167\u0168`),c(It,"_serializedATNSegment1",`\x076\u0168\u016C\x077\u0169\u016A\x078\u016A\u016C\x077\u016B\u0167\u016B\u0169\u016C\u016D\u016D\u016E\f\u016E\u0170\u016F\u0164\u016F\u0165\u01708\u0171\u017D	\u0172\u0173\x07^\u0173\u0178-\u0174\u0175\x076\u0175\u0179\x078\u0176\u0177\x078\u0177\u0179\x078\u0178\u0174\u0178\u0176\u0179\u017A\u017A\u017B\f\u017B\u017D\u017C\u0171\u017C\u0172\u017D:\u017E\u018E	\u017F\u0180\x07^\u0180\u0185-\u0181\u0182\x076\u0182\u0186\x079\u0183\u0184\x078\u0184\u0186\x079\u0185\u0181\u0185\u0183\u0186\u0187\u0187\u0188\f\u0188\u018E\u0189\u018A\x07^\u018A\u018E\x07i\u018B\u018C\x07^\u018C\u018E\x07I\u018D\u017E\u018D\u017F\u018D\u0189\u018D\u018B\u018E<\u018F\u019F	\u0190\u0191\x07^\u0191\u0196-\u0192\u0193\x076\u0193\u0197\x07:\u0194\u0195\x078\u0195\u0197\x07:\u0196\u0192\u0196\u0194\u0197\u0198\u0198\u0199\f\u0199\u019F\u019A\u019B\x07^\u019B\u019F\x07j\u019C\u019D\x07^\u019D\u019F\x07J\u019E\u018F\u019E\u0190\u019E\u019A\u019E\u019C\u019F>\u01A0\u01B0	\u01A1\u01A2\x07^\u01A2\u01A7-\u01A3\u01A4\x076\u01A4\u01A8\x07;\u01A5\u01A6\x078\u01A6\u01A8\x07;\u01A7\u01A3\u01A7\u01A5\u01A8\u01A9\u01A9\u01AA\f\u01AA\u01B0\u01AB\u01AC\x07^\u01AC\u01B0\x07k\u01AD\u01AE\x07^\u01AE\u01B0\x07K\u01AF\u01A0\u01AF\u01A1\u01AF\u01AB\u01AF\u01AD\u01B0@\u01B1\u01C1	\u01B2\u01B3\x07^\u01B3\u01B8-\u01B4\u01B5\x076\u01B5\u01B9\x07d\u01B6\u01B7\x078\u01B7\u01B9\x07d\u01B8\u01B4\u01B8\u01B6\u01B9\u01BA\u01BA\u01BB\f\u01BB\u01C1\u01BC\u01BD\x07^\u01BD\u01C1\x07m\u01BE\u01BF\x07^\u01BF\u01C1\x07M\u01C0\u01B1\u01C0\u01B2\u01C0\u01BC\u01C0\u01BE\u01C1B\u01C2\u01D2	\u01C3\u01C4\x07^\u01C4\u01C9-\u01C5\u01C6\x076\u01C6\u01CA\x07e\u01C7\u01C8\x078\u01C8\u01CA\x07e\u01C9\u01C5\u01C9\u01C7\u01CA\u01CB\u01CB\u01CC\f\u01CC\u01D2\u01CD\u01CE\x07^\u01CE\u01D2\x07n\u01CF\u01D0\x07^\u01D0\u01D2\x07N\u01D1\u01C2\u01D1\u01C3\u01D1\u01CD\u01D1\u01CF\u01D2D\u01D3\u01E3	\u01D4\u01D5\x07^\u01D5\u01DA-\u01D6\u01D7\x076\u01D7\u01DB\x07f\u01D8\u01D9\x078\u01D9\u01DB\x07f\u01DA\u01D6\u01DA\u01D8\u01DB\u01DC\u01DC\u01DD\f\u01DD\u01E3\u01DE\u01DF\x07^\u01DF\u01E3\x07o\u01E0\u01E1\x07^\u01E1\u01E3\x07O\u01E2\u01D3\u01E2\u01D4\u01E2\u01DE\u01E2\u01E0\u01E3F\u01E4\u01F4	\u01E5\u01E6\x07^\u01E6\u01EB-\u01E7\u01E8\x076\u01E8\u01EC\x07g\u01E9\u01EA\x078\u01EA\u01EC\x07g\u01EB\u01E7\u01EB\u01E9\u01EC\u01ED\u01ED\u01EE\f\u01EE\u01F4\u01EF\u01F0\x07^\u01F0\u01F4\x07p\u01F1\u01F2\x07^\u01F2\u01F4\x07P\u01F3\u01E4\u01F3\u01E5\u01F3\u01EF\u01F3\u01F1\u01F4H\u01F5\u0205	\u01F6\u01F7\x07^\u01F7\u01FC-\u01F8\u01F9\x076\u01F9\u01FD\x07h\u01FA\u01FB\x078\u01FB\u01FD\x07h\u01FC\u01F8\u01FC\u01FA\u01FD\u01FE\u01FE\u01FF\f\u01FF\u0205\u0200\u0201\x07^\u0201\u0205\x07q\u0202\u0203\x07^\u0203\u0205\x07Q\u0204\u01F5\u0204\u01F6\u0204\u0200\u0204\u0202\u0205J\u0206\u0216	\u0207\u0208\x07^\u0208\u020D-\u0209\u020A\x077\u020A\u020E\x072\u020B\u020C\x079\u020C\u020E\x072\u020D\u0209\u020D\u020B\u020E\u020F\u020F\u0210\f\u0210\u0216\u0211\u0212\x07^\u0212\u0216\x07r\u0213\u0214\x07^\u0214\u0216\x07R\u0215\u0206\u0215\u0207\u0215\u0211\u0215\u0213\u0216L\u0217\u0227	\u0218\u0219\x07^\u0219\u021E-\u021A\u021B\x077\u021B\u021F\x073\u021C\u021D\x079\u021D\u021F\x073\u021E\u021A\u021E\u021C\u021F\u0220\u0220\u0221\f\u0221\u0227\u0222\u0223\x07^\u0223\u0227\x07s\u0224\u0225\x07^\u0225\u0227\x07S\u0226\u0217\u0226\u0218\u0226\u0222\u0226\u0224\u0227N\u0228\u0238	\u0229\u022A\x07^\u022A\u022F-\u022B\u022C\x077\u022C\u0230\x074\u022D\u022E\x079\u022E\u0230\x074\u022F\u022B\u022F\u022D\u0230\u0231\u0231\u0232\f\u0232\u0238\u0233\u0234\x07^\u0234\u0238\x07t\u0235\u0236\x07^\u0236\u0238\x07T\u0237\u0228\u0237\u0229\u0237\u0233\u0237\u0235\u0238P\u0239\u0249	\x1B\u023A\u023B\x07^\u023B\u0240-\u023C\u023D\x077\u023D\u0241\x075\u023E\u023F\x079\u023F\u0241\x075\u0240\u023C\u0240\u023E\u0241\u0242\u0242\u0243\f\u0243\u0249\u0244\u0245\x07^\u0245\u0249\x07u\u0246\u0247\x07^\u0247\u0249\x07U\u0248\u0239\u0248\u023A\u0248\u0244\u0248\u0246\u0249R\u024A\u025A	\u024B\u024C\x07^\u024C\u0251-\u024D\u024E\x077\u024E\u0252\x076\u024F\u0250\x079\u0250\u0252\x076\u0251\u024D\u0251\u024F\u0252\u0253\u0253\u0254\f\u0254\u025A\u0255\u0256\x07^\u0256\u025A\x07v\u0257\u0258\x07^\u0258\u025A\x07V\u0259\u024A\u0259\u024B\u0259\u0255\u0259\u0257\u025AT\u025B\u026B	\u025C\u025D\x07^\u025D\u0262-\u025E\u025F\x077\u025F\u0263\x077\u0260\u0261\x079\u0261\u0263\x077\u0262\u025E\u0262\u0260\u0263\u0264\u0264\u0265\f\u0265\u026B\u0266\u0267\x07^\u0267\u026B\x07w\u0268\u0269\x07^\u0269\u026B\x07W\u026A\u025B\u026A\u025C\u026A\u0266\u026A\u0268\u026BV\u026C\u027C	\u026D\u026E\x07^\u026E\u0273-\u026F\u0270\x077\u0270\u0274\x078\u0271\u0272\x079\u0272\u0274\x078\u0273\u026F\u0273\u0271\u0274\u0275\u0275\u0276\f\u0276\u027C\u0277\u0278\x07^\u0278\u027C\x07x\u0279\u027A\x07^\u027A\u027C\x07X\u027B\u026C\u027B\u026D\u027B\u0277\u027B\u0279\u027CX\u027D\u028D	\u027E\u027F\x07^\u027F\u0284-\u0280\u0281\x077\u0281\u0285\x079\u0282\u0283\x079\u0283\u0285\x079\u0284\u0280\u0284\u0282\u0285\u0286\u0286\u0287\f\u0287\u028D\u0288\u0289\x07^\u0289\u028D\x07y\u028A\u028B\x07^\u028B\u028D\x07Y\u028C\u027D\u028C\u027E\u028C\u0288\u028C\u028A\u028DZ\u028E\u029E	 \u028F\u0290\x07^\u0290\u0295-\u0291\u0292\x077\u0292\u0296\x07:\u0293\u0294\x079\u0294\u0296\x07:\u0295\u0291\u0295\u0293\u0296\u0297\u0297\u0298\f\u0298\u029E\u0299\u029A\x07^\u029A\u029E\x07z\u029B\u029C\x07^\u029C\u029E\x07Z\u029D\u028E\u029D\u028F\u029D\u0299\u029D\u029B\u029E\\\u029F\u02AF	!\u02A0\u02A1\x07^\u02A1\u02A6-\u02A2\u02A3\x077\u02A3\u02A7\x07;\u02A4\u02A5\x079\u02A5\u02A7\x07;\u02A6\u02A2\u02A6\u02A4\u02A7\u02A8\u02A8\u02A9\f\u02A9\u02AF\u02AA\u02AB\x07^\u02AB\u02AF\x07{\u02AC\u02AD\x07^\u02AD\u02AF\x07[\u02AE\u029F\u02AE\u02A0\u02AE\u02AA\u02AE\u02AC\u02AF^\u02B0\u02C0	"\u02B1\u02B2\x07^\u02B2\u02B7-\u02B3\u02B4\x077\u02B4\u02B8\x07c\u02B5\u02B6\x079\u02B6\u02B8\x07c\u02B7\u02B3\u02B7\u02B5\u02B8\u02B9\u02B9\u02BA\f\u02BA\u02C0\u02BB\u02BC\x07^\u02BC\u02C0\x07|\u02BD\u02BE\x07^\u02BE\u02C0\x07\\\u02BF\u02B0\u02BF\u02B1\u02BF\u02BB\u02BF\u02BD\u02C0\`\u02C1\u02CA\x07/\u02C2\u02C3\x07^\u02C3\u02C4-\u02C4\u02C5\x074\u02C5\u02C6\x07f\u02C6\u02C7\u02C7\u02C8\f\u02C8\u02CA\u02C9\u02C1\u02C9\u02C2\u02CAb\u02CB\u02CC\x07\x80\u02CC\u02CD\x07?\u02CDd\u02CE\u02CF\x07~\u02CF\u02D0\x07?\u02D0f\u02D1\u02D2\x07%\u02D2\u02D3#\u02D3h\u02D4\u02D9\x07#\u02D5\u02D8'\u02D6\u02D8!\u02D7\u02D5\u02D7\u02D6\u02D8\u02DB\u02D9\u02D7\u02D9\u02DA\u02DA\u02DC\u02DB\u02D9\u02DC\u02DD? \u02DD\u02DEE#\u02DE\u02DFK&\u02DF\u02E0I%\u02E0\u02E1O(\u02E1\u02E2S*\u02E2\u02E3/\u02E3\u02E4G$\u02E4\u02E5S*\u02E5j\u02E6\u02E7\x93J\u02E7\u02E87\u02E8\u02E9E#\u02E9\u02F8\u02EA\u02EB\x93J\u02EB\u02EC7\u02EC\u02ED[.\u02ED\u02F8\u02EE\u02EF\x93J\u02EF\u02F03\u02F0\u02F1=\u02F1\u02F8\u02F2\u02F3\x93J\u02F3\u02F4O(\u02F4\u02F57\u02F5\u02F6E#\u02F6\u02F8\u02F7\u02E6\u02F7\u02EA\u02F7\u02EE\u02F7\u02F2\u02F8l\u02F9\u02FA\x93J\u02FA\u02FBW,\u02FB\u02FCY-\u02FC\u030E\u02FD\u02FE\x93J\u02FE\u02FFW,\u02FF\u0300=\u0300\u030E\u0301\u0302\x93J\u0302\u0303W,\u0303\u0304E#\u0304\u0305? \u0305\u0306G$\u0306\u030E\u0307\u0308\x93J\u0308\u0309W,\u0309\u030AE#\u030A\u030B/\u030B\u030C[.\u030C\u030E\u030D\u02F9\u030D\u02FD\u030D\u0301\u030D\u0307\u030En\u030F\u0310\x93J\u0310\u0311K&\u0311\u0312[.\u0312\u032B\u0313\u0314\x93J\u0314\u03153\u0315\u0316E#\u0316\u032B\u0317\u0318\x93J\u0318\u0319E#\u0319\u031AE#\u031A\u032B\u031B\u031C\x93J\u031C\u031D? \u031D\u031EG$\u031E\u032B\u031F\u0320\x93J\u0320\u0321K&\u0321\u0322S*\u0322\u032B\u0323\u0324\x93J\u0324\u0325K&\u0325\u03263\u0326\u032B\u0327\u0328\x93J\u0328\u0329M'\u0329\u032B\u032A\u030F\u032A\u0313\u032A\u0317\u032A\u031B\u032A\u031F\u032A\u0323\u032A\u0327\u032Bp\u032C\u032D\x93J\u032D\u032E5\x1B\u032E\u032F7\u032F\u0330;\u0330\u0343\u0331\u0332\x93J\u0332\u0333O(\u0333\u0334/\u0334\u03355\x1B\u0335\u0343\u0336\u0337\x93J\u0337\u0338;\u0338\u0339O(\u0339\u033A/\u033A\u033B5\x1B\u033B\u0343\u033C\u033D\x93J\u033D\u033ES*\u033E\u033FU+\u033F\u0340O(\u0340\u0341G$\u0341\u0343\u0342\u032C\u0342\u0331\u0342\u0336\u0342\u033C\u0343r\u0344\u0345\x93J\u0345\u0346E#\u0346\u0347Q)\u0347\u034C\u0348\u0349\x93J\u0349\u034AQ)\u034A\u034C\u034B\u0344\u034B\u0348\u034Ct\u034D\u034E\x93J\u034E\u034F=\u034F\u0350_0\u0350\u0357\u0351\u0352\x93J\u0352\u0353A!\u0353\u0354=\u0354\u0355_0\u0355\u0357\u0356\u034D\u0356\u0351\u0357v\u0358\u0359\x93J\u0359\u035A\x07'\u035Ax\u035B\u035CU+\u035C\u035DO(\u035D\u035EC"\u035E\u035F\x07*\u035F\u0360)\u0360\u0361\x95K\u0361\u0362)\u0362\u0363\x07+\u0363\u036E\u0364\u0365U+\u0365\u0366O(\u0366\u0367C"\u0367\u0368\x07*\u0368\u0369)\u0369\u036A%\u036A\u036B)\u036B\u036C\x07+\u036C\u036E\u036D\u035B\u036D\u0364\u036Ez\u036F\u0370	#\u0370\u0371\x07-\u0371\u0372\x07A\u0372\u0374\u0373\u0375\x07A\u0374\u0373\u0374\u0375\u0375\u0377\u0376\u0378\x07A\u0377\u0376\u0377\u0378\u0378\u037A\u0379\u037B\x07A\u037A\u0379\u037A\u037B\u037B\u037D\u037C\u037E\x07A\u037D\u037C\u037D\u037E\u037E\u0380\u037F\u0381\x07A\u0380\u037F\u0380\u0381\u0381\u03C9\u0382\u0383	#\u0383\u0384\x07-\u0384\u0386\v\u0385\u0387\x07A\u0386\u0385\u0386\u0387\u0387\u0389\u0388\u038A\x07A\u0389\u0388\u0389\u038A\u038A\u038C\u038B\u038D\x07A\u038C\u038B\u038C\u038D\u038D\u038F\u038E\u0390\x07A\u038F\u038E\u038F\u0390\u0390\u0392\u0391\u0393\x07A\u0392\u0391\u0392\u0393\u0393\u03C9\u0394\u0395	#\u0395\u0396\x07-\u0396\u0397\v\u0397\u0399\v\u0398\u039A\x07A\u0399\u0398\u0399\u039A\u039A\u039C\u039B\u039D\x07A\u039C\u039B\u039C\u039D\u039D\u039F\u039E\u03A0\x07A\u039F\u039E\u039F\u03A0\u03A0\u03A2\u03A1\u03A3\x07A\u03A2\u03A1\u03A2\u03A3\u03A3\u03C9\u03A4\u03A5	#\u03A5\u03A6\x07-\u03A6\u03A7\v\u03A7\u03A8\v\u03A8\u03AA\v\u03A9\u03AB\x07A\u03AA\u03A9\u03AA\u03AB\u03AB\u03AD\u03AC\u03AE\x07A\u03AD\u03AC\u03AD\u03AE\u03AE\u03B0\u03AF\u03B1\x07A\u03B0\u03AF\u03B0\u03B1\u03B1\u03C9\u03B2\u03B3	#\u03B3\u03B4\x07-\u03B4\u03B5\v\u03B5\u03B6\v\u03B6\u03B7\v\u03B7\u03B9\v\u03B8\u03BA\x07A\u03B9\u03B8\u03B9\u03BA\u03BA\u03BC\u03BB\u03BD\x07A\u03BC\u03BB\u03BC\u03BD\u03BD\u03C9\u03BE\u03BF	#\u03BF\u03C0\x07-\u03C0\u03C1\v\u03C1\u03C2\v\u03C2\u03C3\v\u03C3\u03C4\v\u03C4\u03C6\v\u03C5\u03C7\x07A\u03C6\u03C5\u03C6\u03C7\u03C7\u03C9\u03C8\u036F\u03C8\u0382\u03C8\u0394\u03C8\u03A4\u03C8\u03B2\u03C8\u03BE\u03C9|\u03CA\u03CB\x93J\u03CB\u03CC5\x1B\u03CC\u03CDK&\u03CD\u03CE? \u03CE\u03DC\u03CF\u03D0\x93J\u03D0\u03D15\x1B\u03D1\u03D2K&\u03D2\u03D33\u03D3\u03D4E#\u03D4\u03DC\u03D5\u03D6\x93J\u03D6\u03D75\x1B\u03D7\u03D8K&\u03D8\u03D9K&\u03D9\u03DA[.\u03DA\u03DC\u03DB\u03CA\u03DB\u03CF\u03DB\u03D5\u03DC~\u03DD\u03E1o8\u03DE\u03E1k6\u03DF\u03E1m7\u03E0\u03DD\u03E0\u03DE\u03E0\u03DF\u03E1\x80\u03E2\u03E8\x7F@\u03E3\u03E8s:\u03E4\u03E8u;\u03E5\u03E8}?\u03E6\u03E8q9\u03E7\u03E2\u03E7\u03E3\u03E7\u03E4\u03E7\u03E5\u03E7\u03E6\u03E8\x82\u03E9\u03EA\x93J\u03EA\u03EB\xA7T\u03EB\x84\u03EC\u03ED
$\u03ED\x86\u03EE\u03EF\x07-\u03EF\x88\u03F0\u03F1\x07/\u03F1\x8A\u03F2\u03F3\x07@\u03F3\x8C\u03F4\u03F5\x07.\u03F5\x8E\u03F6\u03F7\x07\x80\u03F7\x90\u03F8\u03F9\x07<\u03F9\u03FAG$\u03FA\u03FBI%\u03FB\u03FCS*\u03FC\u03FD\x07*\u03FD\x92\u03FE\u0400	%\u03FF\u03FE\u0400\u0401\u0401\u03FF\u0401\u0402\u0402\u0410\u0403\u0405	%\u0404\u0403\u0405\u0408\u0406\u0404\u0406\u0407\u0407\u0409\u0408\u0406\u0409\u040B\x070\u040A\u040C	%\u040B\u040A\u040C\u040D\u040D\u040B\u040D\u040E\u040E\u0410\u040F\u03FF\u040F\u0406\u0410\x94\u0411\u0419\x07$\u0412\u0418
&\u0413\u0414\x07^\u0414\u0418+\u0415\u0418\x85C\u0416\u0418\x1B\u0417\u0412\u0417\u0413\u0417\u0415\u0417\u0416\u0418\u041B\u0419\u0417\u0419\u041A\u041A\u041C`),c(It,"_serializedATNSegment2","\u041B\u0419\u041C\u042A\x07$\u041D\u0425\x07)\u041E\u0424\n'\u041F\u0420\x07^\u0420\u0424+\u0421\u0424\x85C\u0422\u0424\x1B\u0423\u041E\u0423\u041F\u0423\u0421\u0423\u0422\u0424\u0427\u0425\u0423\u0425\u0426\u0426\u0428\u0427\u0425\u0428\u042A\x07)\u0429\u0411\u0429\u041D\u042A\x96\u042B\u042C\x07`\u042C\u042D\x07?\u042D\x98\u042E\u042F\x07&\u042F\u0430\x07?\u0430\x9A\u0431\u0432\x07,\u0432\u0433\x07?\u0433\x9C\u0434\u0435I%\u0435\u0436O(\u0436\x9E\u0437\u0438\x07/\u0438\u0439E#\u0439\u043AI%\u043A\u043B_0\u043B\u043C\x07/\u043C\u044B\u043D\u043E\x07/\u043E\u043FY-\u043F\u04407\u0440\u04411\u0441\u0442A!\u0442\u0443? \u0443\u0444S*\u0444\u0445\x07/\u0445\u044B\u0446\u0447\x07/\u0447\u0448I%\u0448\u0449\x07/\u0449\u044B\u044A\u0437\u044A\u043D\u044A\u0446\u044B\xA0\u044C\u044D\x07e\u044D\u044E\x07c\u044E\u044F\x07n\u044F\u0450\x07e\u0450\u0451\x07*\u0451\xA2\u0452\u0453\x07/\u0453\u0454\x07/\u0454\u0455\u0455\u0459\u0456\u0458\u0457\u0456\u0458\u045B\u0459\u0457\u0459\u045A\u045A\xA4\u045B\u0459\u045C\u045D\x07x\u045D\u045E\x07c\u045E\u045F\x07t\u045F\u0460\x07*\u0460\xA6\u0461\u0463\x07/\u0462\u0461\u0462\u0463\u0463\u0464\u0464\u0468\u0465\u0467\u0466\u0465\u0467\u046A\u0468\u0466\u0468\u0469\u0469\xA8\u046A\u0468\u046B\u046C\xA7T\u046C\u046D\x07*\u046D\xAA|\xC3\xC8\xCB\xCE\xD1\xD4\xDB\xE0\xE5\xED\xF3\xF9\xFF\u0103\u010B\u0110\u0112\u0118\u011C\u0122\u0125\u0128\u012B\u012E\u0137\u013B\u0144\u0148\u0151\u0155\u015E\u0162\u016B\u016F\u0178\u017C\u0185\u018D\u0196\u019E\u01A7\u01AF\u01B8\u01C0\u01C9\u01D1\u01DA\u01E2\u01EB\u01F3\u01FC\u0204\u020D\u0215\u021E\u0226\u022F\u0237\u0240\u0248\u0251\u0259\u0262\u026A\u0273\u027B\u0284\u028C\u0295\u029D\u02A6\u02AE\u02B7\u02BF\u02C9\u02D7\u02D9\u02F7\u030D\u032A\u0342\u034B\u0356\u036D\u0374\u0377\u037A\u037D\u0380\u0386\u0389\u038C\u038F\u0392\u0399\u039C\u039F\u03A2\u03AA\u03AD\u03B0\u03B9\u03BC\u03C6\u03C8\u03DB\u03E0\u03E7\u0401\u0406\u040D\u040F\u0417\u0419\u0423\u0425\u0429\u044A\u0459\u0462\u0468"),c(It,"_serializedATN",C3([Ki._serializedATNSegment0,Ki._serializedATNSegment1,Ki._serializedATNSegment2],"")),c(It,"__ATN");class gV{apply(e,t){const i=ow.CharStreams.fromString(t),s=new It(i),n=new pD;s.addErrorListener(n);const o=new ow.CommonTokenStream(s),a=new je(o);a.buildParseTree=!0;const l=new pD;a.addErrorListener(l);const u=a.inlineStyle(),d=new fV(e);u.accept(d)}}class mV extends o3{constructor(t){super();c(this,"data_");c(this,"css_parser_");t&&t instanceof um?this.data_=t:this.data_=new um,this.css_parser_=new gV}data(){return Q(this.data_),this.data_}setProperty(t,i){Q(this.css_parser_),this.data_||(this.data_=new um),this.css_parser_.apply(this,`${t} : ${i};`)}GetDeclaredPropertyValueStringByKey(t){return t>T.kMaxLonghandPropertyKey?(Rr(t,T.kMaxEveryPropertyKey),Ue(),_i(rn,'Unsupported property query for "',st(t),'": Returning of property value strings is not ',"supported for shorthand properties."),""):this.data_&&t!=T.kNoneProperty?this.data_.GetPropertyValueString(t):""}AssignFrom(t){if(!t.data_){this.data_=void 0;return}this.data_||(this.data_=new um),this.data_.AssignFrom(t.data_)}RecordMutation(){Ue()}toString(){var t;return(t=this.data_)==null?void 0:t.toString()}}class xV{constructor(){c(this,"declared_property_values_",new Map);c(this,"has_declared_inherited_properties_",!1);c(this,"parent_computed_style_declaration_",null);c(this,"is_inline_before_blockification_",!0);c(this,"declared_properties_inherited_from_parent_",[])}GetPropertyValueReference(e){return T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),this.declared_property_values_.has(e)?this.declared_property_values_.get(e):this.parent_computed_style_declaration_&&sw(e)===ly.kInheritedYes&&this.parent_computed_style_declaration_.HasInheritedProperties()?this.parent_computed_style_declaration_.GetInheritedPropertyValueReference(e):this.GetComputedInitialValue(e)}GetComputedInitialValue(e){switch(e){case T.kAllProperty:case T.kAlignContentProperty:case T.kAlignItemsProperty:case T.kAlignSelfProperty:case T.kBackgroundColorProperty:case T.kBackgroundImageProperty:case T.kBackgroundPositionProperty:case T.kBackgroundProperty:case T.kBackgroundRepeatProperty:case T.kBackgroundSizeProperty:case T.kBorderBottomLeftRadiusProperty:case T.kBorderBottomProperty:case T.kBorderBottomRightRadiusProperty:case T.kBorderBottomStyleProperty:case T.kBorderColorProperty:case T.kBorderLeftProperty:case T.kBorderLeftStyleProperty:case T.kBorderProperty:case T.kBorderRadiusProperty:case T.kBorderRightProperty:case T.kBorderRightStyleProperty:case T.kBorderStyleProperty:case T.kBorderTopLeftRadiusProperty:case T.kBorderTopProperty:case T.kBorderTopRightRadiusProperty:case T.kBorderTopStyleProperty:case T.kBorderWidthProperty:case T.kBottomProperty:case T.kBoxShadowProperty:case T.kColorProperty:case T.kContentProperty:case T.kDisplayProperty:case T.kFilterProperty:case T.kFlexProperty:case T.kFlexBasisProperty:case T.kFlexDirectionProperty:case T.kFlexFlowProperty:case T.kFlexGrowProperty:case T.kFlexShrinkProperty:case T.kFlexWrapProperty:case T.kFontProperty:case T.kFontFamilyProperty:case T.kFontStyleProperty:case T.kFontWeightProperty:case T.kFontSizeProperty:case T.kHeightProperty:case T.kIntersectionObserverRootMarginProperty:case T.kJustifyContentProperty:case T.kLeftProperty:case T.kLineHeightProperty:case T.kMarginBottomProperty:case T.kMarginLeftProperty:case T.kMarginProperty:case T.kMarginRightProperty:case T.kMarginTopProperty:case T.kMaxHeightProperty:case T.kMaxWidthProperty:case T.kMinHeightProperty:case T.kMinWidthProperty:case T.kNoneProperty:case T.kOpacityProperty:case T.kOrderProperty:case T.kOutlineProperty:case T.kOutlineStyleProperty:case T.kOverflowProperty:case T.kOverflowWrapProperty:case T.kPaddingBottomProperty:case T.kPaddingLeftProperty:case T.kPaddingProperty:case T.kPaddingRightProperty:case T.kPaddingTopProperty:case T.kPointerEventsProperty:case T.kPositionProperty:case T.kRightProperty:case T.kSrcProperty:case T.kTextAlignProperty:case T.kTextDecorationLineProperty:case T.kTextDecorationProperty:case T.kTextIndentProperty:case T.kTextOverflowProperty:case T.kTextShadowProperty:case T.kTextTransformProperty:case T.kTopProperty:case T.kTransformOriginProperty:case T.kTransformProperty:case T.kUnicodeRangeProperty:case T.kVerticalAlignProperty:case T.kVisibilityProperty:case T.kWhiteSpaceProperty:case T.kWidthProperty:case T.kWordWrapProperty:case T.kZIndexProperty:break}return sb(e)}get align_content(){return this.GetPropertyValueReference(T.kAlignContentProperty)}get align_items(){return this.GetPropertyValueReference(T.kAlignItemsProperty)}get background_color(){return this.GetPropertyValueReference(T.kBackgroundColorProperty)}get background_image(){return this.GetPropertyValueReference(T.kBackgroundImageProperty)}get background_position(){return this.GetPropertyValueReference(T.kBackgroundPositionProperty)}get background_repeat(){return this.GetPropertyValueReference(T.kBackgroundRepeatProperty)}get background_size(){return this.GetPropertyValueReference(T.kBackgroundSizeProperty)}get border_top_color(){return this.GetPropertyValueReference(T.kBorderTopColorProperty)}get border_right_color(){return this.GetPropertyValueReference(T.kBorderRightColorProperty)}get border_bottom_color(){return this.GetPropertyValueReference(T.kBorderBottomColorProperty)}get border_left_color(){return this.GetPropertyValueReference(T.kBorderLeftColorProperty)}get border_top_style(){return this.GetPropertyValueReference(T.kBorderTopStyleProperty)}get border_right_style(){return this.GetPropertyValueReference(T.kBorderRightStyleProperty)}get border_bottom_style(){return this.GetPropertyValueReference(T.kBorderBottomStyleProperty)}get border_left_style(){return this.GetPropertyValueReference(T.kBorderLeftStyleProperty)}get border_top_width(){return this.GetPropertyValueReference(T.kBorderTopWidthProperty)}get border_right_width(){return this.GetPropertyValueReference(T.kBorderRightWidthProperty)}get border_bottom_width(){return this.GetPropertyValueReference(T.kBorderBottomWidthProperty)}get border_left_width(){return this.GetPropertyValueReference(T.kBorderLeftWidthProperty)}get border_top_left_radius(){return this.GetPropertyValueReference(T.kBorderTopLeftRadiusProperty)}get border_top_right_radius(){return this.GetPropertyValueReference(T.kBorderTopRightRadiusProperty)}get border_bottom_right_radius(){return this.GetPropertyValueReference(T.kBorderBottomRightRadiusProperty)}get border_bottom_left_radius(){return this.GetPropertyValueReference(T.kBorderBottomLeftRadiusProperty)}get bottom(){return this.GetPropertyValueReference(T.kBottomProperty)}get box_shadow(){return this.GetPropertyValueReference(T.kBoxShadowProperty)}get color(){return this.GetPropertyValueReference(T.kColorProperty)}get content(){return this.GetPropertyValueReference(T.kContentProperty)}get display(){return this.GetPropertyValueReference(T.kDisplayProperty)}get filter(){return this.GetPropertyValueReference(T.kFilterProperty)}get flex_basis(){return this.GetPropertyValueReference(T.kFlexBasisProperty)}get flex_direction(){return this.GetPropertyValueReference(T.kFlexDirectionProperty)}get flex_grow(){return this.GetPropertyValueReference(T.kFlexGrowProperty)}get flex_shrink(){return this.GetPropertyValueReference(T.kFlexShrinkProperty)}get flex_wrap(){return this.GetPropertyValueReference(T.kFlexWrapProperty)}get font_family(){return this.GetPropertyValueReference(T.kFontFamilyProperty)}get font_size(){return this.GetPropertyValueReference(T.kFontSizeProperty)}get font_style(){return this.GetPropertyValueReference(T.kFontStyleProperty)}get font_weight(){return this.GetPropertyValueReference(T.kFontWeightProperty)}get height(){return this.GetPropertyValueReference(T.kHeightProperty)}get justify_content(){return this.GetPropertyValueReference(T.kJustifyContentProperty)}get left(){return this.GetPropertyValueReference(T.kLeftProperty)}get line_height(){return this.GetPropertyValueReference(T.kLineHeightProperty)}get margin_bottom(){return this.GetPropertyValueReference(T.kMarginBottomProperty)}get margin_left(){return this.GetPropertyValueReference(T.kMarginLeftProperty)}get margin_right(){return this.GetPropertyValueReference(T.kMarginRightProperty)}get margin_top(){return this.GetPropertyValueReference(T.kMarginTopProperty)}get max_height(){return this.GetPropertyValueReference(T.kMaxHeightProperty)}get max_width(){return this.GetPropertyValueReference(T.kMaxWidthProperty)}get min_height(){return this.GetPropertyValueReference(T.kMinHeightProperty)}get min_width(){return this.GetPropertyValueReference(T.kMinWidthProperty)}get opacity(){return this.GetPropertyValueReference(T.kOpacityProperty)}get order(){return this.GetPropertyValueReference(T.kOrderProperty)}get outline_color(){return this.GetPropertyValueReference(T.kOutlineColorProperty)}get outline_style(){return this.GetPropertyValueReference(T.kOutlineStyleProperty)}get outline_width(){return this.GetPropertyValueReference(T.kOutlineWidthProperty)}get overflow(){return this.GetPropertyValueReference(T.kOverflowProperty)}get overflow_wrap(){return this.GetPropertyValueReference(T.kOverflowWrapProperty)}get padding_bottom(){return this.GetPropertyValueReference(T.kPaddingBottomProperty)}get padding_left(){return this.GetPropertyValueReference(T.kPaddingLeftProperty)}get padding_right(){return this.GetPropertyValueReference(T.kPaddingRightProperty)}get padding_top(){return this.GetPropertyValueReference(T.kPaddingTopProperty)}get pointer_events(){return this.GetPropertyValueReference(T.kPointerEventsProperty)}get position(){return this.GetPropertyValueReference(T.kPositionProperty)}get right(){return this.GetPropertyValueReference(T.kRightProperty)}get text_align(){return this.GetPropertyValueReference(T.kTextAlignProperty)}get text_decoration_color(){return this.GetPropertyValueReference(T.kTextDecorationColorProperty)}get text_decoration_line(){return this.GetPropertyValueReference(T.kTextDecorationLineProperty)}get text_indent(){return this.GetPropertyValueReference(T.kTextIndentProperty)}get text_overflow(){return this.GetPropertyValueReference(T.kTextOverflowProperty)}get text_shadow(){return this.GetPropertyValueReference(T.kTextShadowProperty)}get text_transform(){return this.GetPropertyValueReference(T.kTextTransformProperty)}get top(){return this.GetPropertyValueReference(T.kTopProperty)}get transform(){return this.GetPropertyValueReference(T.kTransformProperty)}get transform_origin(){return this.GetPropertyValueReference(T.kTransformOriginProperty)}get vertical_align(){return this.GetPropertyValueReference(T.kVerticalAlignProperty)}get visibility(){return this.GetPropertyValueReference(T.kVisibilityProperty)}get white_space(){return this.GetPropertyValueReference(T.kWhiteSpaceProperty)}get width(){return this.GetPropertyValueReference(T.kWidthProperty)}get z_index(){return this.GetPropertyValueReference(T.kZIndexProperty)}SetPropertyValue(e,t){T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),t?(this.declared_property_values_.set(e,t),this.has_declared_inherited_properties_=this.has_declared_inherited_properties_||sw(e)==ly.kInheritedYes&&t!=_e.GetInherit()):this.declared_property_values_.has(e)&&this.declared_property_values_.delete(e)}GetPropertyValue(e){return this.GetPropertyValueReference(e)}set_is_inline_before_blockification(e){this.is_inline_before_blockification_=e}set_background_image(e){this.SetPropertyValue(T.kBackgroundImageProperty,e)}has_declared_inherited_properties(){return this.has_declared_inherited_properties_}GetParentComputedStyleDeclaration(){return this.parent_computed_style_declaration_}IsPositioned(){return this.position!=_e.GetStatic()}IsTransformed(){return this.transform!=_e.GetNone()}is_inline_before_blockification(){return this.is_inline_before_blockification_}IsContainingBlockForPositionAbsoluteElements(){return this.IsPositioned()||this.IsTransformed()}IsDeclared(e){return this.declared_property_values_.has(e)}declared_property_values(){return this.declared_property_values_}GetDeclaredPropertyValueReference(e){return T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),Q(this.declared_property_values_.has(e)),this.declared_property_values_.get(e)}AddDeclaredPropertyInheritedFromParent(e){T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),this.declared_properties_inherited_from_parent_.push(e)}AreDeclaredPropertiesInheritedFromParentValid(){if(this.declared_properties_inherited_from_parent_.length==0)return!0;if(!this.parent_computed_style_declaration_)return!1;let e=this.parent_computed_style_declaration_.data();if(!e)return!1;Q(e.AreDeclaredPropertiesInheritedFromParentValid());for(let t of this.declared_properties_inherited_from_parent_)if(this.GetPropertyValueReference(t)!==e.GetPropertyValueReference(t))return!1;return!0}AssignFrom(e){this.declared_property_values_=e.declared_property_values_,this.has_declared_inherited_properties_=e.has_declared_inherited_properties_,this.declared_properties_inherited_from_parent_=e.declared_properties_inherited_from_parent_,this.parent_computed_style_declaration_=e.parent_computed_style_declaration_,this.is_inline_before_blockification_=e.is_inline_before_blockification_}DoDeclaredPropertiesMatch(e){Kt(this.declared_property_values_.size,e.declared_property_values_.size);for(let t of this.declared_property_values_.keys())if(this.declared_property_values_.get(t)!==e.declared_property_values_.get(t))return!1;return!0}}class Fg extends xV{set_background_color(e){this.SetPropertyValue(T.kBackgroundColorProperty,e)}set_display(e){this.SetPropertyValue(T.kDisplayProperty,e)}set_width(e){this.SetPropertyValue(T.kWidthProperty,e)}set_height(e){this.SetPropertyValue(T.kHeightProperty,e)}SetPropertyValue(e,t){super.SetPropertyValue(e,t)}}class ym{constructor(e){c(this,"properties_",[]);c(this,"properties_bitset_",new Set);this.properties_=e;for(let t=0;t<this.properties_.length;++t){let i=this.properties_[t];T.kNoneProperty,Rr(i,T.kMaxLonghandPropertyKey),this.properties_bitset_.add(i)}}DoDeclaredPropertiesMatch(e,t){for(let i=0;i<this.properties_.length;++i){let s=this.properties_[i],n=e.declared_property_values_.get(s),o=t.declared_property_values_.get(s);if(Boolean(!!n)!==Boolean(o)||n&&!n.EQ(o))return!1}return!0}}class yV{constructor(e=0,t=0,i=0){c(this,"v_",[0,0,0]);Wn(e,0,"Specificity field cannot be negative."),Wn(t,0,"Specificity field cannot be negative."),Wn(i,0,"Specificity field cannot be negative."),this.v_[0]=e,this.v_[1]=t,this.v_[2]=i}LT(e){const{v_:t}=this;return t[0]<e.v_[0]||t[0]==e.v_[0]&&(t[1]<e.v_[1]||t[1]==e.v_[1]&&t[2]<e.v_[2])}EQ(e){const{v_:t}=this;return t[0]==e.v_[0]&&t[1]==e.v_[1]&&t[2]==e.v_[2]}}var xw=(r=>(r[r.kNormalUserAgent=0]="kNormalUserAgent",r[r.kNormalAuthor=1]="kNormalAuthor",r[r.kNormalOverride=2]="kNormalOverride",r[r.kImportantMin=3]="kImportantMin",r[r.kImportantAuthor=3]="kImportantAuthor",r[r.kImportantOverride=4]="kImportantOverride",r[r.kImportantUserAgent=5]="kImportantUserAgent",r[r.kImportantMax=5]="kImportantMax",r))(xw||{});const eu=class{constructor(e=eu.kUnattached,t=eu.kUnattached){c(this,"style_sheet_index_",eu.kUnattached);c(this,"rule_index_",eu.kUnattached);this.style_sheet_index_=e,this.rule_index_=t,Wn(e,eu.kUnattached,"Wrong style sheet index."),Wn(t,eu.kUnattached,"Wrong rule index.")}LT(e){return this.style_sheet_index_<e.style_sheet_index_||this.style_sheet_index_==e.style_sheet_index_&&this.rule_index_<e.rule_index_}EQ(e){return this.style_sheet_index_==e.style_sheet_index_&&this.rule_index_==e.rule_index_}};let ux=eu;c(ux,"kUnattached",-1);class xD{constructor(e,t=new yV,i=new ux){c(this,"origin_");c(this,"specificity_");c(this,"appearance_");this.origin_=e,this.specificity_=t,this.appearance_=i}origin(){return this.origin_}specificity(){return this.specificity_}appearance(){return this.appearance_}SetImportant(){switch(this.origin_){case 0:{this.origin_=5;break}case 1:{this.origin_=3;break}case 2:{this.origin_=4;break}case 3:case 4:case 5:et()}}LT(e){return this.origin_<e.origin_||this.origin_==e.origin_&&(this.specificity_.LT(e.specificity_)||this.specificity_.EQ(e.specificity_)&&this.appearance_.LT(e.appearance_))}EQ(e){return this.origin_==e.origin_&&this.specificity_==e.specificity_&&this.appearance_==e.appearance_}}function vV(r){let e=new Fg,t=new Array(T.kNumLonghandProperties);if(r){const i=new xD(xw.kImportantMin),s=new xD(xw.kImportantMax);EV(r,i,s,t,e)}return e}function EV(r,e,t,i,s){let n=!1,o=r.declared_property_values();for(let[a,l]of o){T.kNoneProperty,Rr(a,T.kMaxLonghandPropertyKey);let u=r.IsDeclaredPropertyImportant(a)?t:e;(!i[a]||i[a].LT(u))&&(i[a]=u,s.SetPropertyValue(a,l),T.kBackgroundImageProperty==a&&(n=!0))}return n}class el{constructor(e,t){c(this,"width_",0);c(this,"height_",0);if(arguments.length==1){let i=e;this.width_=i.width_,this.height_=i.height_}else arguments.length===2&&(this.width_=e,this.height_=t)}IsEmpty(){return this.width_==0||this.height_==0}width(){return this.width_}height(){return this.height_}set_width(e){this.width_=e}set_height(e){this.height_=e}GetArea(){return this.width()*this.height()}Enlarge(e,t){this.set_width(this.width_+e),this.set_height(this.height_+t)}SetToMin(e){this.width_=this.width_<=e.width_?this.width_:e.width_,this.height_=this.height_<=e.height_?this.height_:e.height_}SetToMax(e){this.width_=this.width_>=e.width_?this.width_:e.width_,this.height_=this.height_>=e.height_?this.height_:e.height_}CLONE(){return new el(this)}Scale(e){this.width_*=e,this.height_*=e}}class tl extends el{GetArea(){return this.width()*this.height()}ToString(){return`${this.width()}x${this.height()}`}}class SV{}class II extends SV{VisitFontStyle(e){this.VisitDefault(e)}VisitKeyword(e){this.VisitDefault(e)}VisitLength(e){this.VisitDefault(e)}VisitRGBAColor(e){this.VisitDefault(e)}VisitInteger(e){this.VisitDefault(e)}VisitPercentage(e){this.VisitDefault(e)}VisitNumber(e){this.VisitDefault(e)}VisitCalc(e){this.VisitDefault(e)}VisitPropertyList(e){this.VisitDefault(e)}VisitTransformPropertyValue(e){this.VisitDefault(e)}VisitString(e){this.VisitDefault(e)}VisitFontWeight(e){this.VisitDefault(e)}VisitShadow(e){this.VisitDefault(e)}VisitUnicodeRange(e){this.VisitDefault(e)}}class jr extends II{VisitDefault(e){_i(Rp,"Unsupported property value: ",e.ToString()),et()}}var FI=(r=>(r[r.kLengthsIndexOffsetX=0]="kLengthsIndexOffsetX",r[r.kLengthsIndexOffsetY=1]="kLengthsIndexOffsetY",r[r.kLengthsIndexBlurRadius=2]="kLengthsIndexBlurRadius",r[r.kLengthsIndexSpreadRadius=3]="kLengthsIndexSpreadRadius",r[r.kMaxLengths=4]="kMaxLengths",r))(FI||{});class zb extends Yn{constructor(t,i,s){super();c(this,"lengths_");c(this,"color_");c(this,"has_inset_");Rr(t.length,4),this.lengths_=t.slice(),this.color_=i,this.has_inset_=s}Accept(t){t.VisitShadow(this)}lengths(){return this.lengths_}offset_x(){return this.lengths_[0]}offset_y(){return this.lengths_[1]}blur_radius(){return this.lengths_[2]}spread_radius(){return this.lengths_[3]}color(){return this.color_}has_inset(){return this.has_inset_}ToString(){let t="";for(let i=0;i<4;++i)this.lengths_[i]&&(t.length&&(t+=" "),t+=this.lengths_[i].ToString());return this.color_&&(t.length&&(t+=" "),t+=this.color_.ToString()),this.has_inset_&&(t.length||(t+=" "),t+=g6),t}EQ(t){for(let i=0;i<4;++i)if(!this.lengths_[i]!=!t.lengths_[i]||this.lengths_[i]&&!this.lengths_[i].EQ(t.lengths_[i]))return!1;return this.color_.EQ(t.color_)&&this.has_inset_==t.has_inset_}GetTypeId(){return rr(zb)}}class wV extends Yn{Accept(e){e.VisitTransformPropertyValue(this)}}class au{constructor(e,t){c(this,"x_",0);c(this,"y_",0);if(arguments.length==1){let i=e;this.x_=i.x_,this.y_=i.y_}else this.x_=e||0,this.y_=t||0}x(){return this.x_}y(){return this.y_}SetPoint(e,t){this.x_=e,this.y_=t}set_x(e){this.x_=e}set_y(e){this.y_=e}SetToMin(e){this.x_=this.x_<=e.x_?this.x_:e.x_,this.y_=this.y_<=e.y_?this.y_:e.y_}SetToMax(e){this.x_=this.x_>=e.x_?this.x_:e.x_,this.y_=this.y_>=e.y_?this.y_:e.y_}ADD(e){this.x_+=e.x(),this.y_+=e.y()}EQ(e){return this.x_===e.x_&&this.y_===e.y_}CLONE(){return new au(this.x_,this.y_)}Scale(e){this.x_*=e,this.y_*=e}}class Hr extends au{}function py(r){return new Hr(r.x(),r.y())}const Fn=0,Mn=1,Bn=2,_n=3,pn=4,gn=5,mn=6,xn=7,yn=8;class Li{constructor(){c(this,"data_",[0,0,0,0,0,0,0,0,0])}static MatrixToArrayCoords(e,t){return Q(e>=0&&e<3),Q(t>=0&&t<3),e*3+t}static Zeros(){let e=new Li;return e.SetMatrix(0,0,0,0,0,0,0,0,0),e}static Ones(){let e=new Li;return e.SetMatrix(1,1,1,1,1,1,1,1,1),e}static Identity(){let e=new Li;return e.SetMatrix(1,0,0,0,1,0,0,0,1),e}static FromOuterProduct(e,t){let i=new Li;return i.SetMatrix(e.x()*t.x(),e.x()*t.y(),e.x()*t.z(),e.y()*t.x(),e.y()*t.y(),e.y()*t.z(),e.z()*t.x(),e.z()*t.y(),e.z()*t.z()),i}static FromValues(e,t,i,s,n,o,a,l,u){let d=new Li;return d.SetMatrix(e,t,i,s,n,o,a,l,u),d}SetMatrix(e,t,i,s,n,o,a,l,u){const{data_:d}=this;d[0]=e,d[1]=t,d[2]=i,d[3]=s,d[4]=n,d[5]=o,d[6]=a,d[7]=l,d[8]=u}IsZeros(){return this.data_[Fn]==0&&this.data_[Mn]==0&&this.data_[Bn]==0&&this.data_[_n]==0&&this.data_[pn]==0&&this.data_[gn]==0&&this.data_[mn]==0&&this.data_[xn]==0&&this.data_[yn]==0}IsIdentity(){return this.data_[Fn]==1&&this.data_[Mn]==0&&this.data_[Bn]==0&&this.data_[_n]==0&&this.data_[pn]==1&&this.data_[gn]==0&&this.data_[mn]==0&&this.data_[xn]==0&&this.data_[yn]==1}EQ(e){return tO(this.data_,e.data_)}Get(e,t){return this.data_[Li.MatrixToArrayCoords(e,t)]}MUL(e){if(e instanceof Li){let t=new Li;const{data_:i}=this;return t.data_[Fn]=i[Fn]*e.data_[Fn]+i[Mn]*e.data_[_n]+i[Bn]*e.data_[mn],t.data_[Mn]=i[Fn]*e.data_[Mn]+i[Mn]*e.data_[pn]+i[Bn]*e.data_[xn],t.data_[Bn]=i[Fn]*e.data_[Bn]+i[Mn]*e.data_[gn]+i[Bn]*e.data_[yn],t.data_[_n]=i[_n]*e.data_[Fn]+i[pn]*e.data_[_n]+i[gn]*e.data_[mn],t.data_[pn]=i[_n]*e.data_[Mn]+i[pn]*e.data_[pn]+i[gn]*e.data_[xn],t.data_[gn]=i[_n]*e.data_[Bn]+i[pn]*e.data_[gn]+i[gn]*e.data_[yn],t.data_[mn]=i[mn]*e.data_[Fn]+i[xn]*e.data_[_n]+i[yn]*e.data_[mn],t.data_[xn]=i[mn]*e.data_[Mn]+i[xn]*e.data_[pn]+i[yn]*e.data_[xn],t.data_[yn]=i[mn]*e.data_[Bn]+i[xn]*e.data_[gn]+i[yn]*e.data_[yn],t}else if(e instanceof Hr){let t=e.x()*this.data_[Fn]+e.y()*this.data_[Mn]+this.data_[Bn],i=e.x()*this.data_[_n]+e.y()*this.data_[pn]+this.data_[gn],s=e.x()*this.data_[mn]+e.y()*this.data_[xn]+this.data_[yn];return new Hr(t/s,i/s)}else throw new Error("500")}Inverse(){let e=Li.Zeros(),t=AV(this.data_);return Number.MIN_VALUE>Math.abs(t)||e.SetMatrix((this.data_[pn]*this.data_[yn]-this.data_[gn]*this.data_[xn])/t,(this.data_[Bn]*this.data_[xn]-this.data_[Mn]*this.data_[yn])/t,(this.data_[Mn]*this.data_[gn]-this.data_[Bn]*this.data_[pn])/t,(this.data_[gn]*this.data_[mn]-this.data_[_n]*this.data_[yn])/t,(this.data_[Fn]*this.data_[yn]-this.data_[Bn]*this.data_[mn])/t,(this.data_[Bn]*this.data_[_n]-this.data_[Fn]*this.data_[gn])/t,(this.data_[_n]*this.data_[xn]-this.data_[pn]*this.data_[mn])/t,(this.data_[Mn]*this.data_[mn]-this.data_[Fn]*this.data_[xn])/t,(this.data_[Fn]*this.data_[pn]-this.data_[Mn]*this.data_[_n])/t),e}CLONE(){let e=new Li;return e.SetMatrix(...this.data_),e}}function AV(r){return r[Fn]*(r[pn]*r[yn]-r[gn]*r[xn])+r[Mn]*(r[gn]*r[mn]-r[_n]*r[yn])+r[Bn]*(r[_n]*r[xn]-r[pn]*r[mn])}class bV{constructor(e){c(this,"functions_",[]);c(this,"traits_",0);e&&(this.functions_=sa(e.functions_),this.traits_=e.traits_)}[Symbol.iterator](){let e=0;return{next:()=>e<this.functions_.length?{value:this.functions_[e++],done:!1}:{done:!0}}}push(e){this.traits_|=e.Traits(),this.functions_.push(e)}get length(){return this.functions_.length}getItem(e){return this.functions_[e]}HasTrait(e){return(this.traits_&e)!=0}}class jb extends wV{constructor(t){super();c(this,"value_");this.value_=t}ToString(){let t="";for(let i=0;i<this.value().length;++i)t.length&&(t+=" "),t+=this.value().getItem(i).ToString();return t}value(){return this.value_}ToMatrix(t){let i=Li.Identity();for(let s of this.value())i=i.MUL(s.ToMatrix(t));return i}EQ(t){if(this.value().length!=t.value().length)return!1;for(let i=0;i<this.value().length;++i)if(!this.value().getItem(i).EQ(t.value().getItem(i)))return!1;return!0}HasTrait(t){return this.value_.HasTrait(t)}GetTypeId(){return rr(jb)}}var Vb=(r=>(r[r.kTraitIsDynamic=1]="kTraitIsDynamic",r[r.kTraitUsesRelativeUnits=2]="kTraitUsesRelativeUnits",r[r.kTraitUsesUiNavFocus=4]="kTraitUsesUiNavFocus",r))(Vb||{});class kV{}function yw(r){let e=new Fg;return MI(e,r,r.data(),new tl),e}function MI(r,e,t,i){Q(r),Q(e),Q(t);let s=new TV(r,e,t,i);const n=h9();for(let a of n)!r.IsDeclared(a)&&e.data().IsDeclared(a)&&r.SetPropertyValue(a,_e.GetInherit());let o=r.declared_property_values();for(let[a,l]of o)s.SetComputedStyleForProperty(a,l);s.BlockifyIfNeeded()}class TV{constructor(e,t,i,s){c(this,"cascaded_style_");c(this,"parent_computed_style_");c(this,"root_computed_style_");c(this,"viewport_size_");c(this,"computed_border_bottom_style_");c(this,"computed_border_left_style_");c(this,"computed_border_right_style_");c(this,"computed_border_top_style_");c(this,"computed_color_");c(this,"computed_font_size_");c(this,"computed_outline_style_");c(this,"computed_position_");this.cascaded_style_=e,this.parent_computed_style_=t.data(),this.root_computed_style_=i,this.viewport_size_=s}SetComputedStyleForProperty(e,t){let{result:i,value:s}=this.HandleInheritOrInitial(e,t);i||this.HandleSpecifiedValue(e,s),this.OnComputedStyleCalculated(e,s),s!==t&&this.cascaded_style_.SetPropertyValue(e,s)}BlockifyIfNeeded(){let e=this.cascaded_style_.display,t=e==_e.GetInlineFlex(),i=e==_e.GetInline()||e==_e.GetInlineBlock()||t,s=this.parent_computed_style_.display,n=s==_e.GetFlex()||s==_e.GetInlineFlex();i&&(this.IsAbsolutelyPositioned()||n)&&(t?this.cascaded_style_.set_display(_e.GetFlex()):this.cascaded_style_.set_display(_e.GetBlock())),this.cascaded_style_.set_is_inline_before_blockification(i)}ComputeValue(e){if(this.cascaded_style_.IsDeclared(e)){let t=this.cascaded_style_.GetDeclaredPropertyValueReference(e);this.SetComputedStyleForProperty(e,t)}else{let t=this.cascaded_style_.GetPropertyValueReference(e);this.OnComputedStyleCalculated(e,t)}}HandleInheritOrInitial(e,t){return t==_e.GetInherit()?(this.cascaded_style_.AddDeclaredPropertyInheritedFromParent(e),t=this.parent_computed_style_.GetPropertyValue(e),{result:!0,value:t}):t==_e.GetInitial()?(t=sb(e),{result:t!=_e.GetCurrentColor(),value:t}):{result:!1,value:t}}HandleSpecifiedValue(e,t){switch(e){case T.kBackgroundPositionProperty:{let i=new PV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i);let s=i.computed_background_position();s&&(t=s)}break;case T.kBorderBottomColorProperty:case T.kBorderLeftColorProperty:case T.kBorderRightColorProperty:case T.kBorderTopColorProperty:case T.kOutlineColorProperty:case T.kTextDecorationColorProperty:t==_e.GetCurrentColor()&&(t=this.GetColor());break;case T.kBorderBottomWidthProperty:case T.kBorderLeftWidthProperty:case T.kBorderRightWidthProperty:case T.kBorderTopWidthProperty:case T.kOutlineWidthProperty:{let i=new RV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.GetBorderOrOutlineStyleBasedOnWidth(e));t.Accept(i),t=i.computed_border_width()}break;case T.kBoxShadowProperty:case T.kTextShadowProperty:{let i=new DV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.GetColor());t.Accept(i),t=i.computed_shadow()}break;case T.kFlexBasisProperty:{let i=new CV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_value()}break;case T.kFontSizeProperty:if(!this.computed_font_size_){let i=new OV(this.parent_computed_style_.font_size,this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),i.computed_font_size()&&(t=i.computed_font_size())}break;case T.kFontWeightProperty:{let i=new NV;t.Accept(i),t=i.computed_font_weight()}break;case T.kHeightProperty:{let i=new IV(this.parent_computed_style_.height,this.parent_computed_style_.top,this.parent_computed_style_.bottom,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.IsAbsolutelyPositioned());t.Accept(i),t=i.computed_height()}break;case T.kLineHeightProperty:{let i=new FV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_line_height()}break;case T.kMarginBottomProperty:case T.kMarginLeftProperty:case T.kMarginRightProperty:case T.kMarginTopProperty:{let i=new yD(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_margin_or_padding_edge()}break;case T.kPaddingBottomProperty:case T.kPaddingLeftProperty:case T.kPaddingRightProperty:case T.kPaddingTopProperty:{let i=new yD(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_margin_or_padding_edge()}break;case T.kMaxHeightProperty:{let i=new MV(this.parent_computed_style_.height,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.IsAbsolutelyPositioned());t.Accept(i),t=i.computed_max_height()}break;case T.kMinHeightProperty:{let i=new BV(this.parent_computed_style_.height,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.IsAbsolutelyPositioned());t.Accept(i),t=i.computed_min_height()}break;case T.kMaxWidthProperty:case T.kMinWidthProperty:{let i=new LV(this.parent_computed_style_.width,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_min_max_width()}break;case T.kWidthProperty:{let i=new UV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_value()}break;case T.kBackgroundImageProperty:Ue();break;case T.kBackgroundSizeProperty:{let i=new GV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_background_size()}break;case T.kBorderBottomLeftRadiusProperty:case T.kBorderBottomRightRadiusProperty:case T.kBorderTopLeftRadiusProperty:case T.kBorderTopRightRadiusProperty:{let i=new HV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_border_radius()}break;case T.kTextIndentProperty:{let i=new zV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_text_indent()}break;case T.kTransformOriginProperty:{let i=new jV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_transform_origin()}break;case T.kTransformProperty:{let i=new VV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_transform_list()}break;case T.kBottomProperty:case T.kLeftProperty:case T.kRightProperty:case T.kTopProperty:{let i=new WV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_position_offset()}break;case T.kAlignContentProperty:case T.kAlignItemsProperty:case T.kAlignSelfProperty:case T.kBackgroundColorProperty:case T.kBackgroundRepeatProperty:case T.kBorderBottomStyleProperty:case T.kBorderLeftStyleProperty:case T.kBorderRightStyleProperty:case T.kBorderTopStyleProperty:case T.kColorProperty:case T.kContentProperty:case T.kDisplayProperty:case T.kFilterProperty:case T.kFlexDirectionProperty:case T.kFlexGrowProperty:case T.kFlexShrinkProperty:case T.kFlexWrapProperty:case T.kFontFamilyProperty:case T.kFontStyleProperty:case T.kIntersectionObserverRootMarginProperty:case T.kJustifyContentProperty:case T.kOpacityProperty:case T.kOrderProperty:case T.kOutlineStyleProperty:case T.kOverflowProperty:case T.kOverflowWrapProperty:case T.kPointerEventsProperty:case T.kPositionProperty:case T.kTextAlignProperty:case T.kTextDecorationLineProperty:case T.kTextOverflowProperty:case T.kTextTransformProperty:case T.kVerticalAlignProperty:case T.kVisibilityProperty:case T.kWhiteSpaceProperty:case T.kWordWrapProperty:case T.kZIndexProperty:break;case T.kAllProperty:case T.kBackgroundProperty:case T.kBorderBottomProperty:case T.kBorderColorProperty:case T.kBorderLeftProperty:case T.kBorderProperty:case T.kBorderRadiusProperty:case T.kBorderRightProperty:case T.kBorderStyleProperty:case T.kBorderTopProperty:case T.kBorderWidthProperty:case T.kFlexProperty:case T.kFlexFlowProperty:case T.kFontProperty:case T.kMarginProperty:case T.kNoneProperty:case T.kOutlineProperty:case T.kPaddingProperty:case T.kSrcProperty:case T.kTextDecorationProperty:case T.kUnicodeRangeProperty:et();break}}OnComputedStyleCalculated(e,t){switch(e){case T.kFontSizeProperty:this.computed_font_size_=t;break;case T.kPositionProperty:this.computed_position_=t;break;case T.kBorderBottomStyleProperty:this.computed_border_bottom_style_=t;break;case T.kBorderLeftStyleProperty:this.computed_border_left_style_=t;break;case T.kBorderRightStyleProperty:this.computed_border_right_style_=t;break;case T.kBorderTopStyleProperty:this.computed_border_top_style_=t;break;case T.kColorProperty:this.computed_color_=t;break;case T.kOutlineStyleProperty:this.computed_outline_style_=t;break;case T.kAllProperty:case T.kAlignContentProperty:case T.kAlignItemsProperty:case T.kAlignSelfProperty:case T.kBackgroundColorProperty:case T.kBackgroundImageProperty:case T.kBackgroundPositionProperty:case T.kBackgroundProperty:case T.kBackgroundRepeatProperty:case T.kBackgroundSizeProperty:case T.kBorderBottomProperty:case T.kBorderBottomColorProperty:case T.kBorderBottomLeftRadiusProperty:case T.kBorderBottomRightRadiusProperty:case T.kBorderBottomWidthProperty:case T.kBorderColorProperty:case T.kBorderLeftProperty:case T.kBorderLeftColorProperty:case T.kBorderLeftWidthProperty:case T.kBorderRadiusProperty:case T.kBorderRightProperty:case T.kBorderRightColorProperty:case T.kBorderRightWidthProperty:case T.kBorderStyleProperty:case T.kBorderTopProperty:case T.kBorderTopColorProperty:case T.kBorderTopLeftRadiusProperty:case T.kBorderTopRightRadiusProperty:case T.kBorderTopWidthProperty:case T.kBorderProperty:case T.kBorderWidthProperty:case T.kBottomProperty:case T.kBoxShadowProperty:case T.kContentProperty:case T.kDisplayProperty:case T.kFilterProperty:case T.kFlexProperty:case T.kFlexBasisProperty:case T.kFlexDirectionProperty:case T.kFlexFlowProperty:case T.kFlexGrowProperty:case T.kFlexShrinkProperty:case T.kFlexWrapProperty:case T.kFontFamilyProperty:case T.kFontProperty:case T.kFontStyleProperty:case T.kFontWeightProperty:case T.kHeightProperty:case T.kIntersectionObserverRootMarginProperty:case T.kJustifyContentProperty:case T.kLeftProperty:case T.kLineHeightProperty:case T.kMarginBottomProperty:case T.kMarginLeftProperty:case T.kMarginProperty:case T.kMarginRightProperty:case T.kMarginTopProperty:case T.kMaxHeightProperty:case T.kMaxWidthProperty:case T.kMinHeightProperty:case T.kMinWidthProperty:case T.kNoneProperty:case T.kOpacityProperty:case T.kOrderProperty:case T.kOutlineProperty:case T.kOutlineColorProperty:case T.kOutlineWidthProperty:case T.kOverflowProperty:case T.kOverflowWrapProperty:case T.kPaddingBottomProperty:case T.kPaddingLeftProperty:case T.kPaddingProperty:case T.kPaddingRightProperty:case T.kPaddingTopProperty:case T.kPointerEventsProperty:case T.kRightProperty:case T.kSrcProperty:case T.kTextAlignProperty:case T.kTextDecorationColorProperty:case T.kTextDecorationLineProperty:case T.kTextDecorationProperty:case T.kTextIndentProperty:case T.kTextOverflowProperty:case T.kTextShadowProperty:case T.kTextTransformProperty:case T.kTopProperty:case T.kTransformOriginProperty:case T.kTransformProperty:case T.kUnicodeRangeProperty:case T.kVerticalAlignProperty:case T.kVisibilityProperty:case T.kWhiteSpaceProperty:case T.kWidthProperty:case T.kWordWrapProperty:case T.kZIndexProperty:break}}IsAbsolutelyPositioned(){return this.computed_position_||this.ComputeValue(T.kPositionProperty),Q(this.computed_position_),this.computed_position_==_e.GetAbsolute()||this.computed_position_==_e.GetFixed()}GetFontSize(){return this.computed_font_size_||this.ComputeValue(T.kFontSizeProperty),Q(this.computed_font_size_),this.computed_font_size_}GetRootFontSize(){return this.root_computed_style_.font_size}GetViewportSizeOnePercent(){return this.viewport_size_}GetBorderOrOutlineStyleBasedOnWidth(e){return e==T.kBorderBottomWidthProperty?this.GetBorderBottomStyle():e==T.kBorderLeftWidthProperty?this.GetBorderLeftStyle():e==T.kBorderRightWidthProperty?this.GetBorderRightStyle():e==T.kBorderTopWidthProperty?this.GetBorderTopStyle():(Kt(e,T.kOutlineWidthProperty),this.GetOutlineStyle())}GetBorderBottomStyle(){return this.computed_border_bottom_style_||this.ComputeValue(T.kBorderBottomStyleProperty),Q(this.computed_border_bottom_style_),this.computed_border_bottom_style_}GetBorderLeftStyle(){return this.computed_border_left_style_||this.ComputeValue(T.kBorderLeftStyleProperty),Q(this.computed_border_left_style_),this.computed_border_left_style_}GetBorderRightStyle(){return this.computed_border_right_style_||this.ComputeValue(T.kBorderRightStyleProperty),Q(this.computed_border_right_style_),this.computed_border_right_style_}GetBorderTopStyle(){return this.computed_border_top_style_||this.ComputeValue(T.kBorderTopStyleProperty),Q(this.computed_border_top_style_),this.computed_border_top_style_}GetOutlineStyle(){return this.computed_outline_style_||this.ComputeValue(T.kOutlineStyleProperty),Q(this.computed_outline_style_),this.computed_outline_style_}GetColor(){return this.computed_color_||this.ComputeValue(T.kColorProperty),Q(this.computed_color_),this.computed_color_}}class PV extends jr{constructor(t,i,s){super();c(this,"computed_font_size_");c(this,"root_computed_font_size_");c(this,"viewport_size_");c(this,"computed_background_position_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitPropertyList(t){let i=t.value().length;Wn(i,1),Rr(i,4);let s=new BI(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_),n=[];s.ComputePosition(t.value(),n),this.computed_background_position_=new wo(n)}computed_background_position(){return this.computed_background_position_}}class Xh{constructor(e,t,i){this.origin_as_percentage=e,this.offset_multiplier=t,this.direction=i}}class BI{constructor(e,t,i){c(this,"computed_font_size_");c(this,"root_computed_font_size_");c(this,"viewport_size_");this.computed_font_size_=e,this.root_computed_font_size_=t,this.viewport_size_=i}ComputePosition(e,t){switch(e.length){case 1:this.ComputeOneValuePosition(e,t);break;case 2:this.ComputeTwoValuesPosition(e,t);break;case 3:case 4:this.ComputeThreeOrFourValuesPosition(e,t);break}}ComputeOneValuePosition(e,t){Wn(e.length,1);let i=[];i.push(e[0]),i.push(_e.GetCenter()),this.ComputeTwoValuesPosition(i,t)}ComputeTwoValuesPosition(e,t){Wn(e.length,2);for(let i=0;i<2;++i){let s=e[i];if(s.GetTypeId()==rr(ca))t[i]=s;else if(s.GetTypeId()==rr(_e))this.FillPositionBuilderFromOriginAndOffset(s,void 0,t);else{let n=new Xh(0,1,3);t[i]=this.ProvideCalcValueFromOriginAndOffset(n,s)}}}ComputeThreeOrFourValuesPosition(e,t){e.length,Rr(e.length,4);for(let i=0;i<e.length;++i){let s=i==0?void 0:e[i-1],n=e[i];n.GetTypeId()==rr(_e)?this.FillPositionBuilderFromOriginAndOffset(n,void 0,t):(Q(s),Q(s.GetTypeId()==rr(_e)),this.FillPositionBuilderFromOriginAndOffset(s,n,t))}}ConvertToOriginInfo(e){return Q(e.GetTypeId()==rr(_e)),e==_e.GetLeft()?new Xh(0,1,0):e==_e.GetRight()?new Xh(1,-1,0):e==_e.GetTop()?new Xh(0,1,1):e==_e.GetBottom()?new Xh(1,-1,1):new Xh(.5,1,2)}ProvideCalcValueFromOriginAndOffset(e,t){if(Q(e),!t)return new ca(new Js(e.origin_as_percentage));let i,s;if(t.GetTypeId()==rr(Qt)){let n=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);return i=new Qt(e.offset_multiplier*n.value(),n.unit()),s=new Js(e.origin_as_percentage),new ca(i,s)}else{Q(t.GetTypeId()==rr(Js));let n=t;return s=new Js(e.origin_as_percentage+e.offset_multiplier*n.value()),new ca(s)}}FillPositionBuilderFromOriginAndOffset(e,t,i){Q(e.GetTypeId()==rr(_e));let s=this.ConvertToOriginInfo(e);switch(s.direction){case 0:{i[0]=this.ProvideCalcValueFromOriginAndOffset(s,t);break}case 1:{i[1]=this.ProvideCalcValueFromOriginAndOffset(s,t);break}case 2:{i[0]||(i[0]=this.ProvideCalcValueFromOriginAndOffset(s,t)),i[1]||(i[1]=this.ProvideCalcValueFromOriginAndOffset(s,t));break}case 3:et();break}}}function Cn(r,e,t,i){switch(r.unit()){case Ft.kPixelsUnit:return r;case Ft.kFontSizesAkaEmUnit:return Kt(Ft.kPixelsUnit,e.unit()),new Qt(e.value()*r.value(),Ft.kPixelsUnit);case Ft.kRootElementFontSizesAkaRemUnit:return Kt(Ft.kPixelsUnit,t.unit()),new Qt(t.value()*r.value(),Ft.kPixelsUnit);case Ft.kViewportWidthPercentsAkaVwUnit:return new Qt(i.width()*r.value()/100,Ft.kPixelsUnit);case Ft.kViewportHeightPercentsAkaVhUnit:return new Qt(i.height()*r.value()/100,Ft.kPixelsUnit)}et()}class RV extends jr{constructor(t,i,s,n){super();c(this,"computed_border_width_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s,this.border_style_=n}VisitLength(t){this.border_style_==_e.GetNone()||this.border_style_==_e.GetHidden()?this.computed_border_width_=new Qt(0,Ft.kPixelsUnit):(Kt(this.border_style_,_e.GetSolid()),this.computed_border_width_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_))}computed_border_width(){return this.computed_border_width_}}class DV extends jr{constructor(t,i,s,n){super();c(this,"computed_shadow_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s,this.computed_color_=n}VisitKeyword(t){switch(t.value()){case _.kNone:this.computed_shadow_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitPropertyList(t){let i=new Array(t.value().length);for(let s=0;s<t.value().length;++s){let n=t.value()[s],o=[];for(let l=0;l<FI.kMaxLengths;++l){let u=n.lengths()[l];u&&(o[l]=Cn(u,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_))}let a=n.color();a||(a=new kr(this.computed_color_.value())),i.push(new zb(o,a,n.has_inset()))}this.computed_shadow_=new wo(i)}computed_shadow(){return this.computed_shadow_}}class LI extends jr{constructor(t,i,s){super();c(this,"computed_value_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_value_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_value_=t}computed_value(){return this.computed_value_}}class CV extends LI{VisitKeyword(e){switch(e.value()){case _.kAuto:case _.kContent:this.computed_value_=e;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}class OV extends jr{constructor(t,i,s){super();c(this,"computed_font_size_");this.parent_computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_font_size_=Cn(t,this.parent_computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_font_size_=new Qt(this.parent_computed_font_size_.value()*t.value(),Ft.kPixelsUnit)}computed_font_size(){return this.computed_font_size_}}class NV extends jr{constructor(){super();c(this,"computed_font_weight_")}VisitFontWeight(t){this.computed_font_weight_=t}computed_font_weight(){return this.computed_font_weight_}}class IV extends jr{constructor(t,i,s,n,o,a,l){super();c(this,"computed_height_");this.parent_computed_height_=t,this.parent_computed_top_=i,this.parent_computed_bottom_=s,this.computed_font_size_=n,this.root_computed_font_size_=o,this.viewport_size_=a,this.out_of_flow_=l}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_height_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=_e.GetAuto();this.parent_computed_height_==i&&(this.parent_computed_top_==i||this.parent_computed_bottom_==i)&&this.out_of_flow_}computed_height(){return this.computed_height_}}class FV extends jr{constructor(t,i,s){super();c(this,"computed_line_height_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kNormal:this.computed_line_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_line_height_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitNumber(t){this.computed_line_height_=t}VisitPercentage(t){this.computed_line_height_=new Qt(this.computed_font_size_.value()*t.value(),Ft.kPixelsUnit)}computed_line_height(){return this.computed_line_height_}}class yD extends jr{constructor(t,i,s){super();c(this,"computed_margin_or_padding_edge_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_margin_or_padding_edge_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_margin_or_padding_edge_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_margin_or_padding_edge_=t}computed_margin_or_padding_edge(){return this.computed_margin_or_padding_edge_}}class MV extends jr{constructor(t,i,s,n,o){super();c(this,"computed_max_height_");this.parent_computed_max_height_=t,this.computed_font_size_=i,this.root_computed_font_size_=s,this.viewport_size_=n,this.out_of_flow_=o}VisitKeyword(t){switch(t.value()){case _.kAuto:case _.kNone:this.computed_max_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_max_height_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=_e.GetAuto(),s=_e.GetNone();this.computed_max_height_=this.parent_computed_max_height_==i&&!this.out_of_flow_?s:t}computed_max_height(){return this.computed_max_height_}}class BV extends jr{constructor(t,i,s,n,o){super();c(this,"computed_min_height_");this.parent_computed_height_=t,this.computed_font_size_=i,this.root_computed_font_size_=s,this.viewport_size_=n,this.out_of_flow_=o}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_min_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_min_height_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=_e.GetAuto();this.parent_computed_height_==i&&!this.out_of_flow_?this.computed_min_height_=new Qt(0,Ft.kPixelsUnit):this.computed_min_height_=t}computed_min_height(){return this.computed_min_height_}}class LV extends jr{constructor(t,i,s,n){super();c(this,"computed_min_max_width_");this.parent_computed_width_=t,this.computed_font_size_=i,this.root_computed_font_size_=s,this.viewport_size_=n}VisitKeyword(t){switch(t.value()){case _.kAuto:case _.kNone:this.computed_min_max_width_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_min_max_width_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=new $V;this.parent_computed_width_.Accept(i),i.computed_length_is_negative()?this.computed_min_max_width_=new Qt(0,Ft.kPixelsUnit):this.computed_min_max_width_=t}computed_min_max_width(){return this.computed_min_max_width_}}class UV extends LI{VisitKeyword(e){switch(e.value()){case _.kAuto:this.computed_value_=e;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}class GV extends jr{constructor(t,i,s){super();c(this,"computed_background_size_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){this.computed_background_size_=t}VisitPropertyList(t){let i=new vD(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);t.value()[0].Accept(i);let s=new vD(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);t.value()[1].Accept(s);let n=new Array(2);n.push(i.computed_background_size()),n.push(s.computed_background_size()),this.computed_background_size_=new wo(n.slice())}computed_background_size(){return this.computed_background_size_}}class HV extends jr{constructor(t,i,s){super();c(this,"computed_border_radius_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_border_radius_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_border_radius_=t}computed_border_radius(){return this.computed_border_radius_}}class zV extends jr{constructor(t,i,s){super();c(this,"computed_text_indent_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_text_indent_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}computed_text_indent(){return this.computed_text_indent_}}class jV extends jr{constructor(t,i,s){super();c(this,"computed_transform_origin_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitPropertyList(t){let i=t.value().length;Wn(i,1),Rr(i,3);let s=new BI(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_),n=new Array(3);switch(i){case 1:case 2:s.ComputePosition(t.value(),n),n[2]=new Qt(0,Ft.kPixelsUnit);break;case 3:s.ComputeTwoValuesPosition(t.value(),n),n[2]=Cn(t.value()[2],this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);break}this.computed_transform_origin_=new wo(n.slice())}computed_transform_origin(){return this.computed_transform_origin_}}class VV extends jr{constructor(t,i,s){super();c(this,"computed_transform_list_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kNone:this.computed_transform_list_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitTransformPropertyValue(t){let i=t;if(!i.value().HasTrait(Vb.kTraitUsesRelativeUnits))this.computed_transform_list_=i;else{let s=new bV;for(let n of s){let o=new KV(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);n.Accept(o),s.push(o.PassComputedTransformFunction())}this.computed_transform_list_=new jb(s)}}computed_transform_list(){return this.computed_transform_list_}}class WV extends jr{constructor(t,i,s){super();c(this,"computed_position_offset_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_position_offset_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_position_offset_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_position_offset_=t}computed_position_offset(){return this.computed_position_offset_}}class $V extends II{constructor(){super(...arguments);c(this,"computed_length_is_negative_",!1)}VisitLength(t){switch(t.unit()){case Ft.kPixelsUnit:case Ft.kFontSizesAkaEmUnit:case Ft.kRootElementFontSizesAkaRemUnit:case Ft.kViewportWidthPercentsAkaVwUnit:case Ft.kViewportHeightPercentsAkaVhUnit:this.computed_length_is_negative_=t.value()<0;break}}VisitDefault(t){}computed_length_is_negative(){return this.computed_length_is_negative_}}class vD extends jr{constructor(t,i,s){super();c(this,"computed_background_size_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_background_size_=Cn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_background_size_=t}VisitKeyword(t){switch(t.value()){case _.kAuto:case _.kContain:case _.kCover:this.computed_background_size_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContent:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}computed_background_size(){return this.computed_background_size_}}class KV extends kV{constructor(t,i,s){super();c(this,"computed_transform_function_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitMatrix(t){this.computed_transform_function_=t}VisitRotate(t){this.computed_transform_function_=t}VisitScale(t){this.computed_transform_function_=t}VisitTranslate(t){this.computed_transform_function_=t}PassComputedTransformFunction(){return this.computed_transform_function_}}var UI=(r=>(r[r.kAncestorsAreDisplayed=0]="kAncestorsAreDisplayed",r[r.kAncestorsAreNotDisplayed=1]="kAncestorsAreNotDisplayed",r))(UI||{}),mp=(r=>(r[r.kDirAuto=0]="kDirAuto",r[r.kDirLeftToRight=1]="kDirLeftToRight",r[r.kDirRightToLeft=2]="kDirRightToLeft",r[r.kDirNotDefined=3]="kDirNotDefined",r))(mp||{});class XV{constructor(){c(this,"computed_style_invalidation_property_checker");c(this,"layout_box_invalidation_property_checker");c(this,"size_invalidation_property_checker");c(this,"cross_references_invalidation_property_checker");let e=[],t=[],i=[],s=[];for(let n=0;n<=T.kMaxLonghandPropertyKey;++n){let o=n;d9(o)==t3.kImpactsChildComputedStyleYes&&e.push(o),sw(o)==ly.kInheritedYes||f9(o)==r3.kImpactsBoxGenerationYes?t.push(o):(_9(o)==i3.kImpactsBoxSizesYes&&i.push(o),p9(o)==n3.kImpactsBoxCrossReferencesYes&&s.push(o))}this.computed_style_invalidation_property_checker=new ym(e),this.layout_box_invalidation_property_checker=new ym(t),this.size_invalidation_property_checker=new ym(i),this.cross_references_invalidation_property_checker=new ym(s)}}const cv=new XV;class Tn extends O5{constructor(t,i){var e=(...args)=>{super(...args);c(this,"computed_style_declaration_");c(this,"style_");c(this,"layout_boxes_");c(this,"computed_style_valid_",!1);c(this,"descendant_computed_styles_valid_",!1);c(this,"directionality_");c(this,"ancestors_are_displayed_",0)};ao(t)?e(Is.kCreateHTMLElement,t):e(Is.kCreateHTMLElement,t,i),this.computed_style_declaration_=new qc,this.style_=new mV,this.layout_boxes_=null,this.directionality_=null}computed_style_declaration(){return this.computed_style_declaration_}computed_style(){return this.computed_style_declaration_.data()}get style(){return this.style_}OnSetAttribute(t,i){}OnRemoveAttribute(t){}AsHTMLElement(){return this}AsHTMLBodyElement(){return null}AsHTMLBRElement(){return null}AsHTMLImageElement(){}AsFreehandElement(){}GetUsedDirState(){return 1}Duplicate(){let t=this.GetDocument();Hn(t);let i=t.createElement(this.local_name_);return i.copyAttributes(this),i.style_.AssignFrom(this.style_),i}set_layout_boxes(t){this.layout_boxes_=t}layout_boxes(){return this.layout_boxes_}InvalidateLayoutBoxesOfNodeAndAncestors(){this.InvalidateLayoutBoxes(),this.InvalidateLayoutBoxesOfAncestors()}InvalidateLayoutBoxesOfNodeAndDescendants(){this.InvalidateLayoutBoxes(),this.InvalidateLayoutBoxesOfDescendants()}InvalidateLayoutBoxes(){this.layout_boxes_=null,this.directionality_=null}InvalidateComputedStylesOfNodeAndDescendants(){this.computed_style_valid_=!1,this.descendant_computed_styles_valid_=!1,this.InvalidateComputedStylesOfDescendants()}UpdateComputedStyle(t,i,s){rb(Tn,this.UpdateComputedStyle),this.tagName;let n=this.GetDocument();Q(n,"Element should be attached to document in order to ","participate in layout."),Q(this.computed_style()||!this.layout_boxes());let o=!this.computed_style_valid_||!this.computed_style();!o&&!this.computed_style().AreDeclaredPropertiesInheritedFromParentValid()&&(o=!0),!o&&this.ancestors_are_displayed_==1&&s==0&&(o=!0);let a=new YV;o?qV(this.style_.data(),t,i,n.viewport_size(),this.computed_style(),this.ancestors_are_displayed_,s,GI.kIsNotPseudoElement,a,this.computed_style_declaration_):this.computed_style_declaration_.UpdateInheritedData(),this.ancestors_are_displayed_=s,a.mark_descendants_as_display_none&&this.MarkNotDisplayedOnDescendants(),a.invalidate_computed_styles_of_descendants&&this.InvalidateComputedStylesOfDescendants(),a.invalidate_layout_boxes?(this.InvalidateLayoutBoxesOfNodeAndAncestors(),this.InvalidateLayoutBoxesOfDescendants()):(a.invalidate_sizes&&this.InvalidateLayoutBoxSizes(),a.invalidate_cross_references&&this.InvalidateLayoutBoxCrossReferences(),a.invalidate_render_tree_nodes&&this.InvalidateLayoutBoxRenderTreeNodes()),this.computed_style_valid_=!0}IsDisplayed(){return this.ancestors_are_displayed_==0&&this.computed_style().display!=_e.GetNone()}UpdateComputedStyleRecursively(t,i,s,n){let o=this.GetDocument().dom_max_element_depth();if(o>0&&n>=o)return;let a=s&&this.AreComputedStylesValid();if(a||this.UpdateComputedStyle(t,i,0),this.computed_style().display!=_e.GetNone()){for(let l=this.first_element_child();l;l=l.nextElementSibling){let u=l.AsHTMLElement();u&&u.UpdateComputedStyleRecursively(this.computed_style_declaration(),i,a&&this.descendant_computed_styles_valid_,n+1)}this.descendant_computed_styles_valid_=!0}}MarkNotDisplayedOnNodeAndDescendants(){this.ancestors_are_displayed_=1,this.MarkNotDisplayedOnDescendants()}InvalidateLayoutBoxSizes(){this.layout_boxes_&&this.layout_boxes_.InvalidateSizes()}InvalidateLayoutBoxCrossReferences(){this.layout_boxes_&&this.layout_boxes_.InvalidateCrossReferences()}InvalidateLayoutBoxRenderTreeNodes(){this.layout_boxes_&&this.layout_boxes_.InvalidateRenderTreeNodes()}AreComputedStylesValid(){return this.computed_style_valid_}}class YV{constructor(){c(this,"mark_descendants_as_display_none",!1);c(this,"invalidate_computed_styles_of_descendants",!1);c(this,"invalidate_layout_boxes",!1);c(this,"invalidate_sizes",!1);c(this,"invalidate_cross_references",!1);c(this,"invalidate_render_tree_nodes",!1)}}var GI=(r=>(r[r.kIsNotPseudoElement=0]="kIsNotPseudoElement",r[r.kIsPseudoElement=1]="kIsPseudoElement",r))(GI||{});function qV(r,e,t,i,s,n,o,a,l,u,d=void 0){let f=!1,g=QV(r,e,t,i);JV(s,d||g,f,a,l),u.SetData(d||g)}function QV(r,e,t,i){let s=vV(r);return MI(s,e,t,i.width_height()),s}function JV(r,e,t,i,s){r&&(!s.mark_descendants_as_display_none&&i==0&&ZV(r,e)&&(s.mark_descendants_as_display_none=!0),!s.invalidate_computed_styles_of_descendants&&eW(r,e)?(s.invalidate_computed_styles_of_descendants=!0,s.invalidate_layout_boxes=!0):s.invalidate_layout_boxes||(tW(r,e)?s.invalidate_layout_boxes=!0:(!s.invalidate_sizes&&rW(r,e)&&(s.invalidate_sizes=!0,s.invalidate_render_tree_nodes=!0),!s.invalidate_cross_references&&iW(r,e)&&(s.invalidate_cross_references=!0,s.invalidate_render_tree_nodes=!0),s.invalidate_render_tree_nodes=s.invalidate_render_tree_nodes||t||!e.DoDeclaredPropertiesMatch(r))))}function ZV(r,e){return r.display!=_e.GetNone()&&e.display==_e.GetNone()}function eW(r,e){return!cv.computed_style_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}function tW(r,e){return!cv.layout_box_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}function rW(r,e){return!cv.size_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}function iW(r,e){return!cv.cross_references_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}const dT=class extends Tn{constructor(e){super(e,dT.kTagName)}};let ko=dT;c(ko,"kTagName","p");class nW{constructor(e){c(this,"_onAfterMutation",new Dt);c(this,"_pendingUpdate",!1);this.canvas=e}get onAfterMutation(){return this._onAfterMutation.event}_queueUpdate(){this._pendingUpdate||(this._pendingUpdate=!0,queueMicrotask(()=>{this._pendingUpdate=!1,this._onAfterMutation.fire()}))}updateText(e,t){Q(e.IsText());const i=e.parentElement;Q(i&&i.tagName===ko.kTagName);const s=s_(i),{id:n,scope:o}=yo(s);this.canvas.transform(()=>{const l=this.canvas.getScopedModel(o).getNodeById(n);Q(l),Q(l.get("type")===hi.Text),l.set("content",t)}),this._queueUpdate()}removeContent(e){!e.length||this.canvas.transform(()=>{e.forEach(t=>{t.nodeName!==ko.kTagName&&et();const i=s_(t),{id:s,scope:n}=yo(i),a=this.canvas.getScopedModel(n).getNodeById(s);Q(a),Q(a.get("type")===hi.Text),a.set("content","")})})}removeNodes(e){!e.length||(this.canvas.transform(()=>{e.forEach(t=>{const i=t.AsElement().AsHTMLElement();Q(i.tagName===ko.kTagName);const s=s_(i),{id:n,scope:o}=yo(s);this.canvas.getScopedModel(o).removeNodes([n])})}),this._queueUpdate())}insertBefore(e,t,i){const s=s_(e.AsElement()),n=i?s_(i.AsElement()):void 0;Q(t.inlineContent);const o={type:hi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",minHeight:"20px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:t.textContent||""};return this._queueUpdate(),this.canvas.transform(()=>{const a=yo(s),l=n?yo(n):void 0,u=this.canvas.getScopedModel(a.scope),d=l?{ref:l.id,direction:zn.forward}:{ref:a.id,direction:zn.inward},f=u.addNode(d,o);return{id:f.get("id"),type:f.get("type"),scope:a.scope.key,parent:a.id}})}}function HI(r,e,t){for(let i=0;;i++){if(i==r.childCount||i==e.childCount)return r.childCount==e.childCount?null:t;let s=r.child(i),n=e.child(i);if(s==n){t+=s.nodeSize;continue}if(!s.sameMarkup(n))return t;if(s.isText&&s.text!=n.text){for(let o=0;s.text[o]==n.text[o];o++)t++;return t}if(s.content.size||n.content.size){let o=HI(s.content,n.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function zI(r,e,t,i){for(let s=r.childCount,n=e.childCount;;){if(s==0||n==0)return s==n?null:{a:t,b:i};let o=r.child(--s),a=e.child(--n),l=o.nodeSize;if(o==a){t-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:t,b:i};if(o.isText&&o.text!=a.text){let u=0,d=Math.min(o.text.length,a.text.length);for(;u<d&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,t--,i--;return{a:t,b:i}}if(o.content.size||a.content.size){let u=zI(o.content,a.content,t-1,i-1);if(u)return u}t-=l,i-=l}}const Xi=class{constructor(e,t){c(this,"size");if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,s=0,n){for(let o=0,a=0;a<t;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&i(l,s+a,n||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,t-d),i,s+d)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,s){let n="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(n+=a.text.slice(Math.max(e,l)-l,t-l),o=!i):a.isLeaf?(s?n+=typeof s=="function"?s(a):s:a.type.spec.leafText&&(n+=a.type.spec.leafText(a)),o=!i):!o&&a.isBlock&&(n+=i,o=!0)},0),n}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,s=this.content.slice(),n=0;for(t.isText&&t.sameMarkup(i)&&(s[s.length-1]=t.withText(t.text+i.text),n=1);n<e.content.length;n++)s.push(e.content[n]);return new Xi(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],s=0;if(t>e)for(let n=0,o=0;o<t;n++){let a=this.content[n],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),i.push(a),s+=a.nodeSize),o=l}return new Xi(i,s)}cutByIndex(e,t){return e==t?Xi.empty:e==0&&t==this.content.length?this:new Xi(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let s=this.content.slice(),n=this.size+t.nodeSize-i.nodeSize;return s[e]=t,new Xi(s,n)}addToStart(e){return new Xi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Xi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let s=this.content[t];e(s,i,t),i+=s.nodeSize}}findDiffStart(e,t=0){return HI(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return zI(this,e,t,i)}findIndex(e,t=-1){if(e==0)return vm(0,e);if(e==this.size)return vm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,s=0;;i++){let n=this.child(i),o=s+n.nodeSize;if(o>=e)return o==e||t>0?vm(i+1,o):vm(i,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Xi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Xi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Xi.empty;let t,i=0;for(let s=0;s<e.length;s++){let n=e[s];i+=n.nodeSize,s&&n.isText&&e[s-1].sameMarkup(n)?(t||(t=e.slice(0,s)),t[t.length-1]=n.withText(t[t.length-1].text+n.text)):t&&t.push(n)}return new Xi(t||e,i)}static from(e){if(!e)return Xi.empty;if(e instanceof Xi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Xi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};let Bt=Xi;c(Bt,"empty",new Xi([],0));const WE={index:0,offset:0};function vm(r,e){return WE.index=r,WE.offset=e,WE}function gy(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!gy(r[i],e[i]))return!1}else{for(let i in r)if(!(i in e)||!gy(r[i],e[i]))return!1;for(let i in e)if(!(i in r))return!1}return!0}const Vy=class{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let s=0;s<e.length;s++){let n=e[s];if(this.eq(n))return e;if(this.type.excludes(n.type))t||(t=e.slice(0,s));else{if(n.type.excludes(this.type))return e;!i&&n.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),i=!0),t&&t.push(n)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&gy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);return i.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Vy.none;if(e instanceof Vy)return[e];let t=e.slice();return t.sort((i,s)=>i.type.rank-s.type.rank),t}};let fi=Vy;c(fi,"none",[]);class my extends Error{}const tu=class{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=VI(this.content,e+this.openStart,t);return i&&new tu(i,this.openStart,this.openEnd)}removeBetween(e,t){return new tu(jI(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return tu.empty;let i=t.openStart||0,s=t.openEnd||0;if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new tu(Bt.fromJSON(e,t.content),i,s)}static maxOpen(e,t=!0){let i=0,s=0;for(let n=e.firstChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.firstChild)i++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)s++;return new tu(e,i,s)}};let Lt=tu;c(Lt,"empty",new tu(Bt.empty,0,0));function jI(r,e,t){let{index:i,offset:s}=r.findIndex(e),n=r.maybeChild(i),{index:o,offset:a}=r.findIndex(t);if(s==e||n.isText){if(a!=t&&!r.child(o).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(i!=o)throw new RangeError("Removing non-flat range");return r.replaceChild(i,n.copy(jI(n.content,e-s-1,t-s-1)))}function VI(r,e,t,i){let{index:s,offset:n}=r.findIndex(e),o=r.maybeChild(s);if(n==e||o.isText)return i&&!i.canReplace(s,s,t)?null:r.cut(0,e).append(t).append(r.cut(e));let a=VI(o.content,e-n-1,t);return a&&r.replaceChild(s,o.copy(a))}function sW(r,e,t){if(t.openStart>r.depth)throw new my("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new my("Inconsistent open depths");return WI(r,e,t,0)}function WI(r,e,t,i){let s=r.index(i),n=r.node(i);if(s==e.index(i)&&i<r.depth-t.openStart){let o=WI(r,e,t,i+1);return n.copy(n.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==i&&e.depth==i){let o=r.parent,a=o.content;return Rc(o,a.cut(0,r.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=oW(t,r);return Rc(n,KI(r,o,a,e,i))}else return Rc(n,xy(r,e,i))}function $I(r,e){if(!e.type.compatibleContent(r.type))throw new my("Cannot join "+e.type.name+" onto "+r.type.name)}function vw(r,e,t){let i=r.node(t);return $I(i,e.node(t)),i}function Pc(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function Wp(r,e,t,i){let s=(e||r).node(t),n=0,o=e?e.index(t):s.childCount;r&&(n=r.index(t),r.depth>t?n++:r.textOffset&&(Pc(r.nodeAfter,i),n++));for(let a=n;a<o;a++)Pc(s.child(a),i);e&&e.depth==t&&e.textOffset&&Pc(e.nodeBefore,i)}function Rc(r,e){return r.type.checkContent(e),r.copy(e)}function KI(r,e,t,i,s){let n=r.depth>s&&vw(r,e,s+1),o=i.depth>s&&vw(t,i,s+1),a=[];return Wp(null,r,s,a),n&&o&&e.index(s)==t.index(s)?($I(n,o),Pc(Rc(n,KI(r,e,t,i,s+1)),a)):(n&&Pc(Rc(n,xy(r,e,s+1)),a),Wp(e,t,s,a),o&&Pc(Rc(o,xy(t,i,s+1)),a)),Wp(i,null,s,a),new Bt(a)}function xy(r,e,t){let i=[];if(Wp(null,r,t,i),r.depth>t){let s=vw(r,e,t+1);Pc(Rc(s,xy(r,e,t+1)),i)}return Wp(e,null,t,i),new Bt(i)}function oW(r,e){let t=e.depth-r.openStart,s=e.node(t).copy(r.content);for(let n=t-1;n>=0;n--)s=e.node(n).copy(Bt.from(s));return{start:s.resolveNoCache(r.openStart+t),end:s.resolveNoCache(s.content.size-r.openEnd-t)}}class R0{constructor(e,t,i){c(this,"depth");this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],s=e.child(t);return i?e.child(t).cut(i):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let n=0;n<e;n++)s+=i.child(n).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return fi.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),s=e.maybeChild(t);if(!i){let a=i;i=s,s=a}let n=i.marks;for(var o=0;o<n.length;o++)n[o].type.spec.inclusive===!1&&(!s||!n[o].isInSet(s.marks))&&(n=n[o--].removeFromSet(n));return n}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,s=e.parent.maybeChild(e.index());for(var n=0;n<i.length;n++)i[n].type.spec.inclusive===!1&&(!s||!i[n].isInSet(s.marks))&&(i=i[n--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new lW(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],s=0,n=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(n),u=n-l;if(i.push(o,a,s+l),!u||(o=o.child(a),o.isText))break;n=u-1,s+=l+1}return new R0(t,i,n)}static resolveCached(e,t){for(let s=0;s<$E.length;s++){let n=$E[s];if(n.pos==t&&n.doc==e)return n}let i=$E[KE]=R0.resolve(e,t);return KE=(KE+1)%aW,i}}let $E=[],KE=0,aW=12;class lW{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const uW=Object.create(null);class va{constructor(e,t,i,s=fi.none){c(this,"content");c(this,"text");this.type=e,this.attrs=t,this.marks=s,this.content=i||Bt.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,s=0){this.content.nodesBetween(e,t,i,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,s){return this.content.textBetween(e,t,i,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&gy(this.attrs,t||e.defaultAttrs||uW)&&fi.sameSet(this.marks,i||fi.none)}copy(e=null){return e==this.content?this:new va(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new va(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return Lt.empty;let s=this.resolve(e),n=this.resolve(t),o=i?0:s.sharedDepth(t),a=s.start(o),u=s.node(o).content.cut(s.pos-a,n.pos-a);return new Lt(u,s.depth-o,n.depth-o)}replace(e,t,i){return sW(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let s=this.content.child(t-1);return{node:s,index:t-1,offset:i-s.nodeSize}}resolve(e){return R0.resolveCached(this,e)}resolveNoCache(e){return R0.resolve(this,e)}rangeHasMark(e,t,i){let s=!1;return t>e&&this.nodesBetween(e,t,n=>(i.isInSet(n.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),XI(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=Bt.empty,s=0,n=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,s,n),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<n;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,t,i,s){if(s&&!this.type.allowsMarks(s))return!1;let n=this.contentMatchAt(e).matchType(i),o=n&&n.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=fi.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!fi.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.type==="inline-text"){if(!ao(t.content))throw new RangeError("Invalid text node in JSON");return e.text(t.content,i)}if(t.type===hi.Text){const n=t.content?Bt.fromJSON(e,[{type:"inline-text",content:t.content}]):null;return e.nodeType("paragraph").create(t.attrs,n,i)}t.type!==hi.Block&&Ue();let s=Bt.fromJSON(e,t.children);return e.nodeType("doc").create(t.attrs,s,i)}}class yy extends va{constructor(t,i,s,n){super(t,i,null,n);c(this,"text");if(!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):XI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,i){return this.text.slice(t,i)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new yy(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new yy(this.type,this.attrs,t,this.marks)}cut(t=0,i=this.text.length){return t==0&&i==this.text.length?this:this.withText(this.text.slice(t,i))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function XI(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}function Yi(r){this.content=r}Yi.prototype={constructor:Yi,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var i=t&&t!=r?this.remove(t):this,s=i.find(r),n=i.content.slice();return s==-1?n.push(t||r,e):(n[s+1]=e,t&&(n[s]=t)),new Yi(n)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Yi(t)},addToStart:function(r,e){return new Yi([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new Yi(t)},addBefore:function(r,e,t){var i=this.remove(e),s=i.content.slice(),n=i.find(r);return s.splice(n==-1?s.length:n,0,e,t),new Yi(s)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=Yi.from(r),r.size?new Yi(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=Yi.from(r),r.size?new Yi(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=Yi.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};Yi.from=function(r){if(r instanceof Yi)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new Yi(e)};const Wy=class{constructor(e){c(this,"next",[]);c(this,"wrapCache",[]);this.validEnd=e}static parse(e,t){let i=new cW(e,t);if(i.next==null)return Wy.empty;let s=YI(i);i.next&&i.err("Unexpected trailing text");let n=mW(gW(s));return xW(n,i),n}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let s=this;for(let n=t;s&&n<i;n++)s=s.matchType(e.child(n).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let s=[this];function n(o,a){let l=o.matchFragment(e,i);if(l&&(!t||l.validEnd))return Bt.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:f}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let g=n(f,a.concat(d));if(g)return g}}return null}return n(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let s=i.shift(),n=s.match;if(n.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<n.next.length;o++){let{type:a,next:l}=n.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let s=0;s<i.next.length;s++)e.indexOf(i.next[s].next)==-1&&t(i.next[s].next)}return t(this),e.map((i,s)=>{let n=s+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)n+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return n}).join(`
`)}};let yd=Wy;c(yd,"empty",new Wy(!0));class cW{constructor(e,t){c(this,"inline",null);c(this,"pos",0);c(this,"tokens");this.string=e,this.nodeTypes=t,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function YI(r){let e=[];do e.push(hW(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hW(r){let e=[];do e.push(dW(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function dW(r){let e=pW(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=fW(r,e);else break;return e}function ED(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function fW(r,e){let t=ED(r),i=t;return r.eat(",")&&(r.next!="}"?i=ED(r):i=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function _W(r,e){let t=r.nodeTypes,i=t[e];if(i)return[i];let s=[];for(let n in t){let o=t[n];o.groups.indexOf(e)>-1&&s.push(o)}return s.length==0&&r.err("No node type or group '"+e+"' found"),s}function pW(r){if(r.eat("(")){let e=YI(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=_W(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gW(r){let e=[[]];return s(n(r,0),t()),e;function t(){return e.push([])-1}function i(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function s(o,a){o.forEach(l=>l.to=a)}function n(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(n(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=n(o.exprs[l],a);if(l==o.exprs.length-1)return u;s(u,a=t())}else if(o.type=="star"){let l=t();return i(a,l),s(n(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=t();return s(n(o.expr,a),l),s(n(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(n(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let d=t();s(n(o.expr,l),d),l=d}if(o.max==-1)s(n(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let d=t();i(l,d),s(n(o.expr,l),d),l=d}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function qI(r,e){return e-r}function SD(r,e){let t=[];return i(e),t.sort(qI);function i(s){let n=r[s];if(n.length==1&&!n[0].term)return i(n[0].to);t.push(s);for(let o=0;o<n.length;o++){let{term:a,to:l}=n[o];!a&&t.indexOf(l)==-1&&i(l)}}}function mW(r){let e=Object.create(null);return t(SD(r,0));function t(i){let s=[];i.forEach(o=>{r[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let d=0;d<s.length;d++)s[d][0]==a&&(u=s[d][1]);SD(r,l).forEach(d=>{u||s.push([a,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let n=e[i.join(",")]=new yd(i.indexOf(r.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(qI);n.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return n}}function xW(r,e){for(let t=0,i=[r];t<i.length;t++){let s=i[t],n=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:u}=s.next[a];o.push(l.name),n&&!(l.isText||l.hasRequiredAttrs())&&(n=!1),i.indexOf(u)==-1&&i.push(u)}n&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function QI(r){let e=Object.create(null);for(let t in r){let i=r[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function JI(r,e){let t=Object.create(null);for(let i in r){let s=e&&e[i];if(s===void 0){let n=r[i];if(n.hasDefault)s=n.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=s}return t}function ZI(r){let e=Object.create(null);if(r)for(let t in r)e[t]=new yW(r[t]);return e}class vy{constructor(e,t,i){c(this,"groups");c(this,"attrs");c(this,"defaultAttrs");c(this,"inlineContent");c(this,"isBlock");c(this,"isText");c(this,"contentMatch");c(this,"markSet",null);this.name=e,this.schema=t,this.spec=i,this.groups=i.group?i.group.split(" "):[],this.attrs=ZI(i.attrs),this.defaultAttrs=QI(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==yd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:JI(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new va(this,this.computeAttrs(e),Bt.from(t),fi.setFrom(i))}createChecked(e=null,t,i){return t=Bt.from(t),this.checkContent(t),new va(this,this.computeAttrs(e),t,fi.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=Bt.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),n=s&&s.fillBefore(Bt.empty,!0);return n?new va(this,e,t.append(n),fi.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:fi.none:e}static compile(e,t){let i=Object.create(null);e.forEach((n,o)=>i[n]=new vy(n,t,o));let s=t.spec.topNode||"doc";if(!i[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let n in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class yW{constructor(e){c(this,"hasDefault");c(this,"default");this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class hv{constructor(e,t,i,s){c(this,"attrs");c(this,"excluded");c(this,"instance");this.name=e,this.rank=t,this.schema=i,this.spec=s,this.attrs=ZI(s.attrs),this.excluded=null;let n=QI(this.attrs);this.instance=n?new fi(this,n):null}create(e=null){return!e&&this.instance?this.instance:new fi(this,JI(this.attrs,e))}static compile(e,t){let i=Object.create(null),s=0;return e.forEach((n,o)=>i[n]=new hv(n,s++,t,o)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class vW{constructor(e){c(this,"spec");c(this,"nodes");c(this,"marks");c(this,"topNodeType");c(this,"cached",Object.create(null));let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Yi.from(e.nodes),t.marks=Yi.from(e.marks||{}),this.nodes=vy.compile(this.spec.nodes,this),this.marks=hv.compile(this.spec.marks,this);let i=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let n=this.nodes[s],o=n.spec.content||"",a=n.spec.marks;n.contentMatch=i[o]||(i[o]=yd.parse(o,this.nodes)),n.inlineContent=n.contentMatch.inlineContent,n.markSet=a=="_"?null:a?wD(this,a.split(" ")):a==""||!n.inlineContent?[]:null}for(let s in this.marks){let n=this.marks[s],o=n.spec.excludes;n.excluded=o==null?[n]:o==""?[]:wD(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof vy){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,s)}text(e,t){let i=this.nodes.text;return new yy(i,i.defaultAttrs,e,fi.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return va.fromJSON(this,e)}markFromJSON(e){return fi.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function wD(r,e){let t=[];for(let i=0;i<e.length;i++){let s=e[i],n=r.marks[s],o=n;if(n)t.push(n);else for(let a in r.marks){let l=r.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}const e2=65535,t2=Math.pow(2,16);function EW(r,e){return r+e*t2}function AD(r){return r&e2}function SW(r){return(r-(r&e2))/t2}const r2=1,i2=2,cx=4,n2=8;class Ew{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&n2)>0}get deletedBefore(){return(this.delInfo&(r2|cx))>0}get deletedAfter(){return(this.delInfo&(i2|cx))>0}get deletedAcross(){return(this.delInfo&cx)>0}}const ru=class{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ru.empty)return ru.empty}recover(e){let t=0,i=AD(e);if(!this.inverted)for(let s=0;s<i;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[i*3]+t+SW(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let s=0,n=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let u=this.ranges[a+n],d=this.ranges[a+o],f=l+u;if(e<=f){let g=u?e==l?-1:e==f?1:t:t,x=l+s+(g<0?0:d);if(i)return x;let E=e==(t<0?l:f)?null:EW(a/3,e-l),P=e==l?i2:e==f?r2:cx;return(t<0?e!=l:e!=f)&&(P|=n2),new Ew(x,P,E)}s+=d-u}return i?e+s:new Ew(e+s,0,null)}touches(e,t){let i=0,s=AD(t),n=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+n],d=l+u;if(e<=d&&a==s*3)return!0;i+=this.ranges[a+o]-u}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let s=0,n=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?n:0),l=o+(this.inverted?0:n),u=this.ranges[s+t],d=this.ranges[s+i];e(a,a+u,l,l+d),n+=d-u}}invert(){return new ru(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ru.empty:new ru(e<0?[0,-e,0]:[0,0,e])}};let Dc=ru;c(Dc,"empty",new ru([]));class $p{constructor(e=[],t,i=0,s=e.length){this.maps=e,this.mirror=t,this.from=i,this.to=s}slice(e=0,t=this.maps.length){return new $p(this.maps,this.mirror,e,t)}copy(){return new $p(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,i=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?i+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?i-s-1:void 0)}}invert(){let e=new $p;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let s=0;for(let n=this.from;n<this.to;n++){let o=this.maps[n],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(n);if(l!=null&&l>n&&l<this.to){n=l,e=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return i?e:new Ew(e,s,null)}}const XE=Object.create(null);class ds{getMap(){return Dc.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=XE[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in XE)throw new RangeError("Duplicate use of step JSON ID "+e);return XE[e]=t,t.prototype.jsonID=e,t}}class bi{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new bi(e,null)}static fail(e){return new bi(null,e)}static fromReplace(e,t,i,s){try{return bi.ok(e.replace(t,i,s))}catch(n){if(n instanceof my)return bi.fail(n.message);throw n}}}function Wb(r,e,t){let i=[];for(let s=0;s<r.childCount;s++){let n=r.child(s);n.content.size&&(n=n.copy(Wb(n.content,e,n))),n.isInline&&(n=e(n,t,s)),i.push(n)}return Bt.fromArray(i)}class cu extends ds{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),s=i.node(i.sharedDepth(this.to)),n=new Lt(Wb(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return bi.fromReplace(e,this.from,this.to,n)}invert(){return new da(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new cu(t.pos,i.pos,this.mark)}merge(e){return e instanceof cu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cu(t.from,t.to,e.markFromJSON(t.mark))}}ds.jsonID("addMark",cu);class da extends ds{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new Lt(Wb(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return bi.fromReplace(e,this.from,this.to,i)}invert(){return new cu(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new da(t.pos,i.pos,this.mark)}merge(e){return e instanceof da&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new da(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new da(t.from,t.to,e.markFromJSON(t.mark))}}ds.jsonID("removeMark",da);class hu extends ds{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return bi.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return bi.fromReplace(e,this.pos,this.pos+1,new Lt(Bt.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(i))return new hu(this.pos,t.marks[s]);return new hu(this.pos,this.mark)}}return new rf(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hu(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new hu(t.pos,e.markFromJSON(t.mark))}}ds.jsonID("addNodeMark",hu);class rf extends ds{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return bi.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return bi.fromReplace(e,this.pos,this.pos+1,new Lt(Bt.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new hu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new rf(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new rf(t.pos,e.markFromJSON(t.mark))}}ds.jsonID("removeNodeMark",rf);class Gn extends ds{constructor(e,t,i,s=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=s}apply(e){return this.structure&&Sw(e,this.from,this.to)?bi.fail("Structure replace would overwrite content"):bi.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Dc([this.from,this.to-this.from,this.slice.size])}invert(e){return new Gn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new Gn(t.pos,Math.max(t.pos,i.pos),this.slice)}merge(e){if(!(e instanceof Gn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Lt.empty:new Lt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Gn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Lt.empty:new Lt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Gn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Gn(t.from,t.to,Lt.fromJSON(e,t.slice),!!t.structure)}}ds.jsonID("replace",Gn);class Fs extends ds{constructor(e,t,i,s,n,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=s,this.slice=n,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Sw(e,this.from,this.gapFrom)||Sw(e,this.gapTo,this.to)))return bi.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return bi.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?bi.fromReplace(e,this.from,this.to,i):bi.fail("Content does not fit in gap")}getMap(){return new Dc([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Fs(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),s=e.map(this.gapFrom,-1),n=e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||s<t.pos||n>i.pos?null:new Fs(t.pos,i.pos,s,n,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Fs(t.from,t.to,t.gapFrom,t.gapTo,Lt.fromJSON(e,t.slice),t.insert,!!t.structure)}}ds.jsonID("replaceAround",Fs);function Sw(r,e,t){let i=r.resolve(e),s=t-e,n=i.depth;for(;s>0&&n>0&&i.indexAfter(n)==i.node(n).childCount;)n--,s--;if(s>0){let o=i.node(n).maybeChild(i.indexAfter(n));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function wW(r,e,t,i){let s=[],n=[],o,a;r.doc.nodesBetween(e,t,(l,u,d)=>{if(!l.isInline)return;let f=l.marks;if(!i.isInSet(f)&&d.type.allowsMarkType(i.type)){let g=Math.max(u,e),x=Math.min(u+l.nodeSize,t),E=i.addToSet(f);for(let P=0;P<f.length;P++)f[P].isInSet(E)||(o&&o.to==g&&o.mark.eq(f[P])?o.to=x:s.push(o=new da(g,x,f[P])));a&&a.to==g?a.to=x:n.push(a=new cu(g,x,i))}}),s.forEach(l=>r.step(l)),n.forEach(l=>r.step(l))}function AW(r,e,t,i){let s=[],n=0;r.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;n++;let l=null;if(i instanceof hv){let u=o.marks,d;for(;d=i.isInSet(u);)(l||(l=[])).push(d),u=d.removeFromSet(u)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,t);for(let d=0;d<l.length;d++){let f=l[d],g;for(let x=0;x<s.length;x++){let E=s[x];E.step==n-1&&f.eq(s[x].style)&&(g=E)}g?(g.to=u,g.step=n):s.push({style:f,from:Math.max(a,e),to:u,step:n})}}}),s.forEach(o=>r.step(new da(o.from,o.to,o.style)))}function bW(r,e,t,i=t.contentMatch){let s=r.doc.nodeAt(e),n=[],o=e+1;for(let a=0;a<s.childCount;a++){let l=s.child(a),u=o+l.nodeSize,d=i.matchType(l.type);if(!d)n.push(new Gn(o,u,Lt.empty));else{i=d;for(let f=0;f<l.marks.length;f++)t.allowsMarkType(l.marks[f].type)||r.step(new da(o,u,l.marks[f]))}o=u}if(!i.validEnd){let a=i.fillBefore(Bt.empty,!0);r.replace(o,o,new Lt(a,0,0))}for(let a=n.length-1;a>=0;a--)r.step(n[a])}function kW(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function $b(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let i=r.depth;;--i){let s=r.$from.node(i),n=r.$from.index(i),o=r.$to.indexAfter(i);if(i<r.depth&&s.canReplace(n,o,t))return i;if(i==0||s.type.spec.isolating||!kW(s,n,o))break}return null}function TW(r,e,t){let{$from:i,$to:s,depth:n}=e,o=i.before(n+1),a=s.after(n+1),l=o,u=a,d=Bt.empty,f=0;for(let E=n,P=!1;E>t;E--)P||i.index(E)>0?(P=!0,d=Bt.from(i.node(E).copy(d)),f++):l--;let g=Bt.empty,x=0;for(let E=n,P=!1;E>t;E--)P||s.after(E+1)<s.end(E)?(P=!0,g=Bt.from(s.node(E).copy(g)),x++):u++;r.step(new Fs(l,u,o,a,new Lt(d.append(g),f,x),d.size-f,!0))}function PW(r,e,t){let i=Bt.empty;for(let o=t.length-1;o>=0;o--){if(i.size){let a=t[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=Bt.from(t[o].type.create(t[o].attrs,i))}let s=e.start,n=e.end;r.step(new Fs(s,n,s,n,new Lt(i,0,0),t.length,!0))}function RW(r,e,t,i,s){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let n=r.steps.length;r.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(i,s)&&DW(r.doc,r.mapping.slice(n).map(a),i)){r.clearIncompatible(r.mapping.slice(n).map(a,1),i);let l=r.mapping.slice(n),u=l.map(a,1),d=l.map(a+o.nodeSize,1);return r.step(new Fs(u,d,u+1,d-1,new Lt(Bt.from(i.create(s,null,o.marks)),0,0),1,!0)),!1}})}function DW(r,e,t){let i=r.resolve(e),s=i.index();return i.parent.canReplaceWith(s,s+1,t)}function CW(r,e,t,i,s){let n=r.doc.nodeAt(e);if(!n)throw new RangeError("No node at given position");t||(t=n.type);let o=t.create(i,null,s||n.marks);if(n.isLeaf)return r.replaceWith(e,e+n.nodeSize,o);if(!t.validContent(n.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new Fs(e,e+n.nodeSize,e+1,e+n.nodeSize-1,new Lt(Bt.from(o),0,0),1,!0))}function hx(r,e,t=1,i){let s=r.resolve(e),n=s.depth-t,o=i&&i[i.length-1]||s.parent;if(n<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,d=t-2;u>n;u--,d--){let f=s.node(u),g=s.index(u);if(f.type.spec.isolating)return!1;let x=f.content.cutByIndex(g,f.childCount),E=i&&i[d]||f;if(E!=f&&(x=x.replaceChild(0,E.type.create(E.attrs))),!f.canReplace(g+1,f.childCount)||!E.type.validContent(x))return!1}let a=s.indexAfter(n),l=i&&i[0];return s.node(n).canReplaceWith(a,a,l?l.type:s.node(n+1).type)}function OW(r,e,t=1,i){let s=r.doc.resolve(e),n=Bt.empty,o=Bt.empty;for(let a=s.depth,l=s.depth-t,u=t-1;a>l;a--,u--){n=Bt.from(s.node(a).copy(n));let d=i&&i[u];o=Bt.from(d?d.type.create(d.attrs,o):s.node(a).copy(o))}r.step(new Gn(e,e,new Lt(n.append(o),t,t),!0))}function s2(r,e){let t=r.resolve(e),i=t.index();return NW(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function NW(r,e){return!!(r&&e&&!r.isLeaf&&r.canAppend(e))}function IW(r,e,t){let i=new Gn(e-t,e+t,Lt.empty,!0);r.step(i)}function FW(r,e,t){let i=r.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let s=i.depth-1;s>=0;s--){let n=i.index(s);if(i.node(s).canReplaceWith(n,n,t))return i.before(s+1);if(n>0)return null}if(i.parentOffset==i.parent.content.size)for(let s=i.depth-1;s>=0;s--){let n=i.indexAfter(s);if(i.node(s).canReplaceWith(n,n,t))return i.after(s+1);if(n<i.node(s).childCount)return null}return null}function Kb(r,e,t=e,i=Lt.empty){if(e==t&&!i.size)return null;let s=r.resolve(e),n=r.resolve(t);return o2(s,n,i)?new Gn(e,t,i):new MW(s,n,i).fit()}function o2(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class MW{constructor(e,t,i){c(this,"frontier",[]);c(this,"placed",Bt.empty);this.$from=e,this.$to=t,this.unplaced=i;for(let s=0;s<=e.depth;s++){let n=e.node(s);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Bt.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,s=this.close(e<0?this.$to:i.doc.resolve(e));if(!s)return null;let n=this.placed,o=i.depth,a=s.depth;for(;o&&a&&n.childCount==1;)n=n.firstChild.content,o--,a--;let l=new Lt(n,o,a);return e>-1?new Fs(i.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||i.pos!=this.$to.pos?new Gn(i.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,s=this.unplaced.openEnd;i<e;i++){let n=t.firstChild;if(t.childCount>1&&(s=0),n.type.spec.isolating&&s<=i){e=i;break}t=n.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let s,n=null;i?(n=YE(this.unplaced.content,i-1).firstChild,s=n.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],d,f=null;if(t==1&&(o?u.matchType(o.type)||(f=u.fillBefore(Bt.from(o),!1)):n&&l.compatibleContent(n.type)))return{sliceDepth:i,frontierDepth:a,parent:n,inject:f};if(t==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:n,wrap:d};if(n&&u.matchType(n.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=YE(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Lt(e,t+1,Math.max(i,s.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=YE(e,t);if(s.childCount<=1&&t>0){let n=e.size-t<=t+s.size;this.unplaced=new Lt(xp(e,t-1,1),t-1,n?t-1:i)}else this.unplaced=new Lt(xp(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:s,wrap:n}){for(;this.depth>t;)this.closeFrontierNode();if(n)for(let P=0;P<n.length;P++)this.openFrontierNode(n[P]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,u=0,d=[],{match:f,type:g}=this.frontier[t];if(s){for(let P=0;P<s.childCount;P++)d.push(s.child(P));f=f.matchFragment(s)}let x=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let P=a.child(u),b=f.matchType(P.type);if(!b)break;u++,(u>1||l==0||P.content.size)&&(f=b,d.push(a2(P.mark(g.allowedMarks(P.marks)),u==1?l:0,u==a.childCount?x:-1)))}let E=u==a.childCount;E||(x=-1),this.placed=yp(this.placed,t,Bt.from(d)),this.frontier[t].match=f,E&&x<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let P=0,b=a;P<x;P++){let R=b.lastChild;this.frontier.push({type:R.type,match:R.contentMatchAt(R.childCount)}),b=R.content}this.unplaced=E?e==0?Lt.empty:new Lt(xp(o.content,e-1,1),e-1,x<0?o.openEnd:e-1):new Lt(xp(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!qE(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,s=this.$to.after(i);for(;i>1&&s==this.$to.end(--i);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:s}=this.frontier[t],n=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=qE(e,t,s,i,n);if(!!o){for(let a=t-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],d=qE(e,a,u,l,!0);if(!d||d.childCount)continue e}return{depth:t,fit:o,move:n?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=yp(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let s=e.node(i),n=s.type.contentMatch.fillBefore(s.content,!0,e.index(i));this.openFrontierNode(s.type,s.attrs,n)}return e}openFrontierNode(e,t=null,i){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=yp(this.placed,this.depth,Bt.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Bt.empty,!0);t.childCount&&(this.placed=yp(this.placed,this.frontier.length,t))}}function xp(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(xp(r.firstChild.content,e-1,t)))}function yp(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(yp(r.lastChild.content,e-1,t)))}function YE(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function a2(r,e,t){if(e<=0)return r;let i=r.content;return e>1&&(i=i.replaceChild(0,a2(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=r.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(r.type.contentMatch.matchFragment(i).fillBefore(Bt.empty,!0)))),r.copy(i)}function qE(r,e,t,i,s){let n=r.node(e),o=s?r.indexAfter(e):r.index(e);if(o==n.childCount&&!t.compatibleContent(n.type))return null;let a=i.fillBefore(n.content,!0,o);return a&&!BW(t,n.content,o)?a:null}function BW(r,e,t){for(let i=t;i<e.childCount;i++)if(!r.allowsMarks(e.child(i).marks))return!0;return!1}function LW(r){return r.spec.defining||r.spec.definingForContent}function UW(r,e,t,i){if(!i.size)return r.deleteRange(e,t);let s=r.doc.resolve(e),n=r.doc.resolve(t);if(o2(s,n,i))return r.step(new Gn(e,t,i));let o=u2(s,r.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let g=s.depth,x=s.pos-1;g>0;g--,x--){let E=s.node(g).type.spec;if(E.defining||E.definingAsContext||E.isolating)break;o.indexOf(g)>-1?a=g:s.before(g)==x&&o.splice(1,0,-g)}let l=o.indexOf(a),u=[],d=i.openStart;for(let g=i.content,x=0;;x++){let E=g.firstChild;if(u.push(E),x==i.openStart)break;g=E.content}for(let g=d-1;g>=0;g--){let x=u[g].type,E=LW(x);if(E&&s.node(l).type!=x)d=g;else if(E||!x.isTextblock)break}for(let g=i.openStart;g>=0;g--){let x=(g+d+1)%(i.openStart+1),E=u[x];if(!!E)for(let P=0;P<o.length;P++){let b=o[(P+l)%o.length],R=!0;b<0&&(R=!1,b=-b);let D=s.node(b-1),C=s.index(b-1);if(D.canReplaceWith(C,C,E.type,E.marks))return r.replace(s.before(b),R?n.after(b):t,new Lt(l2(i.content,0,i.openStart,x),x,i.openEnd))}}let f=r.steps.length;for(let g=o.length-1;g>=0&&(r.replace(e,t,i),!(r.steps.length>f));g--){let x=o[g];x<0||(e=s.before(x),t=n.after(x))}}function l2(r,e,t,i,s){if(e<t){let n=r.firstChild;r=r.replaceChild(0,n.copy(l2(n.content,e+1,t,i,n)))}if(e>i){let n=s.contentMatchAt(0),o=n.fillBefore(r).append(r);r=o.append(n.matchFragment(o).fillBefore(Bt.empty,!0))}return r}function GW(r,e,t,i){if(!i.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let s=FW(r.doc,e,i.type);s!=null&&(e=t=s)}r.replaceRange(e,t,new Lt(Bt.from(i),0,0))}function HW(r,e,t){let i=r.doc.resolve(e),s=r.doc.resolve(t),n=u2(i,s);for(let o=0;o<n.length;o++){let a=n[o],l=o==n.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return r.delete(i.start(a),s.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),s.indexAfter(a-1))))return r.delete(i.before(a),s.after(a))}for(let o=1;o<=i.depth&&o<=s.depth;o++)if(e-i.start(o)==i.depth-o&&t>i.end(o)&&s.end(o)-t!=s.depth-o)return r.delete(i.before(o),t);r.delete(e,t)}function u2(r,e){let t=[],i=Math.min(r.depth,e.depth);for(let s=i;s>=0;s--){let n=r.start(s);if(n<r.pos-(r.depth-s)||e.end(s)>e.pos+(e.depth-s)||r.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(n==e.start(s)||s==r.depth&&s==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==n-1)&&t.push(s)}return t}class vd extends ds{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return bi.fail("No node at attribute step's position");let i=Object.create(null);for(let n in t.attrs)i[n]=t.attrs[n];i[this.attr]=this.value;let s=t.type.create(i,null,t.marks);return bi.fromReplace(e,this.pos,this.pos+1,new Lt(Bt.from(s),0,t.isLeaf?0:1))}getMap(){return Dc.empty}invert(e){return new vd(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new vd(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new vd(t.pos,t.attr,t.value)}}ds.jsonID("attr",vd);let nf=class extends Error{};nf=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};nf.prototype=Object.create(Error.prototype);nf.prototype.constructor=nf;nf.prototype.name="TransformError";class zW{constructor(e){c(this,"steps",[]);c(this,"docs",[]);c(this,"mapping",new $p);this.doc=e}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new nf(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=Lt.empty){let s=Kb(this.doc,e,t,i);return s&&this.step(s),this}replaceWith(e,t,i){return this.replace(e,t,new Lt(Bt.from(i),0,0))}delete(e,t){return this.replace(e,t,Lt.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return UW(this,e,t,i),this}replaceRangeWith(e,t,i){return GW(this,e,t,i),this}deleteRange(e,t){return HW(this,e,t),this}lift(e,t){return TW(this,e,t),this}join(e,t=1){return IW(this,e,t),this}wrap(e,t){return PW(this,e,t),this}setBlockType(e,t=e,i,s=null){return RW(this,e,t,i,s),this}setNodeMarkup(e,t,i=null,s){return CW(this,e,t,i,s),this}setNodeAttribute(e,t,i){return this.step(new vd(e,t,i)),this}addNodeMark(e,t){return this.step(new hu(e,t)),this}removeNodeMark(e,t){if(!(t instanceof fi)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t=t.isInSet(i.marks),!t)return this}return this.step(new rf(e,t)),this}split(e,t=1,i){return OW(this,e,t,i),this}addMark(e,t,i){return wW(this,e,t,i),this}removeMark(e,t,i){return AW(this,e,t,i),this}clearIncompatible(e,t,i){return bW(this,e,t,i),this}}const QE=Object.create(null);class $r{constructor(e,t,i){c(this,"ranges");c(this,"visible",!0);this.$anchor=e,this.$head=t,this.ranges=i||[new jW(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Lt.empty){let i=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=i,i=i.lastChild;let n=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],d=e.mapping.slice(n);e.replaceRange(d.map(l.pos),d.map(u.pos),a?Lt.empty:t),a==0&&TD(e,n,(i?i.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,s=this.ranges;for(let n=0;n<s.length;n++){let{$from:o,$to:a}=s[n],l=e.mapping.slice(i),u=l.map(o.pos),d=l.map(a.pos);n?e.deleteRange(u,d):(e.replaceRangeWith(u,d,t),TD(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let s=e.parent.inlineContent?new Cs(e):td(e.node(0),e.parent,e.pos,e.index(),t,i);if(s)return s;for(let n=e.depth-1;n>=0;n--){let o=t<0?td(e.node(0),e.node(n),e.before(n+1),e.index(n),t,i):td(e.node(0),e.node(n),e.after(n+1),e.index(n)+1,t,i);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new io(e.node(0))}static atStart(e){return td(e,e,0,0,1)||new io(e)}static atEnd(e){return td(e,e,e.content.size,e.childCount,-1)||new io(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=QE[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in QE)throw new RangeError("Duplicate use of selection JSON ID "+e);return QE[e]=t,t.prototype.jsonID=e,t}isNodeSelection(){return!1}isTextSelection(){return!1}AsTextSelection(){}}class jW{constructor(e,t){this.$from=e,this.$to=t}}let bD=!1;function kD(r){!bD&&!r.parent.inlineContent&&(bD=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class Cs extends $r{constructor(e,t=e){kD(e),kD(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return $r.near(i);let s=e.resolve(t.map(this.anchor));return new Cs(s.parent.inlineContent?s:i,i)}replace(e,t=Lt.empty){if(super.replace(e,t),t==Lt.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof Cs&&e.anchor==this.anchor&&e.head==this.head}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Cs(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let s=e.resolve(t);return new this(s,i==t?s:e.resolve(i))}static between(e,t,i){let s=e.pos-t.pos;if((!i||s)&&(i=s>=0?1:-1),!t.parent.inlineContent){let n=$r.findFrom(t,i,!0)||$r.findFrom(t,-i,!0);if(n)t=n.$head;else return $r.near(t,i)}return e.parent.inlineContent||(s==0?e=t:(e=($r.findFrom(e,-i,!0)||$r.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Cs(e,t)}isTextSelection(){return!0}AsTextSelection(){return this}}$r.jsonID("text",Cs);class ki extends $r{constructor(t){let i=t.nodeAfter,s=t.node(0).resolve(t.pos+i.nodeSize);super(t,s);c(this,"visible",!1);c(this,"node");this.node=i}map(t,i){let{deleted:s,pos:n}=i.mapResult(this.anchor),o=t.resolve(n);return s?$r.near(o):new ki(o)}content(){return new Lt(Bt.from(this.node),0,0)}eq(t){return t instanceof ki&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}static fromJSON(t,i){if(typeof i.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ki(t.resolve(i.anchor))}static create(t,i){return new ki(t.resolve(i))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}isNodeSelection(){return!0}}$r.jsonID("node",ki);class io extends $r{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Lt.empty){if(t==Lt.empty){e.delete(0,e.doc.content.size);let i=$r.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new io(e)}map(e){return new io(e)}eq(e){return e instanceof io}getBookmark(){return VW}}$r.jsonID("all",io);const VW={map(){return this},resolve(r){return new io(r)}};function td(r,e,t,i,s,n=!1){if(e.inlineContent)return Cs.create(r,t);for(let o=i-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!n&&ki.isSelectable(a))return ki.create(r,t-(s<0?a.nodeSize:0))}else{let l=td(r,a,t+s,s<0?a.childCount:0,s,n);if(l)return l}t+=a.nodeSize*s}return null}function TD(r,e,t){let i=r.steps.length-1;if(i<e)return;let s=r.steps[i];if(!(s instanceof Gn||s instanceof Fs))return;let n=r.mapping.maps[i],o;n.forEach((a,l,u,d)=>{o==null&&(o=d)}),r.setSelection($r.near(r.doc.resolve(o),t))}function WW(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}const c2=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function $W(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const KW=(r,e,t)=>{let i=$W(r,t);if(!i)return!1;let s=h2(i);if(!s){let o=i.blockRange(),a=o&&$b(o);return a==null?!1:(e&&e(r.tr.lift(o,a).scrollIntoView()),!0)}let n=s.nodeBefore;if(!n.type.spec.isolating&&f2(r,s,e))return!0;if(i.parent.content.size==0&&(sf(n,"end")||ki.isSelectable(n))){let o=Kb(r.doc,i.before(),i.after(),Lt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=r.tr.step(o);a.setSelection(sf(n,"end")?$r.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):ki.create(a.doc,s.pos-n.nodeSize)),e(a.scrollIntoView())}return!0}}return n.isAtom&&s.depth==i.depth-1?(e&&e(r.tr.delete(s.pos-n.nodeSize,s.pos).scrollIntoView()),!0):!1};function sf(r,e,t=!1){for(let i=r;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const XW=(r,e,t)=>{let{$head:i,empty:s}=r.selection,n=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):i.parentOffset>0)return!1;n=h2(i)}let o=n&&n.nodeBefore;return!o||!ki.isSelectable(o)?!1:(e&&e(r.tr.setSelection(ki.create(r.doc,n.pos-o.nodeSize)).scrollIntoView()),!0)};function h2(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function YW(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const qW=(r,e,t)=>{let i=YW(r,t);if(!i)return!1;let s=d2(i);if(!s)return!1;let n=s.nodeAfter;if(f2(r,s,e))return!0;if(i.parent.content.size==0&&(sf(n,"start")||ki.isSelectable(n))){let o=Kb(r.doc,i.before(),i.after(),Lt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=r.tr.step(o);a.setSelection(sf(n,"start")?$r.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):ki.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return n.isAtom&&s.depth==i.depth-1?(e&&e(r.tr.delete(s.pos,s.pos+n.nodeSize).scrollIntoView()),!0):!1},QW=(r,e,t)=>{let{$head:i,empty:s}=r.selection,n=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):i.parentOffset<i.parent.content.size)return!1;n=d2(i)}let o=n&&n.nodeAfter;return!o||!ki.isSelectable(o)?!1:(e&&e(r.tr.setSelection(ki.create(r.doc,n.pos)).scrollIntoView()),!0)};function d2(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const JW=(r,e)=>{let{$head:t,$anchor:i}=r.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function Xb(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const ZW=(r,e)=>{let{$head:t,$anchor:i}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let s=t.node(-1),n=t.indexAfter(-1),o=Xb(s.contentMatchAt(n));if(!o||!s.canReplaceWith(n,n,o))return!1;if(e){let a=t.after(),l=r.tr.replaceWith(a,a,o.createAndFill());l.setSelection($r.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},e$=(r,e)=>{let t=r.selection,{$from:i,$to:s}=t;if(t instanceof io||i.parent.inlineContent||s.parent.inlineContent)return!1;let n=Xb(s.parent.contentMatchAt(s.indexAfter()));if(!n||!n.isTextblock)return!1;if(e){let o=(!i.parentOffset&&s.index()<s.parent.childCount?i:s).pos,a=r.tr.insert(o,n.createAndFill());a.setSelection(Cs.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},t$=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let n=t.before();if(hx(r.doc,n))return e&&e(r.tr.split(n).scrollIntoView()),!0}let i=t.blockRange(),s=i&&$b(i);return s==null?!1:(e&&e(r.tr.lift(i,s).scrollIntoView()),!0)};function r$(r){return(e,t)=>{let{$from:i,$to:s}=e.selection;if(e.selection instanceof ki&&e.selection.node.isBlock)return!i.parentOffset||!hx(e.doc,i.pos)?!1:(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(t){let n=s.parentOffset==s.parent.content.size,o=e.tr;(e.selection instanceof Cs||e.selection instanceof io)&&o.deleteSelection();let a=i.depth==0?null:Xb(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=r&&r(s.parent,n),u=l?[l]:n&&a?[{type:a}]:void 0,d=hx(o.doc,o.mapping.map(i.pos),1,u);if(!u&&!d&&hx(o.doc,o.mapping.map(i.pos),1,a?[{type:a}]:void 0)&&(a&&(u=[{type:a}]),d=!0),d&&(o.split(o.mapping.map(i.pos),1,u),!n&&!i.parentOffset&&i.parent.type!=a)){let f=o.mapping.map(i.before()),g=o.doc.resolve(f);a&&i.node(-1).canReplaceWith(g.index(),g.index()+1,a)&&o.setNodeMarkup(o.mapping.map(i.before()),a)}t(o.scrollIntoView())}return!0}}const i$=r$(),n$=(r,e)=>(e&&e(r.tr.setSelection(new io(r.doc))),!0);function s$(r,e,t){let i=e.nodeBefore,s=e.nodeAfter,n=e.index();return!i||!s||!i.type.compatibleContent(s.type)?!1:!i.content.size&&e.parent.canReplace(n-1,n)?(t&&t(r.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(n,n+1)||!(s.isTextblock||s2(r.doc,e.pos))?!1:(t&&t(r.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function f2(r,e,t){let i=e.nodeBefore,s=e.nodeAfter,n,o;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(s$(r,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(n=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(n[0]||s.type).validEnd){if(t){let f=e.pos+s.nodeSize,g=Bt.empty;for(let P=n.length-1;P>=0;P--)g=Bt.from(n[P].create(null,g));g=Bt.from(i.copy(g));let x=r.tr.step(new Fs(e.pos-1,f,e.pos,f,new Lt(g,1,0),n.length,!0)),E=f+2*n.length;s2(x.doc,E)&&x.join(E),t(x.scrollIntoView())}return!0}let l=$r.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),d=u&&$b(u);if(d!=null&&d>=e.depth)return t&&t(r.tr.lift(u,d).scrollIntoView()),!0;if(a&&sf(s,"start",!0)&&sf(i,"end")){let f=i,g=[];for(;g.push(f),!f.isTextblock;)f=f.lastChild;let x=s,E=1;for(;!x.isTextblock;x=x.firstChild)E++;if(f.canReplace(f.childCount,f.childCount,x.content)){if(t){let P=Bt.empty;for(let R=g.length-1;R>=0;R--)P=Bt.from(g[R].copy(P));let b=r.tr.step(new Fs(e.pos-g.length,e.pos+s.nodeSize,e.pos+E,e.pos+s.nodeSize-E,new Lt(P,g.length,0),0,!0));t(b.scrollIntoView())}return!0}}return!1}function Yb(...r){return function(e,t,i){for(let s=0;s<r.length;s++)if(r[s](e,t,i))return!0;return!1}}let qb=Yb(c2,KW,XW),_2=Yb(c2,qW,QW);const bl=new Map;bl.set(Te.Enter,Yb(JW,e$,t$,i$));bl.set(Te.Enter|so.CtrlCmd,ZW);bl.set(Te.Backspace,qb);bl.set(Te.Backspace|so.Shift,qb);bl.set(Te.Backspace|so.CtrlCmd,qb);bl.set(Te.Delete,_2);bl.set(Te.Delete|so.Shift,_2);bl.set(Te.KEY_A|so.CtrlCmd,n$);const o$=bl;const fT=class{constructor(){c(this,"_zoomLevel",0);c(this,"_zoomFactor",1);c(this,"_fullscreen",!1);c(this,"_onDidChangeFullscreen",new Dt);c(this,"onDidChangeFullscreen",this._onDidChangeFullscreen.event)}getZoomLevel(){return this._zoomLevel}setZoomLevel(e,t){this._zoomLevel!==e&&(this._zoomLevel=e)}getZoomFactor(){return this._zoomFactor}setZoomFactor(e){this._zoomFactor=e}setFullscreen(e){this._fullscreen!==e&&(this._fullscreen=e,this._onDidChangeFullscreen.fire())}isFullscreen(){return this._fullscreen}};let Ea=fT;c(Ea,"INSTANCE",new fT);class a$ extends Ht{constructor(){super();c(this,"_onDidChange",this._register(new Dt));c(this,"onDidChange",this._onDidChange.event);c(this,"_listener");c(this,"_mediaQueryList");this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(t){this._mediaQueryList&&this._mediaQueryList.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class l$ extends Ht{constructor(){super();c(this,"_onDidChange",this._register(new Dt));c(this,"onDidChange",this._onDidChange.event);c(this,"_value");this._value=this._getPixelRatio();const t=this._register(new a$);this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const t=document.createElement("canvas").getContext("2d"),i=window.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s}}class u${constructor(){c(this,"_pixelRatioMonitor",null)}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=OB(new l$)),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function c$(r,e){typeof r=="string"&&(r=window.matchMedia(r)),r.addEventListener("change",e)}const h$=new u$;function d$(r,e){Ea.INSTANCE.setZoomLevel(r,e)}function f$(){return Ea.INSTANCE.getZoomLevel()}function _$(){return Ea.INSTANCE.getZoomFactor()}function p$(r){Ea.INSTANCE.setZoomFactor(r)}function g$(r){Ea.INSTANCE.setFullscreen(r)}function m$(){return Ea.INSTANCE.isFullscreen()}const x$=Ea.INSTANCE.onDidChangeFullscreen,Uu=navigator.userAgent,Qb=Uu.indexOf("Trident")>=0,Jb=Uu.indexOf("Edge/")>=0,y$=Qb||Jb,Ey=Uu.indexOf("Firefox")>=0,p2=Uu.indexOf("AppleWebKit")>=0,dv=Uu.indexOf("Chrome")>=0,Zb=!dv&&Uu.indexOf("Safari")>=0,v$=!dv&&!Zb&&p2,E$=Uu.indexOf("Electron/")>=0,S$=Uu.indexOf("Android")>=0,w$=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,A$=Object.freeze(Object.defineProperty({__proto__:null,addMatchMediaChangeListener:c$,PixelRatio:h$,setZoomLevel:d$,getZoomLevel:f$,getZoomFactor:_$,setZoomFactor:p$,setFullscreen:g$,isFullscreen:m$,onDidChangeFullscreen:x$,isIE:Qb,isEdge:Jb,isEdgeOrIE:y$,isFirefox:Ey,isWebKit:p2,isChrome:dv,isSafari:Zb,isWebkitWebView:v$,isElectron:E$,isAndroid:S$,isStandalone:w$},Symbol.toStringTag,{value:"Module"}));class b${constructor(e){c(this,"_maxWidth","");c(this,"_width","");c(this,"_height","");c(this,"_top","");c(this,"_left","");c(this,"_bottom","");c(this,"_right","");c(this,"_fontFamily","");c(this,"_fontWeight","");c(this,"_fontSize","");c(this,"_fontStyle","");c(this,"_fontFeatureSettings","");c(this,"_textDecoration","");c(this,"_lineHeight","");c(this,"_letterSpacing","");c(this,"_className","");c(this,"_display","");c(this,"_position","");c(this,"_visibility","");c(this,"_color","");c(this,"_backgroundColor","");c(this,"_layerHint",!1);c(this,"_contain","none");c(this,"_boxShadow","");c(this,"_transform","");this.domNode=e}setMaxWidth(e){const t=Qo(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Qo(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Qo(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Qo(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Qo(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Qo(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Qo(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Qo(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Qo(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Qo(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setTransform(e){this._transform!==e&&(this._transform=e,this.domNode.style.transform=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Qo(r){return typeof r=="number"?`${r}px`:r}function ww(r){return new b$(r)}function PD(r){return`${r}px`}function g2(r){return`matrix(${r.a}, ${r.b}, ${r.c}, ${r.d}, ${r.tx}, ${r.ty})`}const s0=class{constructor(e,t,i,s,n){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=s,this.newlineCountBeforeSelection=n}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),s=e.getSelectionStart(),n=e.getSelectionEnd();let o;if(t){const a=i.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new s0(i,s,n,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new s0(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(OT(e.value,t.value),e.selectionStart,t.selectionStart),n=Math.min(NT(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-n);const o=t.value.substring(s,t.value.length-n),a=e.selectionStart-s,l=e.selectionEnd-s,u=t.selectionStart-s,d=t.selectionEnd-s;if(u===d){const g=e.selectionStart-s;return{text:o,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const f=l-a;return{text:o,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(OT(e.value,t.value),e.selectionEnd),s=Math.min(NT(e.value,t.value),e.value.length-e.selectionEnd),n=e.value.substring(i,e.value.length-s),o=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:n.length-a,positionDelta:l-o.length}}};let bs=s0;c(bs,"EMPTY",new s0("",0,0,null,void 0));var mc;(r=>{const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},s={...e};let n=0,o;(O=>{O[O.Before=0]="Before",O[O.InProgress=1]="InProgress",O[O.Finished=2]="Finished"})(o||(o={}));const a={keydown:0,input:0,render:0};function l(){D(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),a.keydown=1,queueMicrotask(u)}r.onKeyDown=l;function u(){a.keydown===1&&(performance.mark("keydown/end"),a.keydown=2)}function d(){performance.mark("input/start"),a.input=1,R()}r.onBeforeInput=d;function f(){a.input===0&&d(),queueMicrotask(g)}r.onInput=f;function g(){a.input===1&&(performance.mark("input/end"),a.input=2)}function x(){D()}r.onKeyUp=x;function E(){D()}r.onSelectionChange=E;function P(){a.keydown===2&&a.input===2&&a.render===0&&(performance.mark("render/start"),a.render=1,queueMicrotask(b),R())}r.onRenderStart=P;function b(){a.render===1&&(performance.mark("render/end"),a.render=2)}function R(){setTimeout(D)}function D(){a.keydown===2&&a.input===2&&a.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),C("keydown",e),C("input",t),C("render",i),C("inputlatency",s),n++,I())}function C(O,W){const q=performance.getEntriesByName(O)[0].duration;W.total+=q,W.min=Math.min(W.min,q),W.max=Math.max(W.max,q)}function I(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),a.keydown=0,a.input=0,a.render=0}function H(){if(n===0)return;const O={keydown:N(e),input:N(t),render:N(i),total:N(s),sampleCount:n};return V(e),V(t),V(i),V(s),n=0,O}r.getAndClearMeasurements=H;function N(O){return{average:O.total/n,max:O.max,min:O.min}}function V(O){O.total=0,O.min=Number.MAX_VALUE,O.max=0}})(mc||(mc={}));let Cc;if(typeof wi.vscode<"u"&&typeof wi.vscode.process<"u"){const r=wi.vscode.process;Cc={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"?Cc={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Cc={get platform(){return j0?"win32":V0?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const Aw=Cc.cwd,k$=Cc.env,zs=Cc.platform;Cc.arch;const T$=65,P$=97,R$=90,D$=122,pu=46,Mi=47,ss=92,Wl=58,C$=63;class m2 extends Error{constructor(t,i,s){let n;typeof i=="string"&&i.indexOf("not ")===0?(n="must not be",i=i.replace(/^not /,"")):n="must be";const o=t.indexOf(".")!==-1?"property":"argument";let a=`The "${t}" ${o} ${n} of type ${i}`;a+=`. Received type ${typeof s}`;super(a);c(this,"code");this.code="ERR_INVALID_ARG_TYPE"}}function Jr(r,e){if(typeof r!="string")throw new m2(e,"string",r)}function Xt(r){return r===Mi||r===ss}function bw(r){return r===Mi}function $l(r){return r>=T$&&r<=R$||r>=P$&&r<=D$}function Sy(r,e,t,i){let s="",n=0,o=-1,a=0,l=0;for(let u=0;u<=r.length;++u){if(u<r.length)l=r.charCodeAt(u);else{if(i(l))break;l=Mi}if(i(l)){if(!(o===u-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==pu||s.charCodeAt(s.length-2)!==pu){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",n=0):(s=s.slice(0,d),n=s.length-1-s.lastIndexOf(t)),o=u,a=0;continue}else if(s.length!==0){s="",n=0,o=u,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",n=2)}else s.length>0?s+=`${t}${r.slice(o+1,u)}`:s=r.slice(o+1,u),n=u-o-1;o=u,a=0}else l===pu&&a!==-1?++a:a=-1}return s}function x2(r,e){if(e===null||typeof e!="object")throw new m2("pathObject","Object",e);const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${r}${i}`:i}const pi={resolve(...r){let e="",t="",i=!1;for(let s=r.length-1;s>=-1;s--){let n;if(s>=0){if(n=r[s],Jr(n,"path"),n.length===0)continue}else e.length===0?n=Aw():(n=k$[`=${e}`]||Aw(),(n===void 0||n.slice(0,2).toLowerCase()!==e.toLowerCase()&&n.charCodeAt(2)===ss)&&(n=`${e}\\`));const o=n.length;let a=0,l="",u=!1;const d=n.charCodeAt(0);if(o===1)Xt(d)&&(a=1,u=!0);else if(Xt(d))if(u=!0,Xt(n.charCodeAt(1))){let f=2,g=f;for(;f<o&&!Xt(n.charCodeAt(f));)f++;if(f<o&&f!==g){const x=n.slice(g,f);for(g=f;f<o&&Xt(n.charCodeAt(f));)f++;if(f<o&&f!==g){for(g=f;f<o&&!Xt(n.charCodeAt(f));)f++;(f===o||f!==g)&&(l=`\\\\${x}\\${n.slice(g,f)}`,a=f)}}}else a=1;else $l(d)&&n.charCodeAt(1)===Wl&&(l=n.slice(0,2),a=2,o>2&&Xt(n.charCodeAt(2))&&(u=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${n.slice(a)}\\${t}`,i=u,u&&e.length>0)break}return t=Sy(t,!i,"\\",Xt),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){Jr(r,"path");const e=r.length;if(e===0)return".";let t=0,i,s=!1;const n=r.charCodeAt(0);if(e===1)return bw(n)?"\\":r;if(Xt(n))if(s=!0,Xt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){const u=r.slice(l,a);for(l=a;a<e&&Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Xt(r.charCodeAt(a));)a++;if(a===e)return`\\\\${u}\\${r.slice(l)}\\`;a!==l&&(i=`\\\\${u}\\${r.slice(l,a)}`,t=a)}}}else t=1;else $l(n)&&r.charCodeAt(1)===Wl&&(i=r.slice(0,2),t=2,e>2&&Xt(r.charCodeAt(2))&&(s=!0,t=3));let o=t<e?Sy(r.slice(t),!s,"\\",Xt):"";return o.length===0&&!s&&(o="."),o.length>0&&Xt(r.charCodeAt(e-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(r){Jr(r,"path");const e=r.length;if(e===0)return!1;const t=r.charCodeAt(0);return Xt(t)||e>2&&$l(t)&&r.charCodeAt(1)===Wl&&Xt(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let n=0;n<r.length;++n){const o=r[n];Jr(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&Xt(t.charCodeAt(0))){++s;const n=t.length;n>1&&Xt(t.charCodeAt(1))&&(++s,n>2&&(Xt(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&Xt(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return pi.normalize(e)},relative(r,e){if(Jr(r,"from"),Jr(e,"to"),r===e)return"";const t=pi.resolve(r),i=pi.resolve(e);if(t===i||(r=t.toLowerCase(),e=i.toLowerCase(),r===e))return"";let s=0;for(;s<r.length&&r.charCodeAt(s)===ss;)s++;let n=r.length;for(;n-1>s&&r.charCodeAt(n-1)===ss;)n--;const o=n-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===ss;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===ss;)l--;const u=l-a,d=o<u?o:u;let f=-1,g=0;for(;g<d;g++){const E=r.charCodeAt(s+g);if(E!==e.charCodeAt(a+g))break;E===ss&&(f=g)}if(g!==d){if(f===-1)return i}else{if(u>d){if(e.charCodeAt(a+g)===ss)return i.slice(a+g+1);if(g===2)return i.slice(a+g)}o>d&&(r.charCodeAt(s+g)===ss?f=g:g===2&&(f=3)),f===-1&&(f=0)}let x="";for(g=s+f+1;g<=n;++g)(g===n||r.charCodeAt(g)===ss)&&(x+=x.length===0?"..":"\\..");return a+=f,x.length>0?`${x}${i.slice(a,l)}`:(i.charCodeAt(a)===ss&&++a,i.slice(a,l))},toNamespacedPath(r){if(typeof r!="string")return r;if(r.length===0)return"";const e=pi.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===ss){if(e.charCodeAt(1)===ss){const t=e.charCodeAt(2);if(t!==C$&&t!==pu)return`\\\\?\\UNC\\${e.slice(2)}`}}else if($l(e.charCodeAt(0))&&e.charCodeAt(1)===Wl&&e.charCodeAt(2)===ss)return`\\\\?\\${e}`;return r},dirname(r){Jr(r,"path");const e=r.length;if(e===0)return".";let t=-1,i=0;const s=r.charCodeAt(0);if(e===1)return Xt(s)?r:".";if(Xt(s)){if(t=i=1,Xt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Xt(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=i=a+1)}}}}else $l(s)&&r.charCodeAt(1)===Wl&&(t=e>2&&Xt(r.charCodeAt(2))?3:2,i=t);let n=-1,o=!0;for(let a=e-1;a>=i;--a)if(Xt(r.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(t===-1)return".";n=t}return r.slice(0,n)},basename(r,e){e!==void 0&&Jr(e,"ext"),Jr(r,"path");let t=0,i=-1,s=!0,n;if(r.length>=2&&$l(r.charCodeAt(0))&&r.charCodeAt(1)===Wl&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(n=r.length-1;n>=t;--n){const l=r.charCodeAt(n);if(Xt(l)){if(!s){t=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(n=r.length-1;n>=t;--n)if(Xt(r.charCodeAt(n))){if(!s){t=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(t,i)},extname(r){Jr(r,"path");let e=0,t=-1,i=0,s=-1,n=!0,o=0;r.length>=2&&r.charCodeAt(1)===Wl&&$l(r.charCodeAt(0))&&(e=i=2);for(let a=r.length-1;a>=e;--a){const l=r.charCodeAt(a);if(Xt(l)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),l===pu?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===i+1?"":r.slice(t,s)},format:x2.bind(null,"\\"),parse(r){Jr(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.length;let i=0,s=r.charCodeAt(0);if(t===1)return Xt(s)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(Xt(s)){if(i=1,Xt(r.charCodeAt(1))){let f=2,g=f;for(;f<t&&!Xt(r.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&Xt(r.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&!Xt(r.charCodeAt(f));)f++;f===t?i=f:f!==g&&(i=f+1)}}}}else if($l(s)&&r.charCodeAt(1)===Wl){if(t<=2)return e.root=e.dir=r,e;if(i=2,Xt(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;i=3}}i>0&&(e.root=r.slice(0,i));let n=-1,o=i,a=-1,l=!0,u=r.length-1,d=0;for(;u>=i;--u){if(s=r.charCodeAt(u),Xt(s)){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),s===pu?n===-1?n=u:d!==1&&(d=1):n!==-1&&(d=-1)}return a!==-1&&(n===-1||d===0||d===1&&n===a-1&&n===o+1?e.base=e.name=r.slice(o,a):(e.name=r.slice(o,n),e.base=r.slice(o,a),e.ext=r.slice(n,a))),o>0&&o!==i?e.dir=r.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Pi={resolve(...r){let e="",t=!1;for(let i=r.length-1;i>=-1&&!t;i--){const s=i>=0?r[i]:Aw();Jr(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===Mi)}return e=Sy(e,!t,"/",bw),t?`/${e}`:e.length>0?e:"."},normalize(r){if(Jr(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Mi,t=r.charCodeAt(r.length-1)===Mi;return r=Sy(r,!e,"/",bw),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return Jr(r,"path"),r.length>0&&r.charCodeAt(0)===Mi},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const i=r[t];Jr(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Pi.normalize(e)},relative(r,e){if(Jr(r,"from"),Jr(e,"to"),r===e||(r=Pi.resolve(r),e=Pi.resolve(e),r===e))return"";const t=1,i=r.length,s=i-t,n=1,o=e.length-n,a=s<o?s:o;let l=-1,u=0;for(;u<a;u++){const f=r.charCodeAt(t+u);if(f!==e.charCodeAt(n+u))break;f===Mi&&(l=u)}if(u===a)if(o>a){if(e.charCodeAt(n+u)===Mi)return e.slice(n+u+1);if(u===0)return e.slice(n+u)}else s>a&&(r.charCodeAt(t+u)===Mi?l=u:u===0&&(l=0));let d="";for(u=t+l+1;u<=i;++u)(u===i||r.charCodeAt(u)===Mi)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(n+l)}`},toNamespacedPath(r){return r},dirname(r){if(Jr(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Mi;let t=-1,i=!0;for(let s=r.length-1;s>=1;--s)if(r.charCodeAt(s)===Mi){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&Jr(e,"ext"),Jr(r,"path");let t=0,i=-1,s=!0,n;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(n=r.length-1;n>=0;--n){const l=r.charCodeAt(n);if(l===Mi){if(!s){t=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(n=r.length-1;n>=0;--n)if(r.charCodeAt(n)===Mi){if(!s){t=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(t,i)},extname(r){Jr(r,"path");let e=-1,t=0,i=-1,s=!0,n=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===Mi){if(!s){t=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===pu?e===-1?e=o:n!==1&&(n=1):e!==-1&&(n=-1)}return e===-1||i===-1||n===0||n===1&&e===i-1&&e===t+1?"":r.slice(e,i)},format:x2.bind(null,"/"),parse(r){Jr(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.charCodeAt(0)===Mi;let i;t?(e.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,l=r.length-1,u=0;for(;l>=i;--l){const d=r.charCodeAt(l);if(d===Mi){if(!a){n=l+1;break}continue}o===-1&&(a=!1,o=l+1),d===pu?s===-1?s=l:u!==1&&(u=1):s!==-1&&(u=-1)}if(o!==-1){const d=n===0&&t?1:n;s===-1||u===0||u===1&&s===o-1&&s===n+1?e.base=e.name=r.slice(d,o):(e.name=r.slice(d,s),e.base=r.slice(d,o),e.ext=r.slice(s,o))}return n>0?e.dir=r.slice(0,n-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Pi.win32=pi.win32=pi;Pi.posix=pi.posix=Pi;zs==="win32"?pi.normalize:Pi.normalize;zs==="win32"?pi.isAbsolute:Pi.isAbsolute;zs==="win32"?pi.join:Pi.join;zs==="win32"?pi.resolve:Pi.resolve;zs==="win32"?pi.relative:Pi.relative;zs==="win32"?pi.dirname:Pi.dirname;zs==="win32"?pi.basename:Pi.basename;zs==="win32"?pi.extname:Pi.extname;zs==="win32"?pi.format:Pi.format;zs==="win32"?pi.parse:Pi.parse;zs==="win32"?pi.toNamespacedPath:Pi.toNamespacedPath;zs==="win32"?pi.sep:Pi.sep;zs==="win32"?pi.delimiter:Pi.delimiter;const RD=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});class vs{constructor(e,t,i){c(this,"emitter");const s=n=>this.emitter.fire(n);this.emitter=new Dt({onWillAddFirstListener:()=>e.addEventListener(t,s,i),onDidRemoveLastListener:()=>e.removeEventListener(t,s,i)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}const _T=class{constructor(){c(this,"_lastState");this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};let dx=_T;c(dx,"INSTANCE",new _T);class O${constructor(){c(this,"_lastTypeTextLength");this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class N$ extends Ht{constructor(t,i,s,n){super();c(this,"_onFocus",this._register(new Dt));c(this,"onFocus",this._onFocus.event);c(this,"_onBlur",this._register(new Dt));c(this,"onBlur",this._onBlur.event);c(this,"_onKeyDown",this._register(new Dt));c(this,"onKeyDown",this._onKeyDown.event);c(this,"_onKeyUp",this._register(new Dt));c(this,"onKeyUp",this._onKeyUp.event);c(this,"_onCut",this._register(new Dt));c(this,"onCut",this._onCut.event);c(this,"_onPaste",this._register(new Dt));c(this,"onPaste",this._onPaste.event);c(this,"_onType",this._register(new Dt));c(this,"onType",this._onType.event);c(this,"_onCompositionStart",this._register(new Dt));c(this,"onCompositionStart",this._onCompositionStart.event);c(this,"_onCompositionUpdate",this._register(new Dt));c(this,"onCompositionUpdate",this._onCompositionUpdate.event);c(this,"_onCompositionEnd",this._register(new Dt));c(this,"onCompositionEnd",this._onCompositionEnd.event);c(this,"_onSelectionChangeRequest",this._register(new Dt));c(this,"onSelectionChangeRequest",this._onSelectionChangeRequest.event);c(this,"_asyncTriggerCut");c(this,"_asyncFocusGainWriteScreenReaderContent");c(this,"_textAreaState");c(this,"_selectionChangeListener");c(this,"_hasFocus");c(this,"_currentComposition");this._host=t,this._textArea=i,this._OS=s,this._browser=n,this._asyncTriggerCut=this._register(new ty(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new ty(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=bs.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let o=null;this._register(this._textArea.onKeyDown(a=>{const l=new $S(a);(l.keyCode===Te.KEY_IN_COMPOSITION||this._currentComposition&&l.keyCode===Te.Backspace)&&l.stopPropagation(),l.equals(Te.Escape)&&l.preventDefault(),o=l,this._onKeyDown.fire(l)})),this._register(this._textArea.onKeyUp(a=>{const l=new $S(a);this._onKeyUp.fire(l)})),this._register(this._textArea.onCompositionStart(a=>{const l=new O$;if(this._currentComposition){this._currentComposition=l;return}if(this._currentComposition=l,this._OS===mS.Macintosh&&o&&o.equals(Te.KEY_IN_COMPOSITION)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(o.code==="ArrowRight"||o.code==="ArrowLeft")){l.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:a.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:a.data});return}this._onCompositionStart.fire({data:a.data})})),this._register(this._textArea.onCompositionUpdate(a=>{const l=this._currentComposition;if(!l)return;if(this._browser.isAndroid){const d=bs.readFromTextArea(this._textArea,this._textAreaState),f=bs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(f),this._onCompositionUpdate.fire(a);return}const u=l.handleCompositionUpdate(a.data);this._textAreaState=bs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionUpdate.fire(a)})),this._register(this._textArea.onCompositionEnd(a=>{const l=this._currentComposition;if(!l)return;if(this._currentComposition=null,this._browser.isAndroid){const d=bs.readFromTextArea(this._textArea,this._textAreaState),f=bs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(f),this._onCompositionEnd.fire();return}const u=l.handleCompositionUpdate(a.data);this._textAreaState=bs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(a=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const l=bs.readFromTextArea(this._textArea,this._textAreaState),u=bs.deduceInput(this._textAreaState,l,this._OS===mS.Macintosh);u.replacePrevCharCnt===0&&u.text.length===1&&(EB(u.text.charCodeAt(0))||u.text.charCodeAt(0)===127)||(this._textAreaState=l,(u.text!==""||u.replacePrevCharCnt!==0||u.replaceNextCharCnt!==0||u.positionDelta!==0)&&this._onType.fire(u))})),this._register(this._textArea.onCut(a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(this._textArea.onPaste(a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),a.preventDefault(),!a.clipboardData)return;let[l,u]=I$.getTextData(a.clipboardData);!l||(u=u||dx.INSTANCE.get(l),this._onPaste.fire({text:l,metadata:u}))})),this._register(this._textArea.onFocus(()=>{const a=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}get textAreaState(){return this._textAreaState}_installSelectionChangeListener(){return jn(document,"selectionchange",t=>{mc.onSelectionChange()})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}blurTextArea(){this._setHasFocus(!1),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(t,i){this._hasFocus||(i=i.collapseSelection()),i.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=i}writeScreenReaderContent(t){this._currentComposition||this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(t){Ue()}}class I${static getTextData(e){const t=e.getData(RD.text);let i=null;const s=e.getData("vscode-editor-data");if(typeof s=="string")try{i=JSON.parse(s),i.version!==1&&(i=null)}catch{}return t.length===0&&i===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(o=>o.name).join(`
`),null]:[t,i]}static setTextData(e,t,i,s){e.setData(RD.text,t),typeof i=="string"&&e.setData("text/html",i),e.setData("vscode-editor-data",JSON.stringify(s))}}class F$ extends Ht{constructor(t){super();c(this,"onKeyDown");c(this,"onKeyPress");c(this,"onKeyUp");c(this,"onCompositionStart");c(this,"onCompositionUpdate");c(this,"onCompositionEnd");c(this,"onBeforeInput");c(this,"onInput");c(this,"onCut");c(this,"onCopy");c(this,"onPaste");c(this,"onFocus");c(this,"onBlur");c(this,"_onSyntheticTap",this._register(new Dt));c(this,"onSyntheticTap",this._onSyntheticTap.event);c(this,"_ignoreSelectionChangeTime");this._actual=t,this._ignoreSelectionChangeTime=0,this.onKeyDown=this._register(new vs(this._actual,"keydown")).event,this.onKeyPress=this._register(new vs(this._actual,"keypress")).event,this.onKeyUp=this._register(new vs(this._actual,"keyup")).event,this.onCompositionStart=this._register(new vs(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new vs(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new vs(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new vs(this._actual,"beforeinput")).event,this.onInput=this._register(new vs(this._actual,"input")).event,this.onCut=this._register(new vs(this._actual,"cut")).event,this.onCopy=this._register(new vs(this._actual,"copy")).event,this.onPaste=this._register(new vs(this._actual,"paste")).event,this.onFocus=this._register(new vs(this._actual,"focus")).event,this.onBlur=this._register(new vs(this._actual,"blur")).event,this._register(this.onKeyDown(()=>mc.onKeyDown())),this._register(this.onBeforeInput(()=>mc.onBeforeInput())),this._register(this.onInput(()=>mc.onInput())),this._register(this.onKeyUp(()=>mc.onKeyUp()))}hasFocus(){const t=RP(this._actual);return t?t.activeElement===this._actual:i5(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(t){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(t,i){const s=this._actual;s.value!==i&&(this.setIgnoreSelectionChangeTime("setValue"),s.value=i)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(t,i,s){const n=this._actual;let o=null;const a=RP(n);a?o=a.activeElement:o=document.activeElement;const l=o===n,u=n.selectionStart,d=n.selectionEnd;if(l&&u===i&&d===s){Ey&&window.parent!==window&&n.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(i,s),Ey&&window.parent!==window&&n.focus();return}try{const f=t5(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(i,s),r5(n,f)}catch{}}}const M$=Jb||Ey;class B$ extends Ht{constructor(t,i){super();c(this,"_viewController");c(this,"textAreaTop",0);c(this,"textAreaLeft",0);c(this,"textAreaSize",0);c(this,"textArea");c(this,"textAreaCover");c(this,"_textAreaInput");this.view=i,this._viewController=t,this.textArea=ww(document.createElement("textarea")),this.textArea.setClassName("inputarea"),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("tabindex","1"),this._register(nn(()=>this.textArea.domNode.remove())),this.textAreaCover=ww(document.createElement("div")),this.textAreaCover.setPosition("absolute"),this._register(nn(()=>this.textAreaCover.domNode.remove())),this._register(i.onCursorMoved(o=>this.handleCursorMoved(o)));const s={getScreenReaderContent(){return bs.EMPTY}},n=this._register(new F$(this.textArea.domNode));this._textAreaInput=this._register(new N$(s,n,gB,A$)),this._register(this._textAreaInput.onKeyDown(o=>{this._viewController.keyDown(o)})),this._register(this._textAreaInput.onPaste(o=>{})),this._register(this._textAreaInput.onType(o=>{o.replacePrevCharCnt||o.replaceNextCharCnt||o.positionDelta?this._viewController.compositionType(o.text,o.replacePrevCharCnt,o.replaceNextCharCnt,o.positionDelta):this._viewController.type(o.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(o=>{et()})),this._register(this._textAreaInput.onCompositionStart(o=>{this._viewController.compositionStart()})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._viewController.compositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._viewController.focus()})),this._register(this._textAreaInput.onBlur(()=>{this._viewController.blur()}))}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}blurTextArea(){this._textAreaInput.blurTextArea()}handleCursorMoved(t){t?(this.textAreaLeft=t.blockStart,this.textAreaTop=t.inlineStart,this.textAreaSize=t.inlineSize):(this.textAreaTop=0,this.textAreaLeft=0),this.render()}render(){this._textAreaInput.writeScreenReaderContent("render");const t=this.textArea,i=this.textAreaCover,{textAreaTop:s,textAreaLeft:n}=this;t.setFontSize(this.textAreaSize),t.setLineHeight(this.textAreaSize),t.setTop(s),t.setLeft(n);const o=g2(this.view.mx);if(t.setTransform(o),i.setTop(s),i.setLeft(n),i.setTransform(o),M$){t.setWidth(0),t.setHeight(0),i.setWidth(0),i.setHeight(0);return}t.setWidth(1),t.setHeight(1),i.setWidth(1),i.setHeight(1)}}function L$(r,e){let{$anchor:t,$head:i}=r.selection,s=e===fx.right?t.max(i):t.min(i),n=s.parent.inlineContent?s.depth?r.doc.resolve(e===fx.right?s.after():s.before()):null:s;return n?$r.findFrom(n,e===fx.right?1:-1,!0):null}function JE(r,e){return r.dispatch(r.state.tr.setSelection(e)),!0}var fx=(r=>(r.left="left",r.right="right",r))(fx||{});function DD(r,e){const{state:t}=r;let{selection:i}=t,{$anchor:s,$head:n}=i;const o=e==="right";let a=o?s.max(n):s.min(n);if(i.isTextSelection())if(i.empty){let l=o?a.nodeAfter:a.nodeBefore;if(!l||(l==null?void 0:l.isText)&&!l.nodeSize){let u=L$(t,e);u&&JE(r,u);return}else{let u=t.doc.resolve(o?a.pos+1:a.pos-1),d=$r.findFrom(u,e==="right"?1:-1,!0);d?JE(r,d):et();return}}else return JE(r,new Cs(a));else Ue()}function U$(r,e){if(!r.state.selection.isTextSelection())return!0;let{$head:t,$anchor:i,empty:s}=r.state.selection,n=r.state.tr;if(s){Q(t.sameParent(i));let o;if(t.textOffset)if((o=e==="backward"?t.nodeBefore:t.nodeAfter)&&o){const a=o.isText?1:o.nodeSize;return e==="backward"?n.delete(t.pos-a,t.pos):n.delete(t.pos,t.pos+a),r.dispatch(n)}else Ue();else{if(t.parentOffset===0)return e==="backward"?n.delete(t.pos-1,t.pos):n.delete(t.pos,t.pos+1),r.dispatch(n);if(Q(t.parent.inlineContent),t.parent.nodeSize===3)return e==="backward"?n.delete(t.pos-2,t.pos+1):Ue(),r.dispatch(n);{let a=1;return e==="backward"?n.delete(t.pos-a,t.pos):n.delete(t.pos,t.pos+a),r.dispatch(n)}}}else r.dispatch(n.deleteSelection());Ue()}function G$(r,e){return e.keyCode===Te.Backspace||e.keyCode===Te.Delete?U$(r,"backward"):e.keyCode===Te.Enter||e.keyCode===Te.Escape?!0:e.keyCode===Te.LeftArrow?DD(r,"left"):e.keyCode===Te.RightArrow?DD(r,"right"):!1}function H$(r,e,t,i){return Cs.between(e,t,i)}function kw(r,e){e.isNodeSelection()&&Ue()}function CD(r){for(r.input.composing&&(r.input.composing=!1,r.input.compositionEndedAt=z$());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function z$(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}const j$=function(r){return r.isCollapsed},OD=function(r,e,t,i){return r===t&&e===i?!0:t&&(ND(r,e,t,i,-1)||ND(r,e,t,i,1))},V$=/^(img|br|input|textarea|hr)$/i;function ND(r,e,t,i,s){for(;;){if(r==t&&e==i)return!0;if(e==(s<0?0:gu(r))){let n=r.parentNode;if(!n||n.nodeType!=1||W$(r)||V$.test(r.nodeName))return!1;e=hc(r)+(s<0?0:1),r=n}else if(r.nodeType==1)r=bn(r.childNodes[e+(s<0?-1:0)]),e=s<0?gu(r):0;else return!1}}function gu(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function W$(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}function $$(r,e=null){let t=r.domSelection(),i=r.state.doc;if(!t.focusNode)return;let s=r.docView.nearestDesc(t.focusNode),n=s&&s.size==0,o=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return;let a=i.resolve(o),l,u;if(j$(t)){for(l=a;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&ki.isSelectable(d)&&s.parent&&!(d.isInline&&X$(t.focusNode,t.focusOffset,s.dom))){let f=s.posBefore;u=new ki(o==f?a:i.resolve(f))}}else{let d=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return;l=i.resolve(d)}if(!u){let d=e=="pointer"||r.state.selection.head<a.pos&&!n?1:-1;u=H$(r,l,a,d)}return u}function wy(r,e=!1){let t=r.state.selection;kw(r,t),r.domObserver.disconnectSelection();let{anchor:i,head:s}=t;r.docView.setSelection(i,s,r.root,e),r.domObserver.setCurSelection(),r.domObserver.connectSelection()}function K$(r){let e=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,t=$$(r,e);if(t&&!r.state.selection.eq(t)){let i=r.state.tr.setSelection(t);e=="pointer"?i.setMeta("pointer",!0):e=="key"&&Ue(),r.dispatch(i)}}const hc=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e};function X$(r,e,t){for(let i=e==0,s=e==gu(r);i||s;){if(r==t)return!0;let n=hc(r);if(r=r.parentNode,!r)return!1;i=i&&n==0,s=s&&n==gu(r)}}const Em=function(r,e,t,i){let s=r.root.createRange();return s.setEnd(e,i==null?e.nodeValue.length:i),s.setStart(e,t||0),s};class Y${constructor(e,t){this.view=e,this.onEsc=t}type(e){const{view:t}=this;/[\r\n]/.test(e)||t.dispatch(t.state.tr.insertText(e))}compositionType(e,t,i,s){Q(!i),Q(!s);const{view:n}=this,{state:o}=n;let{tr:a,selection:l}=o;const{head:u}=l;t&&a.delete(u-t,u),a.insertText(e),n.dispatch(a)}compositionStart(){const{view:e}=this,{state:t}=e,{selection:i}=t;if(!i.empty){let{tr:s}=t;e.dispatch(s.deleteSelection())}Q(i.empty)}compositionEnd(){}keyDown(e){if(e.keyCode===Te.Escape){this.onEsc();return}const{view:t}=this;t.input.shiftKey=e.keyCode===Te.Shift||e.shiftKey,t.input.lastKeyCode=e.keyCode,t.input.lastKeyCodeTime=Date.now(),t.domObserver.forceFlush(),t.someProp("handleKeyDown",i=>i(t,e))||G$(t,e)?e.preventDefault():q$(t,"key")}focus(){const{view:e}=this;e.input.lastFocus=Date.now(),e.focused||(e.domObserver.start(),e.focused=!0,e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&wy(e))}blur(){const{view:e}=this;e.focused&&(e.domObserver.stop(),e.focused=!1)}}function q$(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function y2(r,e,t){for(let i in r){let s=r[i];s instanceof Function?s=s.bind(e):i=="handleDOMEvents"&&(s=y2(s,e,{})),t[i]=s}return t}class Q${constructor(e){c(this,"props",{});c(this,"key");this.spec=e,e.props&&y2(e.props,this,this.props),this.key=e.key?e.key.key:J$("plugin")}getState(e){return e[this.key]}}const ZE=Object.create(null);function J$(r){return r in ZE?r+"$"+ ++ZE[r]:(ZE[r]=0,r+"$")}function Z$(r){return new Q$({props:{handleKeyDown:eK(r)}})}function eK(r){return function(e,t){const i=Array.from(r.keys()).find(n=>t.equals(n));let s=i&&r.get(i);return!!(s&&s(e.state,e.dispatch,e))}}const ID=1,Sm=2,FD=4;class tK extends zW{constructor(t){super(t.doc);c(this,"time");c(this,"curSelection");c(this,"curSelectionFor",0);c(this,"updated",0);c(this,"meta",Object.create(null));c(this,"storedMarks");this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ID)&~Sm,this.storedMarks=null,this}get selectionSet(){return(this.updated&ID)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Sm,this}ensureMarks(t){return fi.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Sm)>0}addStep(t,i){super.addStep(t,i),this.updated=this.updated&~Sm,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,i=!0){let s=this.selection;return i&&(t=t.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||fi.none))),s.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,i,s){let n=this.doc.type.schema;if(i){if(s||(s=i),s=s||i,!t)return this.deleteRange(i,s);let o=this.storedMarks;if(!o){let a=this.doc.resolve(i);o=s==i?a.marks():a.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(i,s,n.text(t,o)),this.selection.empty||this.setSelection($r.near(this.selection.$to)),this}else return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection()}setMeta(t,i){return this.meta[typeof t=="string"?t:t.key]=i,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=FD,this}get scrolledIntoView(){return(this.updated&FD)>0}}function MD(r,e){return!e||!r?r:r.bind(e)}class _x{constructor(e,t,i){c(this,"init");c(this,"apply");this.name=e,this.init=MD(t.init,i),this.apply=MD(t.apply,i)}}const rK=[new _x("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new _x("selection",{init(r,e){return r.selection||$r.atStart(e.doc)},apply(r){return r.selection}}),new _x("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,i){return i.selection.$cursor?r.storedMarks:null}})];class BD{constructor(e,t){c(this,"fields");c(this,"plugins",[]);c(this,"pluginsByKey",Object.create(null));this.schema=e,this.fields=rK.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new _x(i.key,i.spec.state,i))})}}class Kp{constructor(e){c(this,"doc");c(this,"selection");c(this,"storedMarks");this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let s=this.config.plugins[i];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),s=null;for(;;){let n=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,u=s?s[o].state:this,d=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,u,i);if(d&&i.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<o?{state:i,n:t.length}:{state:this,n:0})}t.push(d),i=i.applyInner(d),n=!0}s&&(s[o]={state:i,n:t.length})}}if(!n)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Kp(this.config),i=this.config.fields;for(let s=0;s<i.length;s++){let n=i[s];t[n.name]=n.apply(e,this[n.name],this,t)}return t}get tr(){return new tK(this)}static create(e){let t=new BD(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Kp(t);for(let s=0;s<t.fields.length;s++)i[t.fields[s].name]=t.fields[s].init(e,i);return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[i],n=s.spec.state;n&&n.toJSON&&(t[i]=n.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new BD(e.schema,e.plugins),n=new Kp(s);return s.fields.forEach(o=>{if(o.name=="doc")n.doc=va.fromJSON(e.schema,t.doc);else if(o.name=="selection")n.selection=$r.fromJSON(n.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(n.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){n[o.name]=u.fromJSON.call(l,e,t[a],n);return}}n[o.name]=o.init(e,n)}}),n}}const iK=new vW({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:{},toDOM(){return["p",{style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:"pre-wrap"}},0]}},text:{group:"inline"}},marks:{}});class nK{constructor(){c(this,"shiftKey",!1);c(this,"mouseDown",null);c(this,"lastKeyCode",null);c(this,"lastKeyCodeTime",0);c(this,"lastClick",{time:0,x:0,y:0,type:""});c(this,"lastSelectionOrigin",null);c(this,"lastSelectionTime",0);c(this,"lastIOSEnter",0);c(this,"lastIOSEnterFallbackTimeout",-1);c(this,"lastFocus",0);c(this,"lastTouch",0);c(this,"lastAndroidDelete",0);c(this,"composing",!1);c(this,"composingTimeout",-1);c(this,"compositionNodes",[]);c(this,"compositionEndedAt",-2e8)}}class sK{static matchSpec(e,t){let i=e.AsElement().AsHTMLElement(),s=t[1],n=1;if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){n=2;for(let o in s)if(s[o]!=null){o.indexOf(" ")>0&&Ue();const a=s[o];o===uc&&Id(a)||console.log("[pm]setAttribute",o,s[o],i.tagName)}}for(let o=n;o<t.length;o++)if(t[o]===0){if(o<t.length-1||o>n)throw new RangeError("Content hole must be the only child of its parent node");return{dom:i,contentDOM:i}}else Ue();et()}}class ek{static renderSpec(e,t){let i=t[0];i.indexOf(" ")>0&&et();let n,o=e.createElement(i),a=t[1],l=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){l=2;for(let u in a)a[u]!=null&&(u.indexOf(" ")>0?et():u===uc?Object.assign(o.style,a[u]):o.setAttribute(u,a[u]))}for(let u=l;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}else{let{dom:f,contentDOM:g}=ek.renderSpec(e,d);if(o.appendChild(f),g){if(n)throw new RangeError("Multiple content holes");n=g}}}return{dom:o,contentDOM:n}}}const pT=class extends Tn{constructor(e){super(e,pT.kTagName)}AsHTMLBRElement(){return this}};let Oc=pT;c(Oc,"kTagName","br");const To=0,LD=1,ad=2,ku=3;class Mg extends Ht{constructor(t,i,s,n,o){super();c(this,"dirty",To);c(this,"node");this.parent=t,this.children=i,this.dom=s,this.contentDOM=n,this.updater=o,s.pmViewDesc=this}dispose(){Reflect.deleteProperty(this.dom,"pmViewDesc");for(let t of this.children)t.dispose()}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,i,s){return!1}matchesHack(t){return!1}stopEvent(t){return!1}get size(){let t=0;for(let i=0;i<this.children.length;i++)t+=this.children[i].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let i=0,s=this.posAtStart;;i++){let n=this.children[i];if(n==t)return s;s+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,i,s){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(s<0){let o,a;if(t==this.contentDOM)o=Dp(t.childNodes[i-1]);else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(t==this.contentDOM)o=Dp(t.childNodes[i]);else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let n;if(t==this.dom&&this.contentDOM)n=i>hc(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(i==0)for(let o=t;;o=o.parentNode){if(o==this.dom){n=!1;break}if(o.previousSibling)break}if(n==null&&i==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){n=!0;break}if(o.nextSibling)break}}return(n==null?s>0:n)?this.posAtEnd:this.posAtStart}nearestDesc(t,i=!1){for(let s=!0,n=t;n;n=n.parentNode){let o=this.getDesc(n),a;if(o&&(!i||o.node))if(s&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))s=!1;else return o}}getDesc(t){let i=t.pmViewDesc;for(let s=i;s;s=s.parent)if(s==this)return i}posFromDOM(t,i,s){for(let n=t;n;n=n.parentNode){let o=this.getDesc(n);if(o)return o.localPosFromDOM(t,i,s)}return-1}descAt(t){for(let i=0,s=0;i<this.children.length;i++){let n=this.children[i],o=s+n.size;if(s==t&&o!=s){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(t<o)return n.descAt(t-s-n.border);s=o}}domFromPos(t,i){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let s=0,n=0;for(let o=0;s<this.children.length;s++){let a=this.children[s],l=o+a.size;if(l>t||a instanceof v2){n=t-o;break}o=l}if(n)return this.children[s].domFromPos(n-this.children[s].border,i);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof oK&&o.side>=0;s--);if(i<=0){let o,a=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,a=!1);return o&&i&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,i):{node:this.contentDOM,offset:o?hc(o.dom)+1:0}}else{let o,a=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,i):{node:this.contentDOM,offset:o?hc(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,i,s=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:i,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,o=-1;for(let a=s,l=0;;l++){let u=this.children[l],d=a+u.size;if(n==-1&&t<=d){let f=a+u.border;if(t>=f&&i<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,i,f);t=a;for(let g=l;g>0;g--){let x=this.children[g-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){n=hc(x.dom)+1;break}t-=x.size}n==-1&&(n=0)}if(n>-1&&(d>i||l==this.children.length-1)){i=d;for(let f=l+1;f<this.children.length;f++){let g=this.children[f];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=hc(g.dom);break}i+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:t,to:i,fromOffset:n,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let i=this.children[t<0?0:this.children.length-1];return i.size==0||i.emptyChildAt(t)}domAfterPos(t){let{node:i,offset:s}=this.domFromPos(t,0);if(i.nodeType!=1||s==i.childNodes.length)throw new RangeError("No node after pos "+t);return Dp(i.childNodes[s])}setSelection(t,i,s,n=!1){let o=Math.min(t,i),a=Math.max(t,i);for(let g=0,x=0;g<this.children.length;g++){let E=this.children[g],P=x+E.size;if(o>x&&a<P)return E.setSelection(t-x-E.border,i-x-E.border,s,n);x=P}let l=this.domFromPos(t,t?-1:1),u=i==t?l:this.domFromPos(i,i?-1:1),d=s.getSelection();if(!(!(n||!1)&&OD(l.node,l.offset,d.anchorNode,d.anchorOffset)&&OD(u.node,u.offset,d.focusNode,d.focusOffset))){if(t>i){let x=l;l=u,u=x}let g=s.createRange();g.setEnd(u.node,u.offset),g.setStart(l.node,l.offset),d.addRange(g)}}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,i){for(let s=0,n=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(s==a?t<=a&&i>=s:t<a&&i>s){let l=s+o.border,u=a-o.border;if(t>=l&&i<=u){this.dirty=t==s||i==a?ad:LD,t==l&&i==u&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=ku:o.markDirty(t-l,i-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?ad:ku}s=a}this.dirty=ad}markParentsDirty(){let t=1;for(let i=this.parent;i;i=i.parent,t++){let s=t==1?ad:LD;i.dirty<s&&(i.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isNodeViewDesc(){return!1}isTextViewDesc(){return!1}}class Bg extends Mg{constructor(e,t,i,s,n,o,a,l,u){super(e,[],n,o,l.updater),this.node=t,this.outerDeco=i,this.innerDeco=s,this.nodeDOM=a,this.view=l,o&&this.updateChildren(l,u)}static create(e,t,i,s,n,o,a){let l,u,d=Dp(bn(e.contentDOM).childNodes[a]);if(t.isText){if(!l){if(d)if(d.IsText()&&d.textContent===t.text)l=d;else for(;d;)d=_K(d);l||(l=n.root.createTextNode(t.text),e.dom.appendChild(l))}if(l.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else if(!l){const g=t.type.spec.toDOM(t);!d||d&&(d==null?void 0:d.IsText())||d&&d.pmViewDesc?({dom:l,contentDOM:u}=ek.renderSpec(n.root,g),e.dom.insertBefore(l,d),n.updater.insertBefore(e.dom,t,d)):{dom:l,contentDOM:u}=sK.matchSpec(bn(d),g)}!u&&!t.isText&&l.nodeName!="BR"&&et();let f=l;return l=E2(l,i,t),t.isText?new fv(e,t,i,s,l,f,n):new Bg(e,t,i,s,l,u||null,f,n,o+1)}matchesNode(e,t,i){return this.dirty==To&&e.eq(this.node)&&Pw(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,s=t,n=e.input.composing?this.localCompositionInfo(e,t):null,o=n&&n.pos>-1?n:null,a=n&&n.pos<0,l=new cK(this,o&&o.node,e);dK(this.node,this.innerDeco,(u,d,f)=>{et()},(u,d,f,g)=>{l.syncToMarks(u.marks,i,e);let x;l.findNodeMatch(u,d,f,g)||a&&e.state.selection.from>s&&e.state.selection.to<s+u.nodeSize&&(x=l.findIndexWithChild(n.node))>-1&&l.updateNodeAt(u,d,f,x,e)||l.updateNextNode(u,d,f,e,g)||l.addNode(u,d,f,e,s),s+=u.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ad)&&(o&&this.protectLocalComposition(e,o),w2(this.contentDOM,this.children,e))}localCompositionInfo(e,t){let{from:i,to:s}=e.state.selection;if(!(e.state.selection instanceof Cs)||i<t||s>t+this.node.content.size)return null;let n=e.domSelection(),o=pK(n.focusNode,n.focusOffset);if(!o||!this.dom.contains(Dp(o.parentNode)))return null;if(this.node.inlineContent){let a=o.nodeValue,l=gK(this.node.content,a,i-t,s-t);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:s}){if(this.getDesc(t))return;let n=t;for(;n.parentNode!=this.contentDOM;n=n.parentNode){for(;n.previousSibling;){debugger;n.parentNode.removeChild(n.previousSibling)}for(;n.nextSibling;){debugger;n.parentNode.removeChild(n.nextSibling)}n.pmViewDesc&&(n.pmViewDesc=void 0)}let o=new aK(this,n,t,s,this.view);e.input.compositionNodes.push(o),this.children=Rw(this.children,i,i+s.length,e,o)}update(e,t,i,s){return this.dirty==ku||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,s),!0)}forceUpdate(e,t,i,s){this.updateInner(e,t,i,s)}updateInner(e,t,i,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=To}updateOuterDeco(e){if(Pw(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=S2(this.dom,this.nodeDOM,Tw(this.outerDeco,this.node,t),Tw(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1,(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.setAttribute("draggable","true")}deselectNode(){this.nodeDOM.nodeType==1,(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}isNodeViewDesc(){return!0}}class v2 extends Mg{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==To&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class oK extends Mg{constructor(e,t,i,s){let n,o=t.type.toDOM;typeof o=="function"&&(o=o(i,()=>{if(!n)return s;if(n.parent)return n.parent.posBeforeChild(n)})),t.type.spec.raw||(o.nodeType!=1&&Ue(),o.setAttribute("contentEditable","false")),super(e,[],o,null,i.updater),this.widget=t,this.widget=t,n=this}matchesWidget(e){return this.dirty==To&&e.type.eq(this.widget.type)}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class aK extends Mg{constructor(e,t,i,s,n){super(e,[],t,null,n.updater),this.textDOM=i,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class of extends Mg{constructor(e,t,i,s,n){super(e,[],i,s,n.updater),this.mark=t}static create(e,t,i,s){return Ue()}matchesMark(e){return this.dirty!=ku&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=To){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=To}}slice(e,t,i){let s=of.create(this.parent,this.mark,!0,i),n=this.children,o=this.size;t<o&&(n=Rw(n,t,o,i)),e>0&&(n=Rw(n,0,e,i));for(let a=0;a<n.length;a++)n[a].parent=s;return s.children=n,s}}const tk=function(r){r&&(this.nodeName=r)};tk.prototype=Object.create(null);const Ed=[new tk];function lK(r,e,t,i,s){return E2(i,e,r),new Bg(void 0,r,e,t,i,i,i,s,0)}function E2(r,e,t){return S2(r,r,Ed,Tw(e,t,r.nodeType!=1))}function Tw(r,e,t){if(r.length==0)return Ed;let i=t?Ed[0]:new tk,s=[i];for(let n=0;n<r.length;n++){let o=r[n].type.attrs;if(!!o){o.nodeName&&et();for(let a in o){let l=o[a];l!=null&&(t&&s.length==1&&et(),a=="class"||a=="style"?et():a!="nodeName"&&(i[a]=l))}}}return s}function S2(r,e,t,i){if(t==Ed&&i==Ed)return e;let s=e;for(let n=0;n<i.length;n++){let o=i[n],a=t[n];if(n){let l;a&&a.nodeName===o.nodeName&&s!=r&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName?s=l:et()}uK(s,a||Ed[0],o)}return s}function uK(r,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&console.log("[pm]removeAttribute",i,r);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&console.log("[pm]setAttribute",i,t[i],r.tagName);e.class!=t.class&&Ue(),e.style!=t.style&&Ue()}class fv extends Bg{constructor(e,t,i,s,n,o,a){super(e,t,i,s,n,null,o,a,0)}update(e,t,i,s){return this.dirty==ku||this.dirty!=To&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=To||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,this.updater.updateText(this.nodeDOM,e.text)),this.node=e,this.dirty=To,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let s=this.node.cut(e,t),n=i.root.createTextNode(s.text);return new fv(this.parent,s,this.outerDeco,this.innerDeco,n,n,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ku)}get domAtom(){return!1}isTextViewDesc(){return!0}}function Pw(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}class cK{constructor(e,t,i){c(this,"index",0);c(this,"stack",[]);c(this,"changed",!1);c(this,"preMatch");c(this,"top");this.lock=t,this.view=i,this.top=e,this.preMatch=hK(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let s=0,n=this.stack.length>>1,o=Math.min(n,e.length);for(;s<o&&(s==n-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<n;)this.destroyRest(),this.top.dirty=To,this.index=this.stack.pop(),this.top=this.stack.pop(),n--;for(;n<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[n])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=of.create(this.top,e[n],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,n++}}findNodeMatch(e,t,i,s){let n=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,i))n=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,t,i)&&!this.preMatch.matched.has(u)){n=a;break}}return n<0?!1:(this.destroyBetween(this.index,n),this.index++,!0)}updateNodeAt(e,t,i,s,n){let o=this.top.children[s];return o.dirty==ku&&o.dom==o.contentDOM&&(o.dirty=ad),o.update(e,t,i,n)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==i)return s}return-1}e=t}}updateNextNode(e,t,i,s,n){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a.isNodeViewDesc()){let l=this.preMatch.matched.get(a);if(l!=null&&l!=n)return!1;let u=a.dom;if(!(this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=ku&&Pw(t,a.outerDeco)))&&a.update(e,t,i,s))return this.destroyBetween(this.index,o),a.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,i,s,n){const o=this.index;this.top.children.splice(this.index++,0,Bg.create(this.top,e,t,i,s,n,o)),this.changed=!0}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof of;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof fv)||/\n$/.test(e.node.text))&&this.addHackNode("BR",this.top)}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=t.dom.GetDocument().createElement(e);e=="BR"?i.setAttribute(ny,tb.TrailingBreak):et();let s=new v2(this.top,[],i,null,t.updater);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hK(r,e){let t=e,i=t.children.length,s=r.childCount,n=new Map,o=[];e:for(;s>0;){let a;for(;;)if(i){let u=t.children[i-1];if(u instanceof of)t=u,i=u.children.length;else{a=u,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(!!l){if(l!=r.child(s-1))break;--s,n.set(a,s),o.push(a)}}return{index:s,matched:n,matches:o.reverse()}}function dK(r,e,t,i){let s=e.locals(r),n=0;if(s.length==0){for(let u=0;u<r.childCount;u++){let d=r.child(u);i(d,s,e.forChild(n,d),u),n+=d.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){if(o<s.length&&s[o].to==n){let E=s[o++],P;for(;o<s.length&&s[o].to==n;)(P||(P=[E])).push(s[o++]);if(P){P.sort(fK);for(let b=0;b<P.length;b++)t(P[b],u,!!l)}else t(E,u,!!l)}let d,f;if(l)f=-1,d=l,l=null;else if(u<r.childCount)f=u,d=r.child(u++);else break;for(let E=0;E<a.length;E++)a[E].to<=n&&a.splice(E--,1);for(;o<s.length&&s[o].from<=n&&s[o].to>n;)a.push(s[o++]);let g=n+d.nodeSize;if(d.isText){let E=g;o<s.length&&s[o].from<E&&(E=s[o].from);for(let P=0;P<a.length;P++)a[P].to<E&&(E=a[P].to);E<g&&(l=d.cut(E-n),d=d.cut(0,E-n),g=E,f=-1)}let x=d.isInline&&!d.isLeaf?a.filter(E=>!E.inline):a.slice();i(d,x,e.forChild(n,d),f),n=g}}function fK(r,e){return r.type.side-e.type.side}function w2(r,e,t){let i=r.firstChild;for(let o=0;o<e.length;o++){let a=e[o],l=a.dom;if(l.parentNode==r){const u=[];for(;l!=i;){Q(i);let d=i.nextSibling;i.parentNode.removeChild(i),i=d}u.length&&t.updater.removeNodes(u),i=i.nextSibling}else r.insertBefore(l,i),l.nodeName!==Oc.kTagName&&t.updater.insertBefore(r,a.node,i);if(a instanceof of){let u=i?i.previousSibling:r.lastChild;w2(a.contentDOM,a.children,t),i=u?u.nextSibling:r.firstChild}}const s=[],n=[];for(;i&&!Reflect.has(i,"$anchor");){let o=i.nextSibling;i.parentNode.removeChild(i),i.IsElement()?s.push(i):n.push(r),i=o}s.length&&t.updater.removeNodes(s),n&&t.updater.removeContent(n)}function _K(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}function pK(r,e){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0){if(r.childNodes.length>e&&r.childNodes[e].nodeType==3)return r.childNodes[e];r=r.childNodes[e-1],e=gu(r)}else if(r.nodeType==1&&e<r.childNodes.length)r=r.childNodes[e],e=0;else return null}}function gK(r,e,t,i){for(let s=0,n=0;s<r.childCount&&n<=i;){let o=r.child(s++),a=n;if(n+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<r.childCount;){let u=r.child(s++);if(n+=u.nodeSize,!u.isText)break;l+=u.text}if(n>=t){let u=a<i?l.lastIndexOf(e,i-a-1):-1;if(u>=0&&u+e.length+a>=t)return a+u;if(t==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}function Rw(r,e,t,i,s){let n=[];for(let o=0,a=0;o<r.length;o++){let l=r[o],u=a,d=a+=l.size;u>=t||d<=e?n.push(l):(u<e&&n.push(l.slice(0,e-u,i)),s&&(n.push(s),s=void 0),d>t&&n.push(l.slice(t-u,l.size,i)))}return n}class mK{constructor(){c(this,"anchorNode",null);c(this,"anchorOffset",0);c(this,"focusNode",null);c(this,"focusOffset",0)}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class xK extends Ht{constructor(t){super();c(this,"flushingSoon",-1);c(this,"listener");c(this,"currentSelection",new mK);this.view=t,this.onSelectionChange=this.onSelectionChange.bind(this)}dispose(){var t;(t=this.listener)==null||t.dispose()}start(){this.connectSelection()}stop(){this.disconnectSelection()}connectSelection(){this.listener||(this.listener=this.view.domSelection().onDidChange(this.onSelectionChange))}disconnectSelection(){var t;(t=this.listener)==null||t.dispose(),this.listener=void 0}onSelectionChange(){this.flush()}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let i=t.domSelection();K$(this.view),t.docView.dirty&&Ue(),this.currentSelection.eq(i)||wy(t),this.currentSelection.set(i)}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}setCurSelection(){this.currentSelection.set(this.view.domSelection())}}function D0(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class rk{constructor(e,t){c(this,"spec");c(this,"side");this.toDOM=e,this.spec=t||Nc,this.side=this.spec.side||0}map(e,t,i,s){let{pos:n,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new fa(n-i,n-i,this)}valid(){return!0}eq(e){return this==e||e instanceof rk&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&D0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class mu{constructor(e,t){c(this,"spec");this.attrs=e,this.spec=t||Nc}map(e,t,i,s){let n=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-i;return n>=o?null:new fa(n,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof mu&&D0(this.attrs,e.attrs)&&D0(this.spec,e.spec)}static is(e){return e.type instanceof mu}destroy(){}}class ik{constructor(e,t){c(this,"spec");this.attrs=e,this.spec=t||Nc}map(e,t,i,s){let n=e.mapResult(t.from+s,1);if(n.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=n.pos?null:new fa(n.pos-i,o.pos-i,this)}valid(e,t){let{index:i,offset:s}=e.content.findIndex(t.from),n;return s==t.from&&!(n=e.child(i)).isText&&s+n.nodeSize==t.to}eq(e){return this==e||e instanceof ik&&D0(this.attrs,e.attrs)&&D0(this.spec,e.spec)}destroy(){}}class fa{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new fa(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new fa(e,e,new rk(t,i))}static inline(e,t,i,s){return new fa(e,t,new mu(i,s))}static node(e,t,i,s){return new fa(e,t,new ik(i,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof mu}}const rd=[],Nc={},ta=class{constructor(e,t){c(this,"local");c(this,"children");this.local=e.length?e:rd,this.children=t.length?t:rd}static create(e,t){return t.length?Ay(t,e,0,Nc):Un}find(e,t,i){let s=[];return this.findInner(e==null?0:e,t==null?1e9:t,s,0,i),s}findInner(e,t,i,s,n){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!n||n(a.spec))&&i.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,i,s+a,n)}}map(e,t,i){return this==Un||e.maps.length==0?this:this.mapInner(e,t,0,0,i||Nc)}mapInner(e,t,i,s,n){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,s);l&&l.type.valid(t,l)?(o||(o=[])).push(l):n.onRemove&&n.onRemove(this.local[a].spec)}return this.children.length?yK(this.children,o||[],e,t,i,s,n):o?new ta(o.sort(Ic),rd):Un}add(e,t){return t.length?this==Un?ta.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let s,n=0;e.forEach((a,l)=>{let u=l+i,d;if(!!(d=b2(t,a,u))){for(s||(s=this.children.slice());n<s.length&&s[n]<l;)n+=3;s[n]==l?s[n+2]=s[n+2].addInner(a,d,u+1):s.splice(n,0,l,l+a.nodeSize,Ay(d,a,u+1,Nc)),n+=3}});let o=A2(n?k2(t):t,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new ta(o.length?this.local.concat(o).sort(Ic):this.local,s||this.children)}remove(e){return e.length==0||this==Un?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,s=this.local;for(let n=0;n<i.length;n+=3){let o,a=i[n]+t,l=i[n+1]+t;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>a&&f.to<l&&(e[d]=null,(o||(o=[])).push(f));if(!o)continue;i==this.children&&(i=this.children.slice());let u=i[n+2].removeInner(o,a+1);u!=Un?i[n+2]=u:(i.splice(n,3),n-=3)}if(s.length){for(let n=0,o;n<e.length;n++)if(o=e[n])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return i==this.children&&s==this.local?this:s.length||i.length?new ta(s,i):Un}forChild(e,t){if(this==Un)return this;if(t.isLeaf)return ta.empty;let i,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let n=e+1,o=n+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>n&&l.type instanceof mu){let u=Math.max(n,l.from)-n,d=Math.min(o,l.to)-n;u<d&&(s||(s=[])).push(l.copy(u,d))}}if(s){let a=new ta(s.sort(Ic),rd);return i?new lu([a,i]):a}return i||Un}eq(e){if(this==e)return!0;if(!(e instanceof ta)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Dw(this.localsInner(e))}localsInner(e){if(this==Un)return rd;if(e.inlineContent||!this.local.some(mu.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof mu||t.push(this.local[i]);return t}};let _a=ta;c(_a,"empty",new ta([],[])),c(_a,"removeOverlap",Dw);const Un=_a.empty;class lu{constructor(e){this.members=e}map(e,t){const i=this.members.map(s=>s.map(e,t,Nc));return lu.from(i)}forChild(e,t){if(t.isLeaf)return _a.empty;let i=[];for(let s=0;s<this.members.length;s++){let n=this.members[s].forChild(e,t);n!=Un&&(n instanceof lu?i=i.concat(n.members):i.push(n))}return lu.from(i)}eq(e){if(!(e instanceof lu)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let s=0;s<this.members.length;s++){let n=this.members[s].localsInner(e);if(!!n.length)if(!t)t=n;else{i&&(t=t.slice(),i=!1);for(let o=0;o<n.length;o++)t.push(n[o])}}return t?Dw(i?t:t.sort(Ic)):rd}static from(e){switch(e.length){case 0:return Un;case 1:return e[0];default:return new lu(e.every(t=>t instanceof _a)?e:e.reduce((t,i)=>t.concat(i instanceof _a?i:i.members),[]))}}}function yK(r,e,t,i,s,n,o){let a=r.slice();for(let u=0,d=n;u<t.maps.length;u++){let f=0;t.maps[u].forEach((g,x,E,P)=>{let b=P-E-(x-g);for(let R=0;R<a.length;R+=3){let D=a[R+1];if(D<0||g>D+d-f)continue;let C=a[R]+d-f;x>=C?a[R+1]=g<=C?-2:-1:E>=s&&b&&(a[R]+=b,a[R+1]+=b)}f+=b}),d=t.maps[u].map(d,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let d=t.map(r[u]+n),f=d-s;if(f<0||f>=i.content.size){l=!0;continue}let g=t.map(r[u+1]+n,-1),x=g-s,{index:E,offset:P}=i.content.findIndex(f),b=i.maybeChild(E);if(b&&P==f&&P+b.nodeSize==x){let R=a[u+2].mapInner(t,b,d+1,r[u]+n+1,o);R!=Un?(a[u]=f,a[u+1]=x,a[u+2]=R):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=vK(a,r,e,t,s,n,o),d=Ay(u,i,0,o);e=d.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,g=0;f<d.children.length;f+=3){let x=d.children[f];for(;g<a.length&&a[g]<x;)g+=3;a.splice(g,0,d.children[f],d.children[f+1],d.children[f+2])}}return new _a(e.sort(Ic),a)}function A2(r,e){if(!e||!r.length)return r;let t=[];for(let i=0;i<r.length;i++){let s=r[i];t.push(new fa(s.from+e,s.to+e,s.type))}return t}function vK(r,e,t,i,s,n,o){function a(l,u){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(i,s,u);f?t.push(f):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+u+1)}for(let l=0;l<r.length;l+=3)r[l+1]==-1&&a(r[l+2],e[l]+n+1);return t}function b2(r,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,s=null;for(let n=0,o;n<r.length;n++)(o=r[n])&&o.from>t&&o.to<i&&((s||(s=[])).push(o),r[n]=null);return s}function k2(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function Ay(r,e,t,i){let s=[],n=!1;e.forEach((a,l)=>{let u=b2(r,a,l+t);if(u){n=!0;let d=Ay(u,a,t+l+1,i);d!=Un&&s.push(l,l+a.nodeSize,d)}});let o=A2(n?k2(r):r,-t).sort(Ic);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new _a(o,s):Un}function Ic(r,e){return r.from-e.from||r.to-e.to}function Dw(r){let e=r;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let s=t+1;s<e.length;s++){let n=e[s];if(n.from==i.from){n.to!=i.to&&(e==r&&(e=r.slice()),e[s]=n.copy(n.from,i.to),UD(e,s+1,n.copy(i.to,n.to)));continue}else{n.from<i.to&&(e==r&&(e=r.slice()),e[t]=i.copy(i.from,n.from),UD(e,s,i.copy(n.from,i.to)));break}}}return e}function UD(r,e,t){for(;e<r.length&&Ic(t,r[e])>0;)e++;r.splice(e,0,t)}function GD(r){let e=[];return lu.from(e)}function EK(r,e){r.root,Ue()}function wm(r,e){Ue()}function eS(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}const SK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function wK(r,e,t){let{node:i,offset:s,atom:n}=r.docView.domFromPos(e,t<0?-1:1);if(i.nodeType==3){if(SK.test(i.nodeValue)||(t<0?!s:s==i.nodeValue.length))return wm(Em(r,i.AsText(),s,s));{let a=s,l=s,u=t<0?1:-1;return t<0&&!s?(l++,u=-1):t>=0&&s==i.nodeValue.length?(a--,u=1):t<0?a--:l++,eS(wm(Em(r,i.AsText(),a,l)),u<0)}}if(r.state.doc.resolve(e-(n||0)).parent.inlineContent||et(),n==null&&s&&(t<0||s==gu(i))){let a=i.childNodes[s-1];if(Q(a),a.nodeType==3?Em(r,a.AsText(),gu(a)-0):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null)return eS(wm(),!1)}if(n==null&&s<gu(i)){let a=i.childNodes[s];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;if(a?a.nodeType==3?Em(r,a.AsText(),0,0):a.nodeType==1?a:null:null)return eS(wm(),!0)}et()}function T2(r,e,t){let i=r.state;i!=e&&r.updateState(e);try{return t()}finally{i!=e&&r.updateState(i)}}function AK(r,e,t){let i=e.selection,s=t=="up"?i.$from:i.$to;return T2(r,e,()=>{let{node:n}=r.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=r.docView.nearestDesc(n,!0);if(!a)break;if(a.node.isBlock){n=a.contentDOM||a.dom;break}n=a.dom.parentNode}let o=wK(r,s.pos,1);for(let a=n.firstChild;a;a=a.nextSibling)et();return!0})}const bK=/[\u0590-\u08ac]/;function kK(r,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let s=i.parentOffset,n=!s,o=s==i.parent.content.size,a=r.domSelection();return!bK.test(i.parent.textContent)||!a.modify?t=="left"||t=="backward"?n:o:T2(r,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:d,anchorOffset:f}=r.domSelection(),g=a.caretBidiLevel;a.modify("move",t,"character");let x=i.depth?r.docView.domAfterPos(i.before()):r.dom,{focusNode:E,focusOffset:P}=r.domSelection();Q(x);let b=E&&!x.contains(E.nodeType==1?E:E.parentNode)||l==E&&u==P;try{Q(d),a.collapse(d,f),l&&(l!=d||u!=f)&&a.extend&&a.extend(l,u)}catch{}return g!=null&&(a.caretBidiLevel=g),b})}let HD=null,zD=null,jD=!1;function TK(r,e,t){return HD==e&&zD==t?jD:(HD=e,zD=t,jD=t=="up"||t=="down"?AK(r,e,t):kK(r,e,t))}class PK extends Ht{constructor(t,i,s,n,o){super();c(this,"focused",!1);c(this,"input",new nK);c(this,"state");c(this,"domObserver");c(this,"nodeViews",Object.create(null));c(this,"docView");c(this,"_props");c(this,"directPlugins");this.dom=t,this.root=i,this.domState=s,this.updater=n,this._props=o,this.directPlugins=o.plugins||[],this.state=o.state,this.dispatch=this.dispatch.bind(this),this.docView=this._register(lK(this.state.doc,VD(this),GD(),this.dom,this)),this.domObserver=this._register(new xK(this)),this.domObserver.start(),this._register(this.updater.onAfterMutation(()=>{this.updateStateAfterMutation()}))}get composing(){return this.input.composing}hasFocus(){return this.domState.hasFocus()}domSelection(){return this.root.getSelection()}dispatch(t){this.updateState(this.state.apply(t))}someProp(t,i){let s=this._props&&this._props[t],n;if(s!=null&&(n=i?i(s):s))return n;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[t];if(l!=null&&(n=i?i(l):l))return n}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let l=o[a].props[t];if(l!=null&&(n=i?i(l):l))return n}}updateStateAfterMutation(){let t=this.state;t.storedMarks&&this.composing&&CD(this),this.input.mouseDown?(kw(this,t.selection),this.domObserver.setCurSelection()):wy(this,!0),this.domObserver.start()}updateState(t){let i=this.state,s=!1;t.storedMarks&&this.composing&&(CD(this),s=!0),this.state=t;let n=GD(),o=VD(this),a=!this.docView.matchesNode(t.doc,o,n);if((a||!t.selection.eq(i.selection))&&(s=!0),a&&(this.docView.update(t.doc,o,n,this)||et()),s){this.domObserver.stop();let l=a&&(Qb||dv)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&WW(i.selection,t.selection);l||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection()))?wy(this,l):(kw(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}}posAtCoords(t){return EK(this)}endOfTextblock(t,i){return TK(this,i||this.state,t)}}function VD(r){return[fa.node(0,r.state.doc.content.size,{})]}function P2(r){return!!r.IsText()}function R2(r){return r.IsElement()&&r.firstChild&&P2(r.firstChild)}function RK(r){return r.IsElement()&&r.firstChild&&R2(r.firstChild)}function DK(r){return Q(r.IsText()),r.parentNode.parentNode}class CK extends c1{constructor(){super(...arguments);c(this,"_editorView");c(this,"anchorY");c(this,"anchorX");c(this,"_textAreaHandler")}get id(){return Fc}activate(){this.canvas.view.setHitTestLevel(Md.InlineBox)}deactivate(){this.canvas.view.setHitTestLevel(Md.BlockBox),this._disposeEditor(),this.canvas.view.focus()}processEvent(t){const i=t.asMouseInputEvent(),{type:s}=t;s===Jt.MOUSE_ENTER&&(Hn(i),this.handleMouseEnter(i),t.accept()),s===Jt.MOUSE_DOWN&&(Hn(i),this.handleMouseDown(i),t.accept()),s===Jt.DBLCLICK&&(Q(i),this.handleDBClick(i),t.accept()),s===Jt.DRAG&&(Hn(i),this.handleDrag(i),t.accept()),s===Jt.DROP&&(Hn(i),this.handleDrop(i),t.accept())}handleDBClick(t){this._handleClick(t)}handleMouseEnter(t){const{node:i}=yo(t.targetPath);Hn(i),P2(i)||R2(i)?this.useCursor(Ui.text):this.useCursor(Ui.arrow)}handleMouseDown(t){this._handleClick(t)&&this.canvas.invokeWithinContext(s=>{s.get(wu).switchDefault()})}handleDrag(t){this._updateSelection(t)}handleDrop(t){}_handleClick(t){var o,a;this.anchorX=t.clientX,this.anchorY=t.clientY;let i=this.canvas.view.document.getSelection().anchorNode;(o=this._editorView)==null||o.domObserver.stop(),this._updateSelection(t),(a=this._editorView)==null||a.domObserver.start();let s=this.canvas.view.document.getSelection().anchorNode;if(this._editorView&&!s)return Q(i),this._disposeEditor(),!0;if(!this._editorView&&s)return Q(!i),this._initEditor(s),!1;Q(i),Q(s);const n=di.CommonAncestor(i,s);return Q(n),Q(this._editorView),n===i?(this._editorView.domObserver.flush(),!1):RK(n)?(this._editorView.domObserver.flush(),!1):(this._disposeEditor(),this._initEditor(s),!1)}_disposeEditor(){this._editorView&&(this._editorView.dispose(),this._editorView=void 0),this._textAreaHandler&&(this._textAreaHandler.dispose(),this._textAreaHandler=void 0)}_triggerEndEditing(){this._disposeEditor(),this.canvas.view.document.getSelection().removeAllRanges(),this.canvas.invokeWithinContext(t=>{t.get(wu).switchDefault()})}_updateSelection(t){const i=this.anchorX,s=this.anchorY,{clientX:n,clientY:o}=t;if(i===n&&s===o)return this._updateCollapsedSelect(i,s);const a=s<=o,l=a?i:n,u=a?s:o,d=a?n:i,f=a?o:s,g=this.canvas.view.document.getSelection(),x=this.canvas.view.layoutManager.hitTestRTree(i,s,i,s);if(!x.length){g.removeAllRanges();return}const P=x[0].box.node,b=DK(P),D=Array.from(b.childNodes).filter(O=>O==null?void 0:O.IsElement()).map(O=>{const W=this.canvas.view.layoutManager.getParagraphOfNode(O.firstChild);return this.canvas.view.layoutManager.getRTreeItemsByParagraph(W)}).flat().sort((O,W)=>O.minY<W.minY?-1:1);let C,I;for(let O of D)O.minY<=u&&O.maxY>=u&&(C=O),O.minY<=f&&(I=O);C||(C=D[0]),Q(C),Q(I);let H;if(u<=C.minY)H=C.box.GetTextStartPosition();else{const O=C.minX,W=C.maxX;l>=W?H=C.box.GetTextEndPosition():l<=O?H=C.box.GetTextStartPosition():H=C.box.GetTextPositionAtVisualLocation(l-O)}let N;if(f>=I.maxY)N=I.box.GetTextEndPosition();else{const O=I.maxX,W=I.minX;d>=O?N=I.box.GetTextEndPosition():d<W?N=I.box.GetTextStartPosition():N=I.box.GetTextPositionAtVisualLocation(d-W)}const V=this.canvas.view.document.createRange();a?(V.setStart(C.box.node,H),V.setEnd(I.box.node,N)):(V.setStart(I.box.node,N),V.setEnd(C.box.node,H)),g.addRange(V),g.anchorOffset<0&&et(),g.focusOffset<0&&et()}_updateCollapsedSelect(t,i){const s=this.anchorX,n=this.anchorY,o=this.canvas.view.document.getSelection(),a=this.canvas.view.layoutManager.hitTestRTree(s,n,s,n);if(!a.length){o.removeAllRanges();return}const l=a[0],u=l.minX,d=t-u;let f;d<=0?et():d===0?f=l.box.GetTextStartPosition():f=l.box.GetTextPositionAtVisualLocation(d);const g=l.box.node,x=this.canvas.view.document.createRange();x.setStart(g,f),x.setEnd(g,f),o.addRange(x)}_initEditor(t){Q(t.IsText());const i=t.parentElement.parentElement,s=i.getAttribute(Ac),n=bN(i);Q(s);const o=this.canvas.viewModel.getViewModelNodeById(ix.create(s,n));Q(o);const a=this.canvas.view.document,l=Array.from(a.body().childNodes).find(u=>u&&u.IsElement()&&u.getAttribute(Ac)===s);Q(l),this._editorView=new PK(l.AsElement().AsHTMLElement(),a,{hasFocus:()=>this._textAreaHandler.isFocused()},new nW(this.canvas),{state:Kp.create({doc:va.fromJSON(iK,o)}),plugins:[Z$(o$)]}),this._editorView.domObserver.flush(),Reflect.set(window,"vv",this._editorView),this._textAreaHandler=new B$(new Y$(this._editorView,this._triggerEndEditing.bind(this)),this.canvas.view),document.body.append(this._textAreaHandler.textArea.domNode,this._textAreaHandler.textAreaCover.domNode),this._textAreaHandler.focusTextArea()}}const Fc="tool.text";class OK extends SA{isDoubleClickShortcut(){return!0}}class NK{constructor(){c(this,"id",Fc);c(this,"shortcut",new OK)}createTool(e){return new CK(e,Ui.text)}}class nk{constructor(...e){c(this,"_entries",new Map);for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}dispose(){for(const[e,t]of this._entries){if(e!==pl&&!(t instanceof Fd)){const i=Reflect.get(t,"dispose");yA(i)&&i.call(t)}this._entries.delete(e)}}}class IK{static negate(e){return{x:-e.x,y:-e.y}}}class by{static parse(e){let t,i=parseFloat;if(t=/matrix\s*\((.+)\)/i.exec(e)){let n=t[1].split(",");return n.length!=6&&(n=t[1].split(" ")),{a:i(n[0]),b:i(n[1]),c:i(n[2]),d:i(n[3]),tx:i(n[4]),ty:i(n[5])}}throw new Error("500")}static get Identity(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}}static translate(e,t){let i=e.tx+t.x,s=e.ty+t.y;return{...e,tx:i,ty:s}}static scale(e,t,i){let s=i?by.translate(e,i):{a:e.a,b:e.b,c:e.c,d:e.d,tx:e.tx,ty:e.ty};return s.a*=t.x,s.b*=t.x,s.c*=t.y,s.d*=t.y,i&&(s=by.translate(s,IK.negate(i))),s}}class FK{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.width=i,this.height=s}}Wc.some;var Xp=(r=>(r[r.Unknown=0]="Unknown",r[r.Canvas=1]="Canvas",r))(Xp||{});class MK{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}}class BK{constructor(e,t){this.x=e,this.y=t}}class LK{constructor(e,t){this.x=e,this.y=t}}class D2 extends uO{constructor(t,i,s,n){super(t);c(this,"isFromPointerCapture");c(this,"pos");c(this,"editorPos");c(this,"relativePos");this.isFromPointerCapture=i,this.pos=new BK(this.posx,this.posy),this.editorPos=GK(s),this.relativePos=HK(n,this.editorPos,this.pos)}}class UK{constructor(e){this.viewHelper=e}_create(e){return new D2(e,!1,this.viewHelper.viewDomNode,this.viewHelper.getTransform())}onContextMenu(e,t){return jn(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return jn(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return jn(e,Ds.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return jn(e,Ds.POINTER_DOWN,i=>{t(this._create(i),i.pointerType,i.pointerId)})}onMouseLeave(e,t){return Y8(e,i=>{t(this._create(i))})}onMouseMove(e,t){return jn(e,Ds.MOUSE_MOVE,i=>{t(this._create(i))})}}function GK(r){const e=e5(r);return new MK(e.left,e.top,e.width,e.height)}function HK(r,e,t){const i=r.a,s=r.d,n=(t.x-e.x)/i-r.tx,o=(t.y-e.y)/s-r.ty;return new LK(n,o)}class zK{constructor(){c(this,"_hooks",new pa);c(this,"_pointerMoveEventMerger",null);c(this,"_pointerMoveCallback",null);c(this,"_onStopCallback",null)}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveEventMerger=null,this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveEventMerger}startMonitoring(e,t,i,s,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveEventMerger=s,this._pointerMoveCallback=n,this._onStopCallback=o;try{e.setPointerCapture(t),this._hooks.add(nn(()=>{e.releasePointerCapture(t)}))}catch{}this._hooks.add(X8(e,Ds.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}this._pointerMoveCallback(a)},(a,l)=>this._pointerMoveEventMerger(a,l))),this._hooks.add(jn(e,Ds.POINTER_UP,a=>this.stopMonitoring(!0,a)))}}class jK extends Ht{constructor(t){super();c(this,"_globalPointerMoveMonitor");c(this,"_keydownListener");this.viewHelper=t,this._globalPointerMoveMonitor=this._register(new zK),this._keydownListener=null}get _editorViewDomNode(){return this.viewHelper.viewDomNode}startMonitoring(t,i,s,n,o,a){this._keydownListener=KS(document,"keydown",u=>{u.toKeybinding().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,u.browserEvent)},!0);const l=(u,d)=>n(u,new D2(d,!0,this._editorViewDomNode,this.viewHelper.getTransform()));this._globalPointerMoveMonitor.startMonitoring(t,i,s,l,o,u=>{this._keydownListener.dispose(),a(u)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class VK{constructor(e,t=[]){c(this,"type");c(this,"targetPath");this.type=e,this.targetPath=t}}class WK{constructor(e){c(this,"_viewHelper");this._viewHelper=e}}class sk{constructor(e,t,i){c(this,"_ctx");c(this,"result");c(this,"target");c(this,"targetPath",[]);c(this,"pos");this.pos=t,this._ctx=e,this.target=i}fulfill(e){let t=this.targetPath.splice(0);return this.result&&t.push(...this.result.map(i=>PA.fromVirtualDOMNode(i.node))),new VK(e,t)}withResult(e){let t=new sk(this._ctx,this.pos,this.target);return t.result=e,t}}class $K{constructor(e){c(this,"_viewHelper");this._viewHelper=e}createMouseTarget(e,t,i){const s=new WK(this._viewHelper),n=new sk(s,e,t);return this._createMouseTarget(s,n,!1,i)}_createMouseTarget(e,t,i,s){t.target||Ue();const n=t;let o=null;return o=o||this._hitTestCanvas(n,s),Ti(o)&&(o=t.fulfill(Xp.Unknown)),o}_hitTestCanvas(e,t){const i=this._viewHelper.hitTest(e.pos.x,e.pos.y,t);return i.length>0?e.withResult(i).fulfill(Xp.Canvas):e.fulfill(Xp.Canvas)}}function KK(){return function(r,e){return e.preventDefault(),e}}const gT=class extends Ht{constructor(t,i){super();c(this,"viewController");c(this,"viewHelper");c(this,"mouseTargetFactory");c(this,"_mouseDownOperation");c(this,"lastMouseLeaveTime");c(this,"mousePressed",!1);c(this,"multiClickCount",0);c(this,"lastClickTimeStamp",0);c(this,"lastClickPosX");c(this,"lastClickPosY");c(this,"lastMouseMoveTarget");c(this,"lastEmittedMouseEnter");c(this,"enterLeaveCounter",0);c(this,"lastEmittedMouseDownButtons",0);this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new $K(i),this._mouseDownOperation=this._register(new XK(this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,{hitTestLevel:i.getHitTestLevel(Jt.DRAG)}),()=>this.mousePressed=!1)),this.lastMouseLeaveTime=-1;const s=new UK(this.viewHelper);this._register(s.onMouseMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o)));let n=0;this._register(jn(this.viewHelper.viewDomNode,Ds.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,n))),this._register(KS(this.viewHelper.viewDomNode,Ds.KEY_DOWN,this._onKeyDown.bind(this))),this._register(KS(this.viewHelper.viewDomNode,Ds.KEY_UP,this._onKeyUp.bind(this))),this._register(jn(this.viewHelper.viewDomNode,Ds.WHEEL,this._onMouseWheel.bind(this),{capture:!0,passive:!1}))}_createMouseTarget(t,i){return this.mouseTargetFactory.createMouseTarget(t.pos,t.target,i)}_onContextMenu(t,i){Ue()}_onMouseMove(t){if(this._mouseDownOperation.isActive())return;const i=this._createMouseTarget(t,{hitTestLevel:this.viewHelper.getHitTestLevel(Jt.MOUSE_MOVE)});if(i.type!==Xp.Unknown){if(this.lastEmittedMouseEnter){const s=i.targetPath,n=this.lastEmittedMouseEnter.targetPath,o=yo(s).node,a=yo(n).node;o&&o!==a&&(this.viewController.emitMouseLeave(ls(Jt.MOUSE_LEAVE,t,this.lastEmittedMouseEnter)),this.enterLeaveCounter--,this.viewController.emitMouseEnter(ls(Jt.MOUSE_ENTER,t,i)),this.enterLeaveCounter++,this.lastEmittedMouseEnter=i)}else this.viewController.emitMouseEnter(ls(Jt.MOUSE_ENTER,t,i)),this.enterLeaveCounter++,this.lastEmittedMouseEnter=i;this.enterLeaveCounter>1&&et(),this.viewController.emitMouseMove(ls(Jt.MOUSE_MOVE,t,i)),this.lastMouseMoveTarget=i}else this._handleMouseLeave(t)}_handleMouseLeave(t){this.lastEmittedMouseEnter&&(this.viewController.emitMouseLeave(ls(Jt.MOUSE_LEAVE,t,this.lastEmittedMouseEnter)),this.enterLeaveCounter--,this.lastMouseMoveTarget=void 0,this.lastEmittedMouseEnter=void 0)}_onMouseUp(t){let i=this._createMouseTarget(t,{hitTestLevel:this.viewHelper.getHitTestLevel(Jt.MOUSE_UP)});this.mousePressed=!1;const s=t.browserEvent.pageX,n=t.browserEvent.pageY;switch(Mx(this.lastClickPosX)&&Mx(this.lastClickPosY)&&((Math.abs(s-this.lastClickPosX)>5||Math.abs(n-this.lastClickPosY)>5)&&(this.multiClickCount=0),this.lastClickPosX=s,this.lastClickPosY=n),this.multiClickCount&&t.timestamp-this.lastClickTimeStamp<gT.DoubleClickInterval?this.multiClickCount++:(this.lastClickTimeStamp=t.timestamp,this.multiClickCount=1),this.multiClickCount){case 1:this.viewController.emitMouseUp(ls(Jt.MOUSE_UP,t,i,this.lastEmittedMouseDownButtons));break;case 2:this.viewController.emitMouseUp(ls(Jt.MOUSE_UP,t,i,this.lastEmittedMouseDownButtons)),this.viewController.emitDbClick(ls(Jt.DBLCLICK,t,i,this.lastEmittedMouseDownButtons));break;default:this.multiClickCount=0;break}}createKeyboardEvent(t,i){return new JB(t,i)}_onMouseDown(t,i){this.mousePressed&&_i();const s=this._createMouseTarget(t,{hitTestLevel:this.viewHelper.getHitTestLevel(Jt.MOUSE_DOWN)});this.viewController.emitMouseDown(ls(Jt.MOUSE_DOWN,t,s)),t.preventDefault(),this._mouseDownOperation.start(s.type,t,i),this.mousePressed=!0,this.lastEmittedMouseDownButtons=t.buttons}_onMouseWheel(t){this.viewController.emitMouseWheel(new QB(t))}_onKeyDown(t){this.viewController.emitKeyDown(this.createKeyboardEvent(Jt.KEY_DOWN,t))}_onKeyUp(t){this.viewController.emitKeyUp(this.createKeyboardEvent(Jt.KEY_UP,t))}};let vp=gT;c(vp,"MOUSE_MOVE_MINIMUM_TIME",100),c(vp,"DoubleClickInterval",400);class XK extends Ht{constructor(t,i,s,n){super();c(this,"_viewController");c(this,"_viewHelper");c(this,"_createMouseTarget");c(this,"_mouseMoveMonitor");c(this,"_mouseState");c(this,"_isActive");c(this,"_lastMouseEvent");c(this,"_lastMouseTarget");this._onCancelled=n,this._viewController=t,this._viewHelper=i,this._createMouseTarget=s,this._mouseMoveMonitor=this._register(new jK(this._viewHelper)),this._mouseState=new px,this._isActive=!1,this._lastMouseEvent=null}isActive(){return this._isActive}_onMouseDownThenMove(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t),this._mouseState.isDragAndDrop?(this._lastMouseTarget=this._createMouseTarget(t,!0),this._viewController.emitMouseDrag(ls(Jt.DRAG,t,this._lastMouseTarget)),this._viewController.emitMouseMove(ls(Jt.MOUSE_MOVE,t,this._lastMouseTarget))):et()}start(t,i,s){this._lastMouseEvent=i,this._mouseState.setModifiers(i),this._mouseState.trySetCount(i.detail,{x:i.pos.x,y:i.pos.y}),i.detail=this._mouseState.count,!this._mouseState.altKey&&i.detail<2&&!this._isActive&&(this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._lastMouseTarget=this._createMouseTarget(i,!0),this._viewController.emitMouseDragStart(ls(Jt.DRAG_START,i,this._lastMouseTarget)),this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewDomNode,s,i.buttons,KK(),n=>this._onMouseDownThenMove(n),n=>{!n||n&&n instanceof KeyboardEvent?(this._viewController.emitMouseDropCanceled(ls(Jt.DRAG_END,this._lastMouseEvent,this._lastMouseTarget,i.buttons)),this._onCancelled()):this._viewController.emitMouseDrop(ls(Jt.DROP,this._lastMouseEvent,this._lastMouseTarget)),this._stop(),this._lastMouseTarget=void 0}))}_stop(){this._isActive=!1}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}}const mT=class{constructor(){c(this,"_altKey");c(this,"_ctrlKey");c(this,"_metaKey");c(this,"_shiftKey");c(this,"_leftButton");c(this,"_middleButton");c(this,"_lastMouseDownPosition");c(this,"_lastMouseDownPositionEqualCount");c(this,"_lastMouseDownCount");c(this,"_lastSetMouseDownCountTime");c(this,"isDragAndDrop");this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>mT.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition===t?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};let px=mT;c(px,"CLEAR_MOUSE_DOWN_COUNT_TIME",400);class YK{constructor(e,t){c(this,"handler");this.viewController=e,this.viewHelper=t,this.handler=new vp(e,t)}dispose(){this.handler&&this.handler.dispose()}}const $y=class extends Tn{constructor(e){e?super(e,$y.kTagName):super($y.kTagName)}};let Sd=$y;c(Sd,"kTagName","div");class qK extends Ht{constructor(e,t){super(),this.view=e,this.mvvm=t;const i=e.document.getSelection();this._register(i.onDidChange(async()=>{await this.mvvm.maybeWaitForReLayout(),this._updateSelectionDisplay()}))}_updateSelectionDisplay(){const e=this.view.document.getSelection();if(e.ranges.length){this.view.setCursor(Ui.text);const t=e.getRangeAt(0);t||et();const i=t.endContainer(),s=t.endOffset();if(i.IsElement())if(i.tagName===ko.kTagName){Q(s===0||s===1);const n=i.GetLayoutObject(),{box:o}=n,a=o.GetBorderBoxFromRoot(!1);this.view.drawCursor({blockStart:a.x().toFloat(),inlineSize:a.height().toFloat(),inlineStart:a.y().toFloat()})}else if(i.tagName===Sd.kTagName){const n=i.childNodes[s-1];if(n||et(),Q(n==null?void 0:n.IsElement()),n.firstChild&&n.firstChild.IsText()){const o=n.firstChild,a=this.view.layoutManager.getParagraphOfNode(o);a||et();const l=this.view.layoutManager.getRTreeItemsByParagraph(a),d=yo(l).box,f=d.GetTextEndPosition(),g=d.RectOfSlice(f,f);this.view.drawCursor({blockStart:g.x,inlineSize:g.height,inlineStart:g.y})}else{const o=n.GetLayoutObject(),{box:a}=o,l=a.GetBorderBoxFromRoot(!1);this.view.drawCursor({blockStart:l.x().toFloat(),inlineSize:l.height().toFloat(),inlineStart:l.y().toFloat()})}}else Ue();else if(i.IsText()){const n=this.view.layoutManager.getParagraphOfNode(i);n||et();const o=this.view.layoutManager.getRTreeItemsByParagraph(n);for(let a of o){const l=a.box,u=l.GetTextStartPosition(),d=l.GetTextEndPosition();if(u>s||d<s)continue;const f=l.RectOfSlice(s,s);this.view.drawCursor({blockStart:f.x,inlineSize:f.height,inlineStart:f.y});break}}else Ue()}else this.view.setCursor(Ui.arrow),this.view.drawCursor(void 0)}}const Ss=window.devicePixelRatio||1;class QK{constructor(e){c(this,"size_");c(this,"surface_");this.size_=new tl(e.width,e.height),this.surface_=gr.MakeCanvasSurface(e)}get surface(){return this.surface_}GetSize(){return this.size_}}class JK{}class ZK{}class Cw{constructor(e=0,t=0,i=0,s=0){c(this,"ascent_");c(this,"descent_");c(this,"leading_");c(this,"x_height_");this.ascent_=e,this.descent_=t,this.leading_=i,this.x_height_=s}ascent(){return this.ascent_}descent(){return this.descent_}leading(){return this.leading_}x_height(){return this.x_height_}em_box_height(){return this.ascent_+this.descent_+this.leading_}baseline_offset_from_top(){return this.ascent_+this.leading_/2}}var fo=(r=>(r[r.kThinWeight=100]="kThinWeight",r[r.kExtraLightWeight=200]="kExtraLightWeight",r[r.kLightWeight=300]="kLightWeight",r[r.kNormalWeight=400]="kNormalWeight",r[r.kMediumWeight=500]="kMediumWeight",r[r.kSemiBoldWeight=600]="kSemiBoldWeight",r[r.kBoldWeight=700]="kBoldWeight",r[r.kExtraBoldWeight=800]="kExtraBoldWeight",r[r.kBlackWeight=900]="kBlackWeight",r))(fo||{}),Ow=(r=>(r[r.kUprightSlant=0]="kUprightSlant",r[r.kItalicSlant=1]="kItalicSlant",r))(Ow||{});class C2{constructor(e=400,t=0){c(this,"weight");c(this,"slant");this.weight=e,this.slant=t}}class eX{}class tn{constructor(e=0,t=0){c(this,"x_");c(this,"y_");this.x_=e,this.y_=t}SetVector(e,t){this.x_=e,this.y_=t}x(){return this.x_}set_x(e){this.x_=e}y(){return this.y_}set_y(e){this.y_=e}IsZero(){return this.x_==0&&this.y_==0}Add(e){return this.x_+=e.x_,this.y_+=e.y_,this}Subtract(e){this.x_-=e.x_,this.y_-=e.y_}get 0(){return this.x_}get 1(){return this.y_}SetToMin(e){this.x_=this.x_<=e.x_?this.x_:e.x_,this.y_=this.y_<=e.y_?this.y_:e.y_}SetToMax(e){this.x_=this.x_>=e.x_?this.x_:e.x_,this.y_=this.y_>=e.y_?this.y_:e.y_}LengthSquared(){return this.x_*this.x_+this.y_*this.y_}Length(){return Math.sqrt(this.LengthSquared())}Scale(e,t){if(Ti(t))return this.Scale(e,e);this.x_*=e,this.y_*=t}SUB_ASSIGN(e){this.Subtract(e)}ADD_ASSIGN(e){this.Add(e)}CLONE(){return new tn(this.x(),this.y())}}class ky{constructor(e,t,i,s){c(this,"size_");c(this,"origin_");if(arguments.length===0)this.size_=new el,this.origin_=new au;else if(arguments.length===1)if(e instanceof au)this.origin_=e.CLONE(),this.size_=new el;else if(e instanceof ky){let n=e.CLONE();this.origin_=new au(n.origin_),this.size_=new el(n.size_)}else this.origin_=new au,this.size_=e.CLONE();else arguments.length==2?(this.origin_=e.CLONE(),this.size_=t.CLONE()):(this.origin_=new au(e,t),this.size_=new el(i,s))}x(){return this.origin_.x()}set_x(e){this.origin_.set_x(e)}y(){return this.origin_.y()}set_y(e){this.origin_.set_y(e)}width(){return this.size_.width()}set_width(e){this.size_.set_width(e)}height(){return this.size_.height()}set_height(e){this.size_.set_height(e)}origin(){return this.origin_}set_origin(e){this.origin_=e}size(){return this.size_}set_size(e){this.size_=e}right(){return this.x()+this.width()}bottom(){return this.y()+this.height()}IsEmpty(){return this.size_.IsEmpty()}Union(e){if(this.IsEmpty()){this.size_=e.size_.CLONE(),this.origin_=e.origin_.CLONE();return}if(e.IsEmpty())return;let t=Math.min(this.x(),e.x()),i=Math.min(this.y(),e.y()),s=Math.max(this.right(),e.right()),n=Math.max(this.bottom(),e.bottom());this.SetRect(t,i,s-t,n-i)}SetRect(e,t,i,s){this.origin_.SetPoint(e,t),this.set_width(i),this.set_height(s)}Offset(e){this.origin_.ADD(e)}Inset(e,t,i,s){let n,o,a,l;arguments.length===4?(n=e,a=t,o=i,l=s):(n=o=e,a=l=t),this.origin_.ADD(new tn(n,a)),this.set_width(Math.max(this.width()-n-o,0)),this.set_height(Math.max(this.height()-a-l,0))}Outset(e,t){this.Inset(-e,-t)}CLONE(){return new ky(this.origin_.CLONE(),this.size_.CLONE())}Scale(e){this.origin().Scale(e),this.size().Scale(e)}}class lr extends ky{static fromRectLayoutUnit(e){const t=e.origin(),i=e.size();return new lr(t.x().toFloat(),t.y().toFloat(),i.width().toFloat(),i.height().toFloat())}}const tX=.56;class O2 extends eX{constructor(t,i){super();c(this,"sk_font_");this.typeface_=t,this.size_=i}GetTypefaceId(){return this.typeface_.GetId()}GetFontMetrics(){let i=this.GetSkFont().getMetrics(),s;return s=i.ascent*tX,new Cw(-i.ascent,i.descent,i.leading,s)}GetGlyphForCharacter(t){return this.typeface_.GetGlyphForCharacter(t)}GetGlyphBounds(t){let s=this.GetSkFont().getGlyphBounds([t],null),n=s[0],o=s[1],a=s[2],l=s[3],u=a-n,d=l-o;return new lr(0,-o,u,d)}GetGlyphWidth(t){return this.GetSkFont().getGlyphWidths([t],null)[0]}GetSkFont(){if(!this.sk_font_){const t=new gr.Font(this.typeface_.GetSkTypeface(),this.size_);t.setSubpixel(!0),t.setLinearMetrics(!0),this.sk_font_=t}return this.sk_font_}}c(O2,"kPrimaryPageSize",256);class N2 extends ZK{constructor(e){super(),this.typeface_=e}CreateFontWithSize(e){return new O2(this,e)}GetGlyphForCharacter(e){return this.typeface_.getGlyphIDs(String.fromCodePoint(e))[0]}GetSkTypeface(){return this.typeface_}GetId(){return 255}GetEstimatedSizeInBytes(){Ue()}}c(N2,"kPrimaryPageSize",256);class rX extends Ht{constructor(t){super();c(this,"bounds_");this.bounds_=t}GetBounds(){return this.bounds_}}class iX extends rX{constructor(t,i,s){super(t);c(this,"text_blob_");this.chars_=i,this.text_blob_=s}GetTextBlob(){return this.text_blob_}dispose(){}}const nX=8301,sX=8299,oX=1564,aX=13,lX=8296,uX=12,cX=9,hX=8300,dX=8298,fX=8234,Nw=8294,_X=8206,pX=8302,gX=8303,I2=10,F2=160,M2=65532,mX=8236,gx=8297,B2=8295,xX=8207,yX=8238,vX=173,C0=32,EX=8205,SX=65279,wX=8204,ok=8203;function AX(r){return r==C0||r==cX||r==I2||r==uX||r==aX||r==F2}function bX(r){if(kX(r))return!0;switch(r){case nX:case sX:case oX:case lX:case hX:case dX:case Nw:case pX:case gX:case mX:case gx:case B2:case vX:case wX:case EX:return!0}return!1}function kX(r){return r<32||r>=127&&r<160||r==ok||r>=_X&&r<=xX||r>=fX&&r<=yX||r==SX||r==M2||TX(r)}function TX(r){return r>=127995&&r<=127999}function PX(r){return AX(r)?C0:bX(r)?ok:r}const Iw=0;class RX{constructor(){c(this,"min_y_",Number.MAX_SAFE_INTEGER);c(this,"max_y_",Number.MIN_SAFE_INTEGER)}IncludeRange(e,t){this.min_y_=Math.min(this.min_y_,e),this.max_y_=Math.max(this.max_y_,t)}GetY(){return this.IsValid()?this.min_y_:0}GetHeight(){return this.IsValid()?this.max_y_-this.min_y_:0}IsValid(){return this.max_y_>=this.min_y_}}class DX{constructor(){c(this,"skia");c(this,"local_text_buffer_size_",0);c(this,"local_text_buffer_",0);this.skia=gr}CreateGlyphBuffer(e,t,i,s,n,o){let{maybe_bounds:a,text_blob:l,chars:u}=this.ShapeText(e,t,i,s,n,o,[]);return new iX(a,u,l)}GetTextWidth(e,t,i,s,n,o,a=[]){let{maybe_bounds:l}=this.ShapeText(e,t,i,s,n,o,a,!1);return l.width()}ShapeText(e,t,i,s,n,o,a=[],l=!0){let{text_blob:u,chars:d,maybe_vertical_bounds:f,current_width:g}=this.ShapeSimpleRunWithDirection(e,t,i,n,o,a,l),x=new lr(0,f.GetY(),g,f.GetHeight());return{text_blob:u,chars:d,maybe_bounds:x}}ShapeSimpleRunWithDirection(e,t,i,s,n,o=[],a=!0){if(s)Ue(),this.EnsureLocalTextBufferHasSize(i);else{let l=[],u=new RX,{text_blob:d,chars:f,current_width:g}=this.ShapeSimpleRun(e,t,i,n,u,l,0,a);return{text_blob:d,chars:f,current_width:g,maybe_vertical_bounds:u}}}ShapeSimpleRun(e,t,i,s,n,o,a=0,l=!0){let u,d=[],f="";for(let x=0;x<i;x++){const E=e.charAt(x+t);let P=PX(E),b=Iw;if(P==ok)continue;let{font:R,glyph_index:D}=s.GetCharacterFont(P),C=R;b=D,d.length>0&&u!=C&&et(),f+=String.fromCodePoint(P);let I=C.GetGlyphBounds(b),H=C.GetGlyphWidth(b);a+=H,n&&n.IncludeRange(I.y(),I.bottom()),u=C,d.push(b)}let g;return d.length>0&&(Q(u),o&&CX(u,o),l&&(g=this.MakeTextBlob(d,u))),{text_blob:g,chars:f,current_width:a}}MakeTextBlob(e,t){return this.skia.TextBlob.MakeFromGlyphs(e,t.GetSkFont())}EnsureLocalTextBufferHasSize(e){this.local_text_buffer_size_<e&&(this.local_text_buffer_size_=e,this.local_text_buffer_=0)}}function CX(r,e){!e||!r||e.includes(r)||e.push(r)}var af=(r=>(r[r.kPixelFormatRGBA8=0]="kPixelFormatRGBA8",r[r.kPixelFormatBGRA8=1]="kPixelFormatBGRA8",r[r.kPixelFormatUYVY=2]="kPixelFormatUYVY",r[r.kPixelFormatY8=3]="kPixelFormatY8",r[r.kPixelFormatU8=4]="kPixelFormatU8",r[r.kPixelFormatV8=5]="kPixelFormatV8",r[r.kPixelFormatUV8=6]="kPixelFormatUV8",r[r.kPixelFormatInvalid=7]="kPixelFormatInvalid",r))(af||{});function L2(r){switch(r){case 0:return 4;case 1:return 4;case 3:return 1;case 4:return 1;case 5:return 1;case 6:return 2;case 2:case 7:et()}return-1}var du=(r=>(r[r.kAlphaFormatPremultiplied=0]="kAlphaFormatPremultiplied",r[r.kAlphaFormatUnpremultiplied=1]="kAlphaFormatUnpremultiplied",r[r.kAlphaFormatOpaque=2]="kAlphaFormatOpaque",r))(du||{});class OX{constructor(e,t,i,s){this.size=e,this.pixel_format=t,this.alpha_format=i,this.pitch_in_bytes=s}}class NX{}class IX{GetEstimatedSizeInBytes(){return this.GetSize().width()*this.GetSize().height()*L2(0)}IsOpaque(){return!1}EnsureInitialized(){return!1}CanRenderInSkia(){return!0}}class U2 extends IX{static DCheckForPremultipliedAlpha(e,t,i,s){Ue()}CanRenderInSkia(){return!0}}class _v extends U2{GetTypeId(){return rr(_v)}}class ak extends U2{GetTypeId(){return rr(ak)}IsOpaque(){return!0}}class G2 extends NX{constructor(t,i,s){super();c(this,"descriptor_");c(this,"pixel_data_",new Uint8Array);this.descriptor_=new OX(t,i,s,t.width()*L2(i))}GetDescriptor(){return this.descriptor_}GetMemory(){return this.pixel_data_}SetMemory(t){this.pixel_data_=t}}class FX extends _v{constructor(t,i){super();c(this,"owned_pixel_data_");c(this,"image_");c(this,"size_");c(this,"is_opaque_");t instanceof G2?(this.owned_pixel_data_=t.GetMemory().slice(),this.Initialize(this.owned_pixel_data_,t.GetDescriptor())):this.Initialize(t,i)}GetSize(){return this.size_}GetImage(){return this.image_}EnsureInitialized(){return!1}IsOpaque(){return this.is_opaque_}Initialize(t,i){this.is_opaque_=i.alpha_format==du.kAlphaFormatOpaque,this.size_=i.size,i.pixel_format==af.kPixelFormatUV8?Ue():this.image_=gr.MakeImageFromEncoded(t)}}const MX=""+new URL("Roboto-Regular.79e85140.ttf",import.meta.url).href,BX=""+new URL("SourceHanSansCN-Normal.cd1c5b9c.ttf",import.meta.url).href,H2="Roboto";class LX extends JK{constructor(){super();c(this,"init",new ey);c(this,"fontReady",new ey);c(this,"fontDatas",new Map);c(this,"text_shaper_");c(this,"typeface_map_",new Map);this.text_shaper_=new DX,this.LoadFont()}async LoadFont(){let i=await(await fetch(MX)).arrayBuffer();this.fontDatas.set("Roboto",i);let n=await(await fetch(BX)).arrayBuffer();this.fontDatas.set('"source han sans"',n),this.fontReady.open()}CreateGlyphBuffer(t,i,s,n,o,a){return this.text_shaper_.CreateGlyphBuffer(t,i,s,n,o,a)}GetCharacterFallbackTypeface(t,i,s){return this.GetDefaultTypeface()}GetTypeface(t=H2){if(!this.typeface_map_.has(t)){const i=this.fontDatas.get(t);let n=gr.FontMgr.RefDefault().MakeTypefaceFromData(i);const o=new N2(n);this.typeface_map_.set(t,o)}return this.typeface_map_.get(t)}GetLocalTypeface(t,i){return this.HasLocalFontFamily(t)||et(),this.GetTypeface(t)}GetDefaultTypeface(){return this.GetTypeface()}GetTextWidth(t,i,s,n,o,a,l=[]){return this.text_shaper_.GetTextWidth(t,i,s,n,o,a,l)}HasLocalFontFamily(t){return this.fontDatas.has(t)}DrawOffscreenImage(t){Ue()}PixelFormatSupported(t){return t==af.kPixelFormatRGBA8||t==af.kPixelFormatUYVY}AllocateImageData(t,i,s){return Q(this.PixelFormatSupported(i)),Q(this.AlphaFormatSupported(s)),new G2(t,i,s)}AlphaFormatSupported(t){return t==du.kAlphaFormatPremultiplied||t==du.kAlphaFormatOpaque}CreateImage(t){let i=t;return new FX(i)}}function Fw(r){return r.type===hi.Block}function WD(r){return r.type===hi.Root}function UX(r){return r.type===hi.Text}function GX(r,e){const t=Object.create(null),i=r.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const HX=Object.assign,zX=Object.prototype.hasOwnProperty,pv=(r,e)=>zX.call(r,e),xu=Array.isArray,mx=r=>z2(r)==="[object Map]",jX=r=>typeof r=="string",lk=r=>typeof r=="symbol",gv=r=>r!==null&&typeof r=="object",VX=Object.prototype.toString,z2=r=>VX.call(r),WX=r=>z2(r).slice(8,-1),uk=r=>jX(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,j2=(r,e)=>!Object.is(r,e);let $X;function V2(r,e=$X){e&&e.active&&e.effects.push(r)}const W2=r=>{const e=new Set(r);return e.w=0,e.n=0,e},$2=r=>(r.w&Tu)>0,K2=r=>(r.n&Tu)>0,KX=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Tu},XX=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];$2(s)&&!K2(s)?s.delete(r):e[t++]=s,s.w&=~Tu,s.n&=~Tu}e.length=t}},Mw=new WeakMap;let Ep=0,Tu=1;const Bw=30;let oa;const Mc=Symbol(""),Lw=Symbol("");class YX{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,V2(this,i)}run(){if(!this.active)return this.fn();let e=oa,t=Bc;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=oa,oa=this,Bc=!0,Tu=1<<++Ep,Ep<=Bw?KX(this):$D(this),this.fn()}finally{Ep<=Bw&&XX(this),Tu=1<<--Ep,oa=this.parent,Bc=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){oa===this?this.deferStop=!0:this.active&&($D(this),this.onStop&&this.onStop(),this.active=!1)}}function $D(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}function qX(r,e){r.effect&&(r=r.effect.fn);const t=new YX(r);e&&(HX(t,e),e.scope&&V2(t,e.scope)),(!e||!e.lazy)&&t.run();const i=t.run.bind(t);return i.effect=t,i}function QX(r){r.effect.stop()}let Bc=!0;const X2=[];function JX(){X2.push(Bc),Bc=!1}function ZX(){const r=X2.pop();Bc=r===void 0?!0:r}function oo(r,e,t){if(Bc&&oa){let i=Mw.get(r);i||Mw.set(r,i=new Map);let s=i.get(t);s||i.set(t,s=W2()),eY(s)}}function eY(r,e){let t=!1;Ep<=Bw?K2(r)||(r.n|=Tu,t=!$2(r)):t=!r.has(oa),t&&(r.add(oa),oa.deps.push(r))}function Pu(r,e,t,i,s,n){const o=Mw.get(r);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&xu(r)){const l=Number(i);o.forEach((u,d)=>{(d==="length"||d>=l)&&a.push(u)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":xu(r)?uk(t)&&a.push(o.get("length")):(a.push(o.get(Mc)),mx(r)&&a.push(o.get(Lw)));break;case"delete":xu(r)||(a.push(o.get(Mc)),mx(r)&&a.push(o.get(Lw)));break;case"set":mx(r)&&a.push(o.get(Mc));break}if(a.length===1)a[0]&&KD(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);KD(W2(l))}}function KD(r,e){const t=xu(r)?r:[...r];for(const i of t)i.computed&&XD(i);for(const i of t)i.computed||XD(i)}function XD(r,e){(r!==oa||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const tY=GX("__proto__,__v_isRef,__isVue"),Y2=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(lk)),rY=q2(),iY=q2(!0),YD=nY();function nY(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=qr(this);for(let n=0,o=this.length;n<o;n++)oo(i,"get",n+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(qr)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){JX();const i=qr(this)[e].apply(this,t);return ZX(),i}}),r}function sY(r){const e=qr(this);return oo(e,"has",r),e.hasOwnProperty(r)}function q2(r=!1,e=!1){return function(i,s,n){if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&n===(r?e?EY:Z2:e?vY:J2).get(i))return i;const o=xu(i);if(!r){if(o&&pv(YD,s))return Reflect.get(YD,s,n);if(s==="hasOwnProperty")return sY}const a=Reflect.get(i,s,n);return(lk(s)?Y2.has(s):tY(s))||(r||oo(i,"get",s),e)?a:Sp(a)?o&&uk(s)?a:a.value:gv(a)?r?eF(a):al(a):a}}const oY=aY();function aY(r=!1){return function(t,i,s,n){let o=t[i];if(Uw(o)&&Sp(o)&&!Sp(s))return!1;if(!r&&(!AY(s)&&!Uw(s)&&(o=qr(o),s=qr(s)),!xu(t)&&Sp(o)&&!Sp(s)))return o.value=s,!0;const a=xu(t)&&uk(i)?Number(i)<t.length:pv(t,i),l=Reflect.set(t,i,s,n);return t===qr(n)&&(a?j2(s,o)&&Pu(t,"set",i,s):Pu(t,"add",i,s)),l}}function lY(r,e){const t=pv(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&Pu(r,"delete",e,void 0),i}function uY(r,e){const t=Reflect.has(r,e);return(!lk(e)||!Y2.has(e))&&oo(r,"has",e),t}function cY(r){return oo(r,"iterate",xu(r)?"length":Mc),Reflect.ownKeys(r)}const hY={get:rY,set:oY,deleteProperty:lY,has:uY,ownKeys:cY},dY={get:iY,set(r,e){return!0},deleteProperty(r,e){return!0}},ck=r=>r,mv=r=>Reflect.getPrototypeOf(r);function Am(r,e,t=!1,i=!1){r=r.__v_raw;const s=qr(r),n=qr(e);t||(e!==n&&oo(s,"get",e),oo(s,"get",n));const{has:o}=mv(s),a=i?ck:t?dk:hk;if(o.call(s,e))return a(r.get(e));if(o.call(s,n))return a(r.get(n));r!==s&&r.get(e)}function bm(r,e=!1){const t=this.__v_raw,i=qr(t),s=qr(r);return e||(r!==s&&oo(i,"has",r),oo(i,"has",s)),r===s?t.has(r):t.has(r)||t.has(s)}function km(r,e=!1){return r=r.__v_raw,!e&&oo(qr(r),"iterate",Mc),Reflect.get(r,"size",r)}function qD(r){r=qr(r);const e=qr(this);return mv(e).has.call(e,r)||(e.add(r),Pu(e,"add",r,r)),this}function QD(r,e){e=qr(e);const t=qr(this),{has:i,get:s}=mv(t);let n=i.call(t,r);n||(r=qr(r),n=i.call(t,r));const o=s.call(t,r);return t.set(r,e),n?j2(e,o)&&Pu(t,"set",r,e):Pu(t,"add",r,e),this}function JD(r){const e=qr(this),{has:t,get:i}=mv(e);let s=t.call(e,r);s||(r=qr(r),s=t.call(e,r)),i&&i.call(e,r);const n=e.delete(r);return s&&Pu(e,"delete",r,void 0),n}function ZD(){const r=qr(this),e=r.size!==0,t=r.clear();return e&&Pu(r,"clear",void 0,void 0),t}function Tm(r,e){return function(i,s){const n=this,o=n.__v_raw,a=qr(o),l=e?ck:r?dk:hk;return!r&&oo(a,"iterate",Mc),o.forEach((u,d)=>i.call(s,l(u),l(d),n))}}function Pm(r,e,t){return function(...i){const s=this.__v_raw,n=qr(s),o=mx(n),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=s[r](...i),d=t?ck:e?dk:hk;return!e&&oo(n,"iterate",l?Lw:Mc),{next(){const{value:f,done:g}=u.next();return g?{value:f,done:g}:{value:a?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function Kl(r){return function(...e){return r==="delete"?!1:this}}function fY(){const r={get(n){return Am(this,n)},get size(){return km(this)},has:bm,add:qD,set:QD,delete:JD,clear:ZD,forEach:Tm(!1,!1)},e={get(n){return Am(this,n,!1,!0)},get size(){return km(this)},has:bm,add:qD,set:QD,delete:JD,clear:ZD,forEach:Tm(!1,!0)},t={get(n){return Am(this,n,!0)},get size(){return km(this,!0)},has(n){return bm.call(this,n,!0)},add:Kl("add"),set:Kl("set"),delete:Kl("delete"),clear:Kl("clear"),forEach:Tm(!0,!1)},i={get(n){return Am(this,n,!0,!0)},get size(){return km(this,!0)},has(n){return bm.call(this,n,!0)},add:Kl("add"),set:Kl("set"),delete:Kl("delete"),clear:Kl("clear"),forEach:Tm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=Pm(n,!1,!1),t[n]=Pm(n,!0,!1),e[n]=Pm(n,!1,!0),i[n]=Pm(n,!0,!0)}),[r,t,e,i]}const[_Y,pY,gY,mY]=fY();function Q2(r,e){const t=e?r?mY:gY:r?pY:_Y;return(i,s,n)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?i:Reflect.get(pv(t,s)&&s in i?t:i,s,n)}const xY={get:Q2(!1,!1)},yY={get:Q2(!0,!1)},J2=new WeakMap,vY=new WeakMap,Z2=new WeakMap,EY=new WeakMap;function SY(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wY(r){return r.__v_skip||!Object.isExtensible(r)?0:SY(WX(r))}function al(r){return Uw(r)?r:tF(r,!1,hY,xY,J2)}function eF(r){return tF(r,!0,dY,yY,Z2)}function tF(r,e,t,i,s){if(!gv(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const n=s.get(r);if(n)return n;const o=wY(r);if(o===0)return r;const a=new Proxy(r,o===2?i:t);return s.set(r,a),a}function Uw(r){return!!(r&&r.__v_isReadonly)}function AY(r){return!!(r&&r.__v_isShallow)}function qr(r){const e=r&&r.__v_raw;return e?qr(e):r}const hk=r=>gv(r)?al(r):r,dk=r=>gv(r)?eF(r):r;function Sp(r){return!!(r&&r.__v_isRef===!0)}function rF(r){if(xv(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],s=O0(i)?PY(i):rF(i);if(s)for(const n in s)e[n]=s[n]}return e}else{if(O0(r))return r;if(yv(r))return r}}const bY=/;(?![^(]*\))/g,kY=/:([^]+)/,TY=/\/\*.*?\*\//gs;function PY(r){const e={};return r.replace(TY,"").split(bY).forEach(t=>{if(t){const i=t.split(kY);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function iF(r){let e="";if(O0(r))e=r;else if(xv(r))for(let t=0;t<r.length;t++){const i=iF(r[t]);i&&(e+=i+" ")}else if(yv(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const RY=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},DY=Object.prototype.hasOwnProperty,CY=(r,e)=>DY.call(r,e),xv=Array.isArray,O0=r=>typeof r=="string",yv=r=>r!==null&&typeof r=="object",OY=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},NY=/-(\w)/g,IY=OY(r=>r.replace(NY,(e,t)=>t?t.toUpperCase():""));let Gw=!1;const Ty=[],FY=Promise.resolve(),fk=r=>FY.then(r),MY=r=>{Ty.includes(r)||Ty.push(r),Gw||(Gw=!0,fk(BY))},BY=()=>{for(const r of Ty)r();Ty.length=0,Gw=!1},LY=/^(spellcheck|draggable|form|list|type)$/,Hw=({el:r,get:e,effect:t,arg:i,modifiers:s})=>{let n;i==="class"&&(r._class=r.className),t(()=>{let o=e();if(i)s!=null&&s.camel&&(i=IY(i)),tS(r,i,o,n);else{for(const a in o)tS(r,a,o[a],n&&n[a]);for(const a in n)(!o||!(a in o))&&tS(r,a,null)}n=o})},tS=(r,e,t,i)=>{if(e==="class")r.setAttribute("class",iF(r._class?[r._class,t]:t)||"");else if(e==="style"){t=rF(t);const{style:s}=r;if(!t)r.removeAttribute("style");else if(O0(t))Ue();else{for(const n in t)zw(s,n,t[n]);if(i&&!O0(i))for(const n in i)t[n]==null&&zw(s,n,"")}}else!(r instanceof SVGElement)&&e in r&&!LY.test(e)?(r[e]=t,e==="value"&&(r._value=t)):e==="true-value"?r._trueValue=t:e==="false-value"?r._falseValue=t:t!=null?r.setAttribute(e,t):r.removeAttribute(e)},UY=/\s*!important$/,zw=(r,e,t)=>{xv(t)?t.forEach(i=>zw(r,e,i)):e.startsWith("--")?r.setProperty(e,t):UY.test(t)?Ue():Reflect.set(r,e,t)},GY=({el:r,get:e,effect:t})=>{const i=r.style.display;t(()=>{r.style.display=e()?i:"none"})},nF=({el:r,get:e,effect:t})=>{t(()=>{const i=sF(e());if(i)r.textContent=i;else{const s=r.AsElement().AsHTMLElement();s||Ue();const{firstChild:n}=s;if(!(n&&n.nodeValue===Oc.kTagName)){r.textContent="";const o=r.GetDocument().createElement(Oc.kTagName);o.setAttribute(ny,tb.TrailingBreak),s.appendChild(o)}}})},sF=r=>r==null?"":yv(r)?JSON.stringify(r,null,2):String(r),HY=({el:r,get:e,effect:t})=>{t(()=>{Ue()})},zY=({el:r,exp:e,get:t,effect:i,modifiers:s})=>{r.type,t(`(val) => { ${e} = val }`)},eC=Object.create(null),wd=(r,e,t)=>oF(r,`return(${e})`,t),oF=(r,e,t)=>{const i=eC[e]||(eC[e]=jY(e));try{return i(r,t)}catch(s){_i(rn,`Error when evaluating expression "${e}":`),console.error(s)}},jY=r=>{try{return new Function("$data","$el",`with($data){${r}}`)}catch(e){return console.error(`${e.message} in expression: ${r}`),()=>{}}},VY=({el:r,ctx:e,exp:t,effect:i})=>{fk(()=>i(()=>oF(e.scope,t,r)))},WY={bind:Hw,show:GY,text:nF,html:HY,model:zY,effect:VY};class aF extends PN{constructor(t,i,s){var e=(...args)=>{super(...args);c(this,"data_")};Q(t==Is.kCreateOther||t==Is.kCreateText||t==Is.kCreateEditingText),ao(i)?(e(t),this.data_=i):(e(t,i),this.data_=s)}get nodeValue(){return this.data_}set nodeValue(t){t?this.set_data(t):this.set_data("")}text_content(){return this.data_}set_text_content(t){t?this.set_data(t):this.set_data("")}get data(){return this.data_}set_data(t){var i;this.data_=t,this.InvalidateLayoutBoxesOfNodeAndAncestors(),(i=this.GetDocument())==null||i.OnDOMMutation()}text(){return this.data_}AsCharacterData(){return this}length(){return this.data_.length}}class vv extends aF{constructor(e,t){ao(e)?super(Is.kCreateText,e):super(Is.kCreateText,e,t)}get nodeName(){return"#text"}getNodeType(){return So.kTextNode}AsText(){return this}Accept(e){e.VisitText(this)}Duplicate(){let e=new vv(this.data);return e.node_document_=this.node_document_,e}}const $Y=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,tC=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,KY=/^\(|\)$/g,XY=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,YY=(r,e,t)=>{const i=e.match($Y);if(!i){_i(rn,`invalid v-for expression: ${e}`);return}const s=r.nextSibling,n=r.parentElement,o=new vv("");Reflect.set(o,"$anchor",!0),n.insertBefore(o,r),n.removeChild(r);const a=i[2].trim();let l=i[1].trim().replace(KY,"").trim(),u,d=!1,f,g,x="key",E=r.getAttribute(x)||r.getAttribute(x=":key")||r.getAttribute(x="v-bind:key");E&&(r.removeAttribute(x),x==="key"&&(E=JSON.stringify(E)));let P;(P=l.match(tC))&&(l=l.replace(tC,"").trim(),f=P[1].trim(),P[2]&&(g=P[2].trim())),(P=l.match(XY))&&(u=P[1].split(",").map(V=>V.trim()),d=l[0]==="[");let b=!1,R,D,C;const I=V=>{const O=new Map,W=[];if(xv(V))for(let q=0;q<V.length;q++)W.push(H(O,V[q],q));else if(typeof V=="number")for(let q=0;q<V;q++)W.push(H(O,q+1,q));else if(yv(V)){let q=0;for(const re in V)W.push(H(O,V[re],q++,re))}return[W,O]},H=(V,O,W,q)=>{const re={};u?u.forEach((Oe,He)=>re[Oe]=O[d?He:Oe]):re[l]=O,q?(f&&(re[f]=q),g&&(re[g]=W)):f&&(re[f]=W);const fe=jw(t,re),he=E?wd(fe.scope,E):W;return V.set(he,W),fe.key=he,fe},N=(V,O)=>{let W=r.getAttribute("v-scope"),q;const re=O==null?void 0:O.previousSibling,he=re&&re.IsElement()&&re.parentNode===n&&Reflect.get(re,"pmViewDesc")&&re;if(W||r.hasAttribute("v-scope")){const He=W?wd(V.scope,W):{};V=jw(V,He),He.$template&&(q=He.$template(he).AsElement())}const Oe=new pk(q||r,V);return Oe.key=V.key,!he&&Oe.insert(n,O),Oe};return t.effect(()=>{const V=wd(t.scope,a),O=C;if([D,C]=I(V),!b)R=D.map(W=>N(W,o)),b=!0;else{for(let he=0;he<R.length;he++)C.has(R[he].key)||R[he].remove();const W=[];let q=D.length,re,fe;for(;q--;){const he=D[q],Oe=O.get(he.key);let He;Oe==null?He=N(he,re?re.el:o):(He=R[Oe],Object.assign(He.ctx.scope,he.scope),Oe!==q&&(R[Oe+1]!==re||fe===re)&&(fe=He,He.insert(n,re?re.el:o))),W.unshift(re=He)}R=W}}),s},Yp=(r,e)=>{const t=r.getAttribute(e);return t!=null&&r.removeAttribute(e),t};class _k extends aF{constructor(e,t){ao(e)?super(Is.kCreateOther,e):super(Is.kCreateOther,e,t)}get nodeName(){return"#comment"}getNodeType(){return So.kCommentNode}AsComment(){return this}Accept(e){e.VisitComment(this)}Duplicate(){let e=new _k(this.data);return e.node_document_=this.node_document_,e}}const qY=(r,e,t)=>{_i(rn,"v-if expression cannot be empty.");const i=r.parentElement,s=new _k("v-if");i.insertBefore(s,r);const n=[{exp:e,el:r}];let o,a;for(;(o=r.nextElementSibling)&&(a=null,Yp(o,"v-else")===""||(a=Yp(o,"v-else-if")));)i.removeChild(o),n.push({exp:a,el:o});const l=r.nextSibling;i.removeChild(r);let u,d=-1;const f=()=>{u&&(i.insertBefore(s,u.el),u.remove(),u=void 0)};return t.effect(()=>{for(let g=0;g<n.length;g++){const{exp:x,el:E}=n[g];if(!x||wd(t.scope,x)){g!==d&&(f(),u=new pk(E,t),u.insert(i,s),i.removeChild(s),d=g);return}}d=-1,f()}),l},QY=({el:r,ctx:{scope:{$refs:e}},get:t,effect:i})=>{let s;return i(()=>{const n=t();e[n]=r,s&&n!==s&&delete e[s],s=n}),()=>{s&&delete e[s]}},JY=/^(?:v-|:|@)/,ZY=/\.([\w-]+)/g,lF=(r,e)=>{const t=r.nodeType;if(t===So.kElementNode){let i,s=r;if(i=Yp(s,"v-if"))return qY(s,i,e);if(i=Yp(s,"v-for"))return YY(s,i,e);if((i=Yp(s,"v-scope"))||i===""){const o=i?wd(e.scope,i):{};e=jw(e,o),o.$template&&s.appendChild(o.$template())}eq(s,e);const n=[];for(const[o,a]of[...s.attributes])JY.test(o)&&o!=="v-cloak"&&(o==="v-model"?n.unshift([o,a]):o[0]==="@"||/^v-on\b/.test(o)?n.push([o,a]):rC(s,o,a,e));for(const[o,a]of n)rC(s,o,a,e)}else if(t===So.kTextNode){const i=r.data;if(i.includes(e.delimiters[0])){let s=[],n=0,o;for(;o=e.delimitersRE.exec(i);){const a=i.slice(n,o.index);a&&s.push(JSON.stringify(a)),s.push(`$s(${o[1]})`),n=o.index+o[0].length}n<i.length&&s.push(JSON.stringify(i.slice(n))),uF(r,nF,s.join("+"),e)}}},eq=(r,e)=>{let t=r.firstChild;for(;t;)t=lF(t,e)||t.nextSibling},rC=(r,e,t,i)=>{let s,n,o;if(e=e.replace(ZY,(a,l)=>((o||(o={}))[l]=!0,"")),e[0]===":")s=Hw,n=e.slice(1);else{const a=e.indexOf(":"),l=a>0?e.slice(2,a):e.slice(2);s=WY[l]||i.dirs[l],n=a>0?e.slice(a+1):void 0}s?(s===Hw&&n==="ref"&&(s=QY),uF(r,s,t,i,n,o),r.removeAttribute(e)):_i(Rp,`unknown custom directive ${e}.`)},uF=(r,e,t,i,s,n)=>{const a=e({el:r,get:(l=t)=>wd(i.scope,l,r),effect:i.effect,ctx:i,exp:t,arg:s,modifiers:n});a&&i.cleanups.push(a)},cF=r=>{const e={...r,scope:r?r.scope:al({}),dirs:r?r.dirs:{},effects:[],blocks:[],cleanups:[],delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g,effect:t=>{const i=qX(t,{scheduler:()=>MY(i)});return e.effects.push(i),i}};return e},jw=(r,e={})=>{const t=r.scope,i=Object.create(t);Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),i.$refs=Object.create(t.$refs);const s=al(new Proxy(i,{set(n,o,a,l){return l===s&&!CY(n,o)?Reflect.set(t,o,a):Reflect.set(n,o,a,l)}}));return{...r,scope:s}};class pk{constructor(e,t,i=!1){c(this,"template");c(this,"ctx");c(this,"key");c(this,"parentCtx");c(this,"start");c(this,"end");this.template=e,i?this.ctx=t:(this.parentCtx=t,t.blocks.push(this),this.ctx=cF(t)),lF(this.template,this.ctx)}get el(){return this.start||this.template}insert(e,t){e.insertBefore(this.template,t)}remove(){var e;if(this.parentCtx&&RY(this.parentCtx.blocks,this),this.start){const t=this.start.parentNode;let i=this.start,s;for(;i&&(s=i.nextSibling,t.removeChild(i),i!==this.end);)i=s}else!this.template.parentNode&&Reflect.has(this.template,"pmViewDesc")||(e=this.template.parentNode)==null||e.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach(e=>{e.teardown()}),this.ctx.effects.forEach(QX),this.ctx.cleanups.forEach(e=>e())}}const tq=r=>{const e=cF();r&&(e.scope=al(r)),e.scope.$s=sF,e.scope.$nextTick=fk,e.scope.$refs=Object.create(null);let t;return{directive(i,s){return s?(e.dirs[i]=s,this):e.dirs[i]},mount(i){return t=[i].map(n=>new pk(n,e,!0)),this},unmount(){t.forEach(i=>i.teardown())}}};function rq(r,e){var u;const t=e.createElement("body");Object.assign(t.style,{display:"block",position:"relative"});const i=e.createElement("div");i.setAttribute("v-for","child in vm.children"),i.setAttribute("v-scope","getComponent(child)"),i.setAttribute("v-bind:key","child.id"),t.appendChild(i),t.setAttribute(Ac,r.root.value.id),(u=e.html())==null||u.appendChild(t),Reflect.set(window,"test",()=>{var d;console.log((d=e.html())==null?void 0:d.inner_html())});const s=(d,f="")=>{if(Fw(d))return o(d,f);if(UX(d))return a(d,f);Ue()},n=d=>({vm:d,getComponent:s}),o=(d,f="")=>{const g=d.isFragmentPlaceholder?`${f}/${d.id}`:f;return{vm:d,scope:f,scopeOfChild:g,$template:()=>{const x=e.createElement("div");x.setAttribute(`v-bind:${Ac}`,"vm.id"),x.setAttribute(`v-bind:${ny}`,"vm.type"),x.setAttribute(`v-bind:${ew}`,"scope"),x.setAttribute(`v-bind:${SN}`,'vm.fragment ? vm.fragment.id : ""'),x.setAttribute("v-bind:style","vm.style");const E=e.createElement("div");return E.setAttribute("v-for","child in vm.children"),E.setAttribute("v-scope","getComponent(child, scopeOfChild)"),E.setAttribute("v-bind:key","child.id"),x.appendChild(E),x},getComponent:s}},a=(d,f="")=>({vm:d,scope:f,nodeType:hi.Text,$template:g=>{g&&Kt(g.tagName,ko.kTagName);const x=g||e.createElement(ko.kTagName);return x.setAttribute(`v-bind:${Ac}`,"vm.id"),x.setAttribute(`v-bind:${ny}`,"nodeType"),x.setAttribute(`v-bind:${ew}`,"scope"),x.setAttribute("v-bind:style","vm.style"),x.setAttribute("v-text","vm.content"),x}});let l=tq(n(r.root.value)).mount(e.body());return nn(()=>l.unmount())}const Ky=class extends Tn{constructor(e){e?super(e,Ky.kTagName):super(Ky.kTagName)}};let xx=Ky;c(xx,"kTagName","span");const xT=class extends Tn{constructor(e){super(e,xT.kTagName)}};let yx=xT;c(yx,"kTagName","em");const yT=class extends Tn{constructor(e){super(e,yT.kTagName)}};let vx=yT;c(vx,"kTagName","strong");const vT=class extends Tn{constructor(e){super(e,vT.kTagName)}};let Ex=vT;c(Ex,"kTagName","html");const ET=class extends Tn{constructor(e){super(e,ET.kTagName)}AsHTMLBodyElement(){return this}};let Sx=ET;c(Sx,"kTagName","body");class hF extends Tn{}c(hF,"kTagNames",["h1","h2","h3","h4","h5","h6"]);const ST=class extends Tn{constructor(e){super(e,ST.kTagName)}};let wx=ST;c(wx,"kTagName","a");function Lg(r,e){return r*e}function iq(r,e){return r-e}function nq(r,e){return r+e}class pr{constructor(e=0){c(this,"delta_",0);this.delta_=As(e)}static FromDays(e){return sq(e)}static FromHours(e){return oq(e)}static FromMinutes(e){return aq(e)}static FromSeconds(e){return lq(e)}static FromMilliseconds(e){return uq(e)}static FromMicroseconds(e){return Vw(e)}static Max(){return new pr(Number.MAX_SAFE_INTEGER)}static Min(){return new pr(Number.MIN_SAFE_INTEGER)}static FromInternalValue(e){return new pr(e)}is_max(){return this.EQ(pr.Max())}is_min(){return this.EQ(pr.Min())}is_inf(){return this.is_min()||this.is_max()}DivideOrMax(e){return this.is_max()?Number.MAX_VALUE:this.delta_/e}InMicroseconds(){return this.delta_}InMilliseconds(){return this.is_inf()?this.delta_<0?Number.MIN_VALUE:Number.MAX_VALUE:this.delta_/dF.kMicrosecondsPerMillisecond}InSeconds(){return this.DivideOrMax(Wr.kMicrosecondsPerSecond)}SUB(e){return e.is_inf()?(this.delta_,e.delta_,e.delta_<0?pr.Max():pr.Min()):new pr(iq(this.delta_,e.delta_))}ADD(e){return e.is_inf()?(!this.is_inf()||this.delta_==e.delta_,e):new pr(nq(this.delta_,e.delta_))}EQ(e){return this.delta_==e.delta_}LT(e){return this.delta_<e.delta_}GT(e){return this.delta_>e.delta_}GE(e){return this.delta_>=e.delta_}}function sq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerDay))}function oq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerHour))}function aq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerMinute))}function lq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerSecond))}function uq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerMillisecond))}function Vw(r){return pr.FromInternalValue(r)}const Ur=class{constructor(e=0){c(this,"us_");this.us_=e}is_null(){return this.us_==0}is_max(){return this.EQ(Ur.Max())}is_min(){return this.EQ(Ur.Min())}is_inf(){return this.is_min()||this.is_max()}static Max(){return new Ur(Number.MAX_VALUE)}static Min(){return new Ur(Number.MIN_VALUE)}ToInternalValue(){return this.us_}ASSIGN(e){return this.us_=e.us_,this}ADD(e){return new Ur(this.us_+e.InMicroseconds())}SUB(e){if(e instanceof Ur)return Vw(this.us_-e.us_);if(e instanceof pr)return new Ur(Vw(this.us_).ADD(e).InMicroseconds());et()}ADD_ASSIGN(e){return this.ASSIGN(this.ADD(e))}SUB_ASSIGN(e){return this.ASSIGN(this.SUB(e))}EQ(e){return this.us_==e.us_}NE(e){return this.us_!=e.us_}LT(e){return this.us_<e.us_}LE(e){return this.us_<=e.us_}GT(e){return this.us_>e.us_}GE(e){return this.us_>=e.us_}};let Wr=Ur;c(Wr,"kHoursPerDay",24),c(Wr,"kSecondsPerMinute",60),c(Wr,"kMinutesPerHour",60),c(Wr,"kSecondsPerHour",Ur.kSecondsPerMinute*Ur.kMinutesPerHour),c(Wr,"kMillisecondsPerSecond",1e3),c(Wr,"kMillisecondsPerDay",Ur.kMillisecondsPerSecond*Ur.kSecondsPerHour*Ur.kHoursPerDay),c(Wr,"kMicrosecondsPerMillisecond",1e3),c(Wr,"kMicrosecondsPerSecond",Ur.kMicrosecondsPerMillisecond*Ur.kMillisecondsPerSecond),c(Wr,"kMicrosecondsPerMinute",Ur.kMicrosecondsPerSecond*Ur.kSecondsPerMinute),c(Wr,"kMicrosecondsPerHour",Ur.kMicrosecondsPerMinute*Ur.kMinutesPerHour),c(Wr,"kMicrosecondsPerDay",Ur.kMicrosecondsPerHour*Ur.kHoursPerDay),c(Wr,"kMicrosecondsPerWeek",Ur.kMicrosecondsPerDay*7),c(Wr,"kNanosecondsPerMicrosecond",1e3),c(Wr,"kNanosecondsPerSecond",Ur.kNanosecondsPerMicrosecond*Ur.kMicrosecondsPerSecond);class dF extends Wr{}class Si extends Wr{static Now(){return new Si(Date.now())}}class cq{constructor(e){this.toDispose=e}dispose(){this.toDispose.dispose()}}function hq(r){dq.register(r,new cq(r))}const dq=new FinalizationRegistry(r=>{r.dispose()});class fq{constructor(e){c(this,"timer_");hq(this),this.timer_=e}dispose(){this.timer_&&this.timer_.AbandonAndStop()}Run(){if(!this.timer_)return;this.timer_.scheduled_task_=void 0;let e=this.timer_;this.timer_=void 0,e.RunScheduledTask()}Abandon(){this.timer_=void 0}}class fF{constructor(e){c(this,"delay_");c(this,"desired_run_time_");c(this,"scheduled_task_");c(this,"is_running_",!1);c(this,"scheduled_run_time_");this.delay_=e}Stop(){this.is_running_=!1,this.OnStop()}IsRunning(){return this.is_running_}StartInternal(e){this.delay_=e,this.Reset()}AbandonAndStop(){this.AbandonScheduledTask(),this.Stop()}AbandonScheduledTask(){this.scheduled_task_&&(this.scheduled_task_.Abandon(),this.scheduled_task_=void 0)}RunScheduledTask(){if(!!this.is_running_){if(Q(this.desired_run_time_),this.desired_run_time_.GT(this.scheduled_run_time_)){let e=Si.Now();if(this.desired_run_time_.GT(e)){this.PostNewScheduledTask(this.desired_run_time_.SUB(e));return}}this.RunUserTask()}}PostNewScheduledTask(e){Q(!this.scheduled_task_),this.is_running_=!0,this.scheduled_task_=new fq(this),e.GT(pr.FromMilliseconds(0))?(setTimeout(()=>this.scheduled_task_.Run(),e.InMilliseconds()),this.scheduled_run_time_=this.desired_run_time_=Si.Now().ADD(e)):(setTimeout(()=>this.scheduled_task_.Run(),0),this.scheduled_run_time_=this.desired_run_time_=new Si)}Reset(){if(Q(this.delay_),!this.scheduled_task_){this.PostNewScheduledTask(this.delay_);return}if(this.delay_.GT(pr.FromMicroseconds(0))?this.desired_run_time_=Si.Now().ADD(this.delay_):this.desired_run_time_=new Si,this.desired_run_time_.GE(this.scheduled_run_time_)){this.is_running_=!0;return}this.AbandonScheduledTask(),this.PostNewScheduledTask(this.delay_)}GetCurrentDelay(){return this.delay_}}class _q extends fF{constructor(t,i){super(t);c(this,"user_task_");this.user_task_=i,t&&i&&i()}Start(t,i){i()}RunUserTask(){let t=this.user_task_;this.PostNewScheduledTask(this.GetCurrentDelay()),t&&t()}OnStop(){}}class _F extends fF{constructor(){super();c(this,"user_task_")}Start(t,i){this.user_task_=i,this.StartInternal(t)}FireNow(){Q(this.IsRunning()),this.RunUserTask()}OnStop(){this.user_task_=void 0}RunUserTask(){let t=this.user_task_;this.Stop(),Q(t),t()}}class pF{constructor(e,t,i){c(this,"cached_resource_");c(this,"success_callback_");c(this,"error_callback_");this.cached_resource_=e,this.success_callback_=t,this.error_callback_=i,Q(this.cached_resource_),this.success_callback_&&(this.cached_resource_.AddCallback(0,this.success_callback_),this.cached_resource_.HasResource()&&this.success_callback_()),this.error_callback_&&this.cached_resource_.AddCallback(1,this.error_callback_)}dispose(){this.success_callback_&&this.cached_resource_.RemoveCallback(0,this.success_callback_),this.error_callback_&&this.cached_resource_.RemoveCallback(1,this.error_callback_)}GetCachedResource(){return this.cached_resource_}}class pq{constructor(e,t,i,s,n,o,a,l){c(this,"owner_");c(this,"url_");c(this,"start_loading_func_");c(this,"on_retry_loading_");c(this,"are_loading_retries_enabled_func_");c(this,"on_resource_loaded_");c(this,"loader_");c(this,"callback_lists_",[[],[]]);c(this,"are_completion_callbacks_enabled_",!1);c(this,"completion_callback_");c(this,"is_resource_timing_created_flag_");c(this,"resource_");this.owner_=e,this.url_=t,this.start_loading_func_=s.bind(null,this),this.on_retry_loading_=n.bind(null,this),this.are_loading_retries_enabled_func_=a,this.on_resource_loaded_=l.bind(null,this),this.is_resource_timing_created_flag_=!1,this.resource_=i,i||this.StartLoading()}url(){return this.url_}IsLoadingComplete(){return!this.loader_}get_resource_timing_created_flag(){return this.is_resource_timing_created_flag_}set_resource_timing_created_flag(e){this.is_resource_timing_created_flag_=e}AddCallback(e,t){this.callback_lists_[e].push(t)}RemoveCallback(e,t){let i=this.callback_lists_[e],s=i.indexOf(t);Q(s!==-1),i.splice(s,1)}RunCallbacks(e){let t=this.callback_lists_[e];for(let i of t)i()}EnableCompletionCallbacks(){this.are_completion_callbacks_enabled_=!0,this.completion_callback_&&this.completion_callback_()}StartLoading(){Q(!this.loader_),this.loader_=this.start_loading_func_()}ScheduleLoadingRetry(){Ue()}OnLoadingComplete(e){e?(Ec(rn," Error while loading '",this.url_,"': ",e),this.HasResource()&&(Ec(rn,"A resource was produced but there was still an error."),this.ResetResource()),this.loader_=void 0,this.completion_callback_=this.on_resource_loaded_.bind(null,1),this.are_completion_callbacks_enabled_&&this.completion_callback_()):(this.loader_=void 0,this.completion_callback_=this.on_resource_loaded_.bind(null,0),this.are_completion_callbacks_enabled_&&this.completion_callback_())}TryGetResource(){return this.resource_}OnContentProduced(e){Q(!this.resource_),this.resource_=e}HasResource(){return!!this.resource_}ResetResource(){this.resource_=void 0}}class gq{constructor(e,t,i){c(this,"cached_resource_loaded_callback_handler_");this.cached_resource_loaded_callback_handler_=new pF(e,t,i)}GetCachedResource(){return this.cached_resource_loaded_callback_handler_.GetCachedResource()}}class mq{constructor(e,t){this.cached_resource=e,this.callback_type=t}}class gF{constructor(e,t,i,s,n){c(this,"name_");c(this,"are_loading_retries_enabled_");c(this,"cache_capacity_");c(this,"callback_blocking_loading_resource_set_",new Set);c(this,"non_callback_blocking_loading_resource_set_",new Set);c(this,"pending_callback_map_",new Map);c(this,"process_pending_callback_timer_",new _F);c(this,"is_processing_pending_callbacks_",!1);c(this,"are_callbacks_disabled_",!1);c(this,"memory_size_in_bytes_");c(this,"memory_capacity_in_bytes_");c(this,"memory_resources_loaded_in_bytes_");c(this,"count_resources_requested_");c(this,"count_resources_loading_");c(this,"count_resources_loaded_");c(this,"count_resources_cached_");c(this,"count_pending_callbacks_");c(this,"create_loader_function_");c(this,"notify_resource_requested_function_");c(this,"cached_resource_map_",new Map);c(this,"unreferenced_cached_resource_map_",new Map);this.name_=e,this.are_loading_retries_enabled_=i,this.cache_capacity_=t,this.memory_size_in_bytes_=0,this.memory_capacity_in_bytes_=this.cache_capacity_,this.memory_resources_loaded_in_bytes_=0,this.count_resources_requested_=0,this.count_resources_loading_=0,this.count_resources_loaded_=0,this.count_resources_cached_=0,this.count_pending_callbacks_=0,this.create_loader_function_=s,this.notify_resource_requested_function_=n,Q(this.create_loader_function_)}NotifyResourceLoadingRetryScheduled(e){Ue()}ReclaimMemoryAndMaybeProcessPendingCallbacks(e){this.ReclaimMemory(e,!1),this.memory_size_in_bytes_>e&&(this.ProcessPendingCallbacks(),this.ReclaimMemory(e,!0))}ProcessPendingCallbacksIfUnblocked(){if(this.callback_blocking_loading_resource_set_.size===0){if(this.ProcessPendingCallbacks(),this.non_callback_blocking_loading_resource_set_.size){let e=this.callback_blocking_loading_resource_set_;this.callback_blocking_loading_resource_set_=this.non_callback_blocking_loading_resource_set_,this.non_callback_blocking_loading_resource_set_=e}}else this.pending_callback_map_.size&&this.process_pending_callback_timer_.Start(pr.FromMilliseconds(500),this.ProcessPendingCallbacks.bind(this))}are_loading_retries_enabled(){return this.are_loading_retries_enabled_}capacity(){return this.cache_capacity_}SetCapacity(e){this.cache_capacity_=e,this.memory_capacity_in_bytes_=e,this.ReclaimMemoryAndMaybeProcessPendingCallbacks(this.cache_capacity_)}Purge(){this.ProcessPendingCallbacks(),this.ReclaimMemoryAndMaybeProcessPendingCallbacks(0)}ProcessPendingCallbacks(){if(!this.are_callbacks_disabled_){this.is_processing_pending_callbacks_=!0;for(let[e,t]of this.pending_callback_map_)t.cached_resource.RunCallbacks(t.callback_type),this.pending_callback_map_.delete(e);this.is_processing_pending_callbacks_=!1,this.count_pending_callbacks_=0}}DisableCallbacks(){this.are_callbacks_disabled_=!0}GetOrCreateCachedResource(e){Q(e),this.notify_resource_requested_function_&&this.notify_resource_requested_function_(e);for(let[i,s]of this.cached_resource_map_)if(i===e)return s;++this.count_resources_requested_;let t=new pq(this,e,void 0,this.StartLoadingResource.bind(this),this.NotifyResourceLoadingRetryScheduled.bind(this),this.NotifyResourceDestroyed.bind(this),this.are_loading_retries_enabled.bind(this),this.NotifyResourceLoadingComplete.bind(this));return this.cached_resource_map_.set(e,t),t.EnableCompletionCallbacks(),t}StartLoadingResource(e){let t=e.url();return this.pending_callback_map_.size===0?this.callback_blocking_loading_resource_set_.add(t):this.non_callback_blocking_loading_resource_set_.add(t),++this.count_resources_loading_,this.create_loader_function_(e.url(),e.OnContentProduced.bind(e),e.OnLoadingComplete.bind(e))}NotifyResourceLoadingComplete(e,t){const i=e.url();if(e.TryGetResource()){let n=e.TryGetResource().GetEstimatedSizeInBytes();this.memory_size_in_bytes_+=n,this.memory_resources_loaded_in_bytes_+=n,++this.count_resources_loaded_,++this.count_resources_cached_}this.callback_blocking_loading_resource_set_.has(i)?(this.callback_blocking_loading_resource_set_.delete(i),Q(!this.non_callback_blocking_loading_resource_set_.has(i))):this.non_callback_blocking_loading_resource_set_.has(i)?this.non_callback_blocking_loading_resource_set_.delete(i):Q(!1),this.pending_callback_map_.set(i,new mq(e,t)),++this.count_pending_callbacks_,--this.count_resources_loading_,this.ProcessPendingCallbacksIfUnblocked(),this.ReclaimMemoryAndMaybeProcessPendingCallbacks(this.cache_capacity_)}NotifyResourceDestroyed(e){Ue()}NotifyWeakResourceDestroyed(e){Ue()}ReclaimMemory(e,t){let i=[this.unreferenced_cached_resource_map_];for(let s=0;s<i.length;++s)for(;this.memory_size_in_bytes_>e&&i[s].size;){let o=Array.from(i[s].keys())[0],l=i[s].get(o).GetEstimatedSizeInBytes();i[s].delete(o),this.memory_size_in_bytes_-=l,--this.count_resources_cached_}t&&nB(rn,this.memory_size_in_bytes_>e,"cached size: ",this.memory_size_in_bytes_,", target size: ",e)}}const wT=class extends Tn{constructor(t){super(t,wT.kTagName);c(this,"cached_image_");c(this,"cached_image_loaded_callback_handler_")}src(){return this.getAttribute("src")||""}set_src(t){this.setAttribute("src",t)}AsHTMLImageElement(){return this}PurgeCachedBackgroundImagesOfNodeAndDescendants(){!this.cached_image_loaded_callback_handler_||this.OnLoadingError()}OnSetAttribute(t,i){t=="src"?this.UpdateImageData():Tn.prototype.OnSetAttribute.call(this,t,i)}OnRemoveAttribute(t){t=="src"?this.UpdateImageData():Tn.prototype.OnRemoveAttribute.call(this,t)}UpdateImageData(){Q(this.GetDocument()),this.cached_image_loaded_callback_handler_&&(this.cached_image_loaded_callback_handler_=void 0,this.GetDocument().DecreaseLoadingCounter());let i=this.getAttribute("src")||"",s;if(i){let n=i;if(s=this.GetDocument().html_element_context().image_cache().GetOrCreateCachedResource(n),Q(s),this.cached_image_=s,s.TryGetResource())return}else return;this.GetDocument().IncreaseLoadingCounter(),this.cached_image_loaded_callback_handler_=new pF(s,this.OnLoadingSuccess.bind(this),this.OnLoadingError.bind(this))}OnLoadingSuccess(){this.GetDocument()&&this.GetDocument().DecreaseLoadingCounterAndMaybeDispatchLoadEvent(),this.cached_image_loaded_callback_handler_=void 0}OnLoadingError(){this.GetDocument()&&this.GetDocument().DecreaseLoadingCounterAndMaybeDispatchLoadEvent(),this.cached_image_loaded_callback_handler_=void 0}GetResource(){var t;return(t=this.cached_image_)==null?void 0:t.TryGetResource()}};let Ax=wT;c(Ax,"kTagName","img");class xq{constructor(e,t,i){this.d=e,this.fill=t,this.stroke=i}}function Xl(r){Rr(0,r),Wn(1,r)}class hh{constructor(e=0,t=0,i=0,s=0){c(this,"r_");c(this,"g_");c(this,"b_");c(this,"a_");if(arguments.length===1){let n=e;this.a_=(n&255)/255,n>>=8,this.b_=(n&255)/255,n>>=8,this.g_=(n&255)/255,n>>=8,this.r_=(n&255)/255}else Xl(e),this.r_=e,Xl(t),this.g_=t,Xl(i),this.b_=i,Xl(s),this.a_=s}HasAlpha(){return this.a_<1}set_r(e){Xl(e),this.r_=e}set_g(e){Xl(e),this.g_=e}set_b(e){Xl(e),this.b_=e}set_a(e){Xl(e),this.a_=e}r(){return am(this.r_,0,1)}g(){return am(this.g_,0,1)}b(){return am(this.b_,0,1)}a(){return am(this.a_,0,1)}rgb8_r(){return Math.round(this.r()*255)}rgb8_g(){return Math.round(this.g()*255)}rgb8_b(){return Math.round(this.b()*255)}rgb8_a(){return Math.round(this.a()*255)}EQ(e){let t=this;return t.r()==e.r()&&t.g()==e.g()&&t.b()==e.b()&&t.a()==e.a()}CLONE(){return new hh(this.r(),this.g(),this.b(),this.a())}}const Xy=class extends Tn{constructor(e){e?super(e,Xy.kTagName):super(Xy.kTagName)}AsFreehandElement(){return this}Accept(e){e.VisitElement(this)}GetPath(){var o;const e=(o=this.getAttribute("d"))!=null?o:"",t=this.getAttribute("fill"),i=this.getAttribute("stroke");let s,n;if(t){const a=En.fromHex(t);if(a){const l=a.rgba;s=new hh(l.r,l.g,l.b,l.a)}}if(i){const a=En.fromHex(i);if(a){const l=a.rgba;n=new hh(l.r,l.g,l.b,l.a)}}return new xq(e,s,n)}};let qp=Xy;c(qp,"kTagName","x-freehand");class yq{constructor(){c(this,"tag_name_to_create_html_element_t_callback_map_",new Map);this.RegisterHTMLElementWithSingleTagName(wx),this.RegisterHTMLElementWithSingleTagName(Sd),this.RegisterHTMLElementWithSingleTagName(ko),this.RegisterHTMLElementWithSingleTagName(xx),this.RegisterHTMLElementWithSingleTagName(yx),this.RegisterHTMLElementWithSingleTagName(vx),this.RegisterHTMLElementWithSingleTagName(Ex),this.RegisterHTMLElementWithSingleTagName(Sx),this.RegisterHTMLElementWithSingleTagName(Ax),this.RegisterHTMLElementWithSingleTagName(Oc),this.RegisterHTMLElementWithSingleTagName(qp),this.RegisterHTMLElementWithMultipleTagName(hF)}CreateElement(e,t){let i=this.tag_name_to_create_html_element_t_callback_map_.get(t);if(i)return i(e);Ue()}RegisterHTMLElementWithSingleTagName(e){this.tag_name_to_create_html_element_t_callback_map_.set(e.kTagName,vq.bind(null,e))}RegisterHTMLElementWithMultipleTagName(e){for(let t of e.kTagNames)this.tag_name_to_create_html_element_t_callback_map_.set(t,Eq.bind(null,e,t))}}function vq(r,e){return new r(e)}function Eq(r,e,t){return new r(t,e)}function Sq(r){let e=new Fg;return e.set_background_color(new kr(0)),e.set_display(_e.GetBlock()),e.set_is_inline_before_blockification(!1),e.set_width(new Qt(r.width(),Ft.kPixelsUnit)),e.set_height(new Qt(r.height(),Ft.kPixelsUnit)),e}class mF{}class xF extends mF{constructor(){super();c(this,"origin_");this.origin_=Si.Now()}Now(){return Si.Now().SUB(this.origin_)}}class yF extends mF{constructor(t,i){super();c(this,"parent_");c(this,"origin_");Q(t),this.parent_=t,this.origin_=i}Now(){return this.parent_.Now().SUB(this.origin_)}origin(){return this.origin_}}class wq{}var Jl=(r=>(r[r.kUnrequestedState=0]="kUnrequestedState",r[r.kLoadingWithTimerActiveState=1]="kLoadingWithTimerActiveState",r[r.kLoadingWithTimerExpiredState=2]="kLoadingWithTimerExpiredState",r[r.kLoadedState=3]="kLoadedState",r[r.kUnavailableState=4]="kUnavailableState",r[r.kDuplicateState=5]="kDuplicateState",r))(Jl||{});class Ww{constructor(){c(this,"state",0);c(this,"entry");c(this,"font")}}class iC{constructor(e){c(this,"family_name");c(this,"faces",[]);this.family_name=e}}class Aq{constructor(){c(this,"family_names",[]);c(this,"style",new C2);c(this,"size");this.size=0}LT(e){return this.size<e.size?!0:e.size<this.size?!1:this.style.weight<e.style.weight?!0:e.style.weight<this.style.weight?!1:this.style.slant<e.style.slant?!0:e.style.slant<this.style.slant?!1:this.family_names.length<e.family_names.length}}const bq=8230;class kq extends wq{constructor(t,i){super();c(this,"fallback_typeface_to_font_map_",new Map);c(this,"font_cache_");c(this,"fonts_",[]);c(this,"style_");c(this,"size_");c(this,"primary_font_");c(this,"is_font_metrics_set_");c(this,"font_metrics_");c(this,"is_space_width_set_");c(this,"space_width_");c(this,"is_ellipsis_info_set_");c(this,"ellipsis_font_");c(this,"ellipsis_width_");c(this,"character_fallback_typeface_map_");this.font_cache_=t,this.style_=i.style,this.size_=i.size,this.is_font_metrics_set_=!1,this.font_metrics_=new Cw(0,0,0,0),this.is_space_width_set_=!1,this.space_width_=0,this.is_ellipsis_info_set_=!1,this.ellipsis_width_=0,this.character_fallback_typeface_map_=this.font_cache_.GetCharacterFallbackTypefaceMap(this.style_);for(let o=0;o<i.family_names.length;++o){let a=new iC(i.family_names[o]);a.faces=this.font_cache_.GetFacesForFamilyAndStyle(a.family_name,this.style_),this.fonts_.push(a)}const s=new iC(H2),n=new Ww;s.faces=[n],this.fonts_.push(s)}dispose(){for(let t=0;t<this.fonts_.length;++t){let i=this.fonts_[t];for(let s of i.faces)s.state=0,s.font=void 0}this.primary_font_=void 0,this.is_font_metrics_set_=!1,this.is_space_width_set_=!1,this.is_ellipsis_info_set_=!1,this.ellipsis_font_=void 0,this.fallback_typeface_to_font_map_.clear()}ResetLoadingFonts(){let t=!1;for(let i=0;i<this.fonts_.length;++i){let s=this.fonts_[i];for(let n of s.faces)n.state==1||n.state==2?(n.state=0,t||(this.primary_font_=void 0,this.is_font_metrics_set_=!1,this.is_space_width_set_=!1,this.is_ellipsis_info_set_=!1,this.ellipsis_font_=void 0)):n.state==3&&(t=!0)}}IsVisible(){for(let t=0;t<this.fonts_.length;++t)for(let i of this.fonts_[t].faces)if(i.state==1)return!1;return!0}CreateGlyphBuffer(t,i,s,n){return this.font_cache_.CreateGlyphBuffer(t,i,s,n,this)}GetTextWidth(t,i,s,n,o){return this.font_cache_.GetTextWidth(t,i,s,n,this,o)}GetFontMetrics(t){if(!t)return this.is_font_metrics_set_||(this.is_font_metrics_set_=!0,this.font_metrics_=this.GetPrimaryFont().GetFontMetrics()),this.font_metrics_;let i=this.GetPrimaryFont().GetTypefaceId(),s=this.GetFontMetrics(),n=s.ascent(),o=s.descent(),a=s.leading(),l=s.x_height();for(let u=0;u<t.length;++u){if(t[u].GetTypefaceId()==i)continue;let d=t[u].GetFontMetrics();d.ascent()>n&&(n=d.ascent()),d.descent()>o&&(o=d.descent()),d.leading()>a&&(a=d.leading()),d.x_height()>l&&(l=d.x_height())}return new Cw(n,o,a,l)}GetEllipsisValue(){return bq}GetEllipsisFont(){return this.GenerateEllipsisInfo(),this.ellipsis_font_}GetEllipsisWidth(){return this.GenerateEllipsisInfo(),this.ellipsis_width_}GetSpaceWidth(){return this.GenerateSpaceWidth(),this.space_width_}style(){return this.style_}size(){return this.size_}GetCharacterFont(t){for(let i=0;i<this.fonts_.length;++i){let s=this.fonts_[i];for(let n of s.faces){const o=n.entry;if(!(o&&!nC(o.unicode_range,t))&&(n.state==0&&this.RequestFont(s.family_name,n),n.state==3)){let a=n.font.GetGlyphForCharacter(t);if(a!=Iw)return{font:n.font,glyph_index:a}}}}return this.GetFallbackCharacterFont(t)}GetFallbackCharacterFont(t){let i=this.character_fallback_typeface_map_.get(t);i||(i=this.font_cache_.GetCharacterFallbackTypeface(t,this.style_));let s=i.GetGlyphForCharacter(t),n=this.fallback_typeface_to_font_map_.get(i.GetId());if(!n){let o=this.font_cache_.GetFontFromTypefaceAndSize(i,this.size_);this.fallback_typeface_to_font_map_.set(i.GetId(),o),n=o}return{font:n,glyph_index:s}}GetPrimaryFont(){if(!this.primary_font_)for(let t of this.fonts_)for(let i of t.faces){let s=i.entry;if(!(s&&!nC(s.unicode_range,C0))&&(i.state==0&&this.RequestFont(t.family_name,i),i.state==3))return this.primary_font_=i.font,Q(this.primary_font_),this.primary_font_}return Q(this.primary_font_),this.primary_font_}RequestFont(t,i){let{font:s,state:n}=this.font_cache_.TryGetFont(t,this.style_,this.size_,i.entry);n=n||0,n==3&&(Q(s),i.font=s),i.state=n}GenerateEllipsisInfo(){if(!this.is_ellipsis_info_set_){let{font:t,glyph_index:i}=this.GetCharacterFont(this.GetEllipsisValue());this.ellipsis_font_=t;let s=i||Iw;this.ellipsis_width_=this.ellipsis_font_.GetGlyphWidth(s),this.is_ellipsis_info_set_=!0}}GenerateSpaceWidth(){if(!this.is_space_width_set_){let t=this.GetPrimaryFont(),i=t.GetGlyphForCharacter(C0);t.GetGlyphWidth(i)==0&&_i(rn,"Font being used with space width of 0!"),this.is_space_width_set_=!0}}}function nC(r,e){if(!r.size)return!0;for(let t of r.values()){if(t.start>e)break;if(t.start<=e&&e<=t.end)return!0}return!1}const rS=new WeakMap;class gk{constructor(e){c(this,"style");this.style=e}static create(e){if(!rS.has(e)){let t=new gk(e);rS.set(e,t)}return rS.get(e)}LT(e){return this.style.weight!=e.style.weight?this.style.weight<e.style.weight:this.style.slant<e.style.slant}}const AT=class{constructor(e,t){c(this,"cached_remote_typeface_reference_");c(this,"request_timer_");this.cached_remote_typeface_reference_=new gq(e,t,t),this.request_timer_=new _F,this.request_timer_.Start(pr.FromMilliseconds(AT.kRequestTimerDelay),t)}HasActiveRequestTimer(){return!!this.request_timer_}ClearRequestTimer(){this.request_timer_=void 0}};let bx=AT;c(bx,"kRequestTimerDelay",3e3);class Tq{constructor(e,t,i,s){c(this,"resource_provider_");c(this,"remote_typeface_cache_");c(this,"external_typeface_load_event_callback_");c(this,"language_script_");c(this,"font_face_map_",new Map);c(this,"requested_remote_typeface_cache_",new Map);c(this,"font_list_map_",new Map);c(this,"local_typeface_map_",new Map);c(this,"character_fallback_typeface_maps_",new Map);this.remote_typeface_cache_=t,this.external_typeface_load_event_callback_=i,this.resource_provider_=e,this.language_script_=s}GetFontList(e){return new kq(this,e)}GetFontFromTypefaceAndSize(e,t){return e.CreateFontWithSize(t)}GetFacesForFamilyAndStyle(e,t){let i=[],s=this.font_face_map_.get(e);if(s){let n=s.GetEntriesThatMatchStyle(t);for(let o of n){let a=new Ww;a.entry=o,i.push(a)}}else{let n=new Ww;i.push(n)}return i}TryGetFont(e,t,i,s){if(s){for(let n=0;n<s.sources.length;n++){const o=s.sources[n];let{font:a,state:l}=this.TryGetRemoteFont(o.GetName(),i);return{font:a,state:l}}return{state:Jl.kUnavailableState}}else{let{font:n,state:o}=this.TryGetLocalFont(e,t,i);return{font:n,state:o}}}GetCharacterFallbackTypefaceMap(e){let t=gk.create(e);return this.character_fallback_typeface_maps_.has(t)||this.character_fallback_typeface_maps_.set(t,new Map),this.character_fallback_typeface_maps_.get(t)}GetCharacterFallbackTypeface(e,t){return Q(this.resource_provider()),this.GetCachedLocalTypeface(this.resource_provider().GetCharacterFallbackTypeface(e,t,this.language_script_))}CreateGlyphBuffer(e,t,i,s,n){return Q(this.resource_provider()),this.resource_provider().CreateGlyphBuffer(e,t,i,this.language_script_,s,n)}GetTextWidth(e,t,i,s,n,o){return Q(this.resource_provider()),this.resource_provider().GetTextWidth(e,t,i,this.language_script_,s,n,o)}resource_provider(){return this.resource_provider_}GetCachedLocalTypeface(e){Q(e);let t=this.local_typeface_map_.get(e.GetId());return t||(t=e),t}TryGetRemoteFont(e,t){let i=this.remote_typeface_cache_.GetOrCreateCachedResource(e),s=this.requested_remote_typeface_cache_.get(e);if(!s){_i(Pp,"Requested remote font from ",e);let a=this.OnRemoteTypefaceLoadEvent.bind(this,e);s=new bx(i,a),this.requested_remote_typeface_cache_.set(e,s)}let n=i.TryGetResource(),o;return n?{font:this.GetFontFromTypefaceAndSize(n,t),state:Jl.kLoadedState}:(i.IsLoadingComplete()?o=Jl.kUnavailableState:s.HasActiveRequestTimer()?o=Jl.kLoadingWithTimerActiveState:o=Jl.kLoadingWithTimerExpiredState,{state:o})}TryGetLocalFont(e,t,i){return Q(this.resource_provider()),e&&!this.resource_provider().HasLocalFontFamily(e)?{state:Jl.kUnavailableState}:{font:this.GetFontFromTypefaceAndSize(this.GetCachedLocalTypeface(this.resource_provider().GetLocalTypeface(e,t)),i),state:Jl.kLoadedState}}OnRemoteTypefaceLoadEvent(e){let t=this.requested_remote_typeface_cache_.get(e);if(t){for(let i of this.font_list_map_.values())i.font_list.ResetLoadingFonts();t.ClearRequestTimer(),this.external_typeface_load_event_callback_()}}}class Pq{constructor(e){c(this,"clock_");c(this,"sampled_clock_time_");this.clock_=e}current_time(){if(this.sampled_clock_time_)return this.sampled_clock_time_.InMilliseconds()}Sample(){this.clock_?this.sampled_clock_time_=this.clock_.Now():this.sampled_clock_time_=void 0,this.UpdateNextEventTimer()}UpdateNextEventTimer(){}}class Rq extends Pq{constructor(t,i){super(Dq(t,i));c(this,"document_");this.document_=t}}function Dq(r,e){return new yF(r.navigation_start_clock(),pr.FromMilliseconds(e))}class Rm{static CompositeAfterPaintEnabled(){return!0}}class Cq{constructor(){c(this,"state_",0);c(this,"detach_count_",0);c(this,"disallow_transition_count_",0);c(this,"life_cycle_postponed_",!1);c(this,"check_no_transition_",!1)}IsActive(){return this.state_>1&&this.state_<18}GetState(){return this.state_}StateAllowsTreeMutations(){const{state_:e}=this;return e!=3&&e!=5&&e!=14&&e!=10&&e!=12&&e!=16}StateAllowsLayoutTreeMutations(){return!!this.detach_count_||this.state_==3}StateAllowsDetach(){const{state_:e}=this;return e==2||e==3||e==4||e==7||e==11||e==15||e==13||e==17||e==18||e==1}AdvanceTo(e){if(this.StateTransitionDisallowed())return!1;if(e==18)return!0;switch(this.state_){case 0:return e==1;case 1:if(e==4)return!0;break;case 2:if(e==3||e==5||e==10||e==14)return!0;break;case 3:return e==4;case 4:if(e==3||e==5||e==4||e==7||e==11)return!0;break;case 5:return e==6;case 6:if(e==5||e==7)return!0;break;case 7:if(e==3||e==5||e==7||e==4||e==8||e==11||e==12)return!0;break;case 8:if(e==9)return!0;break;case 9:if(e==11||e==12)return!0;break;case 10:return Q(!Rm.CompositeAfterPaintEnabled()),e==11;case 14:return Q(!Rm.CompositeAfterPaintEnabled()),e==15;case 11:if(e==3||e==10||e==14||e==15||e==12||e==8||e==15)return!0;break;case 15:if(e==3||e==10||e==14||e==8||e==12||e==16||e==11)return!0;break;case 12:if(e==13)return!0;break;case 13:if(e==16||e==3||e==15||e==12||e==8)return!0;break;case 16:if(e==17)return!0;break;case 17:if(e==3||e==11||e==12||e==16||e==8)return!0;break;case 18:return e==19;case 19:return!1}return!1}EnsureStateAtMost(e){Q(e==2||e==4||e==7),!(this.state_<=e)&&(Q(this.CanRewindTo(e),"Cannot rewind document lifecycle from ",this.state_," to ",e,"."),this.state_==e||this.check_no_transition_,this.state_=e)}StateTransitionDisallowed(){return this.disallow_transition_count_}IncrementNoTransitionCount(){this.disallow_transition_count_++}DecrementNoTransitionCount(){this.disallow_transition_count_,this.disallow_transition_count_--}InDetach(){return!!this.detach_count_}IncrementDetachCount(){this.detach_count_++}DecrementDetachCount(){this.detach_count_,this.detach_count_--}LifecyclePostponed(){return this.life_cycle_postponed_}CanAdvanceTo(e){if(this.StateTransitionDisallowed())return!1;if(e==18)return!0;switch(this.state_){case 0:return e==1;case 1:if(e==4)return!0;break;case 2:if(e==3||e==5||e==10||e==14)return!0;break;case 3:return e==4;case 4:if(e==3||e==5||e==4||e==7||e==11)return!0;break;case 5:return e==6;case 6:if(e==5||e==7)return!0;break;case 7:if(e==3||e==5||e==7||e==4||e==8||e==11||e==12)return!0;break;case 8:if(e==9)return!0;break;case 9:if(e==11||e==12)return!0;break;case 10:return Q(!Rm.CompositeAfterPaintEnabled()),e==11;case 14:return Q(!Rm.CompositeAfterPaintEnabled()),e==15;case 11:if(e==3||e==10||e==14||e==15||e==12||e==8||e==15)return!0;break;case 15:if(e==3||e==10||e==14||e==8||e==12||e==16||e==11)return!0;break;case 12:if(e==13)return!0;break;case 13:if(e==16||e==3||e==15||e==12||e==8)return!0;break;case 16:if(e==17)return!0;break;case 17:if(e==3||e==11||e==12||e==16||e==8)return!0;break;case 18:return e==19;case 19:return!1}return!1}CanRewindTo(e){if(this.StateTransitionDisallowed())return!1;const{state_:t}=this;return t==4||t==6||t==7||t==9||t==11||t==15||t==13||t==17}SetLifecyclePostponed(){this.life_cycle_postponed_=!0}ResetLifecyclePostponed(){this.life_cycle_postponed_=!1}}function Oq(r,e,t,i){return Nq(r,e,t,i)}const vo=-1,Ev=0,qa=1;function Nq(r,e,t,i){if(Q(r),Q(t),!r)return vo;if(!t)return qa;if(r==t)return Iq(e,i);{let u=Dm(t,r);if(u)return sC(e,di.PreviousSibling(u),vo)}{let u=Dm(r,t);if(u)return-sC(i,di.PreviousSibling(u),vo)}let s=di.CommonAncestor(r,t);if(!s)return Ev;const n=Dm(r,s),o=n||di.LastChild(s),a=Dm(t,s),l=a||di.LastChild(s);return Fq(o,l)}function Iq(r,e,t=Ev){return r==e?t:r<e?vo:qa}function sC(r,e,t=Ev){if(!e)return r?qa:t;if(!r)return vo;let i=e,s=1;for(let n of di.ChildrenOf(bn(di.Parent(i)))){if(r==s)return n==i?t:vo;if(n==i)return qa;++s}return et(),t}function Fq(r,e,t=Ev){if(r==e)return t;if(!r)return vo;if(!e)return qa;Kt(di.Parent(r),di.Parent(e));let i=r,s=r,n=e,o=e;for(;;){if(i=di.PreviousSibling(i),!i)return vo;if(i==o||(s=di.NextSibling(s),!s))return qa;if(s==n)return vo;if(n=di.PreviousSibling(n),!n)return qa;if(s==n||(o=di.NextSibling(o),!o))return vo;if(i==o)return qa}return et(),t}function Dm(r,e){let t=r;for(let i of di.AncestorsOf(r)){if(i==e)return t;t=i}}class Mq{}var kx=(r=>(r[r.kNoError=0]="kNoError",r[r.kLegacyErrorCodeMin=1]="kLegacyErrorCodeMin",r[r.kIndexSizeError=1]="kIndexSizeError",r[r.kHierarchyRequestError=3]="kHierarchyRequestError",r[r.kWrongDocumentError=4]="kWrongDocumentError",r[r.kInvalidCharacterError=5]="kInvalidCharacterError",r[r.kNoModificationAllowedError=7]="kNoModificationAllowedError",r[r.kNotFoundError=8]="kNotFoundError",r[r.kNotSupportedError=9]="kNotSupportedError",r[r.kInUseAttributeError=10]="kInUseAttributeError",r[r.kInvalidStateError=11]="kInvalidStateError",r[r.kSyntaxError=12]="kSyntaxError",r[r.kInvalidModificationError=13]="kInvalidModificationError",r[r.kNamespaceError=14]="kNamespaceError",r[r.kInvalidAccessError=15]="kInvalidAccessError",r[r.kTypeMismatchError=17]="kTypeMismatchError",r[r.kSecurityError=18]="kSecurityError",r[r.kNetworkError=19]="kNetworkError",r[r.kAbortError=20]="kAbortError",r[r.kURLMismatchError=21]="kURLMismatchError",r[r.kQuotaExceededError=22]="kQuotaExceededError",r[r.kTimeoutError=23]="kTimeoutError",r[r.kInvalidNodeTypeError=24]="kInvalidNodeTypeError",r[r.kDataCloneError=25]="kDataCloneError",r[r.kLegacyErrorCodeMax=25]="kLegacyErrorCodeMax",r[r.kEncodingError=26]="kEncodingError",r[r.kNotReadableError=27]="kNotReadableError",r[r.kUnknownError=28]="kUnknownError",r[r.kConstraintError=29]="kConstraintError",r[r.kDataError=30]="kDataError",r[r.kTransactionInactiveError=31]="kTransactionInactiveError",r[r.kReadOnlyError=32]="kReadOnlyError",r[r.kVersionError=33]="kVersionError",r[r.kOperationError=34]="kOperationError",r[r.kNotAllowedError=35]="kNotAllowedError",r[r.kPathExistsError=36]="kPathExistsError",r[r.kPermissionDeniedError=37]="kPermissionDeniedError",r[r.kBreakError=38]="kBreakError",r[r.kBufferOverrunError=39]="kBufferOverrunError",r[r.kFramingError=40]="kFramingError",r[r.kParityError=41]="kParityError",r[r.kWebTransportError=42]="kWebTransportError",r[r.kNumOfCodes=43]="kNumOfCodes",r))(kx||{});class Py{constructor(e){c(this,"container_node_");c(this,"child_before_boundary_");c(this,"offset_in_container_");this.container_node_=e,this.offset_in_container_=0}Container(){return this.container_node_}Offset(){return this.offset_in_container_}ChildBefore(){return this.child_before_boundary_}Set(e,t,i){Wn(t,0),this.container_node_=e,this.offset_in_container_=t,this.child_before_boundary_=i}SetOffset(e){Q(this.container_node_),Wn(this.offset_in_container_,0),Q(!this.child_before_boundary_),this.offset_in_container_=e}EQ(e){return this.child_before_boundary_===e.child_before_boundary_&&this.container_node_===e.container_node_&&this.offset_in_container_===e.offset_in_container_}CLONE(){let e=new Py(this.container_node_);return e.child_before_boundary_=this.child_before_boundary_,e.offset_in_container_=this.offset_in_container_,e}}class N0 extends Mq{constructor(t,i,s,n,o){super();c(this,"start_");c(this,"end_");this.start_=new Py(t),this.end_=new Py(t),this.setStart(i,s),this.setEnd(n,o)}static createFromDoc(t){return new N0(t,t,0,t,0)}collapsed(){return this.start_.EQ(this.end_)}endContainer(){return this.end_.Container()}endOffset(){return this.end_.Offset()}startContainer(){return this.start_.Container()}startOffset(){return this.start_.Offset()}setStart(t,i){Q(t);let s=this.CheckNodeWOffset(t,i);this.start_.Set(t,i,s)}setEnd(t,i){let s=this.CheckNodeWOffset(t,i);this.end_.Set(t,i,s)}collapse(t){t?this.end_=this.start_.CLONE():this.start_=this.end_.CLONE()}CheckNodeWOffset(t,i){switch(t.getNodeType()){case So.kCommentNode:case So.kTextNode:if(i>bn(t.AsCharacterData()).length()){debugger;throw new ox("The offset "+i+" is larger than the node's length ("+bn(t.AsCharacterData()).length()+").",kx.kIndexSizeError)}else if(i>Number.MAX_SAFE_INTEGER)throw new ox("The offset "+i+" is invalid.",kx.kIndexSizeError);return;case So.kDocumentNode:case So.kElementNode:{if(!i)return;if(i>Number.MAX_SAFE_INTEGER)throw new ox("The offset "+i+" is invalid.",kx.kIndexSizeError);let s=di.ChildAt(t,i-1);return s||et(),s}}et()}compareBoundaryPointInstances(t,i){return this.compareBoundaryPointsValues(t.Container(),t.Offset(),i.Container(),i.Offset())}compareBoundaryPointsValues(t,i,s,n){return Oq(t,i,s,n)}}var Tx=(r=>(r.None="None",r.Caret="Caret",r.Range="Range",r))(Tx||{});class Bq extends Ht{constructor(t){super();c(this,"_onDidChange",this._register(new Dt));c(this,"_doc");c(this,"ranges",[]);this._doc=t}get onDidChange(){return this._onDidChange.event}get anchorNode(){return this.ranges.length?this.ranges[0].startContainer():null}get anchorOffset(){return this.ranges.length?this.ranges[0].startOffset():0}get focusNode(){return this.ranges.length?this.ranges[0].endContainer():null}get focusOffset(){return this.ranges.length?this.ranges[0].endOffset():0}get type(){return this.ranges.length?this.ranges[0].collapsed()?"Caret":"Range":"None"}get isCollapsed(){return this.ranges.length?this.ranges[0].collapsed():!1}get rangeCount(){return this.ranges.length}addRange(t){this.ranges.length=0,this.ranges.push(t),this._onDidChange.fire()}getRangeAt(t=0){return this.ranges.length?this.ranges[0]:null}removeAllRanges(){this.ranges.length=0,this._onDidChange.fire()}extend(t,i=0){return Ue()}collapse(t,i=0){if(!t){this.removeAllRanges();return}if(N0.prototype.CheckNodeWOffset(t,i),!this.IsValidForPosition(t))return;let s=N0.createFromDoc(this._doc);s.setStart(t,i),s.setEnd(t,i),this.addRange(s)}IsValidForPosition(t){return t?t.GetDocument()===this._doc&&t.isConnected():!0}}class Lq{constructor(e,t,i,s){this.window=e,this.navigation_start_clock=t,this.viewport_size=i,this.dom_max_element_depth=s}}class Uq extends DN{constructor(t,i){super(Is.kCreateDocument);c(this,"html_element_factory_",new yq);c(this,"observers_",[]);c(this,"html_element_context_");c(this,"window_");c(this,"viewport_size_");c(this,"font_cache_");c(this,"is_computed_style_dirty_",!0);c(this,"initial_computed_style_declaration_",new qc);c(this,"initial_computed_style_data_",null);c(this,"dom_max_element_depth_");c(this,"default_timeline_");c(this,"navigation_start_clock_");c(this,"loading_counter_",0);c(this,"should_dispatch_load_event_",!0);c(this,"finishedFirstLoad",!1);c(this,"synchronous_layout_callback_");c(this,"synchronous_layout_and_produce_render_tree_callback_");c(this,"_onDidLayout",new Dt);c(this,"lifecycle_",new Cq);c(this,"_selection");Q(t),this.html_element_context_=t,this.window_=i.window,this.dom_max_element_depth_=i.dom_max_element_depth,this.node_document_=this,i.viewport_size&&this.SetViewport(i.viewport_size),this.font_cache_=new Tq(t.resource_provider(),t.remote_typeface_cache(),this.OnTypefaceLoadEvent.bind(this),t.font_language_script()),this.navigation_start_clock_=i.navigation_start_clock||new xF,this.default_timeline_=new Rq(this,0),this.OnInsertedIntoDocument()}get onDidLayout(){return this._onDidLayout.event}Accept(t){t.VisitDocument(this)}getNodeType(){return So.kDocumentNode}get nodeName(){return"#document"}Lifecycle(){return this.lifecycle_}OnDOMMutation(){this.is_computed_style_dirty_=!0,this.RecordMutation(),this.finishedFirstLoad&&this.DispatchOnLoadEvent()}OnTypefaceLoadEvent(){let t=this.html();t&&t.InvalidateLayoutBoxesOfNodeAndDescendants(),this.RecordMutation()}createElement(t){let i=t.toLocaleLowerCase();return this.html_element_factory_.CreateElement(this,i)}createTextNode(t){return new vv(this,t)}documentElement(){return this.first_element_child()}getSelection(){return this._selection||(this._selection=new Bq(this)),this._selection}createRange(){return new N0(this,this,0,this,0)}html(){return this.documentElement()||null}body(){let t=this.html();if(!t)return null;for(let i=t.first_element_child();i;i=i.nextElementSibling){let s=i.AsHTMLElement();if(s){let n=s.AsHTMLBodyElement();if(n)return n}}return null}font_cache(){return this.font_cache_}IsXMLDocument(){return!1}SetViewport(t){if(this.viewport_size_&&this.viewport_size_==t)return;this.viewport_size_=t,this.initial_computed_style_data_=Sq(this.viewport_size_.width_height()),this.initial_computed_style_declaration_.SetData(this.initial_computed_style_data_),this.is_computed_style_dirty_=!0;let i=this.html();i&&i.InvalidateComputedStylesOfNodeAndDescendants(),this.RecordMutation()}navigation_start_clock(){return this.navigation_start_clock_}initial_computed_style_data(){return this.initial_computed_style_data_}dom_max_element_depth(){return this.dom_max_element_depth_}html_element_context(){return this.html_element_context_}IncreaseLoadingCounter(){++this.loading_counter_}DecreaseLoadingCounter(){--this.loading_counter_}DecreaseLoadingCounterAndMaybeDispatchLoadEvent(){this.loading_counter_,this.loading_counter_--,this.loading_counter_==0&&this.should_dispatch_load_event_&&(this.should_dispatch_load_event_=!1,this.DispatchOnLoadEvent())}AddObserver(t){this.observers_.push(t)}RecordMutation(){this.observers_.forEach(t=>t.OnMutation())}SetSynchronousLayoutCallback(t){this.synchronous_layout_callback_=t}SetSynchronousLayoutAndProduceRenderTreeCallback(t){this.synchronous_layout_and_produce_render_tree_callback_=t}DoSynchronousLayout(){this.synchronous_layout_callback_&&this.synchronous_layout_callback_()}DoSynchronousLayoutAndGetRenderTree(){return this.synchronous_layout_and_produce_render_tree_callback_?this.synchronous_layout_and_produce_render_tree_callback_():null}UpdateComputedStyles(){if(this.is_computed_style_dirty_){let t=this.html();t&&(Kt(this,t.parentNode),t.UpdateComputedStyle(this.initial_computed_style_declaration_,this.initial_computed_style_data_,UI.kAncestorsAreDisplayed),t.UpdateComputedStyleRecursively(t.computed_style_declaration(),t.computed_style(),!0,0)),this.is_computed_style_dirty_=!1}}viewport_size(){return this.viewport_size_}SampleTimelineTime(){this.default_timeline_.Sample()}timeline(){return this.default_timeline_}DispatchOnLoadEvent(){this.SignalOnLoadToObservers()}onCreated(t){t(),this.finishedFirstLoad=!0,this.DispatchOnLoadEvent()}SignalOnLoadToObservers(){this.observers_.forEach(t=>t.OnLoad())}Duplicate(){et()}}class Gq{constructor(e,t,i,s){c(this,"resource_provider_");c(this,"image_cache_");c(this,"font_language_script_");c(this,"remote_typeface_cache_");this.resource_provider_=e,this.image_cache_=t,this.remote_typeface_cache_=i,this.font_language_script_=s}font_language_script(){return this.font_language_script_}resource_provider(){return this.resource_provider_}image_cache(){return this.image_cache_}remote_typeface_cache(){return this.remote_typeface_cache_}}class Hq{constructor(e,t){c(this,"navigation_start_");c(this,"navigation_start_clock_");this.navigation_start_=t,this.navigation_start_clock_=new yF(e,e.Now())}navigation_start(){return this.navigation_start_.ToInternalValue()}GetNavigationStartClock(){return this.navigation_start_clock_}}class $w{constructor(e){c(this,"time_origin_");c(this,"timing_");this.time_origin_=Si.Now(),this.timing_=new Hq(e,this.time_origin_)}timing(){return this.timing_}SetApplicationStartOrPreloadTimestamp(e,t){}}c($w,"kPerformanceTimerMinResolutionInMicroseconds",20),c($w,"kMaxResourceTimingBufferSize",250);class zq{constructor(e,t,i,s,n,o){c(this,"document_");c(this,"html_element_context_");c(this,"performance_");this.html_element_context_=new Gq(t,i,s,n),this.performance_=new $w(jq()),this.document_=new Uq(this.html_element_context_,new Lq(this,this.performance_.timing().GetNavigationStartClock(),e,o))}document(){return this.document_}performance(){return this.performance_}html_element_context(){return this.html_element_context_}}function jq(){return new xF}function Vq(){return"en-US"}class vF{}class EF{}class Wq extends vF{constructor(){super(...arguments);c(this,"result_","");c(this,"indent_",0)}VisitClearRectNode(t){this.AddNamedNodeString(t,"ClearRectNode"),this.result_+=`
`}VisitCompositionNode(t){this.AddNamedNodeString(t,"CompositionNode"),this.result_+=`
`,this.indent_++;let i=t.data().children();for(let s of i)s.Accept(this);this.indent_--}VisitMatrixTransformNode(t){this.AddNamedNodeString(t,"MatrixTransformNode"),this.result_+=`
`,this.indent_++,t.data().source.Accept(this),this.indent_--}VisitRectNode(t){if(this.AddNamedNodeString(t,"RectNode "),t.data().background_brush){let i=new $q;t.data().background_brush.Accept(i),this.result_+=i.brush_type()}this.result_+=`
`}VisitTextNode(t){this.AddNamedNodeString(t,"TextNode"),this.result_+=`
`}VisitFreehandNode(t){this.AddNamedNodeString(t,"FreehandNode"),this.result_+=`
`}Result(){return this.result_}AddNamedNodeString(t,i){this.AddIndentString(),this.result_+=i,this.result_+=" ",this.AddNodeInfoString(t)}AddIndentString(){this.result_+=new Array(this.indent_*2).fill(" ").join("")}AddNodeInfoString(t){let i=t.GetBounds();this.result_+="{ Bounds: (",this.result_+=i.x(),this.result_+=", ",this.result_+=i.y(),this.result_+=", ",this.result_+=i.width(),this.result_+=", ",this.result_+=i.height(),this.result_+=") }"}VisitImageNode(t){this.AddNamedNodeString(t,"ImageNode"),this.result_+=`
`}}class $q extends EF{constructor(){super(...arguments);c(this,"brush_type_","")}brush_type(){return this.brush_type_}visitLinearGradientBrush(t){this.brush_type_="(LinearGradientBrush)"}visitRadialGradientBrush(t){this.brush_type_="(RadialGradientBrush)"}visitSolidColorBrush(t){this.brush_type_="(SolidColorBrush)"}}function oC(r){let e=new Wq;return r.Accept(e),e.Result()}function aC(r,e){const t=r.GetTextStartPosition(),i=r.GetTextEndPosition();return t<=e&&i>=e}class Kq{constructor(e){c(this,"selected",new Set);this.layoutManager=e}update(e){switch(this.clearSelectionBackground(),e.type){case Tx.None:case Tx.Caret:break;case Tx.Range:this.doUpdateSelection(e);break}}clearSelectionBackground(){for(let e of this.selected)e.unsetSelection()}doUpdateSelection(e){const{anchorNode:t,focusNode:i,anchorOffset:s,focusOffset:n}=e;return Q(t),Q(i),Q(s),Q(n),t.IsText()?this.doUpdateSelectionInsideText(e):this.doUpdateSelectionInsideElement(e)}doUpdateSelectionInsideText(e){const{anchorNode:t,focusNode:i,anchorOffset:s,focusOffset:n}=e;Q(t),Q(i),Q(s),Q(n);let o=t.AsText(),a=i.AsText();return o.parentNode!==a.parentNode?this.updateMultiParagraphSelection(o,a,s,n):this.updateSingleParagraphSelection(o,a,s,n)}doUpdateSelectionInsideElement(e){const{anchorNode:t,focusNode:i,anchorOffset:s,focusOffset:n}=e;Q(t),Q(i),Q(s),Q(n);const o=t.AsElement(),a=i.AsElement();Q(o===a);let l=[];if(o.nodeName===Sd.kTagName)for(let u=s;u<n;u++){const d=o.childNodes[u];Q(d==null?void 0:d.IsElement()),l.push(d.AsHTMLElement())}else o.nodeName===ko.kTagName?l.push(o.AsHTMLElement()):et();this.updateSelectionOfP(l)}updateSelectionOfP(e){Q(e.length);const t=Array.from(e).map(i=>this.layoutManager.getParagraphOfNode(i.firstChild));for(let i of t){const s=this.layoutManager.getRTreeItemsByParagraph(i);for(let n of s){const o=n.box,a=o.GetTextStartPosition(),l=o.GetTextEndPosition();o.setSelection(a,l),this.selected.add(o)}}}updateMultiParagraphSelection(e,t,i,s){const n=di.CommonAncestor(e,t);Q(n),Kt(n,n.parentNode.parentNode);const o=Array.from(n.childNodes).filter(P=>P==null?void 0:P.IsElement()).map(P=>this.layoutManager.getParagraphOfNode(P.firstChild)),a=this.layoutManager.getParagraphOfNode(e);Q(a);const l=this.layoutManager.getParagraphOfNode(t);Q(l);const u=o.indexOf(a),d=o.indexOf(l),f=Math.min(u,d),g=Math.max(u,d),x=f===u?i:s,E=f===u?s:i;for(let P=f;P<=g;P++){const b=this.layoutManager.getRTreeItemsByParagraph(o[P]);if(P===f)for(let R of b){const D=R.box,C=D.GetTextStartPosition(),I=D.GetTextEndPosition();I>x&&(D.setSelection(Math.max(C,x),I),this.selected.add(D))}else if(P===g)for(let R of b){const D=R.box,C=D.GetTextStartPosition(),I=D.GetTextEndPosition();C<E&&(D.setSelection(C,Math.min(I,E)),this.selected.add(D))}else for(let R of b){const D=R.box,C=D.GetTextStartPosition(),I=D.GetTextEndPosition();D.setSelection(C,I),this.selected.add(D)}}}updateSingleParagraphSelection(e,t,i,s){const n=this.layoutManager.getParagraphOfNode(e);if(e!==t){const u=this.layoutManager.getParagraphOfNode(t);n!==u&&et()}Q(n);const o=this.layoutManager.getRTreeItemsByParagraph(n),a=Math.min(i,s),l=Math.max(i,s);for(let u of o){const d=u.box,f=d.GetTextStartPosition(),g=d.GetTextEndPosition();let x=aC(d,a),E=aC(d,l);x&&!E?(d.setSelection(a,g),this.selected.add(d)):x&&E?(d.setSelection(a,l),this.selected.add(d)):!x&&E?(d.setSelection(f,l),this.selected.add(d)):a<=f&&l>=g&&(d.setSelection(f,g),this.selected.add(d))}}}const Ry=1e-4;class Nr{constructor(e=0,t=0){c(this,"horizontal");c(this,"vertical");this.horizontal=e,this.vertical=t}IsSquare(){return this.horizontal<=Ry||this.vertical<=Ry}Inset(e,t){return new Nr(Math.max(0,this.horizontal-e),Math.max(0,this.vertical-t))}COPY(){return new Nr(this.horizontal,this.vertical)}EQ(e){return this.horizontal==e.horizontal&&this.vertical==e.vertical}GE(e){return this.horizontal>=e.horizontal&&this.vertical>=e.vertical}}class Lc{constructor(e,t,i,s){c(this,"top_left",new Nr);c(this,"top_right",new Nr);c(this,"bottom_right",new Nr);c(this,"bottom_left",new Nr);if(!!arguments.length)if(arguments.length==1)if(e instanceof Nr)this.top_left=e.COPY(),this.top_right=e.COPY(),this.bottom_right=e.COPY(),this.bottom_left=e.COPY();else if(e instanceof Lc)this.top_left=e.top_left.COPY(),this.top_right=e.top_right.COPY(),this.bottom_right=e.bottom_right.COPY(),this.bottom_left=e.bottom_left.COPY();else throw new Error("400");else arguments.length==2?(this.top_left=new Nr(e,t),this.top_right=new Nr(e,t),this.bottom_right=new Nr(e,t),this.bottom_left=new Nr(e,t)):(this.top_left=e,this.top_right=t,this.bottom_right=i,this.bottom_left=s)}EQ(e){return this.top_left.EQ(e.top_left)&&this.top_right.EQ(e.top_right)&&this.bottom_right.EQ(e.bottom_right)&&this.bottom_left.EQ(e.bottom_left)}Inset(e,t,i,s){let n,o,a,l;if(arguments.length===4)l=e,n=t,o=i,a=s;else{let u=e;l=u.left(),n=u.top(),o=u.right(),a=u.bottom()}return new Lc(this.top_left.Inset(l,n),this.top_right.Inset(o,n),this.bottom_right.Inset(o,a),this.bottom_left.Inset(l,a))}Scale(e,t){return new Lc(new Nr(this.top_left.horizontal*e,this.top_left.vertical*t),new Nr(this.top_right.horizontal*e,this.top_right.vertical*t),new Nr(this.bottom_right.horizontal*e,this.bottom_right.vertical*t),new Nr(this.bottom_left.horizontal*e,this.bottom_left.vertical*t))}Normalize(e){let t=1,i;return i=this.top_left.horizontal+Math.max(this.top_right.horizontal,this.bottom_right.horizontal),i>e.width()&&(t=e.width()/i),i=this.bottom_left.horizontal+Math.max(this.bottom_right.horizontal,this.top_right.horizontal),i>e.width()&&(t=Math.min(e.width()/i,t)),i=this.top_left.vertical+Math.max(this.bottom_left.vertical,this.bottom_right.vertical),i>e.height()&&(t=Math.min(e.height()/i,t)),i=this.top_right.vertical+Math.max(this.bottom_right.vertical,this.bottom_left.vertical),i>e.height()&&(t=Math.min(e.height()/i,t)),t=Math.max(t,0),this.Scale(t,t)}IsNormalized(e){const t=e.width()+Ry,i=e.height()+Ry;return this.top_left.horizontal+this.top_right.horizontal<=t&&this.bottom_left.horizontal+this.bottom_right.horizontal<=t&&this.top_left.vertical+this.bottom_left.vertical<=i&&this.top_right.vertical+this.bottom_right.vertical<=i&&this.top_left.horizontal+this.bottom_right.horizontal<=t&&this.bottom_left.horizontal+this.top_right.horizontal<=t&&this.top_left.vertical+this.bottom_right.vertical<=i&&this.top_right.vertical+this.bottom_left.vertical<=i}AreSquares(){return this.top_left.IsSquare()&&this.top_right.IsSquare()&&this.bottom_right.IsSquare()&&this.bottom_left.IsSquare()}AllCornersEqual(e){return this.top_left.EQ(e)&&this.top_right.EQ(e)&&this.bottom_right.EQ(e)&&this.bottom_left.EQ(e)}AllCornersGE(e){return this.top_left.GE(e)&&this.top_right.GE(e)&&this.bottom_right.GE(e)&&this.bottom_left.GE(e)}}const ra=class{constructor(e){c(this,"value_",0);if(!arguments.length)return;let t;e instanceof ra?this.value_=e.value_:Mx(e)?(t=e,this.value_=t*ra.kFixedPointRatio):Ue()}static Max(e,...t){let i=e;for(let s of t)s.GT(i)&&(i=s);return i}static MaxValue(){return new ra(Number.POSITIVE_INFINITY)}static Min(e,...t){let i=e;for(let s of t)s.LT(i)&&(i=s);return i}toFloat(){return this.value_/ra.kFixedPointRatio}LT(e){return this.value_<e.value_}LE(e){return this.value_<=e.value_}GT(e){return this.value_>e.value_}GE(e){return this.value_>=e.value_}EQ(e){return this.value_==e.value_}NE(e){return this.value_!==e.value_}EqualOrNaN(e){return Number.isNaN(this.value_)||Number.isNaN(e.value_)||this.EQ(e)}POS(){return new ra(this.value_)}NEG(){return new ra(-this.value_)}ADD_ASSIGN(e){return this.value_+=e.value_,this}ADD(e){return this.CLONE().ADD_ASSIGN(e)}SUB_ASSIGN(e){return this.value_-=e.value_,this}SUB(e){return this.CLONE().SUB_ASSIGN(e)}CLONE(){let e=new ra;return e.value_=this.value_,e}MUL_ASSIGN(e){return this.value_=As(this.value_*e),this}DIV_ASSIGN(e){return this.value_=As(this.value_/e),this}MUL(e){return this.CLONE().MUL_ASSIGN(e)}DIV(e){return this.CLONE().DIV_ASSIGN(e)}toString(){return this.toFloat().toString()}};let me=ra;c(me,"kFixedPointRatio",64),c(me,"zero",new ra(0));class Xq{constructor(e,t){c(this,"font_cache_");c(this,"font_list_key_",new Aq);c(this,"last_font_family_refptr_");c(this,"last_font_style_refptr_");c(this,"last_font_weight_refptr_");c(this,"last_font_list_");this.font_cache_=t}GetUsedFontList(e,t,i,s){let n=SF(t);if(this.last_font_list_&&this.last_font_list_.size()==n&&this.last_font_family_refptr_==e&&this.last_font_style_refptr_==i&&this.last_font_weight_refptr_==s)return this.last_font_list_;this.font_list_key_.family_names.length=0;let o=new qq(this.font_list_key_.family_names);e.Accept(o);let a=i,l=s;return this.font_list_key_.style=Jq(a.value(),l.value()),this.font_list_key_.size=n,this.last_font_family_refptr_=e,this.last_font_style_refptr_=i,this.last_font_weight_refptr_=s,this.last_font_list_=this.font_cache_.GetFontList(this.font_list_key_),this.last_font_list_}CleanupAfterLayout(){this.last_font_family_refptr_=void 0,this.last_font_style_refptr_=void 0,this.last_font_weight_refptr_=void 0,this.last_font_list_=void 0}}function SF(r){let e=r;return Kt(Ft.kPixelsUnit,e.unit()),e.value()}class Yq extends jr{constructor(t){super();c(this,"frame_size_");c(this,"rounded_corner_");this.frame_size_=t}VisitLength(t){t.value()>0?this.rounded_corner_=new Nr(t.value(),t.value()):this.rounded_corner_=void 0}VisitPercentage(t){t.value()>0?this.rounded_corner_=new Nr(t.value()*this.frame_size_.width(),t.value()*this.frame_size_.height()):this.rounded_corner_=void 0}rounded_corner(){return this.rounded_corner_}}class qq extends jr{constructor(t){super();c(this,"family_names_");this.family_names_=t}VisitKeyword(t){switch(t.value()){case _.kCurrentColor:case _.kCursive:case _.kFantasy:case _.kMonospace:case _.kSansSerif:case _.kSerif:this.family_names_.push(t.ToString());break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kScroll:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitPropertyList(t){let i=t.value().length;for(let s=0;s<i;++s)t.value()[s].Accept(this)}VisitString(t){this.family_names_.push(t.value())}}class mk extends jr{constructor(t,i=!1){super();c(this,"percentage_base_");c(this,"calc_permitted_");c(this,"used_length_");c(this,"depends_on_containing_block_",!1);this.percentage_base_=t,this.calc_permitted_=i}VisitLength(t){this.depends_on_containing_block_=!1,Kt(Ft.kPixelsUnit,t.unit()),this.used_length_=new me(t.value())}VisitPercentage(t){this.depends_on_containing_block_=!0,this.used_length_=this.percentage_base_.MUL(t.value())}depends_on_containing_block(){return this.depends_on_containing_block_}used_length(){return this.used_length_}}class fs extends mk{VisitKeyword(e){switch(e.value()){case _.kAuto:this.depends_on_containing_block_=!0;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}function xk(r,e){let t=new fs(e.width());return r.left.Accept(t),t.used_length()}function wF(r,e){let t=new fs(e.width());return r.right.Accept(t),t.used_length()}function yk(r,e){let t=new fs(e.height());return r.top.Accept(t),t.used_length()}function AF(r,e){let t=new fs(e.height());return r.bottom.Accept(t),t.used_length()}function bF(r){return new me(ld(r.border_left_width))}function kF(r){return new me(r.border_top_width.value())}function TF(r){return new me(r.border_right_width.value())}function PF(r){return new me(r.border_bottom_width.value())}function RF(r,e){let t=new fs(e.width());return r.padding_left.Accept(t),t.used_length()}function DF(r,e){let t=new fs(e.width());return r.padding_top.Accept(t),t.used_length()}function CF(r,e){let t=new fs(e.width());return r.padding_right.Accept(t),t.used_length()}function OF(r,e){let t=new fs(e.width());return r.padding_bottom.Accept(t),t.used_length()}function Zi(r){let e=r;return new hh(e.value())}function Qq(r,e){let t=e;Kt(t.value().length);let i=t.value()[0],s=i.percentage_value().value()*r.width()+i.length_value().value(),n=t.value()[1],o=n.percentage_value().value()*r.height()+n.length_value().value();return new tn(r.x()+s,r.y()+o)}function ld(r){let e=r;Kt(e.unit(),Ft.kPixelsUnit);let t=new me(e.value());return t.LT(new me)&&(_i(rn,"Invalid non-negative layout length ",t.toFloat(),", original length was ",e.value()),t=new me),t}function vk(r,e,t=void 0){let i=new fs(e.height());return r.height.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}function Ek(r,e){let t=new fs(e.width());return r.margin_top.Accept(t),t.used_length()}function Sk(r,e){let t=new fs(e.width());return r.margin_bottom.Accept(t),t.used_length()}function NF(r,e,t=void 0){let i=new fs(e.width());return r.width.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}function Sv(r,e){let t=new fs(e.width());return r.margin_left.Accept(t),t.used_length()}function wv(r,e){let t=new fs(e.width());return r.margin_right.Accept(t),t.used_length()}class IF extends mk{constructor(e){super(e)}VisitKeyword(e){switch(e.value()){case _.kNone:this.depends_on_containing_block_=!0;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}function FF(r,e,t=void 0){let i=new IF(e.width());return r.max_width.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}class MF extends mk{constructor(e){super(e)}VisitKeyword(e){switch(e.value()){case _.kAuto:this.depends_on_containing_block_=!1;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}function BF(r,e,t=void 0){let i=new MF(e.width());return r.min_width.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}function LF(r,e){let t=new IF(e.height());return r.max_height.Accept(t),t.used_length()}function UF(r,e){let t=new MF(e.height());return r.min_height.Accept(t),t.used_length()}function GF(r){let e=r;return Kt(e.unit(),Ft.kPixelsUnit),new me(e.value())}function Jq(r,e){let t=fo.kNormalWeight;switch(e){case Zo.kThinAka100:t=fo.kThinWeight;break;case Zo.kExtraLightAka200:t=fo.kExtraLightWeight;break;case Zo.kLightAka300:t=fo.kLightWeight;break;case Zo.kNormalAka400:t=fo.kNormalWeight;break;case Zo.kMediumAka500:t=fo.kMediumWeight;break;case Zo.kSemiBoldAka600:t=fo.kSemiBoldWeight;break;case Zo.kBoldAka700:t=fo.kBoldWeight;break;case Zo.kExtraBoldAka800:t=fo.kExtraBoldWeight;break;case Zo.kBlackAka900:t=fo.kBlackWeight;break}let i=r==e3.kItalic?Ow.kItalicSlant:Ow.kUprightSlant;return new C2(t,i)}class HF extends jr{constructor(t,i){super();c(this,"font_metrics_");c(this,"font_size_");c(this,"used_line_height_",new me);c(this,"half_leading_",new me);this.font_metrics_=t,this.font_size_=i}VisitKeyword(t){Kt(_.kNormal,t.value()),this.used_line_height_=new me(this.font_metrics_.em_box_height()),this.UpdateHalfLeading()}VisitLength(t){Kt(Ft.kPixelsUnit,t.unit()),this.used_line_height_=new me(t.value()),this.UpdateHalfLeading()}VisitNumber(t){let i=SF(this.font_size_);this.used_line_height_=new me(t.value()*i),this.UpdateHalfLeading()}used_line_height(){return this.used_line_height_}half_leading(){return this.half_leading_}baseline_offset_from_top(){return new me(this.font_metrics_.ascent()).ADD(this.half_leading_)}baseline_offset_from_bottom(){return new me(this.font_metrics_.descent()).ADD(this.half_leading_)}UpdateHalfLeading(){this.half_leading_=this.used_line_height_.SUB(new me(this.font_metrics_.ascent()+this.font_metrics_.descent())).DIV(2)}}function Zq(r){const e=r.GetClientRect();return{minX:e.left().toFloat(),minY:e.top().toFloat(),maxX:e.right().toFloat(),maxY:e.bottom().toFloat(),box:r}}class ui{constructor(e,t){c(this,"x_");c(this,"y_");arguments.length?arguments.length===1&&e instanceof ui?(this.x_=e.x_,this.y_=e.y_):(this.x_=e,this.y_=t):(this.x_=new me,this.y_=new me)}SetVector(e,t){this.x_=e,this.y_=t}x(){return this.x_}set_x(e){this.x_=e}y(){return this.y_}set_y(e){this.y_=e}IsZero(){return this.x_.EQ(new me)&&this.y_.EQ(new me)}ADD(e){return this.x_.ADD_ASSIGN(e.x_),this.y_.ADD_ASSIGN(e.y_),this}SUB(e){return this.x_.SUB_ASSIGN(e.x_),this.y_.SUB_ASSIGN(e.y_),this}ADD_ASSIGN(e){return this.ADD(e)}SUB_ASSIGN(e){return this.SUB(e)}get 0(){return this.x_}get 1(){return this.y_}SetToMin(e){this.x_=this.x_.LE(e.x_)?this.x_:e.x_,this.y_=this.y_.LE(e.y_)?this.y_:e.y_}SetToMax(e){this.x_=this.x_.GE(e.x_)?this.x_:e.x_,this.y_=this.y_.GE(e.y_)?this.y_:e.y_}toString(){return`[${this.x_} ${this.y_}]`}toVector2dF(){return new tn(this.x_.toFloat(),this.y_.toFloat())}EQ(e){return this.x()==e.x()&&this.y()==e.y()}NE(e){return!this.EQ(e)}NEG(){return new ui(new me(-this.x()),new me(-this.y()))}}class Sn{constructor(e=new me,t=new me,i=new me,s=new me){c(this,"left_");c(this,"top_");c(this,"right_");c(this,"bottom_");this.left_=e,this.top_=t,this.right_=i,this.bottom_=s}left(){return this.left_}set_left(e){this.left_=e.CLONE()}top(){return this.top_}set_top(e){this.top_=e.CLONE()}right(){return this.right_}set_right(e){this.right_=e.CLONE()}bottom(){return this.bottom_}set_bottom(e){this.bottom_=e.CLONE()}SetInsets(e,t,i,s){this.left_=e.CLONE(),this.top_=t.CLONE(),this.right_=i.CLONE(),this.bottom_=s.CLONE()}EQ(e){return this.left_.EQ(e.left_)&&this.top_.EQ(e.top_)&&this.right_.EQ(e.right_)&&this.bottom_.EQ(e.bottom_)}NE(e){return!this.EQ(e)}ASS_ASSIGN(e){this.left_.ADD_ASSIGN(e.left_),this.top_.ADD_ASSIGN(e.top_),this.right_.ADD_ASSIGN(e.right_),this.bottom_.ADD_ASSIGN(e.bottom_)}ADD(e){return new Sn(this.left_.ADD(e.left_),this.top_.ADD(e.top_),this.right_.ADD(e.right_),this.bottom_.ADD(e.bottom_))}toString(){return`${this.left_},${this.top_},${this.right_},${this.bottom_}`}zero(){return this.left_.EQ(new me)&&this.top_.EQ(new me)&&this.right_.EQ(new me)&&this.bottom_.EQ(new me)}NEG(){return new Sn(this.left_.NEG(),this.top_.NEG(),this.right_.NEG(),this.bottom_.NEG())}}class Kw extends el{}class Os{constructor(e,t){c(this,"width_",new me);c(this,"height_",new me);if(arguments.length==1)if(e instanceof Os){let i=e;this.width_=i.width_.CLONE(),this.height_=i.height_.CLONE()}else e instanceof el?(this.width_=new me(e.width()),this.height_=new me(e.height())):Ue();else arguments.length==2&&(this.width_=e.CLONE(),this.height_=t.CLONE())}IsEmpty(){throw new Error("")}width(){return this.width_}height(){return this.height_}set_width(e){this.width_=e.CLONE()}set_height(e){this.height_=e.CLONE()}SetSize(e,t){this.set_width(e),this.set_height(t)}Enlarge(e,t){this.set_width(this.width_.ADD(e)),this.set_height(this.height_.ADD(t))}SetToMin(e){this.width_=this.width_.LE(e.width_)?this.width_:e.width_,this.height_=this.height_.LE(e.height_)?this.height_:e.height_}SetToMax(e){this.width_=this.width_.GE(e.width_)?this.width_:e.width_.CLONE(),this.height_=this.height_.GE(e.height_)?this.height_:e.height_.CLONE()}toSizeF(){return new Kw(this.width().toFloat(),this.height().toFloat())}Scale(e,t=e){this.SetSize(this.width().MUL(e),this.height().MUL(t))}EQ(e){return this.width_.EQ(e.width_)&&this.height_.EQ(e.height_)}NE(e){return!this.EQ(e)}toString(){return JSON.stringify({width:this.width_.toFloat(),height:this.height_.toFloat()})}CLONE(){return new Os(this.width_,this.height_)}}var tr=(r=>(r[r.kRightToLeftBaseDirection=0]="kRightToLeftBaseDirection",r[r.kLeftToRightBaseDirection=1]="kLeftToRightBaseDirection",r))(tr||{});class ks{constructor(e,t){c(this,"x_",new me);c(this,"y_",new me);if(arguments.length==1){let i=e;this.x_=i.x_.CLONE(),this.y_=i.y_.CLONE()}else this.x_=e.CLONE(),this.y_=t.CLONE()}x(){return this.x_}y(){return this.y_}SetPoint(e,t){this.x_=e.CLONE(),this.y_=t.CLONE()}set_x(e){this.x_=e.CLONE()}set_y(e){this.y_=e.CLONE()}ADD_ASSIGN(e){return this.x_.ADD_ASSIGN(e.x()),this.y_.ADD_ASSIGN(e.y()),this}SUB_ASSIGN(e){return this.x_.SUB_ASSIGN(e.x()),this.y_.SUB_ASSIGN(e.y()),this}CLONE(){return new ks(this.x_,this.y_)}EQ(e){return this.x()==e.x()&&this.y()==e.y()}LT(e){return this.y_==e.y_?this.x_<e.x_:this.y_<e.y_}toString(){return JSON.stringify({x:this.x_.toString(),y:this.y_.toString()})}}class Rs{constructor(e,t,i,s){c(this,"origin_");c(this,"size_");arguments.length===1?e instanceof ks?(this.origin_=e.CLONE(),this.size_=new Os):e instanceof Os?(this.size_=e.CLONE(),this.origin_=new ks):Ue():arguments.length===2?e instanceof ks?(this.origin_=e.CLONE(),this.size_=t.CLONE()):(this.size_=new Os(e,t),this.origin_=new ks):arguments.length===4?(this.origin_=new ks(e,t),this.size_=new Os(i,s)):et()}x(){return this.origin_.x()}left(){return this.x()}set_x(e){this.origin_.set_x(e)}y(){return this.origin_.y()}top(){return this.y()}set_y(e){this.origin_.set_y(e)}width(){return this.size_.width()}set_width(e){this.size_.set_width(e)}height(){return this.size_.height()}set_height(e){this.size_.set_height(e)}origin(){return this.origin_}set_origin(e){this.origin_=e.CLONE()}size(){return this.size_}set_size(e){this.size_=e.CLONE()}right(){return this.x().ADD(this.width())}bottom(){return this.y().ADD(this.height())}top_right(){return new ks(this.right(),this.y())}bottom_left(){return new ks(this.x(),this.bottom())}bottom_right(){return new ks(this.right(),this.bottom())}OffsetFromOrigin(){return new ui(this.x(),this.y())}SetRect(e,t,i,s){this.origin_.SetPoint(e,t),this.set_width(i),this.set_height(s)}Inset(e,t,i,s){let n,o,a,l;if(arguments.length===1){let u=e;n=u.left(),o=u.top(),a=u.right(),l=u.bottom()}else if(arguments.length===2){let u=e,d=t;n=a=u,o=l=d}else n=e,o=t,a=i,l=s;this.origin_.ADD_ASSIGN(new ui(n,o)),this.set_width(me.Max(this.width().SUB(n).SUB(a),new me)),this.set_height(me.Max(this.height().SUB(o).SUB(l),new me))}Outset(e,t,i,s){arguments.length===1?this.Inset(e.NEG()):arguments.length==2?this.Inset(e.NEG(),t.NEG()):this.Inset(e.NEG(),t.NEG(),i.NEG(),s.NEG())}Offset(e,t){arguments.length==1?this.origin_.ADD_ASSIGN(e):this.origin_.ADD_ASSIGN(new ui(e,t))}ASS_ASSIGN(e){return this.origin_.ADD_ASSIGN(e)}SUB_ASSIGN(e){return this.origin_.SUB_ASSIGN(e)}InsetsFrom(e){return new Sn(e.x().SUB(this.x()),e.y().SUB(this.y()),this.right().SUB(e.right()),this.bottom().SUB(e.bottom()))}IsEmpty(){return this.size_.IsEmpty()}LT(e){return this.origin_.EQ(e.origin())?this.width().EQ(e.width())?this.height().LT(e.height()):this.width().GT(e.width()):this.origin_.LT(e.origin())}Contains(e,t){if(arguments.length===1){if(e instanceof Rs)return e.x().GE(this.x())&&e.right().LE(this.right())&&e.y().GE(this.y())&&e.bottom().LE(this.bottom());{let i=e;return i.x()>=this.x()&&i.x()<this.right()&&i.y()>=this.y()&&i.y()<this.bottom()}}else{let i=e,s=t;return i>=this.x()&&i<this.right()&&s>=this.y()&&s<this.bottom()}}Intersects(e){return!(this.IsEmpty()||e.IsEmpty()||e.x().GE(this.right())||e.right().LE(this.x())||e.y().GE(this.bottom())||e.bottom().LE(this.y()))}Intersect(e){if(this.IsEmpty()||e.IsEmpty()){this.SetRect(new me,new me,new me,new me);return}let t=me.Max(this.x(),e.x()),i=me.Max(this.y(),e.y()),s=me.Min(this.right(),e.right()),n=me.Min(this.bottom(),e.bottom());(t.GE(s)||i.GE(n))&&(t=i=s=n=new me),this.SetRect(t,i,s.SUB(t),n.SUB(i))}Union(e){if(e.IsEmpty())return;let t=me.Min(this.x(),e.x()),i=me.Min(this.y(),e.y()),s=me.Max(this.right(),e.right()),n=me.Max(this.bottom(),e.bottom());this.SetRect(t,i,s.SUB(t),n.SUB(i))}Subtract(e){if(!this.Intersects(e))return;if(e.Contains(this)){this.SetRect(new me,new me,new me,new me);return}let t=this.x(),i=this.y(),s=this.right(),n=this.bottom();e.y().LE(this.y())&&e.bottom().GT(this.bottom())?e.x().LE(this.x())?t=e.right():e.right().GE(this.right())&&(s=e.x()):e.x().LE(this.x())&&e.right().GE(this.right())&&(e.y().LE(this.y())?i=e.bottom():e.bottom().GE(this.bottom())&&(n=e.y())),this.SetRect(t,i,s.SUB(t),n.SUB(i))}CenterPoint(){return new ks(this.x().ADD(this.width().DIV(2)),this.y().ADD(this.height().DIV(2)))}ClampToCenteredSize(e){}SplitVertically(e,t){}ManhattanDistanceToPoint(e){}ManhattanInternalDistance(e){}static EQ(e,t){return e.origin().EQ(t.origin())&&e.size().EQ(t.size())}EQ(e){return Rs.EQ(this,e)}NE(e){return!this.EQ(e)}static ADD(e,t){return new Rs(e.x().ADD(t.x()),e.y().ADD(t.y()),e.width(),e.height())}static SUB(e,t){return new Rs(e.x().SUB(t.x()),e.y().SUB(t.y()),e.width(),e.height())}ADD(e){return Rs.ADD(this,e)}toString(){return JSON.stringify({origin:this.origin_.toString(),size:this.size_.toString()})}}function ud(r,e){let t,i;if(arguments.length===1){let s=r;t=s.x(),i=s.y()}else t=r,i=e;return Li.FromValues(1,0,t,0,1,i,0,0,1)}function eQ(r){return Math.abs(r.Get(0,1))<1e-4&&Math.abs(r.Get(1,0))<1e-4&&Math.abs(r.Get(2,0))<1e-4&&Math.abs(r.Get(2,1))<1e-4&&Math.abs(r.Get(2,2)-1)<1e-4}let tQ=0;class Nh extends Ht{constructor(){super();c(this,"node_id_");this.node_id_=tQ++}GetId(){return this.node_id_}}class dh{constructor(e,t){c(this,"offset_");c(this,"children_",[]);if(!arguments.length)this.offset_=new tn;else if(arguments.length===1)if(e instanceof tn)this.offset_=e;else throw new Error("500");else if(arguments.length===2)this.children_.push(e),this.offset_=t;else throw new Error("500")}AddChild(e){this.children_.push(e)}GetChild(e){return Wn(e,0),this.children_.length,this.children_[e]}children(){return this.children_}offset(){return this.offset_}set_offset(e){this.offset_=e}}class fh extends Nh{constructor(t,i){super();c(this,"data_");c(this,"cached_bounds_");c(this,"disposed",!1);t instanceof dh?this.data_=t:this.data_=new dh(t,i),this.cached_bounds_=this.ComputeBounds()}dispose(){super.dispose();for(let t of this.data_.children())t.dispose();this.disposed=!0}GetTypeId(){return rr(fh)}data(){return this.data_}GetBounds(){return this.cached_bounds_}Accept(t){t.VisitCompositionNode(this)}ComputeBounds(){let t=new lr;for(let i of this.data_.children())t.Union(i.GetBounds());return t.Offset(this.data_.offset()),t}}class wk{constructor(e=0,t=0,i=0,s=0){c(this,"left_");c(this,"top_");c(this,"right_");c(this,"bottom_");this.left_=e,this.top_=t,this.right_=i,this.bottom_=s}left(){return this.left_}set_left(e){this.left_=e}top(){return this.top_}set_top(e){this.top_=e}right(){return this.right_}set_right(e){this.right_=e}bottom(){return this.bottom_}set_bottom(e){this.bottom_=e}SetInsets(e,t,i,s){this.left_=e,this.top_=t,this.right_=i,this.bottom_=s}zero(){return this.left_==0&&this.top_==0&&this.right_==0&&this.bottom_==0}EQ(e){return this.left_==e.left_&&this.top_==e.top_&&this.right_==e.right_&&this.bottom_==e.bottom_}NE(e){return!this.EQ(e)}ADD_ASSIGN(e){this.left_+=e.left_,this.top_+=e.top_,this.right_+=e.right_,this.bottom_+=e.bottom_}NEG(){return new wk(-this.left_,-this.top_,-this.right_,-this.bottom_)}}class rQ extends wk{}class yu{constructor(e,t,i,s){c(this,"rect");c(this,"background_brush");c(this,"border");c(this,"rounded_corners");e instanceof yu?(this.rect=e.rect.CLONE(),this.background_brush=e.background_brush,this.border=e.border,this.rounded_corners=e.rounded_corners):(this.rect=e.CLONE(),this.background_brush=t,this.border=i,this.rounded_corners=s)}EQ(e){throw new Error("500")}}class Ad extends Nh{constructor(t,i,s,n){super();c(this,"data_");t instanceof yu?this.data_=new yu(t):this.data_=new yu(t,i,s,n)}Accept(t){t.VisitRectNode(this)}GetBounds(){return this.data_.rect}GetTypeId(){return rr(Ad)}data(){return this.data_}}class iQ{constructor(e,t){c(this,"rect");c(this,"color");this.rect=e,this.color=t}}class Ak extends Nh{constructor(t,i){super();c(this,"data_");this.data_=new iQ(t,i)}Accept(t){t.VisitClearRectNode(this)}GetBounds(){return this.data_.rect}GetTypeId(){return rr(Ak)}data(){return this.data_}}class nQ{}class Uc extends nQ{constructor(t){super();c(this,"color_");this.color_=t}EQ(t){return this.color_==t.color_}Accept(t){t.visitSolidColorBrush(this)}static GetTypeId(){return rr(Uc)}GetTypeId(){return rr(Uc)}color(){return this.color_}CLONE(){return new Uc(this.color_.CLONE())}}var rl=(r=>(r[r.kBorderStyleNone=0]="kBorderStyleNone",r[r.kBorderStyleSolid=1]="kBorderStyleSolid",r))(rl||{});class xc{constructor(e,t,i){c(this,"width");c(this,"style");c(this,"color");e instanceof xc?(this.width=e.width,this.style=e.style,this.color=e.color.CLONE()):(this.width=e,this.style=t,this.color=i)}EQ(e){return this.style==e.style&&this.color.EQ(e.color)&&this.width==e.width}NE(e){return!this.EQ(e)}}class zF{constructor(e,t,i,s){c(this,"left");c(this,"right");c(this,"top");c(this,"bottom");arguments.length===1?(this.left=e,this.right=e,this.top=e,this.bottom=e):(this.left=e,this.right=t,this.top=i,this.bottom=s)}EQ(e){return this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom}}function I0(r){return r.overflow==_e.GetAuto()||r.overflow==_e.GetHidden()||r.overflow==_e.GetScroll()}class vu{constructor(e,t,i,s){c(this,"p1_");c(this,"p2_");c(this,"p3_");c(this,"p4_");this.p1_=e,this.p2_=t,this.p3_=i,this.p4_=s}static fromRectF(e){return new vu(new Hr(e.x(),e.y()),new Hr(e.right(),e.y()),new Hr(e.right(),e.bottom()),new Hr(e.x(),e.bottom()))}static FromMatrix3FAndRectF(e,t){return new vu(e.MUL(new Hr(t.x(),t.y())),e.MUL(new Hr(t.right(),t.y())),e.MUL(new Hr(t.right(),t.bottom())),e.MUL(new Hr(t.x(),t.bottom())))}static FromRectF(e){return new vu(new Hr(e.x(),e.y()),new Hr(e.right(),e.y()),new Hr(e.right(),e.bottom()),new Hr(e.x(),e.bottom()))}BoundingBox(){const{p1_:e,p2_:t,p3_:i,p4_:s}=this;let n=Math.min(Math.min(e.x(),t.x()),Math.min(i.x(),s.x())),o=Math.max(Math.max(e.x(),t.x()),Math.max(i.x(),s.x())),a=Math.min(Math.min(e.y(),t.y()),Math.min(i.y(),s.y())),l=Math.max(Math.max(e.y(),t.y()),Math.max(i.y(),s.y()));return new lr(n,a,o-n,l-a)}}class sQ{constructor(e,t){c(this,"source");c(this,"transform");this.source=e,this.transform=t.CLONE()}EQ(e){return this.source==e.source&&this.transform.EQ(e.transform)}}class Dy extends Nh{constructor(t,i){super();c(this,"data_");this.data_=new sQ(t,i)}Accept(t){t.VisitMatrixTransformNode(this)}GetBounds(){return vu.FromMatrix3FAndRectF(this.data_.transform,this.data_.source.GetBounds()).BoundingBox()}GetTypeId(){return rr(Dy)}data(){return this.data_}}class jF{constructor(e,t){this.node=e,this.box=t}AsLayoutTexes(){}}var Tr=(r=>(r[r.kBlockLevel=0]="kBlockLevel",r[r.kInlineLevel=1]="kInlineLevel",r))(Tr||{}),bd=(r=>(r[r.kCollapseMargins=0]="kCollapseMargins",r[r.kIgnore=1]="kIgnore",r[r.kSeparateAdjoiningMargins=2]="kSeparateAdjoiningMargins",r))(bd||{}),Gr=(r=>(r[r.kIsBoxAncestor=0]="kIsBoxAncestor",r[r.kIsBox=1]="kIsBox",r[r.kIsBoxDescendant=2]="kIsBoxDescendant",r))(Gr||{});class oQ{constructor(e,t,i,s){c(this,"is_usable_as_child_container");this.container_box=e,this.is_absolute_containing_block=t,this.has_absolute_position=i,this.has_overflow_hidden=s,this.is_usable_as_child_container=t}}class aQ{constructor(e){c(this,"node_");this.offset_=e}}class kd{constructor(){c(this,"shrink_to_fit_width_forced",!1);c(this,"freeze_width",!1);c(this,"freeze_height",!1);c(this,"containing_block_size",new Os);c(this,"containing_block_direction",tr.kLeftToRightBaseDirection);c(this,"maybe_margin_top");c(this,"maybe_margin_bottom");c(this,"maybe_height")}EQ(e){return this.shrink_to_fit_width_forced===e.shrink_to_fit_width_forced&&this.freeze_height==e.freeze_height&&this.freeze_width==e.freeze_width&&this.containing_block_size.EQ(e.containing_block_size)&&this.containing_block_direction===e.containing_block_direction}}class yc extends Ht{constructor(t,i){super();c(this,"css_computed_style_declaration_");c(this,"used_style_provider_");c(this,"parent_");c(this,"margin_box_offset_from_containing_block_",new ui);c(this,"static_position_offset_from_parent_",new Sn);c(this,"static_position_offset_from_containing_block_to_parent_",new Sn);c(this,"margin_insets_",new Sn);c(this,"border_insets_",new Sn);c(this,"padding_insets_",new Sn);c(this,"content_size_",new Os);c(this,"last_update_size_params_");c(this,"cached_render_tree_node_info_");c(this,"draw_order_position_in_stacking_context_");c(this,"blend_background_color_",!0);c(this,"collapsed_margin_top_");c(this,"collapsed_margin_bottom_");c(this,"collapsed_empty_margin_");c(this,"generating_html_","");c(this,"node");this.css_computed_style_declaration_=t,this.used_style_provider_=i,this.draw_order_position_in_stacking_context_=0}css_computed_style_declaration(){return this.css_computed_style_declaration_}computed_style(){return Q(this.css_computed_style_declaration_.data()),this.css_computed_style_declaration_.data()}AsAnonymousBlockBox(){}AsBlockContainerBox(){}AsContainerBox(){}isTextBox(){return!1}AsTextBox(){}AsInlineContainerBox(){}GetMarginCollapsingStatus(){return 0}IsPositioned(){return this.computed_style().IsPositioned()}IsTransformed(){return this.computed_style().IsTransformed()}IsAbsolutelyPositioned(){return this.computed_style().position==_e.GetAbsolute()||this.computed_style().position==_e.GetFixed()}IsHiddenByEllipsis(){return!1}IsStackingContext(){return!1}UpdateSize(t){this.ValidateUpdateSizeInputs(t)||(this.UpdateBorders(),this.UpdatePaddings(t),this.UpdateContentSizeAndMargins(t),this.InvalidateRenderTreeNodesOfBoxAndAncestors())}GetContainingBlockOffsetFromRoot(t){if(!this.parent_)return new ui;let i=this.GetContainingBlock();return i.GetContentBoxOffsetFromRoot(t).ADD(this.GetContainingBlockOffsetFromItsContentBox(i))}GetContainingBlockOffsetFromItsContentBox(t){return Q(t==this.GetContainingBlock()),this.IsAbsolutelyPositioned()?t.GetContentBoxOffsetFromPaddingBox().NEG():new ui}GetContainingBlockInsetFromItsContentBox(t){return Q(t==this.GetContainingBlock()),this.IsAbsolutelyPositioned()?new Sn(t.padding_left().NEG(),t.padding_top().NEG(),t.padding_right().NEG(),new me):new Sn}GetTransformedBoxFromRoot(t){return this.GetTransformedBoxFromContainingBlock(void 0,t)}GetTransformedBoxFromContainingBlock(t,i){return lQ(this.GetMarginBoxTransformFromContainingBlock(t),i)}GetTransformedBoxFromContainingBlockContentBox(t,i){return this.GetTransformedBoxFromContainingBlock(t,i).ADD(this.GetContainingBlockOffsetFromItsContentBox(t))}set_left(t){this.margin_box_offset_from_containing_block_.set_x(t)}left(){return this.margin_box_offset_from_containing_block_.x()}set_top(t){this.margin_box_offset_from_containing_block_.set_y(t)}top(){return this.margin_box_offset_from_containing_block_.y()}SetStaticPositionLeftFromParent(t){t.NE(this.static_position_offset_from_parent_.left())&&(this.static_position_offset_from_parent_.set_left(t),this.InvalidateUpdateSizeInputsOfBox())}SetStaticPositionLeftFromContainingBlockToParent(t){t.NE(this.static_position_offset_from_containing_block_to_parent_.left())&&(this.static_position_offset_from_containing_block_to_parent_.set_left(t),this.InvalidateUpdateSizeInputsOfBox())}GetStaticPositionLeft(){return Q(this.IsAbsolutelyPositioned()),this.static_position_offset_from_parent_.left().ADD(this.static_position_offset_from_containing_block_to_parent_.left())}SetStaticPositionRightFromParent(t){t.NE(this.static_position_offset_from_parent_.right())&&(this.static_position_offset_from_parent_.set_right(t),this.InvalidateUpdateSizeInputsOfBox())}SetStaticPositionRightFromContainingBlockToParent(t){t.NE(this.static_position_offset_from_containing_block_to_parent_.right())&&(this.static_position_offset_from_containing_block_to_parent_.set_right(t),this.InvalidateUpdateSizeInputsOfBox())}GetStaticPositionRight(){return Q(this.IsAbsolutelyPositioned()),this.static_position_offset_from_parent_.right().ADD(this.static_position_offset_from_containing_block_to_parent_.right())}SetStaticPositionTopFromParent(t){t.NE(this.static_position_offset_from_parent_.top())&&(this.static_position_offset_from_parent_.set_top(t),this.InvalidateUpdateSizeInputsOfBox())}SetStaticPositionTopFromContainingBlockToParent(t){t.NE(this.static_position_offset_from_containing_block_to_parent_.top())&&(this.static_position_offset_from_containing_block_to_parent_.set_top(t),this.InvalidateUpdateSizeInputsOfBox())}GetStaticPositionTop(){return Q(this.IsAbsolutelyPositioned()),this.static_position_offset_from_parent_.top().ADD(this.static_position_offset_from_containing_block_to_parent_.top())}margin_left(){return this.margin_insets_.left()}margin_top(){return this.margin_insets_.top()}margin_right(){return this.margin_insets_.right()}margin_bottom(){return this.margin_insets_.bottom()}GetMarginBoxWidth(){return this.margin_left().ADD(this.GetBorderBoxWidth()).ADD(this.margin_right())}GetMarginBoxHeight(){return this.margin_top().ADD(this.GetBorderBoxHeight()).ADD(this.margin_bottom())}set_margin_left(t){this.margin_insets_.set_left(t)}set_margin_top(t){this.margin_insets_.set_top(t)}set_margin_right(t){this.margin_insets_.set_right(t)}set_margin_bottom(t){this.margin_insets_.set_bottom(t)}GetMarginBoxTransformFromContainingBlock(t){let i=Li.Identity();if(this==t)return i;for(let s=this;;){if(i=ud(s.margin_box_offset_from_containing_block().x().toFloat(),s.margin_box_offset_from_containing_block().y().toFloat()).MUL(i),s.IsTransformed()){let a=s.margin_box_offset_from_containing_block().ADD(s.GetBorderBoxOffsetFromMarginBox());i=Cm(s.computed_style().transform,s.computed_style().transform_origin,new lr(a.x().toFloat(),a.y().toFloat(),s.GetBorderBoxWidth().toFloat(),s.GetBorderBoxHeight().toFloat())).MUL(i)}let n=s.GetContainingBlock();if(n==t||!n)break;let o=s.GetContainingBlockOffsetFromItsContentBox(n).ADD(n.GetContentBoxOffsetFromMarginBox());i=ud(o.x().toFloat(),o.y().toFloat()).MUL(i),s=n}return i}GetMarginBoxOffsetFromRoot(t){return(!t||!this.IsTransformed()?this.GetContainingBlockOffsetFromRoot(t):new ui).ADD(this.margin_box_offset_from_containing_block())}margin_box_offset_from_containing_block(){return this.margin_box_offset_from_containing_block_}GetMarginBoxRightEdgeOffsetFromContainingBlock(){return this.left().ADD(this.GetMarginBoxWidth())}GetMarginBoxBottomEdgeOffsetFromContainingBlock(){return this.top().ADD(this.GetMarginBoxHeight())}GetMarginBoxStartEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.GetMarginBoxRightEdgeOffsetFromContainingBlock():this.left()}GetMarginBoxEndEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.left():this.GetMarginBoxRightEdgeOffsetFromContainingBlock()}border_left_width(){return this.border_insets_.left()}border_top_width(){return this.border_insets_.top()}border_right_width(){return this.border_insets_.right()}border_bottom_width(){return this.border_insets_.bottom()}GetBorderBoxFromRoot(t){let i=this.GetBorderBoxOffsetFromRoot(t);return new Rs(i.x(),i.y(),this.GetBorderBoxWidth(),this.GetBorderBoxHeight())}GetClientRect(){return this.GetBorderBoxFromRoot(!1)}BorderBoxRect(){return new Rs(new ks,this.content_size_)}GetBorderBoxWidth(){return this.border_left_width().ADD(this.GetPaddingBoxWidth()).ADD(this.border_right_width())}GetBorderBoxHeight(){return this.border_top_width().ADD(this.GetPaddingBoxHeight()).ADD(this.border_bottom_width())}GetClampedBorderBoxSize(){return new Os(me.Max(new me,this.GetBorderBoxWidth()),me.Max(new me,this.GetBorderBoxHeight()))}GetBorderBoxFromMarginBox(){return new Rs(this.margin_left(),this.margin_top(),this.GetBorderBoxWidth(),this.GetBorderBoxHeight())}GetBorderBoxOffsetFromRoot(t){return this.GetMarginBoxOffsetFromRoot(t).ADD(this.GetBorderBoxOffsetFromMarginBox())}GetBorderBoxOffsetFromMarginBox(){return new ui(this.margin_left(),this.margin_top())}padding_left(){return this.padding_insets_.left()}padding_top(){return this.padding_insets_.top()}padding_right(){return this.padding_insets_.right()}padding_bottom(){return this.padding_insets_.bottom()}GetPaddingBoxWidth(){return this.padding_left().ADD(this.width()).ADD(this.padding_right())}GetPaddingBoxHeight(){return this.padding_top().ADD(this.height()).ADD(this.padding_bottom())}GetClampedPaddingBoxSize(){return new Os(me.Max(new me,this.GetPaddingBoxWidth()),me.Max(new me,this.GetPaddingBoxHeight()))}GetPaddingBoxFromMarginBox(){return new Rs(this.GetPaddingBoxLeftEdgeOffsetFromMarginBox(),this.GetPaddingBoxTopEdgeOffsetFromMarginBox(),this.GetPaddingBoxWidth(),this.GetPaddingBoxHeight())}GetPaddingBoxOffsetFromRoot(t){return this.GetBorderBoxOffsetFromRoot(t).ADD(this.GetPaddingBoxOffsetFromBorderBox())}GetPaddingBoxOffsetFromBorderBox(){return new ui(this.border_left_width(),this.border_top_width())}GetPaddingBoxLeftEdgeOffsetFromMarginBox(){return this.margin_left().ADD(this.border_left_width())}GetPaddingBoxTopEdgeOffsetFromMarginBox(){return this.margin_top().ADD(this.border_top_width())}SetPaddingInsets(t,i,s,n){this.padding_insets_.SetInsets(t,i,s,n)}width(){return this.content_size_.width()}height(){return this.content_size_.height()}content_box_size(){return this.content_size_}GetContentBoxFromMarginBox(){return new Rs(this.GetContentBoxLeftEdgeOffsetFromMarginBox(),this.GetContentBoxTopEdgeOffsetFromMarginBox(),this.width(),this.height())}GetContentBoxOffsetFromRoot(t){return this.GetMarginBoxOffsetFromRoot(t).ADD(this.GetContentBoxOffsetFromMarginBox())}GetContentBoxOffsetFromMarginBox(){return new ui(this.GetContentBoxLeftEdgeOffsetFromMarginBox(),this.GetContentBoxTopEdgeOffsetFromMarginBox())}GetContentBoxOffsetFromBorderBox(){return new ui(this.border_left_width().ADD(this.padding_left()),this.border_top_width().ADD(this.padding_top()))}GetContentBoxOffsetFromPaddingBox(){return new ui(this.padding_left(),this.padding_top())}GetContentBoxLeftEdgeOffsetFromMarginBox(){return this.margin_left().ADD(this.border_left_width()).ADD(this.padding_left())}GetContentBoxTopEdgeOffsetFromMarginBox(){return this.margin_top().ADD(this.border_top_width()).ADD(this.padding_top())}GetContentBoxOffsetFromContainingBlockContentBox(t){return this.GetContainingBlockOffsetFromItsContentBox(t).ADD(this.GetContentBoxOffsetFromContainingBlock())}GetContentBoxInsetFromContainingBlockContentBox(t){return this.GetContainingBlockInsetFromItsContentBox(t).ADD(this.GetContentBoxInsetFromContainingBlock(t))}GetContentBoxOffsetFromContainingBlock(){return new ui(this.GetContentBoxLeftEdgeOffsetFromContainingBlock(),this.GetContentBoxTopEdgeOffsetFromContainingBlock())}GetContentBoxInsetFromContainingBlock(t){let i=this.left().ADD(this.margin_right()).ADD(this.border_left_width()).ADD(this.padding_left());return new Sn(i,this.top().ADD(this.margin_top()).ADD(this.border_top_width()).ADD(this.padding_top()),t.width().SUB(i).SUB(this.width()),new me)}GetContentBoxLeftEdgeOffsetFromContainingBlock(){return this.left().ADD(this.GetContentBoxLeftEdgeOffsetFromMarginBox())}GetContentBoxTopEdgeOffsetFromContainingBlock(){return this.top().ADD(this.GetContentBoxTopEdgeOffsetFromMarginBox())}GetContentBoxStartEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.GetContentBoxLeftEdgeOffsetFromContainingBlock().ADD(this.width()):this.GetContentBoxLeftEdgeOffsetFromContainingBlock()}GetContentBoxEndEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.GetContentBoxLeftEdgeOffsetFromContainingBlock():this.GetContentBoxLeftEdgeOffsetFromContainingBlock().ADD(this.width())}GetContentToMarginHorizontal(){return this.margin_left().ADD(this.border_left_width()).ADD(this.padding_left()).ADD(this.padding_right()).ADD(this.border_right_width()).ADD(this.margin_right())}GetContentToMarginVertical(){return this.margin_top().ADD(this.border_top_width()).ADD(this.padding_top()).ADD(this.padding_bottom()).ADD(this.border_bottom_width()).ADD(this.margin_bottom())}GetInlineLevelBoxHeight(){return this.GetMarginBoxHeight()}GetInlineLevelTopMargin(){return new me}is_inline_before_blockification(){return this.css_computed_style_declaration_.data().is_inline_before_blockification()}GetSplitSibling(){}TryPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){Q(this.GetLevel()==1);let a=s||this.DoesFulfillEllipsisPlacementRequirement(),l;if(n)l=!0;else if(a){let u=this.GetMarginBoxEndEdgeOffsetFromContainingBlock(t);l=t==tr.kRightToLeftBaseDirection?i.GE(u):i.LE(u)}else l=!1;if(l){let{is_placed:u,is_placement_requirement_met:d,placed_offset:f}=this.DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o);n=u,s=d,o=f}return s=a,{is_placed:n,is_placement_requirement_met:s,placed_offset:o}}DoesFulfillEllipsisPlacementRequirement(){return!1}DoPreEllipsisPlacementProcessing(){}DoPostEllipsisPlacementProcessing(){}HasTrailingLineBreak(){return!1}ValidateUpdateSizeInputs(t){return this.last_update_size_params_&&t==this.last_update_size_params_?!0:(this.last_update_size_params_=t,!1)}InvalidateUpdateSizeInputsOfBox(){this.last_update_size_params_=void 0}InvalidateUpdateSizeInputsOfBoxAndAncestors(){this.InvalidateUpdateSizeInputsOfBox(),this.parent_&&this.parent_.InvalidateUpdateSizeInputsOfBoxAndAncestors()}InvalidateCrossReferencesOfBoxAndAncestors(){this.parent_&&this.parent_.InvalidateCrossReferencesOfBoxAndAncestors()}InvalidateRenderTreeNodesOfBoxAndAncestors(){this.cached_render_tree_node_info_=void 0,this.parent_&&this.parent_.InvalidateRenderTreeNodesOfBoxAndAncestors()}RenderAndAnimate(t,i,s){Q(s);let n=new tn(this.left().toFloat()+this.margin_left().toFloat(),this.top().toFloat()+this.margin_top().toFloat());if(n.ADD_ASSIGN(i),this.cached_render_tree_node_info_&&this.cached_render_tree_node_info_.offset_==n){this.cached_render_tree_node_info_.node_&&t.AddChild(this.cached_render_tree_node_info_.node_),this.AddBoxAndDescendantsToDrawOrderInStackingContext(s);return}this.draw_order_position_in_stacking_context_=s.AddToDrawOrderInThisStackingContext(),this.cached_render_tree_node_info_=new aQ(n);let o=this.computed_style().opacity.value(),a=!1;if(o<=0&&!a||this.IsHiddenByEllipsis())return;let l=new dh(n),u=this.ComputeRoundedCorners(),d=this.ComputePaddingRoundedCorners(u),f=this.computed_style().visibility==_e.GetVisible();if(f){let P=this.RenderAndAnimateBackgroundImage(d);P.is_opaque||this.RenderAndAnimateBackgroundColor(d,l),P.node&&l.AddChild(P.node),this.RenderAndAnimateBorder(u,l),this.RenderAndAnimateBoxShadow(u,d,l)}let g=I0(this.computed_style()),x=g,E=f&&this.computed_style().outline_style!=_e.GetNone()&&this.computed_style().outline_style!=_e.GetHidden()&&Zi(this.computed_style().outline_color).a()!=0;if(!g||!E&&this.computed_style().box_shadow==_e.GetNone()&&this.border_insets_.zero())this.RenderAndAnimateContent(l,s);else{let P=new dh;if(this.RenderAndAnimateContent(P,s),P.children().length>0){let{rounded_corners:b,overflow_node:R}=this.RenderAndAnimateOverflow(d,new fh(P),new tn(0,0));d=b,l.AddChild(R)}x=!1}if(E&&this.RenderAndAnimateOutline(l),l.children().length>0){let P=new fh(l);if(x){let{overflow_node:b,rounded_corners:R}=this.RenderAndAnimateOverflow(d,P,n);d=R,P=b}P=this.RenderAndAnimateTransform(P,n),P=this.RenderAndAnimateOpacity(P,o,a),Q(this.cached_render_tree_node_info_),this.cached_render_tree_node_info_.node_=P,t.AddChild(this.cached_render_tree_node_info_.node_)}}parent(){return this.parent_||void 0}GetAbsoluteContainingBlock(){if(!this.parent_)return this;let t=this.parent_;for(;t&&!t.IsContainingBlockForPositionAbsoluteElements();)t=t.parent_;return t}GetFixedContainingBlock(){if(!this.parent_)return this;let t=this.parent_;for(;t&&!t.IsContainingBlockForPositionFixedElements();)t=t.parent_;return t}GetContainingBlock(){return this.computed_style().position==_e.GetAbsolute()?this.GetAbsoluteContainingBlock():this.computed_style().position==_e.GetFixed()?this.GetFixedContainingBlock():this.parent_}GetStackingContext(){if(!this.parent_)return this;if(!this.IsPositioned()&&!this.IsStackingContext())return this.parent_;let t=this.parent_;for(;!t.IsStackingContext();)t=t.parent_;return t}GetZIndex(){return this.computed_style().z_index==_e.GetAuto()?0:this.computed_style().z_index.value()}GetOrder(){return this.computed_style().order.value()}InvalidateParent(){this.parent_=void 0}IsUnderCoordinate(t){let i=this.GetBorderBoxFromRoot(!0);return t.x().GE(i.x())&&t.x().LE(i.x().ADD(i.width()))&&t.y().GE(i.y())&&t.y().LE(i.y().ADD(i.height()))}GetRenderSequence(){let t=[],i=this,s;for(;i&&s!=i;)s=i,s.cached_render_tree_node_info_&&(t.push(s.draw_order_position_in_stacking_context_),i=s.GetStackingContext());return t}static IsRenderedLater(t,i){for(let s=1;s<=t.length;++s){if(i.length<s)return!0;let n=t.length-s,o=i.length-s;if(t[n]!=i[o])return t[n]>i[o]}return!1}ApplyTransformActionToCoordinate(t,i){let s=[];return s.push(i),this.ApplyTransformActionToCoordinates(t,s)}ApplyTransformActionToCoordinates(t,i){let s=this.computed_style().transform;if(s==_e.GetNone())return!0;let n=this.GetContainingBlockOffsetFromRoot(!0),o=this.margin_box_offset_from_containing_block().ADD(this.GetBorderBoxOffsetFromMarginBox());t==0&&o.ADD_ASSIGN(n);let a=Cm(s,this.computed_style().transform_origin,new lr(o.x().toFloat(),o.y().toFloat(),this.GetBorderBoxWidth().toFloat(),this.GetBorderBoxHeight().toFloat()));if(!a.IsIdentity()){if(t==0&&(a=a.Inverse(),a.IsZeros()))return!1;for(let u of i){let d=a.MUL(new Hr(u.x(),u.y()));u.set_x(d.x()),u.set_y(d.y())}}let l=new tn(n.x().toFloat(),n.y().toFloat());for(let u of i)t==0?u.SUB_ASSIGN(l):u.ADD_ASSIGN(l);return!0}set_blend_background_color(t){this.blend_background_color_=t}used_style_provider(){return this.used_style_provider_}set_width(t){this.content_size_.set_width(t)}set_height(t){this.content_size_.set_height(t)}HasNonZeroMarginOrBorderOrPadding(){return this.width().NE(this.GetMarginBoxWidth())||this.height().NE(this.GetMarginBoxHeight())}AddBoxAndDescendantsToDrawOrderInStackingContext(t){Q(t==this.GetStackingContext()),this.draw_order_position_in_stacking_context_=t.AddToDrawOrderInThisStackingContext()}UpdateCrossReferencesOfContainerBox(t,i,s,n,o,a){let l=this.computed_style().position,u=l!=_e.GetStatic(),d=i;if(u&&(l==_e.GetFixed()?d=n:l==_e.GetAbsolute()&&(d=s),d==1&&t.AddContainingBlockChild(this)),o==1&&(u||this.IsStackingContext())){Q(d!=2||l!=_e.GetFixed());let f=t,g=d,x=[],E=this.GetZIndex();if(l==_e.GetFixed()&&E==0)for(let P of a)P.is_usable_as_child_container=!1;else if(d==2){let P=!1,b=l==_e.GetAbsolute();for(let R of a){if(E==0&&R.is_usable_as_child_container){Q(R.is_absolute_containing_block),f=R.container_box,g=P?2:1;break}(R.is_absolute_containing_block||!b)&&(P=!0,b=R.has_absolute_position,R.has_overflow_hidden&&x.push(R.container_box))}x.reverse()}f.AddStackingContextChild(this,E,g,x)}}UpdateHorizontalMarginsAssumingBlockLevelInFlowBox(t,i,s,n,o){let a=n,l=o;if((a||new me).ADD(s).ADD(l||new me).GT(i)&&(a=a||new me,l=l||new me),a&&(!l||t==tr.kLeftToRightBaseDirection))this.set_margin_left(a),this.set_margin_right(i.SUB(a).SUB(s));else if(l)this.set_margin_left(i.SUB(s).SUB(l)),this.set_margin_right(l);else{let u=i.SUB(s).DIV(2);this.set_margin_left(u),this.set_margin_right(u)}}SetBorderInsets(t,i,s,n){this.border_insets_.SetInsets(t,i,s,n)}IsBorderStyleNoneOrHidden(t){return t==_e.GetNone()||t==_e.GetHidden()}ResetBorderInsets(){this.border_insets_=new Sn}UpdateBorders(){if(wp(this.computed_style().border_left_style)&&wp(this.computed_style().border_top_style)&&wp(this.computed_style().border_right_style)&&wp(this.computed_style().border_bottom_style)){this.border_insets_=new Sn;return}this.border_insets_.SetInsets(bF(this.computed_style()),kF(this.computed_style()),TF(this.computed_style()),PF(this.computed_style()))}UpdatePaddings(t){this.padding_insets_.SetInsets(RF(this.computed_style(),t.containing_block_size),DF(this.computed_style(),t.containing_block_size),CF(this.computed_style(),t.containing_block_size),OF(this.computed_style(),t.containing_block_size))}ComputeRoundedCorners(){let t=new Yq(this.GetClampedBorderBoxSize().toSizeF()),i=new Nr,s=new Nr,n=new Nr,o=new Nr;this.computed_style().border_top_left_radius.Accept(t),t.rounded_corner()&&(i=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical)),this.computed_style().border_top_right_radius.Accept(t),t.rounded_corner()&&(s=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical)),this.computed_style().border_bottom_right_radius.Accept(t),t.rounded_corner()&&(n=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical)),this.computed_style().border_bottom_left_radius.Accept(t),t.rounded_corner()&&(o=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical));let a;return(!i.IsSquare()||!s.IsSquare()||!n.IsSquare()||!o.IsSquare())&&(a=new Lc(i,s,n,o),a=a.Normalize(new lr(this.GetClampedBorderBoxSize().toSizeF()))),a}ComputePaddingRoundedCorners(t){let i;t&&!this.border_insets_.zero()&&(i=t.Inset(new rQ(this.border_insets_.left().toFloat(),this.border_insets_.top().toFloat(),this.border_insets_.right().toFloat(),this.border_insets_.bottom().toFloat())));let s=i||t;return s&&s.Normalize(new lr(this.GetClampedPaddingBoxSize().toSizeF()))}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){throw new Error("umimplemented")}GetBackgroundRect(){return new lr(new Hr(this.border_left_width().toFloat(),this.border_top_width().toFloat()),this.GetClampedPaddingBoxSize().toSizeF())}GetMarginBoxTransformFromContainingBlockInternal(t,i){let s=Li.Identity();if(this==t)return s;for(let n=this;;){if(s=ud(n.margin_box_offset_from_containing_block().x().toFloat(),n.margin_box_offset_from_containing_block().y().toFloat()).MUL(s),n.IsTransformed()){let l=n.margin_box_offset_from_containing_block().ADD(n.GetBorderBoxOffsetFromMarginBox());s=Cm(n.computed_style().transform,n.computed_style().transform_origin,new lr(l.x().toFloat(),l.y().toFloat(),n.GetBorderBoxWidth().toFloat(),n.GetBorderBoxHeight().toFloat())).MUL(s)}const o=n.GetContainingBlock();if(o==t||!o)break;let a=n.GetContainingBlockOffsetFromItsContentBox(o).ADD(o.GetContentBoxOffsetFromMarginBox());s=ud(a.x().toFloat(),a.y().toFloat()).MUL(s),n=o}return s}RenderAndAnimateBorder(t,i){if(this.border_insets_.zero()||uQ(this.computed_style()))return;let s=new lr(this.GetClampedBorderBoxSize().toSizeF()),n=new yu(s);cQ(t,this.computed_style(),n);let o=new Ad(n);i.AddChild(o)}RenderAndAnimateOutline(t){let i=new lr(this.GetClampedBorderBoxSize().toSizeF()),s=new yu(i);hQ(i,this.computed_style(),s);let n=new Ad(s);t.AddChild(n)}RenderAndAnimateBackgroundColor(t,i){let s=!1;if(!this.blend_background_color_){Q(!t),Q(!s),i.AddChild(new Ak(this.GetBackgroundRect(),Zi(this.computed_style().background_color)));return}if(!(Zi(this.computed_style().background_color).a()==0)||s){let o=new yu(this.GetBackgroundRect());if(dQ(t,this.computed_style(),o),!o.rect.IsEmpty()){let a=new Ad(o);i.AddChild(a)}}}RenderAndAnimateBackgroundImage(t){let i=Object.create(null);return i.is_opaque=!1,i}RenderAndAnimateBoxShadow(t,i,s){this.computed_style().box_shadow!=_e.GetNone()&&Ue()}RenderAndAnimateOpacity(t,i,s){return t}RenderAndAnimateOverflow(t,i,s){t=this.ComputeRoundedCorners();let n=this.ComputePaddingRoundedCorners(t),{overflow_node:o,rounded_corners:a}=this.RenderAndAnimateOverflow(n,i,s);return t=a,{overflow_node:o,rounded_corners:t}}RenderAndAnimateTransform(t,i){let s=!1;{let o=this.computed_style().transform;o!=_e.GetNone()&&(s=o.HasTrait(Vb.kTraitIsDynamic))}let n=new lr(py(i),this.GetClampedBorderBoxSize().toSizeF());if(s)return new Dy(t,Li.Identity());if(this.IsTransformed()){let o=Cm(this.computed_style().transform,this.computed_style().transform_origin,n);return o.IsIdentity()?t:new Dy(t,o)}return t}SetGeneratingNode(t){this.node=t,t.SetLayoutObject(new jF(t,this));let i=new RN;i.SerializeSelfOnly(t),this.generating_html_=i.toString()}DumpWithIndent(t="",i=2){return this.generating_html_.length&&(t=this.DumpIndent(t,i),t+="# ",t+=this.generating_html_,t+=`
`),t=this.DumpIndent(t,i),t=this.DumpClassName(t),t=this.DumpProperties(t),t+=`
`,this.DumpChildrenWithIndent(t,i+2)}DumpIndent(t,i){for(;i--;)t+=" ";return t}DumpProperties(t){return t+="left=",t+=this.left(),t+=" ",t+="top=",t+=this.top(),t+=" ",t+="width=",t+=this.width(),t+=" ",t+="height=",t+=this.height(),t+=" ",t+="margin=",t+=this.margin_insets_.toString(),t+=" ",t+="border_width=",t+=this.border_insets_.toString(),t+=" ",t+="padding=",t+=this.padding_insets_.toString(),t+=" ",t+="baseline=",t+=this.GetBaselineOffsetFromTopMarginEdge(),t+=" ",this.css_computed_style_declaration_&&this.css_computed_style_declaration_.data()&&(t+="is_inline_before_blockification=",t+=this.is_inline_before_blockification(),t+=" "),t}DumpChildrenWithIndent(t,i){return t}LocalRectToAbsoluteQuad(t,i){return this.LocalRectToAncestorQuad(t,void 0,i)}LocalRectToAncestorQuad(t,i,s){return this.LocalToAncestorQuad(vu.fromRectF(lr.fromRectLayoutUnit(t)),i,s)}LocalToAncestorQuad(t,i,s){Ue()}}function wp(r){return r==_e.GetNone()||r==_e.GetHidden()}function lQ(r,e){let t=4,i=[new Hr(e.x().toFloat(),e.y().toFloat()),new Hr(e.right().toFloat(),e.y().toFloat()),new Hr(e.x().toFloat(),e.bottom().toFloat()),new Hr(e.right().toFloat(),e.bottom().toFloat())];for(let o=0;o<t;++o)i[o]=r.MUL(i[o]);let s=i[0],n=i[0];for(let o=1;o<t;++o)s.SetToMin(i[o]),n.SetToMax(i[o]);return new Rs(new me(s.x()),new me(s.y()),new me(n.x()-s.x()),new me(n.y()-s.y()))}function Cm(r,e,t){if(r==_e.GetNone())return Li.Identity();let s=r.ToMatrix(t.size()),n=Qq(t,e);return ud(n.x(),n.y()).MUL(s).MUL(ud(-n.x(),-n.y()))}function uQ(r){return Zi(r.border_left_color).a()==0&&Zi(r.border_right_color).a()==0&&Zi(r.border_top_color).a()==0&&Zi(r.border_bottom_color).a()==0}function cQ(r,e,t){t.border=fQ(e),r&&(t.rounded_corners=new Lc(r))}function hQ(r,e,t){_Q(r,e,t,ld(e.outline_width).toFloat())}function dQ(r,e,t){t.background_brush=new Uc(Zi(e.background_color)),r&&(t.rounded_corners=new Lc(r))}function fQ(r){let e=new xc(ld(r.border_left_width).toFloat(),Ap(r.border_left_style),Zi(r.border_left_color)),t=new xc(ld(r.border_right_width).toFloat(),Ap(r.border_right_style),Zi(r.border_right_color)),i=new xc(ld(r.border_top_width).toFloat(),Ap(r.border_top_style),Zi(r.border_top_color)),s=new xc(ld(r.border_bottom_width).toFloat(),Ap(r.border_bottom_style),Zi(r.border_bottom_color));return new zF(e,t,i,s)}function Ap(r){let e=rl.kBorderStyleNone;return wp(r)||(Kt(r,_e.GetSolid()),e=rl.kBorderStyleSolid),e}function _Q(r,e,t,i){t.rect=r,t.rect.Outset(i,i),i!=0&&(t.border=new zF(new xc(i,Ap(e.outline_style),Zi(e.outline_color))))}class pQ{constructor(e,t,i,s){c(this,"box");c(this,"z_index");c(this,"containing_block_relationship");c(this,"overflow_hidden_to_apply");this.box=e,this.z_index=t,this.containing_block_relationship=i,this.overflow_hidden_to_apply=s}}class gQ{EXEC(e,t){return e.z_index<t.z_index}}class bk extends yc{constructor(){super(...arguments);c(this,"child_boxes_",[]);c(this,"positioned_child_boxes_",[]);c(this,"negative_z_index_stacking_context_children_",new Map);c(this,"non_negative_z_index_stacking_context_children_",new Map);c(this,"update_size_results_valid_",!1);c(this,"are_cross_references_valid_",!1);c(this,"are_bidi_levels_runs_split_",!1);c(this,"next_draw_order_position_",0)}SplitBidiLevelRuns(){if(!this.are_bidi_levels_runs_split_){this.are_bidi_levels_runs_split_=!0;for(let t of this.child_boxes_)t.SplitBidiLevelRuns()}}InvalidateCrossReferencesOfBoxAndAncestors(){this.are_cross_references_valid_=!1,super.InvalidateCrossReferencesOfBoxAndAncestors()}RenderAndAnimateContent(t,i){let s=this;s.next_draw_order_position_=0,this.IsStackingContext()&&(i=s,i.UpdateCrossReferences());let n=new ui(this.GetContentBoxOffsetFromBorderBox());this.RenderAndAnimateStackingContextChildren(this.negative_z_index_stacking_context_children_,t,n,i);for(let o of this.child_boxes_)!o.IsPositioned()&&!o.IsStackingContext()&&o.RenderAndAnimate(t,n.toVector2dF(),s);this.RenderAndAnimateStackingContextChildren(this.non_negative_z_index_stacking_context_children_,t,n,i)}IsContainingBlockForPositionAbsoluteElements(){return!this.parent()||this.computed_style().IsContainingBlockForPositionAbsoluteElements()}IsContainingBlockForPositionFixedElements(){return!this.parent()||this.IsTransformed()}IsStackingContext(){return!this.parent()||this.computed_style().opacity.value()<1||this.IsTransformed()||this.IsPositioned()&&this.computed_style().z_index!=_e.GetAuto()||this.computed_style().position==_e.GetFixed()}UpdateRectOfPositionedChildBoxes(t,i){this.UpdateCrossReferences();for(let s of this.child_boxes_){Kt(this,s.GetContainingBlock());let n=s.computed_style().position;n==_e.GetAbsolute()?this.UpdateRectOfAbsolutelyPositionedChildBox(s,i):n==_e.GetFixed()?this.UpdateRectOfAbsolutelyPositionedChildBox(s,t):n==_e.GetStatic()||(Q(n==_e.GetRelative()),this.UpdateOffsetOfRelativelyPositionedChildBox(s,t)),this.positioned_child_boxes_.length}}PushBackDirectChild(t){Q(!t.parent()),Q(!this.update_size_results_valid_),Q(!this.are_cross_references_valid_),t.parent_=this,this.child_boxes_.push(t)}InsertSplitSiblingOfDirectChild(t){let s=this.child_boxes_[t].GetSplitSibling();Q(s),Q(!s.parent()),s.parent_=this,this.child_boxes_.splice(t+1,0,s),this.update_size_results_valid_=!1;let n=s.IsPositioned();return n&&(s.GetContainingBlock().are_cross_references_valid_=!1),(n||s.IsStackingContext())&&(s.GetStackingContext().are_cross_references_valid_=!1),this.InvalidateRenderTreeNodesOfBoxAndAncestors(),t+1}MoveDirectChildrenToSplitSibling(t){Q(t!=this.child_boxes_.length);let i=this.GetSplitSibling();Q(i),Q(!i.parent()),Q(!i.update_size_results_valid_),Q(!i.are_cross_references_valid_);for(let s=t;s<this.child_boxes_.length;s++){let n=this.child_boxes_[s];n.parent_=i,i.child_boxes_.push(n)}if(this.child_boxes_.length=t,this.update_size_results_valid_=!1,this.positioned_child_boxes_.length&&(this.are_cross_references_valid_=!1),this.HasStackingContextChildren()||I0(this.computed_style())){let s=this;for(;!s.IsStackingContext();)s=s.parent();s.HasStackingContextChildren()&&(s.are_cross_references_valid_=!1)}this.InvalidateRenderTreeNodesOfBoxAndAncestors()}child_boxes(){return this.child_boxes_}UpdateCrossReferencesOfContainerBox(t,i,s,n,o,a){super.UpdateCrossReferencesOfContainerBox(t,i,s,n,o,a);const l=Gr.kIsBoxDescendant;let u=s!=Gr.kIsBoxDescendant&&this.IsContainingBlockForPositionAbsoluteElements()?Gr.kIsBoxDescendant:s,d=n!=Gr.kIsBoxDescendant&&this.IsContainingBlockForPositionFixedElements()?Gr.kIsBoxDescendant:n,f=o!=Gr.kIsBoxDescendant&&this.IsStackingContext()?Gr.kIsBoxDescendant:o;if(f==Gr.kIsBox){this.negative_z_index_stacking_context_children_.clear(),this.non_negative_z_index_stacking_context_children_.clear();let g=this.computed_style().position==_e.GetAbsolute(),x=I0(this.computed_style());a.push(new oQ(this,this.IsContainingBlockForPositionAbsoluteElements(),g,x))}if(u==Gr.kIsBox||d==Gr.kIsBox||f==Gr.kIsBox)for(let g of this.child_boxes_)g.UpdateCrossReferencesOfContainerBox(t,l,u,d,f,a);f==Gr.kIsBox&&a.pop()}ValidateUpdateSizeInputs(t){return super.ValidateUpdateSizeInputs(t)&&this.update_size_results_valid_?!0:(this.update_size_results_valid_=!0,!1)}InvalidateUpdateSizeInputs(){this.update_size_results_valid_=!1}AddBoxAndDescendantsToDrawOrderInStackingContext(t){if(super.AddBoxAndDescendantsToDrawOrderInStackingContext(t),!this.IsStackingContext()){Q(this.negative_z_index_stacking_context_children_.size);for(let[i,s]of this.non_negative_z_index_stacking_context_children_)i.box.AddBoxAndDescendantsToDrawOrderInStackingContext(t)}}AddToDrawOrderInThisStackingContext(){return this.next_draw_order_position_++}UpdateCrossReferences(){if(!this.are_cross_references_valid_){let t=this.IsStackingContext();this.positioned_child_boxes_.length=0,t&&(this.negative_z_index_stacking_context_children_.clear(),this.non_negative_z_index_stacking_context_children_.clear());let i=[];const s=Gr.kIsBox;let n=this.IsContainingBlockForPositionAbsoluteElements()?Gr.kIsBox:Gr.kIsBoxAncestor,o=this.IsContainingBlockForPositionFixedElements()?Gr.kIsBox:Gr.kIsBoxAncestor,a=t?Gr.kIsBox:Gr.kIsBoxAncestor;for(let l of this.child_boxes_)l.UpdateCrossReferencesOfContainerBox(this,s,n,o,a,i);this.are_cross_references_valid_=!0}}AddContainingBlockChild(t){Kt(this,t.GetContainingBlock()),this.positioned_child_boxes_.push(t)}AddStackingContextChild(t,i,s,n){Kt(i,t.GetZIndex()),Q(this.IsStackingContext()?this==t.GetStackingContext():this.GetStackingContext()==t.GetStackingContext()&&i==0),(i<0?this.negative_z_index_stacking_context_children_:this.non_negative_z_index_stacking_context_children_).set(new pQ(t,i,s,n),new gQ)}HasStackingContextChildren(){return this.negative_z_index_stacking_context_children_.size>0||this.non_negative_z_index_stacking_context_children_.size>0}UpdateOffsetOfRelativelyPositionedChildBox(t,i){Kt(t.computed_style().position,_e.GetRelative());let s=xk(t.computed_style(),i.containing_block_size),n=wF(t.computed_style(),i.containing_block_size),o=yk(t.computed_style(),i.containing_block_size),a=AF(t.computed_style(),i.containing_block_size),l=new ui;!s&&!n?l.set_x(new me):s&&!n?l.set_x(s):!s&&n?l.set_x(n.NEG()):i.containing_block_direction==tr.kLeftToRightBaseDirection?l.set_x(s):l.set_x(n.NEG()),!o&&!a?l.set_y(new me):o&&!a?l.set_y(o):!o&&a?l.set_y(a.NEG()):l.set_y(o),t.set_left(t.left().ADD(l.x())),t.set_top(t.top().ADD(l.y()))}UpdateRectOfAbsolutelyPositionedChildBox(t,i){let s=mQ(this,t);t.SetStaticPositionLeftFromContainingBlockToParent(s.left()),t.SetStaticPositionRightFromContainingBlockToParent(s.right()),t.SetStaticPositionTopFromContainingBlockToParent(s.top()),t.UpdateSize(i)}RenderAndAnimateStackingContextChildren(t,i,s,n){let o=new yQ(n,this,s,i);for(let[a,l]of t)Q(this.IsStackingContext()?this==a.box.GetStackingContext():this.GetStackingContext()==a.box.GetStackingContext()&&a.z_index==0),o.RenderAndAnimateChild(a)}DumpChildrenWithIndent(t,i){t=super.DumpChildrenWithIndent(t,i);for(let s of this.child_boxes())t=s.DumpWithIndent(t,i);return t}AsContainerBox(){return this}AbsoluteQuads(t,i=0){this.QuadsInternal(t,i,!0)}QuadsInternal(t,i,s){s?this.AbsoluteQuadsForSelf(t,i):Ue()}dispose(){super.dispose();for(let t of this.child_boxes_)t.dispose();this.child_boxes_.length=0}}function mQ(r,e){Q(e.IsAbsolutelyPositioned()),Kt(e.GetContainingBlock());let t=new Sn,i=e.parent();if(!i)throw new Error("500");for(;i!=r;){Q(i.parent()),Q(!i.IsTransformed());const s=i.GetContainingBlock();t.ASS_ASSIGN(i.GetContentBoxInsetFromContainingBlockContentBox(s)),i=s}return t.ASS_ASSIGN(new Sn(r.padding_left(),r.padding_top(),r.padding_right(),new me)),t}class xQ{constructor(e){c(this,"node_builder");c(this,"containing_block");this.node_builder=new dh(new tn),this.containing_block=e}}class yQ{constructor(e,t,i,s){c(this,"stacking_context_");c(this,"child_container_");c(this,"child_container_offset_from_parent_node_");c(this,"base_node_builder_");c(this,"overflow_hidden_stack_",[]);this.stacking_context_=e,this.child_container_=t,this.child_container_offset_from_parent_node_=i,this.base_node_builder_=s}RenderAndAnimateChild(e){this.ApplyOverflowHiddenForChild(e.overflow_hidden_to_apply);const t=e.box.GetContainingBlock();let i=this.child_container_offset_from_parent_node_.ADD(this.GetOffsetFromChildContainerToContainingBlockContentBox(t,e.containing_block_relationship)).ADD(e.box.GetContainingBlockOffsetFromItsContentBox(t));e.box.RenderAndAnimate(this.GetActiveNodeBuilder(),i.toVector2dF(),this.stacking_context_)}ApplyOverflowHiddenForChild(e){let t=0;for(;t<e.length&&t<this.overflow_hidden_stack_.length&&e[t]==this.overflow_hidden_stack_[t].containing_block;++t);for(;t<this.overflow_hidden_stack_.length;)this.PopOverflowHiddenEntryFromStack();for(;t<e.length;++t)this.overflow_hidden_stack_.push(new xQ(e[t]))}PopOverflowHiddenEntryFromStack(){Q(this.overflow_hidden_stack_.length);let e=this.overflow_hidden_stack_[this.overflow_hidden_stack_.length-1],t=e.containing_block;Q(I0(t.computed_style()));let i=this.GetOffsetFromChildContainerToContainingBlockContentBox(t,Gr.kIsBoxAncestor).SUB(t.GetContentBoxOffsetFromBorderBox()),{rounded_corners:s,overflow_node:n}=t.RenderAndAnimateOverflow(void 0,new fh(e.node_builder),new tn(i.x().toFloat(),i.y().toFloat())),o=n;this.overflow_hidden_stack_.pop(),this.GetActiveNodeBuilder().AddChild(o)}GetActiveNodeBuilder(){return this.overflow_hidden_stack_.length===0?this.base_node_builder_:this.overflow_hidden_stack_[this.overflow_hidden_stack_.length-1].node_builder}GetOffsetFromChildContainerToContainingBlockContentBox(e,t){if(t==Gr.kIsBox)return Kt(this.child_container_),new ui;let i=new ui,s=t==Gr.kIsBoxAncestor?this.child_container_:e,n=t==Gr.kIsBoxAncestor?e:this.child_container_;for(;s!=n&&s.parent()&&!s.IsTransformed();){const a=s.GetContainingBlock();i.ADD_ASSIGN(s.GetContentBoxOffsetFromContainingBlockContentBox(a)),s=a}let o=s;for(s=n,n=o;s!=n;){Q(s.parent()),Q(!s.IsTransformed());const a=s.GetContainingBlock();i.SUB_ASSIGN(s.GetContentBoxOffsetFromContainingBlockContentBox(a)),s=a}return t==Gr.kIsBoxAncestor&&(i=i.NEG()),i}}var qi=(r=>(r[r.kWrapAtPolicyBefore=0]="kWrapAtPolicyBefore",r[r.kWrapAtPolicyLastOpportunityWithinWidth=1]="kWrapAtPolicyLastOpportunityWithinWidth",r[r.kWrapAtPolicyLastOpportunity=2]="kWrapAtPolicyLastOpportunity",r[r.kWrapAtPolicyFirstOpportunity=3]="kWrapAtPolicyFirstOpportunity",r))(qi||{}),Qa=(r=>(r[r.kWrapOpportunityPolicyNormal=0]="kWrapOpportunityPolicyNormal",r[r.kWrapOpportunityPolicyBreakWord=1]="kWrapOpportunityPolicyBreakWord",r[r.kWrapOpportunityPolicyBreakWordOrNormal=2]="kWrapOpportunityPolicyBreakWordOrNormal",r))(Qa||{}),ar=(r=>(r[r.kWrapResultNoWrap=0]="kWrapResultNoWrap",r[r.kWrapResultWrapBefore=1]="kWrapResultWrapBefore",r[r.kWrapResultSplitWrap=2]="kWrapResultSplitWrap",r))(ar||{});function VF(r,e){return e?r!==0:r!==2}class WF extends bk{constructor(t,i,s){super(t,s);c(this,"maybe_baseline_offset_from_top_margin_edge_");c(this,"base_direction_");this.base_direction_=i}AsBlockContainerBox(){return this}UpdateContentSizeAndMargins(t){let i=vk(this.computed_style(),t.containing_block_size),s=Object.create(null),n=yk(this.computed_style(),t.containing_block_size),o=AF(this.computed_style(),t.containing_block_size),a=Ek(this.computed_style(),t.containing_block_size),l=Sk(this.computed_style(),t.containing_block_size);if(t.freeze_height&&(i=this.height()),!t.freeze_width){let f=NF(this.computed_style(),t.containing_block_size,s),g=Sv(this.computed_style(),t.containing_block_size),x=wv(this.computed_style(),t.containing_block_size),E=xk(this.computed_style(),t.containing_block_size),P=wF(this.computed_style(),t.containing_block_size);this.UpdateContentWidthAndMargins(t.containing_block_direction,t.containing_block_size.width(),t.shrink_to_fit_width_forced,s.depends_on_containing_block,E,P,g,x,f,i);let b=Object.create(null),R=FF(this.computed_style(),t.containing_block_size,b);R&&this.width().GT(R)&&this.UpdateContentWidthAndMargins(t.containing_block_direction,t.containing_block_size.width(),t.shrink_to_fit_width_forced,b.depends_on_containing_block,E,P,g,x,R,i);let D=Object.create(null),C=BF(this.computed_style(),t.containing_block_size,D);C&&this.width().LT(C||new me)&&this.UpdateContentWidthAndMargins(t.containing_block_direction,t.containing_block_size.width(),t.shrink_to_fit_width_forced,D.depends_on_containing_block,E,P,g,x,C,i)}this.UpdateContentHeightAndMargins(t.containing_block_size,n,o,a,l,i);let u=LF(this.computed_style(),t.containing_block_size);u&&this.height().GT(u)&&this.UpdateContentHeightAndMargins(t.containing_block_size,n,o,a,l,u);let d=UF(this.computed_style(),t.containing_block_size);d&&this.height().LT(d)&&this.UpdateContentHeightAndMargins(t.containing_block_size,n,o,a,l,d)}TryWrapAt(t,i,s,n,o){return Q(!this.IsAbsolutelyPositioned()),Kt(Tr.kInlineLevel,this.GetLevel()),ar.kWrapResultNoWrap}TrySplitAtSecondBidiLevelRun(){return!1}GetBidiLevel(){}SetShouldCollapseLeadingWhiteSpace(t){Kt(Tr.kInlineLevel,this.GetLevel())}SetShouldCollapseTrailingWhiteSpace(t){Kt(Tr.kInlineLevel,this.GetLevel())}HasLeadingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),!1}HasTrailingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),!1}IsCollapsed(){return Kt(Tr.kInlineLevel,this.GetLevel()),!1}JustifiesLineExistence(){return Kt(Tr.kInlineLevel,this.GetLevel()),!0}AffectsBaselineInBlockFormattingContext(){return!!this.maybe_baseline_offset_from_top_margin_edge_}GetBaselineOffsetFromTopMarginEdge(){return this.maybe_baseline_offset_from_top_margin_edge_||this.GetMarginBoxHeight()}TrySplitAtEnd(){}base_direction(){return this.base_direction_}GetShrinkToFitWidth(t,i){let s=new kd;return s.containing_block_direction=this.base_direction_,s.containing_block_size.set_width(t.SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right())),s.containing_block_size.set_height(i||new me),s.shrink_to_fit_width_forced=!0,this.UpdateRectOfInFlowChildBoxes(s).shrink_to_fit_width()}IsTransformable(){return!0}UpdateContentWidthAndMargins(t,i,s,n,o,a,l,u,d,f){if(this.IsAbsolutelyPositioned())this.UpdateWidthAssumingAbsolutelyPositionedBox(t,i,o,a,d,l,u,f);else{let g=d,x=this.GetLevel();switch(s&&(x=Tr.kInlineLevel,n&&(g=void 0)),x){case Tr.kBlockLevel:this.UpdateWidthAssumingBlockLevelInFlowBox(t,i,g,l,u);break;case Tr.kInlineLevel:this.UpdateWidthAssumingInlineLevelInFlowBox(i,g,l,u,f);break}}}UpdateContentHeightAndMargins(t,i,s,n,o,a){let l=new kd,u=new kd;l.containing_block_direction=this.base_direction_,u.containing_block_direction=this.base_direction_,this.AsAnonymousBlockBox()?l.containing_block_size=t:(l.containing_block_size.set_width(this.width()),u.containing_block_size.set_width(this.GetPaddingBoxWidth()),a?l.containing_block_size.set_height(a):i&&s?l.containing_block_size.set_height(t.height().SUB(i).SUB(s)):l.containing_block_size.set_height(new me)),l.maybe_margin_top=n,l.maybe_margin_bottom=o,l.maybe_height=a;let d=this.UpdateRectOfInFlowChildBoxes(l);this.IsAbsolutelyPositioned()?this.UpdateHeightAssumingAbsolutelyPositionedBox(t.height(),i,s,a,n,o,d):this.UpdateHeightAssumingInFlowBox(a,n,o,d),l.containing_block_size.set_height(this.height()),u.containing_block_size.set_height(this.GetPaddingBoxHeight()),this.UpdateRectOfPositionedChildBoxes(l,u),d.maybe_baseline_offset_from_top_content_edge()?this.maybe_baseline_offset_from_top_margin_edge_=this.margin_top().ADD(this.border_top_width()).ADD(this.padding_top()).ADD(d.maybe_baseline_offset_from_top_content_edge()):this.maybe_baseline_offset_from_top_margin_edge_=void 0}UpdateWidthAssumingAbsolutelyPositionedBox(t,i,s,n,o,a,l,u){if(!s&&!o&&!n){this.set_margin_left(a||new me),this.set_margin_right(l||new me),t==tr.kLeftToRightBaseDirection?(this.set_left(this.GetStaticPositionLeft()),this.set_width(this.GetShrinkToFitWidth(i,u))):(this.set_width(this.GetShrinkToFitWidth(i,u)),this.set_left(i.SUB(this.GetStaticPositionRight()).SUB(this.GetMarginBoxWidth())));return}if(s&&o&&n){this.set_left(s),this.set_width(o);let d=i.SUB(s).SUB(this.GetBorderBoxWidth()).SUB(n);if(!a&&!l){let f=d.DIV(2);f.LT(new me)?t==tr.kLeftToRightBaseDirection?(this.set_margin_left(new me),this.set_margin_right(d)):(this.set_margin_left(d),this.set_margin_right(new me)):(this.set_margin_left(f),this.set_margin_right(f))}else a?l?(this.set_margin_left(a),this.set_margin_right(l),t==tr.kRightToLeftBaseDirection&&this.set_left(i.SUB(this.GetMarginBoxWidth()).SUB(n))):(this.set_margin_left(a),this.set_margin_right(d.SUB(a))):(this.set_margin_left(d.SUB(l)),this.set_margin_right(l));return}if(this.set_margin_left(a||new me),this.set_margin_right(l||new me),!s&&!o&&n){this.set_width(this.GetShrinkToFitWidth(i,u)),this.set_left(i.SUB(this.GetMarginBoxWidth()).SUB(n));return}if(!s&&!n&&o){this.set_width(o),t==tr.kLeftToRightBaseDirection?this.set_left(this.GetStaticPositionLeft()):this.set_left(i.SUB(this.GetStaticPositionRight()).SUB(this.GetMarginBoxWidth()));return}if(!o&&!n&&s){this.set_left(s),this.set_width(this.GetShrinkToFitWidth(i,u));return}if(!s&&o&&n){this.set_width(o),this.set_left(i.SUB(this.GetMarginBoxWidth()).SUB(n));return}if(!o&&s&&n){this.set_left(s),this.set_width(i.SUB(s).SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right()).SUB(n));return}if(!n&&s&&o){this.set_left(s),this.set_width(o);return}}UpdateHeightAssumingAbsolutelyPositionedBox(t,i,s,n,o,a,l){if(!i&&!n&&!s){this.set_margin_top(o||new me),this.set_margin_bottom(a||new me),this.set_top(this.GetStaticPositionTop()),this.set_height(l.auto_height());return}if(i&&n&&s){this.set_top(i),this.set_height(n);let u=t.SUB(i).SUB(this.GetBorderBoxHeight()).SUB(s);if(!o&&!a){let d=u.DIV(2);this.set_margin_top(d),this.set_margin_bottom(d)}else o?a?(this.set_margin_top(o),this.set_margin_bottom(a)):(this.set_margin_top(o),this.set_margin_bottom(u.SUB(o))):(Q(a),this.set_margin_top(u.SUB(a)),this.set_margin_bottom(a));return}if(this.set_margin_top(o||new me),this.set_margin_bottom(a||new me),!i&&!n&&s){this.set_height(l.auto_height()),this.set_top(t.SUB(this.GetMarginBoxHeight()).SUB(s));return}if(!i&&!s&&n){this.set_height(n),this.set_top(this.GetStaticPositionTop());return}if(!n&&!s&&i){this.set_top(i),this.set_height(l.auto_height());return}if(!i&&n&&s){this.set_height(n),this.set_top(t.SUB(this.GetMarginBoxHeight()).SUB(s));return}if(!n&&i&&s){this.set_top(i),this.set_height(t.SUB(i).SUB(this.margin_top()).SUB(this.border_top_width()).SUB(this.padding_top()).SUB(this.padding_bottom()).SUB(this.border_bottom_width()).SUB(this.margin_bottom()).SUB(s));return}if(!s&&i&&n){this.set_top(i),this.set_height(n);return}}UpdateWidthAssumingBlockLevelInFlowBox(t,i,s,n,o){let a=n,l=o;s?(this.set_width(s),this.UpdateHorizontalMarginsAssumingBlockLevelInFlowBox(t,i,this.GetBorderBoxWidth(),a,l)):(this.set_margin_left(a||new me),this.set_margin_right(l||new me),i.SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right()),this.set_width(i.SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right())))}UpdateWidthAssumingInlineLevelInFlowBox(t,i,s,n,o){this.set_margin_left(s||new me),this.set_margin_right(n||new me),i?this.set_width(i):this.set_width(this.GetShrinkToFitWidth(t,o))}UpdateHeightAssumingInFlowBox(t,i,s,n){if(this.collapsed_empty_margin_)this.set_margin_top(this.collapsed_empty_margin_),this.set_margin_bottom(new me);else{let o=this.collapsed_margin_top_||i||new me,a=this.collapsed_margin_bottom_||s||new me;this.set_margin_top(o),this.set_margin_bottom(a)}this.set_height(t||n.auto_height())}DumpProperties(t){return t=super.DumpProperties(t),t+="affects_baseline_in_block_formatting_context=",t+=this.AffectsBaselineInBlockFormattingContext(),t+=" ",t}AbsoluteQuadsForSelf(t,i){this.QuadsForSelfInternal(t,i,!0)}QuadsForSelfInternal(t,i,s){if(this.BorderBoxRect(),s){const n=this.GetBorderBoxFromRoot(!1);t.push(vu.fromRectF(lr.fromRectLayoutUnit(n)))}else{const n=this.BorderBoxRect();t.push(vu.fromRectF(lr.fromRectLayoutUnit(n)))}}}class Xw{constructor(e,t,i,s){c(this,"offset");c(this,"glyph_buffer");c(this,"color");c(this,"shadows",[]);c(this,"background");this.offset=e,this.glyph_buffer=t,this.color=i,this.background=s}}const Yy=class extends Nh{constructor(t,i,s){super();c(this,"data_");c(this,"id",Yy.ID++);t instanceof Xw?this.data_=t:this.data_=new Xw(t,i,s)}dispose(){super.dispose(),this.data_.glyph_buffer.dispose()}Accept(t){t.VisitTextNode(this)}GetBounds(){let t=this.data_.glyph_buffer.GetBounds();if(this.data_.shadows)for(let i=0;i<this.data_.shadows.length;++i)t.Union(this.data_.shadows[i].ToShadowBounds(this.data_.glyph_buffer.GetBounds()));return t.Offset(this.data_.offset),t}GetTypeId(){return rr(Yy)}data(){return this.data_}};let Qp=Yy;c(Qp,"ID",1);class $F{constructor(){c(this,"shrink_to_fit_width_",new me);c(this,"auto_height_",new me);c(this,"maybe_baseline_offset_from_top_content_edge_")}shrink_to_fit_width(){return this.shrink_to_fit_width_}auto_height(){return this.auto_height_}maybe_baseline_offset_from_top_content_edge(){return this.maybe_baseline_offset_from_top_content_edge_}set_shrink_to_fit_width(e){this.shrink_to_fit_width_=e}set_auto_height(e){this.auto_height_=e}set_baseline_offset_from_top_content_edge(e){this.maybe_baseline_offset_from_top_content_edge_=e}}class KF{constructor(e,t,i,s,n,o,a,l,u,d,f,g){c(this,"top_");c(this,"position_children_relative_to_baseline_");c(this,"line_height_");c(this,"font_metrics_");c(this,"should_collapse_leading_white_space_");c(this,"should_collapse_trailing_white_space_");c(this,"layout_params_");c(this,"base_direction_");c(this,"text_align_");c(this,"font_size_");c(this,"indent_offset_");c(this,"ellipsis_width_");c(this,"has_overflowed_");c(this,"at_end_");c(this,"child_boxes_",[]);c(this,"num_absolutely_positioned_boxes_before_first_box_justifying_line_");c(this,"first_box_justifying_line_existence_index_");c(this,"first_non_collapsed_child_box_index_");c(this,"last_non_collapsed_child_box_index_");c(this,"has_leading_white_space_",!1);c(this,"has_trailing_white_space_",!1);c(this,"shrink_to_fit_width_");c(this,"height_");c(this,"baseline_offset_from_top_");c(this,"is_ellipsis_placed_");c(this,"placed_ellipsis_offset_");this.top_=e,this.position_children_relative_to_baseline_=t,this.line_height_=i,this.font_metrics_=s,this.should_collapse_leading_white_space_=n,this.should_collapse_trailing_white_space_=o,this.layout_params_=a,this.base_direction_=l,this.text_align_=u,this.font_size_=d,this.indent_offset_=f,this.ellipsis_width_=g,this.has_overflowed_=!1,this.at_end_=!1,this.num_absolutely_positioned_boxes_before_first_box_justifying_line_=0,this.shrink_to_fit_width_=this.indent_offset_.CLONE(),this.height_=new me,this.baseline_offset_from_top_=new me,this.is_ellipsis_placed_=!1,this.placed_ellipsis_offset_=new me}top(){return this.top_}TryAddChildAndMaybeWrap(e){if(Q(!this.at_end_),e.IsAbsolutelyPositioned()){this.BeginEstimateStaticPositionForAbsolutelyPositionedChild(e);return}return this.UpdateSizePreservingTrailingWhiteSpace(e),!this.has_overflowed_&&!this.TryAddChildWithinAvailableWidth(e)&&(this.TryWrapOverflowingBoxAndMaybeAddSplitChild(qi.kWrapAtPolicyLastOpportunityWithinWidth,Qa.kWrapOpportunityPolicyNormal,e)||this.TryWrapChildrenAtLastOpportunity(Qa.kWrapOpportunityPolicyNormal)||this.TryWrapOverflowingBoxAndMaybeAddSplitChild(qi.kWrapAtPolicyLastOpportunityWithinWidth,Qa.kWrapOpportunityPolicyBreakWord,e)||this.TryWrapChildrenAtLastOpportunity(Qa.kWrapOpportunityPolicyBreakWord)?this.at_end_=!0:this.has_overflowed_=!0),this.has_overflowed_&&(this.TryWrapOverflowingBoxAndMaybeAddSplitChild(qi.kWrapAtPolicyFirstOpportunity,Qa.kWrapOpportunityPolicyBreakWordOrNormal,e)?this.at_end_=!0:this.BeginAddChildInternal(e)),Q(this.child_boxes_.length),this.at_end_?this.child_boxes_[this.child_boxes_.length-1]:void 0}BeginAddChildAndMaybeOverflow(e){if(e.IsAbsolutelyPositioned()){this.BeginEstimateStaticPositionForAbsolutelyPositionedChild(e);return}this.UpdateSizePreservingTrailingWhiteSpace(e),this.BeginAddChildInternal(e)}EndUpdates(){this.at_end_=!0,this.should_collapse_trailing_white_space_&&this.CollapseTrailingWhiteSpace(),this.has_leading_white_space_=this.HasLeadingWhiteSpace(),this.has_trailing_white_space_=this.HasTrailingWhiteSpace(),this.ReverseChildBoxesByBidiLevels(),this.UpdateChildBoxLeftPositions(),this.SetLineBoxHeightFromChildBoxes(),this.UpdateChildBoxTopPositions(),this.MaybePlaceEllipsis()}HasLeadingWhiteSpace(){return Q(this.at_end_||!this.has_leading_white_space_),this.has_leading_white_space_?!!this.has_leading_white_space_:!!this.first_non_collapsed_child_box_index_&&this.child_boxes_[this.first_non_collapsed_child_box_index_].HasLeadingWhiteSpace()}HasTrailingWhiteSpace(){return Q(this.at_end_||!this.has_trailing_white_space_),this.has_trailing_white_space_?!!this.has_trailing_white_space_:!!this.last_non_collapsed_child_box_index_&&this.child_boxes_[this.last_non_collapsed_child_box_index_].HasTrailingWhiteSpace()}IsCollapsed(){return!this.first_non_collapsed_child_box_index_}LineExists(){return!Ti(this.first_box_justifying_line_existence_index_)}GetFirstBoxJustifyingLineExistenceIndex(){return(Ti(this.first_box_justifying_line_existence_index_)?this.child_boxes_.length:this.first_box_justifying_line_existence_index_)+this.num_absolutely_positioned_boxes_before_first_box_justifying_line_}IsEllipsisPlaced(){return this.is_ellipsis_placed_}GetEllipsisCoordinates(){return new tn(this.placed_ellipsis_offset_.toFloat(),this.top_.ADD(this.baseline_offset_from_top_).toFloat())}shrink_to_fit_width(){return this.shrink_to_fit_width_}height(){return this.height_}baseline_offset_from_top(){return this.baseline_offset_from_top_}GetAvailableWidth(){return this.layout_params_.containing_block_size.width().SUB(this.shrink_to_fit_width_)}UpdateSizePreservingTrailingWhiteSpace(e){e.SetShouldCollapseLeadingWhiteSpace(this.ShouldCollapseLeadingWhiteSpaceInNextChildBox()),e.SetShouldCollapseTrailingWhiteSpace(!1),e.UpdateSize(this.layout_params_)}ShouldCollapseLeadingWhiteSpaceInNextChildBox(){return this.last_non_collapsed_child_box_index_?this.child_boxes_[this.last_non_collapsed_child_box_index_].HasTrailingWhiteSpace():this.should_collapse_leading_white_space_}CollapseTrailingWhiteSpace(){if(!this.HasTrailingWhiteSpace())return;Ti(this.last_non_collapsed_child_box_index_)&&et();let e=this.child_boxes_[this.last_non_collapsed_child_box_index_],t=e.width();e.SetShouldCollapseTrailingWhiteSpace(!0),e.UpdateSize(this.layout_params_);let i=t.SUB(e.width());this.shrink_to_fit_width_.SUB_ASSIGN(i)}RestoreTrailingWhiteSpace(){if(!this.last_non_collapsed_child_box_index_)return;let e=this.child_boxes_[this.last_non_collapsed_child_box_index_],t=e.width();e.SetShouldCollapseTrailingWhiteSpace(!1),e.UpdateSize(this.layout_params_);let i=e.width().SUB(t);this.shrink_to_fit_width_.ADD_ASSIGN(i)}TryAddChildWithinAvailableWidth(e){if(e.GetMarginBoxWidth().LE(this.GetAvailableWidth()))return this.BeginAddChildInternal(e),!0;if(this.should_collapse_trailing_white_space_&&(e.HasTrailingWhiteSpace()||e.IsCollapsed()&&this.HasTrailingWhiteSpace())){let t=e.HasTrailingWhiteSpace(),i=!1;if(t?(e.SetShouldCollapseTrailingWhiteSpace(!0),e.UpdateSize(this.layout_params_)):this.CollapseTrailingWhiteSpace(),e.GetMarginBoxWidth().LE(this.GetAvailableWidth())&&(i=!0),t?(e.SetShouldCollapseTrailingWhiteSpace(!1),e.UpdateSize(this.layout_params_)):this.RestoreTrailingWhiteSpace(),i)return this.BeginAddChildInternal(e),!0}return!1}TryWrapOverflowingBoxAndMaybeAddSplitChild(e,t,i){if(!this.first_box_justifying_line_existence_index_&&!i.JustifiesLineExistence())return!1;let s=i.TryWrapAt(e,t,this.LineExists(),this.GetAvailableWidth(),this.should_collapse_trailing_white_space_);return s==ar.kWrapResultWrapBefore?!0:s==ar.kWrapResultSplitWrap?(this.UpdateSizePreservingTrailingWhiteSpace(i),this.BeginAddChildInternal(i),!0):!1}TryWrapChildrenAtLastOpportunity(e){if(!this.first_box_justifying_line_existence_index_)return!1;let t=new me,i=this.child_boxes_.length,s=this.first_box_justifying_line_existence_index_;for(;i>s;){--i;let n=this.child_boxes_[i];t.ADD_ASSIGN(n.GetMarginBoxWidth());let o=i!=s,a=n.TryWrapAt(qi.kWrapAtPolicyLastOpportunity,e,o,new me,!1);if(a!=ar.kWrapResultNoWrap){if(this.child_boxes_.length=i,this.shrink_to_fit_width_.SUB_ASSIGN(t),this.first_non_collapsed_child_box_index_){if(this.first_non_collapsed_child_box_index_>=i)this.first_non_collapsed_child_box_index_=void 0,this.last_non_collapsed_child_box_index_=void 0;else if(this.last_non_collapsed_child_box_index_>=i){this.last_non_collapsed_child_box_index_=this.first_non_collapsed_child_box_index_;let l=i,u=this.last_non_collapsed_child_box_index_+1;for(;l>u;)if(--l,this.child_boxes_[l].IsCollapsed()){this.last_non_collapsed_child_box_index_=l;break}}}return a==ar.kWrapResultSplitWrap&&(this.UpdateSizePreservingTrailingWhiteSpace(n),this.BeginAddChildInternal(n)),!0}}return!1}BeginEstimateStaticPositionForAbsolutelyPositionedChild(e){this.first_box_justifying_line_existence_index_||++this.num_absolutely_positioned_boxes_before_first_box_justifying_line_,e.is_inline_before_blockification()?(this.CollapseTrailingWhiteSpace(),e.SetStaticPositionLeftFromParent(this.shrink_to_fit_width_),this.RestoreTrailingWhiteSpace()):e.SetStaticPositionLeftFromParent(new me),e.SetStaticPositionRightFromParent(new me),e.SetStaticPositionTopFromParent(new me)}BeginAddChildInternal(e){!this.first_box_justifying_line_existence_index_&&e.JustifiesLineExistence()&&(this.first_box_justifying_line_existence_index_=this.child_boxes_.length),e.IsCollapsed()||(this.first_non_collapsed_child_box_index_||(this.first_non_collapsed_child_box_index_=this.child_boxes_.length),this.last_non_collapsed_child_box_index_=this.child_boxes_.length),e.HasTrailingLineBreak()&&(this.at_end_=!0),this.shrink_to_fit_width_.ADD_ASSIGN(e.GetMarginBoxWidth()),this.child_boxes_.push(e)}ReverseChildBoxesByBidiLevels(){let e=-1,t=0,i=Number.MAX_SAFE_INTEGER;for(let s of this.child_boxes_){let n=s.GetBidiLevel()||e;n!=e&&(n>t&&(t=n),n<i&&(i=n))}i%2==0&&(i+=1);for(let s=t;s>=i;--s)this.ReverseChildBoxesMeetingBidiLevelThreshold(s)}ReverseChildBoxesMeetingBidiLevelThreshold(e){let t=0,i,s=0;for(let n=0;n!=this.child_boxes_.length-1-1;){let o=n++;if(s=this.child_boxes_[o].GetBidiLevel()||s,s>=e)t==0&&(i=this.child_boxes_[o]),++t;else{if(t>1){let l=i;i=this.child_boxes_[o],this.child_boxes_[o]=l}t=0}}if(t>1){let n=i;i=this.child_boxes_[this.child_boxes_.length-1],this.child_boxes_[this.child_boxes_.length-1]=n}}UpdateChildBoxLeftPositions(){let e=new me;switch(this.ComputeHorizontalAlignment()){case 0:break;case 1:e=this.GetAvailableWidth().DIV(2);break;case 2:e=this.GetAvailableWidth();break}this.base_direction_!=tr.kRightToLeftBaseDirection&&e.ADD_ASSIGN(this.indent_offset_);let i=new me(e);for(let s of this.child_boxes_)s.set_left(i),i=s.GetMarginBoxRightEdgeOffsetFromContainingBlock()}SetLineBoxHeightFromChildBoxes(){let e=new HF(this.font_metrics_,this.font_size_);this.line_height_.Accept(e),this.baseline_offset_from_top_=e.baseline_offset_from_top();let t=e.baseline_offset_from_bottom(),i=new me,s=new me;for(let n of this.child_boxes_){let o=n.computed_style().vertical_align,a=new me,l=!1;if(o==_e.GetMiddle())a=this.GetHeightAboveMiddleAlignmentPoint(n),l=!0;else if(o==_e.GetTop()){let u=n.GetInlineLevelBoxHeight();u>s&&(i=me.Max(i,u))}else if(o==_e.GetBottom()){let u=n.GetInlineLevelBoxHeight();u>i&&(s=me.Max(s,u))}else o==_e.GetBaseline()?(a=n.GetBaselineOffsetFromTopMarginEdge(),l=!0):et('Unknown value of "vertical-align".');if(l){this.baseline_offset_from_top_=me.Max(this.baseline_offset_from_top_,a);let u=n.GetInlineLevelBoxHeight().SUB(a);t=me.Max(t,u)}}this.height_=this.baseline_offset_from_top_.ADD(t),i<s?(i.GT(this.height_)&&(t=i.SUB(this.baseline_offset_from_top_)),s.GT(this.height_)&&(this.height_=s,this.baseline_offset_from_top_=this.height_.SUB(t))):(s.GT(this.height_)&&(this.baseline_offset_from_top_=s.SUB(t)),i.GT(this.height_)&&(this.height_=i,t=this.height_.SUB(this.baseline_offset_from_top_)))}UpdateChildBoxTopPositions(){let e=new me(this.top_);this.position_children_relative_to_baseline_&&e.SUB_ASSIGN(this.baseline_offset_from_top_);for(let t of this.child_boxes_){let i=t.computed_style().vertical_align,s=new me;i==_e.GetMiddle()?s=this.baseline_offset_from_top_.SUB(this.GetHeightAboveMiddleAlignmentPoint(t)):i==_e.GetTop()||(i==_e.GetBottom()?s=this.height_.SUB(t.GetInlineLevelBoxHeight()):i==_e.GetBaseline()?s=this.baseline_offset_from_top_.SUB(t.GetBaselineOffsetFromTopMarginEdge()):et("Unsupported vertical_align property value")),t.set_top(e.ADD(s).ADD(t.GetInlineLevelTopMargin()))}}MaybePlaceEllipsis(){if(this.ellipsis_width_.LE(new me)||this.shrink_to_fit_width_.LE(this.layout_params_.containing_block_size.width()))return;let e=new me;this.ellipsis_width_.LE(this.layout_params_.containing_block_size.width())?e=this.base_direction_==tr.kRightToLeftBaseDirection?this.ellipsis_width_:this.layout_params_.containing_block_size.width().SUB(this.ellipsis_width_):e=this.base_direction_==tr.kRightToLeftBaseDirection?this.layout_params_.containing_block_size.width():new me;let t=!1,i=new me;if(this.base_direction_==tr.kRightToLeftBaseDirection)for(let s=this.child_boxes_.length-1;s>-1;s--){let n=this.child_boxes_[s],{is_placement_requirement_met:o,is_placed:a,placed_offset:l}=n.TryPlaceEllipsisOrProcessPlacedEllipsis(this.base_direction_,e,t,this.is_ellipsis_placed_,i);t=o,this.is_ellipsis_placed_=a,i=l}else for(let s of this.child_boxes_){let{is_placed:n,is_placement_requirement_met:o,placed_offset:a}=s.TryPlaceEllipsisOrProcessPlacedEllipsis(this.base_direction_,e,t,this.is_ellipsis_placed_,i);t=o,this.is_ellipsis_placed_=n,i=a}this.placed_ellipsis_offset_=this.base_direction_==tr.kRightToLeftBaseDirection?i.SUB(this.ellipsis_width_):i}GetHeightAboveMiddleAlignmentPoint(e){return e.GetInlineLevelBoxHeight().ADD(new me(this.font_metrics_.x_height())).DIV(2)}ComputeHorizontalAlignment(){let e;return this.layout_params_.containing_block_size.width().LT(this.shrink_to_fit_width_)?e=this.base_direction_==tr.kRightToLeftBaseDirection?2:0:this.text_align_==_e.GetStart()?e=this.base_direction_==tr.kRightToLeftBaseDirection?2:0:this.text_align_==_e.GetEnd()?e=this.base_direction_==tr.kRightToLeftBaseDirection?0:2:this.text_align_==_e.GetLeft()?e=0:this.text_align_==_e.GetRight()?e=2:this.text_align_==_e.GetCenter()?e=1:(et('Unknown value of "text-align".'),e=0),e}}class vQ extends $F{constructor(t,i,s,n,o,a,l,u){super();c(this,"line_height_");c(this,"font_metrics_");c(this,"layout_params_");c(this,"base_direction_");c(this,"text_align_");c(this,"font_size_");c(this,"text_indent_offset_");c(this,"ellipsis_width_");c(this,"line_box_");c(this,"line_count_");c(this,"preferred_min_width_",new me);c(this,"ellipses_coordinates_",[]);this.line_height_=t,this.font_metrics_=i,this.layout_params_=s,this.base_direction_=n,this.text_align_=o,this.font_size_=a,this.text_indent_offset_=l,this.ellipsis_width_=u,this.line_count_=0,this.CreateLineBox()}TryAddChildAndMaybeWrap(t){Q(this.line_box_);let i=this.line_box_.TryAddChildAndMaybeWrap(t);return i&&this.CreateLineBox(),i}EndUpdates(){this.DestroyLineBox(),this.set_shrink_to_fit_width(me.Max(this.preferred_min_width_,this.line_count_>1?this.layout_params_.containing_block_size.width():new me))}GetEllipsesCoordinates(){return this.ellipses_coordinates_}CreateLineBox(){this.line_box_&&this.DestroyLineBox();let t=this.line_count_==0?this.text_indent_offset_:new me;this.line_box_=new KF(this.auto_height(),!1,this.line_height_,this.font_metrics_,!0,!0,this.layout_params_,this.base_direction_,this.text_align_,this.font_size_,t.CLONE(),this.ellipsis_width_)}DestroyLineBox(){this.line_box_||et(),this.line_box_.EndUpdates(),this.line_box_.LineExists()&&(++this.line_count_,this.preferred_min_width_=me.Max(this.preferred_min_width_,this.line_box_.shrink_to_fit_width()),this.set_auto_height(this.line_box_.top().ADD(this.line_box_.height())),this.set_baseline_offset_from_top_content_edge(this.line_box_.top().ADD(this.line_box_.baseline_offset_from_top())),this.line_box_.IsEllipsisPlaced()&&this.ellipses_coordinates_.push(this.line_box_.GetEllipsisCoordinates())),this.line_box_=void 0}}class EQ extends WF{constructor(t,i,s){super(t,i,s);c(this,"used_font_");c(this,"ellipses_coordinates_",[]);this.used_font_=s.GetUsedFontList(t.data().font_family,t.data().font_size,t.data().font_style,t.data().font_weight)}AreEllipsesEnabled(){return this.parent().computed_style().overflow==_e.GetHidden()&&this.parent().computed_style().text_overflow==_e.GetEllipsis()}GetLevel(){return Tr.kBlockLevel}GetMarginCollapsingStatus(){return this.child_boxes().every(t=>t.IsAbsolutelyPositioned())?bd.kIgnore:bd.kSeparateAdjoiningMargins}AsAnonymousBlockBox(){return this}SplitBidiLevelRuns(){super.SplitBidiLevelRuns();for(let t=0;t<this.child_boxes().length;)this.child_boxes()[t].TrySplitAtSecondBidiLevelRun()?t=this.InsertSplitSiblingOfDirectChild(t):++t}HasTrailingLineBreak(){return this.child_boxes().length>0&&this.child_boxes()[this.child_boxes().length-1].HasTrailingLineBreak()}RenderAndAnimateContent(t,i){if(bk.prototype.RenderAndAnimateContent.call(this,t,i),this.computed_style().visibility==_e.GetVisible()&&this.ellipses_coordinates_.length&&this.used_font_.IsVisible()){let s=Zi(this.computed_style().color);if(s.a()>0){let n=this.used_font_.GetEllipsisValue();const{object:{ptr:o,view:a},dispose:l}=u1(String.fromCodePoint(n),!0),u=new eb(o,a.length),d=iy.fromUTF8(u);let f=this.used_font_.CreateGlyphBuffer(d,0,1,!1);u.delete(),d.delete();for(let g of this.ellipses_coordinates_)t.AddChild(new Qp(g,f,s));l()}}}TryAddChild(t){return et(),!1}AddInlineLevelChild(t){Q(t.GetLevel()==Tr.kInlineLevel||t.IsAbsolutelyPositioned()),this.PushBackDirectChild(t)}UpdateRectOfInFlowChildBoxes(t){for(let o of this.child_boxes())o.DoPreEllipsisPlacementProcessing();let i=this.AreEllipsesEnabled()?this.used_font_.GetEllipsisWidth():0,s=new vQ(this.computed_style().line_height,this.used_font_.GetFontMetrics(),t,this.base_direction(),this.computed_style().text_align,this.computed_style().font_size,GF(this.computed_style().text_indent),new me(i)),n=0;for(;n!==this.child_boxes().length;){let o=this.child_boxes()[n],a=s.TryAddChildAndMaybeWrap(o);if(a){for(;o!=a;)--n;let l=a.GetSplitSibling(),u=n+1;if(l&&(u==this.child_boxes().length-1||this.child_boxes()[u]!=l)){n=this.InsertSplitSiblingOfDirectChild(n);continue}}++n}s.EndUpdates(),this.ellipses_coordinates_=s.GetEllipsesCoordinates();for(let o of this.child_boxes())o.DoPostEllipsisPlacementProcessing();return s}DumpClassName(t){return t+="AnonymousBlockBox ",t}}class SQ{constructor(e){c(this,"collapsing_margin",new me);c(this,"context_margin_top");c(this,"should_collapse_own_margins_together",!0);c(this,"should_collapse_margin_bottom",!0);c(this,"should_collapse_margin_top");this.should_collapse_margin_top=e}}class wQ extends $F{constructor(t,i){super();c(this,"layout_params_");c(this,"margin_collapsing_params_");this.layout_params_=t,this.margin_collapsing_params_=new SQ(i)}CollapseContainingMargins(t){let i=t.padding_top()!=new me,s=t.border_top_width()!=new me,n=t.padding_bottom()!=new me,o=t.border_bottom_width()!=new me,a=this.layout_params_.maybe_margin_top||new me,l=this.layout_params_.maybe_margin_bottom||new me;if(!this.margin_collapsing_params_.context_margin_top){if(!i&&!s&&!n&&!o&&this.layout_params_.containing_block_size.height()==new me&&this.margin_collapsing_params_.should_collapse_own_margins_together){t.collapsed_empty_margin_=this.CollapseMargins(a,l);return}t.collapsed_empty_margin_=void 0;return}if(!i&&!s&&this.margin_collapsing_params_.should_collapse_margin_top){let u=this.CollapseMargins(a,this.margin_collapsing_params_.context_margin_top||new me);t.collapsed_margin_top_=u}if(!this.layout_params_.maybe_height&&!n&&!o&&this.margin_collapsing_params_.should_collapse_margin_bottom){let u=this.CollapseMargins(l,this.margin_collapsing_params_.collapsing_margin);t.collapsed_margin_bottom_=u,this.set_auto_height(this.auto_height().SUB(this.margin_collapsing_params_.collapsing_margin))}}UpdateRect(t){Q(!t.IsAbsolutelyPositioned()),t.UpdateSize(this.layout_params_),t.set_left(new me),this.UpdatePosition(t),this.set_shrink_to_fit_width(me.Max(this.shrink_to_fit_width(),t.GetMarginBoxRightEdgeOffsetFromContainingBlock())),this.set_auto_height(t.GetMarginBoxBottomEdgeOffsetFromContainingBlock()),t.AffectsBaselineInBlockFormattingContext()&&this.set_baseline_offset_from_top_content_edge(t.top().ADD(t.GetBaselineOffsetFromTopMarginEdge()))}UpdatePosition(t){switch(Kt(Tr.kBlockLevel,t.GetLevel()),t.GetMarginCollapsingStatus()){case bd.kIgnore:t.set_top(this.auto_height());break;case bd.kSeparateAdjoiningMargins:t.set_top(this.auto_height()),this.margin_collapsing_params_.collapsing_margin=new me,this.margin_collapsing_params_.should_collapse_margin_bottom=!1,this.margin_collapsing_params_.context_margin_top||(this.margin_collapsing_params_.should_collapse_margin_top=!1),this.margin_collapsing_params_.should_collapse_own_margins_together=!1;break;case bd.kCollapseMargins:if(this.margin_collapsing_params_.should_collapse_margin_bottom=!0,!this.margin_collapsing_params_.context_margin_top&&this.margin_collapsing_params_.should_collapse_margin_top)t.set_top(this.auto_height().SUB(t.margin_top())),t.collapsed_empty_margin_&&(this.margin_collapsing_params_.should_collapse_margin_bottom=!1);else{let i=this.CollapseMargins(t.margin_top(),this.margin_collapsing_params_.collapsing_margin),n=this.margin_collapsing_params_.collapsing_margin.ADD(t.margin_top()).SUB(i);t.set_top(this.auto_height().SUB(n))}this.margin_collapsing_params_.collapsing_margin=t.collapsed_empty_margin_||t.margin_bottom(),this.margin_collapsing_params_.context_margin_top||(this.margin_collapsing_params_.context_margin_top=t.margin_top());break}}CollapseMargins(t,i){let s=new me;return t.GE(new me)&&i.GE(new me)?s=me.Max(t,i):t.LT(new me)&&i.LT(new me)?s=new me().ADD(me.Min(t,i)):(Q(i.GE(new me)||t.GE(new me)),s=i.ADD(t)),s}}class AQ extends WF{TryAddChild(e){return this.AddChild(e),!0}AddChild(e){switch(e.GetLevel()){case Tr.kBlockLevel:if(!e.IsAbsolutelyPositioned()){this.PushBackDirectChild(e);break}case Tr.kInlineLevel:this.GetOrAddAnonymousBlockBox().AddInlineLevelChild(e);break}}UpdateRectOfInFlowChildBoxes(e){let t=!this.IsAbsolutelyPositioned()&&this.GetLevel()==Tr.kBlockLevel&&this.parent()&&this.parent().parent()&&!I0(this.computed_style()),i=t&&this.padding_top().EQ(new me)&&this.border_top_width().EQ(new me),s=new wQ(e,!!i);for(let n of this.child_boxes())s.UpdateRect(n);return t&&s.CollapseContainingMargins(this),s}GetLastChildAsAnonymousBlockBox(){return this.child_boxes().length===0?void 0:this.child_boxes()[this.child_boxes().length-1].AsAnonymousBlockBox()}GetOrAddAnonymousBlockBox(){let e=this.GetLastChildAsAnonymousBlockBox();if(Ti(e)||e&&e.HasTrailingLineBreak()){let t=new qc;t.SetData(yw(this.css_computed_style_declaration()));let i=new EQ(t,this.base_direction(),this.used_style_provider());e=i,this.PushBackDirectChild(i)}return e}}class XF extends AQ{GetLevel(){return Tr.kBlockLevel}DumpClassName(e){return e+="BlockLevelBlockContainerBox ",e}}function bQ(r,e,t){let i=Object.create(null),s=new Fg;s.AssignFrom(r),lC(e.html(),s)?i.background_style_source=e.html():lC(e.body(),s)&&(i.background_style_source=e.body());let n=new qc;n.SetData(s);let o=tr.kLeftToRightBaseDirection;return e.html(),i.box=new XF(n,o,t),i}function lC(r,e){if(!r||!r.computed_style()||r.computed_style().display==_e.GetNone())return!1;let t=r.computed_style(),i=Zi(t.background_color).a()==0,s=t.background_image;s.value().length;let n=s.value().length==1&&s.value()[0]==_e.GetNone();return!i||!n?(i||e.set_background_color(t.background_color),n||e.set_background_image(t.background_image),!0):!1}var YF=(r=>(r[r.kBreakPolicyNormal=0]="kBreakPolicyNormal",r[r.kBreakPolicyBreakWord=1]="kBreakPolicyBreakWord",r))(YF||{}),aa=(r=>(r[r.kLeftToRightIsolateCodePoint=0]="kLeftToRightIsolateCodePoint",r[r.kLineFeedCodePoint=1]="kLineFeedCodePoint",r[r.kNoBreakSpaceCodePoint=2]="kNoBreakSpaceCodePoint",r[r.kObjectReplacementCharacterCodePoint=3]="kObjectReplacementCharacterCodePoint",r[r.kPopDirectionalIsolateCodePoint=4]="kPopDirectionalIsolateCodePoint",r[r.kRightToLeftIsolateCodePoint=5]="kRightToLeftIsolateCodePoint",r))(aa||{}),Yw=(r=>(r[r.kLogicalTextOrder=0]="kLogicalTextOrder",r[r.kVisualTextOrder=1]="kVisualTextOrder",r))(Yw||{}),qw=(r=>(r[r.kNoTextTransform=0]="kNoTextTransform",r[r.kUppercaseTextTransform=1]="kUppercaseTextTransform",r))(qw||{});class uC{constructor(e,t){this.start_position_=e,this.level_=t}}const bT=class{constructor(e,t,i,s,n){c(this,"id",bT.ID++);c(this,"unicode_text_");c(this,"locale_");c(this,"base_direction_");c(this,"directional_formatting_stack_");c(this,"line_break_iterator_");c(this,"character_break_iterator_");c(this,"is_closed_");c(this,"level_runs_",[]);c(this,"last_retrieved_run_index_");this.locale_=e,this.base_direction_=t,this.directional_formatting_stack_=i,this.line_break_iterator_=s,this.character_break_iterator_=n,this.is_closed_=!1,this.last_retrieved_run_index_=0,this.level_runs_.push(new uC(0,cC(t))),this.unicode_text_=new iy,Q(this.unicode_text_.length()===0);for(let o=0;o<this.directional_formatting_stack_.length;++o)this.directional_formatting_stack_[o]==1?this.unicode_text_.appendChar16(B2):this.unicode_text_.appendChar16(Nw)}dispose(){this.unicode_text_.delete()}AppendUtf8String(e,t=0){let i=this.GetTextEndPosition();if(Q(!this.is_closed_),!this.is_closed_){const{object:{ptr:s,view:n},dispose:o}=u1(e,!0),a=new eb(s,n.length);let l=iy.fromUTF8(a);t==1&&Ue(),this.unicode_text_.appendUnicodeString(l),a.delete(),l.delete(),o()}return i}AppendCodePoint(e){let t=this.GetTextEndPosition();if(Q(!this.is_closed_),!this.is_closed_)switch(e){case 0:this.directional_formatting_stack_.push(0),this.unicode_text_.appendChar16(Nw);break;case 1:this.unicode_text_.appendChar16(I2);break;case 2:this.unicode_text_.appendChar16(F2);break;case 3:this.unicode_text_.appendChar16(M2);break;case 4:this.directional_formatting_stack_.pop(),this.unicode_text_.appendChar16(gx);break;case 5:this.directional_formatting_stack_.push(1),this.unicode_text_.appendChar16(gx);break}return t}FindBreakPosition(e,t,i,s,n,o,a,l,u){Q(this.is_closed_);let d;Q(e==this.base_direction_),this.AreInlineAndScriptDirectionsTheSame(e,s)||t?d=s:d=n;let f=new me;if(!l&&o.LE(new me))return{result:!1,break_position:d,break_width:f};if(u==0||o.GT(new me)){let g=l&&u==0,{break_position:x,break_width:E}=this.FindIteratorBreakPosition(e,t,i,this.line_break_iterator_,s,n,o,a,g,d,f);d=x,f=E}if(u==1)if(this.AreInlineAndScriptDirectionsTheSame(e,s)||t?l=l&&d==s:l=l&&d==n,this.AreInlineAndScriptDirectionsTheSame(e,s)||t){let{break_position:g,break_width:x}=this.FindIteratorBreakPosition(e,t,i,this.character_break_iterator_,d,n,o,!1,l,d,f);d=g,f=x}else{let{break_position:g,break_width:x}=this.FindIteratorBreakPosition(e,t,i,this.character_break_iterator_,s,d,o,!1,l,d,f);d=g,f=x}return this.AreInlineAndScriptDirectionsTheSame(e,s)||t?{result:d>s,break_width:f,break_position:d}:{result:d<n,break_position:d,break_width:f}}GetNextBreakPosition(e,t){let i=this.GetBreakIterator(t);return i.setText(this.unicode_text_),i.following(e)}GetPreviousBreakPosition(e,t){let i=this.GetBreakIterator(t);return i.setText(this.unicode_text_),i.preceding(e)}IsBreakPosition(e,t){let i=this.GetBreakIterator(t);return i.setText(this.unicode_text_),Boolean(i.isBoundary(e))}RetrieveUtf8SubString(e,t,i=0){if(e<t){let s=this.unicode_text_.tempSubStringBetween(e,t);i==1&&this.IsRTL(e)&&s.reverse();let n=s.toUTF8String();return s.delete(),n}return""}GetTextBuffer(){return this.unicode_text_.getBuffer()}GetText(){return this.unicode_text_}GetLocale(){return this.locale_}base_direction(){return this.base_direction_}GetDirectionalFormattingStackDirection(){let e=this.directional_formatting_stack_.length;return e>0?this.directional_formatting_stack_[e-1]==1?tr.kRightToLeftBaseDirection:tr.kLeftToRightBaseDirection:this.base_direction_}GetBidiLevel(e){return this.level_runs_[this.GetRunIndex(e)].level_}IsRTL(e){return this.GetBidiLevel(e)%2==1}AreInlineAndScriptDirectionsTheSame(e,t){return e==tr.kLeftToRightBaseDirection&&!this.IsRTL(t)||e==tr.kRightToLeftBaseDirection&&this.IsRTL(t)}IsCollapsibleWhiteSpace(e){return this.unicode_text_.charAt(e)===C0}GetNextRunPosition(e){let t=this.GetRunIndex(e)+1;return t>=this.level_runs_.length?{result:!1}:{next_run_position:this.level_runs_[t].start_position_,result:!0}}GetTextEndPosition(){return this.unicode_text_.length()}GetTextPositionAtVisualLocation(e,t,i,s,n){let o=1,a=0,l=-1;for(;o+i<=s;o++){const u=t.GetTextWidth(this.unicode_text_,i,o,this.IsRTL(i));if(u>=n){let d=Math.abs(u-n)<Math.abs(a-n);a=d?u:a,l=d?i+o:i+o-1;break}a=u}return l}GetSubstrWidth(e,t,i,s){return t.GetTextWidth(this.unicode_text_,i,s,this.IsRTL(i))}GetDirectionalFormattingStack(){return this.directional_formatting_stack_}Close(){if(Q(!this.is_closed_),!this.is_closed_){for(let e=this.directional_formatting_stack_.length;e>0;--e)this.unicode_text_.appendChar16(gx);this.is_closed_=!0,this.GenerateBidiLevelRuns()}}IsClosed(){return this.is_closed_}GetBreakIterator(e){return e==0?this.line_break_iterator_:this.character_break_iterator_}FindIteratorBreakPosition(e,t,i,s,n,o,a,l,u,d,f){if(s.setText(this.unicode_text_),this.AreInlineAndScriptDirectionsTheSame(e,n)||t)for(let g=s.following(n);g!=NP&&g<o;g=s.next()){let{result:x,break_position:E}=this.TryIncludeSegmentWithinAvailableWidth(e,t,i,d,g,a,l,u,d,f);if(d=E,!x)break}else for(let g=s.preceding(o);g!=NP&&g>n;g=s.previous()){let{result:x,break_position:E}=this.TryIncludeSegmentWithinAvailableWidth(e,t,i,g,d,a,l,u,d,f);if(d=E,!x)break}return{break_width:f,break_position:d}}TryIncludeSegmentWithinAvailableWidth(e,t,i,s,n,o,a,l,u,d){let f=new me(i.GetTextWidth(this.unicode_text_,s,n-s,this.IsRTL(s))),g=new me(a&&this.IsCollapsibleWhiteSpace(n-1)?i.GetSpaceWidth():0);return!l&&d.ADD(f).SUB(g).GT(o)?{result:!1,allow_overflow:l,break_position:u}:(this.AreInlineAndScriptDirectionsTheSame(e,s)||t?u=n:u=s,d.ADD_ASSIGN(f),l&&(l=!1,d.GE(o))?{result:!1,allow_overflow:l,break_position:u}:{result:!0,allow_overflow:l,break_position:u})}GenerateBidiLevelRuns(){Q(this.is_closed_);const e=this.unicode_text_.length();if(e===0)return;const t=gN(e,0);try{if(!t)return;const i=xN(t,this.unicode_text_,cC(this.base_direction_));if(_5(i))return;let s=yN(t);if(Q(s),s===-1)return;this.level_runs_.length=0;let n=0,o=JS(4),a=JS(4),l=0,u=this.GetTextEndPosition();for(;n<u;){l++,vN(t,n,o,a);let d=ZS(a,"i32"),f=ZS(o,"i32");d<0&&f===u&&(d=0),this.level_runs_.push(new uC(n,d)),n=f}QS(o),QS(a)}finally{mN(t)}}GetRunIndex(e){for(Q(this.is_closed_);this.last_retrieved_run_index_<this.level_runs_.length-1&&this.level_runs_[this.last_retrieved_run_index_].start_position_<e;)++this.last_retrieved_run_index_;for(;this.level_runs_[this.last_retrieved_run_index_].start_position_>e;)--this.last_retrieved_run_index_;return this.last_retrieved_run_index_}};let Gc=bT;c(Gc,"ID",1);function cC(r){return r==tr.kRightToLeftBaseDirection?1:0}function qF(r,e){let t=0;switch(r){case Qa.kWrapOpportunityPolicyNormal:t=0;break;case Qa.kWrapOpportunityPolicyBreakWord:t=1;break;case Qa.kWrapOpportunityPolicyBreakWordOrNormal:t=e?1:0;break}return t}class kQ extends MB{createReferencedObject(e,...t){return new Gc(...t)}destroyReferencedObject(e,t){t.dispose()}}function QF(r){return r.codePointAt(0)<=" ".codePointAt(0)&&(r==" "||r==`
`||r=="	"||r=="\r"||r=="\f")}function TQ(r){return r!=_e.GetPre()&&r!=_e.GetPreLine()&&r!=_e.GetPreWrap()}function Qw(r){return r!=_e.GetPre()&&r!=_e.GetPreWrap()}function kk(r){return r!=_e.GetPre()&&r!=_e.GetNowrap()}function PQ(r){let e=0,t=r.length-1,i=[],{result:s,input_iterator:n}=hC(r,e,t);for(e=n,s&&i.push(" ");;){let{result:o,input_iterator:a}=RQ(r,e,t,i);if(e=a,!o)break;let{result:l,input_iterator:u}=hC(r,e,t);if(e=u,!l)break;i.push(" ")}return i.join("")}function hC(r,e,t){let i=!1;for(;e<=t&&QF(r[e]);++e)i=!0;return{result:i,input_iterator:e}}function RQ(r,e,t,i){let s=!1;for(;e<=t;++e){let n=r[e];if(QF(n))break;s=!0,i.push(n)}return{result:s,input_iterator:e}}function DQ(r,e){let t=r.length,i=0;for(;e<r.length;++e){let s=r[e];if(s=="\r"){t=e++,e<r.length&&r[e]==`
`?i=2:i=1;break}else if(s==`
`){t=e,i=1;break}}return{result:i>0,sequence_length:i,sequence_start:t}}class CQ{constructor(e,t){this.colorBrush=e,this.rect=t}}class OQ{constructor(e,t,i){c(this,"offset");c(this,"blur_sigma");c(this,"color");this.offset=e,this.blur_sigma=t,this.color=i}BlurExtent(){return new tn(this.blur_sigma*3,this.blur_sigma*3)}ToShadowBounds(e){let t=new lr(e);t.Offset(this.offset);let i=this.BlurExtent();return t.Outset(i.x(),i.y()),t}}class Cy extends yc{constructor(t,i,s,n,o,a,l,u){super(t,l);c(this,"_selectionStartPosition",-1);c(this,"_selectionEndPosition",-1);c(this,"paragraph_ref_");c(this,"text_start_position_");c(this,"text_end_position_");c(this,"truncated_text_start_position_");c(this,"truncated_text_end_position_");c(this,"previous_truncated_text_start_position_");c(this,"previous_truncated_text_end_position_");c(this,"truncated_text_offset_from_left_");c(this,"used_font_");c(this,"text_has_leading_white_space_");c(this,"text_has_trailing_white_space_");c(this,"should_collapse_leading_white_space_");c(this,"should_collapse_trailing_white_space_");c(this,"has_trailing_line_break_");c(this,"baseline_offset_from_top_");c(this,"is_product_of_split_");c(this,"split_sibling_");c(this,"update_size_results_valid_");c(this,"line_height_");c(this,"inline_top_margin_");c(this,"ascent_");c(this,"non_collapsible_text_width_");this.ctx=u,this._register(this.paragraph_ref_=i),this.text_start_position_=s,this.text_end_position_=n,this.truncated_text_start_position_=s,this.truncated_text_end_position_=n,this.previous_truncated_text_start_position_=s,this.previous_truncated_text_end_position_=n,this.truncated_text_offset_from_left_=0,this.used_font_=l.GetUsedFontList(t.data().font_family,t.data().font_size,t.data().font_style,t.data().font_weight),this.text_has_leading_white_space_=!1,this.text_has_trailing_white_space_=!1,this.should_collapse_leading_white_space_=!1,this.should_collapse_trailing_white_space_=!1,this.has_trailing_line_break_=o,this.is_product_of_split_=a,this.update_size_results_valid_=!1,this.ascent_=0,Q(this.text_start_position_<=this.text_end_position_),this.UpdateTextHasLeadingWhiteSpace(),this.UpdateTextHasTrailingWhiteSpace()}GetLevel(){return Tr.kInlineLevel}AsTextBox(){return this}isTextBox(){return!0}GetTextStartPosition(){return this.text_start_position_}GetTextEndPosition(){return this.text_end_position_}GetClientRect(){const t=this.GetBorderBoxFromRoot(!1),i=t.x(),s=t.y().SUB(this.GetInlineLevelTopMargin());return new Rs(new ks(i,s),new Os(t.width(),this.GetInlineLevelBoxHeight()))}getSelectionStartPosition(){return this._selectionStartPosition}getSelectionEndPosition(){return this._selectionEndPosition}setSelection(t=-1,i=-1){Q(t<=i),t!==-1&&Q(t>=this.text_start_position_),i!==-1&&Q(i<=this.text_end_position_),this._selectionStartPosition=t,this._selectionEndPosition=i}hasSelection(){return this._selectionStartPosition!==-1}unsetSelection(){this.setSelection()}UpdateContentSizeAndMargins(t){if(Q(Sv(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),Q(Ek(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),Q(wv(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),Q(Sk(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),!this.non_collapsible_text_width_){let i=this.computed_style().line_height,s=i==_e.GetNormal(),n=[],o=this.GetNonCollapsibleTextStartPosition();if(this.non_collapsible_text_width_=this.HasNonCollapsibleText()?new me(this.used_font_.GetTextWidth(this.paragraph.GetText(),o,this.GetNonCollapsibleTextLength(),this.paragraph.IsRTL(o),s?n:void 0)):new me,!this.baseline_offset_from_top_||s){this.set_margin_left(new me),this.set_margin_top(new me),this.set_margin_right(new me),this.set_margin_bottom(new me);let a=this.used_font_.GetFontMetrics(n),l=new HF(a,this.computed_style().font_size);i.Accept(l),this.set_height(new me(a.em_box_height())),this.baseline_offset_from_top_=l.baseline_offset_from_top(),this.line_height_=l.used_line_height(),this.inline_top_margin_=l.half_leading(),this.ascent_=a.ascent()}}this.set_width(this.GetLeadingWhiteSpaceWidth().ADD(this.non_collapsible_text_width_).ADD(this.GetTrailingWhiteSpaceWidth()))}TryWrapAt(t,i,s,n,o){Q(!this.IsAbsolutelyPositioned());let a=this.computed_style().overflow_wrap==_e.GetBreakWord();if(!VF(i,a))return ar.kWrapResultNoWrap;if(!kk(this.computed_style().white_space))return!this.is_product_of_split_&&s&&this.text_start_position_>0&&this.paragraph.IsCollapsibleWhiteSpace(this.text_start_position_-1)?ar.kWrapResultWrapBefore:ar.kWrapResultNoWrap;let l=s?this.text_start_position_:this.GetNonCollapsibleTextStartPosition(),u=this.GetWrapPosition(t,i,s,n,o,a,l),d;return u==this.text_start_position_&&s?d=ar.kWrapResultWrapBefore:u>l&&u<this.text_end_position_?(this.SplitAtPosition(u),d=ar.kWrapResultSplitWrap):d=ar.kWrapResultNoWrap,d}GetTextPositionAtVisualLocation(t){return this.paragraph.GetTextPositionAtVisualLocation(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,this.text_end_position_,t)}GetSplitSibling(){return this.split_sibling_}DoesFulfillEllipsisPlacementRequirement(){return this.GetNonCollapsedTextStartPosition()<this.GetNonCollapsedTextEndPosition()}DoPreEllipsisPlacementProcessing(){this.previous_truncated_text_start_position_=this.truncated_text_start_position_,this.previous_truncated_text_end_position_=this.truncated_text_end_position_,this.truncated_text_start_position_=this.text_start_position_,this.truncated_text_end_position_=this.text_end_position_}DoPostEllipsisPlacementProcessing(){(this.previous_truncated_text_start_position_!=this.truncated_text_start_position_||this.previous_truncated_text_end_position_!=this.truncated_text_end_position_)&&this.InvalidateRenderTreeNodesOfBoxAndAncestors()}SplitBidiLevelRuns(){}TrySplitAtSecondBidiLevelRun(){let{next_run_position:t,result:i}=this.paragraph.GetNextRunPosition(this.text_start_position_);if(i){if(Q(!Ti(t)),t<this.text_end_position_)return this.SplitAtPosition(t),!0;et()}else return!1}GetBidiLevel(){return this.paragraph.GetBidiLevel(this.text_start_position_)}SetShouldCollapseLeadingWhiteSpace(t){this.should_collapse_leading_white_space_!=t&&(this.should_collapse_leading_white_space_=t,this.update_size_results_valid_=!1)}SetShouldCollapseTrailingWhiteSpace(t){this.should_collapse_trailing_white_space_!=t&&(this.should_collapse_trailing_white_space_=t,this.update_size_results_valid_=!1)}HasLeadingWhiteSpace(){return this.text_has_leading_white_space_&&!this.should_collapse_leading_white_space_&&(this.HasNonCollapsibleText()||!this.should_collapse_trailing_white_space_)}HasTrailingWhiteSpace(){return this.text_has_trailing_white_space_&&!this.should_collapse_trailing_white_space_&&(this.HasNonCollapsibleText()||!this.should_collapse_leading_white_space_)}IsCollapsed(){return!this.HasLeadingWhiteSpace()&&!this.HasTrailingWhiteSpace()&&!this.HasNonCollapsibleText()}JustifiesLineExistence(){return this.HasNonCollapsibleText()||this.has_trailing_line_break_}HasTrailingLineBreak(){return this.has_trailing_line_break_}AffectsBaselineInBlockFormattingContext(){et("Should only be called in a block formatting context.")}GetBaselineOffsetFromTopMarginEdge(){return this.baseline_offset_from_top_||new me}GetInlineLevelBoxHeight(){return this.line_height_}GetInlineLevelTopMargin(){return this.inline_top_margin_}ValidateUpdateSizeInputs(t){return yc.prototype.ValidateUpdateSizeInputs.call(this,t)&&this.update_size_results_valid_?!0:(this.update_size_results_valid_=!0,!1)}HasNonCollapsibleText(){return this.GetNonCollapsibleTextLength()>0}RenderAndAnimateContent(t,i){var s;if(this.computed_style().visibility==_e.GetVisible()&&(Q(this.border_left_width().ADD(this.padding_left()).EqualOrNaN(new me)),Q(this.border_top_width().ADD(this.padding_top()).EqualOrNaN(new me)),this.HasNonCollapsibleText()&&this.HasVisibleText()&&this.used_font_.IsVisible())){let n=Zi(this.computed_style().color),o=this.computed_style().text_shadow;if(n.a()>0||o!=_e.GetNone()){let a=this.GetVisibleTextStartPosition(),l=this.GetVisibleTextLength(),u=this.used_font_.CreateGlyphBuffer(this.paragraph.GetText(),a,l,this.paragraph.IsRTL(a)),d=new Xw(new tn(this.truncated_text_offset_from_left_,this.ascent_),u,n);if(this.hasSelection()){const x=this._selectionStartPosition,E=this._selectionEndPosition,P=Math.max(x,this.text_start_position_),b=Math.min(E,this.text_end_position_),R=this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,P-this.text_start_position_),D=b===P?R:this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,b-this.text_start_position_),C=this.GetInlineLevelBoxHeight().toFloat(),I=Math.min(R,D),H=Math.max(R,D),N=En.fromHex("#add6ff");Q(N);const V=N.rgba,O=((s=this.inline_top_margin_)==null?void 0:s.toFloat())||0;d.background=new CQ(new Uc(new hh(V.r/255,V.g/255,V.b/255,V.a)),new lr(I,-O,H-I,C))}if(o!=_e.GetNone()){let x=this.computed_style().text_shadow;NQ(d,x)}let f=new Qp(d),g;g=f,t.AddChild(g)}}}IsTransformable(){return!1}DumpClassName(t){return t+="TextBox "}DumpProperties(t){return t=yc.prototype.DumpProperties.call(this,t),t+="select_start=",t+=this._selectionStartPosition,t+=" ",t+="select_end=",t+=this._selectionEndPosition,t+=" ",t}DumpChildrenWithIndent(t,i){return t=yc.prototype.DumpChildrenWithIndent.call(this,t,i),t=this.DumpIndent(t,i),t+='"',t+=this.GetNonCollapsibleText(),t+=`"
`,t}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){if(n)return this.paragraph.AreInlineAndScriptDirectionsTheSame(t,this.text_start_position_)?this.truncated_text_end_position_=this.text_start_position_:this.truncated_text_start_position_=this.text_end_position_,{is_placement_requirement_met:s,is_placed:n,placed_offset:o};n=!0;let a=this.GetContentBoxStartEdgeOffsetFromContainingBlock(t),l=t==tr.kRightToLeftBaseDirection?a.SUB(i):i.SUB(a),u=this.GetNonCollapsedTextStartPosition(),d=this.GetNonCollapsedTextEndPosition(),{result:f,break_width:g,break_position:x}=this.paragraph.FindBreakPosition(t,!1,this.used_font_,u,d,l,!1,!s,YF.kBreakPolicyBreakWord),E=x,P=g;return f?(t==tr.kRightToLeftBaseDirection?(o=a.SUB(P),this.truncated_text_offset_from_left_=o.SUB(this.GetContentBoxLeftEdgeOffsetFromContainingBlock()).toFloat()):o=a.ADD(P),this.paragraph.AreInlineAndScriptDirectionsTheSame(t,u)?this.truncated_text_end_position_=E:this.truncated_text_start_position_=E):s?(o=this.GetMarginBoxStartEdgeOffsetFromContainingBlock(t),this.paragraph.AreInlineAndScriptDirectionsTheSame(t,u)?this.truncated_text_end_position_=this.text_start_position_:this.truncated_text_start_position_=this.text_end_position_):o=this.GetMarginBoxEndEdgeOffsetFromContainingBlock(t),{is_placement_requirement_met:s,is_placed:n,placed_offset:o}}get paragraph(){return this.paragraph_ref_.object}UpdateTextHasLeadingWhiteSpace(){this.text_has_leading_white_space_=this.text_start_position_!=this.text_end_position_&&this.paragraph.IsCollapsibleWhiteSpace(this.text_start_position_)&&Qw(this.computed_style().white_space)}UpdateTextHasTrailingWhiteSpace(){this.text_has_trailing_white_space_=!this.has_trailing_line_break_&&this.text_start_position_!=this.text_end_position_&&this.paragraph.IsCollapsibleWhiteSpace(this.text_end_position_-1)&&Qw(this.computed_style().white_space)}GetWrapPosition(t,i,s,n,o,a,l){let u=qF(i,a),d=-1;switch(t){case qi.kWrapAtPolicyBefore:s&&this.paragraph.IsBreakPosition(this.text_start_position_,u)?d=this.text_start_position_:d=-1;break;case qi.kWrapAtPolicyLastOpportunityWithinWidth:{s?l!=this.GetNonCollapsedTextStartPosition()&&n.ADD_ASSIGN(new me(this.used_font_.GetSpaceWidth())):n.SUB_ASSIGN(this.GetLeadingWhiteSpaceWidth());let{break_width:f,break_position:g,result:x}=this.paragraph.FindBreakPosition(this.paragraph.base_direction(),!0,this.used_font_,l,this.text_end_position_,n,o,!1,u);d=g,x||(s&&this.paragraph.IsBreakPosition(this.text_start_position_,u)?d=this.text_start_position_:d=-1);break}case qi.kWrapAtPolicyLastOpportunity:d=this.paragraph.GetPreviousBreakPosition(this.text_end_position_,u);break;case qi.kWrapAtPolicyFirstOpportunity:{let f=s?l-1:l;d=this.paragraph.GetNextBreakPosition(f,u);break}}return d}SplitAtPosition(t){let i=this.text_end_position_;this.text_end_position_=t,this.truncated_text_end_position_=this.text_end_position_,this.update_size_results_valid_=!1,this.non_collapsible_text_width_=void 0;const s=!0;let n=new Cy(this.css_computed_style_declaration(),this.paragraph_ref_.copy(),t,i,this.has_trailing_line_break_,s,this.used_style_provider(),this.ctx);n.node=this.node,this.node.GetLayoutObject().AsLayoutTexes().Append(n),n.split_sibling_=this.split_sibling_,this.split_sibling_=n,this.has_trailing_line_break_=!1,this.UpdateTextHasTrailingWhiteSpace()}GetLeadingWhiteSpaceWidth(){return this.HasLeadingWhiteSpace()?new me(this.used_font_.GetSpaceWidth()):new me}GetTrailingWhiteSpaceWidth(){return this.HasTrailingWhiteSpace()&&this.HasNonCollapsibleText()?new me(this.used_font_.GetSpaceWidth()):new me}GetNonCollapsedTextStartPosition(){return this.should_collapse_leading_white_space_?this.GetNonCollapsibleTextStartPosition():this.text_start_position_}GetNonCollapsedTextEndPosition(){return this.should_collapse_trailing_white_space_?this.GetNonCollapsibleTextEndPosition():this.text_end_position_}GetNonCollapsibleTextStartPosition(){return this.text_has_leading_white_space_?this.text_start_position_+1:this.text_start_position_}GetNonCollapsibleTextEndPosition(){return this.text_has_trailing_white_space_?this.text_end_position_-1:this.text_end_position_}GetNonCollapsibleTextLength(){return this.GetNonCollapsibleTextEndPosition()-this.GetNonCollapsibleTextStartPosition()}GetNonCollapsibleText(){return this.paragraph.RetrieveUtf8SubString(this.GetNonCollapsibleTextStartPosition(),this.GetNonCollapsibleTextEndPosition(),Yw.kVisualTextOrder)}GetVisibleTextStartPosition(){return Math.max(this.GetNonCollapsedTextStartPosition(),this.truncated_text_start_position_)}GetVisibleTextEndPosition(){return Math.min(this.GetNonCollapsedTextEndPosition(),this.truncated_text_end_position_)}GetVisibleTextLength(){return this.GetVisibleTextEndPosition()-this.GetVisibleTextStartPosition()}HasVisibleText(){return this.GetVisibleTextLength()>0}GetVisibleText(){return this.paragraph.RetrieveUtf8SubString(this.GetVisibleTextStartPosition(),this.GetVisibleTextEndPosition(),Yw.kVisualTextOrder)}AbsoluteQuads(t,i){Ue()}RectOfSlice(t,i){const s=t,n=i,o=Math.max(s,this.text_start_position_),a=Math.min(n,this.text_end_position_),l=this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,o-this.text_start_position_),u=a===o?l:this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,a-this.text_start_position_),d=this.GetBorderBoxFromRoot(!1),f=this.GetInlineLevelBoxHeight().toFloat(),g=d.y().SUB(this.GetInlineLevelTopMargin()).toFloat(),x=d.x().toFloat(),E=Math.min(l,u);return new FK(x+E,g,Math.abs(u-l),f)}}function NQ(r,e){if(e.value().length!==0)for(let t=0;t<e.value().length;++t){let i=e.value()[t],s=new tn(i.offset_x().value(),i.offset_y().value()),n=i.blur_radius()?GF(i.blur_radius()).toFloat()/3:0,o=Zi(i.color());r.shadows.push(new OQ(s,n,o))}}function IQ(r,e){let i=Object.create(null);if(e.GetArea()==0)return _i(rn,"destination_size ",e," is empty"),i;if(r.GetArea()==0)return i.fill_rects.push(new lr(e)),i;let s=r.width()/r.height(),n=e.width()/e.height();if(Math.abs(s-n)<.01)i.image_rect=new lr(e);else if(s>n){let o=new Kw(e.width(),e.width()/s),a=(e.height()-o.height())/2;i.image_rect=new lr(new Hr(0,a),o),i.fill_rects.push(new lr(0,0,e.width(),a)),i.fill_rects.push(new lr(0,e.height()-a,e.width(),a))}else{let o=new Kw(e.height()*s,e.height()),a=(e.width()-o.width())/2;i.image_rect=new lr(new Hr(a,0),o),i.fill_rects.push(new lr(0,0,a,e.height())),i.fill_rects.push(new lr(e.width()-a,0,a,e.height()))}return i}class Av{constructor(e,t,i){c(this,"source");c(this,"destination_rect");c(this,"local_transform",Li.Identity());arguments.length===1?e instanceof Av?(this.source=e.source,this.destination_rect=e.destination_rect,this.local_transform=e.local_transform):(this.source=e,this.destination_rect=e?new lr(e.GetSize()):new lr):arguments.length===2?(this.source=e,t instanceof lr?this.destination_rect=t:this.destination_rect=new lr(py(t),this.source.GetSize())):(this.source=e,this.destination_rect=t,this.local_transform=i)}EQ(e){return this.source==e.source&&this.destination_rect==e.destination_rect&&this.local_transform==e.local_transform}}class Tk extends Nh{constructor(...t){super();c(this,"data_");this.data_=new Av(...t)}Accept(t){t.VisitImageNode(this)}GetBounds(){return this.data_.destination_rect}GetTypeId(){return rr(Tk)}data(){return this.data_}}class Pk extends Nh{constructor(t){super();c(this,"data_");this.data_=t}Accept(t){t.VisitFreehandNode(this)}GetBounds(){return new lr}GetTypeId(){return rr(Pk)}data(){return this.data_}}const FQ=2,MQ=300;var Jw=(r=>(r[r.kImage=1]="kImage",r[r.kVideo=2]="kVideo",r[r.kPunchOutVideo=3]="kPunchOutVideo",r[r.kLottie=4]="kLottie",r[r.kFreehand=5]="kFreehand",r))(Jw||{});class JF extends yc{constructor(t,i,s,n,o,a,l,u,d,f){super(t,u);c(this,"maybe_intrinsic_width_");c(this,"maybe_intrinsic_height_");c(this,"intrinsic_ratio_");c(this,"content_");c(this,"paragraph_ref_");c(this,"text_position_");c(this,"replaced_box_mode_");this.maybe_intrinsic_width_=o,this.maybe_intrinsic_height_=a,this.intrinsic_ratio_=l||FQ,this.content_=i,this._register(this.paragraph_ref_=s),this.text_position_=n,this.replaced_box_mode_=d,this.content_size_=new Os(f)}TryWrapAt(t,i,s,n,o){if(Q(!this.IsAbsolutelyPositioned()),!s||!this.parent())return ar.kWrapResultNoWrap;let a=this.parent().computed_style().overflow_wrap==_e.GetBreakWord();if(!VF(i,a))return ar.kWrapResultNoWrap;if(!kk(this.parent().computed_style().white_space))return this.text_position_>0&&this.paragraph_ref_.object.IsCollapsibleWhiteSpace(this.text_position_-1)?ar.kWrapResultWrapBefore:ar.kWrapResultNoWrap;let l=qF(i,a);return this.paragraph_ref_.object.IsBreakPosition(this.text_position_,l)?ar.kWrapResultWrapBefore:ar.kWrapResultNoWrap}SplitBidiLevelRuns(){}TrySplitAtSecondBidiLevelRun(){return!1}GetBidiLevel(){return this.paragraph_ref_.object.GetBidiLevel(this.text_position_)}SetShouldCollapseLeadingWhiteSpace(t){}SetShouldCollapseTrailingWhiteSpace(t){}HasLeadingWhiteSpace(){return!1}HasTrailingWhiteSpace(){return!1}IsCollapsed(){return!1}JustifiesLineExistence(){return!0}AffectsBaselineInBlockFormattingContext(){return!1}GetBaselineOffsetFromTopMarginEdge(){return this.GetMarginBoxHeight()}UpdateContentSizeAndMargins(t){let i=NF(this.computed_style(),t.containing_block_size),s=vk(this.computed_style(),t.containing_block_size);t.freeze_width&&(i=this.width()),t.freeze_height&&(s=this.height());let n=xk(this.computed_style(),t.containing_block_size),o=yk(this.computed_style(),t.containing_block_size);if(this.IsAbsolutelyPositioned()&&(this.set_left(n||new me(this.GetStaticPositionLeft())),this.set_top(o||new me(this.GetStaticPositionTop()))),s||Ec(Rp,'ReplacedBox element has computed height "auto"!'),i||Ec(Rp,'ReplacedBox element has computed width "auto"!'),(!s||!i)&&Ec(Rp,'Cobalt ReplacedBox does not handle "auto" dimensions correctly! ','"auto" dimensions are updated using the intrinsic dimensions of ',"the content (e.g. video width/height), which is often not what is ","intended."),i?this.set_width(i):s?this.set_width(s.MUL(this.intrinsic_ratio_)):this.maybe_intrinsic_width_?this.set_width(this.maybe_intrinsic_width_):this.maybe_intrinsic_height_?this.set_width(this.maybe_intrinsic_height_.MUL(this.intrinsic_ratio_)):this.set_width(new me(MQ)),s?this.set_height(s):!i&&this.maybe_intrinsic_height_?this.set_height(this.maybe_intrinsic_height_):this.set_height(this.width().DIV(this.intrinsic_ratio_)),!i&&!s){let g=FF(this.computed_style(),t.containing_block_size),x=BF(this.computed_style(),t.containing_block_size);x||(x=new me);let E=LF(this.computed_style(),t.containing_block_size),P=UF(this.computed_style(),t.containing_block_size)||new me,b=this.width(),R=this.height(),D,C=!1;E&&(D=me.Max(P,E),C=R.GT(D));let I,H=!1;if(g&&(I=me.Max(x,g),H=b.GT(I)),H)if(C){let N=I.DIV(b.toFloat()),V=D.DIV(R.toFloat());N>V?(this.set_width(me.Max(x,D.MUL(b.toFloat()/R.toFloat()))),this.set_height(D)):(this.set_width(I),this.set_height(me.Max(P,I.MUL(R.toFloat()/b.toFloat()))))}else R<P?(this.set_width(I),this.set_height(P)):(this.set_width(I),this.set_height(me.Max(I.MUL(R.toFloat()/b.toFloat()),P)));else if(b<x)if(C)this.set_width(x),this.set_height(D);else if(R<P){let N=x.DIV(b.toFloat()),V=P.DIV(R.toFloat());if(N>V){this.set_width(x);let O=x.MUL(R.toFloat()/b.toFloat());D?this.set_height(me.Min(D,O)):this.set_height(O)}else{let O=P.MUL(b.toFloat()/R.toFloat());I?this.set_width(me.Min(I,O)):this.set_width(O),this.set_height(P)}}else{this.set_width(x);let N=x.MUL(R.toFloat()/b.toFloat());D?this.set_height(me.Min(N,D)):this.set_height(N)}else if(C)this.set_width(me.Max(D.MUL(b.toFloat()/R.toFloat()),x)),this.set_height(D);else if(R<P){let N=P.MUL(b.toFloat()/R.toFloat());I?this.set_width(me.Min(N,I)):this.set_width(N),this.set_height(P)}}let a=Sv(this.computed_style(),t.containing_block_size),l=wv(this.computed_style(),t.containing_block_size),u=this.GetBorderBoxWidth();this.UpdateHorizontalMargins(t.containing_block_direction,t.containing_block_size.width(),u,a,l);let d=Ek(this.computed_style(),t.containing_block_size),f=Sk(this.computed_style(),t.containing_block_size);this.set_margin_top(d||new me),this.set_margin_bottom(f||new me)}RenderAndAnimateContent(t,i){if(this.computed_style().visibility==_e.GetVisible()&&!Ti(this.content_)){if(Ti(this.replaced_box_mode_)){t.AddChild(new Ad(new lr(this.content_box_size().toSizeF()),new Uc(new hh(0,0,0,1))));return}this.RenderAndAnimateContentWithLetterboxing(t)}}IsTransformable(){return!0}DumpProperties(t){return t=yc.prototype.DumpProperties.call(this,t),t+="text_position=",t+=this.text_position_,t+=" ",t+="bidi_level=",t+=this.paragraph_ref_.object.GetBidiLevel(this.text_position_),t+=" ",t}RenderAndAnimateContentWithLetterboxing(t){switch(this.replaced_box_mode_){case 1:{let i=IQ(this.content_size_.toSizeF(),this.content_box_size().toSizeF()),s=this.content_;BQ(i,s,t);break}case 5:{let i=this.content_;LQ(i,t);break}case 3:Ue();default:Ue()}}AbsoluteQuads(t,i){Ue()}}function BQ(r,e,t){if(r.image_rect){let i=new Av(e,r.image_rect);t.AddChild(new Tk(i))}}function LQ(r,e){e.AddChild(new Pk(r))}class UQ extends JF{GetLevel(){return Tr.kBlockLevel}DumpClassName(e){return e+="BlockLevelReplacedBox ",e}UpdateHorizontalMargins(e,t,i,s,n){this.UpdateHorizontalMarginsAssumingBlockLevelInFlowBox(e,t,i,s,n)}}class GQ extends JF{constructor(t,i,s,n,o,a,l,u,d,f){super(t,i,s,n,o,a,l,u,d,f);c(this,"is_hidden_by_ellipsis_");c(this,"was_hidden_by_ellipsis_");this.is_hidden_by_ellipsis_=!1,this.was_hidden_by_ellipsis_=!1}GetLevel(){return Tr.kInlineLevel}DoesFulfillEllipsisPlacementRequirement(){return!0}DoPreEllipsisPlacementProcessing(){this.was_hidden_by_ellipsis_=this.is_hidden_by_ellipsis_,this.is_hidden_by_ellipsis_=!1}DoPostEllipsisPlacementProcessing(){this.was_hidden_by_ellipsis_!=this.is_hidden_by_ellipsis_&&this.InvalidateRenderTreeNodesOfBoxAndAncestors()}IsHiddenByEllipsis(){return this.is_hidden_by_ellipsis_}UpdateHorizontalMargins(t,i,s,n,o){this.set_margin_left(n||new me),this.set_margin_right(o||new me)}DumpClassName(t){return t+="InlineLevelReplacedBox ",t}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){let a=n,l=o,u=s;return n?this.is_hidden_by_ellipsis_=!0:(a=!0,s?(l=this.GetMarginBoxStartEdgeOffsetFromContainingBlock(t),this.is_hidden_by_ellipsis_=!0):l=this.GetMarginBoxEndEdgeOffsetFromContainingBlock(t)),{is_placement_requirement_met:u,is_placed:a,placed_offset:l}}}class Oy extends bk{constructor(t,i,s){super(t,i);c(this,"should_collapse_leading_white_space_");c(this,"should_collapse_trailing_white_space_");c(this,"has_leading_white_space_");c(this,"has_trailing_white_space_");c(this,"is_collapsed_");c(this,"justifies_line_existence_");c(this,"first_box_justifying_line_existence_index_");c(this,"baseline_offset_from_margin_box_top_",new me);c(this,"line_height_",new me);c(this,"inline_top_margin_",new me);c(this,"used_font_");c(this,"is_split_on_left_");c(this,"is_split_on_right_");c(this,"base_direction_");c(this,"split_sibling_");this.should_collapse_leading_white_space_=!1,this.should_collapse_trailing_white_space_=!1,this.has_leading_white_space_=!1,this.has_trailing_white_space_=!1,this.is_collapsed_=!1,this.justifies_line_existence_=!1,this.first_box_justifying_line_existence_index_=0,this.used_font_=i.GetUsedFontList(t.data().font_family,t.data().font_size,t.data().font_style,t.data().font_weight),this.is_split_on_left_=!1,this.is_split_on_right_=!1,this.base_direction_=s}AsInlineContainerBox(){return this}GetLevel(){return Tr.kInlineLevel}TryAddChild(t){switch(t.GetLevel()){case Tr.kBlockLevel:if(!t.IsAbsolutelyPositioned())return!1;case Tr.kInlineLevel:return this.HasTrailingLineBreak()?!1:(this.PushBackDirectChild(t),!0);default:return et(),!1}}TrySplitAtEnd(){let t=new Oy(this.css_computed_style_declaration(),this.used_style_provider(),this.base_direction_);return this.base_direction_==tr.kLeftToRightBaseDirection?(this.is_split_on_right_=!0,t.SetIsSplitOnLeft(!0)):(this.is_split_on_left_=!0,t.SetIsSplitOnRight(!0)),t}GetInlineLevelBoxHeight(){return this.line_height_}GetInlineLevelTopMargin(){return this.inline_top_margin_}SetIsSplitOnLeft(t){this.is_split_on_left_=t}SetIsSplitOnRight(t){this.is_split_on_right_=t}UpdateContentSizeAndMargins(t){let i=this.used_font_.GetFontMetrics(),s=new me(i.ascent()),n=new KF(s,!0,this.computed_style().line_height,i,this.should_collapse_leading_white_space_,this.should_collapse_trailing_white_space_,t,tr.kLeftToRightBaseDirection,_e.GetLeft(),this.computed_style().font_size,new me,new me);for(let u of this.child_boxes())n.BeginAddChildAndMaybeOverflow(u);if(n.EndUpdates(),!t.freeze_width){if(this.set_width(n.shrink_to_fit_width()),this.is_split_on_left_)this.set_margin_left(new me);else{let u=Sv(this.computed_style(),t.containing_block_size);this.set_margin_left(u||new me)}if(this.is_split_on_right_)this.set_margin_right(new me);else{let u=wv(this.computed_style(),t.containing_block_size);this.set_margin_right(u||new me)}}this.set_height(new me(i.em_box_height())),this.line_height_=n.height(),this.set_margin_top(new me),this.set_margin_bottom(new me),this.inline_top_margin_=n.baseline_offset_from_top().SUB(n.top()).SUB(this.border_top_width()).SUB(this.padding_top()),this.has_leading_white_space_=n.HasLeadingWhiteSpace(),this.has_trailing_white_space_=n.HasTrailingWhiteSpace(),this.is_collapsed_=n.IsCollapsed(),this.justifies_line_existence_=n.LineExists()||this.HasNonZeroMarginOrBorderOrPadding(),this.first_box_justifying_line_existence_index_=n.GetFirstBoxJustifyingLineExistenceIndex(),this.baseline_offset_from_margin_box_top_=n.baseline_offset_from_top();let o=vk(this.computed_style(),t.containing_block_size,void 0),a=new kd,l=new kd;a.containing_block_direction=this.base_direction_,l.containing_block_direction=this.base_direction_,a.containing_block_size.set_width(this.width()),l.containing_block_size.set_width(this.GetPaddingBoxWidth()),a.maybe_margin_top=new me,a.maybe_margin_bottom=new me,a.maybe_height=o,a.containing_block_size.set_height(this.height()),l.containing_block_size.set_height(this.GetPaddingBoxHeight()),this.UpdateRectOfPositionedChildBoxes(a,l)}UpdateBorders(){if(this.IsBorderStyleNoneOrHidden(this.computed_style().border_left_style)&&this.IsBorderStyleNoneOrHidden(this.computed_style().border_top_style)&&this.IsBorderStyleNoneOrHidden(this.computed_style().border_right_style)&&this.IsBorderStyleNoneOrHidden(this.computed_style().border_bottom_style)){this.ResetBorderInsets();return}this.SetBorderInsets(this.is_split_on_left_?new me:bF(this.computed_style()),kF(this.computed_style()),this.is_split_on_right_?new me:TF(this.computed_style()),PF(this.computed_style()))}UpdatePaddings(t){this.SetPaddingInsets(this.is_split_on_left_?new me:RF(this.computed_style(),t.containing_block_size),DF(this.computed_style(),t.containing_block_size),this.is_split_on_right_?new me:CF(this.computed_style(),t.containing_block_size),OF(this.computed_style(),t.containing_block_size))}TryWrapAt(t,i,s,n,o){switch(Q(!this.IsAbsolutelyPositioned()),Q(s||this.justifies_line_existence_),t){case qi.kWrapAtPolicyBefore:return this.TryWrapAtBefore(i,s,n,o);case qi.kWrapAtPolicyLastOpportunityWithinWidth:return this.TryWrapAtLastOpportunityWithinWidth(i,s,n,o);case qi.kWrapAtPolicyLastOpportunity:return this.TryWrapAtLastOpportunityBeforeIndex(this.child_boxes().length,i,s,n,o);case qi.kWrapAtPolicyFirstOpportunity:return this.TryWrapAtFirstOpportunity(i,s,n,o);default:return et(),ar.kWrapResultNoWrap}}GetSplitSibling(){return this.split_sibling_}DoesFulfillEllipsisPlacementRequirement(){for(let t of this.child_boxes())if(t.DoesFulfillEllipsisPlacementRequirement())return!0;return!1}DoPreEllipsisPlacementProcessing(){for(let t of this.child_boxes())t.DoPreEllipsisPlacementProcessing()}DoPostEllipsisPlacementProcessing(){for(let t of this.child_boxes())t.DoPostEllipsisPlacementProcessing()}TrySplitAtSecondBidiLevelRun(){let t=-1,i=t,s=0;const n=this.child_boxes().length-1;for(;s<n;){const o=this.child_boxes()[s];let a=o.GetBidiLevel()||i;if(i!=a)if(i==t)i=a;else break;if(o.TrySplitAtSecondBidiLevelRun()){s=this.InsertSplitSiblingOfDirectChild(s);break}++s}return s==n?!1:(this.SplitAtIterator(s),!0)}GetBidiLevel(){if(this.child_boxes().length)return this.child_boxes()[0].GetBidiLevel()}SetShouldCollapseLeadingWhiteSpace(t){this.should_collapse_leading_white_space_!=t&&(this.should_collapse_leading_white_space_=t,this.InvalidateUpdateSizeInputs())}SetShouldCollapseTrailingWhiteSpace(t){this.should_collapse_trailing_white_space_!=t&&(this.should_collapse_trailing_white_space_=t,this.InvalidateUpdateSizeInputs())}HasLeadingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),Kt(this.width(),this.width()),this.has_leading_white_space_}HasTrailingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),Kt(this.width(),this.width()),this.has_trailing_white_space_}IsCollapsed(){return Kt(Tr.kInlineLevel,this.GetLevel()),Kt(this.width(),this.width()),this.is_collapsed_}JustifiesLineExistence(){return this.justifies_line_existence_}HasTrailingLineBreak(){return this.child_boxes().length?this.child_boxes()[this.child_boxes().length-1].HasTrailingLineBreak():!1}AffectsBaselineInBlockFormattingContext(){return et()}GetBaselineOffsetFromTopMarginEdge(){return this.baseline_offset_from_margin_box_top_}IsTransformable(){return!1}DumpClassName(t){return t+="InlineContainerBox ",t}DumpProperties(t){return t=super.DumpProperties(t),t+="line_height=",t+=this.line_height_.toFloat(),t+=" ",t+="inline_top_margin=",t+=this.inline_top_margin_.toFloat(),t+=" ",t+="has_leading_white_space=",t+=this.has_leading_white_space_,t+=" ",t+="has_trailing_white_space=",t+=this.has_trailing_white_space_,t+=" ",t+="is_collapsed=",t+=this.is_collapsed_,t+=" ",t+="justifies_line_existence=",t+=this.justifies_line_existence_,t+=" ",t}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){if(o=o.CLONE(),!n&&s){let u=this.GetContentBoxStartEdgeOffsetFromContainingBlock(t);(t==tr.kRightToLeftBaseDirection&&i>=u||t!=tr.kRightToLeftBaseDirection&&i<=u)&&(n=!0,o=i)}let a=n,l=this.GetContentBoxLeftEdgeOffsetFromContainingBlock();if(i.SUB_ASSIGN(l),t==tr.kRightToLeftBaseDirection)for(let u of this.child_boxes())u.IsAbsolutelyPositioned()||u.TryPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o);else for(let u of this.child_boxes())u.IsAbsolutelyPositioned()||u.TryPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o);return a||(n||(n=!0,o=i),o.ADD_ASSIGN(l)),{is_placed:n,is_placement_requirement_met:s,placed_offset:o}}TryWrapAtBefore(t,i,s,n){return this.child_boxes().length==0||!i?ar.kWrapResultNoWrap:this.TryWrapAtIndex(0,qi.kWrapAtPolicyBefore,t,i,s,n)}TryWrapAtLastOpportunityWithinWidth(t,i,s,n){if(Q(this.GetMarginBoxWidth().GT(s)),s.SUB_ASSIGN(this.GetContentBoxLeftEdgeOffsetFromMarginBox()),s.LT(new me(0)))return this.TryWrapAtBefore(t,i,s,n);let o=0;for(;o<this.child_boxes().length;){let a=this.child_boxes()[o];if(a.IsAbsolutelyPositioned())continue;let l=a.GetMarginBoxWidth();if(l.GT(s))break;s.SUB_ASSIGN(l),++o}if(!i&&o<this.first_box_justifying_line_existence_index_)return ar.kWrapResultNoWrap;if(o<this.child_boxes().length){let a=this.TryWrapAtIndex(o,qi.kWrapAtPolicyLastOpportunityWithinWidth,t,i,s,n);if(a!=ar.kWrapResultNoWrap)return a}return this.TryWrapAtLastOpportunityBeforeIndex(o,t,i,s,n)}TryWrapAtLastOpportunityBeforeIndex(t,i,s,n,o){let a=ar.kWrapResultNoWrap,l=s?0:this.first_box_justifying_line_existence_index_;for(;a==ar.kWrapResultNoWrap&&t>l;)--t,a=this.TryWrapAtIndex(t,qi.kWrapAtPolicyLastOpportunity,i,s,n,o);return a}TryWrapAtFirstOpportunity(t,i,s,n){let o=ar.kWrapResultNoWrap,a=i?0:this.first_box_justifying_line_existence_index_;for(;o==ar.kWrapResultNoWrap&&a<this.child_boxes().length;++a)o=this.TryWrapAtIndex(a,qi.kWrapAtPolicyFirstOpportunity,t,i,s,n);return o}TryWrapAtIndex(t,i,s,n,o,a){let l=this.child_boxes()[t];if(l.IsAbsolutelyPositioned())return this.SplitAtIterator(t),ar.kWrapResultSplitWrap;let u=n||t>this.first_box_justifying_line_existence_index_;Q(u||t==this.first_box_justifying_line_existence_index_);let d=l.TryWrapAt(i,s,u,o,a);if(d==ar.kWrapResultNoWrap)return ar.kWrapResultNoWrap;if(d==ar.kWrapResultWrapBefore&&t==0)return ar.kWrapResultWrapBefore;{let f=t;return d==ar.kWrapResultSplitWrap&&(f=this.InsertSplitSiblingOfDirectChild(f)),this.SplitAtIterator(f),ar.kWrapResultSplitWrap}}SplitAtIterator(t){let i=new Oy(this.css_computed_style_declaration(),this.used_style_provider(),this.base_direction_);this.base_direction_==tr.kLeftToRightBaseDirection?(this.is_split_on_right_=!0,i.SetIsSplitOnLeft(!0)):(this.is_split_on_left_=!0,i.SetIsSplitOnRight(!0)),i.split_sibling_=this.split_sibling_,this.split_sibling_=i,this.MoveDirectChildrenToSplitSibling(t)}AbsoluteQuadsForSelf(t,i){Ue()}}class HQ extends jF{constructor(t,i){super(t,i);c(this,"children",[]);this.children.push(i)}AsLayoutTexes(){return this}Append(t){this.children.push(t)}}class zQ{constructor(e,t,i,s,n,o,a){this.used_style_provider=e,this.line_break_iterator=t,this.character_break_iterator=i,this.ignore_background_element=s,this.dom_max_element_depth=n,this.paragraph_collection=o,this.textBoxes=a}}const qy=class extends TN{constructor(t,i,s,n){super();c(this,"id",qy.ID++);c(this,"parent_css_computed_style_declaration_");c(this,"dom_element_depth_");c(this,"context_");c(this,"generating_html_element_");c(this,"boxes_",[]);this.paragraph_store_=i,this.parent_css_computed_style_declaration_=t,this.dom_element_depth_=s,this.context_=n}VisitDocument(t){et()}VisitElement(t){if(this.dom_element_depth_>this.context_.dom_max_element_depth){Ec(rn,"Elements too deep in the DOM tree are ignored in layout.");return}let i=t.AsHTMLElement();if(!i)return;this.generating_html_element_=i;let s=i.AsFreehandElement();if(s){this.VisitFreehandElement(s);return}let n=i.AsHTMLImageElement();if(n){this.VisitImageElement(n);return}let o=i.AsHTMLBRElement();if(o){this.VisitBrElement(o);return}this.VisitNonReplacedElement(i)}VisitText(t){let i=new qc;i.SetData(yw(this.parent_css_computed_style_declaration_)),Q(t),Q(i.data());let s=t.text();if(s.length===0)return;let n=i.data().white_space,o=!TQ(n),a=Qw(n),l=!kk(n),u=0;for(;u<s.length;){let d,f,g=!1;if(o){let{result:C,sequence_start:I,sequence_length:H}=DQ(s,u);g=C,d=I,f=H}else d=s.length,f=0;let x=s.substr(u,d-u);if(a&&(x=PQ(x),this.paragraph_store_.value.object.GetTextEndPosition()==0&&x==" "))return;let E;i.data().text_transform==_e.GetUppercase()?E=qw.kUppercaseTextTransform:E=qw.kNoTextTransform,Q(this.paragraph_store_.value);let P=this.paragraph_store_.value.object.AppendUtf8String(x,E),b=this.paragraph_store_.value.object.GetTextEndPosition(),R=!1,D=new Cy(i,this.paragraph_store_.value.copy(),P,b,g,R,this.context_.used_style_provider,this.context_);D.node=t,t.SetLayoutObject(new HQ(t,D)),this.boxes_.push(D),this.context_.textBoxes.add(D),g&&this.paragraph_store_.value.object.AppendCodePoint(aa.kLineFeedCodePoint),Q(d),Q(f),u=d+f}l&&s[s.length-1]==" "&&(et(),this.paragraph_store_.value.object.AppendCodePoint(aa.kNoBreakSpaceCodePoint))}boxes(){return this.boxes_}VisitFreehandElement(t){let i=this.paragraph_store_.value.object.AppendCodePoint(aa.kObjectReplacementCharacterCodePoint),s=Jw.kFreehand,n=new tl(1,1),o=new dC(t.computed_style_declaration(),t.GetPath(),this.paragraph_store_.value,i,new me(n.width()),new me(n.height()),n.width()/n.height(),this.context_,s,n);t.computed_style().display.Accept(o);let a=o.replaced_box();a||et(),this.boxes_.push(a)}VisitImageElement(t){let i=this.paragraph_store_.value.object.AppendCodePoint(aa.kObjectReplacementCharacterCodePoint),s=Jw.kImage,n=t.GetResource(),o;n?o=n.GetSize():o=new tl(100,100);let a=new dC(t.computed_style_declaration(),n,this.paragraph_store_.value,i,new me(o.width()),new me(o.height()),o.width()/o.height(),this.context_,s,o);t.computed_style().display.Accept(a);let l=a.replaced_box();!l||this.boxes_.push(l)}VisitBrElement(t){var l;if(t.computed_style().display==_e.GetNone())return;let i=new qc;i.SetData(yw(t.computed_style_declaration())),Q((l=this.paragraph_store_.value)==null?void 0:l.object);let s=this.paragraph_store_.value.object.GetTextEndPosition(),n=!0,o=!1,a=new Cy(i,this.paragraph_store_.value.copy(),s,s,n,o,this.context_.used_style_provider,this.context_);this.paragraph_store_.value.object.AppendCodePoint(aa.kLineFeedCodePoint),a.SetGeneratingNode(t),this.boxes_.push(a)}VisitNonReplacedElement(t){let i=t.computed_style_declaration(),s=new WQ(t.GetUsedDirState(),t==this.context_.ignore_background_element?jQ(i):i,this.context_,this.paragraph_store_);t.computed_style().display.Accept(s);let n=s.container_box();if(!!n){n.SetGeneratingNode(t),this.boxes_.push(n);for(let o=t.firstChild;o;o=o.next_sibling()){let a=new qy(t.computed_style_declaration(),this.paragraph_store_,this.dom_element_depth_+1,this.context_);o.Accept(a);let l=a.boxes();for(let u of l)this.AppendChildBoxToLine(u)}s.dispose()}}AppendChildBoxToLine(t){let i=this.boxes_[this.boxes_.length-1];if(!i.TryAddChild(t)){let s=i.TrySplitAtEnd();Q(s),s.TryAddChild(t)||this.boxes_.push(t),this.boxes_.push(s)}}AppendPseudoElementToLine(t,i){Ue()}VisitComment(t){}};let Px=qy;c(Px,"ID",1);function jQ(r){let e=new qc,t=new Fg;return t.AssignFrom(r.data()),t.SetPropertyValue(T.kBackgroundColorProperty),t.SetPropertyValue(T.kBackgroundImageProperty),e.SetData(t),e}let VQ=1;class WQ extends jr{constructor(t,i,s,n){super();c(this,"id_");c(this,"element_dir_");c(this,"css_computed_style_declaration_");c(this,"context_");c(this,"has_scoped_directional_isolate_");c(this,"prior_paragraph_");c(this,"paragraph_scoped_");c(this,"container_box_");this.paragraph_store_=n,this.id_=VQ++,this.element_dir_=t,this.css_computed_style_declaration_=i,this.context_=s,this.has_scoped_directional_isolate_=!1,this.paragraph_scoped_=!1}dispose(){var t;this.has_scoped_directional_isolate_&&this.paragraph_store_.value.object.AppendCodePoint(aa.kPopDirectionalIsolateCodePoint),this.paragraph_scoped_&&(this.paragraph_store_.value.object.IsClosed()||this.paragraph_store_.value.object.Close(),Q(this.prior_paragraph_),this.prior_paragraph_.object.IsClosed()?this.paragraph_store_.value=this.context_.paragraph_collection.acquire(Gc.ID.toString(),this.prior_paragraph_.object.GetLocale(),this.prior_paragraph_.object.base_direction(),this.prior_paragraph_.object.GetDirectionalFormattingStack(),this.context_.line_break_iterator,this.context_.character_break_iterator):this.paragraph_store_.value=this.prior_paragraph_.copy()),(t=this.prior_paragraph_)==null||t.dispose()}VisitKeyword(t){switch(t.value()){case _.kBlock:this.CreateScopedParagraph(1),this.container_box_=new XF(this.css_computed_style_declaration_,this.paragraph_store_.value.object.base_direction(),this.context_.used_style_provider);break;case _.kFlex:Ue();break;case _.kInlineFlex:Ue();break;case _.kInline:this.element_dir_==mp.kDirLeftToRight?(this.has_scoped_directional_isolate_=!0,this.paragraph_store_.value.object.AppendCodePoint(aa.kLeftToRightIsolateCodePoint)):this.element_dir_==mp.kDirRightToLeft&&(this.has_scoped_directional_isolate_=!0,this.paragraph_store_.value.object.AppendCodePoint(aa.kRightToLeftIsolateCodePoint)),this.paragraph_store_.value.object.GetTextEndPosition()==0&&this.paragraph_store_.value.object.AppendCodePoint(aa.kNoBreakSpaceCodePoint),this.container_box_=new Oy(this.css_computed_style_declaration_,this.context_.used_style_provider,this.paragraph_store_.value.object.base_direction());break;case _.kInlineBlock:Ue();break;case _.kNone:break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et();break;default:et()}}container_box(){return this.container_box_}CreateScopedParagraph(t){Q(!this.paragraph_scoped_),this.paragraph_scoped_=!0,this.prior_paragraph_=this.paragraph_store_.value;let i;this.element_dir_==mp.kDirLeftToRight?i=tr.kLeftToRightBaseDirection:this.element_dir_==mp.kDirRightToLeft?i=tr.kRightToLeftBaseDirection:i=this.prior_paragraph_.object.GetDirectionalFormattingStackDirection(),t==1&&this.prior_paragraph_.object.Close(),this.paragraph_store_.value=this.context_.paragraph_collection.acquire(Gc.ID.toString(),this.prior_paragraph_.object.GetLocale(),i,[],this.context_.line_break_iterator,this.context_.character_break_iterator)}}class dC extends jr{constructor(t,i,s,n,o,a,l,u,d,f){super();c(this,"css_computed_style_declaration_");c(this,"content_");c(this,"paragraph_ref_");c(this,"text_position_");c(this,"maybe_intrinsic_width_");c(this,"maybe_intrinsic_height_");c(this,"maybe_intrinsic_ratio_");c(this,"context_");c(this,"replaced_box_mode_");c(this,"content_size_");c(this,"replaced_box_");this.css_computed_style_declaration_=t,this.content_=i,this.paragraph_ref_=s,this.text_position_=n,this.maybe_intrinsic_width_=o,this.maybe_intrinsic_height_=a,this.maybe_intrinsic_ratio_=l,this.context_=u,this.replaced_box_mode_=d,this.content_size_=f}VisitKeyword(t){switch(t.value()){case _.kBlock:case _.kFlex:this.replaced_box_=new UQ(this.css_computed_style_declaration_,this.content_,this.paragraph_ref_.copy(),this.text_position_,this.maybe_intrinsic_width_,this.maybe_intrinsic_height_,this.maybe_intrinsic_ratio_,this.context_.used_style_provider,this.replaced_box_mode_,this.content_size_);break;case _.kInline:case _.kInlineBlock:case _.kInlineFlex:this.replaced_box_=new GQ(this.css_computed_style_declaration_,this.content_,this.paragraph_ref_.copy(),this.text_position_,this.maybe_intrinsic_width_,this.maybe_intrinsic_height_,this.maybe_intrinsic_ratio_,this.context_.used_style_provider,this.replaced_box_mode_,this.content_size_);break;case _.kNone:break;default:et();break}}replaced_box(){return this.replaced_box_}}class $Q extends AA{}function KQ(r,e,t,i,s,n,o,a){e.UpdateComputedStyles();let l=bQ(e.initial_computed_style_data(),e,i),u=l.box;a&&u.set_blend_background_color(!1);const d=new Set;if(e.html()){const f=new kQ,g=new $Q;let x=f.acquire(Gc.ID.toString(),r,u.base_direction(),[],n,o);g.value=x;let E=new zQ(i,n,o,l.background_style_source,t,f,d),P=new Px(u.css_computed_style_declaration(),g,1,E);e.html().Accept(P);let b=P.boxes();for(let R of b)u.AddChild(R);x.object.IsClosed()||x.object.Close(),x.dispose(),g.dispose()}u.SplitBidiLevelRuns(),u.set_left(new me),u.set_top(new me),u.UpdateSize(new kd);{s.clear();for(let f of d){let g=f;for(;g;){const x=Zq(g);s.insert(x),g=g.GetSplitSibling()}}}return i.CleanupAfterLayout(),u}function iS(r,e){let t=new dh;return e.RenderAndAnimate(t,new tn(0,0),e),new fh(t)}function XQ(r,e,t,i,s){ZF(r,e,t||0,i||r.length-1,s||YQ)}function ZF(r,e,t,i,s){for(;i>t;){if(i-t>600){var n=i-t+1,o=e-t+1,a=Math.log(n),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1),d=Math.max(t,Math.floor(e-o*l/n+u)),f=Math.min(i,Math.floor(e+(n-o)*l/n+u));ZF(r,e,d,f,s)}var g=r[e],x=t,E=i;for(np(r,t,e),s(r[i],g)>0&&np(r,t,i);x<E;){for(np(r,x,E),x++,E--;s(r[x],g)<0;)x++;for(;s(r[E],g)>0;)E--}s(r[t],g)===0?np(r,t,E):(E++,np(r,E,i)),E<=e&&(t=E+1),e<=E&&(i=E-1)}}function np(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}function YQ(r,e){return r<e?-1:r>e?1:0}class qQ{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Nm(e,t))return i;const s=this.toBBox,n=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;Nm(e,l)&&(t.leaf?i.push(a):sS(e,l)?this._all(a,i):n.push(a))}t=n.pop()}return i}collides(e){let t=this.data;if(!Nm(e,t))return!1;const i=[];for(;t;){for(let s=0;s<t.children.length;s++){const n=t.children[s],o=t.leaf?this.toBBox(n):n;if(Nm(e,o)){if(t.leaf||sS(e,o))return!0;i.push(n)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=id([]),this}remove(e,t){if(!e)return this;let i=this.data;const s=this.toBBox(e),n=[],o=[];let a,l,u;for(;i||n.length;){if(i||(i=n.pop(),l=n[n.length-1],a=o.pop(),u=!0),i.leaf){const d=QQ(e,i.children,t);if(d!==-1)return i.children.splice(d,1),n.push(i),this._condense(n),this}!u&&!i.leaf&&sS(i,s)?(n.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,s){const n=i-t+1;let o=this._maxEntries,a;if(n<=o)return a=id(e.slice(t,i+1)),Yh(a,this.toBBox),a;s||(s=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,s-1))),a=id([]),a.leaf=!1,a.height=s;const l=Math.ceil(n/o),u=l*Math.ceil(Math.sqrt(o));fC(e,t,i,u,this.compareMinX);for(let d=t;d<=i;d+=u){const f=Math.min(d+u-1,i);fC(e,d,f,l,this.compareMinY);for(let g=d;g<=f;g+=l){const x=Math.min(g+l-1,f);a.children.push(this._build(e,g,x,s-1))}}return Yh(a,this.toBBox),a}_chooseSubtree(e,t,i,s){for(;s.push(t),!(t.leaf||s.length-1===i);){let n=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const u=t.children[l],d=nS(u),f=eJ(e,u)-d;f<o?(o=f,n=d<n?d:n,a=u):f===o&&d<n&&(n=d,a=u)}t=a||t.children[0]}return t}_insert(e,t,i){const s=i?e:this.toBBox(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),kp(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)}_split(e,t){const i=e[t],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);const o=this._chooseSplitIndex(i,n,s),a=id(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Yh(i,this.toBBox),Yh(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=id([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Yh(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let s,n=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=bp(e,0,a,this.toBBox),u=bp(e,a,i,this.toBBox),d=tJ(l,u),f=nS(l)+nS(u);d<n?(n=d,s=a,o=f<o?f:o):d===n&&f<o&&(o=f,s=a)}return s||i-t}_chooseSplitAxis(e,t,i){const s=e.leaf?this.compareMinX:JQ,n=e.leaf?this.compareMinY:ZQ,o=this._allDistMargin(e,t,i,s),a=this._allDistMargin(e,t,i,n);o<a&&e.children.sort(s)}_allDistMargin(e,t,i,s){e.children.sort(s);const n=this.toBBox,o=bp(e,0,t,n),a=bp(e,i-t,i,n);let l=Om(o)+Om(a);for(let u=t;u<i-t;u++){const d=e.children[u];kp(o,e.leaf?n(d):d),l+=Om(o)}for(let u=i-t-1;u>=t;u--){const d=e.children[u];kp(a,e.leaf?n(d):d),l+=Om(a)}return l}_adjustParentBBoxes(e,t,i){for(let s=i;s>=0;s--)kp(t[s],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Yh(e[t],this.toBBox)}}function QQ(r,e,t){if(!t)return e.indexOf(r);for(let i=0;i<e.length;i++)if(t(r,e[i]))return i;return-1}function Yh(r,e){bp(r,0,r.children.length,e,r)}function bp(r,e,t,i,s){s||(s=id(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let n=e;n<t;n++){const o=r.children[n];kp(s,r.leaf?i(o):o)}return s}function kp(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function JQ(r,e){return r.minX-e.minX}function ZQ(r,e){return r.minY-e.minY}function nS(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Om(r){return r.maxX-r.minX+(r.maxY-r.minY)}function eJ(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function tJ(r,e){const t=Math.max(r.minX,e.minX),i=Math.max(r.minY,e.minY),s=Math.min(r.maxX,e.maxX),n=Math.min(r.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,n-i)}function sS(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function Nm(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function id(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function fC(r,e,t,i,s){const n=[e,t];for(;n.length;){if(t=n.pop(),e=n.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;XQ(r,o,e,t,s),n.push(e,o,o,t)}}class Zw{constructor(e,t,i){this.render_tree=e,this.layout_time=t,this.on_rasterized_callback=i}}class Jp{constructor(e,t){this.node=e,this.box=t}static forElement(e,t){return new Jp(e,t)}}class rJ{constructor(e,t,i,s,n,o,a,l,u){c(this,"window_");c(this,"locale_");c(this,"used_style_provider_");c(this,"on_render_tree_produced_callback_");c(this,"on_layout_callback_");c(this,"produced_render_tree_");c(this,"are_computed_styles_and_box_tree_dirty_");c(this,"is_render_tree_pending_");c(this,"dom_max_element_depth_");c(this,"layout_refresh_rate_");c(this,"suspended_");c(this,"clear_window_with_background_color_");c(this,"layout_timer_");c(this,"line_break_iterator_");c(this,"character_break_iterator_");c(this,"initial_containing_block_");c(this,"_onDidLayout",new Dt);c(this,"onDidLayout",this._onDidLayout.event);c(this,"_selectionBackground");c(this,"textRTree");this.window_=i;const{object:{ptr:d},dispose:f}=u1(l);this.locale_=pN.createCanonical(d),f(),this.used_style_provider_=new Xq(i.html_element_context(),i.document().font_cache()),this.on_render_tree_produced_callback_=s,this.on_layout_callback_=n,this.produced_render_tree_=!1,this.are_computed_styles_and_box_tree_dirty_=!0,this.is_render_tree_pending_=!0,this.dom_max_element_depth_=o,this.layout_refresh_rate_=a,this.suspended_=e,this.clear_window_with_background_color_=u,this.layout_timer_=new _q,this.window_.document().AddObserver(this),this.window_.document().SetSynchronousLayoutCallback(this.DoSynchronousLayout.bind(this)),this.window_.document().SetSynchronousLayoutAndProduceRenderTreeCallback(this.DoSynchronousLayoutAndGetRenderTree.bind(this)),this.line_break_iterator_=qS.createLineInstance(this.locale_),this.character_break_iterator_=qS.createCharacterInstance(this.locale_),this.textRTree=new qQ,this._selectionBackground=new Kq(this)}OnLoad(){this.StartLayoutTimer()}OnMutation(){this.DirtyLayout()}StartLayoutTimer(){let e=As(dF.kMicrosecondsPerSecond/(this.layout_refresh_rate_+1));this.layout_timer_.Start(pr.FromMicroseconds(e),this.DoLayoutAndProduceRenderTree.bind(this))}DoSynchronousLayout(){if(this.suspended_){_i(rn,"Skipping layout since Cobalt is in a suspended state.");return}this.are_computed_styles_and_box_tree_dirty_&&(this.initial_containing_block_&&this.initial_containing_block_.dispose(),this.initial_containing_block_=KQ(this.locale_,this.window_.document(),this.dom_max_element_depth_,this.used_style_provider_,this.textRTree,this.line_break_iterator_,this.character_break_iterator_,this.clear_window_with_background_color_),this.are_computed_styles_and_box_tree_dirty_=!1,this._onDidLayout.fire())}DoSynchronousLayoutAndGetRenderTree(){return this.DoSynchronousLayout(),iS(this.used_style_provider_,this.initial_containing_block_)}DirtyLayout(){this.are_computed_styles_and_box_tree_dirty_=!0,this.is_render_tree_pending_=!0}DoLayoutAndProduceRenderTree(){if(this.suspended_)return;let e=this.window_.document();if(!!e.html()){if(e.SampleTimelineTime(),Q(this.is_render_tree_pending_||!this.are_computed_styles_and_box_tree_dirty_),this.is_render_tree_pending_){this.DoSynchronousLayout();let t=!this.produced_render_tree_&&!e.html().IsDisplayed();if(Reflect.set(window,"dumpLayout",()=>{var i;console.log((i=this.initial_containing_block_)==null?void 0:i.DumpWithIndent())}),this._updateSelection(),!t){let i=iS(this.used_style_provider_,this.initial_containing_block_);this.produced_render_tree_=!0;let s=e.timeline().current_time();Q(s),this.on_render_tree_produced_callback_(new Zw(i,pr.FromMilliseconds(s),MT)),this.is_render_tree_pending_=!1,Reflect.set(window,"dumpRender",()=>{console.log(oC(i)),console.log(i)})}}this.on_layout_callback_()}}DoProduceRenderTree(){let e=this.window_.document(),t=!this.produced_render_tree_&&!e.html().IsDisplayed();if(Reflect.set(window,"dumpLayout",()=>{var i;console.log((i=this.initial_containing_block_)==null?void 0:i.DumpWithIndent())}),!t){let i=iS(this.used_style_provider_,this.initial_containing_block_);this.produced_render_tree_=!0;let s=e.timeline().current_time();Q(s),this.on_render_tree_produced_callback_(new Zw(i,pr.FromMilliseconds(s),MT)),this.is_render_tree_pending_=!1,Reflect.set(window,"dumpRender",()=>{console.log(oC(i)),console.log(i)})}}hitTestDOM(e,t,i){let s=new me(e),n=new me(t),o=[];const a=[bn(this.initial_containing_block_)];for(;a.length;){const l=a.pop();let u=!1,d=l.node;if(l===this.initial_containing_block_)u=!0;else if(d){let g=d.AsElement();g&&(g.tagName==="html"||g.tagName==="body")&&(u=!0)}l.AsAnonymousBlockBox()&&(u=!0);let f;if(u||(f=l.GetClientRect(),u=f.top().LE(n)&&f.bottom().GE(n)&&f.left().LE(s)&&f.right().GE(s)),u){let g=l.AsTextBox();if(g){if(i.hitTestLevel>=Md.InlineBox){const E=bn(g.node);o.push(Jp.forElement(E,l))}}else!l.AsAnonymousBlockBox()&&d&&(l.AsInlineContainerBox()?i.hitTestLevel>=Md.InlineBox&&o.push(Jp.forElement(d,l)):o.push(Jp.forElement(d,l)));let x=l.AsContainerBox();if(x){const E=x.child_boxes();for(let P=0,b=E.length;P<b;P++)a.push(E[P])}}}return o}hitTestRTree(e,t,i,s){return this.textRTree.search({minX:e,minY:t,maxX:i,maxY:s})}getRTreeItemsByParagraph(e){return this.textRTree.all().filter(i=>i.box.paragraph===e).sort((i,s)=>i.minY<s.minY?-1:1)}getParagraphOfNode(e){const t=e.GetLayoutObject().box;if(!!t.isTextBox())return t.paragraph}onSelectionChanged(e){this._updateSelection()}_updateSelection(){const e=this.window_.document().getSelection();this._selectionBackground.update(e),this.DoProduceRenderTree()}}function iJ(r,e,t){return new gF(r,e,!1,t.CreateImageLoader.bind(t),t.NotifyResourceRequested.bind(t))}class nJ{OnReceivedPassed(e,t){this.OnReceived(e,t)}}class sJ{constructor(e){c(this,"handler_");this.handler_=e}handler(){return this.handler_}}class _C{constructor(e,t,i,s=void 0,n=!1){c(this,"fetcher_creator_");c(this,"decoder_creator_");c(this,"decoder_");c(this,"fetcher_handler_to_decoder_adaptor_");c(this,"fetcher_");c(this,"fetcher_creator_error_closure_");c(this,"on_load_complete_");c(this,"on_destruction_");c(this,"is_suspended_");c(this,"is_load_complete_",!1);this.fetcher_creator_=e,this.decoder_creator_=t,this.on_load_complete_=i,this.on_destruction_=s,this.is_suspended_=n,Q(this.fetcher_creator_),Q(this.decoder_creator_),Q(this.on_load_complete_),this.decoder_=this.decoder_creator_(this.LoadComplete.bind(this)),this.is_suspended_||this.Start()}dispose(){this.on_destruction_&&this.on_destruction_(this)}LoadComplete(e){this.is_load_complete_=!0,this.on_load_complete_(e)}Start(){Q(!this.is_suspended_),this.fetcher_handler_to_decoder_adaptor_=new oJ(this.decoder_,this.LoadComplete.bind(this)),this.fetcher_=this.fetcher_creator_(this.fetcher_handler_to_decoder_adaptor_),this.fetcher_||(this.fetcher_creator_error_closure_=this.LoadComplete.bind(this,"Fetcher was not created."),this.fetcher_creator_error_closure_())}}class oJ extends nJ{constructor(t,i){super();c(this,"decoder_");c(this,"load_complete_callback_");this.decoder_=t,this.load_complete_callback_=i}OnReceived(t,i){this.decoder_.DecodeChunk(i)}OnDone(t){Q(t),this.decoder_.Finish()}OnError(t,i){this.load_complete_callback_(i)}}class Rk{Decoder(){}}function eA(r,e,t=0){for(let i=0;i<e.length;i++)if(r[i+t]!=e[i])return!1;return!0}function Im(r,e,t=0){return eA(r,e.split("").map(i=>i.charCodeAt(0),t))}function aJ(r,e,t,i){for(let s=0;s<i;s++)r[s+t]=e[s]}var tA=(r=>(r[r.kWaitingForHeader=0]="kWaitingForHeader",r[r.kReadLines=1]="kReadLines",r[r.kDone=2]="kDone",r[r.kError=3]="kError",r))(tA||{});class lJ{constructor(e){c(this,"resource_provider_");c(this,"state_");c(this,"pixel_format_");this.resource_provider_=e,this.state_=0,this.CalculatePixelFormat()}DecodeChunk(e){this.DecodeChunkInternal(e)}FinishAndMaybeReturnImage(){return this.FinishInternal()}resource_provider(){return this.resource_provider_}set_state(e){this.state_=e}state(){return this.state_}pixel_format(){return this.pixel_format_}AllocateImageData(e,t){Q(this.resource_provider_.AlphaFormatSupported(du.kAlphaFormatOpaque)),Q(this.resource_provider_.AlphaFormatSupported(du.kAlphaFormatPremultiplied));let i=this.resource_provider_.AllocateImageData(e,this.pixel_format(),t?du.kAlphaFormatPremultiplied:du.kAlphaFormatOpaque);return Q(i),i}CreateImage(e){return Q(e),this.resource_provider().CreateImage(e)}CalculatePixelFormat(){this.pixel_format_=af.kPixelFormatRGBA8,this.resource_provider_.PixelFormatSupported(this.pixel_format_)||(this.pixel_format_=af.kPixelFormatBGRA8),Q(this.resource_provider_.PixelFormatSupported(this.pixel_format_))}}var eM={exports:{}};(function(r){function e(i){var s=Math.floor,n=new Array(64),o=new Array(64),a=new Array(64),l=new Array(64),u,d,f,g,x=new Array(65535),E=new Array(65535),P=new Array(64),b=new Array(64),R=[],D=0,C=7,I=new Array(64),H=new Array(64),N=new Array(64),V=new Array(256),O=new Array(2048),W,q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],fe=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Oe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],He=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ut=[0,1,2,3,4,5,6,7,8,9,10,11],qe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function nt(oe){for(var ae=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],we=0;we<64;we++){var Re=s((ae[we]*oe+50)/100);Re<1?Re=1:Re>255&&(Re=255),n[q[we]]=Re}for(var Xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],We=0;We<64;We++){var Qe=s((Xe[We]*oe+50)/100);Qe<1?Qe=1:Qe>255&&(Qe=255),o[q[We]]=Qe}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],tt=0,_t=0;_t<8;_t++)for(var it=0;it<8;it++)a[tt]=1/(n[q[tt]]*$e[_t]*$e[it]*8),l[tt]=1/(o[q[tt]]*$e[_t]*$e[it]*8),tt++}function dt(oe,ae){for(var we=0,Re=0,Xe=new Array,We=1;We<=16;We++){for(var Qe=1;Qe<=oe[We];Qe++)Xe[ae[Re]]=[],Xe[ae[Re]][0]=we,Xe[ae[Re]][1]=We,Re++,we++;we*=2}return Xe}function rt(){u=dt(re,fe),d=dt(He,ut),f=dt(he,Oe),g=dt(qe,Be)}function bt(){for(var oe=1,ae=2,we=1;we<=15;we++){for(var Re=oe;Re<ae;Re++)E[32767+Re]=we,x[32767+Re]=[],x[32767+Re][1]=we,x[32767+Re][0]=Re;for(var Xe=-(ae-1);Xe<=-oe;Xe++)E[32767+Xe]=we,x[32767+Xe]=[],x[32767+Xe][1]=we,x[32767+Xe][0]=ae-1+Xe;oe<<=1,ae<<=1}}function Z(){for(var oe=0;oe<256;oe++)O[oe]=19595*oe,O[oe+256>>0]=38470*oe,O[oe+512>>0]=7471*oe+32768,O[oe+768>>0]=-11059*oe,O[oe+1024>>0]=-21709*oe,O[oe+1280>>0]=32768*oe+8421375,O[oe+1536>>0]=-27439*oe,O[oe+1792>>0]=-5329*oe}function ne(oe){for(var ae=oe[0],we=oe[1]-1;we>=0;)ae&1<<we&&(D|=1<<C),we--,C--,C<0&&(D==255?(se(255),se(0)):se(D),C=7,D=0)}function se(oe){R.push(oe)}function Ee(oe){se(oe>>8&255),se(oe&255)}function Se(oe,ae){var we,Re,Xe,We,Qe,$e,tt,_t,it=0,St,Ot=8,Rt=64;for(St=0;St<Ot;++St){we=oe[it],Re=oe[it+1],Xe=oe[it+2],We=oe[it+3],Qe=oe[it+4],$e=oe[it+5],tt=oe[it+6],_t=oe[it+7];var Mt=we+_t,Ie=we-_t,gt=Re+tt,mt=Re-tt,Et=Xe+$e,zt=Xe-$e,ai=We+Qe,Er=We-Qe,mr=Mt+ai,xi=Mt-ai,_s=gt+Et,un=gt-Et;oe[it]=mr+_s,oe[it+4]=mr-_s;var Mr=(un+xi)*.707106781;oe[it+2]=xi+Mr,oe[it+6]=xi-Mr,mr=Er+zt,_s=zt+mt,un=mt+Ie;var Di=(mr-un)*.382683433,Jn=.5411961*mr+Di,fr=1.306562965*un+Di,uo=_s*.707106781,Yt=Ie+uo,ji=Ie-uo;oe[it+5]=ji+Jn,oe[it+3]=ji-Jn,oe[it+1]=Yt+fr,oe[it+7]=Yt-fr,it+=8}for(it=0,St=0;St<Ot;++St){we=oe[it],Re=oe[it+8],Xe=oe[it+16],We=oe[it+24],Qe=oe[it+32],$e=oe[it+40],tt=oe[it+48],_t=oe[it+56];var te=we+_t,Uo=we-_t,zu=Re+tt,Tl=Re-tt,Go=Xe+$e,co=Xe-$e,Ut=We+Qe,cn=We-Qe,Vi=te+Ut,Pl=te-Ut,Ho=zu+Go,Sr=zu-Go;oe[it]=Vi+Ho,oe[it+32]=Vi-Ho;var Zn=(Sr+Pl)*.707106781;oe[it+16]=Pl+Zn,oe[it+48]=Pl-Zn,Vi=cn+co,Ho=co+Tl,Sr=Tl+Uo;var Rl=(Vi-Sr)*.382683433,ju=.5411961*Vi+Rl,Mh=1.306562965*Sr+Rl,Vu=Ho*.707106781,Wu=Uo+Vu,ps=Uo-Vu;oe[it+40]=ps+ju,oe[it+24]=ps-ju,oe[it+8]=Wu+Mh,oe[it+56]=Wu-Mh,it++}var Dl;for(St=0;St<Rt;++St)Dl=oe[St]*ae[St],P[St]=Dl>0?Dl+.5|0:Dl-.5|0;return P}function de(){Ee(65504),Ee(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),Ee(1),Ee(1),se(0),se(0)}function Pe(oe){if(!!oe){Ee(65505),oe[0]===69&&oe[1]===120&&oe[2]===105&&oe[3]===102?Ee(oe.length+2):(Ee(oe.length+5+2),se(69),se(120),se(105),se(102),se(0));for(var ae=0;ae<oe.length;ae++)se(oe[ae])}}function ze(oe,ae){Ee(65472),Ee(17),se(8),Ee(ae),Ee(oe),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)}function J(){Ee(65499),Ee(132),se(0);for(var oe=0;oe<64;oe++)se(n[oe]);se(1);for(var ae=0;ae<64;ae++)se(o[ae])}function Le(){Ee(65476),Ee(418),se(0);for(var oe=0;oe<16;oe++)se(re[oe+1]);for(var ae=0;ae<=11;ae++)se(fe[ae]);se(16);for(var we=0;we<16;we++)se(he[we+1]);for(var Re=0;Re<=161;Re++)se(Oe[Re]);se(1);for(var Xe=0;Xe<16;Xe++)se(He[Xe+1]);for(var We=0;We<=11;We++)se(ut[We]);se(17);for(var Qe=0;Qe<16;Qe++)se(qe[Qe+1]);for(var $e=0;$e<=161;$e++)se(Be[$e])}function F(oe){typeof oe>"u"||oe.constructor!==Array||oe.forEach(ae=>{if(typeof ae=="string"){Ee(65534);var we=ae.length;Ee(we+2);var Re;for(Re=0;Re<we;Re++)se(ae.charCodeAt(Re))}})}function U(){Ee(65498),Ee(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0)}function j(oe,ae,we,Re,Xe){for(var We=Xe[0],Qe=Xe[240],$e,tt=16,_t=63,it=64,St=Se(oe,ae),Ot=0;Ot<it;++Ot)b[q[Ot]]=St[Ot];var Rt=b[0]-we;we=b[0],Rt==0?ne(Re[0]):($e=32767+Rt,ne(Re[E[$e]]),ne(x[$e]));for(var Mt=63;Mt>0&&b[Mt]==0;Mt--);if(Mt==0)return ne(We),we;for(var Ie=1,gt;Ie<=Mt;){for(var mt=Ie;b[Ie]==0&&Ie<=Mt;++Ie);var Et=Ie-mt;if(Et>=tt){gt=Et>>4;for(var zt=1;zt<=gt;++zt)ne(Qe);Et=Et&15}$e=32767+b[Ie],ne(Xe[(Et<<4)+E[$e]]),ne(x[$e]),Ie++}return Mt!=_t&&ne(We),we}function ee(){for(var oe=String.fromCharCode,ae=0;ae<256;ae++)V[ae]=oe(ae)}this.encode=function(oe,ae){new Date().getTime(),ae&&ce(ae),R=new Array,D=0,C=7,Ee(65496),de(),F(oe.comments),Pe(oe.exifBuffer),J(),ze(oe.width,oe.height),Le(),U();var we=0,Re=0,Xe=0;D=0,C=7,this.encode.displayName="_encode_";for(var We=oe.data,Qe=oe.width,$e=oe.height,tt=Qe*4,_t,it=0,St,Ot,Rt,Mt,Ie,gt,mt,Et;it<$e;){for(_t=0;_t<tt;){for(Mt=tt*it+_t,Ie=Mt,gt=-1,mt=0,Et=0;Et<64;Et++)mt=Et>>3,gt=(Et&7)*4,Ie=Mt+mt*tt+gt,it+mt>=$e&&(Ie-=tt*(it+1+mt-$e)),_t+gt>=tt&&(Ie-=_t+gt-tt+4),St=We[Ie++],Ot=We[Ie++],Rt=We[Ie++],I[Et]=(O[St]+O[Ot+256>>0]+O[Rt+512>>0]>>16)-128,H[Et]=(O[St+768>>0]+O[Ot+1024>>0]+O[Rt+1280>>0]>>16)-128,N[Et]=(O[St+1280>>0]+O[Ot+1536>>0]+O[Rt+1792>>0]>>16)-128;we=j(I,a,we,u,f),Re=j(H,l,Re,d,g),Xe=j(N,l,Xe,d,g),_t+=32}it+=8}if(C>=0){var zt=[];zt[1]=C+1,zt[0]=(1<<C+1)-1,ne(zt)}return Ee(65497),Buffer.from(R)};function ce(oe){if(oe<=0&&(oe=1),oe>100&&(oe=100),W!=oe){var ae=0;oe<50?ae=Math.floor(5e3/oe):ae=Math.floor(200-oe*2),nt(ae),W=oe}}function ye(){var oe=new Date().getTime();i||(i=50),ee(),rt(),bt(),Z(),ce(i),new Date().getTime()-oe}ye()}r.exports=t;function t(i,s){typeof s>"u"&&(s=50);var n=new e(s),o=n.encode(i,s);return{data:o,width:i.width,height:i.height}}})(eM);var tM={exports:{}};(function(r){var e=function(){var s=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),n=4017,o=799,a=3406,l=2276,u=1567,d=3784,f=5793,g=2896;function x(){}function E(H,N){for(var V=0,O=[],W,q,re=16;re>0&&!H[re-1];)re--;O.push({children:[],index:0});var fe=O[0],he;for(W=0;W<re;W++){for(q=0;q<H[W];q++){for(fe=O.pop(),fe.children[fe.index]=N[V];fe.index>0;){if(O.length===0)throw new Error("Could not recreate Huffman Table");fe=O.pop()}for(fe.index++,O.push(fe);O.length<=W;)O.push(he={children:[],index:0}),fe.children[fe.index]=he.children,fe=he;V++}W+1<re&&(O.push(he={children:[],index:0}),fe.children[fe.index]=he.children,fe=he)}return O[0].children}function P(H,N,V,O,W,q,re,fe,he,Oe){V.precision,V.samplesPerLine,V.scanLines;var He=V.mcusPerLine,ut=V.progressive;V.maxH,V.maxV;var qe=N,Be=0,nt=0;function dt(){if(nt>0)return nt--,Be>>nt&1;if(Be=H[N++],Be==255){var $e=H[N++];if($e)throw new Error("unexpected marker: "+(Be<<8|$e).toString(16))}return nt=7,Be>>>7}function rt($e){for(var tt=$e,_t;(_t=dt())!==null;){if(tt=tt[_t],typeof tt=="number")return tt;if(typeof tt!="object")throw new Error("invalid huffman sequence")}return null}function bt($e){for(var tt=0;$e>0;){var _t=dt();if(_t===null)return;tt=tt<<1|_t,$e--}return tt}function Z($e){var tt=bt($e);return tt>=1<<$e-1?tt:tt+(-1<<$e)+1}function ne($e,tt){var _t=rt($e.huffmanTableDC),it=_t===0?0:Z(_t);tt[0]=$e.pred+=it;for(var St=1;St<64;){var Ot=rt($e.huffmanTableAC),Rt=Ot&15,Mt=Ot>>4;if(Rt===0){if(Mt<15)break;St+=16;continue}St+=Mt;var Ie=s[St];tt[Ie]=Z(Rt),St++}}function se($e,tt){var _t=rt($e.huffmanTableDC),it=_t===0?0:Z(_t)<<he;tt[0]=$e.pred+=it}function Ee($e,tt){tt[0]|=dt()<<he}var Se=0;function de($e,tt){if(Se>0){Se--;return}for(var _t=q,it=re;_t<=it;){var St=rt($e.huffmanTableAC),Ot=St&15,Rt=St>>4;if(Ot===0){if(Rt<15){Se=bt(Rt)+(1<<Rt)-1;break}_t+=16;continue}_t+=Rt;var Mt=s[_t];tt[Mt]=Z(Ot)*(1<<he),_t++}}var Pe=0,ze;function J($e,tt){for(var _t=q,it=re,St=0;_t<=it;){var Ot=s[_t],Rt=tt[Ot]<0?-1:1;switch(Pe){case 0:var Mt=rt($e.huffmanTableAC),Ie=Mt&15,St=Mt>>4;if(Ie===0)St<15?(Se=bt(St)+(1<<St),Pe=4):(St=16,Pe=1);else{if(Ie!==1)throw new Error("invalid ACn encoding");ze=Z(Ie),Pe=St?2:3}continue;case 1:case 2:tt[Ot]?tt[Ot]+=(dt()<<he)*Rt:(St--,St===0&&(Pe=Pe==2?3:0));break;case 3:tt[Ot]?tt[Ot]+=(dt()<<he)*Rt:(tt[Ot]=ze<<he,Pe=0);break;case 4:tt[Ot]&&(tt[Ot]+=(dt()<<he)*Rt);break}_t++}Pe===4&&(Se--,Se===0&&(Pe=0))}function Le($e,tt,_t,it,St){var Ot=_t/He|0,Rt=_t%He,Mt=Ot*$e.v+it,Ie=Rt*$e.h+St;$e.blocks[Mt]===void 0&&Oe.tolerantDecoding||tt($e,$e.blocks[Mt][Ie])}function F($e,tt,_t){var it=_t/$e.blocksPerLine|0,St=_t%$e.blocksPerLine;$e.blocks[it]===void 0&&Oe.tolerantDecoding||tt($e,$e.blocks[it][St])}var U=O.length,j,ee,ce,ye,oe,ae;ut?q===0?ae=fe===0?se:Ee:ae=fe===0?de:J:ae=ne;var we=0,Re,Xe;U==1?Xe=O[0].blocksPerLine*O[0].blocksPerColumn:Xe=He*V.mcusPerColumn,W||(W=Xe);for(var We,Qe;we<Xe;){for(ee=0;ee<U;ee++)O[ee].pred=0;if(Se=0,U==1)for(j=O[0],oe=0;oe<W;oe++)F(j,ae,we),we++;else for(oe=0;oe<W;oe++){for(ee=0;ee<U;ee++)for(j=O[ee],We=j.h,Qe=j.v,ce=0;ce<Qe;ce++)for(ye=0;ye<We;ye++)Le(j,ae,we,ce,ye);if(we++,we===Xe)break}if(we===Xe)do{if(H[N]===255&&H[N+1]!==0)break;N+=1}while(N<H.length-2);if(nt=0,Re=H[N]<<8|H[N+1],Re<65280)throw new Error("marker was not found");if(Re>=65488&&Re<=65495)N+=2;else break}return N-qe}function b(H,N){var V=[],O=N.blocksPerLine,W=N.blocksPerColumn,q=O<<3,re=new Int32Array(64),fe=new Uint8Array(64);function he(bt,Z,ne){var se=N.quantizationTable,Ee,Se,de,Pe,ze,J,Le,F,U,j=ne,ee;for(ee=0;ee<64;ee++)j[ee]=bt[ee]*se[ee];for(ee=0;ee<8;++ee){var ce=8*ee;if(j[1+ce]==0&&j[2+ce]==0&&j[3+ce]==0&&j[4+ce]==0&&j[5+ce]==0&&j[6+ce]==0&&j[7+ce]==0){U=f*j[0+ce]+512>>10,j[0+ce]=U,j[1+ce]=U,j[2+ce]=U,j[3+ce]=U,j[4+ce]=U,j[5+ce]=U,j[6+ce]=U,j[7+ce]=U;continue}Ee=f*j[0+ce]+128>>8,Se=f*j[4+ce]+128>>8,de=j[2+ce],Pe=j[6+ce],ze=g*(j[1+ce]-j[7+ce])+128>>8,F=g*(j[1+ce]+j[7+ce])+128>>8,J=j[3+ce]<<4,Le=j[5+ce]<<4,U=Ee-Se+1>>1,Ee=Ee+Se+1>>1,Se=U,U=de*d+Pe*u+128>>8,de=de*u-Pe*d+128>>8,Pe=U,U=ze-Le+1>>1,ze=ze+Le+1>>1,Le=U,U=F+J+1>>1,J=F-J+1>>1,F=U,U=Ee-Pe+1>>1,Ee=Ee+Pe+1>>1,Pe=U,U=Se-de+1>>1,Se=Se+de+1>>1,de=U,U=ze*l+F*a+2048>>12,ze=ze*a-F*l+2048>>12,F=U,U=J*o+Le*n+2048>>12,J=J*n-Le*o+2048>>12,Le=U,j[0+ce]=Ee+F,j[7+ce]=Ee-F,j[1+ce]=Se+Le,j[6+ce]=Se-Le,j[2+ce]=de+J,j[5+ce]=de-J,j[3+ce]=Pe+ze,j[4+ce]=Pe-ze}for(ee=0;ee<8;++ee){var ye=ee;if(j[8+ye]==0&&j[16+ye]==0&&j[24+ye]==0&&j[32+ye]==0&&j[40+ye]==0&&j[48+ye]==0&&j[56+ye]==0){U=f*ne[ee+0]+8192>>14,j[0+ye]=U,j[8+ye]=U,j[16+ye]=U,j[24+ye]=U,j[32+ye]=U,j[40+ye]=U,j[48+ye]=U,j[56+ye]=U;continue}Ee=f*j[0+ye]+2048>>12,Se=f*j[32+ye]+2048>>12,de=j[16+ye],Pe=j[48+ye],ze=g*(j[8+ye]-j[56+ye])+2048>>12,F=g*(j[8+ye]+j[56+ye])+2048>>12,J=j[24+ye],Le=j[40+ye],U=Ee-Se+1>>1,Ee=Ee+Se+1>>1,Se=U,U=de*d+Pe*u+2048>>12,de=de*u-Pe*d+2048>>12,Pe=U,U=ze-Le+1>>1,ze=ze+Le+1>>1,Le=U,U=F+J+1>>1,J=F-J+1>>1,F=U,U=Ee-Pe+1>>1,Ee=Ee+Pe+1>>1,Pe=U,U=Se-de+1>>1,Se=Se+de+1>>1,de=U,U=ze*l+F*a+2048>>12,ze=ze*a-F*l+2048>>12,F=U,U=J*o+Le*n+2048>>12,J=J*n-Le*o+2048>>12,Le=U,j[0+ye]=Ee+F,j[56+ye]=Ee-F,j[8+ye]=Se+Le,j[48+ye]=Se-Le,j[16+ye]=de+J,j[40+ye]=de-J,j[24+ye]=Pe+ze,j[32+ye]=Pe-ze}for(ee=0;ee<64;++ee){var oe=128+(j[ee]+8>>4);Z[ee]=oe<0?0:oe>255?255:oe}}I(q*W*8);for(var Oe,He,ut=0;ut<W;ut++){var qe=ut<<3;for(Oe=0;Oe<8;Oe++)V.push(new Uint8Array(q));for(var Be=0;Be<O;Be++){he(N.blocks[ut][Be],fe,re);var nt=0,dt=Be<<3;for(He=0;He<8;He++){var rt=V[qe+He];for(Oe=0;Oe<8;Oe++)rt[dt+Oe]=fe[nt++]}}}return V}function R(H){return H<0?0:H>255?255:H}x.prototype={load:function(N){var V=new XMLHttpRequest;V.open("GET",N,!0),V.responseType="arraybuffer",V.onload=function(){var O=new Uint8Array(V.response||V.mozResponseArrayBuffer);this.parse(O),this.onload&&this.onload()}.bind(this),V.send(null)},parse:function(N){var V=this.opts.maxResolutionInMP*1e3*1e3,O=0;N.length;function W(){var Rt=N[O]<<8|N[O+1];return O+=2,Rt}function q(){var Rt=W(),Mt=N.subarray(O,O+Rt-2);return O+=Mt.length,Mt}function re(Rt){var Mt=1,Ie=1,gt,mt;for(mt in Rt.components)Rt.components.hasOwnProperty(mt)&&(gt=Rt.components[mt],Mt<gt.h&&(Mt=gt.h),Ie<gt.v&&(Ie=gt.v));var Et=Math.ceil(Rt.samplesPerLine/8/Mt),zt=Math.ceil(Rt.scanLines/8/Ie);for(mt in Rt.components)if(Rt.components.hasOwnProperty(mt)){gt=Rt.components[mt];var ai=Math.ceil(Math.ceil(Rt.samplesPerLine/8)*gt.h/Mt),Er=Math.ceil(Math.ceil(Rt.scanLines/8)*gt.v/Ie),mr=Et*gt.h,xi=zt*gt.v,_s=xi*mr,un=[];I(_s*256);for(var Mr=0;Mr<xi;Mr++){for(var Di=[],Jn=0;Jn<mr;Jn++)Di.push(new Int32Array(64));un.push(Di)}gt.blocksPerLine=ai,gt.blocksPerColumn=Er,gt.blocks=un}Rt.maxH=Mt,Rt.maxV=Ie,Rt.mcusPerLine=Et,Rt.mcusPerColumn=zt}var fe=null,he=null,Oe,He,ut=[],qe=[],Be=[],nt=[],dt=W(),rt=-1;if(this.comments=[],dt!=65496)throw new Error("SOI not found");for(dt=W();dt!=65497;){var bt,Z;switch(dt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var ne=q();if(dt===65534){var se=String.fromCharCode.apply(null,ne);this.comments.push(se)}dt===65504&&ne[0]===74&&ne[1]===70&&ne[2]===73&&ne[3]===70&&ne[4]===0&&(fe={version:{major:ne[5],minor:ne[6]},densityUnits:ne[7],xDensity:ne[8]<<8|ne[9],yDensity:ne[10]<<8|ne[11],thumbWidth:ne[12],thumbHeight:ne[13],thumbData:ne.subarray(14,14+3*ne[12]*ne[13])}),dt===65505&&ne[0]===69&&ne[1]===120&&ne[2]===105&&ne[3]===102&&ne[4]===0&&(this.exifBuffer=ne.subarray(5,ne.length)),dt===65518&&ne[0]===65&&ne[1]===100&&ne[2]===111&&ne[3]===98&&ne[4]===101&&ne[5]===0&&(he={version:ne[6],flags0:ne[7]<<8|ne[8],flags1:ne[9]<<8|ne[10],transformCode:ne[11]});break;case 65499:for(var Ee=W(),Se=Ee+O-2;O<Se;){var de=N[O++];I(256);var Pe=new Int32Array(64);if(de>>4===0)for(Z=0;Z<64;Z++){var ze=s[Z];Pe[ze]=N[O++]}else if(de>>4===1)for(Z=0;Z<64;Z++){var ze=s[Z];Pe[ze]=W()}else throw new Error("DQT: invalid table spec");ut[de&15]=Pe}break;case 65472:case 65473:case 65474:W(),Oe={},Oe.extended=dt===65473,Oe.progressive=dt===65474,Oe.precision=N[O++],Oe.scanLines=W(),Oe.samplesPerLine=W(),Oe.components={},Oe.componentsOrder=[];var J=Oe.scanLines*Oe.samplesPerLine;if(J>V){var Le=Math.ceil((J-V)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Le}MP`)}var F=N[O++],U;for(bt=0;bt<F;bt++){U=N[O];var j=N[O+1]>>4,ee=N[O+1]&15,ce=N[O+2];if(j<=0||ee<=0)throw new Error("Invalid sampling factor, expected values above 0");Oe.componentsOrder.push(U),Oe.components[U]={h:j,v:ee,quantizationIdx:ce},O+=3}re(Oe),qe.push(Oe);break;case 65476:var ye=W();for(bt=2;bt<ye;){var oe=N[O++],ae=new Uint8Array(16),we=0;for(Z=0;Z<16;Z++,O++)we+=ae[Z]=N[O];I(16+we);var Re=new Uint8Array(we);for(Z=0;Z<we;Z++,O++)Re[Z]=N[O];bt+=17+we,(oe>>4===0?nt:Be)[oe&15]=E(ae,Re)}break;case 65501:W(),He=W();break;case 65500:W(),W();break;case 65498:W();var Xe=N[O++],We=[],Qe;for(bt=0;bt<Xe;bt++){Qe=Oe.components[N[O++]];var $e=N[O++];Qe.huffmanTableDC=nt[$e>>4],Qe.huffmanTableAC=Be[$e&15],We.push(Qe)}var tt=N[O++],_t=N[O++],it=N[O++],St=P(N,O,Oe,We,He,tt,_t,it>>4,it&15,this.opts);O+=St;break;case 65535:N[O]!==255&&O--;break;default:if(N[O-3]==255&&N[O-2]>=192&&N[O-2]<=254){O-=3;break}else if(dt===224||dt==225){if(rt!==-1)throw new Error(`first unknown JPEG marker at offset ${rt.toString(16)}, second unknown JPEG marker ${dt.toString(16)} at offset ${(O-1).toString(16)}`);rt=O-1;const Rt=W();if(N[O+Rt-2]===255){O+=Rt-2;break}}throw new Error("unknown JPEG marker "+dt.toString(16))}dt=W()}if(qe.length!=1)throw new Error("only single frame JPEGs supported");for(var bt=0;bt<qe.length;bt++){var Ot=qe[bt].components;for(var Z in Ot)Ot[Z].quantizationTable=ut[Ot[Z].quantizationIdx],delete Ot[Z].quantizationIdx}this.width=Oe.samplesPerLine,this.height=Oe.scanLines,this.jfif=fe,this.adobe=he,this.components=[];for(var bt=0;bt<Oe.componentsOrder.length;bt++){var Qe=Oe.components[Oe.componentsOrder[bt]];this.components.push({lines:b(Oe,Qe),scaleX:Qe.h/Oe.maxH,scaleY:Qe.v/Oe.maxV})}},getData:function(N,V){var O=this.width/N,W=this.height/V,q,re,fe,he,Oe,He,ut,qe,Be,nt,dt=0,rt,bt,Z,ne,se,Ee,Se,de,Pe,ze,J,Le=N*V*this.components.length;I(Le);var F=new Uint8Array(Le);switch(this.components.length){case 1:for(q=this.components[0],nt=0;nt<V;nt++)for(Oe=q.lines[0|nt*q.scaleY*W],Be=0;Be<N;Be++)rt=Oe[0|Be*q.scaleX*O],F[dt++]=rt;break;case 2:for(q=this.components[0],re=this.components[1],nt=0;nt<V;nt++)for(Oe=q.lines[0|nt*q.scaleY*W],He=re.lines[0|nt*re.scaleY*W],Be=0;Be<N;Be++)rt=Oe[0|Be*q.scaleX*O],F[dt++]=rt,rt=He[0|Be*re.scaleX*O],F[dt++]=rt;break;case 3:for(J=!0,this.adobe&&this.adobe.transformCode?J=!0:typeof this.opts.colorTransform<"u"&&(J=!!this.opts.colorTransform),q=this.components[0],re=this.components[1],fe=this.components[2],nt=0;nt<V;nt++)for(Oe=q.lines[0|nt*q.scaleY*W],He=re.lines[0|nt*re.scaleY*W],ut=fe.lines[0|nt*fe.scaleY*W],Be=0;Be<N;Be++)J?(rt=Oe[0|Be*q.scaleX*O],bt=He[0|Be*re.scaleX*O],Z=ut[0|Be*fe.scaleX*O],de=R(rt+1.402*(Z-128)),Pe=R(rt-.3441363*(bt-128)-.71413636*(Z-128)),ze=R(rt+1.772*(bt-128))):(de=Oe[0|Be*q.scaleX*O],Pe=He[0|Be*re.scaleX*O],ze=ut[0|Be*fe.scaleX*O]),F[dt++]=de,F[dt++]=Pe,F[dt++]=ze;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(J=!1,this.adobe&&this.adobe.transformCode?J=!0:typeof this.opts.colorTransform<"u"&&(J=!!this.opts.colorTransform),q=this.components[0],re=this.components[1],fe=this.components[2],he=this.components[3],nt=0;nt<V;nt++)for(Oe=q.lines[0|nt*q.scaleY*W],He=re.lines[0|nt*re.scaleY*W],ut=fe.lines[0|nt*fe.scaleY*W],qe=he.lines[0|nt*he.scaleY*W],Be=0;Be<N;Be++)J?(rt=Oe[0|Be*q.scaleX*O],bt=He[0|Be*re.scaleX*O],Z=ut[0|Be*fe.scaleX*O],ne=qe[0|Be*he.scaleX*O],se=255-R(rt+1.402*(Z-128)),Ee=255-R(rt-.3441363*(bt-128)-.71413636*(Z-128)),Se=255-R(rt+1.772*(bt-128))):(se=Oe[0|Be*q.scaleX*O],Ee=He[0|Be*re.scaleX*O],Se=ut[0|Be*fe.scaleX*O],ne=qe[0|Be*he.scaleX*O]),F[dt++]=255-se,F[dt++]=255-Ee,F[dt++]=255-Se,F[dt++]=255-ne;break;default:throw new Error("Unsupported color mode")}return F},copyToImageData:function(N,V){var O=N.width,W=N.height,q=N.data,re=this.getData(O,W),fe=0,he=0,Oe,He,ut,qe,Be,nt,dt,rt,bt;switch(this.components.length){case 1:for(He=0;He<W;He++)for(Oe=0;Oe<O;Oe++)ut=re[fe++],q[he++]=ut,q[he++]=ut,q[he++]=ut,V&&(q[he++]=255);break;case 3:for(He=0;He<W;He++)for(Oe=0;Oe<O;Oe++)dt=re[fe++],rt=re[fe++],bt=re[fe++],q[he++]=dt,q[he++]=rt,q[he++]=bt,V&&(q[he++]=255);break;case 4:for(He=0;He<W;He++)for(Oe=0;Oe<O;Oe++)Be=re[fe++],nt=re[fe++],ut=re[fe++],qe=re[fe++],dt=255-R(Be*(1-qe/255)+qe),rt=255-R(nt*(1-qe/255)+qe),bt=255-R(ut*(1-qe/255)+qe),q[he++]=dt,q[he++]=rt,q[he++]=bt,V&&(q[he++]=255);break;default:throw new Error("Unsupported color mode")}}};var D=0,C=0;function I(H=0){var N=D+H;if(N>C){var V=Math.ceil((N-C)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${V}MB`)}D=N}return x.resetMaxMemoryUsage=function(H){D=0,C=H},x.getBytesAllocated=function(){return D},x.requestMemoryAllocation=I,x}();r.exports=t;function t(i,s={}){var n={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},o={...n,...s},a=new Uint8Array(i),l=new e;l.opts=o,e.resetMaxMemoryUsage(o.maxMemoryUsageInMB*1024*1024),l.parse(a);var u=o.formatAsRGBA?4:3,d=l.width*l.height*u;try{e.requestMemoryAllocation(d);var f={width:l.width,height:l.height,exifBuffer:l.exifBuffer,data:o.useTArray?new Uint8Array(d):Buffer.alloc(d)};l.comments.length>0&&(f.comments=l.comments)}catch(g){throw g instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+d):g instanceof ReferenceError&&g.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):g}return l.copyToImageData(f,o.formatAsRGBA),f}})(tM);var uJ=eM.exports,cJ=tM.exports,hJ={encode:uJ,decode:cJ};class dJ extends lJ{constructor(t,i){super(t);c(this,"output_format_",0);c(this,"decoded_image_data_");c(this,"raw_image_memory_")}GetTypeString(){return"JPEGImageDecoder"}DecodeChunkInternal(t){var{width:i,height:s,data:n}=hJ.decode(t,{useTArray:!0});this.decoded_image_data_=this.AllocateImageData(new tl(i,s),!1),this.decoded_image_data_.SetMemory(new Uint8Array(t)),this.output_format_=2,this.set_state(tA.kDone)}FinishInternal(){if(this.state()!=tA.kDone){this.decoded_image_data_=void 0,this.raw_image_memory_=void 0;return}if(Q(this.output_format_!=0),this.output_format_==2||this.output_format_==3)return Q(this.decoded_image_data_),this.CreateImage(this.decoded_image_data_);Ue()}}class fJ{constructor(){c(this,"data",new Uint8Array(Rx));c(this,"position",0)}}const Rx=14;class F0 extends Rk{constructor(t,i,s,n=void 0){super();c(this,"resource_provider_");c(this,"image_available_callback_");c(this,"image_type_");c(this,"load_complete_callback_");c(this,"decoder_");c(this,"signature_cache_",new fJ);c(this,"state_");c(this,"error_message_");c(this,"use_failure_image_decoder_",!1);this.resource_provider_=t,this.image_available_callback_=i,this.image_type_=n||0,this.load_complete_callback_=s,this.state_=this.resource_provider_?0:4,this.signature_cache_.position=0}DecodeChunk(t){if(t.byteLength.toString(),t.byteLength==0){_i(rn,"Decoder received 0 bytes.");return}this.DecodeChunkInternal(t)}Finish(){const{state_:t,signature_cache_:i,load_complete_callback_:s,error_message_:n}=this;let o=this.decoder_;switch(t){case 1:Q(o);let a=o.FinishAndMaybeReturnImage();a?(this.image_available_callback_(a),this.load_complete_callback_(void 0)):this.load_complete_callback_(o.GetTypeString()+" failed to decode image.");break;case 0:i.position==0?s(n):s("No enough image data for header.");break;case 3:s("Unsupported image format.");break;case 4:_i(rn,rb(F0,F0.prototype.Finish),"[",this,"] while suspended.");break;case 2:s(n);break}}static AllowDecodingToMultiPlane(){return!1}DecodeChunkInternal(t){switch(this.state_){case 0:{let{consumed_size:i,result:s}=this.InitializeInternalDecoder(t);s?(this.state_=1,Q(this.decoder_),i==Rx?this.decoder_.DecodeChunk(t):Ue()):Ue()}break;case 1:Q(this.decoder_),this.decoder_.DecodeChunk(t);break;case 2:case 3:case 4:Q(!this.decoder_);break}}InitializeInternalDecoder(t){let i=this.signature_cache_.position;if(i!==0)debugger;let s=t.byteLength,n=Math.min(Rx-i,s);aJ(this.signature_cache_.data,new Uint8Array(t),i,n),this.signature_cache_.position+=n;let o=n;return this.signature_cache_.position<Rx?{result:!1,consumed_size:o}:(this.image_type_==0&&(this.image_type_=_J(this.signature_cache_.data)),this.decoder_||(this.decoder_=pJ(this.image_type_,this.resource_provider_)),this.decoder_?{result:!0,consumed_size:o}:(this.state_=3,{result:!1,consumed_size:o}))}}function _J(r){return eA(r,[255,216,255])?2:!Im(r,"GIF87a")||!Im(r,"GIF89a")?1:eA(r,[137,80,78,71,13,10,26,10])?!Im(r,"RIFF")&&!Im(r,"WEBPVP",8)?5:0:4}function pJ(r,e){if(r==2)return new dJ(e,F0.AllowDecodingToMultiPlane());et()}class Dk extends Rk{constructor(t,i,s){super();c(this,"image_decoder_");this.image_decoder_=new F0(t,i.bind(this),s.bind(this))}static Create(t,i,s){return new Dk(t,i,s)}DecodeChunk(t){this.image_decoder_.DecodeChunk(t)}Finish(){this.image_decoder_.Finish()}}class gJ{constructor(e){c(this,"capacity_");c(this,"total_size_",0);c(this,"cache_entries_",new Map);c(this,"memory_size_in_bytes_");c(this,"count_resources_cached_");this.capacity_=e,this.memory_size_in_bytes_=0,this.count_resources_cached_=0}dispose(){this.cache_entries_.clear(),this.memory_size_in_bytes_=0,this.count_resources_cached_=0}GetFetcherCreator(e,t){Ue()}NotifyResourceRequested(e){Ue()}CreateCachedFetcher(e,t,i){Ue()}OnFetchSuccess(e,t,i){}}class Ny extends Rk{constructor(t,i,s){super();c(this,"resource_provider_");c(this,"typeface_available_callback_");c(this,"load_complete_callback_");c(this,"is_raw_data_too_large_");c(this,"is_suspended_");this.resource_provider_=t,this.typeface_available_callback_=i,this.load_complete_callback_=s,this.is_raw_data_too_large_=!1,this.is_suspended_=!this.resource_provider_,Q(!!this.typeface_available_callback_),Q(!!s)}static Create(t,i,s){return new Ny(t,i,s)}DecodeChunk(t){}Finish(){}}class mJ{constructor(e,t,i){c(this,"fetcher_factory_");c(this,"fetcher_cache_");c(this,"resource_provider_");c(this,"active_loaders_",new Set);c(this,"is_suspended_",!1);this.fetcher_factory_=e,this.resource_provider_=t,i>0&&(this.fetcher_cache_=new gJ(i))}CreateImageLoader(e,t,i){let s=this.MakeCachedFetcherCreator(e),n=new _C(s,Dk.Create.bind(null,this.resource_provider_,t),i,this.OnLoaderDestroyed.bind(this),this.is_suspended_);return this.OnLoaderCreated(n),n}CreateTypefaceLoader(e,t,i){let s=this.MakeFetcherCreator(e),n=new _C(s,Ny.Create.bind(Ny,this.resource_provider_,t,i),i,this.OnLoaderDestroyed.bind(this),this.is_suspended_);return this.OnLoaderCreated(n),n}NotifyResourceRequested(e){this.fetcher_cache_&&this.fetcher_cache_.NotifyResourceRequested(e)}UpdateResourceProvider(e){Ue()}OnLoaderCreated(e){Q(!this.active_loaders_.has(e)),this.active_loaders_.add(e)}OnLoaderDestroyed(e){Ue()}SuspendActiveLoaders(){Ue()}ResumeActiveLoaders(e){Ue()}MakeFetcherCreator(e){return this.fetcher_factory_.CreateSecureFetcher.bind(this.fetcher_factory_,e)}MakeCachedFetcherCreator(e){let t=this.MakeFetcherCreator(e);return this.fetcher_cache_?this.fetcher_cache_.GetFetcherCreator(e,t):t}}const xJ=""+new URL("354.985f36e7.jpg",import.meta.url).href;class yJ extends sJ{constructor(e,t){super(t),this.Start(),fetch(xJ).then(i=>i.arrayBuffer()).then(i=>{let s=i;this.handler().OnReceivedPassed(this,s),this.handler().OnDone(this)})}Start(){}}class vJ{CreateSecureFetcher(e,t){return Ec(Pp,"Fetching: ",e.substr(0,200)),new yJ(e,t)}}function EJ(r,e,t){return new gF(r,e,!0,t.CreateTypefaceLoader.bind(t),t.NotifyResourceRequested.bind(t))}const SJ={name:"",clear_window_with_background_color:!0,encoded_image_cache_capacity:0,image_cache_capacity:32*1024*1024,remote_typeface_cache_capacity:4*1024*1024},pC=512;class wJ{constructor(e,t,i,s){c(this,"name_");c(this,"is_running_");c(this,"window_");c(this,"resource_provider_");c(this,"layoutManager");c(this,"render_tree_produced_callback_");c(this,"last_render_tree_produced_time_",null);c(this,"is_render_tree_rasterization_pending_",!1);c(this,"fetcher_factory_");c(this,"loader_factory_");c(this,"image_cache_");c(this,"remote_typeface_cache_");let n={...s,...SJ};this.name_=n.name,this.is_running_=!0,this.resource_provider_=i,this.fetcher_factory_=new vJ,Q(this.fetcher_factory_),Rr(0,n.encoded_image_cache_capacity),this.loader_factory_=new mJ(this.fetcher_factory_,this.resource_provider_,n.encoded_image_cache_capacity),Rr(0,n.image_cache_capacity),this.image_cache_=iJ(`${this.name_}.ImageCache`,n.image_cache_capacity,this.loader_factory_),Q(this.image_cache_),this.remote_typeface_cache_=EJ(`${this.name_}.RemoteTypefaceCache`,n.remote_typeface_cache_capacity,this.loader_factory_),this.window_=new zq(t,i,this.image_cache_,this.remote_typeface_cache_,Vq(),pC),this.render_tree_produced_callback_=e;let o=!1;this.layoutManager=new rJ(o,this.name_,this.window_,this.OnRenderTreeProduced.bind(this),this.onLayout.bind(this),pC,60,"en-US",n.clear_window_with_background_color)}get document(){return this.window_.document()}SetApplicationStartOrPreloadTimestamp(e,t){Q(this.window_),this.window_.performance().SetApplicationStartOrPreloadTimestamp(e,t)}OnRenderTreeProduced(e){Q(this.is_running_),this.last_render_tree_produced_time_=Si.Now(),this.is_render_tree_rasterization_pending_=!0;let t=new Zw(e.render_tree,e.layout_time,this.OnRenderTreeRasterized.bind(this,this.last_render_tree_produced_time_));this.render_tree_produced_callback_(t)}OnRenderTreeRasterized(e){Au(this.ProcessOnRenderTreeRasterized.bind(this,e,Si.Now()))}ProcessOnRenderTreeRasterized(e,t){(!this.last_render_tree_produced_time_||e.GE(this.last_render_tree_produced_time_))&&(this.is_render_tree_rasterization_pending_=!1)}onLayout(){}}class Ck extends Ht{constructor(t,i=new pr(0)){super();c(this,"render_tree");c(this,"time_offset");c(this,"on_rasterized_callbacks",[]);c(this,"timeline_info",new rM);this.render_tree=t,this.time_offset=i}}class rM{constructor(e=-1,t=!0,i=4){this.id=e,this.allow_latency_reduction=t,this.max_submission_queue_size=i}}class AJ{constructor(e,t){c(this,"time_to_converge_");c(this,"target_");c(this,"target_set_time_");c(this,"previous_value_");c(this,"previous_derivative_");c(this,"max_slope_magnitude_");this.time_to_converge_=e,this.previous_derivative_=0,this.max_slope_magnitude_=t,Q(new pr(0).LT(this.time_to_converge_)),Q(Ti(this.max_slope_magnitude_)||this.max_slope_magnitude_>0)}SetTarget(e,t){let i=this.GetCurrentDerivative(t),s;this.target_&&(s=this.GetValueAtTime(t)),this.previous_derivative_=i,this.previous_value_=s,this.target_=e,this.target_set_time_=t}SnapToTarget(){this.previous_value_=void 0,this.previous_derivative_=0}GetValueAtTime(e){if(!this.previous_value_)return this.target_;let t=this.t(e),i=1-t,s=this.P0(),n=this.P1(),o=this.P2(),a=this.P3();return i*i*i*s+3*i*i*t*n+3*i*t*t*o+t*t*t*a}t(e){Q(this.target_,"SetTarget() must have been called previously.");let t=e.SUB(this.target_set_time_),i=this.time_to_converge_.InSeconds();if(this.max_slope_magnitude_){let n=this.GetDerivativeWithLargestMagnitude();if(n==Number.POSITIVE_INFINITY||n==Number.NEGATIVE_INFINITY)return 0;let o=n/i;o<-this.max_slope_magnitude_?i=-n/this.max_slope_magnitude_:o>this.max_slope_magnitude_&&(i=n/this.max_slope_magnitude_)}let s=t.InSeconds()/i;return Rr(0,s),Math.max(Math.min(s,1),0)}P0(){return this.previous_value_}P1(){return this.previous_value_+this.previous_derivative_/3}P2(){return this.P3()}P3(){return this.target_}GetCurrentDerivative(e){if(!this.previous_value_)return 0;let t=this.t(e),i=this.P0(),s=this.P1(),n=this.P2(),o=this.P3();return Fm(i,s,n,o,t)}GetDerivativeWithLargestMagnitude(){let e=this.P0(),t=this.P1(),i=this.P2(),s=this.P3(),n=i-2*t+e,o=-s+3*i-3*t+e,a;if(n==0)a=0;else{if(o==0)return n>=0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;a=n/o}let l=Fm(e,t,i,s,a),u=Fm(e,t,i,s,0),d=Fm(e,t,i,s,1);return Math.abs(l)>Math.abs(u)?Math.abs(l)>Math.abs(d)?l:d:Math.abs(u)>Math.abs(d)?u:d}}function Fm(r,e,t,i,s){let n=1-s;return 3*n*n*(e-r)+6*n*s*(t-e)+3*s*s*(i-t)}const bJ=800;class kJ{constructor(e,t,i=!0,s){c(this,"max_queue_size_");c(this,"dispose_function_");c(this,"renderer_time_origin_");c(this,"submission_queue_",[]);c(this,"to_submission_time_in_ms_");c(this,"last_now_");c(this,"to_submission_time_cval_");c(this,"allow_latency_reduction_");this.max_queue_size_=e,this.dispose_function_=s,this.to_submission_time_in_ms_=new AJ(t,bJ),this.to_submission_time_cval_=new pr(0),this.allow_latency_reduction_=i}PushSubmission(e,t){if(this.submission_queue_.length>0&&this.CheckThatNowIsMonotonicallyIncreasing(t),this.submission_queue_.length>=this.max_queue_size_){this.submission_queue_.shift();let n=this.submission_queue_[0].time_offset.SUB(this.render_time(t)).InMilliseconds();this.to_submission_time_in_ms_.GetValueAtTime(t)<n&&(this.to_submission_time_in_ms_.SetTarget(n,t),this.to_submission_time_in_ms_.SnapToTarget())}let s=e.time_offset.SUB(this.render_time(t)).InMilliseconds();(this.allow_latency_reduction_||this.submission_queue_.length===0||this.to_submission_time_in_ms_.GetValueAtTime(t)>s)&&this.to_submission_time_in_ms_.SetTarget(s,t),this.submission_queue_.push(e),this.PurgeStaleSubmissionsFromQueue(t)}GetCurrentSubmission(e){this.CheckThatNowIsMonotonicallyIncreasing(e),Q(this.submission_queue_.length>0),this.PurgeStaleSubmissionsFromQueue(e);let t=this.submission_queue_[0];Wn(this.to_submission_time_in_ms_.GetValueAtTime(e),this.submission_queue_[0].time_offset.SUB(this.render_time(e)).InMilliseconds());let i=this.submission_time(e);return i>t.time_offset&&(t.time_offset=i),t}submission_time(e){return pr.FromMilliseconds(this.to_submission_time_in_ms_.GetValueAtTime(e)).ADD(this.render_time(e))}render_time(e){return this.renderer_time_origin_||(this.renderer_time_origin_=e),e.SUB(this.renderer_time_origin_)}PurgeStaleSubmissionsFromQueue(e){let t=this.to_submission_time_in_ms_.GetValueAtTime(e),i=this.submission_queue_.length-1;if(i!=0)for(;t<this.submission_queue_[i].time_offset.SUB(this.render_time(e)).InMilliseconds()&&i!=0;)--i;this.submission_queue_.length>1&&(i=1);let s=this.submission_queue_[i];for(;this.submission_queue_[0]!==s;)if(this.dispose_function_){let n=this.submission_queue_.shift();this.dispose_function_(n)}else this.submission_queue_.shift();this.to_submission_time_cval_=pr.FromMilliseconds(this.to_submission_time_in_ms_.GetValueAtTime(e))}CheckThatNowIsMonotonicallyIncreasing(e){this.last_now_&&Q(e.GE(this.last_now_)),this.last_now_=e}}const TJ=500;class PJ{constructor(e,t,i){c(this,"render_target_");c(this,"rasterize_timer_");c(this,"rasterizer_");c(this,"submission_queue_");c(this,"submit_even_if_render_tree_is_unchanged_");c(this,"last_render_tree_");c(this,"previous_animated_area_");c(this,"last_render_time_");c(this,"last_animations_expired_");c(this,"last_stat_tracked_animations_expired_");c(this,"last_did_rasterize_");c(this,"fallback_rasterize_count_");c(this,"new_render_tree_rasterize_count_");c(this,"new_render_tree_rasterize_time_");c(this,"has_active_animations_c_val_");c(this,"animations_start_time_");c(this,"animations_end_time_");c(this,"time_fence_");c(this,"post_fence_submission_");c(this,"post_fence_receipt_time_");c(this,"current_timeline_info_",new rM);c(this,"last_rasterize_time_");this.render_target_=t,this.submit_even_if_render_tree_is_unchanged_=i,this.last_did_rasterize_=!1,this.last_animations_expired_=!0,this.last_stat_tracked_animations_expired_=!0,this.new_render_tree_rasterize_count_=0,this.new_render_tree_rasterize_time_=0,this.has_active_animations_c_val_=!1,this.animations_start_time_=0,this.animations_end_time_=0,this.fallback_rasterize_count_=0,this.rasterizer_=e,this.InitializeRasterizerThread()}Submit(e){this.SetNewRenderTree(this.CollectAnimations(e))}Clear(){this.ClearCurrentRenderTree()}GetResourceProvider(){var e;return(e=this.rasterizer_)==null?void 0:e.GetResourceProvider()}SetNewRenderTree(e){if(Q(e.render_tree),this.time_fence_){this.post_fence_submission_=e,this.post_fence_receipt_time_=Si.Now(),e.dispose();return}this.QueueSubmission(e,Si.Now()),this.RasterizeCurrentTree()}ClearCurrentRenderTree(){this.ResetSubmissionQueue(),this.rasterize_timer_=void 0}RasterizeCurrentTree(){let e=Si.Now(),t=this.submission_queue_.GetCurrentSubmission(e),i=t.render_tree!=this.last_render_tree_,s=!this.last_animations_expired_||i,n=this.submit_even_if_render_tree_is_unchanged_;if(n||s){let o=this.RasterizeSubmissionToRenderTarget(t,this.render_target_,n);o&&(this.last_rasterize_time_=e);let a=!0,l=!0;this.UpdateRasterizeStats(o,l,i,e,Si.Now()),this.last_did_rasterize_=o,this.last_animations_expired_=a,this.last_stat_tracked_animations_expired_=l}this.time_fence_&&this.submission_queue_.submission_time(Si.Now()).GE(this.time_fence_)&&Ue()}RasterizeSubmissionToRenderTarget(e,t,i){e.render_tree!=this.last_render_tree_&&(this.last_render_tree_=e.render_tree,this.last_render_time_=void 0);let s=e.render_tree;this.rasterizer_.Submit(s,t);for(let n of e.on_rasterized_callbacks)n();return this.last_render_time_=e.time_offset,s.dispose(),!0}UpdateRasterizeStats(e,t,i,s,n){}InitializeRasterizerThread(){this.ResetSubmissionQueue()}OnDumpCurrentRenderTree(e){}CollectAnimations(e){return e}FrameStatsOnFlushCallback(){}ResetSubmissionQueue(){this.submission_queue_=new kJ(this.current_timeline_info_.max_submission_queue_size,pr.FromMilliseconds(TJ),this.current_timeline_info_.allow_latency_reduction,e=>{e.dispose()})}QueueSubmission(e,t){e.timeline_info.id!=this.current_timeline_info_.id&&(this.current_timeline_info_=e.timeline_info,this.ResetSubmissionQueue()),Q(this.submission_queue_),this.submission_queue_.PushSubmission(e,t)}}class rA{}c(rA,"kSubmitFlags_Clear",1<<0);function Td(r){return r>=254.5/255}class RJ{constructor(e){c(this,"render_target");c(this,"opacity",1);c(this,"clip_is_rect",!0);this.render_target=e}}class iM{}c(iM,"Flags",{kInterpolateColorsInPremul_Flag:1<<0});function Dx(r,e,t,i){return[r,e,r+t,e+i]}function DJ(r,e,t,i){return[r,e,t,i]}function CJ(r){let e=r;return[e.Get(0,0),e.Get(0,1),e.Get(0,2),e.Get(1,0),e.Get(1,1),e.Get(1,2),e.Get(2,0),e.Get(2,1),e.Get(2,2)]}function OJ(r){return Dx(r.x(),r.y(),r.width(),r.height())}class NJ{}class IJ extends vF{constructor(t,i,s,n,o=0){super();c(this,"draw_state_");c(this,"create_scratch_surface_function_");c(this,"visitor_type_");c(this,"reset_skia_context_function_");c(this,"convert_render_tree_to_image_function_");this.draw_state_=new RJ(t),this.visitor_type_=o,this.create_scratch_surface_function_=i,this.reset_skia_context_function_=s,this.convert_render_tree_to_image_function_=n}VisitClearRectNode(t){this.withScaleAndTranslate(()=>{this.DrawClearRect(t.data().rect,t.data().color)})}VisitCompositionNode(t){let i=t.data().children();if(i.length===0)return;const{draw_state_:s}=this;s.render_target.translate(t.data().offset().x()*Ss,t.data().offset().y()*Ss);let n=[0,0,1280,720];s.render_target.getTotalMatrix();for(let o of i)(!n||BJ())&&o.Accept(this);s.render_target.translate(-t.data().offset().x()*Ss,-t.data().offset().y()*Ss)}VisitMatrixTransformNode(t){this.withScaleAndTranslate(()=>{const{draw_state_:i}=this,s=t.data().transform.CLONE();s.MUL(new Hr(Ss,Ss)),i.render_target.concat(CJ(s)),t.data().source.Accept(this)})}VisitRectNode(t){this.withScaleAndTranslate(()=>{let i=t.data().rect,s=t.data().rect.CLONE(),n=t.data().border;n&&s.Inset(n.left.width,n.top.width,n.right.width,n.bottom.width);let o,a=t.data().rounded_corners;if(a){let u=t.data().border;u?o=a.Inset(u.left.width,u.top.width,u.right.width,u.bottom.width):o=a}let l=t.data().background_brush;l&&(o&&!o.AreSquares()?Ue():this.DrawRectWithBrush(l,s)),t.data().border&&(t.data().rounded_corners?Ue():FJ(this.draw_state_,i,t.data().border))})}VisitTextNode(t){this.withScaleAndTranslate(()=>{const{draw_state_:i}=this;Kt(1,i.opacity);let s=0;if(t.data().shadows){let a=t.data().shadows;for(let u=0;u<a.length;++u)if(a[u].blur_sigma>0){s=1e-6;break}let l=a.length;for(let u=l-1;u>=0;--u){et();let d=a[u];this.RenderText(t.data().glyph_buffer,d.color,py(t.data().offset.Add(d.offset)),d.blur_sigma==0?s:d.blur_sigma)}}const{background:n}=t.data();if(n){const{colorBrush:a,rect:l}=n;this.DrawRectWithBrush(a,l)}let o=t.data().offset.CLONE();this.RenderText(t.data().glyph_buffer,t.data().color,py(o),s)})}VisitImageNode(t){if(!t.data().source)return;let i=t.data().source;i.EnsureInitialized()&&yA(this.reset_skia_context_function_)&&this.reset_skia_context_function_();let s=t.data().local_transform.CLONE();if(s.MUL(new Hr(Ss,Ss)),!i.CanRenderInSkia()&&!eQ(s)&&Ue(),i.CanRenderInSkia())if(i.GetTypeId()===rr(_v)){let n=t.data().destination_rect.CLONE();n.Scale(Ss),this.RenderSinglePlaneImage(i,this.draw_state_,n,s)}else i.GetTypeId()===rr(ak)?Ue():et();else Ue()}VisitFreehandNode(t){let i=t.data();this.withScaleAndTranslate(()=>{this.RenderPath(i.d,i.fill,i.stroke)})}withScaleAndTranslate(t){this.draw_state_.render_target.save(),this.draw_state_.render_target.scale(Ss,Ss),t(),this.draw_state_.render_target.restore()}RenderSinglePlaneImage(t,i,s,n){this.CreateSkPaintForImageRendering(i,t.IsOpaque(),o=>{let a=t.GetSize(),l=t.GetImage();if(HJ(n)&&zJ(n)){let u=a.width()/n.Get(0,0),d=a.height()/n.Get(1,1),f=-u*n.Get(0,2),g=-d*n.Get(1,2);if(l){let x=Dx(f,g,u,d);i.render_target.drawImageRect(l,x,OJ(s),o)}}else Ue()})}CreateSkPaintForImageRendering(t,i,s){return lc(n=>{Td(t.opacity)?i&&t.clip_is_rect&&n.setBlendMode(gr.BlendMode.Src):n.setAlphaf(t.opacity*255);try{return s(n)}finally{n.deleteLater()}})}DrawClearRect(t,i){let s=Dx(t.x(),t.y(),t.width(),t.height());lc(n=>{n.setBlendMode(gr.BlendMode.Src),n.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,i.a())),this.draw_state_.render_target.drawRect(s,n)})}DrawRoundedRectWithBrush(t,i,s){}DrawRectWithBrush(t,i){let{draw_state_:s}=this;lc(n=>{let o=new LJ(n,s);t.Accept(o),s.render_target.drawRect(Dx(i.x(),i.y(),i.width(),i.height()),n)})}RenderText(t,i,s,n){if(n>20)Ue("Cobalt does not yet support text blurs with Gaussian ","sigmas larger than 20.");else{let o=t.GetTextBlob();if(!o)return;lc(a=>{a.setAntiAlias(!0),a.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,i.a())),n>0&&Ue(),o&&this.draw_state_.render_target.drawTextBlob(o,s.x(),s.y(),a)})}}RenderPath(t,i,s){lc(n=>(n.setAntiAlias(!0),y5(t)(o=>{o||et(),i&&(n.setStyle(gr.PaintStyle.Fill),n.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,i.a())),this.draw_state_.render_target.drawPath(o,n)),s&&(n.setStyle(gr.PaintStyle.Stroke),n.setColor(gr.Color(s.r()*255,s.g()*255,s.b()*255,s.a())),this.draw_state_.render_target.drawPath(o,n))})))}}function FJ(r,e,t){let i=t.top.color.EQ(t.left.color)&&t.top.color.EQ(t.bottom.color)&&t.top.color.EQ(t.right.color);const s=3;if(i&&t.top.style==rl.kBorderStyleSolid&&t.bottom.style==rl.kBorderStyleSolid&&t.left.style==rl.kBorderStyleSolid&&t.right.style==rl.kBorderStyleSolid&&t.top.width==t.bottom.width&&t.top.width==t.left.width&&t.top.width==t.right.width){let u=t.top.width<s||t.bottom.width<s||t.left.width<s||t.right.width<s;MJ(r,e,t.top.width,t.top.color,u);return}let n=[[e.x(),e.y()],[e.x()+t.left.width,e.y()+t.top.width],[e.right()-t.right.width,e.y()+t.top.width],[e.right(),e.y()]];Mm(t.top.style,r,t.top.color,n,t.top.width<s?!0:!i);let o=[[e.x(),e.y()],[e.x(),e.bottom()],[e.x()+t.left.width,e.bottom()-t.bottom.width],[e.x()+t.left.width,e.y()+t.top.width]];Mm(t.left.style,r,t.left.color,o,t.left.width<s?!0:!i);let a=[[e.x()+t.left.width,e.bottom()-t.bottom.width],[e.x(),e.bottom()],[e.right(),e.bottom()],[e.right()-t.right.width,e.bottom()-t.bottom.width]];Mm(t.bottom.style,r,t.bottom.color,a,t.bottom.width<s?!0:!i);let l=[[e.right()-t.right.width,e.y()+t.top.width],[e.right()-t.right.width,e.bottom()-t.bottom.width],[e.right(),e.bottom()],[e.right(),e.y()]];Mm(t.right.style,r,t.right.color,l,t.right.width<s?!0:!i)}function Mm(r,e,t,i,s){r==rl.kBorderStyleSolid?lc(n=>{let o=t.a();o*=e.opacity,n.setColor(gr.Color(t.r()*255,t.g()*255,t.b()*255,o)),n.setAntiAlias(s),Td(o)?n.setBlendMode(gr.BlendMode.Src):n.setBlendMode(gr.BlendMode.SrcOver),v5(a=>{a.addPoly(i.flat(),!0),e.render_target.drawPath(a,n)})}):Kt(r,rl.kBorderStyleNone)}function MJ(r,e,t,i,s){lc(n=>{let o=i.a()*r.opacity;n.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,o)),n.setAntiAlias(s),Td(o)?n.setBlendMode(gr.BlendMode.Src):n.setBlendMode(gr.BlendMode.SrcOver),n.setStyle(gr.PaintStyle.Stroke),n.setStrokeWidth(t);let a=t*.5,l=DJ(e.x()+a,e.y()+a,e.right()-a,e.bottom()-a);r.render_target.drawRect(l,n)})}function BJ(r,e,t){return!0}class LJ extends EF{constructor(t,i){super();c(this,"paint_");c(this,"draw_state_");this.paint_=t,this.draw_state_=i}visitLinearGradientBrush(t){let i=[[t.source().x(),t.source().y()],[t.dest().x(),t.dest().y()]],s=new UJ(t.color_stops()),n=gr.Shader.MakeLinearGradient(i[0],i[1],new Float32Array(s.colors[0]),s.positions,gr.TileMode.Clamp,void 0,iM.Flags.kInterpolateColorsInPremul_Flag);this.paint_.setShader(n),!s.has_alpha&&Td(this.draw_state_.opacity)?this.paint_.setBlendMode(gr.BlendMode.Src):(Td(this.draw_state_.opacity)||this.paint_.setAlphaf(255*this.draw_state_.opacity),this.paint_.setBlendMode(gr.BlendMode.SrcOver))}visitRadialGradientBrush(t){Ue()}visitSolidColorBrush(t){let i=t.color(),s=i.a()*this.draw_state_.opacity;Td(s)?this.paint_.setBlendMode(gr.BlendMode.Src):this.paint_.setBlendMode(gr.BlendMode.SrcOver),this.paint_.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,s))}}class UJ{constructor(e){c(this,"colors",[]);c(this,"positions",[]);c(this,"has_alpha");this.has_alpha=!1,this.colors=new Array(e.length),this.positions=new Array(e.length);for(let t=0;t<e.length;++t)e[t].color.HasAlpha()&&(this.has_alpha=!0),this.colors[t]=GJ(e[t].color),this.positions[t]=e[t].position}}function GJ(r){return[r.r(),r.g(),r.b(),r.a()]}function HJ(r){return r.Get(0,1)==0&&r.Get(1,0)==0}function zJ(r){return r.Get(0,2)<=0&&1-r.Get(0,2)<=r.Get(0,0)&&r.Get(1,2)<=0&&1-r.Get(1,2)<=r.Get(1,1)}class Iy extends rA{constructor(e,t){super(),this.resource_provider_=e,this.transformAccessor_=t,rb(Iy,Iy.prototype.constructor)}GetResourceProvider(){return this.resource_provider_}Submit(e,t,i){let s=this.GetCanvasFromRenderTarget(t);const n=this.transformAccessor_(),{tx:o,ty:a}=n;s.save(),i&&i.flags&rA.kSubmitFlags_Clear&&s.clear([0,0,0,0]),s.translate(o*devicePixelRatio,a*devicePixelRatio),this.RasterizeRenderTreeToCanvas(t,e,s),t.flush(),s.restore()}GetCanvasFromRenderTarget(e){return e.getCanvas()}RasterizeRenderTreeToCanvas(e,t,i){let s=()=>new class extends NJ{GetSurface(){return e}},n=new IJ(i,s,this.ResetSkiaState.bind(this),this.ConvertRenderTreeToImage.bind(this));Q(t),t.Accept(n)}ResetSkiaState(){}ConvertRenderTreeToImage(e){return this.resource_provider_.DrawOffscreenImage(e)}}class jJ{constructor(e){c(this,"pipeline_");const{render_target:t,resource_provider:i,transformAccessor:s}=e,{surface:n}=t;this.pipeline_=new PJ(new Iy(i,s),n,!1)}pipeline(){return this.pipeline_}resource_provider(){if(!!this.pipeline_)return this.pipeline_.GetResourceProvider()}}class VJ{constructor(e){c(this,"render_tree_combiner_");c(this,"render_tree_");c(this,"receipt_time_");this.render_tree_combiner_=e}Reset(){this.render_tree_=void 0,this.receipt_time_=void 0}Submit(e){this.render_tree_=e,this.receipt_time_=Si.Now()}HasRenderTree(){return!!this.render_tree_}GetCurrentSubmission(){const{render_tree_:e}=this;if(!e)return;let t=this.CurrentTimeOffset();Q(t);let i=new Ck(e.render_tree,t);return i.timeline_info=e.timeline_info,i.on_rasterized_callbacks=e.on_rasterized_callbacks.slice(),i}CurrentTimeOffset(){if(this.receipt_time_)return Q(this.render_tree_),this.render_tree_.time_offset.ADD(Si.Now().SUB(this.receipt_time_))}}class WJ{constructor(){c(this,"layers_",new Map);c(this,"timeline_layer_")}CreateLayer(e){if(this.layers_.has(e))return;let t=new VJ(this);return this.layers_.set(e,t),t}GetCurrentSubmission(){let e=new dh,t,i=[];for(let[o,a]of this.layers_)a.render_tree_&&(e.AddChild(a.render_tree_.render_tree),t=a,i.push(...a.render_tree_.on_rasterized_callbacks));if(!t)return;let s=this.timeline_layer_&&this.timeline_layer_.render_tree_?this.timeline_layer_:t,n=new Ck(new fh(e),s.CurrentTimeOffset());return n.timeline_info=s.render_tree_.timeline_info,n.on_rasterized_callbacks=i,n}SetTimelineLayer(e){e&&Q(this.OwnsLayer(e)),this.timeline_layer_=e}OwnsLayer(e){for(let t of this.layers_.values())if(t===e)return!0;return!1}RemoveLayer(e){}}class $J{constructor(...e){c(this,"width_height_");c(this,"diagonal_inches_",0);c(this,"device_pixel_ratio_",1);if(!e.length)this.width_height_=new tl(0,0);else if(e.length===1)e[0],this.width_height_=new tl;else if(e.length===2){let t=e[0],i=e[1];this.width_height_=new tl(t,i)}else if(e.length===4){let t=e[0],i=e[1],s=e[2],n=e[3];this.width_height_=new tl(t,i),this.diagonal_inches_=s,this.device_pixel_ratio_=n}else throw new Error("500")}width_height(){return this.width_height_}}const KJ=1;class XJ extends Ht{constructor(t,i,s){super();c(this,"_onMounted",new Dt);c(this,"_resource_provider");c(this,"web_module_");c(this,"renderer_module_");c(this,"current_main_web_module_timeline_id_",0);c(this,"render_tree_combiner_",new WJ);c(this,"main_web_module_layer_");this.container=t,this.view=i,this.vm=s;let n=document.createElement("canvas");this.container.appendChild(n);const{innerWidth:o,innerHeight:a}=window;n.width=o*Ss,n.height=a*Ss,Object.assign(n.style,{width:PD(o),height:PD(a)});let l=new QK(n),u=new LX;this._resource_provider=u;let d=this.GetViewportSize();this.web_module_=new wJ(this.QueueOnRenderTreeProduced.bind(this),d,u,{name:"MainWebModule",clear_window_with_background_color:!0}),this.renderer_module_=new jJ({render_target:l,resource_provider:u,transformAccessor:()=>this.view.mx}),this.main_web_module_layer_=this.render_tree_combiner_.CreateLayer(KJ),this.init(),this._register(i.onCameraChagned(()=>{this.SubmitCurrentRenderTreeToRenderer()}))}get onMounted(){return this._onMounted.event}get layoutManager(){return this.web_module_.layoutManager}get document(){return this.web_module_.document}GetViewportSize(){return new $J(1280,720)}QueueOnRenderTreeProduced(t){this.OnRenderTreeProduced(t),this.ProcessRenderTreeSubmissionQueue()}OnRenderTreeProduced(t){let i=YJ(t);i.timeline_info.id=this.current_main_web_module_timeline_id_,this.render_tree_combiner_.SetTimelineLayer(this.main_web_module_layer_),this.main_web_module_layer_.Submit(i),this.SubmitCurrentRenderTreeToRenderer()}ProcessRenderTreeSubmissionQueue(){}SubmitCurrentRenderTreeToRenderer(){let t=this.render_tree_combiner_.GetCurrentSubmission();t&&this.renderer_module_.pipeline().Submit(t)}async init(){await this._resource_provider.fontReady.wait(),this.SetApplicationStartOrPreloadTimestamp(!1,Date.now()),this.SubmitCurrentRenderTreeToRenderer();let t=this.document;t.onCreated(()=>{let i=t.createElement("html");Object.assign(i.style,{display:"block",position:"relative"}),t.appendChild(i),this._register(rq(this.vm,t))}),this._onMounted.fire()}SetApplicationStartOrPreloadTimestamp(t,i){Q(this.web_module_),this.web_module_.SetApplicationStartOrPreloadTimestamp(t,i)}}function YJ(r){let e=new Ck(r.render_tree,r.layout_time);return r.on_rasterized_callback&&e.on_rasterized_callbacks.push(r.on_rasterized_callback),e}const kT=class extends Ht{constructor(t,i){super();c(this,"_domNode");c(this,"_isVisible",!1);c(this,"_renderData");c(this,"_cursorFlatBlinkInterval");this.view=i,this._domNode=ww(document.createElement("div")),t.appendChild(this._domNode.domNode),this._domNode.setDisplay("none"),this._domNode.setTop(0),this._domNode.setLeft(0),this._cursorFlatBlinkInterval=new D8,this._updateDomClassName()}_restartBlinking(){this._cursorFlatBlinkInterval.cancel(),this.show(),this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this.hide():this.show()},kT.BLINK_INTERVAL)}_stopBlinking(){this._cursorFlatBlinkInterval.cancel()}_updateDomClassName(){this._domNode.setClassName("cursor cursor-line-style cursor-blink")}show(){this._isVisible||(this._domNode.setVisibility("visible"),this._domNode.setTransform(g2(this.view.mx)),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}update(t=void 0){this._renderData=t,this.render(),this._renderData?this._restartBlinking():this._stopBlinking()}render(){if(!this._renderData){this.hide();return}this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setHeight(this._renderData.height)}};let Cx=kT;c(Cx,"BLINK_INTERVAL",500);function Ok(r,e){const t=Object.create(null),i=r.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const qJ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",QJ=Ok(qJ);function nM(r){return!!r||r===""}function bv(r){if(er(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],s=Pn(i)?eZ(i):bv(i);if(s)for(const n in s)e[n]=s[n]}return e}else{if(Pn(r))return r;if(gi(r))return r}}const JJ=/;(?![^(]*\))/g,ZJ=/:(.+)/;function eZ(r){const e={};return r.split(JJ).forEach(t=>{if(t){const i=t.split(ZJ);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function kv(r){let e="";if(Pn(r))e=r;else if(er(r))for(let t=0;t<r.length;t++){const i=kv(r[t]);i&&(e+=i+" ")}else if(gi(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const Fr={},Pd=[],Po=()=>{},tZ=()=>!1,rZ=/^on[^a-z]/,Tv=r=>rZ.test(r),Nk=r=>r.startsWith("onUpdate:"),Xn=Object.assign,Ik=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},iZ=Object.prototype.hasOwnProperty,or=(r,e)=>iZ.call(r,e),er=Array.isArray,Zp=r=>Pv(r)==="[object Map]",nZ=r=>Pv(r)==="[object Set]",Zt=r=>typeof r=="function",Pn=r=>typeof r=="string",Fk=r=>typeof r=="symbol",gi=r=>r!==null&&typeof r=="object",sM=r=>gi(r)&&Zt(r.then)&&Zt(r.catch),sZ=Object.prototype.toString,Pv=r=>sZ.call(r),oZ=r=>Pv(r).slice(8,-1),aZ=r=>Pv(r)==="[object Object]",Mk=r=>Pn(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Ox=Ok(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rv=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},lZ=/-(\w)/g,lf=Rv(r=>r.replace(lZ,(e,t)=>t?t.toUpperCase():"")),uZ=/\B([A-Z])/g,Gf=Rv(r=>r.replace(uZ,"-$1").toLowerCase()),oM=Rv(r=>r.charAt(0).toUpperCase()+r.slice(1)),oS=Rv(r=>r?`on${oM(r)}`:""),M0=(r,e)=>!Object.is(r,e),aS=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},Fy=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},cZ=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let gC;const hZ=()=>gC||(gC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ea;class dZ{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ea&&(this.parent=ea,this.index=(ea.scopes||(ea.scopes=[])).push(this)-1)}run(e){if(this.active){const t=ea;try{return ea=this,e()}finally{ea=t}}}on(){ea=this}off(){ea=this.parent}stop(e){if(this.active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function fZ(r,e=ea){e&&e.active&&e.effects.push(r)}const Bk=r=>{const e=new Set(r);return e.w=0,e.n=0,e},aM=r=>(r.w&Ru)>0,lM=r=>(r.n&Ru)>0,_Z=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Ru},pZ=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];aM(s)&&!lM(s)?s.delete(r):e[t++]=s,s.w&=~Ru,s.n&=~Ru}e.length=t}},iA=new WeakMap;let Tp=0,Ru=1;const nA=30;let Eo;const Hc=Symbol(""),sA=Symbol("");class Lk{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,fZ(this,i)}run(){if(!this.active)return this.fn();let e=Eo,t=Eu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Eo,Eo=this,Eu=!0,Ru=1<<++Tp,Tp<=nA?_Z(this):mC(this),this.fn()}finally{Tp<=nA&&pZ(this),Ru=1<<--Tp,Eo=this.parent,Eu=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Eo===this?this.deferStop=!0:this.active&&(mC(this),this.onStop&&this.onStop(),this.active=!1)}}function mC(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let Eu=!0;const uM=[];function Hf(){uM.push(Eu),Eu=!1}function zf(){const r=uM.pop();Eu=r===void 0?!0:r}function Ls(r,e,t){if(Eu&&Eo){let i=iA.get(r);i||iA.set(r,i=new Map);let s=i.get(t);s||i.set(t,s=Bk()),cM(s)}}function cM(r,e){let t=!1;Tp<=nA?lM(r)||(r.n|=Ru,t=!aM(r)):t=!r.has(Eo),t&&(r.add(Eo),Eo.deps.push(r))}function _l(r,e,t,i,s,n){const o=iA.get(r);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&er(r))o.forEach((l,u)=>{(u==="length"||u>=i)&&a.push(l)});else switch(t!==void 0&&a.push(o.get(t)),e){case"add":er(r)?Mk(t)&&a.push(o.get("length")):(a.push(o.get(Hc)),Zp(r)&&a.push(o.get(sA)));break;case"delete":er(r)||(a.push(o.get(Hc)),Zp(r)&&a.push(o.get(sA)));break;case"set":Zp(r)&&a.push(o.get(Hc));break}if(a.length===1)a[0]&&oA(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);oA(Bk(l))}}function oA(r,e){const t=er(r)?r:[...r];for(const i of t)i.computed&&xC(i);for(const i of t)i.computed||xC(i)}function xC(r,e){(r!==Eo||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const gZ=Ok("__proto__,__v_isRef,__isVue"),hM=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Fk)),mZ=Uk(),xZ=Uk(!1,!0),yZ=Uk(!0),yC=vZ();function vZ(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=yr(this);for(let n=0,o=this.length;n<o;n++)Ls(i,"get",n+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(yr)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){Hf();const i=yr(this)[e].apply(this,t);return zf(),i}}),r}function Uk(r=!1,e=!1){return function(i,s,n){if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&n===(r?e?MZ:gM:e?pM:_M).get(i))return i;const o=er(i);if(!r&&o&&or(yC,s))return Reflect.get(yC,s,n);const a=Reflect.get(i,s,n);return(Fk(s)?hM.has(s):gZ(s))||(r||Ls(i,"get",s),e)?a:kn(a)?o&&Mk(s)?a:a.value:gi(a)?r?mM(a):B0(a):a}}const EZ=dM(),SZ=dM(!0);function dM(r=!1){return function(t,i,s,n){let o=t[i];if(uf(o)&&kn(o)&&!kn(s))return!1;if(!r&&(!My(s)&&!uf(s)&&(o=yr(o),s=yr(s)),!er(t)&&kn(o)&&!kn(s)))return o.value=s,!0;const a=er(t)&&Mk(i)?Number(i)<t.length:or(t,i),l=Reflect.set(t,i,s,n);return t===yr(n)&&(a?M0(s,o)&&_l(t,"set",i,s):_l(t,"add",i,s)),l}}function wZ(r,e){const t=or(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&_l(r,"delete",e,void 0),i}function AZ(r,e){const t=Reflect.has(r,e);return(!Fk(e)||!hM.has(e))&&Ls(r,"has",e),t}function bZ(r){return Ls(r,"iterate",er(r)?"length":Hc),Reflect.ownKeys(r)}const fM={get:mZ,set:EZ,deleteProperty:wZ,has:AZ,ownKeys:bZ},kZ={get:yZ,set(r,e){return!0},deleteProperty(r,e){return!0}},TZ=Xn({},fM,{get:xZ,set:SZ}),Gk=r=>r,Dv=r=>Reflect.getPrototypeOf(r);function Bm(r,e,t=!1,i=!1){r=r.__v_raw;const s=yr(r),n=yr(e);t||(e!==n&&Ls(s,"get",e),Ls(s,"get",n));const{has:o}=Dv(s),a=i?Gk:t?jk:L0;if(o.call(s,e))return a(r.get(e));if(o.call(s,n))return a(r.get(n));r!==s&&r.get(e)}function Lm(r,e=!1){const t=this.__v_raw,i=yr(t),s=yr(r);return e||(r!==s&&Ls(i,"has",r),Ls(i,"has",s)),r===s?t.has(r):t.has(r)||t.has(s)}function Um(r,e=!1){return r=r.__v_raw,!e&&Ls(yr(r),"iterate",Hc),Reflect.get(r,"size",r)}function vC(r){r=yr(r);const e=yr(this);return Dv(e).has.call(e,r)||(e.add(r),_l(e,"add",r,r)),this}function EC(r,e){e=yr(e);const t=yr(this),{has:i,get:s}=Dv(t);let n=i.call(t,r);n||(r=yr(r),n=i.call(t,r));const o=s.call(t,r);return t.set(r,e),n?M0(e,o)&&_l(t,"set",r,e):_l(t,"add",r,e),this}function SC(r){const e=yr(this),{has:t,get:i}=Dv(e);let s=t.call(e,r);s||(r=yr(r),s=t.call(e,r)),i&&i.call(e,r);const n=e.delete(r);return s&&_l(e,"delete",r,void 0),n}function wC(){const r=yr(this),e=r.size!==0,t=r.clear();return e&&_l(r,"clear",void 0,void 0),t}function Gm(r,e){return function(i,s){const n=this,o=n.__v_raw,a=yr(o),l=e?Gk:r?jk:L0;return!r&&Ls(a,"iterate",Hc),o.forEach((u,d)=>i.call(s,l(u),l(d),n))}}function Hm(r,e,t){return function(...i){const s=this.__v_raw,n=yr(s),o=Zp(n),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=s[r](...i),d=t?Gk:e?jk:L0;return!e&&Ls(n,"iterate",l?sA:Hc),{next(){const{value:f,done:g}=u.next();return g?{value:f,done:g}:{value:a?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function Yl(r){return function(...e){return r==="delete"?!1:this}}function PZ(){const r={get(n){return Bm(this,n)},get size(){return Um(this)},has:Lm,add:vC,set:EC,delete:SC,clear:wC,forEach:Gm(!1,!1)},e={get(n){return Bm(this,n,!1,!0)},get size(){return Um(this)},has:Lm,add:vC,set:EC,delete:SC,clear:wC,forEach:Gm(!1,!0)},t={get(n){return Bm(this,n,!0)},get size(){return Um(this,!0)},has(n){return Lm.call(this,n,!0)},add:Yl("add"),set:Yl("set"),delete:Yl("delete"),clear:Yl("clear"),forEach:Gm(!0,!1)},i={get(n){return Bm(this,n,!0,!0)},get size(){return Um(this,!0)},has(n){return Lm.call(this,n,!0)},add:Yl("add"),set:Yl("set"),delete:Yl("delete"),clear:Yl("clear"),forEach:Gm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=Hm(n,!1,!1),t[n]=Hm(n,!0,!1),e[n]=Hm(n,!1,!0),i[n]=Hm(n,!0,!0)}),[r,t,e,i]}const[RZ,DZ,CZ,OZ]=PZ();function Hk(r,e){const t=e?r?OZ:CZ:r?DZ:RZ;return(i,s,n)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?i:Reflect.get(or(t,s)&&s in i?t:i,s,n)}const NZ={get:Hk(!1,!1)},IZ={get:Hk(!1,!0)},FZ={get:Hk(!0,!1)},_M=new WeakMap,pM=new WeakMap,gM=new WeakMap,MZ=new WeakMap;function BZ(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function LZ(r){return r.__v_skip||!Object.isExtensible(r)?0:BZ(oZ(r))}function B0(r){return uf(r)?r:zk(r,!1,fM,NZ,_M)}function UZ(r){return zk(r,!1,TZ,IZ,pM)}function mM(r){return zk(r,!0,kZ,FZ,gM)}function zk(r,e,t,i,s){if(!gi(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const n=s.get(r);if(n)return n;const o=LZ(r);if(o===0)return r;const a=new Proxy(r,o===2?i:t);return s.set(r,a),a}function Rd(r){return uf(r)?Rd(r.__v_raw):!!(r&&r.__v_isReactive)}function uf(r){return!!(r&&r.__v_isReadonly)}function My(r){return!!(r&&r.__v_isShallow)}function xM(r){return Rd(r)||uf(r)}function yr(r){const e=r&&r.__v_raw;return e?yr(e):r}function yM(r){return Fy(r,"__v_skip",!0),r}const L0=r=>gi(r)?B0(r):r,jk=r=>gi(r)?mM(r):r;function vM(r){Eu&&Eo&&(r=yr(r),cM(r.dep||(r.dep=Bk())))}function EM(r,e){r=yr(r),r.dep&&oA(r.dep)}function kn(r){return!!(r&&r.__v_isRef===!0)}function GZ(r){return HZ(r,!1)}function HZ(r,e){return kn(r)?r:new zZ(r,e)}class zZ{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:yr(e),this._value=t?e:L0(e)}get value(){return vM(this),this._value}set value(e){const t=this.__v_isShallow||My(e)||uf(e);e=t?e:yr(e),M0(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:L0(e),EM(this))}}function os(r){return kn(r)?r.value:r}const jZ={get:(r,e,t)=>os(Reflect.get(r,e,t)),set:(r,e,t,i)=>{const s=r[e];return kn(s)&&!kn(t)?(s.value=t,!0):Reflect.set(r,e,t,i)}};function SM(r){return Rd(r)?r:new Proxy(r,jZ)}var wM;class VZ{constructor(e,t,i,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[wM]=!1,this._dirty=!0,this.effect=new Lk(e,()=>{this._dirty||(this._dirty=!0,EM(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=yr(this);return vM(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}wM="__v_isReadonly";function WZ(r,e,t=!1){let i,s;const n=Zt(r);return n?(i=r,s=Po):(i=r.get,s=r.set),new VZ(i,s,n||!s,t)}function Su(r,e,t,i){let s;try{s=i?r(...i):r()}catch(n){Cv(n,e,t)}return s}function Ro(r,e,t,i){if(Zt(r)){const n=Su(r,e,t,i);return n&&sM(n)&&n.catch(o=>{Cv(o,e,t)}),n}const s=[];for(let n=0;n<r.length;n++)s.push(Ro(r[n],e,t,i));return s}function Cv(r,e,t,i=!0){const s=e?e.vnode:null;if(e){let n=e.parent;const o=e.proxy,a=t;for(;n;){const u=n.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](r,o,a)===!1)return}n=n.parent}const l=e.appContext.config.errorHandler;if(l){Su(l,null,10,[r,o,a]);return}}$Z(r,t,s,i)}function $Z(r,e,t,i=!0){console.error(r)}let U0=!1,aA=!1;const wn=[];let la=0;const Dd=[];let Xa=null,dc=0;const AM=Promise.resolve();let Vk=null;function KZ(r){const e=Vk||AM;return r?e.then(this?r.bind(this):r):e}function XZ(r){let e=la+1,t=wn.length;for(;e<t;){const i=e+t>>>1;G0(wn[i])<r?e=i+1:t=i}return e}function Wk(r){(!wn.length||!wn.includes(r,U0&&r.allowRecurse?la+1:la))&&(r.id==null?wn.push(r):wn.splice(XZ(r.id),0,r),bM())}function bM(){!U0&&!aA&&(aA=!0,Vk=AM.then(TM))}function YZ(r){const e=wn.indexOf(r);e>la&&wn.splice(e,1)}function qZ(r){er(r)?Dd.push(...r):(!Xa||!Xa.includes(r,r.allowRecurse?dc+1:dc))&&Dd.push(r),bM()}function AC(r,e=U0?la+1:0){for(;e<wn.length;e++){const t=wn[e];t&&t.pre&&(wn.splice(e,1),e--,t())}}function kM(r){if(Dd.length){const e=[...new Set(Dd)];if(Dd.length=0,Xa){Xa.push(...e);return}for(Xa=e,Xa.sort((t,i)=>G0(t)-G0(i)),dc=0;dc<Xa.length;dc++)Xa[dc]();Xa=null,dc=0}}const G0=r=>r.id==null?1/0:r.id,QZ=(r,e)=>{const t=G0(r)-G0(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function TM(r){aA=!1,U0=!0,wn.sort(QZ);const e=Po;try{for(la=0;la<wn.length;la++){const t=wn[la];t&&t.active!==!1&&Su(t,null,14)}}finally{la=0,wn.length=0,kM(),U0=!1,Vk=null,(wn.length||Dd.length)&&TM()}}function JZ(r,e,...t){if(r.isUnmounted)return;const i=r.vnode.props||Fr;let s=t;const n=e.startsWith("update:"),o=n&&e.slice(7);if(o&&o in i){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:g}=i[d]||Fr;g&&(s=t.map(x=>x.trim())),f&&(s=t.map(cZ))}let a,l=i[a=oS(e)]||i[a=oS(lf(e))];!l&&n&&(l=i[a=oS(Gf(e))]),l&&Ro(l,r,6,s);const u=i[a+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,Ro(u,r,6,s)}}function PM(r,e,t=!1){const i=e.emitsCache,s=i.get(r);if(s!==void 0)return s;const n=r.emits;let o={},a=!1;if(!Zt(r)){const l=u=>{const d=PM(u,e,!0);d&&(a=!0,Xn(o,d))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!n&&!a?(gi(r)&&i.set(r,null),null):(er(n)?n.forEach(l=>o[l]=null):Xn(o,n),gi(r)&&i.set(r,o),o)}function Ov(r,e){return!r||!Tv(e)?!1:(e=e.slice(2).replace(/Once$/,""),or(r,e[0].toLowerCase()+e.slice(1))||or(r,Gf(e))||or(r,e))}let Ns=null,Nv=null;function By(r){const e=Ns;return Ns=r,Nv=r&&r.type.__scopeId||null,e}function $k(r){Nv=r}function Kk(){Nv=null}function Ih(r,e=Ns,t){if(!e||r._n)return r;const i=(...s)=>{i._d&&NC(-1);const n=By(e),o=r(...s);return By(n),i._d&&NC(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function lS(r){const{type:e,vnode:t,proxy:i,withProxy:s,props:n,propsOptions:[o],slots:a,attrs:l,emit:u,render:d,renderCache:f,data:g,setupState:x,ctx:E,inheritAttrs:P}=r;let b,R;const D=By(r);try{if(t.shapeFlag&4){const I=s||i;b=ia(d.call(I,I,f,n,x,g,E)),R=l}else{const I=e;b=ia(I.length>1?I(n,{attrs:l,slots:a,emit:u}):I(n,null)),R=e.props?l:ZZ(l)}}catch(I){r0.length=0,Cv(I,r,1),b=Qi(cf)}let C=b;if(R&&P!==!1){const I=Object.keys(R),{shapeFlag:H}=C;I.length&&H&7&&(o&&I.some(Nk)&&(R=eee(R,o)),C=hf(C,R))}return t.dirs&&(C=hf(C),C.dirs=C.dirs?C.dirs.concat(t.dirs):t.dirs),t.transition&&(C.transition=t.transition),b=C,By(D),b}const ZZ=r=>{let e;for(const t in r)(t==="class"||t==="style"||Tv(t))&&((e||(e={}))[t]=r[t]);return e},eee=(r,e)=>{const t={};for(const i in r)(!Nk(i)||!(i.slice(9)in e))&&(t[i]=r[i]);return t};function tee(r,e,t){const{props:i,children:s,component:n}=r,{props:o,children:a,patchFlag:l}=e,u=n.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?bC(i,o,u):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const g=d[f];if(o[g]!==i[g]&&!Ov(u,g))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?bC(i,o,u):!0:!!o;return!1}function bC(r,e,t){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let s=0;s<i.length;s++){const n=i[s];if(e[n]!==r[n]&&!Ov(t,n))return!0}return!1}function ree({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const iee=r=>r.__isSuspense;function nee(r,e){e&&e.pendingBranch?er(r)?e.effects.push(...r):e.effects.push(r):qZ(r)}function see(r,e){if(An){let t=An.provides;const i=An.parent&&An.parent.provides;i===t&&(t=An.provides=Object.create(i)),t[r]=e}}function e0(r,e,t=!1){const i=An||Ns;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&r in s)return s[r];if(arguments.length>1)return t&&Zt(e)?e.call(i.proxy):e}}const kC={};function uS(r,e,t){return RM(r,e,t)}function RM(r,e,{immediate:t,deep:i,flush:s,onTrack:n,onTrigger:o}=Fr){const a=An;let l,u=!1,d=!1;if(kn(r)?(l=()=>r.value,u=My(r)):Rd(r)?(l=()=>r,i=!0):er(r)?(d=!0,u=r.some(R=>Rd(R)||My(R)),l=()=>r.map(R=>{if(kn(R))return R.value;if(Rd(R))return cd(R);if(Zt(R))return Su(R,a,2)})):Zt(r)?e?l=()=>Su(r,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Ro(r,a,3,[g])}:l=Po,e&&i){const R=l;l=()=>cd(R())}let f,g=R=>{f=b.onStop=()=>{Su(R,a,4)}};if(z0)return g=Po,e?t&&Ro(e,a,3,[l(),d?[]:void 0,g]):l(),Po;let x=d?[]:kC;const E=()=>{if(!!b.active)if(e){const R=b.run();(i||u||(d?R.some((D,C)=>M0(D,x[C])):M0(R,x)))&&(f&&f(),Ro(e,a,3,[R,x===kC?void 0:x,g]),x=R)}else b.run()};E.allowRecurse=!!e;let P;s==="sync"?P=E:s==="post"?P=()=>as(E,a&&a.suspense):(E.pre=!0,a&&(E.id=a.uid),P=()=>Wk(E));const b=new Lk(l,P);return e?t?E():x=b.run():s==="post"?as(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&Ik(a.scope.effects,b)}}function oee(r,e,t){const i=this.proxy,s=Pn(r)?r.includes(".")?DM(i,r):()=>i[r]:r.bind(i,i);let n;Zt(e)?n=e:(n=e.handler,t=e);const o=An;df(this);const a=RM(s,n.bind(i),t);return o?df(o):zc(),a}function DM(r,e){const t=e.split(".");return()=>{let i=r;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function cd(r,e){if(!gi(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),kn(r))cd(r.value,e);else if(er(r))for(let t=0;t<r.length;t++)cd(r[t],e);else if(nZ(r)||Zp(r))r.forEach(t=>{cd(t,e)});else if(aZ(r))for(const t in r)cd(r[t],e);return r}function Lo(r){return Zt(r)?{setup:r,name:r.name}:r}const t0=r=>!!r.type.__asyncLoader,CM=r=>r.type.__isKeepAlive;function aee(r,e){OM(r,"a",e)}function lee(r,e){OM(r,"da",e)}function OM(r,e,t=An){const i=r.__wdc||(r.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return r()});if(Iv(e,i,t),t){let s=t.parent;for(;s&&s.parent;)CM(s.parent.vnode)&&uee(i,e,t,s),s=s.parent}}function uee(r,e,t,i){const s=Iv(e,r,i,!0);IM(()=>{Ik(i[e],s)},t)}function Iv(r,e,t=An,i=!1){if(t){const s=t[r]||(t[r]=[]),n=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Hf(),df(t);const a=Ro(e,t,r,o);return zc(),zf(),a});return i?s.unshift(n):s.push(n),n}}const kl=r=>(e,t=An)=>(!z0||r==="sp")&&Iv(r,e,t),cee=kl("bm"),NM=kl("m"),hee=kl("bu"),dee=kl("u"),fee=kl("bum"),IM=kl("um"),_ee=kl("sp"),pee=kl("rtg"),gee=kl("rtc");function mee(r,e=An){Iv("ec",r,e)}function ec(r,e,t,i){const s=r.dirs,n=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let l=a.dir[i];l&&(Hf(),Ro(l,t,8,[r.el,a,r,e]),zf())}}const xee=Symbol();function yee(r,e,t={},i,s){if(Ns.isCE||Ns.parent&&t0(Ns.parent)&&Ns.parent.isCE)return Qi("slot",e==="default"?null:{name:e},i&&i());let n=r[e];n&&n._c&&(n._d=!1),lo();const o=n&&FM(n(t)),a=Fh(xo,{key:t.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&r._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function FM(r){return r.some(e=>WM(e)?!(e.type===cf||e.type===xo&&!FM(e.children)):!0)?r:null}const lA=r=>r?KM(r)?Jk(r)||r.proxy:lA(r.parent):null,Ly=Xn(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>lA(r.parent),$root:r=>lA(r.root),$emit:r=>r.emit,$options:r=>Xk(r),$forceUpdate:r=>r.f||(r.f=()=>Wk(r.update)),$nextTick:r=>r.n||(r.n=KZ.bind(r.proxy)),$watch:r=>oee.bind(r)}),vee={get({_:r},e){const{ctx:t,setupState:i,data:s,props:n,accessCache:o,type:a,appContext:l}=r;let u;if(e[0]!=="$"){const x=o[e];if(x!==void 0)switch(x){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return n[e]}else{if(i!==Fr&&or(i,e))return o[e]=1,i[e];if(s!==Fr&&or(s,e))return o[e]=2,s[e];if((u=r.propsOptions[0])&&or(u,e))return o[e]=3,n[e];if(t!==Fr&&or(t,e))return o[e]=4,t[e];uA&&(o[e]=0)}}const d=Ly[e];let f,g;if(d)return e==="$attrs"&&Ls(r,"get",e),d(r);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==Fr&&or(t,e))return o[e]=4,t[e];if(g=l.config.globalProperties,or(g,e))return g[e]},set({_:r},e,t){const{data:i,setupState:s,ctx:n}=r;return s!==Fr&&or(s,e)?(s[e]=t,!0):i!==Fr&&or(i,e)?(i[e]=t,!0):or(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(n[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:n}},o){let a;return!!t[o]||r!==Fr&&or(r,o)||e!==Fr&&or(e,o)||(a=n[0])&&or(a,o)||or(i,o)||or(Ly,o)||or(s.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:or(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};let uA=!0;function Eee(r){const e=Xk(r),t=r.proxy,i=r.ctx;uA=!1,e.beforeCreate&&TC(e.beforeCreate,r,"bc");const{data:s,computed:n,methods:o,watch:a,provide:l,inject:u,created:d,beforeMount:f,mounted:g,beforeUpdate:x,updated:E,activated:P,deactivated:b,beforeDestroy:R,beforeUnmount:D,destroyed:C,unmounted:I,render:H,renderTracked:N,renderTriggered:V,errorCaptured:O,serverPrefetch:W,expose:q,inheritAttrs:re,components:fe,directives:he,filters:Oe}=e;if(u&&See(u,i,null,r.appContext.config.unwrapInjectedRef),o)for(const qe in o){const Be=o[qe];Zt(Be)&&(i[qe]=Be.bind(t))}if(s){const qe=s.call(t,t);gi(qe)&&(r.data=B0(qe))}if(uA=!0,n)for(const qe in n){const Be=n[qe],nt=Zt(Be)?Be.bind(t,t):Zt(Be.get)?Be.get.bind(t,t):Po,dt=!Zt(Be)&&Zt(Be.set)?Be.set.bind(t):Po,rt=YM({get:nt,set:dt});Object.defineProperty(i,qe,{enumerable:!0,configurable:!0,get:()=>rt.value,set:bt=>rt.value=bt})}if(a)for(const qe in a)MM(a[qe],i,t,qe);if(l){const qe=Zt(l)?l.call(t):l;Reflect.ownKeys(qe).forEach(Be=>{see(Be,qe[Be])})}d&&TC(d,r,"c");function ut(qe,Be){er(Be)?Be.forEach(nt=>qe(nt.bind(t))):Be&&qe(Be.bind(t))}if(ut(cee,f),ut(NM,g),ut(hee,x),ut(dee,E),ut(aee,P),ut(lee,b),ut(mee,O),ut(gee,N),ut(pee,V),ut(fee,D),ut(IM,I),ut(_ee,W),er(q))if(q.length){const qe=r.exposed||(r.exposed={});q.forEach(Be=>{Object.defineProperty(qe,Be,{get:()=>t[Be],set:nt=>t[Be]=nt})})}else r.exposed||(r.exposed={});H&&r.render===Po&&(r.render=H),re!=null&&(r.inheritAttrs=re),fe&&(r.components=fe),he&&(r.directives=he)}function See(r,e,t=Po,i=!1){er(r)&&(r=cA(r));for(const s in r){const n=r[s];let o;gi(n)?"default"in n?o=e0(n.from||s,n.default,!0):o=e0(n.from||s):o=e0(n),kn(o)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function TC(r,e,t){Ro(er(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,t)}function MM(r,e,t,i){const s=i.includes(".")?DM(t,i):()=>t[i];if(Pn(r)){const n=e[r];Zt(n)&&uS(s,n)}else if(Zt(r))uS(s,r.bind(t));else if(gi(r))if(er(r))r.forEach(n=>MM(n,e,t,i));else{const n=Zt(r.handler)?r.handler.bind(t):e[r.handler];Zt(n)&&uS(s,n,r)}}function Xk(r){const e=r.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=r.appContext,a=n.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(u=>Uy(l,u,o,!0)),Uy(l,e,o)),gi(e)&&n.set(e,l),l}function Uy(r,e,t,i=!1){const{mixins:s,extends:n}=e;n&&Uy(r,n,t,!0),s&&s.forEach(o=>Uy(r,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=wee[o]||t&&t[o];r[o]=a?a(r[o],e[o]):e[o]}return r}const wee={data:PC,props:oc,emits:oc,methods:oc,computed:oc,beforeCreate:Ln,created:Ln,beforeMount:Ln,mounted:Ln,beforeUpdate:Ln,updated:Ln,beforeDestroy:Ln,beforeUnmount:Ln,destroyed:Ln,unmounted:Ln,activated:Ln,deactivated:Ln,errorCaptured:Ln,serverPrefetch:Ln,components:oc,directives:oc,watch:bee,provide:PC,inject:Aee};function PC(r,e){return e?r?function(){return Xn(Zt(r)?r.call(this,this):r,Zt(e)?e.call(this,this):e)}:e:r}function Aee(r,e){return oc(cA(r),cA(e))}function cA(r){if(er(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function Ln(r,e){return r?[...new Set([].concat(r,e))]:e}function oc(r,e){return r?Xn(Xn(Object.create(null),r),e):e}function bee(r,e){if(!r)return e;if(!e)return r;const t=Xn(Object.create(null),r);for(const i in e)t[i]=Ln(r[i],e[i]);return t}function kee(r,e,t,i=!1){const s={},n={};Fy(n,Fv,1),r.propsDefaults=Object.create(null),BM(r,e,s,n);for(const o in r.propsOptions[0])o in s||(s[o]=void 0);t?r.props=i?s:UZ(s):r.type.props?r.props=s:r.props=n,r.attrs=n}function Tee(r,e,t,i){const{props:s,attrs:n,vnode:{patchFlag:o}}=r,a=yr(s),[l]=r.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=r.vnode.dynamicProps;for(let f=0;f<d.length;f++){let g=d[f];if(Ov(r.emitsOptions,g))continue;const x=e[g];if(l)if(or(n,g))x!==n[g]&&(n[g]=x,u=!0);else{const E=lf(g);s[E]=hA(l,a,E,x,r,!1)}else x!==n[g]&&(n[g]=x,u=!0)}}}else{BM(r,e,s,n)&&(u=!0);let d;for(const f in a)(!e||!or(e,f)&&((d=Gf(f))===f||!or(e,d)))&&(l?t&&(t[f]!==void 0||t[d]!==void 0)&&(s[f]=hA(l,a,f,void 0,r,!0)):delete s[f]);if(n!==a)for(const f in n)(!e||!or(e,f)&&!0)&&(delete n[f],u=!0)}u&&_l(r,"set","$attrs")}function BM(r,e,t,i){const[s,n]=r.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ox(l))continue;const u=e[l];let d;s&&or(s,d=lf(l))?!n||!n.includes(d)?t[d]=u:(a||(a={}))[d]=u:Ov(r.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(n){const l=yr(t),u=a||Fr;for(let d=0;d<n.length;d++){const f=n[d];t[f]=hA(s,l,f,u[f],r,!or(u,f))}}return o}function hA(r,e,t,i,s,n){const o=r[t];if(o!=null){const a=or(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&Zt(l)){const{propsDefaults:u}=s;t in u?i=u[t]:(df(s),i=u[t]=l.call(null,e),zc())}else i=l}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===Gf(t))&&(i=!0))}return i}function LM(r,e,t=!1){const i=e.propsCache,s=i.get(r);if(s)return s;const n=r.props,o={},a=[];let l=!1;if(!Zt(r)){const d=f=>{l=!0;const[g,x]=LM(f,e,!0);Xn(o,g),x&&a.push(...x)};!t&&e.mixins.length&&e.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!n&&!l)return gi(r)&&i.set(r,Pd),Pd;if(er(n))for(let d=0;d<n.length;d++){const f=lf(n[d]);RC(f)&&(o[f]=Fr)}else if(n)for(const d in n){const f=lf(d);if(RC(f)){const g=n[d],x=o[f]=er(g)||Zt(g)?{type:g}:g;if(x){const E=OC(Boolean,x.type),P=OC(String,x.type);x[0]=E>-1,x[1]=P<0||E<P,(E>-1||or(x,"default"))&&a.push(f)}}}const u=[o,a];return gi(r)&&i.set(r,u),u}function RC(r){return r[0]!=="$"}function DC(r){const e=r&&r.toString().match(/^\s*function (\w+)/);return e?e[1]:r===null?"null":""}function CC(r,e){return DC(r)===DC(e)}function OC(r,e){return er(e)?e.findIndex(t=>CC(t,r)):Zt(e)&&CC(e,r)?0:-1}const UM=r=>r[0]==="_"||r==="$stable",Yk=r=>er(r)?r.map(ia):[ia(r)],Pee=(r,e,t)=>{if(e._n)return e;const i=Ih((...s)=>Yk(e(...s)),t);return i._c=!1,i},GM=(r,e,t)=>{const i=r._ctx;for(const s in r){if(UM(s))continue;const n=r[s];if(Zt(n))e[s]=Pee(s,n,i);else if(n!=null){const o=Yk(n);e[s]=()=>o}}},HM=(r,e)=>{const t=Yk(e);r.slots.default=()=>t},Ree=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=yr(e),Fy(e,"_",t)):GM(e,r.slots={})}else r.slots={},e&&HM(r,e);Fy(r.slots,Fv,1)},Dee=(r,e,t)=>{const{vnode:i,slots:s}=r;let n=!0,o=Fr;if(i.shapeFlag&32){const a=e._;a?t&&a===1?n=!1:(Xn(s,e),!t&&a===1&&delete s._):(n=!e.$stable,GM(e,s)),o=e}else e&&(HM(r,e),o={default:1});if(n)for(const a in s)!UM(a)&&!(a in o)&&delete s[a]};function zM(){return{app:null,config:{isNativeTag:tZ,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cee=0;function Oee(r,e){return function(i,s=null){Zt(i)||(i=Object.assign({},i)),s!=null&&!gi(s)&&(s=null);const n=zM(),o=new Set;let a=!1;const l=n.app={_uid:Cee++,_component:i,_props:s,_container:null,_context:n,_instance:null,version:qee,get config(){return n.config},set config(u){},use(u,...d){return o.has(u)||(u&&Zt(u.install)?(o.add(u),u.install(l,...d)):Zt(u)&&(o.add(u),u(l,...d))),l},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),l},component(u,d){return d?(n.components[u]=d,l):n.components[u]},directive(u,d){return d?(n.directives[u]=d,l):n.directives[u]},mount(u,d,f){if(!a){const g=Qi(i,s);return g.appContext=n,d&&e?e(g,u):r(g,u,f),a=!0,l._container=u,u.__vue_app__=l,Jk(g.component)||g.component.proxy}},unmount(){a&&(r(null,l._container),delete l._container.__vue_app__)},provide(u,d){return n.provides[u]=d,l}};return l}}function dA(r,e,t,i,s=!1){if(er(r)){r.forEach((g,x)=>dA(g,e&&(er(e)?e[x]:e),t,i,s));return}if(t0(i)&&!s)return;const n=i.shapeFlag&4?Jk(i.component)||i.component.proxy:i.el,o=s?null:n,{i:a,r:l}=r,u=e&&e.r,d=a.refs===Fr?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Pn(u)?(d[u]=null,or(f,u)&&(f[u]=null)):kn(u)&&(u.value=null)),Zt(l))Su(l,a,12,[o,d]);else{const g=Pn(l),x=kn(l);if(g||x){const E=()=>{if(r.f){const P=g?d[l]:l.value;s?er(P)&&Ik(P,n):er(P)?P.includes(n)||P.push(n):g?(d[l]=[n],or(f,l)&&(f[l]=d[l])):(l.value=[n],r.k&&(d[r.k]=l.value))}else g?(d[l]=o,or(f,l)&&(f[l]=o)):x&&(l.value=o,r.k&&(d[r.k]=o))};o?(E.id=-1,as(E,t)):E()}}}const as=nee;function Nee(r){return Iee(r)}function Iee(r,e){const t=hZ();t.__VUE__=!0;const{insert:i,remove:s,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:d,parentNode:f,nextSibling:g,setScopeId:x=Po,cloneNode:E,insertStaticContent:P}=r,b=(F,U,j,ee=null,ce=null,ye=null,oe=!1,ae=null,we=!!U.dynamicChildren)=>{if(F===U)return;F&&!sp(F,U)&&(ee=de(F),Z(F,ce,ye,!0),F=null),U.patchFlag===-2&&(we=!1,U.dynamicChildren=null);const{type:Re,ref:Xe,shapeFlag:We}=U;switch(Re){case qk:R(F,U,j,ee);break;case cf:D(F,U,j,ee);break;case cS:F==null&&C(U,j,ee,oe);break;case xo:he(F,U,j,ee,ce,ye,oe,ae,we);break;default:We&1?N(F,U,j,ee,ce,ye,oe,ae,we):We&6?Oe(F,U,j,ee,ce,ye,oe,ae,we):(We&64||We&128)&&Re.process(F,U,j,ee,ce,ye,oe,ae,we,ze)}Xe!=null&&ce&&dA(Xe,F&&F.ref,ye,U||F,!U)},R=(F,U,j,ee)=>{if(F==null)i(U.el=a(U.children),j,ee);else{const ce=U.el=F.el;U.children!==F.children&&u(ce,U.children)}},D=(F,U,j,ee)=>{F==null?i(U.el=l(U.children||""),j,ee):U.el=F.el},C=(F,U,j,ee)=>{[F.el,F.anchor]=P(F.children,U,j,ee,F.el,F.anchor)},I=({el:F,anchor:U},j,ee)=>{let ce;for(;F&&F!==U;)ce=g(F),i(F,j,ee),F=ce;i(U,j,ee)},H=({el:F,anchor:U})=>{let j;for(;F&&F!==U;)j=g(F),s(F),F=j;s(U)},N=(F,U,j,ee,ce,ye,oe,ae,we)=>{oe=oe||U.type==="svg",F==null?V(U,j,ee,ce,ye,oe,ae,we):q(F,U,ce,ye,oe,ae,we)},V=(F,U,j,ee,ce,ye,oe,ae)=>{let we,Re;const{type:Xe,props:We,shapeFlag:Qe,transition:$e,patchFlag:tt,dirs:_t}=F;if(F.el&&E!==void 0&&tt===-1)we=F.el=E(F.el);else{if(we=F.el=o(F.type,ye,We&&We.is,We),Qe&8?d(we,F.children):Qe&16&&W(F.children,we,null,ee,ce,ye&&Xe!=="foreignObject",oe,ae),_t&&ec(F,null,ee,"created"),We){for(const St in We)St!=="value"&&!Ox(St)&&n(we,St,null,We[St],ye,F.children,ee,ce,Se);"value"in We&&n(we,"value",null,We.value),(Re=We.onVnodeBeforeMount)&&Jo(Re,ee,F)}O(we,F,F.scopeId,oe,ee)}_t&&ec(F,null,ee,"beforeMount");const it=(!ce||ce&&!ce.pendingBranch)&&$e&&!$e.persisted;it&&$e.beforeEnter(we),i(we,U,j),((Re=We&&We.onVnodeMounted)||it||_t)&&as(()=>{Re&&Jo(Re,ee,F),it&&$e.enter(we),_t&&ec(F,null,ee,"mounted")},ce)},O=(F,U,j,ee,ce)=>{if(j&&x(F,j),ee)for(let ye=0;ye<ee.length;ye++)x(F,ee[ye]);if(ce){let ye=ce.subTree;if(U===ye){const oe=ce.vnode;O(F,oe,oe.scopeId,oe.slotScopeIds,ce.parent)}}},W=(F,U,j,ee,ce,ye,oe,ae,we=0)=>{for(let Re=we;Re<F.length;Re++){const Xe=F[Re]=ae?Zl(F[Re]):ia(F[Re]);b(null,Xe,U,j,ee,ce,ye,oe,ae)}},q=(F,U,j,ee,ce,ye,oe)=>{const ae=U.el=F.el;let{patchFlag:we,dynamicChildren:Re,dirs:Xe}=U;we|=F.patchFlag&16;const We=F.props||Fr,Qe=U.props||Fr;let $e;j&&tc(j,!1),($e=Qe.onVnodeBeforeUpdate)&&Jo($e,j,U,F),Xe&&ec(U,F,j,"beforeUpdate"),j&&tc(j,!0);const tt=ce&&U.type!=="foreignObject";if(Re?re(F.dynamicChildren,Re,ae,j,ee,tt,ye):oe||nt(F,U,ae,null,j,ee,tt,ye,!1),we>0){if(we&16)fe(ae,U,We,Qe,j,ee,ce);else if(we&2&&We.class!==Qe.class&&n(ae,"class",null,Qe.class,ce),we&4&&n(ae,"style",We.style,Qe.style,ce),we&8){const _t=U.dynamicProps;for(let it=0;it<_t.length;it++){const St=_t[it],Ot=We[St],Rt=Qe[St];(Rt!==Ot||St==="value")&&n(ae,St,Ot,Rt,ce,F.children,j,ee,Se)}}we&1&&F.children!==U.children&&d(ae,U.children)}else!oe&&Re==null&&fe(ae,U,We,Qe,j,ee,ce);(($e=Qe.onVnodeUpdated)||Xe)&&as(()=>{$e&&Jo($e,j,U,F),Xe&&ec(U,F,j,"updated")},ee)},re=(F,U,j,ee,ce,ye,oe)=>{for(let ae=0;ae<U.length;ae++){const we=F[ae],Re=U[ae],Xe=we.el&&(we.type===xo||!sp(we,Re)||we.shapeFlag&70)?f(we.el):j;b(we,Re,Xe,null,ee,ce,ye,oe,!0)}},fe=(F,U,j,ee,ce,ye,oe)=>{if(j!==ee){for(const ae in ee){if(Ox(ae))continue;const we=ee[ae],Re=j[ae];we!==Re&&ae!=="value"&&n(F,ae,Re,we,oe,U.children,ce,ye,Se)}if(j!==Fr)for(const ae in j)!Ox(ae)&&!(ae in ee)&&n(F,ae,j[ae],null,oe,U.children,ce,ye,Se);"value"in ee&&n(F,"value",j.value,ee.value)}},he=(F,U,j,ee,ce,ye,oe,ae,we)=>{const Re=U.el=F?F.el:a(""),Xe=U.anchor=F?F.anchor:a("");let{patchFlag:We,dynamicChildren:Qe,slotScopeIds:$e}=U;$e&&(ae=ae?ae.concat($e):$e),F==null?(i(Re,j,ee),i(Xe,j,ee),W(U.children,j,Xe,ce,ye,oe,ae,we)):We>0&&We&64&&Qe&&F.dynamicChildren?(re(F.dynamicChildren,Qe,j,ce,ye,oe,ae),(U.key!=null||ce&&U===ce.subTree)&&jM(F,U,!0)):nt(F,U,j,Xe,ce,ye,oe,ae,we)},Oe=(F,U,j,ee,ce,ye,oe,ae,we)=>{U.slotScopeIds=ae,F==null?U.shapeFlag&512?ce.ctx.activate(U,j,ee,oe,we):He(U,j,ee,ce,ye,oe,we):ut(F,U,we)},He=(F,U,j,ee,ce,ye,oe)=>{const ae=F.component=Vee(F,ee,ce);if(CM(F)&&(ae.ctx.renderer=ze),Wee(ae),ae.asyncDep){if(ce&&ce.registerDep(ae,qe),!F.el){const we=ae.subTree=Qi(cf);D(null,we,U,j)}return}qe(ae,F,U,j,ce,ye,oe)},ut=(F,U,j)=>{const ee=U.component=F.component;if(tee(F,U,j))if(ee.asyncDep&&!ee.asyncResolved){Be(ee,U,j);return}else ee.next=U,YZ(ee.update),ee.update();else U.el=F.el,ee.vnode=U},qe=(F,U,j,ee,ce,ye,oe)=>{const ae=()=>{if(F.isMounted){let{next:Xe,bu:We,u:Qe,parent:$e,vnode:tt}=F,_t=Xe,it;tc(F,!1),Xe?(Xe.el=tt.el,Be(F,Xe,oe)):Xe=tt,We&&aS(We),(it=Xe.props&&Xe.props.onVnodeBeforeUpdate)&&Jo(it,$e,Xe,tt),tc(F,!0);const St=lS(F),Ot=F.subTree;F.subTree=St,b(Ot,St,f(Ot.el),de(Ot),F,ce,ye),Xe.el=St.el,_t===null&&ree(F,St.el),Qe&&as(Qe,ce),(it=Xe.props&&Xe.props.onVnodeUpdated)&&as(()=>Jo(it,$e,Xe,tt),ce)}else{let Xe;const{el:We,props:Qe}=U,{bm:$e,m:tt,parent:_t}=F,it=t0(U);if(tc(F,!1),$e&&aS($e),!it&&(Xe=Qe&&Qe.onVnodeBeforeMount)&&Jo(Xe,_t,U),tc(F,!0),We&&Le){const St=()=>{F.subTree=lS(F),Le(We,F.subTree,F,ce,null)};it?U.type.__asyncLoader().then(()=>!F.isUnmounted&&St()):St()}else{const St=F.subTree=lS(F);b(null,St,j,ee,F,ce,ye),U.el=St.el}if(tt&&as(tt,ce),!it&&(Xe=Qe&&Qe.onVnodeMounted)){const St=U;as(()=>Jo(Xe,_t,St),ce)}(U.shapeFlag&256||_t&&t0(_t.vnode)&&_t.vnode.shapeFlag&256)&&F.a&&as(F.a,ce),F.isMounted=!0,U=j=ee=null}},we=F.effect=new Lk(ae,()=>Wk(Re),F.scope),Re=F.update=()=>we.run();Re.id=F.uid,tc(F,!0),Re()},Be=(F,U,j)=>{U.component=F;const ee=F.vnode.props;F.vnode=U,F.next=null,Tee(F,U.props,ee,j),Dee(F,U.children,j),Hf(),AC(),zf()},nt=(F,U,j,ee,ce,ye,oe,ae,we=!1)=>{const Re=F&&F.children,Xe=F?F.shapeFlag:0,We=U.children,{patchFlag:Qe,shapeFlag:$e}=U;if(Qe>0){if(Qe&128){rt(Re,We,j,ee,ce,ye,oe,ae,we);return}else if(Qe&256){dt(Re,We,j,ee,ce,ye,oe,ae,we);return}}$e&8?(Xe&16&&Se(Re,ce,ye),We!==Re&&d(j,We)):Xe&16?$e&16?rt(Re,We,j,ee,ce,ye,oe,ae,we):Se(Re,ce,ye,!0):(Xe&8&&d(j,""),$e&16&&W(We,j,ee,ce,ye,oe,ae,we))},dt=(F,U,j,ee,ce,ye,oe,ae,we)=>{F=F||Pd,U=U||Pd;const Re=F.length,Xe=U.length,We=Math.min(Re,Xe);let Qe;for(Qe=0;Qe<We;Qe++){const $e=U[Qe]=we?Zl(U[Qe]):ia(U[Qe]);b(F[Qe],$e,j,null,ce,ye,oe,ae,we)}Re>Xe?Se(F,ce,ye,!0,!1,We):W(U,j,ee,ce,ye,oe,ae,we,We)},rt=(F,U,j,ee,ce,ye,oe,ae,we)=>{let Re=0;const Xe=U.length;let We=F.length-1,Qe=Xe-1;for(;Re<=We&&Re<=Qe;){const $e=F[Re],tt=U[Re]=we?Zl(U[Re]):ia(U[Re]);if(sp($e,tt))b($e,tt,j,null,ce,ye,oe,ae,we);else break;Re++}for(;Re<=We&&Re<=Qe;){const $e=F[We],tt=U[Qe]=we?Zl(U[Qe]):ia(U[Qe]);if(sp($e,tt))b($e,tt,j,null,ce,ye,oe,ae,we);else break;We--,Qe--}if(Re>We){if(Re<=Qe){const $e=Qe+1,tt=$e<Xe?U[$e].el:ee;for(;Re<=Qe;)b(null,U[Re]=we?Zl(U[Re]):ia(U[Re]),j,tt,ce,ye,oe,ae,we),Re++}}else if(Re>Qe)for(;Re<=We;)Z(F[Re],ce,ye,!0),Re++;else{const $e=Re,tt=Re,_t=new Map;for(Re=tt;Re<=Qe;Re++){const mt=U[Re]=we?Zl(U[Re]):ia(U[Re]);mt.key!=null&&_t.set(mt.key,Re)}let it,St=0;const Ot=Qe-tt+1;let Rt=!1,Mt=0;const Ie=new Array(Ot);for(Re=0;Re<Ot;Re++)Ie[Re]=0;for(Re=$e;Re<=We;Re++){const mt=F[Re];if(St>=Ot){Z(mt,ce,ye,!0);continue}let Et;if(mt.key!=null)Et=_t.get(mt.key);else for(it=tt;it<=Qe;it++)if(Ie[it-tt]===0&&sp(mt,U[it])){Et=it;break}Et===void 0?Z(mt,ce,ye,!0):(Ie[Et-tt]=Re+1,Et>=Mt?Mt=Et:Rt=!0,b(mt,U[Et],j,null,ce,ye,oe,ae,we),St++)}const gt=Rt?Fee(Ie):Pd;for(it=gt.length-1,Re=Ot-1;Re>=0;Re--){const mt=tt+Re,Et=U[mt],zt=mt+1<Xe?U[mt+1].el:ee;Ie[Re]===0?b(null,Et,j,zt,ce,ye,oe,ae,we):Rt&&(it<0||Re!==gt[it]?bt(Et,j,zt,2):it--)}}},bt=(F,U,j,ee,ce=null)=>{const{el:ye,type:oe,transition:ae,children:we,shapeFlag:Re}=F;if(Re&6){bt(F.component.subTree,U,j,ee);return}if(Re&128){F.suspense.move(U,j,ee);return}if(Re&64){oe.move(F,U,j,ze);return}if(oe===xo){i(ye,U,j);for(let We=0;We<we.length;We++)bt(we[We],U,j,ee);i(F.anchor,U,j);return}if(oe===cS){I(F,U,j);return}if(ee!==2&&Re&1&&ae)if(ee===0)ae.beforeEnter(ye),i(ye,U,j),as(()=>ae.enter(ye),ce);else{const{leave:We,delayLeave:Qe,afterLeave:$e}=ae,tt=()=>i(ye,U,j),_t=()=>{We(ye,()=>{tt(),$e&&$e()})};Qe?Qe(ye,tt,_t):_t()}else i(ye,U,j)},Z=(F,U,j,ee=!1,ce=!1)=>{const{type:ye,props:oe,ref:ae,children:we,dynamicChildren:Re,shapeFlag:Xe,patchFlag:We,dirs:Qe}=F;if(ae!=null&&dA(ae,null,j,F,!0),Xe&256){U.ctx.deactivate(F);return}const $e=Xe&1&&Qe,tt=!t0(F);let _t;if(tt&&(_t=oe&&oe.onVnodeBeforeUnmount)&&Jo(_t,U,F),Xe&6)Ee(F.component,j,ee);else{if(Xe&128){F.suspense.unmount(j,ee);return}$e&&ec(F,null,U,"beforeUnmount"),Xe&64?F.type.remove(F,U,j,ce,ze,ee):Re&&(ye!==xo||We>0&&We&64)?Se(Re,U,j,!1,!0):(ye===xo&&We&384||!ce&&Xe&16)&&Se(we,U,j),ee&&ne(F)}(tt&&(_t=oe&&oe.onVnodeUnmounted)||$e)&&as(()=>{_t&&Jo(_t,U,F),$e&&ec(F,null,U,"unmounted")},j)},ne=F=>{const{type:U,el:j,anchor:ee,transition:ce}=F;if(U===xo){se(j,ee);return}if(U===cS){H(F);return}const ye=()=>{s(j),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(F.shapeFlag&1&&ce&&!ce.persisted){const{leave:oe,delayLeave:ae}=ce,we=()=>oe(j,ye);ae?ae(F.el,ye,we):we()}else ye()},se=(F,U)=>{let j;for(;F!==U;)j=g(F),s(F),F=j;s(U)},Ee=(F,U,j)=>{const{bum:ee,scope:ce,update:ye,subTree:oe,um:ae}=F;ee&&aS(ee),ce.stop(),ye&&(ye.active=!1,Z(oe,F,U,j)),ae&&as(ae,U),as(()=>{F.isUnmounted=!0},U),U&&U.pendingBranch&&!U.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===U.pendingId&&(U.deps--,U.deps===0&&U.resolve())},Se=(F,U,j,ee=!1,ce=!1,ye=0)=>{for(let oe=ye;oe<F.length;oe++)Z(F[oe],U,j,ee,ce)},de=F=>F.shapeFlag&6?de(F.component.subTree):F.shapeFlag&128?F.suspense.next():g(F.anchor||F.el),Pe=(F,U,j)=>{F==null?U._vnode&&Z(U._vnode,null,null,!0):b(U._vnode||null,F,U,null,null,null,j),AC(),kM(),U._vnode=F},ze={p:b,um:Z,m:bt,r:ne,mt:He,mc:W,pc:nt,pbc:re,n:de,o:r};let J,Le;return e&&([J,Le]=e(ze)),{render:Pe,hydrate:J,createApp:Oee(Pe,J)}}function tc({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function jM(r,e,t=!1){const i=r.children,s=e.children;if(er(i)&&er(s))for(let n=0;n<i.length;n++){const o=i[n];let a=s[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[n]=Zl(s[n]),a.el=o.el),t||jM(o,a))}}function Fee(r){const e=r.slice(),t=[0];let i,s,n,o,a;const l=r.length;for(i=0;i<l;i++){const u=r[i];if(u!==0){if(s=t[t.length-1],r[s]<u){e[i]=s,t.push(i);continue}for(n=0,o=t.length-1;n<o;)a=n+o>>1,r[t[a]]<u?n=a+1:o=a;u<r[t[n]]&&(n>0&&(e[i]=t[n-1]),t[n]=i)}}for(n=t.length,o=t[n-1];n-- >0;)t[n]=o,o=e[o];return t}const Mee=r=>r.__isTeleport,xo=Symbol(void 0),qk=Symbol(void 0),cf=Symbol(void 0),cS=Symbol(void 0),r0=[];let Ao=null;function lo(r=!1){r0.push(Ao=r?null:[])}function Bee(){r0.pop(),Ao=r0[r0.length-1]||null}let H0=1;function NC(r){H0+=r}function VM(r){return r.dynamicChildren=H0>0?Ao||Pd:null,Bee(),H0>0&&Ao&&Ao.push(r),r}function Ug(r,e,t,i,s,n){return VM(Zr(r,e,t,i,s,n,!0))}function Fh(r,e,t,i,s){return VM(Qi(r,e,t,i,s,!0))}function WM(r){return r?r.__v_isVNode===!0:!1}function sp(r,e){return r.type===e.type&&r.key===e.key}const Fv="__vInternal",$M=({key:r})=>r!=null?r:null,Nx=({ref:r,ref_key:e,ref_for:t})=>r!=null?Pn(r)||kn(r)||Zt(r)?{i:Ns,r,k:e,f:!!t}:r:null;function Zr(r,e=null,t=null,i=0,s=null,n=r===xo?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&$M(e),ref:e&&Nx(e),scopeId:Nv,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(Qk(l,t),n&128&&r.normalize(l)):t&&(l.shapeFlag|=Pn(t)?8:16),H0>0&&!o&&Ao&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&Ao.push(l),l}const Qi=Lee;function Lee(r,e=null,t=null,i=0,s=null,n=!1){if((!r||r===xee)&&(r=cf),WM(r)){const a=hf(r,e,!0);return t&&Qk(a,t),H0>0&&!n&&Ao&&(a.shapeFlag&6?Ao[Ao.indexOf(r)]=a:Ao.push(a)),a.patchFlag|=-2,a}if(Yee(r)&&(r=r.__vccOpts),e){e=Uee(e);let{class:a,style:l}=e;a&&!Pn(a)&&(e.class=kv(a)),gi(l)&&(xM(l)&&!er(l)&&(l=Xn({},l)),e.style=bv(l))}const o=Pn(r)?1:iee(r)?128:Mee(r)?64:gi(r)?4:Zt(r)?2:0;return Zr(r,e,t,i,s,o,n,!0)}function Uee(r){return r?xM(r)||Fv in r?Xn({},r):r:null}function hf(r,e,t=!1){const{props:i,ref:s,patchFlag:n,children:o}=r,a=e?Hee(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:a,key:a&&$M(a),ref:e&&e.ref?t&&s?er(s)?s.concat(Nx(e)):[s,Nx(e)]:Nx(e):s,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==xo?n===-1?16:n|16:n,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&hf(r.ssContent),ssFallback:r.ssFallback&&hf(r.ssFallback),el:r.el,anchor:r.anchor}}function Gee(r=" ",e=0){return Qi(qk,null,r,e)}function ia(r){return r==null||typeof r=="boolean"?Qi(cf):er(r)?Qi(xo,null,r.slice()):typeof r=="object"?Zl(r):Qi(qk,null,String(r))}function Zl(r){return r.el===null||r.memo?r:hf(r)}function Qk(r,e){let t=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(er(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),Qk(r,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(Fv in e)?e._ctx=Ns:s===3&&Ns&&(Ns.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else Zt(e)?(e={default:e,_ctx:Ns},t=32):(e=String(e),i&64?(t=16,e=[Gee(e)]):t=8);r.children=e,r.shapeFlag|=t}function Hee(...r){const e={};for(let t=0;t<r.length;t++){const i=r[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=kv([e.class,i.class]));else if(s==="style")e.style=bv([e.style,i.style]);else if(Tv(s)){const n=e[s],o=i[s];o&&n!==o&&!(er(n)&&n.includes(o))&&(e[s]=n?[].concat(n,o):o)}else s!==""&&(e[s]=i[s])}return e}function Jo(r,e,t,i=null){Ro(r,e,7,[t,i])}const zee=zM();let jee=0;function Vee(r,e,t){const i=r.type,s=(e?e.appContext:r.appContext)||zee,n={uid:jee++,vnode:r,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new dZ(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:LM(i,s),emitsOptions:PM(i,s),emit:null,emitted:null,propsDefaults:Fr,inheritAttrs:i.inheritAttrs,ctx:Fr,data:Fr,props:Fr,attrs:Fr,slots:Fr,refs:Fr,setupState:Fr,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=JZ.bind(null,n),r.ce&&r.ce(n),n}let An=null;const df=r=>{An=r,r.scope.on()},zc=()=>{An&&An.scope.off(),An=null};function KM(r){return r.vnode.shapeFlag&4}let z0=!1;function Wee(r,e=!1){z0=e;const{props:t,children:i}=r.vnode,s=KM(r);kee(r,t,s,e),Ree(r,i);const n=s?$ee(r,e):void 0;return z0=!1,n}function $ee(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=yM(new Proxy(r.ctx,vee));const{setup:i}=t;if(i){const s=r.setupContext=i.length>1?Xee(r):null;df(r),Hf();const n=Su(i,r,0,[r.props,s]);if(zf(),zc(),sM(n)){if(n.then(zc,zc),e)return n.then(o=>{IC(r,o,e)}).catch(o=>{Cv(o,r,0)});r.asyncDep=n}else IC(r,n,e)}else XM(r,e)}function IC(r,e,t){Zt(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:gi(e)&&(r.setupState=SM(e)),XM(r,t)}let FC;function XM(r,e,t){const i=r.type;if(!r.render){if(!e&&FC&&!i.render){const s=i.template||Xk(r).template;if(s){const{isCustomElement:n,compilerOptions:o}=r.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Xn(Xn({isCustomElement:n,delimiters:a},o),l);i.render=FC(s,u)}}r.render=i.render||Po}df(r),Hf(),Eee(r),zf(),zc()}function Kee(r){return new Proxy(r.attrs,{get(e,t){return Ls(r,"get","$attrs"),e[t]}})}function Xee(r){const e=i=>{r.exposed=i||{}};let t;return{get attrs(){return t||(t=Kee(r))},slots:r.slots,emit:r.emit,expose:e}}function Jk(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(SM(yM(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ly)return Ly[t](r)}}))}function Yee(r){return Zt(r)&&"__vccOpts"in r}const YM=(r,e)=>WZ(r,e,z0),qee="3.2.39",Qee="http://www.w3.org/2000/svg",fc=typeof document<"u"?document:null,MC=fc&&fc.createElement("template"),Jee={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,i)=>{const s=e?fc.createElementNS(Qee,r):fc.createElement(r,t?{is:t}:void 0);return r==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:r=>fc.createTextNode(r),createComment:r=>fc.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>fc.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},cloneNode(r){const e=r.cloneNode(!0);return"_value"in r&&(e._value=r._value),e},insertStaticContent(r,e,t,i,s,n){const o=t?t.previousSibling:e.lastChild;if(s&&(s===n||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===n||!(s=s.nextSibling)););else{MC.innerHTML=i?`<svg>${r}</svg>`:r;const a=MC.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function Zee(r,e,t){const i=r._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function ete(r,e,t){const i=r.style,s=Pn(t);if(t&&!s){for(const n in t)fA(i,n,t[n]);if(e&&!Pn(e))for(const n in e)t[n]==null&&fA(i,n,"")}else{const n=i.display;s?e!==t&&(i.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(i.display=n)}}const BC=/\s*!important$/;function fA(r,e,t){if(er(t))t.forEach(i=>fA(r,e,i));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const i=tte(r,e);BC.test(t)?r.setProperty(Gf(i),t.replace(BC,""),"important"):r[i]=t}}const LC=["Webkit","Moz","ms"],hS={};function tte(r,e){const t=hS[e];if(t)return t;let i=lf(e);if(i!=="filter"&&i in r)return hS[e]=i;i=oM(i);for(let s=0;s<LC.length;s++){const n=LC[s]+i;if(n in r)return hS[e]=n}return e}const UC="http://www.w3.org/1999/xlink";function rte(r,e,t,i,s){if(i&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(UC,e.slice(6,e.length)):r.setAttributeNS(UC,e,t);else{const n=QJ(e);t==null||n&&!nM(t)?r.removeAttribute(e):r.setAttribute(e,n?"":t)}}function ite(r,e,t,i,s,n,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,n),r[e]=t==null?"":t;return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=t;const l=t==null?"":t;(r.value!==l||r.tagName==="OPTION")&&(r.value=l),t==null&&r.removeAttribute(e);return}let a=!1;if(t===""||t==null){const l=typeof r[e];l==="boolean"?t=nM(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{r[e]=t}catch{}a&&r.removeAttribute(e)}const[qM,nte]=(()=>{let r=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(r=performance.now.bind(performance));const t=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(t&&Number(t[1])<=53)}return[r,e]})();let _A=0;const ste=Promise.resolve(),ote=()=>{_A=0},ate=()=>_A||(ste.then(ote),_A=qM());function lte(r,e,t,i){r.addEventListener(e,t,i)}function ute(r,e,t,i){r.removeEventListener(e,t,i)}function cte(r,e,t,i,s=null){const n=r._vei||(r._vei={}),o=n[e];if(i&&o)o.value=i;else{const[a,l]=hte(e);if(i){const u=n[e]=dte(i,s);lte(r,a,u,l)}else o&&(ute(r,a,o,l),n[e]=void 0)}}const GC=/(?:Once|Passive|Capture)$/;function hte(r){let e;if(GC.test(r)){e={};let i;for(;i=r.match(GC);)r=r.slice(0,r.length-i[0].length),e[i[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Gf(r.slice(2)),e]}function dte(r,e){const t=i=>{const s=i.timeStamp||qM();(nte||s>=t.attached-1)&&Ro(fte(i,t.value),e,5,[i])};return t.value=r,t.attached=ate(),t}function fte(r,e){if(er(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const HC=/^on[a-z]/,_te=(r,e,t,i,s=!1,n,o,a,l)=>{e==="class"?Zee(r,i,s):e==="style"?ete(r,t,i):Tv(e)?Nk(e)||cte(r,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pte(r,e,i,s))?ite(r,e,i,n,o,a,l):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),rte(r,e,i,s))};function pte(r,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in r&&HC.test(e)&&Zt(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||HC.test(e)&&Pn(t)?!1:e in r}const gte=Xn({patchProp:_te},Jee);let zC;function mte(){return zC||(zC=Nee(gte))}const QM=(...r)=>{const e=mte().createApp(...r),{mount:t}=e;return e.mount=i=>{const s=xte(i);if(!s)return;const n=e._component;!Zt(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function xte(r){return Pn(r)?document.querySelector(r):r}const yte=Lo({__name:"overlay",props:{outlines:null},setup(r){const e=r,t=YM(()=>{if(!e.outlines.length)return{display:"none"};const i=e.outlines[0];return{top:i.top-1,left:i.left-1,width:i.width+2,height:i.height+2}});return(i,s)=>(lo(),Ug("div",{class:"outline",style:bv(os(t))},null,4))}});const Mv=(r,e)=>{const t=r.__vccOpts||r;for(const[i,s]of e)t[i]=s;return t},vte=Mv(yte,[["__scopeId","data-v-5b94039b"]]);class Ete extends Ht{constructor(t){super();c(this,"outlines",al([]));c(this,"el");this.container=t,this.el=document.createElement("div"),Object.assign(this.el.style,{position:"absolute",top:"0",left:"0"}),this.container.appendChild(this.el),this.mount()}mount(){const t=QM(vte,{outlines:this.outlines});t.mount(this.el),this._register(nn(t.unmount))}}class Ste{constructor(e){c(this,"userInputEvents");this.userInputEvents=e}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseEnter(e){this.userInputEvents.emitMouseEnter(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDragStart(e){this.userInputEvents.emitMouseDragStart(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(e){this.userInputEvents.emitMouseDropCanceled(e)}emitDbClick(e){this.userInputEvents.emitDoubleClick(e)}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}var wte=Object.defineProperty,Ate=Object.getOwnPropertyDescriptor,bte=(r,e,t,i)=>{for(var s=i>1?void 0:i?Ate(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&wte(e,t,s),s},jC=(r,e)=>(t,i)=>e(t,i,r);let pA=class extends Ht{constructor(e,t,i,s,n,o){super();c(this,"_textCursor");c(this,"_canvas");c(this,"_overlay");c(this,"_selection");c(this,"mx",by.Identity);c(this,"_onCameraChagned",new Dt);c(this,"onCameraChagned",this._onCameraChagned.event);c(this,"_onCursorMoved",new Dt);c(this,"onCursorMoved",this._onCursorMoved.event);c(this,"disposed",!1);this.domNode=e,this.viewModel=t,this.mvvm=i,this._contextKeyService=n,this._keybindingService=o,Reflect.set(window,"view",this),this.domNode.tabIndex=1;let a=new Ste(s);this._canvas=this._register(new XJ(this.domNode,this,t)),this._overlay=this._register(new Ete(this.domNode)),this._textCursor=this._register(new Cx(this.domNode,this)),na.once(this._canvas.onMounted)(()=>{const l=this.document.getSelection();this._register(new qK(this,this.mvvm)),this._selection=this._register(l),this._register(l.onDidChange(()=>this.layoutManager.onSelectionChanged(l))),this._register(new YK(a,this._createPointerHandlerHelper()))})}get document(){return this._canvas.document}_createPointerHandlerHelper(){return{viewDomNode:this.domNode,hitTest:(e,t,i)=>this.hitTest(e,t,i),getTransform:()=>this.mx,getHitTestLevel:e=>this._contextKeyService.getContextKeyValue($c.hitTestLevel.key)}}get layoutManager(){return this._canvas.layoutManager}hitTest(e,t,i){return this.layoutManager.hitTestDOM(e,t,i)}currentCursor(){return this.domNode.style.cursor||Ui.arrow}setCursor(e){const t=this.domNode;t.style.cursor!==e&&(t.style.cursor=e)}drawCursor(e){e?this._textCursor.update({left:e.blockStart,top:e.inlineStart,width:1.5,height:e.inlineSize}):this._textCursor.update(),this._onCursorMoved.fire(e)}setOutlines(e){this._overlay.outlines.length=0,this._overlay.outlines.push(...e)}setHitTestLevel(e){this._contextKeyService.setContext($c.hitTestLevel.key,e)}translate(e,t){this.mx.tx=e,this.mx.ty=t,this._onCameraChagned.fire()}internal_disconnect(){Ue()}internal_connect(){Ue()}focus(){this.domNode.focus()}isFocused(){return document.activeElement===this.domNode}dispose(){super.dispose(),this.disposed=!0}};pA=bte([jC(4,_h),jC(5,RA)],pA);class kte{constructor(){c(this,"onKeyDown",null);c(this,"onKeyUp",null);c(this,"onContextMenu",null);c(this,"onMouseMove",null);c(this,"onMouseEnter",null);c(this,"onMouseLeave",null);c(this,"onMouseDown",null);c(this,"onMouseUp",null);c(this,"onMouseDrag",null);c(this,"onMouseDragStart",null);c(this,"onMouseDrop",null);c(this,"onMouseDropCanceled",null);c(this,"onMouseWheel",null);c(this,"onDoubleClick",null)}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(e)}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(e)}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(e)}emitMouseEnter(e){this.onMouseEnter&&this.onMouseEnter(e)}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(e)}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(e)}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(e)}emitMouseDragStart(e){this.onMouseDragStart&&this.onMouseDragStart(e)}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(e)}emitMouseDropCanceled(e){this.onMouseDropCanceled&&this.onMouseDropCanceled(e)}emitDoubleClick(e){this.onDoubleClick&&this.onDoubleClick(e)}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}}const TT=class extends Ht{constructor(t,i,s,n){super();c(this,"id",TT.ID++);c(this,"_onReconnected",this._register(new Dt));c(this,"onReconnected",this._onReconnected.event);c(this,"treeNodeViewModelMap",new Map);c(this,"treeNodeObservers",new Map);c(this,"treeNodesObservers",new Map);c(this,"treeRoots",new Map);c(this,"_selectTimer",0);c(this,"_root");c(this,"topResource");this.model=t,this.modelService=s,this.canvas=n,this._root=al(Object.create(null)),this.topResource=t.uri.toString(),this.internal_connect(this.topResource,!1),Reflect.set(window,"vm",this)}internal_disconnect(t){const i=this.treeNodeObservers.get(t);Q(i);const s=this.treeNodeViewModelMap.get(t);Q(s);const n=this.treeNodesObservers.get(t);Q(n),n.dispose();for(const[o,a]of i.entries())a.dispose();i.clear(),s.clear(),this.treeNodeObservers.delete(t),this.treeNodeViewModelMap.delete(t),this.treeNodesObservers.delete(t)}internal_connect(t,i=!1){this.treeNodeViewModelMap.set(t,new Map),this.treeNodeObservers.set(t,new Map),this.processNodes(t),t===this.topResource&&(this.updateRootOfDefaultTree(),i&&this._onReconnected.fire())}dispose(){super.dispose(),this.internal_disconnect(this.topResource)}getViewModelNodeOfResourceById(t,i){return this.treeNodeViewModelMap.get(i).get(t)}getViewModelNodeById(t){const i=this.canvas.getScopedModel(t.scope);return this.treeNodeViewModelMap.get(i.uri.toString()).get(t.id)}get root(){return this._root.value||this.updateRootOfDefaultTree(),this._root}updateRootOfDefaultTree(){const t=this.getViewModelNodeOfResourceById(up,this.topResource);Q(t),this._root.value=t}getModel(t){if(t===this.topResource)return this.model;et()}processNodes(t){const i=this.treeNodeViewModelMap.get(t),s=this.getModel(t).yModel,n=EO(s);Q(n);const o=n.values();let a;for(const l of o){const u=$T(l),d=VT(l),f=Yo(l);Q(ao(f));const g=al({id:f,children:[],style:u?u.toJSON():Object.create(null),type:d,attrs:Object.create(null)});d===hi.Text&&(g.content=WT(l)),cp(l)||(a=g),i.set(f,g),this.watchNode(l,t)}a||et(),this.treeRoots.set(t,a);for(const l of i.values())(Fw(l)||WD(l))&&(l.children=this.getChildren(l.id,t));this.watchNodes(n,t)}watchNode(t,i){const s=this.treeNodeViewModelMap.get(i),n=o=>{o.forEach(a=>{const{target:l}=a;a.changes.keys.forEach((u,d)=>{const{action:f,oldValue:g}=u;switch(f){case"update":{if(d==="from")this.updateChildren(g,i),this.updateChildren(l.get(d),i);else if(d==="order")this.updateChildren(cp(l),i);else{const x=Yo(t);if(x){const E=s.get(x);Q(E),d==="id"&&et(),Reflect.set(E,d,l.get(d))}else debugger}break}case"add":{if(Yo(t))debugger;const E=l.parent,P=Yo(E),b=s.get(P);Q(b),Reflect.set(b.style,d,l.get(d));break}case"delete":{if(Yo(t))debugger;const E=l.parent,P=Yo(E),b=s.get(P);Q(b),Reflect.deleteProperty(b.style,d);break}default:et()}})})};t.observeDeep(n),this.treeNodeObservers.get(i).set(Yo(t),nn(()=>{t.unobserveDeep(n)}))}addNode(t,i){const s=this.treeNodeViewModelMap.get(i),n=Yo(t);s.delete(n);const o=$T(t),a=VT(t),l=al({id:n,children:this.getChildren(n,i),style:o?o.toJSON():Object.create(null),type:a,attrs:Object.create(null)});s.set(n,l),a===hi.Text&&(l.content=WT(t)),this.updateChildren(cp(t),i),this.watchNode(t,i)}removeNode(t,i){const s=this.treeNodeViewModelMap.get(i),n=this.treeNodeObservers.get(i),o=Yo(t);if(!s.has(o)){Ue();return}s.delete(o),this.updateChildren(cp(t),i);const a=n.get(o);Q(a),a.dispose(),n.delete(o)}watchNodes(t,i){const s=n=>{const{target:o}=n;n.changes.keys.forEach((a,l)=>{const{action:u,oldValue:d}=a;switch(u){case"delete":{this.removeNode(d,i);break}case"update":break;case"add":this.addNode(o.get(l),i);break;default:et()}})};t.observe(s),this.treeNodesObservers.set(i,nn(()=>{t.unobserve(s)}))}getChildren(t,i){const s=this.treeNodeViewModelMap.get(i),o=this.getModel(i).getChildrenNodesOfId(t).map(a=>{const l=s.get(Yo(a));return Q(l),l});return vA(o)}updateChildren(t,i){const s=this.getViewModelNodeOfResourceById(t,i);Q(s),!Fw(s)&&!WD(s)&&et(),s.children=this.getChildren(t,i)}};let Ix=TT;c(Ix,"ID",1);var Tte=Object.defineProperty,Pte=Object.getOwnPropertyDescriptor,Rte=(r,e,t,i)=>{for(var s=i>1?void 0:i?Pte(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Tte(e,t,s),s},dS=(r,e)=>(t,i)=>e(t,i,r);let gA=class{constructor(r,e,t,i){c(this,"undoRedoSource");this.model=r,this.instantiationService=e,this.canvasesService=t,this.modelService=i,this.undoRedoSource=new Za}canUndo(){return this.model.canUndo()}canRedo(){return this.model.canRedo()}undo(){return this.model.undo()}redo(){return this.model.redo()}add(r){this.modelService.add(r.bind(null,this.model))}checkout(){this.modelService.checkout()}commitAndMerge(r){this.modelService.commitAndMerge(this.undoRedoSource,[],r)}fork(r){this.modelService.fork(this.undoRedoSource,[],r)}transform(r){return this.modelService.transform(this.undoRedoSource,r.bind(null,this.model),[],()=>[])}getVM(){const r=this.canvasesService.listCanvases().find(e=>e.model.uri.toString()===this.model.uri.toString());return r==null?void 0:r.viewModel}};gA=Rte([dS(1,pl),dS(2,pf),dS(3,gf)],gA);var Dte=Object.defineProperty,Cte=Object.getOwnPropertyDescriptor,Ote=(r,e,t,i)=>{for(var s=i>1?void 0:i?Cte(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Dte(e,t,s),s},qh=(r,e)=>(t,i)=>e(t,i,r);class Nte extends Ht{constructor(t){super();c(this,"_pendingReLayout",!0);c(this,"_waiting");this._register(t.onDidChangeContent(()=>{this._pendingReLayout=!0}))}setView(t){this._register(t.layoutManager.onDidLayout(()=>{var i;this._pendingReLayout=!1,(i=this._waiting)==null||i.complete()}))}async maybeWaitForReLayout(){!this._pendingReLayout||(this._waiting||(this._waiting=new gd),await this._waiting)}}class Ite{constructor(e,t,i,s,n){c(this,"model");c(this,"viewModel");c(this,"view");c(this,"mvvm");c(this,"listenersToRemove");this.model=e,this.viewModel=t,this.view=i,this.mvvm=s,this.listenersToRemove=n}dispose(){Zy(this.listenersToRemove),this.view.dispose(),this.viewModel.dispose(),this.mvvm.dispose()}}var pS;let Gy=(pS=class extends Ht{constructor(e,t,i,s,n,o,a){super();c(this,"_contextKeyService");c(this,"_instantiationService");c(this,"_modelData");c(this,"_historyHelper");c(this,"_onDidChangeModel",this._register(new Dt));c(this,"onDidChangeModel",this._onDidChangeModel.event);c(this,"_onDidChangeModelContent",this._register(new Dt));c(this,"onDidChangeModelContent",this._onDidChangeModelContent.event);c(this,"eventFilter");c(this,"id",(Gy.counter++).toString());this._domElement=e,this.modelService=o,this.contextKeyService=a,this._contextKeyService=this._register(a.createScoped(this._domElement));const l=new nk;l.set(_h,this._contextKeyService),this._register(this._instantiationService=t.createChild(l)),this._register(new Fte(this,a,n)),s.addTrackedCanvas(this),i.addCanvas(this),Reflect.set(window,"canvas",this)}get model(){var e;return(e=this._modelData)==null?void 0:e.model}_attachModel(e){if(!e){this._modelData=void 0;return}const t=[];t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o)));const i=new Ix(e,this._instantiationService,this.modelService,this);t.push(e.onWillDispose(()=>this.setModel(void 0)));const s=new Nte(e),n=this._createView(i,s);s.setView(n),n.domNode.setAttribute("data-uri",e.uri.toString()),this._modelData=new Ite(e,i,n,s,t),this._historyHelper=this._instantiationService.createInstance(gA,e)}_createView(e,t){const i=new kte,s=this.passToEventFilter.bind(this);let n;return i.onContextMenu=s,i.onMouseMove=o=>{this.passToEventFilter(o)},i.onMouseLeave=s,i.onMouseEnter=s,i.onMouseDown=s,i.onMouseUp=s,i.onMouseDrag=s,i.onMouseDragStart=s,i.onMouseDrop=s,i.onMouseDropCanceled=s,i.onDoubleClick=s,i.onMouseWheel=s,i.onKeyDown=s,i.onKeyUp=s,i.onMouseDragStart=s,i.onMouseDrag=s,i.onMouseDropCanceled=s,i.onMouseDrop=s,n=this._instantiationService.createInstance(pA,this._domElement,e,t,i),n}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}installEventFilter(e){this.eventFilter=e}passToEventFilter(e){return this.eventFilter?(this.eventFilter.eventFilter(e),e.isAccepted()):!1}get viewModel(){var e;return(e=this._modelData)==null?void 0:e.viewModel}get view(){var e;return(e=this._modelData)==null?void 0:e.view}_detachModel(){var i;if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.view?this._modelData.view.domNode:null;return this.viewModel.internal_disconnect(e.uri.toString()),this.view.internal_disconnect(),(i=this._modelData)==null||i.dispose(),this._modelData=void 0,t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}canUndo(){var e;return Boolean((e=this._historyHelper)==null?void 0:e.canUndo())}canRedo(){var e;return Boolean((e=this._historyHelper)==null?void 0:e.canRedo())}undo(){return this._historyHelper||et(),this._historyHelper.undo()}redo(){return this._historyHelper||et(),this._historyHelper.redo()}add(e){this._historyHelper||et(),this._historyHelper.add(e)}checkout(){this._historyHelper||et(),this._historyHelper.checkout()}commitAndMerge(e){this._historyHelper||et(),this._historyHelper.commitAndMerge(e)}fork(e){this._historyHelper||et(),this._historyHelper.fork(e)}transform(e){return this._historyHelper||et(),this._historyHelper.transform(e)}getScopedModel(e){if(e.EQ(E5))return this.model;debugger;Ue()}focus(){this.view.focus()}isFocused(){return this.view.isFocused()}setModel(e){if(Ti(this._modelData)&&Ti(e)||this._modelData&&this._modelData.model===e)return;const t=this._detachModel();this._attachModel(e);const i={oldModelUrl:t?t.uri:null,newModelUrl:e?e.uri:null};this._onDidChangeModel.fire(i)}updateModel(e){this.viewModel.internal_disconnect(this.model.uri.toString()),this.view.internal_disconnect(),this.model.replaceModel(e),this.viewModel.internal_connect(this.model.uri.toString(),!0),this.view.internal_connect()}},c(pS,"counter",0),pS);Gy=Ote([qh(1,pl),qh(2,pf),qh(3,fO),qh(4,wu),qh(5,gf),qh(6,_h)],Gy);class Fte extends Ht{constructor(e,t,i){super(),$c.hitTestLevel.bindTo(t);const s=$c.isEditingText.bindTo(t);i.onDidChangeTool(n=>{const{next:o}=n;s.set((o==null?void 0:o.id)===Fc)})}}const Zk=an("ICanvasViewsService"),JM=an("workbenchLayoutService");var ZM=(r=>(r.EDITOR_PART="workbench.parts.editor",r.TOOLBAT_PART="workbench.parts.toolbat",r))(ZM||{});const Mte={nodes:{[up]:{id:up,type:hi.Root},div1:{id:"div1",type:hi.Block,style:{width:"300px",height:"auto",marginLeft:"50px",marginTop:"100px",position:"absolute",backgroundColor:"white",paddingTop:"10px",paddingRight:"10px",paddingBottom:"10px",paddingLeft:"10px",borderColor:"#add6ff",borderStyle:"solid",borderWidth:"1px"},from:up,order:"0.5"},title1:{id:"title1",type:hi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"28px",color:"black",lineHeight:"40px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"Title",from:"div1",order:"0.1"},text1:{id:"text1",type:hi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco",from:"div1",order:"0.3"},div2:{id:"div2",type:hi.Block,style:{width:"300px",height:"auto",marginLeft:"550px",marginTop:"100px",position:"absolute",backgroundColor:"white",borderColor:"#b2f2bb",borderStyle:"solid",borderWidth:"1px",paddingTop:"10px",paddingRight:"10px",paddingBottom:"10px",paddingLeft:"10px"},from:up,order:"0.75"},title2:{id:"title2",type:hi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"28px",color:"black",lineHeight:"40px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"\u5343\u5B57\u6587",from:"div2",order:"0.1"},text2:{id:"text2",type:hi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"\u5929\u5730\u7384\u9EC4\uFF0C\u5B87\u5B99\u6D2A\u8352\u3002\u65E5\u6708\u76C8\u6603\uFF0C\u8FB0\u5BBF\u5217\u5F20\u3002\u5BD2\u6765\u6691\u5F80\uFF0C\u79CB\u6536\u51AC\u85CF\u3002\u95F0\u4F59\u6210\u5C81\uFF0C\u5F8B\u5415\u8C03\u9633\u3002\u4E91\u817E\u81F4\u96E8\uFF0C\u9732\u7ED3\u4E3A\u971C\u3002\u91D1\u751F\u4E3D\u6C34\uFF0C\u7389\u51FA\u6606\u5188\u3002\u5251\u53F7\u5DE8\u9619\uFF0C\u73E0\u79F0\u591C\u5149\u3002\u679C\u73CD\u674E\u67F0\uFF0C\u83DC\u91CD\u82A5\u59DC\u3002\u6D77\u54B8\u6CB3\u6DE1\uFF0C\u9CDE\u6F5C\u7FBD\u7FD4\u3002\u9F99\u5E08\u706B\u5E1D\uFF0C\u9E1F\u5B98\u4EBA\u7687\u3002",from:"div2",order:"0.3"}}};class Bte{constructor(e){c(this,"parent");this.id=e}}var Lte=Object.defineProperty,Ute=Object.getOwnPropertyDescriptor,Gte=(r,e,t,i)=>{for(var s=i>1?void 0:i?Ute(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Lte(e,t,s),s},fS=(r,e)=>(t,i)=>e(t,i,r);let mA=class extends Bte{constructor(e,t,i){super(ZM.EDITOR_PART);c(this,"container");c(this,"_isReady",!1);c(this,"whenReadyPromise",new gd);c(this,"whenReady",this.whenReadyPromise.p);c(this,"whenRestoredPromise",new gd);c(this,"whenRestored",this.whenRestoredPromise.p);c(this,"loadingPromise",new gd);this.instantiationService=e,this.modelService=i,this.init()}get isReady(){return this._isReady}async init(){const e=(async()=>{(await f5()).init_icu()})(),t=(async()=>{await x5()})();await Promise.all([t,e]),this.loadingPromise.complete()}create(e){this.parent=e;let t=document.createElement("div");return Object.assign(t.style,{outline:"none",position:"relative"}),this.container=t,e.appendChild(t),this.whenReadyPromise.complete(),this._isReady=!0,t}async restore(){await this.loadingPromise.p,this.container||Ue();const e=this.instantiationService.createInstance(Gy,this.container),t=this.modelService.createModel(Mte);e.setModel(t),e.focus(),this.whenRestoredPromise.complete()}};mA=Gte([fS(0,pl),fS(1,JM),fS(2,gf)],mA);ba(Zk,mA);l1.registerCommandAndKeybindingRule({id:RB,primary:Te.Escape,when:yS.currentToolState.notEqualsTo(Xs.noop),weight:WA.EditorCore,handler(r,e){r.get(wu).switchDefault()}});class Hte extends c1{get id(){return eT}activate(){super.activate()}deactivate(){super.deactivate()}}const eT="tool.select";class zte{constructor(){c(this,"id",eT);c(this,"shortcut",new _f(ph.Primary))}createTool(e){return new Hte(e,Ui.arrow)}}class jte extends Z0{constructor(){super(...arguments);c(this,"startX");c(this,"startY");c(this,"fromTX");c(this,"fromTY")}get id(){return Cd}activate(){super.activate(),this.useCursor(Ui.grab)}activatePrimaryAction(){this.useCursor(Ui.grabbing),this.startX=void 0,this.startY=void 0,this.fromTX=void 0,this.fromTY=void 0}deactivatePrimaryAction(){}deactivate(){super.deactivate()}beginPrimaryAction(t){const i=t.asMouseInputEvent();if(i&&i.type===Jt.MOUSE_DOWN){this.canvas.view.setCursor(Ui.grabbing),this.startX=i.pageX,this.startY=i.pageY;const s=this.canvas.view.mx;this.fromTX=s.tx,this.fromTY=s.ty}}continuePrimaryAction(t){const i=t.asMouseInputEvent();if(i&&i.type===Jt.MOUSE_MOVE){const s=Math.round(i.pageX-this.startX),n=Math.round(i.pageY-this.startY);this.canvas.view.translate(this.fromTX+s,this.fromTY+n)}}endPrimaryAction(t){this.canvas.view.setCursor(Ui.grab)}processEvent(t){if(t.type===Jt.WHEEL){const i=t.asWheelInputEvent();Q(i);const{deltaX:s,deltaY:n}=i,o=this.canvas.view.mx;this.fromTX=o.tx,this.fromTY=o.ty,this.canvas.view.translate(this.fromTX+s/2,this.fromTY+n/2)}}}const Cd="tool.pan";class Vte{constructor(){c(this,"id",Cd);c(this,"shortcut",new _f(ph.Primary))}createTool(e){return new jte(e,Ui.grab)}}function VC(r,e,t,i=s=>s){return r*i(.5-e*(.5-t))}function Wte(r){return[-r[0],-r[1]]}function po(r,e){return[r[0]+e[0],r[1]+e[1]]}function qs(r,e){return[r[0]-e[0],r[1]-e[1]]}function _o(r,e){return[r[0]*e,r[1]*e]}function $te(r,e){return[r[0]/e,r[1]/e]}function op(r){return[r[1],-r[0]]}function WC(r,e){return r[0]*e[0]+r[1]*e[1]}function Kte(r,e){return r[0]===e[0]&&r[1]===e[1]}function Xte(r){return Math.hypot(r[0],r[1])}function Yte(r){return r[0]*r[0]+r[1]*r[1]}function $C(r,e){return Yte(qs(r,e))}function eB(r){return $te(r,Xte(r))}function qte(r,e){return Math.hypot(r[1]-e[1],r[0]-e[0])}function ap(r,e,t){let i=Math.sin(t),s=Math.cos(t),n=r[0]-e[0],o=r[1]-e[1],a=n*s-o*i,l=n*i+o*s;return[a+e[0],l+e[1]]}function xA(r,e,t){return po(r,_o(qs(e,r),t))}function KC(r,e,t){return po(r,_o(e,t))}var{min:Qh,PI:Qte}=Math,XC=.275,lp=Qte+1e-4;function Jte(r,e={}){let{size:t=16,smoothing:i=.5,thinning:s=.5,simulatePressure:n=!0,easing:o=qe=>qe,start:a={},end:l={},last:u=!1}=e,{cap:d=!0,easing:f=qe=>qe*(2-qe)}=a,{cap:g=!0,easing:x=qe=>--qe*qe*qe+1}=l;if(r.length===0||t<=0)return[];let E=r[r.length-1].runningLength,P=a.taper===!1?0:a.taper===!0?Math.max(t,E):a.taper,b=l.taper===!1?0:l.taper===!0?Math.max(t,E):l.taper,R=Math.pow(t*i,2),D=[],C=[],I=r.slice(0,10).reduce((qe,Be)=>{let nt=Be.pressure;if(n){let dt=Qh(1,Be.distance/t),rt=Qh(1,1-dt);nt=Qh(1,qe+(rt-qe)*(dt*XC))}return(qe+nt)/2},r[0].pressure),H=VC(t,s,r[r.length-1].pressure,o),N,V=r[0].vector,O=r[0].point,W=O,q=O,re=W,fe=!1;for(let qe=0;qe<r.length;qe++){let{pressure:Be}=r[qe],{point:nt,vector:dt,distance:rt,runningLength:bt}=r[qe];if(qe<r.length-1&&E-bt<3)continue;if(s){if(n){let ze=Qh(1,rt/t),J=Qh(1,1-ze);Be=Qh(1,I+(J-I)*(ze*XC))}H=VC(t,s,Be,o)}else H=t/2;N===void 0&&(N=H);let Z=bt<P?f(bt/P):1,ne=E-bt<b?x((E-bt)/b):1;H=Math.max(.01,H*Math.min(Z,ne));let se=(qe<r.length-1?r[qe+1]:r[qe]).vector,Ee=qe<r.length-1?WC(dt,se):1,Se=WC(dt,V)<0&&!fe,de=Ee!==null&&Ee<0;if(Se||de){let ze=_o(op(V),H);for(let J=1/13,Le=0;Le<=1;Le+=J)q=ap(qs(nt,ze),nt,lp*Le),D.push(q),re=ap(po(nt,ze),nt,lp*-Le),C.push(re);O=q,W=re,de&&(fe=!0);continue}if(fe=!1,qe===r.length-1){let ze=_o(op(dt),H);D.push(qs(nt,ze)),C.push(po(nt,ze));continue}let Pe=_o(op(xA(se,dt,Ee)),H);q=qs(nt,Pe),(qe<=1||$C(O,q)>R)&&(D.push(q),O=q),re=po(nt,Pe),(qe<=1||$C(W,re)>R)&&(C.push(re),W=re),I=Be,V=dt}let he=r[0].point.slice(0,2),Oe=r.length>1?r[r.length-1].point.slice(0,2):po(r[0].point,[1,1]),He=[],ut=[];if(r.length===1){if(!(P||b)||u){let qe=KC(he,eB(op(qs(he,Oe))),-(N||H)),Be=[];for(let nt=1/13,dt=nt;dt<=1;dt+=nt)Be.push(ap(qe,he,lp*2*dt));return Be}}else{if(!(P||b&&r.length===1))if(d)for(let Be=1/13,nt=Be;nt<=1;nt+=Be){let dt=ap(C[0],he,lp*nt);He.push(dt)}else{let Be=qs(D[0],C[0]),nt=_o(Be,.5),dt=_o(Be,.51);He.push(qs(he,nt),qs(he,dt),po(he,dt),po(he,nt))}let qe=op(Wte(r[r.length-1].vector));if(b||P&&r.length===1)ut.push(Oe);else if(g){let Be=KC(Oe,qe,H);for(let nt=1/29,dt=nt;dt<1;dt+=nt)ut.push(ap(Be,Oe,lp*3*dt))}else ut.push(po(Oe,_o(qe,H)),po(Oe,_o(qe,H*.99)),qs(Oe,_o(qe,H*.99)),qs(Oe,_o(qe,H)))}return D.concat(ut,C.reverse(),He)}function Zte(r,e={}){var t;let{streamline:i=.5,size:s=16,last:n=!1}=e;if(r.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(r[0])?r:r.map(({x,y:E,pressure:P=.5})=>[x,E,P]);if(a.length===2){let x=a[1];a=a.slice(0,-1);for(let E=1;E<5;E++)a.push(xA(a[0],x,E/4))}a.length===1&&(a=[...a,[...po(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],u=!1,d=0,f=l[0],g=a.length-1;for(let x=1;x<a.length;x++){let E=n&&x===g?a[x].slice(0,2):xA(f.point,a[x],o);if(Kte(f.point,E))continue;let P=qte(E,f.point);if(d+=P,x<g&&!u){if(d<s)continue;u=!0}f={point:E,pressure:a[x][2]>=0?a[x][2]:.5,vector:eB(qs(f.point,E)),distance:P,runningLength:d},l.push(f)}return l[0].vector=((t=l[1])==null?void 0:t.vector)||[0,0],l}function ere(r,e={}){return Jte(Zte(r,e),e)}function tre(r){if(!r.length)return"";const e=r.reduce((t,[i,s],n,o)=>{const[a,l]=o[(n+1)%o.length];return t.push(Math.round(i),Math.round(s),Math.round((i+a)/2),Math.round((s+l)/2)),t},["M",...r[0],"Q"]);return e.push("Z"),e.join(" ")}const rre={size:5,thinning:.5,smoothing:1,streamline:.5,easing:r=>r,start:{taper:0,easing:r=>r,cap:!0},end:{taper:100,easing:r=>r,cap:!0}};class ire extends Z0{constructor(){super(...arguments);c(this,"_history",[]);c(this,"_node")}get id(){return Od}handleMouseMove(t){}beginPrimaryAction(t){var o;this._history.length=0;let i=this.canvas.view.document,s=i.createElement(qp.kTagName);Object.assign(s.style,{position:"absolute",top:"0px",left:"0px",display:"block",width:"1px",height:"1px"}),s.setAttribute("fill","#000"),(o=i.body())==null||o.appendChild(s),this._node=s;const n=this.convertToPixelCoord(t.asMouseInputEvent());this._history.push([n.x,n.y,1])}continuePrimaryAction(t){const i=this.convertToPixelCoord(t.asMouseInputEvent());this._history.push([i.x,i.y,1]);const s=ere(this._history,rre),n=tre(s);Q(this._node),this._node.setAttribute("d",n)}endPrimaryAction(t){const i=this.convertToPixelCoord(t.asMouseInputEvent());this._history.push([i.x,i.y,1])}}const Od="tool.brush";class nre{constructor(){c(this,"id",Od);c(this,"shortcut",new _f(ph.Primary))}createTool(e){return new ire(e,Ui.arrow)}}class sre extends Z0{get id(){return Bv}beginPrimaryAction(e){e.asMouseInputEvent(),console.log("stat draw line",performance.now())}continuePrimaryAction(e){console.log("continue draw line",performance.now())}endPrimaryAction(e){console.log("end draw line",performance.now())}}const Bv="tool.line";class ore{constructor(){c(this,"id",Bv);c(this,"shortcut",new _f(ph.Primary))}createTool(e){return new sre(e,Ui.arrow)}}class are extends Z0{get id(){return Lv}beginPrimaryAction(e){e.asMouseInputEvent(),console.log("stat draw line",performance.now())}continuePrimaryAction(e){console.log("continue draw line",performance.now())}endPrimaryAction(e){console.log("end draw line",performance.now())}}const Lv="tool.eraser";class lre{constructor(){c(this,"id",Lv);c(this,"shortcut",new _f(ph.Primary))}createTool(e){return new are(e,Ui.arrow)}}class ure extends Z0{get id(){return Uv}beginPrimaryAction(e){e.asMouseInputEvent(),console.log("stat draw line",performance.now())}continuePrimaryAction(e){console.log("continue draw line",performance.now())}endPrimaryAction(e){console.log("end draw line",performance.now())}}const Uv="tool.rect";class cre{constructor(){c(this,"id",Uv);c(this,"shortcut",new _f(ph.Primary))}createTool(e){return new ure(e,Ui.arrow)}}class hre extends c1{get id(){return Nd}activate(){super.activate(),this.resetCursorStyle()}deactivate(){super.deactivate(),this.canvas.view.setOutlines([])}processEvent(e){const{type:t}=e;t===Jt.MOUSE_ENTER?(this.handleMouseEnter(e.asMouseInputEvent()),e.accept()):t===Jt.MOUSE_LEAVE&&(this.handleMouseLeave(e.asMouseInputEvent()),e.accept())}handleMouseEnter(e){const{node:t}=yo(e.targetPath),i=this.canvas.view.document;if(t===i.html()||t===i.body()){this.canvas.view.setOutlines([]);return}const s=t.GetLayoutObject();if(s.AsLayoutTexes())return;const{box:n}=s,o=n.content_box_size(),a=o.width().toFloat(),l=o.height().toFloat(),u=n.GetBorderBoxOffsetFromRoot(!0),d=u.y().toFloat(),f=u.x().toFloat();this.canvas.view.setOutlines([{top:d,left:f,width:a,height:l}])}handleMouseLeave(e){}}const Nd="tool.hover";class dre{constructor(){c(this,"id",Nd);c(this,"shortcut",new PB)}createTool(e){return new hre(e,Ui.arrow)}}const Gu=Vc.as(Ux);Gu.registerWithShortcut(new zte);Gu.registerWithShortcut(new dre,!0);Gu.registerWithShortcut(new Vte);Gu.registerWithShortcut(new ore);Gu.registerWithShortcut(new nre);Gu.registerWithShortcut(new NK);Gu.registerWithShortcut(new lre);Gu.registerWithShortcut(new cre);function Hu(r,e){l1.registerCommandAndKeybindingRule({id:r,...e,weight:WA.WorkbenchContrib,handler(t){t.get(wu).switchTool(r)}})}Hu(eT,{primary:Te.KEY_S});Hu(Nd,{primary:Te.KEY_H});Hu(Cd,{primary:Te.KEY_P});Hu(Bv,{primary:Te.KEY_L});Hu(Od,{primary:Te.KEY_B});Hu(Fc,{primary:Te.KEY_T});Hu(Lv,{primary:Te.KEY_E});Hu(Uv,{primary:Te.KEY_R});class fre{constructor(e){c(this,"data");c(this,"incoming",new Map);c(this,"outgoing",new Map);this.data=e}}class _re{constructor(e){c(this,"_nodes",new Map);this._hashFn=e}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(this._hashFn(t),s),s.incoming.set(this._hashFn(e),i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new fre(e),this._nodes.set(t,i)),i}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}, (incoming)[${[...i.incoming.keys()].join(", ")}], (outgoing)[${[...i.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const n=this._findCycle(s,t);if(n)return n;t.delete(i)}}insertVertex(e){this.lookupOrInsertNode(e)}topologicalSort(){const e=[],t=new Set,{_hashFn:i}=this;function s(n,o){if(t.has(n))return;const a=i(n.data),l=Array.isArray(o)?o:[];l.push(n),t.add(n),n.outgoing.forEach(u=>{if(l.indexOf(u)!==-1){const d=i(u.data);throw new Error("Circular chain found: "+a+" must be before "+d+" due to a direct order specification, but "+d+" must be before "+a+" based on other specifications.")}s(u,l.slice())}),e.unshift(n.data)}return this._nodes.forEach(n=>s(n)),e}}class YC extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!=null?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}function Jh(r){return!r||!Object.getPrototypeOf(r)?!1:Reflect.has(Object.getPrototypeOf(r).constructor,"__SyncDescriptorBrand")}class tT{constructor(e=new nk,t=!1,i){c(this,"_services");c(this,"_strict");c(this,"_parent");c(this,"_activeInstantiations",new Set);this._services=e,this._strict=t,this._parent=i,this._services.set(pl,this)}createChild(e){return new tT(e,this._strict,this)}invokeFunction(e,...t){const i=vc.traceInvocation(e);let s=!1;try{return e({get:o=>{if(s)throw GB("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){let i,s;return Jh(e)?(i=vc.traceCreation(e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=vc.traceCreation(e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){const s=PT(e).sort((a,l)=>a.index-l.index),n=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(l)}const o=s.length>0?s[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...n)}_setServiceInstance(e,t){if(Jh(this._services.get(e)))this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const i=this._getServiceInstanceOrDescriptor(e);return Jh(i)?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const s=new _re(a=>a.id.toString());let n=0;const o=[{id:e,desc:t,_trace:i}];for(;o.length;){const a=o.pop();if(s.lookupOrInsertNode(a),n++>1e3)throw new YC(s);for(const l of PT(a.desc.ctor)){const u=this._getServiceInstanceOrDescriptor(l.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),Jh(u)){const d={id:l.id,desc:u,_trace:a._trace.branch(l.id,!0)};s.insertEdge(a,d),o.push(d)}}}for(;;){const a=s.roots();if(a.length===0){if(!s.isEmpty())throw new YC(s);break}for(const{data:l}of a){const u=this._getServiceInstanceOrDescriptor(l.id);if(Jh(u)){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}s.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,n){if(Jh(this._services.get(e)))return this._createServiceInstance(t,i,s,n);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],i,s){if(i){const n=new k8(()=>this._createInstance(e,t,s));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];const l=n.value;let u=l[a];return typeof u!="function"||(u=u.bind(l),o[a]=u),u},set(o,a,l){return n.value[a]=l,!0}})}else return this._createInstance(e,t,s)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}get services(){const e=this;return{get(t){return e.invokeFunction(i=>i.get(t))}}}dispose(){}store(e,t){this._services.set(e,t)}}const iu=class{constructor(e,t){c(this,"_start",Date.now());c(this,"_dep",[]);this.type=e,this.name=t}static traceInvocation(e){return iu._None}static traceCreation(e){return iu._None}branch(e,t){const i=new iu(2,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;iu._totals+=e;let t=!1;function i(n,o){const a=[],l=new Array(n+1).join("	");for(const[u,d,f]of o._dep)if(d&&f){t=!0,a.push(`${l}CREATES -> ${u}`);const g=i(n+1,f);g&&a.push(g)}else a.push(`${l}uses -> ${u}`);return a.join(`
`)}const s=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${iu._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(s.join(`
`))}};let vc=iu;c(vc,"_None",new class extends iu{constructor(){super(-1,null)}stop(){}branch(){return this}}),c(vc,"_totals",0);class pre extends Ht{constructor(t){super();c(this,"container",document.createElement("div"));c(this,"editorPart");c(this,"_dimension");c(this,"disposed",!1);c(this,"parts",new Map);c(this,"whenReadyPromise",new gd);c(this,"whenReady",this.whenReadyPromise.p);c(this,"whenRestoredPromise",new gd);c(this,"whenRestored",this.whenRestoredPromise.p);c(this,"restored",!1);this.parent=t}get dimension(){return this._dimension}isRestored(){return this.restored}initLayout(t){this.editorPart=t.get(Zk)}restoreParts(){const t=[],i=[];t.push((async()=>{zd("code/willRestoreEditors"),bn(this.editorPart),await this.editorPart.whenReady,this.editorPart.restore()})()),nl.settled(t).finally(()=>{this.whenReadyPromise.complete(),nl.settled(i).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}getPart(t){return bn(this.parts.get(t))}registerPart(t){this.parts.set(t.id,t)}dispose(){super.dispose(),this.disposed=!0}}const tB="workbench.contributions.kind";class gre{constructor(){c(this,"instantiationService");c(this,"lifecycleService");c(this,"toBeInstantiated",new Map)}registerWorkbenchContribution(e,t=Ts.Starting){if(this.instantiationService&&this.lifecycleService&&this.lifecycleService.phase>=t)this.instantiationService.createInstance(e);else{let i=this.toBeInstantiated.get(t);i||(i=[],this.toBeInstantiated.set(t,i)),i.push(e)}}start(e){const t=this.instantiationService=e.get(pl),i=this.lifecycleService=e.get(g0);[Ts.Starting,Ts.Ready,Ts.Restored,Ts.Eventually].forEach(s=>{this.instantiateByPhase(t,i,s)})}instantiateByPhase(e,t,i){t.phase>=i?this.doInstantiateByPhase(e,i):t.when(i).then(()=>this.doInstantiateByPhase(e,i))}doInstantiateByPhase(e,t){const i=this.toBeInstantiated.get(t);if(i)if(this.toBeInstantiated.delete(t),t!==Ts.Eventually)for(const s of i)this.safeCreateInstance(e,s);else{let n=0;const o=a=>{for(;n<i.length;){const l=i[n++];if(this.safeCreateInstance(e,l),a.timeRemaining()<1){Au(o,3e3);break}}};Au(o,3e3)}}safeCreateInstance(e,t){try{e.createInstance(t)}catch(i){console.error(`Unable to instantiate workbench contribution ${t.name}.`,i)}}}Vc.add(tB,new gre);const rT={instantiationService:"instantiationService"},mre=Lo({__name:"index",setup(r){const e=GZ();return NM(()=>{const t=e0(rT.instantiationService);t||et(),t.invokeFunction(i=>{const s=i.get(Zk);s.create(bn(e.value)),s.whenRestored.then(()=>{document.querySelector(".loader-container").remove()})})}),(t,i)=>(lo(),Ug("div",{ref_key:"container",ref:e,class:"editor"},null,512))}});const xre=["disabled"],jf=Lo({__name:"IconButton",props:{onClick:null,isActive:{type:Boolean},disabled:{type:Boolean}},setup(r){return(e,t)=>(lo(),Ug("button",{class:kv({button_active:r.isActive,button:!0}),onClick:t[0]||(t[0]=(...i)=>r.onClick&&r.onClick(...i)),disabled:r.disabled},[yee(e.$slots,"default")],10,xre))}});const yre=Zr("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},[Zr("path",{stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2",d:"m17.072 28.713 4.245-1.935-4.415-9.701 8.037-.355L7.123 1.287v23.55l5.525-5.826 4.424 9.702Z"})],-1),vre=Lo({__name:"SelectionButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(lo(),Fh(jf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[yre]),_:1},8,["isActive","onClick"]))}}),Ere=Zr("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},[Zr("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.636 16.022c-.19-.723-.38-1.618-.78-2.95-.757-2.49-2.075-4.8-2.723-7.326-.425-1.81 1.12-3.643 3.046-2.969 2.949 1.036 3.868 6.109 4.283 8.678l.152.856c-.203-3.707-.469-6.126 0-9.172.463-2.89 4.888-2.825 5.254.038.189 2.079.19 4.154.19 6.242 0 .437 0 3.082.038 2.797.114-1.256.171-6.07.647-7.498 1.04-3.19 4.893-2.028 5.083.876.157 2.1-.062 4.29-.114 6.394 0 .076-.02.57.038.342.574-1.786.076-6.736 3.187-6.119 1.027.204 2.931 1.59 1.542 6.289-1.96 6.631-4.5 9.498-4.5 16.5h-14c0-5-6.61-8.82-8.5-12.598-.418-.799-.626-1.807-.36-2.53.438-1.123 1.254-1.713 2.568-1.58 2.142.206 3.008 2.032 4.949 3.73Z"})],-1),Sre=Lo({__name:"PanButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(lo(),Fh(jf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[Ere]),_:1},8,["isActive","onClick"]))}}),wre=Zr("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})],-1),Are=Lo({__name:"PencilButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(lo(),Fh(jf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[wre]),_:1},8,["isActive","onClick"]))}}),bre=Zr("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("path",{d:"M3.94993 2.95002L3.94993 4.49998C3.94993 4.74851 3.74845 4.94998 3.49993 4.94998C3.2514 4.94998 3.04993 4.74851 3.04993 4.49998V2.50004C3.04993 2.45246 3.05731 2.40661 3.07099 2.36357C3.12878 2.18175 3.29897 2.05002 3.49993 2.05002H11.4999C11.6553 2.05002 11.7922 2.12872 11.8731 2.24842C11.9216 2.32024 11.9499 2.40682 11.9499 2.50002L11.9499 2.50004V4.49998C11.9499 4.74851 11.7485 4.94998 11.4999 4.94998C11.2514 4.94998 11.0499 4.74851 11.0499 4.49998V2.95002H8.04993V12.05H9.25428C9.50281 12.05 9.70428 12.2515 9.70428 12.5C9.70428 12.7486 9.50281 12.95 9.25428 12.95H5.75428C5.50575 12.95 5.30428 12.7486 5.30428 12.5C5.30428 12.2515 5.50575 12.05 5.75428 12.05H6.94993V2.95002H3.94993Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})],-1),kre=Lo({__name:"TextButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(lo(),Fh(jf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[bre]),_:1},8,["isActive","onClick"]))}}),Tre=r=>($k("data-v-a96802fc"),r=r(),Kk(),r),Pre=Tre(()=>Zr("svg",{class:"svg",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("path",{d:"M15 16H21C22.654 16 24 17.346 24 19C24 20.654 22.654 22 21 22H18V24H21C23.757 24 26 21.757 26 19C26 16.243 23.757 14 21 14H15V11L10 15L15 19V16Z",fill:"#888888"})],-1)),Rre=Lo({__name:"UndoButton",props:{onClick:null,disabled:{type:Boolean}},setup(r){return(e,t)=>(lo(),Fh(jf,{onClick:r.onClick,disabled:r.disabled},{default:Ih(()=>[Pre]),_:1},8,["onClick","disabled"]))}});const Dre=Mv(Rre,[["__scopeId","data-v-a96802fc"]]),Cre=r=>($k("data-v-50b57855"),r=r(),Kk(),r),Ore=Cre(()=>Zr("svg",{class:"svg",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("g",{clipPath:"url(#clip0_18:85)"},[Zr("path",{d:"M15 24H18V22H15C13.346 22 12 20.654 12 19C12 17.346 13.346 16 15 16H21V19L26 15L21 11V14H15C12.243 14 10 16.243 10 19C10 21.757 12.243 24 15 24Z",fill:"#888888"})]),Zr("defs",null,[Zr("clipPath",{id:"clip0_18:85"},[Zr("rect",{width:"36",height:"36",fill:"white"})])])],-1)),Nre=Lo({__name:"RedoButton",props:{onClick:null,disabled:{type:Boolean}},setup(r){return(e,t)=>(lo(),Fh(jf,{onClick:r.onClick,disabled:r.disabled},{default:Ih(()=>[Ore]),_:1},8,["onClick","disabled"]))}});const Ire=Mv(Nre,[["__scopeId","data-v-50b57855"]]),Fre=r=>($k("data-v-8268cff9"),r=r(),Kk(),r),Mre={class:"tools_panel_container"},Bre={class:"tools_panel"},Lre={class:"tools_panel_section"},Ure=Fre(()=>Zr("div",{class:"seperator"},null,-1)),Gre={class:"tools_panel_section"},Hre=Lo({__name:"index",setup(r){const e=e0(rT.instantiationService),t=e.invokeFunction(u=>u.get(wu)),i=e.invokeFunction(u=>u.get(pf)),s=B0({[Nd]:!1,[Cd]:!1,[Od]:!1,[Bv]:!1,[Uv]:!1,[Lv]:!1,[Fc]:!1}),n=Object.create(null);Object.keys(s).forEach(u=>{n[u]=()=>{t.switchTool(u)}}),t.onDidChangeTool(u=>{const{prev:d,next:f}=u;f&&(s[f.id]=!0),d&&(s[d.id]=!1)});const o=B0({canUndo:!1,canRedo:!1}),a=()=>{var u;(u=i.getActiveCanvas())==null||u.undo()},l=()=>{var u;(u=i.getActiveCanvas())==null||u.redo()};return i.onDidActiveCanvasChange(u=>{u.onDidChangeModelContent(d=>{o.canUndo=u.canUndo(),o.canRedo=u.canRedo()})}),(u,d)=>(lo(),Ug("div",Mre,[Zr("div",Bre,[Zr("div",Lre,[Qi(vre,{"is-active":s[os(Nd)],"on-click":os(n)[os(Nd)]},null,8,["is-active","on-click"]),Qi(Sre,{"is-active":s[os(Cd)],"on-click":os(n)[os(Cd)]},null,8,["is-active","on-click"]),Qi(Are,{"is-active":s[os(Od)],"on-click":os(n)[os(Od)]},null,8,["is-active","on-click"]),Qi(kre,{"is-active":s[os(Fc)],"on-click":os(n)[os(Fc)]},null,8,["is-active","on-click"])]),Ure,Zr("div",Gre,[Qi(Dre,{onClick:a,disabled:!o.canUndo},null,8,["disabled"]),Qi(Ire,{onClick:l,disabled:!o.canRedo},null,8,["disabled"])])])]))}});const zre=Mv(Hre,[["__scopeId","data-v-8268cff9"]]),jre=Lo({__name:"index",setup(r){return(e,t)=>(lo(),Ug("div",null,[Qi(mre),Qi(zre)]))}});class Vre extends pre{constructor(t,i,s,n){super(t);c(this,"_onWillShutdown",this._register(new Dt));c(this,"onWillShutdown",this._onWillShutdown.event);c(this,"_onDidShutdown",this._register(new Dt));c(this,"onDidShutdown",this._onDidShutdown.event);this.options=i,this.serviceCollection=s}startup(){try{jB(175);const t=this.initServices(this.serviceCollection);return t.invokeFunction(i=>{const s=i.get(g0);this.initLayout(i),Vc.as(tB).start(i),this.renderWorkbench(t),this.restore(s),s.phase=Ts.Ready}),t}catch(t){throw Hx(t),t}}initServices(t){t.set(JM,this);const i=YB();for(const[n,o]of i)t.set(n,o);return new tT(t)}renderWorkbench(t){this.parent.appendChild(this.container);const i=QM(jre);i.provide(rT.instantiationService,t),i.mount(this.container),this._register(nn(()=>i.unmount()))}restore(t){try{this.restoreParts()}catch(i){Hx(i)}this.whenReady.finally(()=>Promise.race([this.whenRestored]).finally(()=>{t.phase=Ts.Restored,this._register(new ty(()=>{this._register(Au(()=>t.phase=Ts.Eventually,2500))},2500)).schedule();function s(){zd("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}this.isRestored()?s():this.whenRestored.finally(()=>s())}))}}function qC(r,e){switch(e){case Ps.Trace:return r.trace;case Ps.Debug:return r.debug;case Ps.Info:return r.info;case Ps.Warning:return r.warn;case Ps.Error:return r.error;case Ps.Critical:return r.critical;default:throw new Error("Invalid log level")}}class Wre extends A8{constructor(t=QA){super();c(this,"buffer",[]);c(this,"_logger");this.setLevel(t),this._register(this.onDidChangeLogLevel(i=>{this._logger&&this._logger.setLevel(i)}))}set logger(t){this._logger=t;for(const{level:i,args:s}of this.buffer)qC(t,i).apply(t,s);this.buffer=[]}_log(t,...i){this._logger?qC(this._logger,t).apply(this._logger,i):this.getLevel()<=t&&this.buffer.push({level:t,args:i})}trace(t,...i){this._log(Ps.Trace,t,...i)}debug(t,...i){this._log(Ps.Debug,t,...i)}info(t,...i){this._log(Ps.Info,t,...i)}warn(t,...i){this._log(Ps.Warning,t,...i)}error(t,...i){this._log(Ps.Error,t,...i)}critical(t,...i){this._log(Ps.Critical,t,...i)}dispose(){this._logger&&this._logger.dispose()}flush(){this._logger&&this._logger.flush()}}class QC extends Error{constructor(e){super("Missing stores"),this.db=e}}class _c{constructor(e,t){c(this,"database",null);c(this,"pendingTransactions",[]);this.name=t,this.database=e}static async create(e,t,i){const s=await _c.openDatabase(e,t,i);return new _c(s,e)}static async openDatabase(e,t,i){zd(`code/willOpenDatabase/${e}`);try{return await _c.doOpenDatabase(e,t,i)}catch(s){if(s instanceof QC){console.info("Attempting to recreate the IndexedDB once.",e);try{await _c.deleteDatabase(s.db)}catch(n){throw console.error("Error while deleting the IndexedDB",HB(n)),n}return await _c.doOpenDatabase(e,t,i)}throw s}finally{zd(`code/didOpenDatabase/${e}`)}}static doOpenDatabase(e,t,i){return new Promise((s,n)=>{const o=window.indexedDB.open(e,t);o.onerror=()=>n(o.error),o.onsuccess=()=>{const a=o.result;for(const l of i)if(!a.objectStoreNames.contains(l)){console.error(`Error while opening IndexedDB. Could not find '${l}'' object store`),n(new QC(a));return}s(a)},o.onupgradeneeded=()=>{const a=o.result;for(const l of i)a.objectStoreNames.contains(l)||a.createObjectStore(l)}})}static deleteDatabase(e){return new Promise((t,i)=>{e.close();const s=window.indexedDB.deleteDatabase(e.name);s.onerror=n=>i(s.error),s.onsuccess=()=>t()})}hasPendingTransactions(){return this.pendingTransactions.length>0}close(){this.pendingTransactions.length&&this.pendingTransactions.splice(0,this.pendingTransactions.length).forEach(e=>e.abort()),this.database&&this.database.close(),this.database=null}async runInTransaction(e,t,i){if(!this.database)throw new Error(`IndexedDB database '${this.name}' is not opened.`);const s=this.database.transaction(e,t);return this.pendingTransactions.push(s),new Promise((n,o)=>{s.oncomplete=()=>{sB(a)?n(a.map(l=>l.result)):n(a.result)},s.onerror=()=>o(s.error);const a=i(s.objectStore(e))}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(s),1))}async getKeyValues(e,t){if(!this.database)throw new Error(`IndexedDB database '${this.name}' is not opened.`);const i=this.database.transaction(e,"readonly");return this.pendingTransactions.push(i),new Promise(s=>{const n=new Map,a=i.objectStore(e).openCursor();if(!a)return s(n);a.onsuccess=()=>{a.result?(t(a.result.value)&&n.set(a.result.key.toString(),a.result.value),a.result.continue()):s(n)};const l=u=>{console.error(`IndexedDB getKeyValues(): ${Zx(u,!0)}`),s(n)};a.onerror=()=>l(a.error),i.onerror=()=>l(i.error)}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(i),1))}}var $re=Object.defineProperty,Kre=Object.getOwnPropertyDescriptor,Xre=(r,e,t,i)=>{for(var s=i>1?void 0:i?Kre(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&$re(e,t,s),s},Yre=(r,e)=>(t,i)=>e(t,i,r),gS;let Hy=(gS=class extends rx{constructor(e,t){super({flushInterval:Hy.BROWSER_DEFAULT_FLUSH_INTERVAL});c(this,"globalStorage");c(this,"workspaceStorage");c(this,"globalStorageDatabase");c(this,"workspaceStorageDatabase");this.payload=e,this.logService=t}get hasPendingUpdate(){var e,t;return Boolean(((e=this.globalStorageDatabase)==null?void 0:e.hasPendingUpdate)||((t=this.workspaceStorageDatabase)==null?void 0:t.hasPendingUpdate))}getId(e){return e===Qs.GLOBAL?"global":this.payload.id}async doInitialize(){const[e,t]=await nl.settled([pc.create({id:this.getId(Qs.WORKSPACE)},this.logService),pc.create({id:this.getId(Qs.GLOBAL),broadcastChanges:!0},this.logService)]);this.workspaceStorageDatabase=this._register(e),this.workspaceStorage=this._register(new Gp(this.workspaceStorageDatabase)),this._register(this.workspaceStorage.onDidChangeStorage(n=>this.emitDidChangeValue(Qs.WORKSPACE,n))),this.globalStorageDatabase=this._register(t),this.globalStorage=this._register(new Gp(this.globalStorageDatabase)),this._register(this.globalStorage.onDidChangeStorage(n=>this.emitDidChangeValue(Qs.GLOBAL,n))),await nl.settled([this.workspaceStorage.init(),this.globalStorage.init()]);const i=this.globalStorage.getBoolean(ic);i===void 0?this.globalStorage.set(ic,!0):i&&this.globalStorage.set(ic,!1);const s=this.workspaceStorage.getBoolean(ic);s===void 0?this.workspaceStorage.set(ic,!0):s&&this.workspaceStorage.set(ic,!1)}getStorage(e){return e===Qs.GLOBAL?this.globalStorage:this.workspaceStorage}getLogDetails(e){return this.getId(e)}async migrate(e){throw new Error("Migrating storage is currently unsupported in Web")}shouldFlushWhenIdle(){return document.hasFocus()&&!this.hasPendingUpdate}close(){var e,t;Zb&&((e=this.globalStorageDatabase)==null||e.close(),(t=this.workspaceStorageDatabase)==null||t.close()),this.dispose()}async clear(){var e,t,i,s,n;for(const o of[Qs.GLOBAL,Qs.WORKSPACE]){for(const a of[ry.USER,ry.MACHINE])for(const l of this.keys(o,a))this.remove(l,o);await((e=this.getStorage(o))==null?void 0:e.whenFlushed())}await nl.settled([(i=(t=this.globalStorageDatabase)==null?void 0:t.clear())!=null?i:Promise.resolve(),(n=(s=this.workspaceStorageDatabase)==null?void 0:s.clear())!=null?n:Promise.resolve()])}},c(gS,"BROWSER_DEFAULT_FLUSH_INTERVAL",5*1e3),gS);Hy=Xre([Yre(1,J0)],Hy);class qre extends I8{constructor(){super(...arguments);c(this,"hasPendingUpdate",!1)}async clear(){(await this.getItems()).clear()}dispose(){}}const Ya=class extends Ht{constructor(t,i){super();c(this,"_onDidChangeItemsExternal",this._register(new Dt));c(this,"onDidChangeItemsExternal",this._onDidChangeItemsExternal.event);c(this,"broadcastChannel");c(this,"pendingUpdate");c(this,"name");c(this,"whenConnected");this.logService=i,this.name=`${Ya.STORAGE_DATABASE_PREFIX}${t.id}`,this.broadcastChannel=t.broadcastChanges&&"BroadcastChannel"in window?new BroadcastChannel(Ya.STORAGE_BROADCAST_CHANNEL):void 0,this.whenConnected=this.connect(),this.registerListeners()}static async create(t,i){try{const s=new Ya(t,i);return await s.whenConnected,s}catch(s){return i.error(`[IndexedDB Storage ${t.id}] create(): ${Zx(s,!0)}`),new qre}}get hasPendingUpdate(){return!!this.pendingUpdate}registerListeners(){if(this.broadcastChannel){const t=i=>{N8(i.data)&&this._onDidChangeItemsExternal.fire(i.data)};this.broadcastChannel.addEventListener("message",t),this._register(nn(()=>{var i,s;(i=this.broadcastChannel)==null||i.removeEventListener("message",t),(s=this.broadcastChannel)==null||s.close()}))}}async connect(){try{return await _c.create(this.name,void 0,[Ya.STORAGE_OBJECT_STORE])}catch(t){throw this.logService.error(`[IndexedDB Storage ${this.name}] connect() error: ${Zx(t)}`),t}}async getItems(){const t=await this.whenConnected;function i(s){return typeof s=="string"}return t.getKeyValues(Ya.STORAGE_OBJECT_STORE,i)}async updateItems(t){let i=!1;this.pendingUpdate=this.doUpdateItems(t);try{i=await this.pendingUpdate}finally{this.pendingUpdate=void 0}if(this.broadcastChannel&&i){const s={changed:t.insert,deleted:t.delete};this.broadcastChannel.postMessage(s)}}async doUpdateItems(t){const i=t.insert,s=t.delete;return!i&&!s||(i==null?void 0:i.size)===0&&(s==null?void 0:s.size)===0?!1:(await(await this.whenConnected).runInTransaction(Ya.STORAGE_OBJECT_STORE,"readwrite",o=>{const a=[];if(i)for(const[l,u]of i)a.push(o.put(u,l));if(s)for(const l of s)a.push(o.delete(l));return a}),!0)}async close(){const t=await this.whenConnected;return await this.pendingUpdate,t.close()}async clear(){await(await this.whenConnected).runInTransaction(Ya.STORAGE_OBJECT_STORE,"readwrite",i=>i.clear())}};let pc=Ya;c(pc,"STORAGE_DATABASE_PREFIX","vscode-web-state-db-"),c(pc,"STORAGE_OBJECT_STORE","ItemTable"),c(pc,"STORAGE_BROADCAST_CHANNEL","vscode.web.state.changes");class jc{constructor(e={},t=[],i=[]){c(this,"isFrozen",!1);this._contents=e,this._keys=t,this._overrides=i}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?wP(this.contents,e):this.contents}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?wP(i,e):i:void 0}getKeysForOverrideIdentifier(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.keys;return[]}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const s of lB([...Object.keys(this.contents),...Object.keys(t)])){let n=this.contents[s];const o=t[s];o&&(typeof n=="object"&&typeof o=="object"?(n=sa(n),this.mergeContents(n,o)):n=o),i[s]=n}return new jc(i,this.keys,this.overrides)}merge(...e){const t=sa(this.contents),i=sa(this.overrides),s=[...this.keys];for(const n of e){this.mergeContents(t,n.contents);for(const o of n.overrides){const[a]=i.filter(l=>tO(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):i.push(sa(o))}for(const o of n.keys)s.indexOf(o)===-1&&s.push(o)}return new jc(t,s,i)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Id(e[i])&&Id(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=sa(t[i])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?mL(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}setValue(e,t){this.addKey(e),XA(this.contents,e,t,i=>{throw new Error(i)})}removeValue(e){this.removeKey(e)&&n8(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)e.indexOf(this.keys[i])===0&&(t=i);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class Qre{constructor(e,t=new jc,i=new jc,s=!0){c(this,"_workspaceConsolidatedConfiguration",null);this._defaultConfiguration=e,this._workspaceConfiguration=t,this._memoryConfiguration=i,this._freeze=s}getValue(e){return this.getConsolidateConfigurationModel().getValue(e)}updateValue(e,t){const i=this._memoryConfiguration;t===void 0?i.removeValue(e):i.setValue(e,t)}inspect(e){return{value:this.getConsolidateConfigurationModel().getValue(e)}}get defaults(){return this._defaultConfiguration}getConsolidateConfigurationModel(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys}}}static parseConfigurationModel(e){return new jc(e.contents,e.keys,e.overrides).freeze()}}class Jre extends jc{constructor(){const e=o8(),t=s8(),i=[];for(const s of Object.keys(e))YA.test(s)&&i.push({identifiers:[l8(s).trim()],keys:Object.keys(e[s]),contents:i8(e[s],n=>console.error(`Conflict in default settings file: ${n}`))});super(e,t,i)}}class Zre extends Ht{constructor(){super();c(this,"_onDidChangeConfiguration",this._register(new Dt));c(this,"onDidChangeConfiguration",this._onDidChangeConfiguration.event);c(this,"configuration");this.configuration=new Qre(new Jre)}getValue(t){const i=typeof t=="string"?t:void 0;return this.configuration.getValue(i)}async updateValue(t,i){const s=this.deriveConfigurationTarget(t,i);return s?this.writeConfigurationValue(t,i,s):Promise.resolve()}inspect(t){return this.configuration.inspect(t)}deriveConfigurationTarget(t,i){if(i===void 0)return;const s=this.inspect(t);if(!Np(i,s.value))return Lp.USER}writeConfigurationValue(t,i,s){if(s===Lp.DEFAULT)return Promise.reject(new Error("Invalid configuration target"));if(s===Lp.MEMORY)return this.configuration.updateValue(t,i),Promise.resolve();throw new Error("500")}}class eie extends Ht{constructor(t,i){super();c(this,"onWillShutdownDisposables",this._register(new pa));this.domElement=t,this.configuration=i}async open(){const[t]=await Promise.all([this.initServices(),Q8()]),i=new Vre(this.domElement,void 0,t.serviceCollection,t.logService);this.registerListeners(i);const s=i.startup(),n=s.invokeFunction(o=>o.get(g0));return n.when(Ts.Restored).then(()=>{n.phase=Ts.ExtensionActivated}),s.invokeFunction(o=>{const a=o.get(g0);return{shutdown:()=>a.shutdown()}})}registerListeners(t){this._register(t.onWillShutdown(()=>this.onWillShutdownDisposables.clear())),this._register(t.onDidShutdown(()=>this.dispose()))}async initServices(){const t=new nk,i=this.resolveWorkspaceInitializationPayload(),s=new Zre;t.set(aN,s);const n=new Wre(QA);return t.set(J0,n),await this.createStorageService(i,n).then(o=>(t.set(JA,o),o)),{serviceCollection:t,logService:n}}async createStorageService(t,i){const s=new Hy(t,i);try{return await s.initialize(),this.onWillShutdownDisposables.add(nn(()=>s.close())),s}catch(n){return Hx(n),oB(n),i.error(n),s}}resolveWorkspaceInitializationPayload(){return{id:"empty-window"}}}let JC=!1;const ZC=new ey;function tie(r,e){if(zd("code/didLoadWorkbenchMain"),JC)throw new Error("Unable to create the VSCode workbench more than once.");JC=!0;let t;return new eie(r,e).open().then(i=>{t=i,ZC.open(i)}),nn(()=>{t?t.shutdown():ZC.wait().then(i=>i.shutdown())})}tie(document.body,{});
