var nB=Object.defineProperty;var sB=(r,e,t)=>e in r?nB(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var u=(r,e,t)=>(sB(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const Tp=0,nn=1,Pp=2;function _i(r,...e){console.log(...e)}function Ec(r,...e){console.log(...e)}function oB(r,e,...t){e&&console.log(t)}function et(...r){throw r.length&&console.error(...r),new Error("not reached")}function ze(...r){throw r.length&&console.error(...r),new Error("not implemented")}function Mx(r){return typeof r>"u"}function Ti(r){return Mx(r)||r===null}const uo=r=>typeof r=="string",Bx=r=>typeof r=="number",AA=r=>typeof r=="function",Fd=r=>r!==null&&typeof r=="object",aB=Array.isArray;function nu(r){return Mx(r)||r===null}function Tn(r){if(nu(r))throw new Error("Assertion Failed: argument is undefined or null");return r}function jn(r){if(nu(r))throw new Error("Assertion Failed: argument is undefined or null")}function lB(r){if(!(r instanceof Error))throw r}function Rp(r){return r===null?void 0:r}function uB(r,e){let t=r.length;if(t===0)return-1;for(let i=0;i<t;i++)if(e(r[i]))return i;return-1}function bA(r){return r.filter(e=>!!e)}function cB(r,e){if(!e)return r.filter((i,s)=>r.indexOf(i)===s);const t=Object.create(null);return r.filter(i=>{const s=e(i);return t[s]?!1:(t[s]=!0,!0)})}function iO(r,e,t=(i,s)=>i===s){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let i=0,s=r.length;i<s;i++)if(!t(r[i],e[i]))return!1;return!0}function Qs(r,e=0){return r[r.length-(1+e)]}function hB(r,e){return r.push(e),()=>dB(r,e)}function dB(r,e){const t=r.indexOf(e);if(t>-1)return r.splice(t,1),e}let s0;const lE="__$$diMap";if(Reflect.has(globalThis,lE))s0=Reflect.get(globalThis,lE);else{const r=new Map;s0=r,Reflect.set(globalThis,lE,r)}let Dp;const uE="__$$idMap";if(Reflect.has(globalThis,uE))Dp=Reflect.get(globalThis,uE);else{const r=new Map;Dp=r,Reflect.set(globalThis,uE,r)}function NT(r){const e=r.name;return s0.get(e)||[]}const pl=ln("instantiationService");function fB(r,e,t,i){const s=e.name,n=s0.get(s);Ti(n)?s0.set(s,[{id:r,index:t,optional:i}]):uB(n,a=>a.id.toString()===r.toString())===-1&&n.push({id:r,index:t,optional:i})}function ln(r){if(Dp.has(r))return Dp.get(r);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");fB(e,t,s,!1)};return e.toString=function(){return r},Reflect.set(e,"__brand",r),Dp.set(r,e),e}ln("IGenericRegistry");class _B{constructor(){u(this,"map",new Map);u(this,"aliases",new Map)}add(e){const t=e.id;this.map.has(t)&&(_i(nn,"DUPLICATED"),ze()),this.map.set(t,e)}remove(e){this.map.delete(e)}has(e){let t=this.map.has(e);if(!t){let i=this.aliases.get(e);t=!!i&&this.map.has(i)}return t}value(e){let t=this.map.get(e);if(!t){let i=this.aliases.get(e);i&&(t=this.map.get(i))}return t}addAlias(e,t){this.map.has(e)&&ze(),this.aliases.set(e,t)}removeAlias(e){this.aliases.delete(e)}values(){return Array.from(this.map.values())}}const Hm="en";let Lx=!1,Ux=!1,jm=!1,kA=!1,nO=!1,Zg,Vm=Hm,pB,ql;const wi=typeof self=="object"?self:typeof global=="object"?global:{};let hi;typeof wi.vscode<"u"&&typeof wi.vscode.process<"u"?hi=wi.vscode.process:typeof process<"u"&&(hi=process);var rO;const gB=typeof((rO=hi==null?void 0:hi.versions)==null?void 0:rO.electron)=="string",sO=gB&&(hi==null?void 0:hi.type)==="renderer";sO&&(hi==null||hi.sandboxed);if(typeof navigator=="object"&&!sO)ql=navigator.userAgent,Lx=ql.indexOf("Windows")>=0,Ux=ql.indexOf("Macintosh")>=0,nO=(ql.indexOf("Macintosh")>=0||ql.indexOf("iPad")>=0||ql.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,jm=ql.indexOf("Linux")>=0,kA=!0,Zg=navigator.language,Vm=Zg;else if(typeof hi=="object"){Lx=hi.platform==="win32",Ux=hi.platform==="darwin",jm=hi.platform==="linux",jm&&!!hi.env.SNAP&&hi.env.SNAP_REVISION,hi.env.CI||hi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Zg=Hm,Vm=Hm;const r=hi.env.VSCODE_NLS_CONFIG;if(r)try{const e=JSON.parse(r),t=e.availableLanguages["*"];Zg=e.locale,Vm=t||Hm,pB=e._translationsConfigFile}catch{}}else console.error("Unable to resolve platform.");const j0=Lx,V0=Ux,mB=jm,oO=kA;kA&&wi.importScripts;const Sa=ql,jl=Vm;var IT;(r=>{function e(){return jl}r.value=e;function t(){return jl.length===2?jl==="en":jl.length>=3?jl[0]==="e"&&jl[1]==="n"&&jl[2]==="-":!1}r.isDefaultVariant=t;function i(){return jl==="en"}r.isDefault=i})(IT||(IT={}));(()=>{if(typeof wi.postMessage=="function"&&!wi.importScripts){const r=[];wi.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,s=r.length;i<s;i++){const n=r[i];if(n.id===t.data.vscodeScheduleAsyncWork){r.splice(i,1),n.callback();return}}});let e=0;return t=>{const i=++e;r.push({id:i,callback:t}),wi.postMessage({vscodeScheduleAsyncWork:i},"*")}}return r=>setTimeout(r)})();var yS=(r=>(r[r.Windows=1]="Windows",r[r.Macintosh=2]="Macintosh",r[r.Linux=3]="Linux",r))(yS||{});const xB=Ux||nO?2:Lx?1:3,aO=!!(Sa&&Sa.indexOf("Chrome")>=0),yB=!!(Sa&&Sa.indexOf("Firefox")>=0),vB=!!(!aO&&Sa&&Sa.indexOf("Safari")>=0),EB=!!(Sa&&Sa.indexOf("Edg/")>=0);Sa&&Sa.indexOf("Android")>=0;var wt=(r=>(r[r.Null=0]="Null",r[r.Backspace=8]="Backspace",r[r.Tab=9]="Tab",r[r.LineFeed=10]="LineFeed",r[r.CarriageReturn=13]="CarriageReturn",r[r.Space=32]="Space",r[r.ExclamationMark=33]="ExclamationMark",r[r.DoubleQuote=34]="DoubleQuote",r[r.Hash=35]="Hash",r[r.DollarSign=36]="DollarSign",r[r.PercentSign=37]="PercentSign",r[r.Ampersand=38]="Ampersand",r[r.SingleQuote=39]="SingleQuote",r[r.OpenParen=40]="OpenParen",r[r.CloseParen=41]="CloseParen",r[r.Asterisk=42]="Asterisk",r[r.Plus=43]="Plus",r[r.Comma=44]="Comma",r[r.Dash=45]="Dash",r[r.Period=46]="Period",r[r.Slash=47]="Slash",r[r.Digit0=48]="Digit0",r[r.Digit1=49]="Digit1",r[r.Digit2=50]="Digit2",r[r.Digit3=51]="Digit3",r[r.Digit4=52]="Digit4",r[r.Digit5=53]="Digit5",r[r.Digit6=54]="Digit6",r[r.Digit7=55]="Digit7",r[r.Digit8=56]="Digit8",r[r.Digit9=57]="Digit9",r[r.Colon=58]="Colon",r[r.Semicolon=59]="Semicolon",r[r.LessThan=60]="LessThan",r[r.Equals=61]="Equals",r[r.GreaterThan=62]="GreaterThan",r[r.QuestionMark=63]="QuestionMark",r[r.AtSign=64]="AtSign",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.OpenSquareBracket=91]="OpenSquareBracket",r[r.Backslash=92]="Backslash",r[r.CloseSquareBracket=93]="CloseSquareBracket",r[r.Caret=94]="Caret",r[r.Underline=95]="Underline",r[r.BackTick=96]="BackTick",r[r.a=97]="a",r[r.b=98]="b",r[r.c=99]="c",r[r.d=100]="d",r[r.e=101]="e",r[r.f=102]="f",r[r.g=103]="g",r[r.h=104]="h",r[r.i=105]="i",r[r.j=106]="j",r[r.k=107]="k",r[r.l=108]="l",r[r.m=109]="m",r[r.n=110]="n",r[r.o=111]="o",r[r.p=112]="p",r[r.q=113]="q",r[r.r=114]="r",r[r.s=115]="s",r[r.t=116]="t",r[r.u=117]="u",r[r.v=118]="v",r[r.w=119]="w",r[r.x=120]="x",r[r.y=121]="y",r[r.z=122]="z",r[r.OpenCurlyBrace=123]="OpenCurlyBrace",r[r.Pipe=124]="Pipe",r[r.CloseCurlyBrace=125]="CloseCurlyBrace",r[r.Tilde=126]="Tilde",r[r.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",r[r.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",r[r.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",r[r.U_Combining_Tilde=771]="U_Combining_Tilde",r[r.U_Combining_Macron=772]="U_Combining_Macron",r[r.U_Combining_Overline=773]="U_Combining_Overline",r[r.U_Combining_Breve=774]="U_Combining_Breve",r[r.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",r[r.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",r[r.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",r[r.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",r[r.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",r[r.U_Combining_Caron=780]="U_Combining_Caron",r[r.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",r[r.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",r[r.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",r[r.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",r[r.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",r[r.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",r[r.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",r[r.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",r[r.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",r[r.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",r[r.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",r[r.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",r[r.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",r[r.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",r[r.U_Combining_Horn=795]="U_Combining_Horn",r[r.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",r[r.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",r[r.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",r[r.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",r[r.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",r[r.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",r[r.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",r[r.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",r[r.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",r[r.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",r[r.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",r[r.U_Combining_Cedilla=807]="U_Combining_Cedilla",r[r.U_Combining_Ogonek=808]="U_Combining_Ogonek",r[r.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",r[r.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",r[r.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",r[r.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",r[r.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",r[r.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",r[r.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",r[r.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",r[r.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",r[r.U_Combining_Low_Line=818]="U_Combining_Low_Line",r[r.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",r[r.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",r[r.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",r[r.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",r[r.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",r[r.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",r[r.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",r[r.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",r[r.U_Combining_Square_Below=827]="U_Combining_Square_Below",r[r.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",r[r.U_Combining_X_Above=829]="U_Combining_X_Above",r[r.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",r[r.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",r[r.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",r[r.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",r[r.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",r[r.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",r[r.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",r[r.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",r[r.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",r[r.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",r[r.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",r[r.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",r[r.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",r[r.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",r[r.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",r[r.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",r[r.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",r[r.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",r[r.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",r[r.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",r[r.U_Combining_Fermata=850]="U_Combining_Fermata",r[r.U_Combining_X_Below=851]="U_Combining_X_Below",r[r.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",r[r.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",r[r.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",r[r.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",r[r.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",r[r.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",r[r.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",r[r.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",r[r.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",r[r.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",r[r.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",r[r.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",r[r.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",r[r.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",r[r.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",r[r.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",r[r.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",r[r.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",r[r.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",r[r.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",r[r.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",r[r.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",r[r.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",r[r.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",r[r.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",r[r.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",r[r.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",r[r.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",r[r.LINE_SEPARATOR=8232]="LINE_SEPARATOR",r[r.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",r[r.NEXT_LINE=133]="NEXT_LINE",r[r.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",r[r.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",r[r.U_DIAERESIS=168]="U_DIAERESIS",r[r.U_MACRON=175]="U_MACRON",r[r.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",r[r.U_CEDILLA=184]="U_CEDILLA",r[r.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",r[r.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",r[r.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",r[r.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",r[r.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",r[r.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",r[r.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",r[r.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",r[r.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",r[r.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",r[r.U_BREVE=728]="U_BREVE",r[r.U_DOT_ABOVE=729]="U_DOT_ABOVE",r[r.U_RING_ABOVE=730]="U_RING_ABOVE",r[r.U_OGONEK=731]="U_OGONEK",r[r.U_SMALL_TILDE=732]="U_SMALL_TILDE",r[r.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",r[r.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",r[r.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",r[r.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",r[r.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",r[r.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",r[r.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",r[r.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",r[r.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",r[r.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",r[r.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",r[r.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",r[r.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",r[r.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",r[r.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",r[r.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",r[r.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",r[r.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",r[r.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",r[r.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",r[r.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",r[r.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",r[r.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",r[r.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",r[r.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",r[r.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",r[r.U_GREEK_TONOS=900]="U_GREEK_TONOS",r[r.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",r[r.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",r[r.U_GREEK_PSILI=8127]="U_GREEK_PSILI",r[r.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",r[r.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",r[r.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",r[r.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",r[r.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",r[r.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",r[r.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",r[r.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",r[r.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",r[r.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",r[r.U_GREEK_VARIA=8175]="U_GREEK_VARIA",r[r.U_GREEK_OXIA=8189]="U_GREEK_OXIA",r[r.U_GREEK_DASIA=8190]="U_GREEK_DASIA",r[r.U_OVERLINE=8254]="U_OVERLINE",r[r.UTF8_BOM=65279]="UTF8_BOM",r))(wt||{});function lO(r,e,t=0,i=r.length,s=0,n=e.length){for(;t<i&&s<n;t++,s++){const l=r.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=n-s;return o<a?-1:o>a?1:0}function SB(r,e,t=0,i=r.length,s=0,n=e.length){for(;t<i&&s<n;t++,s++){const l=r.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;const d=l-c;if(!(d===32&&MT(c))&&!(d===-32&&MT(l)))return FT(l)&&FT(c)?d:lO(r.toLowerCase(),e.toLowerCase(),t,i,s,n)}const o=i-t,a=n-s;return o<a?-1:o>a?1:0}function FT(r){return r>=wt.a&&r<=wt.z}function MT(r){return r>=wt.A&&r<=wt.Z}function wB(r){return r>=55296&&r<=56319}function ut(r,e){return r.toLowerCase()===e.toLowerCase()}function BT(r,e){let t,i=Math.min(r.length,e.length);for(t=0;t<i;t++)if(r.charCodeAt(t)!==e.charCodeAt(t))return t;return i}function LT(r,e){let t,i=Math.min(r.length,e.length);const s=r.length-1,n=e.length-1;for(t=0;t<i;t++)if(r.charCodeAt(s-t)!==e.charCodeAt(n-t))return t;return i}const Ri=new Map;Ri.set("false",!1);Ri.set("true",!0);Ri.set("isMac",V0);Ri.set("isLinux",mB);Ri.set("isWindows",j0);Ri.set("isWeb",oO);Ri.set("isMacNative",V0&&!oO);Ri.set("isEdge",EB);Ri.set("isFirefox",yB);Ri.set("isChrome",aO);Ri.set("isSafari",vB);var vS=(r=>(r[r.False=0]="False",r[r.True=1]="True",r[r.Defined=2]="Defined",r[r.Not=3]="Not",r[r.Equals=4]="Equals",r[r.NotEquals=5]="NotEquals",r[r.And=6]="And",r[r.Regex=7]="Regex",r[r.NotRegex=8]="NotRegex",r[r.Or=9]="Or",r[r.In=10]="In",r[r.NotIn=11]="NotIn",r[r.Greater=12]="Greater",r[r.GreaterEquals=13]="GreaterEquals",r[r.Smaller=14]="Smaller",r[r.SmallerEquals=15]="SmallerEquals",r))(vS||{});const lT=class{constructor(){u(this,"type",0)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return to.INSTANCE}};let eo=lT;u(eo,"INSTANCE",new lT);const uT=class{constructor(){u(this,"type",1)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return eo.INSTANCE}};let to=uT;u(to,"INSTANCE",new uT);class _f{constructor(e,t){u(this,"type",2);this.key=e,this.negated=t}static create(e,t=null){const i=Ri.get(e);return typeof i=="boolean"?i?to.INSTANCE:eo.INSTANCE:new _f(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:uO(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ri.get(this.key);return typeof e=="boolean"?e?to.INSTANCE:eo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=W0.create(this.key,this)),this.negated}}class Jy{constructor(e,t,i){u(this,"type",4);this.key=e,this.value=t,this.negated=i}static create(e,t,i=null){if(typeof t=="boolean")return t?_f.create(e,i):W0.create(e,i);const s=Ri.get(e);return typeof s=="boolean"?t===(s?"true":"false")?to.INSTANCE:eo.INSTANCE:new Jy(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:cO(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ri.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?to.INSTANCE:eo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Zy.create(this.key,this.value,this)),this.negated}}class Zy{constructor(e,t,i){u(this,"type",5);this.key=e,this.value=t,this.negated=i}static create(e,t,i=null){if(typeof t=="boolean")return t?W0.create(e,i):_f.create(e,i);const s=Ri.get(e);return typeof s=="boolean"?t===(s?"true":"false")?eo.INSTANCE:to.INSTANCE:new Zy(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:cO(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ri.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?eo.INSTANCE:to.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Jy.create(this.key,this.value,this)),this.negated}}class W0{constructor(e,t){u(this,"type",3);this.key=e,this.negated=t}static create(e,t=null){const i=Ri.get(e);return typeof i=="boolean"?i?eo.INSTANCE:to.INSTANCE:new W0(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:uO(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ri.get(this.key);return typeof e=="boolean"?e?eo.INSTANCE:to.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=_f.create(this.key,this)),this.negated}}const r0=class extends _f{constructor(t,i,s){super(t,null);u(this,"_defaultValue");this._defaultValue=i,typeof s=="object"?r0._info.push({...s,key:t}):s!==!0&&r0._info.push({key:t,description:s,type:i!=null?typeof i:void 0})}static all(){return r0._info.values()}bindTo(t){return t.createKey(this.key,this._defaultValue)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Jy.create(this.key,t)}notEqualsTo(t){return Zy.create(this.key,t)}};let _d=r0;u(_d,"_info",[]);const _h=ln("contextKeyService"),AB="setContext";function uO(r,e){return r<e?-1:r>e?1:0}function cO(r,e,t,i){return r<t?-1:r>t?1:e<i?-1:e>i?1:0}let UT=!1,i_=null;function bB(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&(e.protocol!==t.protocol||e.hostname!==t.hostname||e.port!==t.port))return UT=!0,null}catch{return UT=!0,null}return r.parent}function kB(r=window){if(!i_){i_=[];let e=r,t;do t=bB(e),t?i_.push({window:e,iframeElement:e.frameElement||null}):i_.push({window:e,iframeElement:null}),e=t;while(e)}return i_.slice(0)}function TB(r,e){if(!e||r===e)return{top:0,left:0};let t=0,i=0,s=kB(r);for(const n of s){if(t+=n.window.scrollY,i+=n.window.scrollX,n.window===e||!n.iframeElement)break;let o=n.iframeElement.getBoundingClientRect();t+=o.top,i+=o.left}return{top:t,left:i}}class hO{constructor(e){u(this,"browserEvent");u(this,"leftButton");u(this,"middleButton");u(this,"rightButton");u(this,"buttons");u(this,"target");u(this,"detail");u(this,"posx");u(this,"posy");u(this,"ctrlKey");u(this,"shiftKey");u(this,"altKey");u(this,"metaKey");u(this,"timestamp");this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=TB(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}const ph={no:0,Primary:1,Secondary:1<<1,Auxiliary:1<<2,Fourth:1<<3,Fifth:1<<4},PB=ph.Fifth;function RB(r){let e=new Set;for(let t=Math.log2(PB);t>=0;t--){let i=1<<t;r&i&&e.add(i)}return e}const Gx="workbench.contributions.tool";class TA{constructor(){u(this,"once",!1)}isMouseShortcut(){return!1}isCursorShortcut(){return!1}isDoubleClickShortcut(){return!1}}class pf extends TA{constructor(t){super();u(this,"type",PA.MouseButtonType);u(this,"buttons");this.buttonsBit=t,this.buttons=RB(t)}isMouseShortcut(){return!0}matchBegin(t){return this.buttons.has(t)}}class DB extends TA{constructor(){super(...arguments);u(this,"type",PA.MouseCursorType)}isCursorShortcut(){return!0}match(){return!0}}const CB="tool.cancel",wu=ln("IToolService");var rc=(r=>(r[r.BEGIN=0]="BEGIN",r[r.CONTINUE=1]="CONTINUE",r[r.END=2]="END",r))(rc||{}),Ks=(r=>(r[r.noop=0]="noop",r[r.activated=1]="activated",r[r.runningPrimaryAction=2]="runningPrimaryAction",r))(Ks||{}),ES;(r=>{r.currentToolState=new _d("ToolInvocationState",0)})(ES||(ES={}));var PA=(r=>(r[r.UnknownType=0]="UnknownType",r[r.KeyCombinationType=1]="KeyCombinationType",r[r.MouseCursorType=2]="MouseCursorType",r[r.MouseButtonType=3]="MouseButtonType",r[r.MouseWheelType=4]="MouseWheelType",r[r.GestureType=5]="GestureType",r))(PA||{});function GT(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}class OB{constructor(){u(this,"data",new Map)}add(e,t){GT(uo(e)),GT(Fd(t)),!this.data.has(e)&&this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}}const cE="Registry";let Wm;Reflect.has(wi,cE)?Wm=Reflect.get(wi,cE):(Wm=new OB,Reflect.set(wi,cE,Wm));const Vc=Wm;class NB extends _B{constructor(){super(...arguments);u(this,"_defaultToolID")}registerWithShortcut(t,i){this.add(t),i&&(this._defaultToolID=t.id)}getDefaultOne(){return this._defaultToolID}}Vc.add(Gx,new NB);function zT(){}function dO(r){const e=this;let t=!1,i;return function(){return t||(t=!0,i=r.apply(e,arguments)),i}}var Wc;(r=>{function e(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}r.is=e;const t=Object.freeze([]);function i(){return t}r.empty=i;function*s(C){yield C}r.single=s;function n(C){return C||t}r.from=n;function o(C){return!C||C[Symbol.iterator]().next().done===!0}r.isEmpty=o;function a(C){return C[Symbol.iterator]().next().value}r.first=a;function l(C,O){for(const N of C)if(O(N))return!0;return!1}r.some=l;function c(C,O){for(const N of C)if(O(N))return N}r.find=c;function*d(C,O){for(const N of C)O(N)&&(yield N)}r.filter=d;function*f(C,O){let N=0;for(const j of C)yield O(j,N++)}r.map=f;function*g(...C){for(const O of C)for(const N of O)yield N}r.concat=g;function*x(C){for(const O of C)for(const N of O)yield N}r.concatNested=x;function E(C,O,N){let j=N;for(const I of C)j=O(j,I);return j}r.reduce=E;function*P(C,O,N=C.length){for(O<0&&(O+=C.length),N<0?N+=C.length:N>C.length&&(N=C.length);O<N;O++)yield C[O]}r.slice=P;function b(C,O=Number.POSITIVE_INFINITY){const N=[];if(O===0)return[N,C];const j=C[Symbol.iterator]();for(let I=0;I<O;I++){const M=j.next();if(M.done)return[N,r.empty()];N.push(M.value)}return[N,{[Symbol.iterator](){return j}}]}r.consume=b;function D(C,O,N=(j,I)=>j===I){const j=C[Symbol.iterator](),I=O[Symbol.iterator]();for(;;){const M=j.next(),R=I.next();if(M.done!==R.done)return!1;if(M.done)return!0;if(!N(M.value,R.value))return!1}}r.equals=D})(Wc||(Wc={}));function J(r,...e){!Bx(r)&&!r&&console.warn("!",...e)}let ro=null;function $0(r){return ro==null||ro.trackDisposable(r),r}function K0(r){ro==null||ro.markAsDisposed(r)}function zx(r,e){ro==null||ro.setParent(r,e)}function IB(r){return ro==null||ro.markAsSingleton(r),r}class FB extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function e1(r){if(Wc.is(r)){const e=[];for(const t of r)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new FB(e);return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function MB(...r){return sn(()=>e1(r))}function sn(r){const e=$0({dispose:dO(()=>{K0(e),r()})});return e}const cT=class{constructor(){u(this,"_toDispose",new Set);u(this,"_isDisposed",!1);$0(this)}dispose(){this._isDisposed||(K0(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{e1(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return zx(e,this),this._isDisposed?cT.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};let pa=cT;u(pa,"DISABLE_DISPOSED_WARNING",!1);class zt{constructor(){u(this,"$$disposed",!1);u(this,"_store",new pa);$0(this),zx(this._store,this)}dispose(){this.$$disposed=!0,K0(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}u(zt,"None",Object.freeze({dispose(){}}));class RA{constructor(){u(this,"_value");u(this,"_isDisposed",!1);$0(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),e&&zx(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,K0(this),(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e&&zx(e,null),e}}class BB{constructor(){u(this,"dispose",()=>{});u(this,"unset",()=>{});u(this,"isset",()=>!1);$0(this)}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0,K0(this))},this}}class LB{constructor(){u(this,"references",new Map)}acquire(e,...t){let i=this.references.get(e);i||(i={counter:0,object:this.createReferencedObject(e,...t)},this.references.set(e,i));const{object:s}=i,n=()=>dO(()=>{--i.counter===0&&(this.destroyReferencedObject(e,i.object),this.references.delete(e))});i.counter++;const o=()=>i.counter,a=()=>(J(i),i.counter++,{object:s,dispose:n(),copy:a,count:o});return{object:s,dispose:n(),copy:a,count:o}}}const i0=class{constructor(e){u(this,"element");u(this,"next");u(this,"prev");this.element=e,this.next=i0.Undefined,this.prev=i0.Undefined}};let Yr=i0;u(Yr,"Undefined",new i0(void 0));class o0{constructor(){u(this,"_first",Yr.Undefined);u(this,"_last",Yr.Undefined);u(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===Yr.Undefined}clear(){this._first=Yr.Undefined,this._last=Yr.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Yr(e);if(this._first===Yr.Undefined)this._first=i,this._last=i;else if(t){const n=this._last;this._last=i,i.prev=n,n.next=i}else{const n=this._first;this._first=i,i.next=n,n.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==Yr.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Yr.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Yr.Undefined&&e.next!==Yr.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Yr.Undefined&&e.next===Yr.Undefined?(this._first=Yr.Undefined,this._last=Yr.Undefined):e.next===Yr.Undefined?(this._last=this._last.prev,this._last.next=Yr.Undefined):e.prev===Yr.Undefined&&(this._first=this._first.next,this._first.prev=Yr.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Yr.Undefined;)yield e.element,e=e.next}}class UB{constructor(){u(this,"unexpectedErrorHandler");u(this,"listeners");this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const GB=new UB;function Hx(r){zB(r)||GB.onUnexpectedError(r)}const SS="Canceled";function zB(r){return r instanceof fO?!0:r instanceof Error&&r.name===SS&&r.message===SS}class fO extends Error{constructor(){super(SS),this.name=this.message}}function HB(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}function jB(r){return r?r.message?r.message:r.stack?r.stack.split(`
`)[0]:String(r):"Error"}const VB=wi.performance&&typeof wi.performance.now=="function";class DA{constructor(e){u(this,"_highResolution");u(this,"_startTime");u(this,"_stopTime");this._highResolution=VB&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new DA(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?wi.performance.now():Date.now()}}const hT=class{constructor(e){u(this,"_name");u(this,"_stopWatch");u(this,"_listenerCount",0);u(this,"_invocationCount",0);u(this,"_elapsedOverall",0);this._name=`${e}_${hT._idPool++}`}start(e){this._stopWatch=new DA(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let $m=hT;u($m,"_idPool",0);let Cp=-1;function WB(r){const e=Cp;return Cp=r,{dispose(){Cp=e}}}var sa;(r=>{r.None=()=>zt.None;function e(R,L){return d(R,()=>{},0,void 0,!0,void 0,L)}r.defer=e;function t(R){return(L,K=null,Q)=>{let ue=!1,ae;return ae=R(Re=>{if(!ue)return ae?ae.dispose():ue=!0,L.call(K,Re)},null,Q),ue&&ae.dispose(),ae}}r.once=t;function i(R,L,K){return c((Q,ue=null,ae)=>R(Re=>Q.call(ue,L(Re)),null,ae),K)}r.map=i;function s(R,L,K){return c((Q,ue=null,ae)=>R(Re=>{L(Re),Q.call(ue,Re)},null,ae),K)}r.forEach=s;function n(R,L,K){return c((Q,ue=null,ae)=>R(Re=>L(Re)&&Q.call(ue,Re),null,ae),K)}r.filter=n;function o(R){return R}r.signal=o;function a(...R){return(L,K=null,Q)=>MB(...R.map(ue=>ue(ae=>L.call(K,ae),null,Q)))}r.any=a;function l(R,L,K,Q){let ue=K;return i(R,ae=>(ue=L(ue,ae),ue),Q)}r.reduce=l;function c(R,L){let K;const Q={onWillAddFirstListener(){K=R(ue.fire,ue)},onDidRemoveLastListener(){K==null||K.dispose()}},ue=new Dt(Q);return L==null||L.add(ue),ue.event}function d(R,L,K=100,Q=!1,ue=!1,ae,Re){let Ue,rt,Ve,Fe=0,nt;const dt={leakWarningThreshold:ae,onWillAddFirstListener(){Ue=R(bt=>{Fe++,rt=L(rt,bt),Q&&!Ve&&(it.fire(rt),rt=void 0),nt=()=>{const ee=rt;rt=void 0,Ve=void 0,(!Q||Fe>1)&&it.fire(ee),Fe=0},typeof K=="number"?(clearTimeout(Ve),Ve=setTimeout(nt,K)):Ve===void 0&&(Ve=0,queueMicrotask(nt))})},onWillRemoveListener(){ue&&Fe>0&&(nt==null||nt())},onDidRemoveLastListener(){nt=void 0,Ue.dispose()}},it=new Dt(dt);return Re==null||Re.add(it),it.event}r.debounce=d;function f(R,L=0,K){return r.debounce(R,(Q,ue)=>Q?(Q.push(ue),Q):[ue],L,void 0,!0,void 0,K)}r.accumulate=f;function g(R,L=(Q,ue)=>Q===ue,K){let Q=!0,ue;return n(R,ae=>{const Re=Q||!L(ae,ue);return Q=!1,ue=ae,Re},K)}r.latch=g;function x(R,L,K){return[r.filter(R,L,K),r.filter(R,Q=>!L(Q),K)]}r.split=x;function E(R,L=!1,K=[]){let Q=K.slice(),ue=R(Ue=>{Q?Q.push(Ue):Re.fire(Ue)});const ae=()=>{Q==null||Q.forEach(Ue=>Re.fire(Ue)),Q=null},Re=new Dt({onWillAddFirstListener(){ue||(ue=R(Ue=>Re.fire(Ue)))},onDidAddFirstListener(){Q&&(L?setTimeout(ae):ae())},onDidRemoveLastListener(){ue&&ue.dispose(),ue=null}});return Re.event}r.buffer=E;class P{constructor(L){u(this,"disposables",new pa);this.event=L}map(L){return new P(i(this.event,L,this.disposables))}forEach(L){return new P(s(this.event,L,this.disposables))}filter(L){return new P(n(this.event,L,this.disposables))}reduce(L,K){return new P(l(this.event,L,K,this.disposables))}latch(){return new P(g(this.event,void 0,this.disposables))}debounce(L,K=100,Q=!1,ue=!1,ae){return new P(d(this.event,L,K,Q,ue,ae,this.disposables))}on(L,K,Q){return this.event(L,K,Q)}once(L,K,Q){return t(this.event)(L,K,Q)}dispose(){this.disposables.dispose()}}function b(R){return new P(R)}r.chain=b;function D(R,L,K=Q=>Q){const Q=(...Ue)=>Re.fire(K(...Ue)),ue=()=>R.on(L,Q),ae=()=>R.removeListener(L,Q),Re=new Dt({onWillAddFirstListener:ue,onDidRemoveLastListener:ae});return Re.event}r.fromNodeEventEmitter=D;function C(R,L,K=Q=>Q){const Q=(...Ue)=>Re.fire(K(...Ue)),ue=()=>R.addEventListener(L,Q),ae=()=>R.removeEventListener(L,Q),Re=new Dt({onWillAddFirstListener:ue,onDidRemoveLastListener:ae});return Re.event}r.fromDOMEventEmitter=C;function O(R){return new Promise(L=>t(R)(L))}r.toPromise=O;function N(R,L){return L(void 0),R(K=>L(K))}r.runAndSubscribe=N;function j(R,L){let K=null;function Q(ae){K==null||K.dispose(),K=new pa,L(ae,K)}Q(void 0);const ue=R(ae=>Q(ae));return sn(()=>{ue.dispose(),K==null||K.dispose()})}r.runAndSubscribeWithStore=j;class I{constructor(L,K){u(this,"emitter");u(this,"_counter",0);u(this,"_hasChanged",!1);this.obs=L;const Q={onWillAddFirstListener:()=>{L.addObserver(this)},onDidRemoveLastListener:()=>{L.removeObserver(this)}};this.emitter=new Dt(Q),K&&K.add(this.emitter)}beginUpdate(L){this._counter++}handleChange(L,K){this._hasChanged=!0}endUpdate(L){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function M(R,L){return new I(R,L).emitter.event}r.fromObservable=M})(sa||(sa={}));class $B{constructor(e,t=Math.random().toString(18).slice(2,5)){u(this,"_stacks");u(this,"_warnCountdown",0);this.threshold=e,this.name=t}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;let n,o=0;for(const[a,l]of this._stacks)(!n||o<l)&&(n=a,o=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`),console.warn(n)}return()=>{const n=this._stacks.get(e.value)||0;this._stacks.set(e.value,n-1)}}}class CA{constructor(e){this.value=e}static create(){var e;return new CA((e=new Error().stack)!=null?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class KB{constructor(e,t,i){u(this,"subscription",new BB);this.callback=e,this.callbackThis=t,this.stack=i}invoke(e){this.callback.call(this.callbackThis,e)}}class Dt{constructor(e){u(this,"_options");u(this,"_leakageMon");u(this,"_perfMon");u(this,"_disposed",!1);u(this,"_event");u(this,"_deliveryQueue");u(this,"_listeners");var t,i,s,n,o;this._options=e,this._leakageMon=Cp>0||((t=this._options)==null?void 0:t.leakWarningThreshold)?new $B((s=(i=this._options)==null?void 0:i.leakWarningThreshold)!=null?s:Cp):void 0,this._perfMon=(n=this._options)!=null&&n._profName?new $m(this._options._profName):void 0,this._deliveryQueue=(o=this._options)==null?void 0:o.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)==null||e.clear(this),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event||(this._event=(e,t,i)=>{var d,f,g;if(this._listeners||(this._listeners=new o0),this._leakageMon&&this._listeners.size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),zt.None;const s=this._listeners.isEmpty();s&&((d=this._options)==null?void 0:d.onWillAddFirstListener)&&this._options.onWillAddFirstListener(this);let n,o;this._leakageMon&&this._listeners.size>=Math.ceil(this._leakageMon.threshold*.2)&&(o=CA.create(),n=this._leakageMon.check(o,this._listeners.size+1));const a=new KB(e,t,o),l=this._listeners.push(a);s&&((f=this._options)==null?void 0:f.onDidAddFirstListener)&&this._options.onDidAddFirstListener(this),(g=this._options)!=null&&g.onDidAddListener&&this._options.onDidAddListener(this,e,t);const c=a.subscription.set(()=>{var x,E;n==null||n(),this._disposed||((E=(x=this._options)==null?void 0:x.onWillRemoveListener)==null||E.call(x,this),l(),this._options&&this._options.onDidRemoveLastListener&&(this._listeners&&!this._listeners.isEmpty()||this._options.onDidRemoveLastListener(this)))});return i instanceof pa?i.add(c):Array.isArray(i)&&i.push(c),c}),this._event}fire(e){var t,i,s;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new YB((t=this._options)==null?void 0:t.onListenerError));for(const n of this._listeners)this._deliveryQueue.push(this,n,e);(i=this._perfMon)==null||i.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(s=this._perfMon)==null||s.stop()}}hasListeners(){return this._listeners?!this._listeners.isEmpty():!1}}class XB{constructor(e=Hx){u(this,"_queue",new o0);this._onListenerError=e}get size(){return this._queue.size}push(e,t,i){this._queue.push(new qB(e,t,i))}clear(e){const t=new o0;for(const i of this._queue)i.emitter!==e&&t.push(i);this._queue=t}deliver(){for(;this._queue.size>0;){const e=this._queue.shift();try{e.listener.invoke(e.event)}catch(t){this._onListenerError(t)}}}}class YB extends XB{clear(e){this._queue.clear()}}class qB{constructor(e,t,i){this.emitter=e,this.listener=t,this.event=i}}class wS extends Dt{constructor(t){super(t);u(this,"_isPaused",0);u(this,"_eventQueue",new o0);u(this,"_mergeFn");this._mergeFn=t==null?void 0:t.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const t=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(t))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(t){this._listeners&&(this._isPaused!==0?this._eventQueue.push(t):super.fire(t))}}class Md{constructor(e,t=[],i=!1){u(this,"ctor");u(this,"staticArguments");u(this,"supportsDelayedInstantiation");this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}u(Md,"__SyncDescriptorBrand");const _O=[];function ba(r,e,t){e instanceof Md||(e=new Md(e,[],t)),_O.push([r,e])}function QB(){return _O}const gf=ln("ICanvasService"),Jt={DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",TOUCH_START:"touchstart",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",TOUCH_MOVE:"touchmove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_UP:"keyup",DRAG_START:"dragstart",DRAG:"drag",DROP:"drop",DRAG_END:"dragend",ShortcutOverride:"shortcutOverride"};class OA{constructor(e){u(this,"accepted",!1);this.type=e}accept(){this.accepted=!0}ignore(){this.accepted=!1}isAccepted(){return this.accepted}asMouseInputEvent(){}isMouseInputEvent(){return!1}asKeyboardInputEvent(){}isKeyboardInputEvent(){return!1}asWheelInputEvent(){}isWheelInputEvent(){return!1}}class JB extends OA{constructor(t,i){super(t);u(this,"targetPath");u(this,"clientX");u(this,"clientY");u(this,"pageX");u(this,"pageY");u(this,"buttons");this.targetPath=i.targetPath,this.clientX=i.clientX,this.clientY=i.clientY,this.pageX=i.pageX,this.pageY=i.pageY,this.buttons=i.buttons}asMouseInputEvent(){return this}isMouseInputEvent(){return!0}}class ZB extends OA{constructor(t){super(Jt.WHEEL);u(this,"deltaX");u(this,"deltaY");this.deltaX=t.deltaX,this.deltaY=t.deltaY}asWheelInputEvent(){return this}isWheelInputEvent(){return!0}}class eL extends OA{constructor(t,i){super(t);u(this,"ctrlKey");u(this,"shiftKey");u(this,"altKey");u(this,"metaKey");u(this,"keyCode");u(this,"code");u(this,"init");this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.keyCode=i.keyCode,this.code=i.code,this.init=i}asKeyboardInputEvent(){return this}isKeyboardInputEvent(){return!0}}class NA{constructor(e){this.node=e}static fromVirtualDOMNode(e){return new NA(e)}}function us(r,e,t,i=0){return new JB(r,{buttons:i||e.buttons,clientX:e.relativePos.x,clientY:e.relativePos.y,pageX:e.pos.x,pageY:e.pos.y,targetPath:t.targetPath||[]})}function HT(...r){}class tL{constructor(e,t,i,s){u(this,"_activeTool");u(this,"_past",[]);u(this,"_recursiveCounter",0);u(this,"_brokenByRecursion",0);u(this,"_keys",new Set);u(this,"_buttons",new Set);this.canvas=e,this.toolFactories=t,this.onWillChangeTool=i,this.onDidChangeTool=s}createToolById(e){let t=this.toolFactories.find(i=>i.id===e);if(!!t)return t.createTool(this.canvas)}getShortcutById(e){return this.toolFactories.find(t=>t.id===e)}setActiveToolById(e){var i;if(((i=this._activeTool)==null?void 0:i.id)===e)return!1;const t=this.createToolById(e);return t?this.setActiveTool(t):!1}switchBack(){const e=this._past.pop();e?(this.setActiveToolById(e),this._past.pop()):this.setActiveTool(void 0)}get activeTool(){return this._activeTool}setActiveTool(e){var i;if((e==null?void 0:e.id)===((i=this._activeTool)==null?void 0:i.id))return!1;const t=this._activeTool;return this.onWillChangeTool(t,e),this._activeTool&&this._deactivateTool(this._activeTool),this._doSetActiveTool(e),e&&this._activateTool(e),this.onDidChangeTool(t,e),!!this._activeTool}_deactivateTool(e){e.phase!==Ks.noop&&e.deactivate(),e.phase=Ks.noop}_activateTool(e){e.activate(),e.phase=Ks.activated}_beginTool(e){this._forwardEvent(rc.BEGIN,e),this._activeTool.phase=Ks.runningPrimaryAction}_continueTool(e){this._forwardEvent(rc.CONTINUE,e)}_endTool(e){this._forwardEvent(rc.END,e)}_doSetActiveTool(e=void 0){this._activeTool&&this._past.push(this._activeTool.id),this._activeTool=e}processEvent(e){return this._activeTool&&this._activeTool.processEvent(e),e.isAccepted()}_forwardEvent(e,t){let i=!0;const s=t.asMouseInputEvent();return s&&(s.accept(),this._forwardToTool(e,t)),i}_forwardToTool(e,t){if(!!this._activeTool)switch(this._activeTool.isStrokeTool()||et(),e){case rc.BEGIN:t.type==Jt.DBLCLICK?ze():this._activeTool.beginPrimaryAction(t);break;case rc.CONTINUE:this._activeTool.continuePrimaryAction(t);break;case rc.END:this._activeTool.endPrimaryAction(t);break}}withRecursionNotifier(e){this._recursiveCounter++,this._brokenByRecursion++;try{return e()}finally{this._recursiveCounter--}}isInRecursion(){return this._recursiveCounter>1}withRecursionGuard(e){this._brokenByRecursion=0;try{return e()}finally{}}isBrokenByRecursion(){return this._brokenByRecursion>0}buttonPressed(e){return this.withRecursionNotifier(()=>{let t=!1;if(this._buttons.has(e.buttons)&&_i(Tp,"Peculiar, button was already pressed."),this._buttons.add(e.buttons),!this.activeTool)return!1;if(this.activeTool.phase!==Ks.runningPrimaryAction&&!this.isInRecursion()){const i=this.getShortcutById(this.activeTool.id);jn(i),i.shortcut.isMouseShortcut()&&this.withRecursionGuard(()=>{this._beginTool(e),t=!0,this.isBrokenByRecursion()&&(ze(),this._forceDeactivateAllActions())})}return this.isInRecursion()&&(et(),this._forceDeactivateAllActions()),t})}buttonReleased(e){return this.withRecursionNotifier(()=>{let t=!1;return this.activeTool&&(t=this._tryEndRunningTool(e)),this._buttons.has(e.buttons)?this._buttons.delete(e.buttons):(this.reset(),_i(Tp,"Peculiar, button released but we can't remember it was pressed")),this.isInRecursion()?this._forceDeactivateAllActions():this.activeTool,t})}dbClick(e){return this.withRecursionNotifier(()=>(this.isInRecursion()&&ze(),this.processEvent(e),e.isAccepted()?!0:(this.isInRecursion()&&ze(),this._tryRunDoubleClickTool(e))))}dropCanceled(e){return!1}wheelEvent(e){return!1}keyDown(e){return this.withRecursionNotifier(()=>{let t=!1;return this._keys.has(e.keyCode)&&_i(Tp,"Peculiar, records show key was already pressed"),t})}keyUp(e){return this.withRecursionNotifier(()=>(this._keys.has(e.keyCode)||_i(nn,"Peculiar, key released but can't remember it was pressed"),this._keys.delete(e.keyCode),!1))}pointerMoved(e){return this.withRecursionNotifier(()=>(this.isInRecursion()&&ze(),this._activeTool?this._activeTool.isStrokeTool()&&this._activeTool.phase===Ks.runningPrimaryAction?(this._continueTool(e),!0):this.processEvent(e):this._tryRunCursorTool(e)))}_forceDeactivateAllActions(){this.activeTool&&this._deactivateTool(this.activeTool)}_tryEndRunningTool(e){this.activeTool||et(),this.activeTool.phase===Ks.noop&&et();let t=!1;const i=this.getShortcutById(this.activeTool.id);jn(i);const{shortcut:s}=i;if(e.isMouseInputEvent()?s.isMouseShortcut()?t=s.matchBegin(e.buttons):s.isCursorShortcut()&&(t=!e.buttons):e.isKeyboardInputEvent()&&(t=!0),t){const n=s.once;J(this._activeTool),n?(this._activeTool.phase,Ks.noop,this.setActiveTool(void 0)):s.isMouseShortcut()&&(this._endTool(e),this._activeTool.phase=Ks.activated)}return!this.activeTool}_tryRunCursorTool(e){let t;return this.toolFactories.forEach(i=>{const{shortcut:s}=i;s.isCursorShortcut()&&(t=i)}),t&&(HT("activate",t.id),this.setActiveToolById(t.id),this.withRecursionGuard(()=>{jn(t),this.processEvent(e),this.isBrokenByRecursion()&&ze()})),!!t}_tryRunDoubleClickTool(e){const t=this.toolFactories.filter(s=>s.shortcut.isDoubleClickShortcut());if(!t.length)return!1;let i=t[0];return HT("activate double click",i.id),this.setActiveToolById(i.id),this.withRecursionGuard(()=>{jn(i),this.processEvent(e),this.isBrokenByRecursion()&&ze()}),!!i}reset(){this._keys.clear(),this._buttons.clear()}}var rL=Object.defineProperty,iL=Object.getOwnPropertyDescriptor,nL=(r,e,t,i)=>{for(var s=i>1?void 0:i?iL(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&rL(e,t,s),s},jT=(r,e)=>(t,i)=>e(t,i,r);let AS=class extends zt{constructor(e,t){super();u(this,"_serviceBrand");u(this,"_onDidChangeTool",new Dt);u(this,"_onWillChangeTool",new Dt);u(this,"_controllers",new Map);u(this,"_currentController");this.instantiationService=e,this.canvasService=t,this._register(t.onDidActiveCanvasChange(i=>{J(i),!this._controllers.has(i)&&this._attachCanvas(i)}))}get onDidChangeTool(){return this._onDidChangeTool.event}get onWillChangeTool(){return this._onWillChangeTool.event}switchBack(){var e;(e=this._currentController)==null||e.switchBack()}switchDefault(){var i,s;const t=Vc.as(Gx).getDefaultOne();((s=(i=this._currentController)==null?void 0:i.activeTool)==null?void 0:s.id)!==t&&this.switchTool(t)}_attachCanvas(e){J(e);let t=new tL(e,Vc.as(Gx).values(),this._emitOnWillChangeToolEvent.bind(this),this._emitOnDidChangeToolEvent.bind(this));this._controllers.set(e,t),this._switchController(t)}_switchController(e){J(e),this._currentController=e}_emitOnWillChangeToolEvent(e,t){this._onWillChangeTool.fire({prev:e,next:t})}_emitOnDidChangeToolEvent(e,t){this._onDidChangeTool.fire({prev:e,next:t})}switchTool(e){if(!this._currentController)return;const t=this._currentController.activeTool;if((t==null?void 0:t.id)===e)return;const i=e?this._currentController.createToolById(e):void 0;this._currentController.setActiveTool(i)}buttonPressed(e){var t;return!!((t=this._currentController)!=null&&t.buttonPressed(e))}buttonReleased(e){var t;return!!((t=this._currentController)!=null&&t.buttonReleased(e))}dbClick(e){var t;return!!((t=this._currentController)!=null&&t.dbClick(e))}dropCanceled(e){var t;return!!((t=this._currentController)!=null&&t.dropCanceled(e))}keyDown(e){var t;return!!((t=this._currentController)!=null&&t.keyDown(e))}keyUp(e){var t;return!!((t=this._currentController)!=null&&t.keyUp(e))}pointerMoved(e){var t;return!!((t=this._currentController)!=null&&t.pointerMoved(e))}wheelEvent(e){var t;return!!((t=this._currentController)!=null&&t.wheelEvent(e))}processEvent(e){var t;return!!((t=this._currentController)!=null&&t.processEvent(e))}};AS=nL([jT(0,pl),jT(1,gf)],AS);ba(wu,new Md(AS));const pO=ln("IInputManager"),IA=ln("keybindingService");var Bd=(r=>(r[r.None=0]="None",r[r.BlockBox=1]="BlockBox",r[r.InlineBox=2]="InlineBox",r[r.InlineContent=3]="InlineContent",r))(Bd||{}),$c;(r=>{r.hitTestLevel=new _d("hitTestLevel",Bd.BlockBox),r.isEditingText=new _d("isEditingText",!1)})($c||($c={}));var sL=Object.defineProperty,oL=Object.getOwnPropertyDescriptor,aL=(r,e,t,i)=>{for(var s=i>1?void 0:i?oL(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&sL(e,t,s),s},hE=(r,e)=>(t,i)=>e(t,i,r);let bS=class extends zt{constructor(e,t,i){super();u(this,"_serviceBrand");this.toolService=e,this.keybindingService=t,this.contextKeyService=i}addTrackedCanvas(e){e.installEventFilter(this)}removeTrackedCanvas(e){ze()}eventFilter(e){switch(e.type){case Jt.MOUSE_DOWN:{let i=e.asMouseInputEvent();jn(i),this.toolService.buttonPressed(i)&&e.accept();break}case Jt.MOUSE_UP:{let i=e.asMouseInputEvent();jn(i),this.toolService.buttonReleased(i)&&e.accept();break}case Jt.DBLCLICK:{let i=e.asMouseInputEvent();jn(i),this.toolService.dbClick(i)&&e.accept();break}case Jt.DRAG_END:{let i=e.asMouseInputEvent();jn(i),this.toolService.dropCanceled(i)&&e.accept();break}case Jt.MOUSE_MOVE:if(this.toolService.pointerMoved(e.asMouseInputEvent()))return e.accept(),!0;break;case Jt.WHEEL:{let i=e.asWheelInputEvent();jn(i),this.toolService.wheelEvent(i)&&e.accept();break}case Jt.KEY_UP:!this.contextKeyService.getContextKeyValue($c.isEditingText.key)&&this.keybindingService.dispatchEvent(e.asKeyboardInputEvent().init,document.body)&&e.accept();break}return e.isAccepted()||this.toolService.processEvent(e),e.isAccepted()}};bS=aL([hE(0,wu),hE(1,IA),hE(2,_h)],bS);ba(pO,new Md(bS));class lL extends zt{constructor(){super(...arguments);u(this,"_onCanvasAdded",this._register(new Dt));u(this,"onCanvasAdded",this._onCanvasAdded.event);u(this,"_onCanvasRemoved",this._register(new Dt));u(this,"onCanvasRemoved",this._onCanvasRemoved.event);u(this,"_onDidActiveCanvasChange",this._register(new Dt));u(this,"onDidActiveCanvasChange",this._onDidActiveCanvasChange.event);u(this,"_editors",new Map);u(this,"_editor")}addCanvas(t){this._editors.set(t.id,t),this._editor=t,this._onCanvasAdded.fire(t),this._onDidActiveCanvasChange.fire(t)}removeCanvas(t){this._editors.delete(t.id)&&this._onCanvasRemoved.fire(t)}listCanvases(){return Array.from(this._editors.values())}getFocusedCanvas(){ze()}getActiveCanvas(){return this._editor}}ba(gf,lL);const mf=ln("modelService"),nd="root";var ss=(r=>(r[r.None=0]="None",r[r.Transform=1]="Transform",r[r.Add=2]="Add",r))(ss||{});class uL extends zt{constructor(){super();u(this,"saveParticipants",[])}addSaveParticipant(t){const i=hB(this.saveParticipants,t);return sn(()=>i())}participate(t,i){for(const s of this.saveParticipants)try{s.participate(t,i)}catch{ze()}}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length)}}var cL=20,hL=1,Kc=1e6,VT=1e6,dL=-7,fL=21,_L=!1,X0="[big.js] ",gh=X0+"Invalid ",t1=gh+"decimal places",pL=gh+"rounding mode",gO=X0+"Division by zero",vr={},ga=void 0,gL=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function mO(){function r(e){var t=this;if(!(t instanceof r))return e===ga?mO():new r(e);if(e instanceof r)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(r.strict===!0&&typeof e!="bigint")throw TypeError(gh+"value");e=e===0&&1/e<0?"-0":String(e)}mL(t,e)}t.constructor=r}return r.prototype=vr,r.DP=cL,r.RM=hL,r.NE=dL,r.PE=fL,r.strict=_L,r.roundDown=0,r.roundHalfUp=1,r.roundHalfEven=2,r.roundUp=3,r}function mL(r,e){var t,i,s;if(!gL.test(e))throw Error(gh+"number");for(r.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),s=e.length,i=0;i<s&&e.charAt(i)=="0";)++i;if(i==s)r.c=[r.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(r.e=t-i-1,r.c=[],t=0;i<=s;)r.c[t++]=+e.charAt(i++)}return r}function mh(r,e,t,i){var s=r.c;if(t===ga&&(t=r.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(pL);if(e<1)i=t===3&&(i||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(i||s[1]!==ga))),s.length=1,i?(r.e=r.e-e+1,s[0]=1):s[0]=r.e=0;else if(e<s.length){if(i=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(i||s[e+1]!==ga||s[e-1]&1))||t===3&&(i||!!s[0]),s.length=e,i){for(;++s[--e]>9;)if(s[e]=0,e===0){++r.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return r}function xf(r,e,t){var i=r.e,s=r.c.join(""),n=s.length;if(e)s=s.charAt(0)+(n>1?"."+s.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)s="0"+s;s="0."+s}else if(i>0)if(++i>n)for(i-=n;i--;)s+="0";else i<n&&(s=s.slice(0,i)+"."+s.slice(i));else n>1&&(s=s.charAt(0)+"."+s.slice(1));return r.s<0&&t?"-"+s:s}vr.abs=function(){var r=new this.constructor(this);return r.s=1,r};vr.cmp=function(r){var e,t=this,i=t.c,s=(r=new t.constructor(r)).c,n=t.s,o=r.s,a=t.e,l=r.e;if(!i[0]||!s[0])return i[0]?n:s[0]?-o:0;if(n!=o)return n;if(e=n<0,a!=l)return a>l^e?1:-1;for(o=(a=i.length)<(l=s.length)?a:l,n=-1;++n<o;)if(i[n]!=s[n])return i[n]>s[n]^e?1:-1;return a==l?0:a>l^e?1:-1};vr.div=function(r){var e=this,t=e.constructor,i=e.c,s=(r=new t(r)).c,n=e.s==r.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>Kc)throw Error(t1);if(!s[0])throw Error(gO);if(!i[0])return r.s=n,r.c=[r.e=0],r;var a,l,c,d,f,g=s.slice(),x=a=s.length,E=i.length,P=i.slice(0,a),b=P.length,D=r,C=D.c=[],O=0,N=o+(D.e=e.e-r.e)+1;for(D.s=n,n=N<0?0:N,g.unshift(0);b++<a;)P.push(0);do{for(c=0;c<10;c++){if(a!=(b=P.length))d=a>b?1:-1;else for(f=-1,d=0;++f<a;)if(s[f]!=P[f]){d=s[f]>P[f]?1:-1;break}if(d<0){for(l=b==a?s:g;b;){if(P[--b]<l[b]){for(f=b;f&&!P[--f];)P[f]=9;--P[f],P[b]+=10}P[b]-=l[b]}for(;!P[0];)P.shift()}else break}C[O++]=d?c:++c,P[0]&&d?P[b]=i[x]||0:P=[i[x]]}while((x++<E||P[0]!==ga)&&n--);return!C[0]&&O!=1&&(C.shift(),D.e--,N--),O>N&&mh(D,N,t.RM,P[0]!==ga),D};vr.eq=function(r){return this.cmp(r)===0};vr.gt=function(r){return this.cmp(r)>0};vr.gte=function(r){return this.cmp(r)>-1};vr.lt=function(r){return this.cmp(r)<0};vr.lte=function(r){return this.cmp(r)<1};vr.minus=vr.sub=function(r){var e,t,i,s,n=this,o=n.constructor,a=n.s,l=(r=new o(r)).s;if(a!=l)return r.s=-l,n.plus(r);var c=n.c.slice(),d=n.e,f=r.c,g=r.e;if(!c[0]||!f[0])return f[0]?r.s=-l:c[0]?r=new o(n):r.s=1,r;if(a=d-g){for((s=a<0)?(a=-a,i=c):(g=d,i=f),i.reverse(),l=a;l--;)i.push(0);i.reverse()}else for(t=((s=c.length<f.length)?c:f).length,a=l=0;l<t;l++)if(c[l]!=f[l]){s=c[l]<f[l];break}if(s&&(i=c,c=f,f=i,r.s=-r.s),(l=(t=f.length)-(e=c.length))>0)for(;l--;)c[e++]=0;for(l=e;t>a;){if(c[--t]<f[t]){for(e=t;e&&!c[--e];)c[e]=9;--c[e],c[t]+=10}c[t]-=f[t]}for(;c[--l]===0;)c.pop();for(;c[0]===0;)c.shift(),--g;return c[0]||(r.s=1,c=[g=0]),r.c=c,r.e=g,r};vr.mod=function(r){var e,t=this,i=t.constructor,s=t.s,n=(r=new i(r)).s;if(!r.c[0])throw Error(gO);return t.s=r.s=1,e=r.cmp(t)==1,t.s=s,r.s=n,e?new i(t):(s=i.DP,n=i.RM,i.DP=i.RM=0,t=t.div(r),i.DP=s,i.RM=n,this.minus(t.times(r)))};vr.neg=function(){var r=new this.constructor(this);return r.s=-r.s,r};vr.plus=vr.add=function(r){var e,t,i,s=this,n=s.constructor;if(r=new n(r),s.s!=r.s)return r.s=-r.s,s.minus(r);var o=s.e,a=s.c,l=r.e,c=r.c;if(!a[0]||!c[0])return c[0]||(a[0]?r=new n(s):r.s=s.s),r;if(a=a.slice(),e=o-l){for(e>0?(l=o,i=c):(e=-e,i=a),i.reverse();e--;)i.push(0);i.reverse()}for(a.length-c.length<0&&(i=c,c=a,a=i),e=c.length,t=0;e;a[e]%=10)t=(a[--e]=a[e]+c[e]+t)/10|0;for(t&&(a.unshift(t),++l),e=a.length;a[--e]===0;)a.pop();return r.c=a,r.e=l,r};vr.pow=function(r){var e=this,t=new e.constructor("1"),i=t,s=r<0;if(r!==~~r||r<-VT||r>VT)throw Error(gh+"exponent");for(s&&(r=-r);r&1&&(i=i.times(e)),r>>=1,!!r;)e=e.times(e);return s?t.div(i):i};vr.prec=function(r,e){if(r!==~~r||r<1||r>Kc)throw Error(gh+"precision");return mh(new this.constructor(this),r,e)};vr.round=function(r,e){if(r===ga)r=0;else if(r!==~~r||r<-Kc||r>Kc)throw Error(t1);return mh(new this.constructor(this),r+this.e+1,e)};vr.sqrt=function(){var r,e,t,i=this,s=i.constructor,n=i.s,o=i.e,a=new s("0.5");if(!i.c[0])return new s(i);if(n<0)throw Error(X0+"No square root");n=Math.sqrt(i+""),n===0||n===1/0?(e=i.c.join(""),e.length+o&1||(e+="0"),n=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),r=new s((n==1/0?"5e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+o)):r=new s(n+""),o=r.e+(s.DP+=4);do t=r,r=a.times(t.plus(i.div(t)));while(t.c.slice(0,o).join("")!==r.c.slice(0,o).join(""));return mh(r,(s.DP-=4)+r.e+1,s.RM)};vr.times=vr.mul=function(r){var e,t=this,i=t.constructor,s=t.c,n=(r=new i(r)).c,o=s.length,a=n.length,l=t.e,c=r.e;if(r.s=t.s==r.s?1:-1,!s[0]||!n[0])return r.c=[r.e=0],r;for(r.e=l+c,o<a&&(e=s,s=n,n=e,c=o,o=a,a=c),e=new Array(c=o+a);c--;)e[c]=0;for(l=a;l--;){for(a=0,c=o+l;c>l;)a=e[c]+n[l]*s[c-l-1]+a,e[c--]=a%10,a=a/10|0;e[c]=a}for(a?++r.e:e.shift(),l=e.length;!e[--l];)e.pop();return r.c=e,r};vr.toExponential=function(r,e){var t=this,i=t.c[0];if(r!==ga){if(r!==~~r||r<0||r>Kc)throw Error(t1);for(t=mh(new t.constructor(t),++r,e);t.c.length<r;)t.c.push(0)}return xf(t,!0,!!i)};vr.toFixed=function(r,e){var t=this,i=t.c[0];if(r!==ga){if(r!==~~r||r<0||r>Kc)throw Error(t1);for(t=mh(new t.constructor(t),r+t.e+1,e),r=r+t.e+1;t.c.length<r;)t.c.push(0)}return xf(t,!1,!!i)};vr[Symbol.for("nodejs.util.inspect.custom")]=vr.toJSON=vr.toString=function(){var r=this,e=r.constructor;return xf(r,r.e<=e.NE||r.e>=e.PE,!!r.c[0])};vr.toNumber=function(){var r=Number(xf(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(r.toString()))throw Error(X0+"Imprecise conversion");return r};vr.toPrecision=function(r,e){var t=this,i=t.constructor,s=t.c[0];if(r!==ga){if(r!==~~r||r<1||r>Kc)throw Error(gh+"precision");for(t=mh(new i(t),r,e);t.c.length<r;)t.c.push(0)}return xf(t,r<=t.e||t.e<=i.NE||t.e>=i.PE,!!s)};vr.valueOf=function(){var r=this,e=r.constructor;if(e.strict===!0)throw Error(X0+"valueOf disallowed");return xf(r,r.e<=e.NE||r.e>=e.PE,!0)};var a0=mO();function Y0(r,e){return new a0(r).cmp(new a0(e))}function Sc(r,e){return new a0(r).plus(new a0(e)).toString()}function ua(r){return new a0(r).div(2).toString()}function Js(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;if(r instanceof Map){let i=new Map;for(let[s,n]of r)i.set(s,Js(n));return i}let e=Reflect.get(r,"CLONE");if(AA(e))return e.call(r);const t=Array.isArray(r)?[]:{};return Object.keys(r).forEach(i=>{r[i]&&typeof r[i]=="object"?t[i]=Js(r[i]):t[i]=r[i]}),t}function Op(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!Op(r[t],e[t]))return!1}else{const s=[];for(i in r)s.push(i);s.sort();const n=[];for(i in e)n.push(i);if(n.sort(),!Op(s,n))return!1;for(t=0;t<s.length;t++)if(!Op(r[s[t]],e[s[t]]))return!1}return!0}function Np(r){return Object.keys(r)}const xL=Object.prototype.hasOwnProperty;function yL(r){if(!r||typeof r!="object")return r;const e=[r];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(xL.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&e.push(s)}}return r}function WT(r,e){const t=Object.create(null);return!r||!e||Object.keys(e).forEach(s=>{const n=r[s],o=e[s];Op(n,o)||(t[s]=o)}),t}var xO=(r=>(r[r.Uri=1]="Uri",r[r.Regexp=2]="Regexp",r[r.ScmResource=3]="ScmResource",r[r.ScmResourceGroup=4]="ScmResourceGroup",r[r.ScmProvider=5]="ScmProvider",r[r.CommentController=6]="CommentController",r[r.CommentThread=7]="CommentThread",r[r.CommentThreadReply=8]="CommentThreadReply",r[r.CommentNode=9]="CommentNode",r[r.CommentThreadNode=10]="CommentThreadNode",r[r.TimelineActionContext=11]="TimelineActionContext",r[r.NotebookCellActionContext=12]="NotebookCellActionContext",r[r.TestItemContext=13]="TestItemContext",r[r.Date=14]="Date",r))(xO||{});const vL=/^\w[\w\d+.-]*$/,EL=/^\//,SL=/^\/\//;function $T(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!vL.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!EL.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(SL.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function wL(r,e){return!r&&!e?"file":r}function AL(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==vo&&(e=vo+e):e=vo;break}return e}const kr="",vo="/",bL=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class l0{constructor(e,t,i,s,n,o=!1){u(this,"scheme");u(this,"authority");u(this,"path");u(this,"query");u(this,"fragment");typeof e=="object"?(this.scheme=e.scheme||kr,this.authority=e.authority||kr,this.path=e.path||kr,this.query=e.query||kr,this.fragment=e.fragment||kr):(this.scheme=wL(e,o),this.authority=t||kr,this.path=AL(this.scheme,i||kr),this.query=s||kr,this.fragment=n||kr,$T(this,o))}static isUri(e){return e instanceof l0?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return EO(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:n,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=kr),i===void 0?i=this.authority:i===null&&(i=kr),s===void 0?s=this.path:s===null&&(s=kr),n===void 0?n=this.query:n===null&&(n=kr),o===void 0?o=this.fragment:o===null&&(o=kr),t===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new Kh(t,i,s,n,o)}static parse(e,t=!1){const i=bL.exec(e);return i?new Kh(i[2]||kr,em(i[4]||kr),em(i[5]||kr),em(i[7]||kr),em(i[9]||kr),t):new Kh(kr,kr,kr,kr,kr)}static file(e){let t=kr;if(j0&&(e=e.replace(/\\/g,vo)),e[0]===vo&&e[1]===vo){const i=e.indexOf(vo,2);i===-1?(t=e.substring(2),e=vo):(t=e.substring(2,i),e=e.substring(i)||vo)}return new Kh("file",t,e,kr,kr)}static from(e){const t=new Kh(e.scheme,e.authority,e.path,e.query,e.fragment);return $T(t,!0),t}static joinPath(e,...t){ze()}toString(e=!1){return kS(this,e)}toJSON(){return this}static revive(e){if(Ti(e))return e;if(e instanceof l0)return e;{const t=new Kh(e);return t._formatted=e.external,t._fsPath=e._sep===yO?e.fsPath:null,t}}}const yO=j0?1:void 0;class Kh extends l0{constructor(){super(...arguments);u(this,"_formatted",null);u(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=EO(this,!1)),this._fsPath}toString(t=!1){return t?kS(this,!0):(this._formatted||(this._formatted=kS(this,!1)),this._formatted)}toJSON(){const t={$mid:xO.Uri};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=yO),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}}const vO={[wt.Colon]:"%3A",[wt.Slash]:"%2F",[wt.QuestionMark]:"%3F",[wt.Hash]:"%23",[wt.OpenSquareBracket]:"%5B",[wt.CloseSquareBracket]:"%5D",[wt.AtSign]:"%40",[wt.ExclamationMark]:"%21",[wt.DollarSign]:"%24",[wt.Ampersand]:"%26",[wt.SingleQuote]:"%27",[wt.OpenParen]:"%28",[wt.CloseParen]:"%29",[wt.Asterisk]:"%2A",[wt.Plus]:"%2B",[wt.Comma]:"%2C",[wt.Semicolon]:"%3B",[wt.Equals]:"%3D",[wt.Space]:"%20"};function KT(r,e){let t,i=-1;for(let s=0;s<r.length;s++){const n=r.charCodeAt(s);if(n>=wt.a&&n<=wt.z||n>=wt.A&&n<=wt.Z||n>=wt.Digit0&&n<=wt.Digit9||n===wt.Dash||n===wt.Period||n===wt.Underline||n===wt.Tilde||e&&n===wt.Slash)i!==-1&&(t+=encodeURIComponent(r.substring(i,s)),i=-1),t!==void 0&&(t+=r.charAt(s));else{t===void 0&&(t=r.substr(0,s));const o=vO[n];o!==void 0?(i!==-1&&(t+=encodeURIComponent(r.substring(i,s)),i=-1),t+=o):i===-1&&(i=s)}}return i!==-1&&(t+=encodeURIComponent(r.substring(i))),t!==void 0?t:r}function kL(r){let e;for(let t=0;t<r.length;t++){const i=r.charCodeAt(t);i===wt.Hash||i===wt.QuestionMark?(e===void 0&&(e=r.substr(0,t)),e+=vO[i]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function EO(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===wt.Slash&&(r.path.charCodeAt(1)>=wt.A&&r.path.charCodeAt(1)<=wt.Z||r.path.charCodeAt(1)>=wt.a&&r.path.charCodeAt(1)<=wt.z)&&r.path.charCodeAt(2)===wt.Colon?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,j0&&(t=t.replace(/\//g,"\\")),t}function kS(r,e){const t=e?kL:KT;let i="",{scheme:s,authority:n,path:o,query:a,fragment:l}=r;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=vo,i+=vo),n){let c=n.indexOf("@");if(c!==-1){const d=n.substr(0,c);n=n.substr(c+1),c=d.indexOf(":"),c===-1?i+=t(d,!1):(i+=t(d.substr(0,c),!1),i+=":",i+=t(d.substr(c+1),!1)),i+="@"}n=n.toLowerCase(),c=n.indexOf(":"),c===-1?i+=t(n,!1):(i+=t(n.substr(0,c),!1),i+=n.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===wt.Slash&&o.charCodeAt(2)===wt.Colon){const c=o.charCodeAt(1);c>=wt.A&&c<=wt.Z&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===wt.Colon){const c=o.charCodeAt(0);c>=wt.A&&c<=wt.Z&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0)}return a&&(i+="?",i+=t(a,!1)),l&&(i+="#",i+=e?l:KT(l,!1)),i}function SO(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+SO(r.substr(3)):r}}const XT=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function em(r){return r.match(XT)?r.replace(XT,e=>SO(e)):r}function FA(r){return r.get("nodes")}function mo(r){return r.get("id")}function Km(r){return r.get("from")}function YT(r){return r.get("type")}function TS(r){return r.get("content")}function PS(r){return r.get("style")}var Ui=(r=>(r[r.backward=0]="backward",r[r.forward=1]="forward",r[r.inward=2]="inward",r[r.self=3]="self",r[r.ancestors=4]="ancestors",r[r.descendants=5]="descendants",r))(Ui||{});const ni=new Uint8Array(16),Ki=[];for(let r=0;r<256;r++)Ki.push(r.toString(16).padStart(2,"0"));let RS;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?RS=crypto.getRandomValues.bind(crypto):RS=function(r){for(let e=0;e<r.length;e++)r[e]=Math.floor(Math.random()*256);return r};function TL(){RS(ni),ni[6]=ni[6]&15|64,ni[8]=ni[8]&63|128;let r=0,e="";return e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+="-",e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+="-",e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+="-",e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+="-",e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+=Ki[ni[r++]],e+=Ki[ni[r++]],e}const ma=()=>new Map,DS=r=>{const e=ma();return r.forEach((t,i)=>{e.set(i,t)}),e},yf=(r,e,t)=>{let i=r.get(e);return i===void 0&&r.set(e,i=t()),i},PL=(r,e)=>{const t=[];for(const[i,s]of r)t.push(e(s,i));return t},RL=(r,e)=>{for(const[t,i]of r)if(e(i,t))return!0;return!1},Ld=()=>new Set,dE=r=>r[r.length-1],DL=(r,e)=>{for(let t=0;t<e.length;t++)r.push(e[t])},Ud=Array.from,CL=(r,e)=>{for(let t=0;t<r.length;t++)if(e(r[t],t,r))return!0;return!1},CS=Array.isArray;class wO{constructor(){this._observers=ma()}on(e,t){yf(this._observers,e,Ld).add(t)}once(e,t){const i=(...s)=>{this.off(e,i),t(...s)};this.on(e,i)}off(e,t){const i=this._observers.get(e);i!==void 0&&(i.delete(t),i.size===0&&this._observers.delete(e))}emit(e,t){return Ud((this._observers.get(e)||ma()).values()).forEach(i=>i(...t))}destroy(){this._observers=ma()}}const Xc=Math.floor,Xm=Math.abs,AO=(r,e)=>r<e?r:e,vf=(r,e)=>r>e?r:e,OL=r=>r!==0?r<0:1/r<0,NL=r=>r.toLowerCase(),IL=/^\s*/g,FL=r=>r.replace(IL,""),ML=/([A-Z])/g,qT=(r,e)=>FL(r.replace(ML,t=>`${e}${NL(t)}`)),BL=r=>{const e=unescape(encodeURIComponent(r)),t=e.length,i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=e.codePointAt(s);return i},u0=typeof TextEncoder<"u"?new TextEncoder:null,LL=r=>u0.encode(r),UL=u0?LL:BL;let fE=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});fE&&fE.decode(new Uint8Array).length===1&&(fE=null);const QT=r=>r===void 0?null:r;class GL{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let bO=new GL,zL=!0;try{typeof localStorage<"u"&&(bO=localStorage,zL=!1)}catch{}const HL=bO,jL=Object.assign,VL=Object.keys,WL=(r,e)=>{for(const t in r)e(r[t],t)},JT=r=>VL(r).length,$L=r=>{for(const e in r)return!1;return!0},KL=(r,e)=>{for(const t in r)if(!e(r[t],t))return!1;return!0},XL=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),YL=(r,e)=>r===e||JT(r)===JT(e)&&KL(r,(t,i)=>(t!==void 0||XL(e,i))&&e[i]===t),MA=(r,e,t=0)=>{try{for(;t<r.length;t++)r[t](...e)}finally{t<r.length&&MA(r,e,t+1)}},qL=(r,e)=>e.includes(r),c0=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name);typeof navigator<"u"&&/Mac/.test(navigator.platform);let Qo;const QL=()=>{if(Qo===void 0)if(c0){Qo=ma();const r=process.argv;let e=null;for(let t=0;t<r.length;t++){const i=r[t];i[0]==="-"?(e!==null&&Qo.set(e,""),e=i):e!==null&&(Qo.set(e,i),e=null)}e!==null&&Qo.set(e,"")}else typeof location=="object"?(Qo=ma(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[e,t]=r.split("=");Qo.set(`--${qT(e,"-")}`,t),Qo.set(`-${qT(e,"-")}`,t)}})):Qo=ma();return Qo},OS=r=>QL().has(r),NS=r=>QT(c0?process.env[r.toUpperCase()]:HL.getItem(r)),JL=r=>OS("--"+r)||NS(r)!==null;JL("production");const ZT=c0&&qL(process.env.FORCE_COLOR,["true","1","2"]),ZL=!OS("no-colors")&&(!c0||process.stdout.isTTY||ZT)&&(!c0||OS("color")||ZT||NS("COLORTERM")!==null||(NS("TERM")||"").includes("color")),eP=1,tP=2,_E=4,pE=8,e4=32,kO=64,jx=128,t4=31,rP=63,Ip=127,r4=2147483647,i4=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&Xc(r)===r),r1=r=>new Error(r),xa=()=>{throw r1("Method unimplemented")},Yc=()=>{throw r1("Unexpected case")},TO=(r,e,t)=>new Uint8Array(r,e,t);class q0{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const BA=()=>new q0,n4=r=>{let e=r.cpos;for(let t=0;t<r.bufs.length;t++)e+=r.bufs[t].length;return e},Ja=r=>{const e=new Uint8Array(n4(r));let t=0;for(let i=0;i<r.bufs.length;i++){const s=r.bufs[i];e.set(s,t),t+=s.length}return e.set(TO(r.cbuf.buffer,0,r.cpos),t),e},s4=(r,e)=>{const t=r.cbuf.length;t-r.cpos<e&&(r.bufs.push(TO(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(vf(t,e)*2),r.cpos=0)},Bi=(r,e)=>{const t=r.cbuf.length;r.cpos===t&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(t*2),r.cpos=0),r.cbuf[r.cpos++]=e},IS=Bi,Pr=(r,e)=>{for(;e>Ip;)Bi(r,jx|Ip&e),e=Xc(e/128);Bi(r,Ip&e)},LA=(r,e)=>{const t=OL(e);for(t&&(e=-e),Bi(r,(e>rP?jx:0)|(t?kO:0)|rP&e),e=Xc(e/64);e>0;)Bi(r,(e>Ip?jx:0)|Ip&e),e=Xc(e/128)},FS=new Uint8Array(3e4),o4=FS.length/3,a4=(r,e)=>{if(e.length<o4){const t=u0.encodeInto(e,FS).written||0;Pr(r,t);for(let i=0;i<t;i++)Bi(r,FS[i])}else As(r,UL(e))},l4=(r,e)=>{const t=unescape(encodeURIComponent(e)),i=t.length;Pr(r,i);for(let s=0;s<i;s++)Bi(r,t.codePointAt(s))},pd=u0&&u0.encodeInto?a4:l4,UA=(r,e)=>{const t=r.cbuf.length,i=r.cpos,s=AO(t-i,e.length),n=e.length-s;r.cbuf.set(e.subarray(0,s),i),r.cpos+=s,n>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(vf(t*2,n)),r.cbuf.set(e.subarray(s)),r.cpos=n)},As=(r,e)=>{Pr(r,e.byteLength),UA(r,e)},GA=(r,e)=>{s4(r,e);const t=new DataView(r.cbuf.buffer,r.cpos,e);return r.cpos+=e,t},u4=(r,e)=>GA(r,4).setFloat32(0,e,!1),c4=(r,e)=>GA(r,8).setFloat64(0,e,!1),h4=(r,e)=>GA(r,8).setBigInt64(0,e,!1),iP=new DataView(new ArrayBuffer(4)),d4=r=>(iP.setFloat32(0,r),iP.getFloat32(0)===r),h0=(r,e)=>{switch(typeof e){case"string":Bi(r,119),pd(r,e);break;case"number":i4(e)&&Xm(e)<=r4?(Bi(r,125),LA(r,e)):d4(e)?(Bi(r,124),u4(r,e)):(Bi(r,123),c4(r,e));break;case"bigint":Bi(r,122),h4(r,e);break;case"object":if(e===null)Bi(r,126);else if(CS(e)){Bi(r,117),Pr(r,e.length);for(let t=0;t<e.length;t++)h0(r,e[t])}else if(e instanceof Uint8Array)Bi(r,116),As(r,e);else{Bi(r,118);const t=Object.keys(e);Pr(r,t.length);for(let i=0;i<t.length;i++){const s=t[i];pd(r,s),h0(r,e[s])}}break;case"boolean":Bi(r,e?120:121);break;default:Bi(r,127)}};class nP extends q0{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Pr(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const sP=r=>{r.count>0&&(LA(r.encoder,r.count===1?r.s:-r.s),r.count>1&&Pr(r.encoder,r.count-2))};class Ym{constructor(){this.encoder=new q0,this.s=0,this.count=0}write(e){this.s===e?this.count++:(sP(this),this.count=1,this.s=e)}toUint8Array(){return sP(this),Ja(this.encoder)}}const oP=r=>{if(r.count>0){const e=r.diff*2+(r.count===1?0:1);LA(r.encoder,e),r.count>1&&Pr(r.encoder,r.count-2)}};class gE{constructor(){this.encoder=new q0,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(oP(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return oP(this),Ja(this.encoder)}}class f4{constructor(){this.sarr=[],this.s="",this.lensE=new Ym}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new q0;return this.sarr.push(this.s),this.s="",pd(e,this.sarr.join("")),UA(e,this.lensE.toUint8Array()),Ja(e)}}const _4=crypto.getRandomValues.bind(crypto),PO=()=>_4(new Uint32Array(1))[0],p4=[1e7]+-1e3+-4e3+-8e3+-1e11,g4=()=>p4.replace(/[018]/g,r=>(r^PO()&15>>r/4).toString(16)),m4=Date.now,aP=r=>new Promise(r);Promise.all.bind(Promise);class x4{constructor(e,t){this.left=e,this.right=t}}const Wa=(r,e)=>new x4(r,e),xh=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const y4=r=>PL(r,(e,t)=>`${t}:${e};`).join("");xh.ELEMENT_NODE;xh.TEXT_NODE;xh.CDATA_SECTION_NODE;xh.COMMENT_NODE;xh.DOCUMENT_NODE;xh.DOCUMENT_TYPE_NODE;xh.DOCUMENT_FRAGMENT_NODE;const gl=Symbol,RO=gl(),DO=gl(),v4=gl(),E4=gl(),S4=gl(),CO=gl(),w4=gl(),OO=gl(),A4=gl(),b4=r=>{const e=[];let t=0;for(;t<r.length;t++){const i=r[t];i.constructor===String||i.constructor===Number||i.constructor===Object&&e.push(JSON.stringify(i))}return e},k4={[RO]:Wa("font-weight","bold"),[DO]:Wa("font-weight","normal"),[v4]:Wa("color","blue"),[S4]:Wa("color","green"),[E4]:Wa("color","grey"),[CO]:Wa("color","red"),[w4]:Wa("color","purple"),[OO]:Wa("color","orange"),[A4]:Wa("color","black")},T4=r=>{const e=[],t=[],i=ma();let s=[],n=0;for(;n<r.length;n++){const o=r[n],a=k4[o];if(a!==void 0)i.set(a.left,a.right);else if(o.constructor===String||o.constructor===Number){const l=y4(i);n>0||l.length>0?(e.push("%c"+o),t.push(l)):e.push(o)}else break}for(n>0&&(s=t,s.unshift(e.join("")));n<r.length;n++){const o=r[n];o instanceof Symbol||s.push(o)}return s},P4=ZL?T4:b4,R4=(...r)=>{console.log(...P4(r)),D4.forEach(e=>e.print(r))},D4=Ld(),NO=r=>({[Symbol.iterator](){return this},next:r}),C4=(r,e)=>NO(()=>{let t;do t=r.next();while(!t.done&&!e(t.value));return t}),mE=(r,e)=>NO(()=>{const{done:t,value:i}=r.next();return{done:t,value:t?void 0:e(i)}});class O4{constructor(e,t){this.clock=e,this.len=t}}class i1{constructor(){this.clients=new Map}}const Gd=(r,e,t)=>e.clients.forEach((i,s)=>{const n=r.doc.store.clients.get(s);for(let o=0;o<i.length;o++){const a=i[o];BO(r,n,a.clock,a.len,t)}}),N4=(r,e)=>{let t=0,i=r.length-1;for(;t<=i;){const s=Xc((t+i)/2),n=r[s],o=n.clock;if(o<=e){if(e<o+n.len)return s;t=s+1}else i=s-1}return null},Q0=(r,e)=>{const t=r.clients.get(e.client);return t!==void 0&&N4(t,e.clock)!==null},zA=r=>{r.clients.forEach(e=>{e.sort((s,n)=>s.clock-n.clock);let t,i;for(t=1,i=1;t<e.length;t++){const s=e[i-1],n=e[t];s.clock+s.len>=n.clock?s.len=vf(s.len,n.clock+n.len-s.clock):(i<t&&(e[i]=n),i++)}e.length=i})},lP=r=>{const e=new i1;for(let t=0;t<r.length;t++)r[t].clients.forEach((i,s)=>{if(!e.clients.has(s)){const n=i.slice();for(let o=t+1;o<r.length;o++)DL(n,r[o].clients.get(s)||[]);e.clients.set(s,n)}});return zA(e),e},HA=(r,e,t,i)=>{yf(r.clients,e,()=>[]).push(new O4(t,i))},I4=()=>new i1,F4=(r,e)=>{Pr(r.restEncoder,e.clients.size),Ud(e.clients.entries()).sort((t,i)=>i[0]-t[0]).forEach(([t,i])=>{r.resetDsCurVal(),Pr(r.restEncoder,t);const s=i.length;Pr(r.restEncoder,s);for(let n=0;n<s;n++){const o=i[n];r.writeDsClock(o.clock),r.writeDsLen(o.len)}})},IO=PO;class Ef extends wO{constructor({guid:e=g4(),collectionid:t=null,gc:i=!0,gcFilter:s=()=>!0,meta:n=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=i,this.gcFilter=s,this.clientID=IO(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new K4,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=n,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=aP(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>aP(c=>{const d=f=>{(f===void 0||f===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ir(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ud(this.subdocs).map(e=>e.guid))}transact(e,t=null){return Ir(this,e,t)}get(e,t=tn){const i=yf(this.share,e,()=>{const n=new t;return n._integrate(this,null),n}),s=i.constructor;if(t!==tn&&s!==t)if(s===tn){const n=new t;n._map=i._map,i._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=n}),n._start=i._start;for(let o=n._start;o!==null;o=o.right)o.parent=n;return n._length=i._length,this.share.set(e,n),n._integrate(this,null),n}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return i}getArray(e=""){return this.get(e,Fp)}getText(e=""){return this.get(e,Kx)}getMap(e=""){return this.get(e,il)}getXmlFragment(e=""){return this.get(e,zd)}toJSON(){const e={};return this.share.forEach((t,i)=>{e[i]=t.toJSON()}),e}destroy(){Ud(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new Ef({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Ir(e.parent.doc,i=>{const s=t.doc;e.deleted||i.subdocsAdded.add(s),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class M4{constructor(){this.restEncoder=BA()}toUint8Array(){return Ja(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Pr(this.restEncoder,e)}writeDsLen(e){Pr(this.restEncoder,e)}}class B4 extends M4{writeLeftID(e){Pr(this.restEncoder,e.client),Pr(this.restEncoder,e.clock)}writeRightID(e){Pr(this.restEncoder,e.client),Pr(this.restEncoder,e.clock)}writeClient(e){Pr(this.restEncoder,e)}writeInfo(e){IS(this.restEncoder,e)}writeString(e){pd(this.restEncoder,e)}writeParentInfo(e){Pr(this.restEncoder,e?1:0)}writeTypeRef(e){Pr(this.restEncoder,e)}writeLen(e){Pr(this.restEncoder,e)}writeAny(e){h0(this.restEncoder,e)}writeBuf(e){As(this.restEncoder,e)}writeJSON(e){pd(this.restEncoder,JSON.stringify(e))}writeKey(e){pd(this.restEncoder,e)}}class L4{constructor(){this.restEncoder=BA(),this.dsCurrVal=0}toUint8Array(){return Ja(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Pr(this.restEncoder,t)}writeDsLen(e){e===0&&Yc(),Pr(this.restEncoder,e-1),this.dsCurrVal+=e}}class U4 extends L4{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new gE,this.clientEncoder=new Ym,this.leftClockEncoder=new gE,this.rightClockEncoder=new gE,this.infoEncoder=new nP(IS),this.stringEncoder=new f4,this.parentInfoEncoder=new nP(IS),this.typeRefEncoder=new Ym,this.lenEncoder=new Ym}toUint8Array(){const e=BA();return Pr(e,0),As(e,this.keyClockEncoder.toUint8Array()),As(e,this.clientEncoder.toUint8Array()),As(e,this.leftClockEncoder.toUint8Array()),As(e,this.rightClockEncoder.toUint8Array()),As(e,Ja(this.infoEncoder)),As(e,this.stringEncoder.toUint8Array()),As(e,Ja(this.parentInfoEncoder)),As(e,this.typeRefEncoder.toUint8Array()),As(e,this.lenEncoder.toUint8Array()),UA(e,Ja(this.restEncoder)),Ja(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){h0(this.restEncoder,e)}writeBuf(e){As(this.restEncoder,e)}writeJSON(e){h0(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const G4=(r,e,t,i)=>{i=vf(i,e[0].id.clock);const s=ll(e,i);Pr(r.restEncoder,e.length-s),r.writeClient(t),Pr(r.restEncoder,i);const n=e[s];n.write(r,i-n.id.clock);for(let o=s+1;o<e.length;o++)e[o].write(r,0)},z4=(r,e,t)=>{const i=new Map;t.forEach((s,n)=>{Wn(e,n)>s&&i.set(n,s)}),jA(e).forEach((s,n)=>{t.has(n)||i.set(n,0)}),Pr(r.restEncoder,i.size),Ud(i.entries()).sort((s,n)=>n[0]-s[0]).forEach(([s,n])=>{G4(r,e.clients.get(s),s,n)})},H4=(r,e)=>z4(r,e.doc.store,e.beforeState);class j4{constructor(){this.l=[]}}const uP=()=>new j4,cP=(r,e)=>r.l.push(e),hP=(r,e)=>{const t=r.l,i=t.length;r.l=t.filter(s=>e!==s),i===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},FO=(r,e,t)=>MA(r.l,[e,t]);class qm{constructor(e,t){this.client=e,this.clock=t}}const tm=(r,e)=>r===e||r!==null&&e!==null&&r.client===e.client&&r.clock===e.clock,Hr=(r,e)=>new qm(r,e),V4=r=>{for(const[e,t]of r.doc.share.entries())if(t===r)return e;throw Yc()},Vx=(r,e)=>{for(;e!==null;){if(e.parent===r)return!0;e=e.parent._item}return!1};class W4{constructor(e,t){this.ds=e,this.sv=t}}const $4=(r,e)=>new W4(r,e);$4(I4(),new Map);const n_=(r,e)=>e===void 0?!r.deleted:e.sv.has(r.id.client)&&(e.sv.get(r.id.client)||0)>r.id.clock&&!Q0(e.ds,r.id),MS=(r,e)=>{const t=yf(r.meta,MS,Ld),i=r.doc.store;t.has(e)||(e.sv.forEach((s,n)=>{s<Wn(i,n)&&cs(r,Hr(n,s))}),Gd(r,e.ds,s=>{}),t.add(e))};class K4{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const jA=r=>{const e=new Map;return r.clients.forEach((t,i)=>{const s=t[t.length-1];e.set(i,s.id.clock+s.length)}),e},Wn=(r,e)=>{const t=r.clients.get(e);if(t===void 0)return 0;const i=t[t.length-1];return i.id.clock+i.length},MO=(r,e)=>{let t=r.clients.get(e.id.client);if(t===void 0)t=[],r.clients.set(e.id.client,t);else{const i=t[t.length-1];if(i.id.clock+i.length!==e.id.clock)throw Yc()}t.push(e)},ll=(r,e)=>{let t=0,i=r.length-1,s=r[i],n=s.id.clock;if(n===e)return i;let o=Xc(e/(n+s.length-1)*i);for(;t<=i;){if(s=r[o],n=s.id.clock,n<=e){if(e<n+s.length)return o;t=o+1}else i=o-1;o=Xc((t+i)/2)}throw Yc()},X4=(r,e)=>{const t=r.clients.get(e.client);return t[ll(t,e.clock)]},Qm=X4,BS=(r,e,t)=>{const i=ll(e,t),s=e[i];return s.id.clock<t&&s instanceof ei?(e.splice(i+1,0,tN(r,s,t-s.id.clock)),i+1):i},cs=(r,e)=>{const t=r.doc.store.clients.get(e.client);return t[BS(r,t,e.clock)]},dP=(r,e,t)=>{const i=e.clients.get(t.client),s=ll(i,t.clock),n=i[s];return t.clock!==n.id.clock+n.length-1&&n.constructor!==su&&i.splice(s+1,0,tN(r,n,t.clock-n.id.clock+1)),n},Y4=(r,e,t)=>{const i=r.clients.get(e.id.client);i[ll(i,e.id.clock)]=t},BO=(r,e,t,i,s)=>{if(i===0)return;const n=t+i;let o=BS(r,e,t),a;do a=e[o++],n<a.id.clock+a.length&&BS(r,e,n),s(a);while(o<e.length&&e[o].id.clock<n)};class q4{constructor(e,t,i){this.doc=e,this.deleteSet=new i1,this.beforeState=jA(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const fP=(r,e)=>e.deleteSet.clients.size===0&&!RL(e.afterState,(t,i)=>e.beforeState.get(i)!==t)?!1:(zA(e.deleteSet),H4(r,e),F4(r,e.deleteSet),!0),_P=(r,e,t)=>{const i=e._item;(i===null||i.id.clock<(r.beforeState.get(i.id.client)||0)&&!i.deleted)&&yf(r.changed,e,Ld).add(t)},Jm=(r,e)=>{const t=r[e-1],i=r[e];t.deleted===i.deleted&&t.constructor===i.constructor&&t.mergeWith(i)&&(r.splice(e,1),i instanceof ei&&i.parentSub!==null&&i.parent._map.get(i.parentSub)===i&&i.parent._map.set(i.parentSub,t))},Q4=(r,e,t)=>{for(const[i,s]of r.clients.entries()){const n=e.clients.get(i);for(let o=s.length-1;o>=0;o--){const a=s[o],l=a.clock+a.len;for(let c=ll(n,a.clock),d=n[c];c<n.length&&d.id.clock<l;d=n[++c]){const f=n[c];if(a.clock+a.len<=f.id.clock)break;f instanceof ei&&f.deleted&&!f.keep&&t(f)&&f.gc(e,!1)}}}},J4=(r,e)=>{r.clients.forEach((t,i)=>{const s=e.clients.get(i);for(let n=t.length-1;n>=0;n--){const o=t[n],a=AO(s.length-1,1+ll(s,o.clock+o.len-1));for(let l=a,c=s[l];l>0&&c.id.clock>=o.clock;c=s[--l])Jm(s,l)}})},LO=(r,e)=>{if(e<r.length){const t=r[e],i=t.doc,s=i.store,n=t.deleteSet,o=t._mergeStructs;try{zA(n),t.afterState=jA(t.doc.store),i.emit("beforeObserverCalls",[t,i]);const a=[];t.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(t,l)})),a.push(()=>{t.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,f)=>d.path.length-f.path.length),FO(c._dEH,l,t))})}),a.push(()=>i.emit("afterTransaction",[t,i])),MA(a,[]),t._needFormattingCleanup&&hU(t)}finally{i.gc&&Q4(n,s,i.gcFilter),J4(n,s),t.afterState.forEach((d,f)=>{const g=t.beforeState.get(f)||0;if(g!==d){const x=s.clients.get(f),E=vf(ll(x,g),1);for(let P=x.length-1;P>=E;P--)Jm(x,P)}});for(let d=0;d<o.length;d++){const{client:f,clock:g}=o[d].id,x=s.clients.get(f),E=ll(x,g);E+1<x.length&&Jm(x,E+1),E>0&&Jm(x,E)}if(!t.local&&t.afterState.get(i.clientID)!==t.beforeState.get(i.clientID)&&(R4(OO,RO,"[yjs] ",DO,CO,"Changed the client-id because another client seems to be using it."),i.clientID=IO()),i.emit("afterTransactionCleanup",[t,i]),i._observers.has("update")){const d=new B4;fP(d,t)&&i.emit("update",[d.toUint8Array(),t.origin,i,t])}if(i._observers.has("updateV2")){const d=new U4;fP(d,t)&&i.emit("updateV2",[d.toUint8Array(),t.origin,i,t])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=t;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=i.clientID,d.collectionid==null&&(d.collectionid=i.collectionid),i.subdocs.add(d)}),c.forEach(d=>i.subdocs.delete(d)),i.emit("subdocs",[{loaded:l,added:a,removed:c},i,t]),c.forEach(d=>d.destroy())),r.length<=e+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,r])):LO(r,e+1)}}},Ir=(r,e,t=null,i=!0)=>{const s=r._transactionCleanups;let n=!1,o=null;r._transaction===null&&(n=!0,r._transaction=new q4(r,t,i),s.push(r._transaction),s.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{o=e(r._transaction)}finally{if(n){const a=r._transaction===s[0];r._transaction=null,a&&LO(s,0)}}return o};class Z4{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const pP=(r,e,t)=>{Gd(r,t.deletions,i=>{i instanceof ei&&e.scope.some(s=>Vx(s,i))&&KA(i,!1)})},gP=(r,e,t)=>{let i=null,s=null;const n=r.doc,o=r.scope;if(Ir(n,a=>{for(;e.length>0&&i===null;){const l=n.store,c=e.pop(),d=new Set,f=[];let g=!1;Gd(a,c.insertions,x=>{if(x instanceof ei){if(x.redone!==null){let{item:E,diff:P}=EU(l,x.id);P>0&&(E=cs(a,Hr(E.id.client,E.id.clock+P))),x=E}!x.deleted&&o.some(E=>Vx(E,x))&&f.push(x)}}),Gd(a,c.deletions,x=>{x instanceof ei&&o.some(E=>Vx(E,x))&&!Q0(c.insertions,x.id)&&d.add(x)}),d.forEach(x=>{g=rN(a,x,d,c.insertions,r.ignoreRemoteMapChanges,r)!==null||g});for(let x=f.length-1;x>=0;x--){const E=f[x];r.deleteFilter(E)&&(E.delete(a),g=!0)}i=g?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),s=a},r),i!=null){const a=s.changedParentTypes;r.emit("stack-item-popped",[{stackItem:i,type:t,changedParentTypes:a},r])}return i};class eU extends wO{constructor(e,{captureTimeout:t=500,captureTransaction:i=l=>!0,deleteFilter:s=()=>!0,trackedOrigins:n=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=CS(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.addToScope(e),this.deleteFilter=s,n.add(this),this.trackedOrigins=n,this.captureTransaction=i,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=a,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=t,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(b=>l.changedParentTypes.has(b))||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,d=this.redoing,f=c?this.redoStack:this.undoStack;c?this.stopCapturing():d||this.clear(!1,!0);const g=new i1;l.afterState.forEach((b,D)=>{const C=l.beforeState.get(D)||0,O=b-C;O>0&&HA(g,D,C,O)});const x=m4();let E=!1;if(this.lastChange>0&&x-this.lastChange<this.captureTimeout&&f.length>0&&!c&&!d){const b=f[f.length-1];b.deletions=lP([b.deletions,l.deleteSet]),b.insertions=lP([b.insertions,g])}else f.push(new Z4(l.deleteSet,g)),E=!0;!c&&!d&&(this.lastChange=x),Gd(l,l.deleteSet,b=>{b instanceof ei&&this.scope.some(D=>Vx(D,b))&&KA(b,!0)});const P=[{stackItem:f[f.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];E?this.emit("stack-item-added",P):this.emit("stack-item-updated",P)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=CS(e)?e:[e],e.forEach(t=>{this.scope.every(i=>i!==t)&&this.scope.push(t)})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(i=>{e&&(this.undoStack.forEach(s=>pP(i,this,s)),this.undoStack=[]),t&&(this.redoStack.forEach(s=>pP(i,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=gP(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=gP(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class n1{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=tU(this.currentTarget,this.target))}deletes(e){return Q0(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(s=>{if(s!==null){const n=t._map.get(s);let o,a;if(this.adds(n)){let l=n.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(n))if(l!==null&&this.deletes(l))o="delete",a=dE(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=dE(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(n))o="delete",a=dE(n.content.getContent());else return;e.set(s,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){const t=this.target,i=Ld(),s=Ld(),n=[];if(e={added:i,deleted:s,delta:n,keys:this.keys},this.transaction.changed.get(t).has(null)){let a=null;const l=()=>{a&&n.push(a)};for(let c=t._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,s.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),i.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const tU=(r,e)=>{const t=[];for(;e._item!==null&&e!==r;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let i=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)s.deleted||i++,s=s.right;t.unshift(i)}e=e._item.parent}return t},UO=80;let VA=0;class rU{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=VA++}}const iU=r=>{r.timestamp=VA++},GO=(r,e,t)=>{r.p.marker=!1,r.p=e,e.marker=!0,r.index=t,r.timestamp=VA++},nU=(r,e,t)=>{if(r.length>=UO){const i=r.reduce((s,n)=>s.timestamp<n.timestamp?s:n);return GO(i,e,t),i}else{const i=new rU(e,t);return r.push(i),i}},s1=(r,e)=>{if(r._start===null||e===0||r._searchMarker===null)return null;const t=r._searchMarker.length===0?null:r._searchMarker.reduce((n,o)=>Xm(e-n.index)<Xm(e-o.index)?n:o);let i=r._start,s=0;for(t!==null&&(i=t.p,s=t.index,iU(t));i.right!==null&&s<e;){if(!i.deleted&&i.countable){if(e<s+i.length)break;s+=i.length}i=i.right}for(;i.left!==null&&s>e;)i=i.left,!i.deleted&&i.countable&&(s-=i.length);for(;i.left!==null&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)i=i.left,!i.deleted&&i.countable&&(s-=i.length);return t!==null&&Xm(t.index-s)<i.parent.length/UO?(GO(t,i,s),t):nU(r._searchMarker,i,s)},d0=(r,e,t)=>{for(let i=r.length-1;i>=0;i--){const s=r[i];if(t>0){let n=s.p;for(n.marker=!1;n&&(n.deleted||!n.countable);)n=n.left,n&&!n.deleted&&n.countable&&(s.index-=n.length);if(n===null||n.marker===!0){r.splice(i,1);continue}s.p=n,n.marker=!0}(e<s.index||t>0&&e===s.index)&&(s.index=vf(e,s.index+t))}},o1=(r,e,t)=>{const i=r,s=e.changedParentTypes;for(;yf(s,r,()=>[]).push(t),r._item!==null;)r=r._item.parent;FO(i._eH,t,e)};class tn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=uP(),this._dEH=uP(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw xa()}clone(){throw xa()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){cP(this._eH,e)}observeDeep(e){cP(this._dEH,e)}unobserve(e){hP(this._eH,e)}unobserveDeep(e){hP(this._dEH,e)}toJSON(){}}const zO=(r,e,t)=>{e<0&&(e=r._length+e),t<0&&(t=r._length+t);let i=t-e;const s=[];let n=r._start;for(;n!==null&&i>0;){if(n.countable&&!n.deleted){const o=n.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&i>0;a++)s.push(o[a]),i--;e=0}}n=n.right}return s},HO=r=>{const e=[];let t=r._start;for(;t!==null;){if(t.countable&&!t.deleted){const i=t.content.getContent();for(let s=0;s<i.length;s++)e.push(i[s])}t=t.right}return e},f0=(r,e)=>{let t=0,i=r._start;for(;i!==null;){if(i.countable&&!i.deleted){const s=i.content.getContent();for(let n=0;n<s.length;n++)e(s[n],t++,r)}i=i.right}},jO=(r,e)=>{const t=[];return f0(r,(i,s)=>{t.push(e(i,s,r))}),t},sU=r=>{let e=r._start,t=null,i=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),i=0,e=e.right}const s=t[i++];return t.length<=i&&(t=null),{done:!1,value:s}}}},VO=(r,e)=>{const t=s1(r,e);let i=r._start;for(t!==null&&(i=t.p,e-=t.index);i!==null;i=i.right)if(!i.deleted&&i.countable){if(e<i.length)return i.content.getContent()[e];e-=i.length}},Wx=(r,e,t,i)=>{let s=t;const n=r.doc,o=n.clientID,a=n.store,l=t===null?e._start:t.right;let c=[];const d=()=>{c.length>0&&(s=new ei(Hr(o,Wn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Hd(c)),s.integrate(r,0),c=[])};i.forEach(f=>{if(f===null)c.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(f);break;default:switch(d(),f.constructor){case Uint8Array:case ArrayBuffer:s=new ei(Hr(o,Wn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new a1(new Uint8Array(f))),s.integrate(r,0);break;case Ef:s=new ei(Hr(o,Wn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new l1(f)),s.integrate(r,0);break;default:if(f instanceof tn)s=new ei(Hr(o,Wn(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Du(f)),s.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},WO=r1("Length exceeded!"),$O=(r,e,t,i)=>{if(t>e._length)throw WO;if(t===0)return e._searchMarker&&d0(e._searchMarker,t,i.length),Wx(r,e,null,i);const s=t,n=s1(e,t);let o=e._start;for(n!==null&&(o=n.p,t-=n.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&cs(r,Hr(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&d0(e._searchMarker,s,i.length),Wx(r,e,o,i)},oU=(r,e,t)=>{let s=(e._searchMarker||[]).reduce((n,o)=>o.index>n.index?o:n,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return Wx(r,e,s,t)},KO=(r,e,t,i)=>{if(i===0)return;const s=t,n=i,o=s1(e,t);let a=e._start;for(o!==null&&(a=o.p,t-=o.index);a!==null&&t>0;a=a.right)!a.deleted&&a.countable&&(t<a.length&&cs(r,Hr(a.id.client,a.id.clock+t)),t-=a.length);for(;i>0&&a!==null;)a.deleted||(i<a.length&&cs(r,Hr(a.id.client,a.id.clock+i)),a.delete(r),i-=a.length),a=a.right;if(i>0)throw WO;e._searchMarker&&d0(e._searchMarker,s,-n+i)},$x=(r,e,t)=>{const i=e._map.get(t);i!==void 0&&i.delete(r)},WA=(r,e,t,i)=>{const s=e._map.get(t)||null,n=r.doc,o=n.clientID;let a;if(i==null)a=new Hd([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Hd([i]);break;case Uint8Array:a=new a1(i);break;case Ef:a=new l1(i);break;default:if(i instanceof tn)a=new Du(i);else throw new Error("Unexpected content type")}new ei(Hr(o,Wn(n.store,o)),s,s&&s.lastId,null,null,e,t,a).integrate(r,0)},$A=(r,e)=>{const t=r._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},XO=r=>{const e={};return r._map.forEach((t,i)=>{t.deleted||(e[i]=t.content.getContent()[t.length-1])}),e},YO=(r,e)=>{const t=r._map.get(e);return t!==void 0&&!t.deleted},rm=r=>C4(r.entries(),e=>!e[1].deleted);class aU extends n1{constructor(e,t){super(e,t),this._transaction=t}}class Fp extends tn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Fp;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Fp}clone(){const e=new Fp;return e.insert(0,this.toArray().map(t=>t instanceof tn?t.clone():t)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),o1(this,e,new aU(this,e))}insert(e,t){this.doc!==null?Ir(this.doc,i=>{$O(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?Ir(this.doc,t=>{oU(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?Ir(this.doc,i=>{KO(i,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return VO(this,e)}toArray(){return HO(this)}slice(e=0,t=this.length){return zO(this,e,t)}toJSON(){return this.map(e=>e instanceof tn?e.toJSON():e)}map(e){return jO(this,e)}forEach(e){f0(this,e)}[Symbol.iterator](){return sU(this)}_write(e){e.writeTypeRef(gU)}}class lU extends n1{constructor(e,t,i){super(e,t),this.keysChanged=i}}class il extends tn{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((i,s)=>{this.set(s,i)}),this._prelimContent=null}_copy(){return new il}clone(){const e=new il;return this.forEach((t,i)=>{e.set(i,t instanceof tn?t.clone():t)}),e}_callObserver(e,t){o1(this,e,new lU(this,e,t))}toJSON(){const e={};return this._map.forEach((t,i)=>{if(!t.deleted){const s=t.content.getContent()[t.length-1];e[i]=s instanceof tn?s.toJSON():s}}),e}get size(){return[...rm(this._map)].length}keys(){return mE(rm(this._map),e=>e[0])}values(){return mE(rm(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return mE(rm(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((t,i)=>{t.deleted||e(t.content.getContent()[t.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ir(this.doc,t=>{$x(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?Ir(this.doc,i=>{WA(i,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return $A(this,e)}has(e){return YO(this,e)}clear(){this.doc!==null?Ir(this.doc,e=>{this.forEach(function(t,i,s){$x(e,s,i)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(mU)}}const uu=(r,e)=>r===e||typeof r=="object"&&typeof e=="object"&&r&&e&&YL(r,e);class LS{constructor(e,t,i,s){this.left=e,this.right=t,this.index=i,this.currentAttributes=s}forward(){switch(this.right===null&&Yc(),this.right.content.constructor){case zi:this.right.deleted||Sf(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const mP=(r,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case zi:e.right.deleted||Sf(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&cs(r,Hr(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},im=(r,e,t)=>{const i=new Map,s=s1(e,t);if(s){const n=new LS(s.p.left,s.p,s.index,i);return mP(r,n,t-s.index)}else{const n=new LS(null,e._start,0,i);return mP(r,n,t)}},qO=(r,e,t,i)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===zi&&uu(i.get(t.right.content.key),t.right.content.value));)t.right.deleted||i.delete(t.right.content.key),t.forward();const s=r.doc,n=s.clientID;i.forEach((o,a)=>{const l=t.left,c=t.right,d=new ei(Hr(n,Wn(s.store,n)),l,l&&l.lastId,c,c&&c.id,e,null,new zi(a,o));d.integrate(r,0),t.right=d,t.forward()})},Sf=(r,e)=>{const{key:t,value:i}=e;i===null?r.delete(t):r.set(t,i)},QO=(r,e)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===zi&&uu(e[r.right.content.key]||null,r.right.content.value)))break;r.forward()}},JO=(r,e,t,i)=>{const s=r.doc,n=s.clientID,o=new Map;for(const a in i){const l=i[a],c=t.currentAttributes.get(a)||null;if(!uu(c,l)){o.set(a,c);const{left:d,right:f}=t;t.right=new ei(Hr(n,Wn(s.store,n)),d,d&&d.lastId,f,f&&f.id,e,null,new zi(a,l)),t.right.integrate(r,0),t.forward()}}return o},xE=(r,e,t,i,s)=>{t.currentAttributes.forEach((g,x)=>{s[x]===void 0&&(s[x]=null)});const n=r.doc,o=n.clientID;QO(t,s);const a=JO(r,e,t,s),l=i.constructor===String?new ul(i):i instanceof tn?new Du(i):new wf(i);let{left:c,right:d,index:f}=t;e._searchMarker&&d0(e._searchMarker,t.index,l.getLength()),d=new ei(Hr(o,Wn(n.store,o)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(r,0),t.right=d,t.index=f,t.forward(),qO(r,e,t,a)},xP=(r,e,t,i,s)=>{const n=r.doc,o=n.clientID;QO(t,s);const a=JO(r,e,t,s);e:for(;t.right!==null&&(i>0||a.size>0&&(t.right.deleted||t.right.content.constructor===zi));){if(!t.right.deleted)switch(t.right.content.constructor){case zi:{const{key:l,value:c}=t.right.content,d=s[l];if(d!==void 0){if(uu(d,c))a.delete(l);else{if(i===0)break e;a.set(l,c)}t.right.delete(r)}else t.currentAttributes.set(l,c);break}default:i<t.right.length&&cs(r,Hr(t.right.id.client,t.right.id.clock+i)),i-=t.right.length;break}t.forward()}if(i>0){let l="";for(;i>0;i--)l+=`
`;t.right=new ei(Hr(o,Wn(n.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new ul(l)),t.right.integrate(r,0),t.forward()}qO(r,e,t,a)},ZO=(r,e,t,i,s)=>{let n=e;const o=ma();for(;n&&(!n.countable||n.deleted);){if(!n.deleted&&n.content.constructor===zi){const c=n.content;o.set(c.key,c)}n=n.right}let a=0,l=!1;for(;e!==n;){if(t===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case zi:{const{key:d,value:f}=c,g=i.get(d)||null;(o.get(d)!==c||g===f)&&(e.delete(r),a++,!l&&(s.get(d)||null)===f&&g!==f&&(g===null?s.delete(d):s.set(d,g))),!l&&!e.deleted&&Sf(s,c);break}}}e=e.right}return a},uU=(r,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===zi){const i=e.content.key;t.has(i)?e.delete(r):t.add(i)}e=e.left}},cU=r=>{let e=0;return Ir(r.doc,t=>{let i=r._start,s=r._start,n=ma();const o=DS(n);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case zi:Sf(o,s.content);break;default:e+=ZO(t,i,s,n,o),n=DS(o),i=s;break}s=s.right}}),e},hU=r=>{const e=new Set,t=r.doc;for(const[i,s]of r.afterState.entries()){const n=r.beforeState.get(i)||0;s!==n&&BO(r,t.store.clients.get(i),n,s,o=>{!o.deleted&&o.content.constructor===zi&&o.constructor!==su&&e.add(o.parent)})}Ir(t,i=>{Gd(r,r.deleteSet,s=>{if(s instanceof su||!s.parent._hasFormatting||e.has(s.parent))return;const n=s.parent;s.content.constructor===zi?e.add(n):uU(i,s)});for(const s of e)cU(s)})},yP=(r,e,t)=>{const i=t,s=DS(e.currentAttributes),n=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Du:case wf:case ul:t<e.right.length&&cs(r,Hr(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(r);break}e.forward()}n&&ZO(r,n,e.right,s,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&d0(o._searchMarker,e.index,-i+t),e};class dU extends n1{constructor(e,t,i){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,i.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];Ir(e,i=>{const s=new Map,n=new Map;let o=this.target._start,a=null;const l={};let c="",d=0,f=0;const g=()=>{if(a!==null){let x=null;switch(a){case"delete":f>0&&(x={delete:f}),f=0;break;case"insert":(typeof c=="object"||c.length>0)&&(x={insert:c},s.size>0&&(x.attributes={},s.forEach((E,P)=>{E!==null&&(x.attributes[P]=E)}))),c="";break;case"retain":d>0&&(x={retain:d},$L(l)||(x.attributes=jL({},l))),d=0;break}x&&t.push(x),a=null}};for(;o!==null;){switch(o.content.constructor){case Du:case wf:this.adds(o)?this.deletes(o)||(g(),a="insert",c=o.content.getContent()[0],g()):this.deletes(o)?(a!=="delete"&&(g(),a="delete"),f+=1):o.deleted||(a!=="retain"&&(g(),a="retain"),d+=1);break;case ul:this.adds(o)?this.deletes(o)||(a!=="insert"&&(g(),a="insert"),c+=o.content.str):this.deletes(o)?(a!=="delete"&&(g(),a="delete"),f+=o.length):o.deleted||(a!=="retain"&&(g(),a="retain"),d+=o.length);break;case zi:{const{key:x,value:E}=o.content;if(this.adds(o)){if(!this.deletes(o)){const P=s.get(x)||null;uu(P,E)?E!==null&&o.delete(i):(a==="retain"&&g(),uu(E,n.get(x)||null)?delete l[x]:l[x]=E)}}else if(this.deletes(o)){n.set(x,E);const P=s.get(x)||null;uu(P,E)||(a==="retain"&&g(),l[x]=P)}else if(!o.deleted){n.set(x,E);const P=l[x];P!==void 0&&(uu(P,E)?P!==null&&o.delete(i):(a==="retain"&&g(),E===null?delete l[x]:l[x]=E))}o.deleted||(a==="insert"&&g(),Sf(s,o.content));break}}o=o.right}for(g();t.length>0;){const x=t[t.length-1];if(x.retain!==void 0&&x.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class Kx extends tn{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(i=>i())}catch(i){console.error(i)}this._pending=null}_copy(){return new Kx}clone(){const e=new Kx;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const i=new dU(this,e,t);o1(this,e,i),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===ul&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?Ir(this.doc,i=>{const s=new LS(null,this._start,0,new Map);for(let n=0;n<e.length;n++){const o=e[n];if(o.insert!==void 0){const a=!t&&typeof o.insert=="string"&&n===e.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&xE(i,this,s,a,o.attributes||{})}else o.retain!==void 0?xP(i,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&yP(i,s,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,i){const s=[],n=new Map,o=this.doc;let a="",l=this._start;function c(){if(a.length>0){const f={};let g=!1;n.forEach((E,P)=>{g=!0,f[P]=E});const x={insert:a};g&&(x.attributes=f),s.push(x),a=""}}const d=()=>{for(;l!==null;){if(n_(l,e)||t!==void 0&&n_(l,t))switch(l.content.constructor){case ul:{const f=n.get("ychange");e!==void 0&&!n_(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(c(),n.set("ychange",i?i("removed",l.id):{type:"removed"})):t!==void 0&&!n_(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(c(),n.set("ychange",i?i("added",l.id):{type:"added"})):f!==void 0&&(c(),n.delete("ychange")),a+=l.content.str;break}case Du:case wf:{c();const f={insert:l.content.getContent()[0]};if(n.size>0){const g={};f.attributes=g,n.forEach((x,E)=>{g[E]=x})}s.push(f);break}case zi:n_(l,e)&&(c(),Sf(n,l.content));break}l=l.right}c()};return e||t?Ir(o,f=>{e&&MS(f,e),t&&MS(f,t),d()},"cleanup"):d(),s}insert(e,t,i){if(t.length<=0)return;const s=this.doc;s!==null?Ir(s,n=>{const o=im(n,this,e);i||(i={},o.currentAttributes.forEach((a,l)=>{i[l]=a})),xE(n,this,o,t,i)}):this._pending.push(()=>this.insert(e,t,i))}insertEmbed(e,t,i={}){const s=this.doc;s!==null?Ir(s,n=>{const o=im(n,this,e);xE(n,this,o,t,i)}):this._pending.push(()=>this.insertEmbed(e,t,i))}delete(e,t){if(t===0)return;const i=this.doc;i!==null?Ir(i,s=>{yP(s,im(s,this,e),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,i){if(t===0)return;const s=this.doc;s!==null?Ir(s,n=>{const o=im(n,this,e);o.right!==null&&xP(n,this,o,t,i)}):this._pending.push(()=>this.format(e,t,i))}removeAttribute(e){this.doc!==null?Ir(this.doc,t=>{$x(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?Ir(this.doc,i=>{WA(i,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return $A(this,e)}getAttributes(){return XO(this)}_write(e){e.writeTypeRef(xU)}}class yE{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===Xx||t.constructor===zd)&&t._start!==null)e=t._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class zd extends tn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new zd}clone(){const e=new zd;return e.insert(0,this.toArray().map(t=>t instanceof tn?t.clone():t)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new yE(this,e)}querySelector(e){e=e.toUpperCase();const i=new yE(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return i.done?null:i.value}querySelectorAll(e){return e=e.toUpperCase(),Ud(new yE(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){o1(this,e,new fU(this,t,e))}toString(){return jO(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},i){const s=e.createDocumentFragment();return i!==void 0&&i._createAssociation(s,this),f0(this,n=>{s.insertBefore(n.toDOM(e,t,i),null)}),s}insert(e,t){this.doc!==null?Ir(this.doc,i=>{$O(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)Ir(this.doc,i=>{const s=e&&e instanceof tn?e._item:e;Wx(i,this,s,t)});else{const i=this._prelimContent,s=e===null?0:i.findIndex(n=>n===e)+1;if(s===0&&e!==null)throw r1("Reference item not found");i.splice(s,0,...t)}}delete(e,t=1){this.doc!==null?Ir(this.doc,i=>{KO(i,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return HO(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return VO(this,e)}slice(e=0,t=this.length){return zO(this,e,t)}forEach(e){f0(this,e)}_write(e){e.writeTypeRef(vU)}}class Xx extends zd{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((i,s)=>{this.setAttribute(s,i)}),this._prelimAttrs=null}_copy(){return new Xx(this.nodeName)}clone(){const e=new Xx(this.nodeName),t=this.getAttributes();return WL(t,(i,s)=>{typeof i=="string"&&e.setAttribute(s,i)}),e.insert(0,this.toArray().map(i=>i instanceof tn?i.clone():i)),e}toString(){const e=this.getAttributes(),t=[],i=[];for(const a in e)i.push(a);i.sort();const s=i.length;for(let a=0;a<s;a++){const l=i[a];t.push(l+'="'+e[l]+'"')}const n=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${n}${o}>${super.toString()}</${n}>`}removeAttribute(e){this.doc!==null?Ir(this.doc,t=>{$x(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?Ir(this.doc,i=>{WA(i,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return $A(this,e)}hasAttribute(e){return YO(this,e)}getAttributes(){return XO(this)}toDOM(e=document,t={},i){const s=e.createElement(this.nodeName),n=this.getAttributes();for(const o in n){const a=n[o];typeof a=="string"&&s.setAttribute(o,a)}return f0(this,o=>{s.appendChild(o.toDOM(e,t,i))}),i!==void 0&&i._createAssociation(s,this),s}_write(e){e.writeTypeRef(yU),e.writeKey(this.nodeName)}}class fU extends n1{constructor(e,t,i){super(e,i),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class eN{constructor(e,t){this.id=e,this.length=t}get deleted(){throw xa()}mergeWith(e){return!1}write(e,t,i){throw xa()}integrate(e,t){throw xa()}}const _U=0;class su extends eN{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),MO(e.doc.store,this)}write(e,t){e.writeInfo(_U),e.writeLen(this.length-t)}getMissing(e,t){return null}}class a1{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new a1(this.content)}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class Yx{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Yx(this.len)}splice(e){const t=new Yx(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){HA(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const pU=(r,e)=>new Ef({guid:r,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class l1{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new l1(pU(this.doc.guid,this.opts))}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class wf{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new wf(this.embed)}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class zi{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new zi(this.key,this.value)}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){const i=t.parent;i._searchMarker=null,i._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class Hd{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Hd(this.arr)}splice(e){const t=new Hd(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let s=t;s<i;s++){const n=this.arr[s];e.writeAny(n)}}getRef(){return 8}}class ul{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ul(this.str)}splice(e){const t=new ul(this.str.slice(e));this.str=this.str.slice(0,e);const i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",t.str="\uFFFD"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const gU=0,mU=1,xU=2,yU=3,vU=4;class Du{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Du(this.type._copy())}splice(e){throw xa()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(i=>{i.deleted?e._mergeStructs.push(i):i.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(i=>{for(;i!==null;)i.gc(e,!0),i=i.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const EU=(r,e)=>{let t=e,i=0,s;do i>0&&(t=Hr(t.client,t.clock+i)),s=Qm(r,t),i=t.clock-s.id.clock,t=s.redone;while(t!==null&&s instanceof ei);return{item:s,diff:i}},KA=(r,e)=>{for(;r!==null&&r.keep!==e;)r.keep=e,r=r.parent._item},tN=(r,e,t)=>{const{client:i,clock:s}=e.id,n=new ei(Hr(i,s+t),e,Hr(i,s+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&n.markDeleted(),e.keep&&(n.keep=!0),e.redone!==null&&(n.redone=Hr(e.redone.client,e.redone.clock+t)),e.right=n,n.right!==null&&(n.right.left=n),r._mergeStructs.push(n),n.parentSub!==null&&n.right===null&&n.parent._map.set(n.parentSub,n),e.length=t,n},vP=(r,e)=>CL(r,t=>Q0(t.deletions,e)),rN=(r,e,t,i,s,n)=>{const o=r.doc,a=o.store,l=o.clientID,c=e.redone;if(c!==null)return cs(r,c);let d=e.parent._item,f=null,g;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!t.has(d)||rN(r,d,t,i,s,n)===null))return null;for(;d.redone!==null;)d=cs(r,d.redone)}const x=d===null?e.parent:d.content.type;if(e.parentSub===null){for(f=e.left,g=e;f!==null;){let D=f;for(;D!==null&&D.parent._item!==d;)D=D.redone===null?null:cs(r,D.redone);if(D!==null&&D.parent._item===d){f=D;break}f=f.left}for(;g!==null;){let D=g;for(;D!==null&&D.parent._item!==d;)D=D.redone===null?null:cs(r,D.redone);if(D!==null&&D.parent._item===d){g=D;break}g=g.right}}else if(g=null,e.right&&!s){for(f=e;f!==null&&f.right!==null&&(f.right.redone||Q0(i,f.right.id)||vP(n.undoStack,f.right.id)||vP(n.redoStack,f.right.id));)for(f=f.right;f.redone;)f=cs(r,f.redone);if(f&&f.right!==null)return null}else f=x._map.get(e.parentSub)||null;const E=Wn(a,l),P=Hr(l,E),b=new ei(P,f,f&&f.lastId,g,g&&g.id,x,e.parentSub,e.content.copy());return e.redone=P,KA(b,!0),b.integrate(r,0),b};class ei extends eN{constructor(e,t,i,s,n,o,a,l){super(e,l.getLength()),this.origin=i,this.left=t,this.right=s,this.rightOrigin=n,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?tP:0}set marker(e){(this.info&pE)>0!==e&&(this.info^=pE)}get marker(){return(this.info&pE)>0}get keep(){return(this.info&eP)>0}set keep(e){this.keep!==e&&(this.info^=eP)}get countable(){return(this.info&tP)>0}get deleted(){return(this.info&_E)>0}set deleted(e){this.deleted!==e&&(this.info^=_E)}markDeleted(){this.info|=_E}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Wn(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Wn(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===qm&&this.id.client!==this.parent.client&&this.parent.clock>=Wn(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=dP(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=cs(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===su||this.right&&this.right.constructor===su)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===ei&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===ei&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===qm){const i=Qm(t,this.parent);i.constructor===su?this.parent=null:this.parent=i.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=dP(e,e.doc.store,Hr(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let i=this.left,s;if(i!==null)s=i.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const n=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),n.add(s),tm(this.origin,s.origin)){if(s.id.client<this.id.client)i=s,n.clear();else if(tm(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(Qm(e.doc.store,s.origin)))n.has(Qm(e.doc.store,s.origin))||(i=s,n.clear());else break;s=s.right}this.left=i}if(this.left!==null){const i=this.left.right;this.right=i,this.left.right=this}else{let i;if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start,this.parent._start=this;this.right=i}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),MO(e.doc.store,this),this.content.integrate(e,this),_P(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new su(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Hr(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&tm(e.origin,this.lastId)&&this.right===e&&tm(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(i=>{i.p===e&&(i.p=this,!this.deleted&&this.countable&&(i.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),HA(e.deleteSet,this.id.client,this.id.clock,this.length),_P(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Yc();this.content.gc(e),t?Y4(e,this,new su(this.id,this.length)):this.content=new Yx(this.length)}write(e,t){const i=t>0?Hr(this.id.client,this.id.clock+t-1):this.origin,s=this.rightOrigin,n=this.parentSub,o=this.content.getRef()&t4|(i===null?0:jx)|(s===null?0:kO)|(n===null?0:e4);if(e.writeInfo(o),i!==null&&e.writeLeftID(i),s!==null&&e.writeRightID(s),i===null&&s===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=V4(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===qm?(e.writeParentInfo(!1),e.writeLeftID(a)):Yc();n!==null&&e.writeString(n)}this.content.write(e,t)}}const iN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},nN="__ $YJS$ __";iN[nN]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");iN[nN]=!0;function SU(r,e){return t=>{const{ref:i,direction:s}=r,n=TL(),o=new il;if(o.set("id",n),Np(e).forEach(a=>{const l=e[a];if(uo(l))o.set(a,l);else if(Fd(l)){J(a==="style");const c=new il;Np(l).forEach(d=>{c.set(d,l[d])}),o.set(a,c)}else ze()}),s===Ui.inward){const a=t.getChildrenNodesOfId(i);if(o.set("from",i),a.length){const l=a.sort((c,d)=>Y0(d.get("order"),c.get("order")));o.set("order",ua(Sc("1",l[0].get("order"))))}else o.set("order","0.5")}else if(s===Ui.backward||s===Ui.forward){const a=t.getParentNodeOfId(i);if(!a)throw new Error("404");o.set("from",a.get("id"));const l=t.getNodeById(i);J(l);const c=l.get("order");if(J(c),s===Ui.backward){const d=t.getNextSiblingNodeOfId(i),f=d?d.get("order"):"1";o.set("order",ua(Sc(c,f)))}else{const d=t.getPreviousSiblingNodeOfId(i),f=d?d.get("order"):"0";f==="0"?o.set("order",ua(c)):o.set("order",ua(Sc(c,f)))}}else ze();return t.yModel.get("nodes").set(n,o),o}}function EP(r){return e=>{const{ref:t,direction:i=Ui.self}=r;switch(i){case Ui.forward:case Ui.backward:wU(e,t,i);break;case Ui.inward:sN(e,t);break;case Ui.self:qx(e,t);break;default:ze()}}}function wU(r,e,t){const i=r.getNodeById(e);J(i);const s=i.get("from");J(s);const n=r.getChildrenNodesOfId(s).sort((a,l)=>Y0(a.get("order"),l.get("order"))),o=n.indexOf(i);if(t===Ui.forward){if(o===0)throw new Error("400");qx(r,n[o-1].get("id"))}else if(t===Ui.backward){if(o===n.length-1)throw new Error("400");qx(r,n[o+1].get("id"))}else et()}function sN(r,e){const t=r.getChildrenNodesOfId(e);for(let i=0,s=t.length;i<s;i++)qx(r,t[i].get("id"))}function qx(r,e){sN(r,e),FA(r.yModel).delete(e)}function AU(r,e,t){return i=>{const s=i.getChildrenNodesOfId(e).sort((o,a)=>Y0(o.get("order"),a.get("order"))),n=i.getNodeById(r);if(J(n),n.set("from",e),Ti(t))s.length?n.set("order",ua(Sc(s[s.length-1].get("order"),"1"))):n.set("order","0.5");else{const o=i.getNodeById(t);o||et();const a=s.indexOf(o);if(a===0)n.set("order",ua(o.get("order")));else{const l=s[a-1];n.set("order",ua(Sc(l.get("order"),o.get("order"))))}}}}function bU(r,e){return t=>{const i=t.getParentNodeOfId(r),s=t.getChildrenNodesOfId(i.get("id")).sort((o,a)=>Y0(o.get("order"),a.get("order"))),n=t.getNodeById(r);if(J(n),J(n.get("from")===i.get("id")),Ti(e))s.length?n.set("order",ua(Sc(s[s.length-1].get("order"),"1"))):n.set("order","0.5");else{const o=t.getNodeById(e),a=s.indexOf(o);if(a===0)n.set("order",ua(o.get("order")));else{const l=s[a-1];l.get("id")!==r&&n.set("order",ua(Sc(l.get("order"),o.get("order"))))}}}}class Qx{constructor(e,t,i){u(this,"versionId");u(this,"isUndoing");u(this,"isRedoing");u(this,"resultingSelection");this.versionId=e,this.isUndoing=t,this.isRedoing=i}merge(e){const t=e.versionId,i=this.isUndoing||e.isUndoing,s=this.isRedoing||e.isRedoing;return new Qx(t,i,s)}}const dT=class extends zt{constructor(t,i,s,n){super();u(this,"id",dT.MODEL_ID++);u(this,"_yModel");u(this,"_undoManager");u(this,"ctx");u(this,"_isDisposed",!1);u(this,"_isDisposing",!1);u(this,"_versionId",1);u(this,"_alternativeVersionId",1);u(this,"_isUndoing");u(this,"_isRedoing");u(this,"_associatedResource");u(this,"_eventEmitter",this._register(new kU));u(this,"_onWillDispose",this._register(new Dt));this.doc=i,this.modelService=n,this.ctx=n,this._isUndoing=!1,this._isRedoing=!1,typeof s>"u"||s===null?this._associatedResource=l0.parse(`inmemory://model/${this.id}.json`):this._associatedResource=s,this._yModel=this._processInput(t),this._undoManager=new eU(this._yModel),this._registerUndoRedoListeners(),Reflect.set(window,"model",this)}onDidChangeContent(t){return this._eventEmitter.slowEvent(i=>t(i))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._isDisposed=!0,super.dispose(),this._isDisposing=!1}_registerUndoRedoListeners(){const t="version",i="versionBefore",s=o=>{const{meta:a}=o.stackItem;if(o.type==="redo"&&(a.set(t,this._versionId),a.set(i,this._versionId-1)),o.type==="undo"&&o.origin!==this._undoManager){const l=this.getVersionId();this._increaseVersionId(),a.set(t,this.getVersionId()),a.set(i,l),this._emitContentChangedEvent(new Qx(this._alternativeVersionId,!1,!1))}},n=o=>{const{meta:a}=o.stackItem;let l=a.get(i),c=a.get(t);const d=o.type==="undo",f=o.type==="redo";this._overwriteAlternativeVersionId(d?l:c),this._emitContentChangedEvent(new Qx(this._alternativeVersionId,d,f))};this._undoManager.on("stack-item-added",s),this._undoManager.on("stack-item-popped",n),this._register(sn(()=>this._undoManager.off("stack-item-added",s))),this._register(sn(()=>this._undoManager.off("stack-item-popped",n)))}get onWillDispose(){return this._onWillDispose.event}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getVersionId(){return this._assertNotDisposed(),this._versionId}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_emitContentChangedEvent(t){this._isDisposing||this._eventEmitter.fire(t)}get undoManager(){return this._undoManager}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}get yModel(){return this._yModel}_processInput(t){const i=this.doc.getMap(this._associatedResource.toString()),s=new il;return i.set("nodes",s),Np(t.nodes).forEach(n=>{const o=t.nodes[n],a=new il;s.set(n,a),Np(o).forEach(l=>{const c=o[l];if(Fd(c)){J(l==="style");const d=new il;Np(c).forEach(f=>{d.set(f,c[f])}),a.set(l,d)}else uo(c)?a.set(l,c):et()})}),i}getValue(){return this._yModel.toJSON()}get uri(){return this._associatedResource}_updateContextGuard(){if(!this.ctx.isUpdating())throw new Error("method should not be called outside transform()")}addNode(t,i){return this._updateContextGuard(),SU(Js(t),i)(this)}removeNode(t){this._updateContextGuard(),EP(t)(this)}removeNodes(t){this._updateContextGuard();for(const i of t)EP({ref:i,direction:Ui.self})(this)}reparentNode(t,i,s=void 0){this._updateContextGuard(),AU(t,i,s)(this)}reorderNode(t,i=void 0){this._updateContextGuard(),bU(t,i)(this)}getNodeById(t){return FA(this._yModel).get(t)}getParentNodeOfId(t){const i=this.getNodeById(t);if(!i)return;const s=Km(i);return s?this.getNodeById(s):void 0}getPreviousSiblingNodeOfId(t){const i=this.getParentNodeOfId(t);if(!i)throw new Error("404");const s=this.getChildrenNodesOfId(i.get("id"));if(s.length<=1)return;const n=s.findIndex(a=>a.get("id")===t);return s[n-1]||null}getNextSiblingNodeOfId(t){const i=this.getParentNodeOfId(t);if(!i)throw new Error("404");const s=this.getChildrenNodesOfId(i.get("id"));if(s.length<=1)return;const n=s.findIndex(a=>a.get("id")===t);return s[n+1]||null}getAncestorNodesOfId(t){const i=[];let s=this.getParentNodeOfId(t);for(;s;)i.unshift(s),s=this.getParentNodeOfId(s.get("id"));return i}isAncestorNodeOfId(t,i){return this.getAncestorNodesOfId(i).some(n=>n.get("id")===t)}getChildrenNodesOfId(t){return Array.from(this._yModel.get("nodes").values()).filter(s=>s.get("from")===t).sort((s,n)=>Y0(s.get("order"),n.get("order")))}queryNodes(t){const i=this._yModel.get("nodes");J(i);const s=[];for(const n of i.values())t(n)&&s.push(n);return s}};let Zm=dT;u(Zm,"MODEL_ID",0);class kU extends zt{constructor(){super();u(this,"_fastEmitter",this._register(new Dt));u(this,"fastEvent",this._fastEmitter.event);u(this,"_slowEmitter",this._register(new Dt));u(this,"slowEvent",this._slowEmitter.event);u(this,"_deferredCnt");u(this,"_deferredEvent");this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(t){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.resultingSelection=t;const i=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(i),this._slowEmitter.fire(i)}}fire(t){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(t):this._deferredEvent=t;return}this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}var TU=Object.defineProperty,PU=Object.getOwnPropertyDescriptor,RU=(r,e,t,i)=>{for(var s=i>1?void 0:i?PU(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&TU(e,t,s),s},DU=(r,e)=>(t,i)=>e(t,i,r);let US=class extends Zm{constructor(r,e,t,i){super(r,e,t,i)}replaceModel(r){ze()}};US=RU([DU(3,mf)],US);var CU=Object.defineProperty,OU=Object.getOwnPropertyDescriptor,NU=(r,e,t,i)=>{for(var s=i>1?void 0:i?OU(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&CU(e,t,s),s},IU=(r,e)=>(t,i)=>e(t,i,r);function s_(r){return r.toString()}let GS=class extends zt{constructor(e){super();u(this,"_serviceBrand");u(this,"id",performance.now());u(this,"doc",new Ef);u(this,"_onModelAdded",this._register(new Dt));u(this,"onModelAdded",this._onModelAdded.event);u(this,"_onModelRemoved",this._register(new Dt));u(this,"onModelRemoved",this._onModelRemoved.event);u(this,"_models",new Map);u(this,"_disposedModels");u(this,"_disposedModelsHeapSize");u(this,"modelChangeParticipant");u(this,"updateStackDepth",0);u(this,"updateMode",ss.None);u(this,"modelVersionBeforeChange",new Map);u(this,"_forkSymbol");u(this,"_beforeCursorState");u(this,"_sessionSource");this.instantiationService=e,this._disposedModels=new Map,this._disposedModelsHeapSize=0,this.modelChangeParticipant=new uL}updateModel(e,t){this.instantiationService.invokeFunction(i=>{!i.get(gf).listCanvases().find(a=>a.model===e)||(ze(),this.reset())})}createModel(e,t){const i=this._doCreateModel(e,t);return this._onModelAdded.fire(i),i}_doCreateModel(e,t){const i=this.instantiationService.createInstance(US,e,this.doc,t);t&&this._disposedModels.has(s_(t))&&ze();const s=s_(i.uri);if(this._models.has(s))throw new Error("ModelService: Cannot add model because it already exists!");return i.onWillDispose(()=>this._onWillDispose(i)),this._models.set(s,i),i}destroyModel(e){const t=this._models.get(s_(e));!t||t.dispose()}getModel(e){const t=s_(e);return this._models.get(t)}_onWillDispose(e){const t=s_(e.uri);this._models.delete(t),this._onModelRemoved.fire(e)}addChangeParticipant(e){return this.modelChangeParticipant.addSaveParticipant(e)}runChangeParticipants(e,t){this.modelChangeParticipant.participate(e,t)}getModelUniversally(e){return this._models.get(e)}getAllModels(){return Array.from(this._models.values())}beginUpdate(){this.updateStackDepth++}endUpdate(){this.updateStackDepth--}isUpdating(){return this.updateStackDepth>0}reset(){this.updateStackDepth=0,this.updateMode=ss.None}fork(e,t,i){if(!this._forkSymbol){this.isUpdating()&&et(),i&&(this._forkSymbol=i),this.updateMode===ss.Add&&this.commitAndMerge(this._sessionSource,t);for(const s of this.getAllModels())this.modelVersionBeforeChange.set(s,s.getVersionId());this._beforeCursorState=t.slice(),this._sessionSource=e}}add(e){this.updateMode===ss.None?this.updateMode=ss.Add:this.updateMode===ss.Transform&&et(),this.doUpdate(e)}commitAndMerge(e,t,i){this._forkSymbol&&i!==this._forkSymbol||(this._forkSymbol=void 0,this.updateMode=ss.None)}checkout(){this._forkSymbol=void 0,this.updateMode=ss.None}transform(e,t,i,s){if(this.updateMode===ss.Add&&this.commitAndMerge(this._sessionSource,i),this.updateMode===ss.None)this.updateMode=ss.Transform;else if(this.updateMode===ss.Transform)throw new Error("400");const n=this.doUpdate(t);return this.updateMode=ss.None,n}changeWithoutHistory(e){return this.doUpdate(e)}doUpdate(e){this.beginUpdate();let t=this.doc.transact(()=>{try{return e()}catch(i){console.error(i),et()}});return this.endUpdate(),t}};GS=NU([IU(0,pl)],GS);ba(mf,GS);class FU extends zt{constructor(t,i){super();u(this,"_serviceBrand");this._contextKeyService=t,this._commandService=i}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(t){return bA(this._getResolver().lookupKeybindings(t).map(i=>i.resolvedKeybinding))}lookupKeybinding(t){const i=this._getResolver().lookupPrimaryKeybinding(t);if(!!i)return i.resolvedKeybinding}dispatchEvent(t,i){return this._dispatch(t,i)}softDispatch(t,i){const s=this.resolveKeyboardEvent(t),[n]=s.getDispatchParts();if(n===null)return null;const o=this._contextKeyService.getContext(i);return this._getResolver().resolve(o,n)}_dispatch(t,i){return this._doDispatch(this.resolveKeyboardEvent(t),i)}_doDispatch(t,i){let s=!1;const[n]=t.getDispatchParts();if(n===null)return s;const o=this._contextKeyService.getContext(i);t.getLabel();const a=this._getResolver().resolve(o,n);return a&&a.commandId&&(a.bubble||(s=!0),typeof a.commandArgs>"u"?this._commandService.executeCommand(a.commandId).then(void 0,l=>console.warn(l)):this._commandService.executeCommand(a.commandId,a.commandArgs).then(void 0,l=>console.warn(l))),s}}class Mp{constructor(e,t){u(this,"_defaultKeybindings");u(this,"_keybindings");u(this,"_defaultBoundCommands");u(this,"_map");u(this,"_lookupMap");this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let i=0,s=e.length;i<s;i++){const n=e[i].command;n&&this._defaultBoundCommands.set(n,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Mp.combine(e,t);for(let i=0,s=this._keybindings.length;i<s;i++){const n=this._keybindings[i];n.keypressParts.length!==0&&(n.when&&n.when.type===vS.False||this._addKeyPress(n.keypressParts[0],n))}}static _isTargetedForRemoval(e,t,i,s,n){return!(e.command!==s||t&&e.keypressParts[0]!==t||i&&e.keypressParts[1]!==i||n&&(!e.when||!n.equals(e.when)))}static combine(e,t){e=e.slice(0);const i=[];for(const s of t){if(!s.command||s.command.length===0||s.command.charAt(0)!=="-"){i.push(s);continue}const n=s.command.substr(1),o=s.keypressParts[0],a=s.keypressParts[1],l=s.when;for(let c=e.length-1;c>=0;c--)this._isTargetedForRemoval(e[c],o,a,n,l)&&e.splice(c,1)}return e.concat(i)}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){const n=i[s];if(n.command===t.command)continue;const o=n.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&n.keypressParts[1]!==t.keypressParts[1]||Mp.whenIsEntirelyIncluded(n.when,t.when)&&this._removeFromLookupMap(n)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return t?e?this._implies(e,t):!1:!0}static _implies(e,t){const i=e.negate(),s=o=>o.type===vS.Or?o.expr:[o],n=s(i).concat(s(t));for(let o=0;o<n.length;o++){const l=n[o].negate();for(let c=o+1;c<n.length;c++){const d=n[c];if(l.equals(d))return!0}}return!1}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(typeof t>"u"||t.length===0)return[];const i=[];let s=0;for(let n=t.length-1;n>=0;n--)i[s++]=t[n];return i}lookupPrimaryKeybinding(e){const t=this._lookupMap.get(e);return typeof t>"u"||t.length===0?null:t[t.length-1]}resolve(e,t){this._log(`| Resolving ${t}`);let i=null;const s=this._map.get(t);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;i=s;const n=this._findCommand(e,i);return n?(this._log(`\\ From ${i.length} keybinding entries, matched ${n.command}, when: ${MU(n.when)}, source: ${BU(n)}.`),{leaveChord:n.keypressParts.length>1,commandId:n.command,commandArgs:n.commandArgs,bubble:n.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const s=t[i];if(!!Mp.contextMatchesRules(e,s.when))return s}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}_log(...e){}}function MU(r){return r?`${r.serialize()}`:"no when condition"}function BU(r){return r.extensionId?r.isBuiltinExtension?`built-in extension ${r.extensionId}`:`user extension ${r.extensionId}`:r.isDefault?"built-in":"user"}const oo=navigator.userAgent,LU=oo.indexOf("Windows")>=0,zS=oo.indexOf("Macintosh")>=0;oo.indexOf("Linux")>=0;const UU=oo.indexOf("Firefox")>=0,GU=oo.indexOf("AppleWebKit")>=0,zU=oo.indexOf("Chrome")>=0,HU=!zU&&oo.indexOf("Safari")>=0;oo.indexOf("iPad")>=0||HU&&navigator.maxTouchPoints>0;oo.indexOf("Edge/")>=0&&oo.indexOf("WebView/")>=0;oo.indexOf("Electron/")>=0;oo.indexOf("Android")>=0;var ya=(r=>(r[r.Windows=1]="Windows",r[r.Macintosh=2]="Macintosh",r[r.Linux=3]="Linux",r))(ya||{});const ac=zS?2:LU?1:3;var Te=(r=>(r[r.Unknown=0]="Unknown",r[r.Backspace=1]="Backspace",r[r.Tab=2]="Tab",r[r.Enter=3]="Enter",r[r.Shift=4]="Shift",r[r.Ctrl=5]="Ctrl",r[r.Alt=6]="Alt",r[r.PauseBreak=7]="PauseBreak",r[r.CapsLock=8]="CapsLock",r[r.Escape=9]="Escape",r[r.Space=10]="Space",r[r.PageUp=11]="PageUp",r[r.PageDown=12]="PageDown",r[r.End=13]="End",r[r.Home=14]="Home",r[r.LeftArrow=15]="LeftArrow",r[r.UpArrow=16]="UpArrow",r[r.RightArrow=17]="RightArrow",r[r.DownArrow=18]="DownArrow",r[r.Insert=19]="Insert",r[r.Delete=20]="Delete",r[r.KEY_0=21]="KEY_0",r[r.KEY_1=22]="KEY_1",r[r.KEY_2=23]="KEY_2",r[r.KEY_3=24]="KEY_3",r[r.KEY_4=25]="KEY_4",r[r.KEY_5=26]="KEY_5",r[r.KEY_6=27]="KEY_6",r[r.KEY_7=28]="KEY_7",r[r.KEY_8=29]="KEY_8",r[r.KEY_9=30]="KEY_9",r[r.KEY_A=31]="KEY_A",r[r.KEY_B=32]="KEY_B",r[r.KEY_C=33]="KEY_C",r[r.KEY_D=34]="KEY_D",r[r.KEY_E=35]="KEY_E",r[r.KEY_F=36]="KEY_F",r[r.KEY_G=37]="KEY_G",r[r.KEY_H=38]="KEY_H",r[r.KEY_I=39]="KEY_I",r[r.KEY_J=40]="KEY_J",r[r.KEY_K=41]="KEY_K",r[r.KEY_L=42]="KEY_L",r[r.KEY_M=43]="KEY_M",r[r.KEY_N=44]="KEY_N",r[r.KEY_O=45]="KEY_O",r[r.KEY_P=46]="KEY_P",r[r.KEY_Q=47]="KEY_Q",r[r.KEY_R=48]="KEY_R",r[r.KEY_S=49]="KEY_S",r[r.KEY_T=50]="KEY_T",r[r.KEY_U=51]="KEY_U",r[r.KEY_V=52]="KEY_V",r[r.KEY_W=53]="KEY_W",r[r.KEY_X=54]="KEY_X",r[r.KEY_Y=55]="KEY_Y",r[r.KEY_Z=56]="KEY_Z",r[r.Meta=57]="Meta",r[r.ContextMenu=58]="ContextMenu",r[r.F1=59]="F1",r[r.F2=60]="F2",r[r.F3=61]="F3",r[r.F4=62]="F4",r[r.F5=63]="F5",r[r.F6=64]="F6",r[r.F7=65]="F7",r[r.F8=66]="F8",r[r.F9=67]="F9",r[r.F10=68]="F10",r[r.F11=69]="F11",r[r.F12=70]="F12",r[r.F13=71]="F13",r[r.F14=72]="F14",r[r.F15=73]="F15",r[r.F16=74]="F16",r[r.F17=75]="F17",r[r.F18=76]="F18",r[r.F19=77]="F19",r[r.NumLock=78]="NumLock",r[r.ScrollLock=79]="ScrollLock",r[r.US_SEMICOLON=80]="US_SEMICOLON",r[r.US_EQUAL=81]="US_EQUAL",r[r.US_COMMA=82]="US_COMMA",r[r.US_MINUS=83]="US_MINUS",r[r.US_DOT=84]="US_DOT",r[r.US_SLASH=85]="US_SLASH",r[r.US_BACKTICK=86]="US_BACKTICK",r[r.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",r[r.US_BACKSLASH=88]="US_BACKSLASH",r[r.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",r[r.US_QUOTE=90]="US_QUOTE",r[r.OEM_8=91]="OEM_8",r[r.OEM_102=92]="OEM_102",r[r.NUMPAD_0=93]="NUMPAD_0",r[r.NUMPAD_1=94]="NUMPAD_1",r[r.NUMPAD_2=95]="NUMPAD_2",r[r.NUMPAD_3=96]="NUMPAD_3",r[r.NUMPAD_4=97]="NUMPAD_4",r[r.NUMPAD_5=98]="NUMPAD_5",r[r.NUMPAD_6=99]="NUMPAD_6",r[r.NUMPAD_7=100]="NUMPAD_7",r[r.NUMPAD_8=101]="NUMPAD_8",r[r.NUMPAD_9=102]="NUMPAD_9",r[r.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",r[r.NUMPAD_ADD=104]="NUMPAD_ADD",r[r.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",r[r.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",r[r.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",r[r.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",r[r.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",r[r.ABNT_C1=110]="ABNT_C1",r[r.ABNT_C2=111]="ABNT_C2",r[r.MAX_VALUE=112]="MAX_VALUE",r[r.Any=113]="Any",r[r.None=114]="None",r))(Te||{});class XA{constructor(){u(this,"_keyCodeToStr");u(this,"_strToKeyCode");this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const HS=new XA,jS=new XA,VS=new XA;(function(){function r(e,t,i=t,s=i){HS.define(e,t),jS.define(e,i),VS.define(e,s)}r(0,"unknown"),r(1,"Backspace"),r(2,"Tab"),r(3,"Enter"),r(4,"Shift"),r(5,"Ctrl"),r(6,"Alt"),r(7,"PauseBreak"),r(8,"CapsLock"),r(9,"Escape"),r(10,"Space"),r(11,"PageUp"),r(12,"PageDown"),r(13,"End"),r(14,"Home"),r(15,"LeftArrow","Left"),r(16,"UpArrow","Up"),r(17,"RightArrow","Right"),r(18,"DownArrow","Down"),r(19,"Insert"),r(20,"Delete"),r(21,"0"),r(22,"1"),r(23,"2"),r(24,"3"),r(25,"4"),r(26,"5"),r(27,"6"),r(28,"7"),r(29,"8"),r(30,"9"),r(31,"A"),r(32,"B"),r(33,"C"),r(34,"D"),r(35,"E"),r(36,"F"),r(37,"G"),r(38,"H"),r(39,"I"),r(40,"J"),r(41,"K"),r(42,"L"),r(43,"M"),r(44,"N"),r(45,"O"),r(46,"P"),r(47,"Q"),r(48,"R"),r(49,"S"),r(50,"T"),r(51,"U"),r(52,"V"),r(53,"W"),r(54,"X"),r(55,"Y"),r(56,"Z"),r(57,"Meta"),r(58,"ContextMenu"),r(59,"F1"),r(60,"F2"),r(61,"F3"),r(62,"F4"),r(63,"F5"),r(64,"F6"),r(65,"F7"),r(66,"F8"),r(67,"F9"),r(68,"F10"),r(69,"F11"),r(70,"F12"),r(71,"F13"),r(72,"F14"),r(73,"F15"),r(74,"F16"),r(75,"F17"),r(76,"F18"),r(77,"F19"),r(78,"NumLock"),r(79,"ScrollLock"),r(80,";",";","OEM_1"),r(81,"=","=","OEM_PLUS"),r(82,",",",","OEM_COMMA"),r(83,"-","-","OEM_MINUS"),r(84,".",".","OEM_PERIOD"),r(85,"/","/","OEM_2"),r(86,"`","`","OEM_3"),r(110,"ABNT_C1"),r(111,"ABNT_C2"),r(87,"[","[","OEM_4"),r(88,"\\","\\","OEM_5"),r(89,"]","]","OEM_6"),r(90,"'","'","OEM_7"),r(91,"OEM_8"),r(92,"OEM_102"),r(93,"NumPad0"),r(94,"NumPad1"),r(95,"NumPad2"),r(96,"NumPad3"),r(97,"NumPad4"),r(98,"NumPad5"),r(99,"NumPad6"),r(100,"NumPad7"),r(101,"NumPad8"),r(102,"NumPad9"),r(103,"NumPad_Multiply"),r(104,"NumPad_Add"),r(105,"NumPad_Separator"),r(106,"NumPad_Subtract"),r(107,"NumPad_Decimal"),r(108,"NumPad_Divide")})();var _0;(r=>{function e(o){return HS.keyCodeToStr(o)}r.toString=e;function t(o){return HS.strToKeyCode(o)}r.fromString=t;function i(o){return jS.keyCodeToStr(o)}r.toUserSettingsUS=i;function s(o){return VS.keyCodeToStr(o)}r.toUserSettingsGeneral=s;function n(o){return jS.strToKeyCode(o)||VS.strToKeyCode(o)}r.fromUserSettings=n})(_0||(_0={}));var ao=(r=>(r[r.CtrlCmd=2048]="CtrlCmd",r[r.Shift=1024]="Shift",r[r.Alt=512]="Alt",r[r.WinCtrl=256]="WinCtrl",r))(ao||{});class YA{constructor(e,t,i,s,n){u(this,"ctrlKey");u(this,"shiftKey");u(this,"altKey");u(this,"metaKey");u(this,"keyCode");this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=n}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){const e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",i=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`${e}${t}${i}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}modifierCount(){return Number(this.ctrlKey)+Number(this.shiftKey)+Number(this.altKey)+Number(this.metaKey)}codeCount(){return this.isDuplicateModifierCase()?this.modifierCount():this.modifierCount()+this.keyCode===114?0:1}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}function jU(r,e){const t=!!(r&2048),i=!!(r&256),s=e===ya.Macintosh?i:t,n=!!(r&1024),o=!!(r&512),a=e===ya.Macintosh?t:i,l=r&255;return new YA(s,n,o,a,l)}function SP(r,e){if(r===0)return null;const t=(r&65535)>>>0;if((r&4294901760)>>>16!==0)throw new Error("chordkeybinding is not su");return jU(t,e)}class VU{constructor(e,t,i,s,n){u(this,"ctrlKey");u(this,"shiftKey");u(this,"altKey");u(this,"metaKey");u(this,"keyLabel");this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=n}}class WU{}const oN=ln("commandService"),qA=new class{constructor(){u(this,"_commands",new Map);u(this,"_onDidRegisterCommand",new Dt);u(this,"onDidRegisterCommand",this._onDidRegisterCommand.event)}registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}const{id:t}=r;let i=this._commands.get(t);i||(i=new o0,this._commands.set(t,i));let s=i.unshift(r),n=sn(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),n}getCommand(r){const e=this._commands.get(r);if(!(!e||e.isEmpty()))return Wc.first(e)}getCommands(){const r=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&r.set(e,t)}return r}};var QA=(r=>(r[r.EditorCore=0]="EditorCore",r[r.EditorContrib=100]="EditorContrib",r[r.WorkbenchContrib=200]="WorkbenchContrib",r[r.BuiltinExtension=300]="BuiltinExtension",r[r.ExternalExtension=400]="ExternalExtension",r))(QA||{});class Jx{constructor(){u(this,"_coreKeybindings");u(this,"_extensionKeybindings");u(this,"_cachedMergedKeybindings");this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ac===ya.Windows){if(e&&e.win)return e.win}else if(ac===ya.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Jx.bindToCurrentPlatform(e);if(t&&t.primary){const i=SP(t.primary,ac);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let i=0,s=t.secondary.length;i<s;i++){const n=t.secondary[i],o=SP(n,ac);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-i-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),qA.registerCommand(e)}static _mightProduceChar(e){return e>=Te.KEY_0&&e<=Te.KEY_9||e>=Te.KEY_A&&e<=Te.KEY_Z?!0:e===Te.US_SEMICOLON||e===Te.US_EQUAL||e===Te.US_COMMA||e===Te.US_MINUS||e===Te.US_DOT||e===Te.US_SLASH||e===Te.US_BACKTICK||e===Te.ABNT_C1||e===Te.ABNT_C2||e===Te.US_OPEN_SQUARE_BRACKET||e===Te.US_BACKSLASH||e===Te.US_CLOSE_SQUARE_BRACKET||e===Te.US_QUOTE||e===Te.OEM_8||e===Te.OEM_102}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Jx._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,i,s,n,o){ac===ya.Windows&&this._assertNoCtrlAlt(e,t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:s,weight2:n}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(KU)),this._cachedMergedKeybindings.slice(0)}}const u1=new Jx,$U="platform.keybindingsRegistry";Vc.add($U,u1);function KU(r,e){return r.weight1!==e.weight1?r.weight1-e.weight1:r.command<e.command?-1:r.command>e.command?1:r.weight2-e.weight2}class wP{constructor(e,t,i,s,n,o,a){u(this,"resolvedKeybinding");u(this,"keypressParts");u(this,"bubble");u(this,"command");u(this,"commandArgs");u(this,"when");u(this,"isDefault");u(this,"extensionId");u(this,"isBuiltinExtension");this.resolvedKeybinding=e,this.keypressParts=e?AP(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=AP(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===wt.Caret:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=n,this.extensionId=o,this.isBuiltinExtension=a}}function AP(r){const e=[];for(let t=0,i=r.length;t<i;t++){const s=r[t];if(!s)return e;e.push(s)}return e}class XU{constructor(e,t,i=t){u(this,"modifierLabels");this.modifierLabels=[null],this.modifierLabels[ya.Macintosh]=e,this.modifierLabels[ya.Windows]=t,this.modifierLabels[ya.Linux]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let n=0,o=t.length;n<o;n++){const a=t[n],l=i(a);if(l===null)return null;s[n]=qU(a,l,this.modifierLabels[e])}return s.join(" ")}}const YU=new XU({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Windows",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function qU(r,e,t){if(e===null)return"";const i=[];return r.ctrlKey&&i.push(t.ctrlKey),r.shiftKey&&i.push(t.shiftKey),r.altKey&&i.push(t.altKey),r.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class QU extends WU{constructor(t,i){super();u(this,"_os");u(this,"_parts");if(i.length===0)throw new Error("400");this._os=t,this._parts=i}getLabel(){return YU.toLabel(this._os,this._parts,t=>this._getLabel(t))}getParts(){return this._parts.map(t=>this._getPart(t))}_getPart(t){return new VU(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,this._getLabel(t))}getDispatchParts(){return this._parts.map(t=>this._getDispatchPart(t))}getSingleModifierDispatchParts(){return this._parts.map(t=>this._getSingleModifierDispatchPart(t))}}class Zx extends QU{constructor(e,t){super(t,[e])}_keyCodeToUILabel(e){if(this._os===ya.Macintosh)switch(e){case Te.LeftArrow:return"\u2190";case Te.UpArrow:return"\u2191";case Te.RightArrow:return"\u2192";case Te.DownArrow:return"\u2193"}return _0.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getDispatchPart(e){return Zx.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=_0.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===Te.Ctrl&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===Te.Shift&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===Te.Alt&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===Te.Meta&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}}var JU=Object.defineProperty,ZU=Object.getOwnPropertyDescriptor,e8=(r,e,t,i)=>{for(var s=i>1?void 0:i?ZU(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&JU(e,t,s),s},bP=(r,e)=>(t,i)=>e(t,i,r);let WS=class extends FU{constructor(e,t){super(e,t);u(this,"_cachedResolver");u(this,"_dynamicKeybindings");this._cachedResolver=null,this._dynamicKeybindings=[]}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(u1.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Mp(e,t)}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let s=0;for(const n of e){const o=n.when||void 0,a=n.keybinding;if(!a)i[s++]=new wP(void 0,n.command,n.commandArgs,o,t,null,!1);else{const l=this.resolveKeybinding(a);for(const c of l)i[s++]=new wP(c,n.command,n.commandArgs,o,t,null,!1)}}return i}resolveKeybinding(e){return[new Zx(e,ac)]}resolveKeyboardEvent(e){const t=new YA(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Zx(t,ac)}};WS=e8([bP(0,_h),bP(1,oN)],WS);ba(IA,WS);class nm{constructor(){u(this,"segment");u(this,"value");u(this,"key");u(this,"left");u(this,"mid");u(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class t8{constructor(e=!0){u(this,"_value");u(this,"_from");u(this,"_to");this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===wt.Period)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?lO(e,this._value,0,e.length,this._from,this._to):SB(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class JA{constructor(e){u(this,"_iter");u(this,"_root");this._iter=e}static forConfigKeys(){return new JA(new t8)}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;for(this._root||(this._root=new nm,this._root.segment=i.value()),s=this._root;;){const o=i.cmp(s.segment);if(o>0)s.left||(s.left=new nm,s.left.segment=i.value()),s=s.left;else if(o<0)s.right||(s.right=new nm,s.right.segment=i.value()),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new nm,s.mid.segment=i.value()),s=s.mid;else break}const n=s.value;return s.value=t,s.key=e,n}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),s=[];let n=this._root;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([1,n]),n=n.left;else if(o<0)s.push([-1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else{for(t?(n.left=void 0,n.mid=void 0,n.right=void 0):n.value=void 0;s.length>0&&n.isEmpty();){let[a,l]=s.pop();switch(a){case 1:l.left=void 0;break;case 0:l.mid=void 0;break;case-1:l.right=void 0;break}n=l}break}}}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else return i.mid?this._entries(i.mid):void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}class r8{constructor(){u(this,"defaultValues");u(this,"configurationProperties");u(this,"excludedConfigurationProperties");this.defaultValues={},this.configurationProperties={},this.excludedConfigurationProperties={}}getConfigurationProperties(){return this.configurationProperties}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=[];e.forEach(s=>{i.push(...this.validateAndRegisterProperties(s,t)),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,i=1){i=Ti(e.scope)?i:e.scope;const s=[],n=e.properties;if(n)for(const a in n){if(t&&i8(a)){delete n[a];continue}const l=n[a];if(this.updatePropertyDefaultValue(a,l),tb.test(a)?l.scope=void 0:l.scope=Ti(l.scope)?i:l.scope,n[a].hasOwnProperty("included")&&!n[a].included){this.excludedConfigurationProperties[a]=n[a],delete n[a];continue}else this.configurationProperties[a]=n[a];!n[a].deprecationMessage&&n[a].markdownDeprecationMessage&&(n[a].deprecationMessage=n[a].markdownDeprecationMessage),s.push(a)}const o=e.allOf;if(o)for(const a of o)s.push(...this.validateAndRegisterProperties(a,t,i));return s}updatePropertyDefaultValue(e,t){let i=this.defaultValues[e];Mx(i)&&(i=t.default),Mx(i)&&(i=n8(t.type)),t.default=i}registerJSONConfiguration(e){const t=i=>{const s=i.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);const n=i.allOf;n&&n.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){}}}const aN="configurationRegistry";let ex=Reflect.get(wi,aN);ex||(ex=new r8,Reflect.set(wi,aN,ex));const ZA=ex;function i8(r){return r.trim()?tb.test(r)?`Cannot register '${r}. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`:ZA.getConfigurationProperties()[r]!==void 0?`Cannot register '${r}'. This property is already registered.`:null:"Cannot register an empty property"}function n8(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const lN=ln("configurationService");var Bp=(r=>(r[r.USER=1]="USER",r[r.WORKSPACE=2]="WORKSPACE",r[r.DEFAULT=3]="DEFAULT",r[r.MEMORY=4]="MEMORY",r))(Bp||{});function kP(r,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),n=i(r,s);return typeof n>"u"?t:n}function s8(r,e){const t=Object.create(null);for(const i in r)eb(t,i,r[i],e);return t}function eb(r,e,t,i){const s=e.split("."),n=s.pop();let o=r;for(let a=0;a<s.length;a++){const l=s[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[n]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function o8(r,e){const t=e.split(".");uN(r,t)}function uN(r,e){const t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){const i=r[t];typeof i=="object"&&!Array.isArray(i)&&(uN(i,e),Object.keys(i).length===0&&delete r[t])}}function a8(){const r=ZA.getConfigurationProperties();return Object.keys(r)}function l8(){const r=Object.create(null),e=ZA.getConfigurationProperties();for(const t in e){const i=e[t].default;eb(r,t,i,s=>console.error(`Conflict in default settings: ${s}`))}return r}const u8="\\[.*\\]$",tb=new RegExp(u8);function c8(r){return r.substring(1,r.length-1)}var h8=Object.defineProperty,d8=Object.getOwnPropertyDescriptor,f8=(r,e,t,i)=>{for(var s=i>1?void 0:i?d8(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&h8(e,t,s),s},_8=(r,e)=>(t,i)=>e(t,i,r);const Lp="data-keybinding-context";class rb{constructor(e,t){u(this,"_parent");u(this,"_value");u(this,"_id");this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}updateParent(e){this._parent=e}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e={...e,...this._value},delete e._contextId,e}}const fT=class extends rb{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}};let wc=fT;u(wc,"INSTANCE",new fT);const jy=class extends rb{constructor(t,i,s){super(t,null);u(this,"_values",JA.forConfigKeys());u(this,"_listener");this._configurationService=i,this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===Bp.DEFAULT){const o=Array.from(Wc.map(this._values,([a])=>a));this._values.clear(),s.fire(new $S(o))}else{const o=[];for(const a of n.affectedKeys){const l=`config.${a}`,c=this._values.findSuperstr(l);c!==void 0&&(o.push(...Wc.map(c,([d])=>d)),this._values.deleteSuperstr(l)),this._values.has(l)&&(o.push(l),this._values.delete(l))}s.fire(new $S(o))}})}dispose(){this._listener.dispose()}getValue(t){if(t.indexOf(jy._keyPrefix)!==0)return super.getValue(t);if(this._values.has(t))return this._values.get(t);const i=t.substr(jy._keyPrefix.length),s=this._configurationService.getValue(i);let n;switch(typeof s){case"number":case"boolean":case"string":n=s;break;default:Array.isArray(s)?n=JSON.stringify(s):n=s}return this._values.set(t,n),n}setValue(t,i){return super.setValue(t,i)}removeValue(t){return super.removeValue(t)}collectAllValues(){const t=Object.create(null);return this._values.forEach((i,s)=>t[s]=i),{...t,...super.collectAllValues()}}};let tx=jy;u(tx,"_keyPrefix","config.");class p8{constructor(e,t,i){u(this,"_service");u(this,"_key");u(this,"_defaultValue");this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class TP{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class $S{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class g8{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class cN{constructor(e){u(this,"_isDisposed");u(this,"_myContextId");u(this,"_onDidChangeContext",new wS({merge:e=>new g8(e)}));u(this,"onDidChangeContext",this._onDidChangeContext.event);this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new p8(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new m8(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);!i||i.setValue(e,t)&&this._onDidChangeContext.fire(new TP(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new TP(e))}getContext(e){return this._isDisposed?wc.INSTANCE:this.getContextValuesContainer(x8(e))}}let KS=class extends cN{constructor(e){super(0);u(this,"_lastContextId");u(this,"_contexts",new Map);u(this,"_toDispose",new pa);this._lastContextId=0;const t=new tx(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?wc.INSTANCE:this._contexts.get(e)||wc.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new rb(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}updateParent(e){throw new Error("Cannot update parent of root ContextKeyService")}};KS=f8([_8(0,lN)],KS);class m8 extends cN{constructor(t,i){super(t.createChildContext());u(this,"_parent");u(this,"_domNode");u(this,"_parentChangeListener",new RA);if(this._parent=t,this._updateParentChangeListener(),this._domNode=i,this._domNode.hasAttribute(Lp)){let s="";this._domNode.classList&&(s=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${s?": "+s:""}`)}this._domNode.setAttribute(Lp,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Lp),this._isDisposed=!0)}getContextValuesContainer(t){return this._isDisposed?wc.INSTANCE:this._parent.getContextValuesContainer(t)}createChildContext(t=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(t)}disposeContext(t){this._isDisposed||this._parent.disposeContext(t)}updateParent(t){const i=this._parent.getContextValuesContainer(this._myContextId),s=i.collectAllValues();this._parent=t,this._updateParentChangeListener();const n=this._parent.getContextValuesContainer(this._parent.contextId);i.updateParent(n);const o=i.collectAllValues(),a={...WT(s,o),...WT(o,s)},l=Object.keys(a);this._onDidChangeContext.fire(new $S(l))}}function x8(r){for(;r;){if(r.hasAttribute(Lp)){const e=r.getAttribute(Lp);return e?parseInt(e,10):NaN}r=r.parentElement}return 0}qA.registerCommand(AB,function(r,e,t){r.get(_h).createKey(String(e),t)});ba(_h,KS);const y8=ln("undoRedoService"),Vy=class{constructor(){u(this,"__classBland__","UndoRedoSource");u(this,"id");u(this,"order");this.id=Vy._ID++,this.order=1}static isInstance(e){return Reflect.get(e,"__classBland__")==="UndoRedoSource"}nextOrder(){return this.id===0?0:this.order++}};let Za=Vy;u(Za,"_ID",0),u(Za,"None",new Vy);var v8=Object.defineProperty,E8=Object.getOwnPropertyDescriptor,S8=(r,e,t,i)=>{for(var s=i>1?void 0:i?E8(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&v8(e,t,s),s},w8=(r,e)=>(t,i)=>e(t,i,r);let XS=class{constructor(r){this.modelService=r}canUndo(r){Za.isInstance(r)&&ze();const e=this.modelService.getModel(r);return J(e),e.canRedo()}undo(r){Za.isInstance(r)&&ze();const e=this.modelService.getModel(r);return J(e),e.undo()}canRedo(r){Za.isInstance(r)&&ze();const e=this.modelService.getModel(r);return J(e),e.canRedo()}redo(r){Za.isInstance(r)&&ze();const e=this.modelService.getModel(r);return J(e),e.redo()}};XS=S8([w8(0,mf)],XS);ba(y8,XS);const p0=ln("lifecycleService");var g0=(r=>(r[r.CLOSE=1]="CLOSE",r[r.QUIT=2]="QUIT",r[r.RELOAD=3]="RELOAD",r[r.LOAD=4]="LOAD",r))(g0||{}),rx=(r=>(r[r.NewWindow=1]="NewWindow",r[r.ReloadedWindow=3]="ReloadedWindow",r[r.ReopenedWindow=4]="ReopenedWindow",r))(rx||{}),Ps=(r=>(r[r.Starting=1]="Starting",r[r.Ready=2]="Ready",r[r.Restored=3]="Restored",r[r.ExtensionActivated=4]="ExtensionActivated",r[r.Eventually=5]="Eventually",r))(Ps||{});function A8(r){switch(r){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"ExtensionActivated";case 5:return"Eventually"}}sa.None,sa.None,sa.None,sa.None,sa.None;function b8(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0];return typeof e[n]<"u"?e[n]:i}),t}function hN(r,e,...t){return b8(e,t)}const gd={localize:hN};function vE(r,e){return e&&(r.stack||r.stacktrace)?gd.localize("stackTrace.format","{0}: {1}",RP(r),PP(r.stack)||PP(r.stacktrace)):RP(r)}function PP(r){return Array.isArray(r)?r.join(`
`):r}function RP(r){return typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?gd.localize("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||gd.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function ey(r=null,e=!1){if(!r)return gd.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){const t=bA(r),i=ey(t[0],e);return t.length>1?gd.localize("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(uo(r))return r;if(r.detail){const t=r.detail;if(t.error)return vE(t.error,e);if(t.exception)return vE(t.exception,e)}return r.stack?vE(r,e):r.message?r.message:gd.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}const J0=ln("logService");ln("loggerService");var Rs=(r=>(r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.Off=6]="Off",r))(Rs||{});const ib=2;class k8 extends zt{constructor(){super(...arguments);u(this,"level",ib);u(this,"_onDidChangeLogLevel",this._register(new Dt));u(this,"onDidChangeLogLevel",this._onDidChangeLogLevel.event)}setLevel(t){this.level!==t&&(this.level=t,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}const dN=Object.freeze(function(r,e){const t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}});var YS;(r=>{function e(t){return t===r.None||t===r.Cancelled||t instanceof T8?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:sa.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:dN})})(YS||(YS={}));class T8{constructor(){u(this,"_isCancelled",!1);u(this,"_emitter",null)}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?dN:(this._emitter||(this._emitter=new Dt),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let Au;(function(){if(typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"){const r=Object.freeze({didTimeout:!0,timeRemaining(){return 15}});Au=e=>{const t=setTimeout(()=>e(r));let i=!1;return{dispose(){i||(i=!0,clearTimeout(t))}}}}else Au=(r,e)=>{const t=requestIdleCallback(r,typeof e=="number"?{timeout:e}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(t))}}}})();class P8{constructor(e){u(this,"_executor");u(this,"_handle");u(this,"_didRun",!1);u(this,"_value");u(this,"_error");this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Au(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}class R8{constructor(){u(this,"activePromise");u(this,"queuedPromise");u(this,"queuedPromiseFactory");this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}}class D8{constructor(e){u(this,"delayer");u(this,"throttler");this.delayer=new N8(e),this.throttler=new R8}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}class ty{constructor(){u(this,"_isOpen");u(this,"_promise");u(this,"_completePromise");this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(e){this._isOpen=!0,this._completePromise(e)}wait(){return this._promise}}class C8{constructor(e,t){u(this,"_token");this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class O8{constructor(){u(this,"_token");this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class ry{constructor(e,t){u(this,"runner");u(this,"timeoutToken");u(this,"timeout");u(this,"timeoutHandler");this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}class N8{constructor(e){u(this,"timeout");u(this,"completionPromise");u(this,"doResolve");u(this,"doReject");u(this,"task");this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,s)=>{this.doResolve=i,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new Error("canceled")),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}class md{constructor(){u(this,"completeCallback");u(this,"errorCallback");u(this,"rejected",!1);u(this,"resolved",!1);u(this,"p");this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.rejected=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new fO),this.rejected=!0,e()})}}var nl;(r=>{async function e(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}r.settled=e;function t(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}r.withAsyncBody=t})(nl||(nl={}));function DP(r){const e=[];typeof r=="number"&&e.push("code/timeOrigin",r);function t(s){e.push(s,Date.now())}function i(){const s=[];for(let n=0;n<e.length;n+=2)s.push({name:e[n],startTime:e[n+1]});return s}return{mark:t,getMarks:i}}const I8=function(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!Reflect.has(performance,"nodeTiming"))return typeof performance.timeOrigin!="number"&&!performance.timing?DP():{mark(r){performance.mark(r)},getMarks(){let r=performance.timeOrigin;typeof r!="number"&&(r=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const e=[{name:"code/timeOrigin",startTime:Math.round(r)}];for(const t of performance.getEntriesByType("mark"))e.push({name:t.name,startTime:Math.round(r+t.startTime)});return e}};if(typeof process!="object")return console.trace("perf-util loaded in UNKNOWN environment"),DP()}(),jd=I8.mark;function F8(r){const e=r;return(e==null?void 0:e.changed)instanceof Map||(e==null?void 0:e.deleted)instanceof Set}const _T=class extends zt{constructor(t,i=Object.create(null)){super();u(this,"_onDidChangeStorage",this._register(new Dt));u(this,"onDidChangeStorage",this._onDidChangeStorage.event);u(this,"state",0);u(this,"cache",new Map);u(this,"flushDelayer",new D8(_T.DEFAULT_FLUSH_DELAY));u(this,"pendingDeletes",new Set);u(this,"pendingInserts",new Map);u(this,"pendingClose");u(this,"whenFlushedCallbacks",[]);this.database=t,this.options=i,this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(t=>this.onDidChangeItemsExternal(t)))}onDidChangeItemsExternal(t){var i,s;(i=t.changed)==null||i.forEach((n,o)=>this.accept(o,n)),(s=t.deleted)==null||s.forEach(n=>this.accept(n,void 0))}accept(t,i){if(this.state===2)return;let s=!1;nu(i)?s=this.cache.delete(t):this.cache.get(t)!==i&&(this.cache.set(t,i),s=!0),s&&this._onDidChangeStorage.fire(t)}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===0&&(this.state=1,this.options.hint!==0&&(this.cache=await this.database.getItems()))}get(t,i){const s=this.cache.get(t);return nu(s)?i:s}getBoolean(t,i){const s=this.get(t);return nu(s)?i:s==="true"}getNumber(t,i){const s=this.get(t);return nu(s)?i:parseInt(s,10)}async set(t,i){if(this.state===2)return;if(nu(i))return this.delete(t);const s=String(i);if(this.cache.get(t)!==s)return this.cache.set(t,s),this.pendingInserts.set(t,s),this.pendingDeletes.delete(t),this._onDidChangeStorage.fire(t),this.doFlush()}async delete(t){if(!(this.state===2||!this.cache.delete(t)))return this.pendingDeletes.has(t)||this.pendingDeletes.add(t),this.pendingInserts.delete(t),this._onDidChangeStorage.fire(t),this.doFlush()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=2;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const t={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(t).finally(()=>{var i;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(i=this.whenFlushedCallbacks.pop())==null||i()})}async flush(t){if(!!this.hasPending)return this.doFlush(t)}async doFlush(t){return this.flushDelayer.trigger(()=>this.flushPending(),t)}async whenFlushed(){if(!!this.hasPending)return new Promise(t=>this.whenFlushedCallbacks.push(t))}dispose(){this.flushDelayer.dispose(),super.dispose()}};let Up=_T;u(Up,"DEFAULT_FLUSH_DELAY",100);class M8{constructor(){u(this,"onDidChangeItemsExternal",sa.None);u(this,"items",new Map)}async getItems(){return this.items}async updateItems(e){e.insert&&e.insert.forEach((t,i)=>this.items.set(i,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))}async close(){}}const ic="__$__isNewStorageMarker",sm="__$__targetStorageMarker",nb=ln("storageService");var Gp=(r=>(r[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN",r))(Gp||{}),qs=(r=>(r[r.GLOBAL=0]="GLOBAL",r[r.WORKSPACE=1]="WORKSPACE",r))(qs||{}),iy=(r=>(r[r.USER=0]="USER",r[r.MACHINE=1]="MACHINE",r))(iy||{});const pT=class extends zt{constructor(t={flushInterval:pT.DEFAULT_FLUSH_INTERVAL}){super();u(this,"_onDidChangeValue",this._register(new wS));u(this,"onDidChangeValue",this._onDidChangeValue.event);u(this,"_onDidChangeTarget",this._register(new wS));u(this,"onDidChangeTarget",this._onDidChangeTarget.event);u(this,"_onWillSaveState",this._register(new Dt));u(this,"onWillSaveState",this._onWillSaveState.event);u(this,"initializationPromise");u(this,"flushWhenIdleScheduler");u(this,"runFlushWhenIdle",this._register(new RA));u(this,"_workspaceKeyTargets");u(this,"_globalKeyTargets");this.options=t,this.flushWhenIdleScheduler=this._register(new ry(()=>this.doFlushWhenIdle(),this.options.flushInterval))}doFlushWhenIdle(){this.runFlushWhenIdle.value=Au(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){e1([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{try{await this.doInitialize()}finally{}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(t,i){i===sm?(t===0?this._globalKeyTargets=void 0:t===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:t})):this._onDidChangeValue.fire({scope:t,key:i,target:this.getKeyTargets(t)[i]})}emitWillSaveState(t){this._onWillSaveState.fire({reason:t})}get(t,i,s){var n;return(n=this.getStorage(i))==null?void 0:n.get(t,s)}getBoolean(t,i,s){var n;return(n=this.getStorage(i))==null?void 0:n.getBoolean(t,s)}getNumber(t,i,s){var n;return(n=this.getStorage(i))==null?void 0:n.getNumber(t,s)}store(t,i,s,n){if(nu(i)){this.remove(t,s);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(t,s,n),(o=this.getStorage(s))==null||o.set(t,i)})}remove(t,i){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(t,i,void 0),(s=this.getStorage(i))==null||s.delete(t)})}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(t,i){const s=[],n=this.getKeyTargets(t);for(const o of Object.keys(n))n[o]===i&&s.push(o);return s}updateKeyTarget(t,i,s){var o,a;const n=this.getKeyTargets(i);typeof s=="number"?n[t]!==s&&(n[t]=s,(o=this.getStorage(i))==null||o.set(sm,JSON.stringify(n))):typeof n[t]=="number"&&(delete n[t],(a=this.getStorage(i))==null||a.set(sm,JSON.stringify(n)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(t){return t===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(t){const i=this.get(sm,t);if(i)try{return JSON.parse(i)}catch{}return Object.create(null)}isNew(t){return this.getBoolean(ic,t)===!0}async flush(t=0){var n,o,a,l;this._onWillSaveState.fire({reason:t});const i=this.getStorage(0),s=this.getStorage(1);switch(t){case 0:await nl.settled([(n=i==null?void 0:i.whenFlushed())!=null?n:Promise.resolve(),(o=s==null?void 0:s.whenFlushed())!=null?o:Promise.resolve()]);break;case 1:await nl.settled([(a=i==null?void 0:i.flush(0))!=null?a:Promise.resolve(),(l=s==null?void 0:s.flush(0))!=null?l:Promise.resolve()]);break}}async logStorage(){var s,n,o,a,l,c;const t=(n=(s=this.getStorage(0))==null?void 0:s.items)!=null?n:new Map,i=(a=(o=this.getStorage(1))==null?void 0:o.items)!=null?a:new Map;return B8(t,i,(l=this.getLogDetails(0))!=null?l:"",(c=this.getLogDetails(1))!=null?c:"")}};let ix=pT;u(ix,"DEFAULT_FLUSH_INTERVAL",60*1e3);async function B8(r,e,t,i){const s=f=>{try{return JSON.parse(f)}catch{return f}},n=new Map,o=new Map;r.forEach((f,g)=>{n.set(g,f),o.set(g,s(f))});const a=new Map,l=new Map;e.forEach((f,g)=>{a.set(g,f),l.set(g,s(f))}),console.group(`Storage: Global (path: ${t})`);const c=[];n.forEach((f,g)=>{c.push({key:g,value:f})}),console.table(c),console.groupEnd(),console.log(o),console.group(`Storage: Workspace (path: ${i})`);const d=[];a.forEach((f,g)=>{d.push({key:g,value:f})}),console.table(d),console.groupEnd(),console.log(l)}var L8=Object.defineProperty,U8=Object.getOwnPropertyDescriptor,G8=(r,e,t,i)=>{for(var s=i>1?void 0:i?U8(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&L8(e,t,s),s},CP=(r,e)=>(t,i)=>e(t,i,r),gS;let xd=(gS=class extends zt{constructor(e,t){super();u(this,"_onBeforeShutdown",this._register(new Dt));u(this,"onBeforeShutdown",this._onBeforeShutdown.event);u(this,"_onWillShutdown",this._register(new Dt));u(this,"onWillShutdown",this._onWillShutdown.event);u(this,"_onDidShutdown",this._register(new Dt));u(this,"onDidShutdown",this._onDidShutdown.event);u(this,"_onBeforeShutdownError",this._register(new Dt));u(this,"onBeforeShutdownError",this._onBeforeShutdownError.event);u(this,"_onShutdownVeto",this._register(new Dt));u(this,"onShutdownVeto",this._onShutdownVeto.event);u(this,"_startupKind");u(this,"_phase",Ps.Starting);u(this,"phaseWhen",new Map);u(this,"shutdownReason");this.logService=e,this.storageService=t,this._startupKind=this.resolveStartupKind(),this.storageService.onWillSaveState(i=>{i.reason===Gp.SHUTDOWN&&this.storageService.store(xd.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,qs.WORKSPACE,iy.MACHINE)})}get startupKind(){return this._startupKind}get phase(){return this._phase}resolveStartupKind(){const e=this.storageService.getNumber(xd.LAST_SHUTDOWN_REASON_KEY,qs.WORKSPACE);this.storageService.remove(xd.LAST_SHUTDOWN_REASON_KEY,qs.WORKSPACE);let t;switch(e){case g0.RELOAD:t=rx.ReloadedWindow;break;case g0.LOAD:t=rx.ReopenedWindow;break;default:t=rx.NewWindow}return this.logService.trace(`[lifecycle] starting up (startup kind: ${t})`),t}set phase(e){if(e<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===e)return;this.logService.trace(`lifecycle: phase changed (value: ${e})`),this._phase=e,jd(`code/LifecyclePhase/${A8(e)}`);const t=this.phaseWhen.get(this._phase);t&&(t.open(),this.phaseWhen.delete(this._phase))}async when(e){if(e<=this._phase)return;let t=this.phaseWhen.get(e);t||(t=new ty,this.phaseWhen.set(e,t)),await t.wait()}},u(gS,"LAST_SHUTDOWN_REASON_KEY","lifecyle.lastShutdownReason"),gS);xd=G8([CP(0,J0),CP(1,nb)],xd);const z8=V0?ao.WinCtrl:ao.CtrlCmd,H8=ao.Alt,j8=ao.Shift,V8=V0?ao.CtrlCmd:ao.WinCtrl;class qS{constructor(e){u(this,"_standardKeyboardEventBrand",!0);u(this,"browserEvent");u(this,"target");u(this,"ctrlKey");u(this,"shiftKey");u(this,"altKey");u(this,"metaKey");u(this,"keyCode");u(this,"code");u(this,"_asKeybinding");u(this,"_asRuntimeKeybinding");let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=W8(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===Te.Ctrl,this.altKey=this.altKey||this.keyCode===Te.Alt,this.shiftKey=this.shiftKey||this.keyCode===Te.Shift,this.metaKey=this.metaKey||this.keyCode===Te.Meta,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=Te.Unknown;this.keyCode!==Te.Ctrl&&this.keyCode!==Te.Shift&&this.keyCode!==Te.Alt&&this.keyCode!==Te.Meta&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=z8),this.altKey&&(t|=H8),this.shiftKey&&(t|=j8),this.metaKey&&(t|=V8),t|=e,t}_computeRuntimeKeybinding(){let e=Te.Unknown;return this.keyCode!==Te.Ctrl&&this.keyCode!==Te.Shift&&this.keyCode!==Te.Alt&&this.keyCode!==Te.Meta&&(e=this.keyCode),new YA(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let fN=new Array(230);(function(){function r(e,t){fN[e]=t}r(3,Te.PauseBreak),r(8,Te.Backspace),r(9,Te.Tab),r(13,Te.Enter),r(16,Te.Shift),r(17,Te.Ctrl),r(18,Te.Alt),r(19,Te.PauseBreak),r(20,Te.CapsLock),r(27,Te.Escape),r(32,Te.Space),r(33,Te.PageUp),r(34,Te.PageDown),r(35,Te.End),r(36,Te.Home),r(37,Te.LeftArrow),r(38,Te.UpArrow),r(39,Te.RightArrow),r(40,Te.DownArrow),r(45,Te.Insert),r(46,Te.Delete),r(48,Te.KEY_0),r(49,Te.KEY_1),r(50,Te.KEY_2),r(51,Te.KEY_3),r(52,Te.KEY_4),r(53,Te.KEY_5),r(54,Te.KEY_6),r(55,Te.KEY_7),r(56,Te.KEY_8),r(57,Te.KEY_9),r(65,Te.KEY_A),r(66,Te.KEY_B),r(67,Te.KEY_C),r(68,Te.KEY_D),r(69,Te.KEY_E),r(70,Te.KEY_F),r(71,Te.KEY_G),r(72,Te.KEY_H),r(73,Te.KEY_I),r(74,Te.KEY_J),r(75,Te.KEY_K),r(76,Te.KEY_L),r(77,Te.KEY_M),r(78,Te.KEY_N),r(79,Te.KEY_O),r(80,Te.KEY_P),r(81,Te.KEY_Q),r(82,Te.KEY_R),r(83,Te.KEY_S),r(84,Te.KEY_T),r(85,Te.KEY_U),r(86,Te.KEY_V),r(87,Te.KEY_W),r(88,Te.KEY_X),r(89,Te.KEY_Y),r(90,Te.KEY_Z),r(93,Te.ContextMenu),r(96,Te.NUMPAD_0),r(97,Te.NUMPAD_1),r(98,Te.NUMPAD_2),r(99,Te.NUMPAD_3),r(100,Te.NUMPAD_4),r(101,Te.NUMPAD_5),r(102,Te.NUMPAD_6),r(103,Te.NUMPAD_7),r(104,Te.NUMPAD_8),r(105,Te.NUMPAD_9),r(106,Te.NUMPAD_MULTIPLY),r(107,Te.NUMPAD_ADD),r(108,Te.NUMPAD_SEPARATOR),r(109,Te.NUMPAD_SUBTRACT),r(110,Te.NUMPAD_DECIMAL),r(111,Te.NUMPAD_DIVIDE),r(112,Te.F1),r(113,Te.F2),r(114,Te.F3),r(115,Te.F4),r(116,Te.F5),r(117,Te.F6),r(118,Te.F7),r(119,Te.F8),r(120,Te.F9),r(121,Te.F10),r(122,Te.F11),r(123,Te.F12),r(124,Te.F13),r(125,Te.F14),r(126,Te.F15),r(127,Te.F16),r(128,Te.F17),r(129,Te.F18),r(130,Te.F19),r(144,Te.NumLock),r(145,Te.ScrollLock),r(186,Te.US_SEMICOLON),r(187,Te.US_EQUAL),r(188,Te.US_COMMA),r(189,Te.US_MINUS),r(190,Te.US_DOT),r(191,Te.US_SLASH),r(192,Te.US_BACKTICK),r(193,Te.ABNT_C1),r(194,Te.ABNT_C2),r(219,Te.US_OPEN_SQUARE_BRACKET),r(220,Te.US_BACKSLASH),r(221,Te.US_CLOSE_SQUARE_BRACKET),r(222,Te.US_QUOTE),r(223,Te.OEM_8),r(226,Te.OEM_102),r(229,Te.KEY_IN_COMPOSITION),UU?(r(59,Te.US_SEMICOLON),r(107,Te.US_EQUAL),r(109,Te.US_MINUS),zS&&r(224,Te.Meta)):GU&&(r(91,Te.Meta),r(zS?93:92,Te.Meta))})();function W8(r){if(r.charCode){let e=String.fromCharCode(r.charCode).toUpperCase();return _0.fromString(e)}return fN[r.keyCode]||Te.Unknown}const Cs={PASTE:"paste",CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",VISIBILITY_CHANGE:"visibilitychange"};class $8{constructor(e,t,i,s){u(this,"_handler");u(this,"_node");u(this,"_type");u(this,"_options");this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Vn(r,e,t,i){return new $8(r,e,t,i)}const K8=8,X8=function(r,e){return e};class Y8 extends zt{constructor(e,t,i,s=X8,n=K8){super();let o=null,a=0;const l=this._register(new C8),c=()=>{a=new Date().getTime(),i(o),o=null};this._register(Vn(e,t,d=>{o=s(o,d);const f=new Date().getTime()-a;f>=n?(l.cancel(),c()):l.setIfNotSet(c,n-f)}))}}function q8(r,e,t,i,s){return new Y8(r,e,t,i,s)}function Q8(r,e){return Vn(r,Cs.MOUSE_OUT,t=>{let i=t.relatedTarget;for(;i&&i!==r;)i=i.parentNode;i!==r&&e(t)})}function J8(r){return r&&!!r.host&&!!r.mode}function OP(r){for(;r.parentNode;){if(r===document.body)return null;r=r.parentNode}return J8(r)?r:null}const dd=class{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new dd(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof dd?e:new dd(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};let EE=dd;u(EE,"None",new dd(0,0));function Z8(){return new Promise(r=>{document.readyState==="complete"||document&&document.body!==null?r(void 0):window.addEventListener("DOMContentLoaded",r,!1)})}function e5(r){return function(e){return r(new hO(e))}}function t5(r){return function(e){return r(new qS(e))}}let QS=function(e,t,i,s){let n=i;return t==="click"||t==="mousedown"?n=e5(i):(t==="keydown"||t==="keypress"||t==="keyup")&&(n=t5(i)),Vn(e,t,n,s)};const NP=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function r5(r){let e=r.getBoundingClientRect();return{left:e.left+NP.scrollX,top:e.top+NP.scrollY,width:e.width,height:e.height}}function i5(r){let e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function n5(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}function s5(r){for(;r;){if(r===document.body)return!0;r=r.parentNode||r.host}return!1}var o5=Object.defineProperty,a5=Object.getOwnPropertyDescriptor,l5=(r,e,t,i)=>{for(var s=i>1?void 0:i?a5(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&o5(e,t,s),s},IP=(r,e)=>(t,i)=>e(t,i,r);let JS=class extends xd{constructor(e,t){super(e,t);u(this,"beforeUnloadListener");u(this,"unloadListener");u(this,"ignoreBeforeUnload",!1);u(this,"didUnload",!1);this.registerListeners()}registerListeners(){this.beforeUnloadListener=Vn(window,Cs.BEFORE_UNLOAD,e=>this.onBeforeUnload(e)),this.unloadListener=Vn(window,Cs.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(e){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(e)))}vetoBeforeUnload(e){e.preventDefault(),e.returnValue=hN("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(e,t){if(typeof e=="number")return this.shutdownReason=e,this.storageService.flush(Gp.SHUTDOWN);this.ignoreBeforeUnload=!0;try{t==null||t()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){var e,t;this.logService.info("[lifecycle] shutdown triggered"),(e=this.beforeUnloadListener)==null||e.dispose(),(t=this.unloadListener)==null||t.dispose(),await this.storageService.flush(Gp.SHUTDOWN),this.doShutdown()}doShutdown(e){const t=this.logService;this.storageService.flush(Gp.SHUTDOWN);let i=!1;function s(n,o){typeof e=="function"&&(n instanceof Promise&&(t.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${o})`),i=!0),n===!0&&(t.info(`[lifecycle]: Unload was prevented (id: ${o})`),i=!0))}return this._onBeforeShutdown.fire({reason:g0.QUIT,veto(n,o){s(n,o)},finalVeto(n,o){s(n(),o)}}),i&&typeof e=="function"?e():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(Vn(window,Cs.PAGE_SHOW,t=>this.onLoadAfterUnload(t)));const e=this.logService;this._onWillShutdown.fire({reason:g0.QUIT,token:YS.None,join(t,i){e.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${i})`)},force:()=>{}}),this._onDidShutdown.fire()}onLoadAfterUnload(e){!e.persisted||this.withExpectedShutdown({disableShutdownHandling:!0},()=>window.location.reload())}};JS=l5([IP(0,J0),IP(1,nb)],JS);ba(p0,JS);var u5=Object.defineProperty,c5=Object.getOwnPropertyDescriptor,h5=(r,e,t,i)=>{for(var s=i>1?void 0:i?c5(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&u5(e,t,s),s},FP=(r,e)=>(t,i)=>e(t,i,r);let ZS=class extends zt{constructor(e,t){super();u(this,"_onWillExecuteCommand",this._register(new Dt));u(this,"onWillExecuteCommand",this._onWillExecuteCommand.event);u(this,"_onDidExecuteCommand",new Dt);u(this,"onDidExecuteCommand",this._onDidExecuteCommand.event);this._instantiationService=e,this._logService=t}executeCommand(e,...t){return this._logService.trace("CommandService#executeCommand",e),this._tryExecuteCommand(e,t)}_tryExecuteCommand(e,t){const i=qA.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction(i.handler,...t);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};ZS=h5([FP(0,pl),FP(1,J0)],ZS);ba(oN,ZS,!0);var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sb(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var _N={exports:{}};const zp={},d5=Object.freeze(Object.defineProperty({__proto__:null,default:zp},Symbol.toStringTag,{value:"Module"})),gc=sb(d5);(function(r,e){var t=function(){var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(n){n=n||{};/**
 * @license
 * Copyright 2010 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */var n=typeof n<"u"?n:{},o;n.ready=new Promise(function(p,y){o=p}),Object.getOwnPropertyDescriptor(n.ready,"_malloc")||(Object.defineProperty(n.ready,"_malloc",{configurable:!0,get:function(){re("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_malloc",{configurable:!0,set:function(){re("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_free")||(Object.defineProperty(n.ready,"_free",{configurable:!0,get:function(){re("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_free",{configurable:!0,set:function(){re("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackSave")||(Object.defineProperty(n.ready,"_stackSave",{configurable:!0,get:function(){re("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackSave",{configurable:!0,set:function(){re("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackRestore")||(Object.defineProperty(n.ready,"_stackRestore",{configurable:!0,get:function(){re("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackRestore",{configurable:!0,set:function(){re("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_stackAlloc")||(Object.defineProperty(n.ready,"_stackAlloc",{configurable:!0,get:function(){re("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_stackAlloc",{configurable:!0,set:function(){re("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___data_end")||(Object.defineProperty(n.ready,"___data_end",{configurable:!0,get:function(){re("You are getting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___data_end",{configurable:!0,set:function(){re("You are setting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___wasm_call_ctors")||(Object.defineProperty(n.ready,"___wasm_call_ctors",{configurable:!0,get:function(){re("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___wasm_call_ctors",{configurable:!0,set:function(){re("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_fflush")||(Object.defineProperty(n.ready,"_fflush",{configurable:!0,get:function(){re("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_fflush",{configurable:!0,set:function(){re("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"___errno_location")||(Object.defineProperty(n.ready,"___errno_location",{configurable:!0,get:function(){re("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"___errno_location",{configurable:!0,set:function(){re("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_memalign")||(Object.defineProperty(n.ready,"_memalign",{configurable:!0,get:function(){re("You are getting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_memalign",{configurable:!0,set:function(){re("You are setting _memalign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"_memset")||(Object.defineProperty(n.ready,"_memset",{configurable:!0,get:function(){re("You are getting _memset on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"_memset",{configurable:!0,set:function(){re("You are setting _memset on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_tzname")||(Object.defineProperty(n.ready,"__get_tzname",{configurable:!0,get:function(){re("You are getting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_tzname",{configurable:!0,set:function(){re("You are setting __get_tzname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_daylight")||(Object.defineProperty(n.ready,"__get_daylight",{configurable:!0,get:function(){re("You are getting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_daylight",{configurable:!0,set:function(){re("You are setting __get_daylight on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"__get_timezone")||(Object.defineProperty(n.ready,"__get_timezone",{configurable:!0,get:function(){re("You are getting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"__get_timezone",{configurable:!0,set:function(){re("You are setting __get_timezone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(n.ready,"onRuntimeInitialized")||(Object.defineProperty(n.ready,"onRuntimeInitialized",{configurable:!0,get:function(){re("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(n.ready,"onRuntimeInitialized",{configurable:!0,set:function(){re("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var a={},l;for(l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);var c="./this.program",d=!1,f=!1,g=!1,x=!1;if(d=typeof window=="object",f=typeof importScripts=="function",g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x=!d&&!g&&!f,n.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var E="";function P(p){return n.locateFile?n.locateFile(p,E):E+p}var b,D,C,O;if(g){f?E=gc.dirname(E)+"/":E=__dirname+"/";/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */b=function(y,w){return C||(C=gc),O||(O=gc),y=O.normalize(y),C.readFileSync(y,w?null:"utf8")},D=function(y){var w=b(y,!0);return w.buffer||(w=new Uint8Array(w)),ae(w.buffer),w},process.argv.length>1&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(p){if(!(p instanceof r_))throw p}),process.on("unhandledRejection",re),n.inspect=function(){return"[Emscripten Module object]"}}else if(x)typeof read<"u"&&(b=function(y){return read(y)}),D=function(y){var w;return typeof readbuffer=="function"?new Uint8Array(readbuffer(y)):(w=read(y,"binary"),ae(typeof w=="object"),w)},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print);else if(d||f){f?E=self.location.href:document.currentScript&&(E=document.currentScript.src),i&&(E=i),E.indexOf("blob:")!==0?E=E.substr(0,E.lastIndexOf("/")+1):E="";{/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */b=function(y){var w=new XMLHttpRequest;return w.open("GET",y,!1),w.send(null),w.responseText},f&&(D=function(y){var w=new XMLHttpRequest;return w.open("GET",y,!1),w.responseType="arraybuffer",w.send(null),new Uint8Array(w.response)})}}else throw new Error("environment detection error");var N=n.print||console.log.bind(console),j=n.printErr||console.warn.bind(console);for(l in a)a.hasOwnProperty(l)&&(n[l]=a[l]);a=null,n.arguments&&n.arguments,Object.getOwnPropertyDescriptor(n,"arguments")||Object.defineProperty(n,"arguments",{configurable:!0,get:function(){re("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.thisProgram&&(c=n.thisProgram),Object.getOwnPropertyDescriptor(n,"thisProgram")||Object.defineProperty(n,"thisProgram",{configurable:!0,get:function(){re("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.quit&&n.quit,Object.getOwnPropertyDescriptor(n,"quit")||Object.defineProperty(n,"quit",{configurable:!0,get:function(){re("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),ae(typeof n.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),ae(typeof n.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),ae(typeof n.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),ae(typeof n.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),ae(typeof n.read>"u","Module.read option was removed (modify read_ in JS)"),ae(typeof n.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),ae(typeof n.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),ae(typeof n.setWindowTitle>"u","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),ae(typeof n.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(n,"read")||Object.defineProperty(n,"read",{configurable:!0,get:function(){re("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"readAsync")||Object.defineProperty(n,"readAsync",{configurable:!0,get:function(){re("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"readBinary")||Object.defineProperty(n,"readBinary",{configurable:!0,get:function(){re("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(n,"setWindowTitle")||Object.defineProperty(n,"setWindowTitle",{configurable:!0,get:function(){re("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});function I(p){I.shown||(I.shown={}),I.shown[p]||(I.shown[p]=1,j(p))}/**
 * @license
 * Copyright 2010 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */var M;n.wasmBinary&&(M=n.wasmBinary),Object.getOwnPropertyDescriptor(n,"wasmBinary")||Object.defineProperty(n,"wasmBinary",{configurable:!0,get:function(){re("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),n.noExitRuntime&&n.noExitRuntime,Object.getOwnPropertyDescriptor(n,"noExitRuntime")||Object.defineProperty(n,"noExitRuntime",{configurable:!0,get:function(){re("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),typeof WebAssembly!="object"&&re("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function R(p,y,w,H){switch(w=w||"i8",w.charAt(w.length-1)==="*"&&(w="i32"),w){case"i1":Z[p>>0]=y;break;case"i8":Z[p>>0]=y;break;case"i16":F[p>>1]=y;break;case"i32":W[p>>2]=y;break;case"i64":es=[y>>>0,(wr=y,+mr(wr)>=1?wr>0?(cn(+ps(wr/4294967296),4294967295)|0)>>>0:~~+xi((wr-+(~~wr>>>0))/4294967296)>>>0:0)],W[p>>2]=es[0],W[p+4>>2]=es[1];break;case"float":de[p>>2]=y;break;case"double":ye[p>>3]=y;break;default:re("invalid type for setValue: "+w)}}function L(p,y,w){switch(y=y||"i8",y.charAt(y.length-1)==="*"&&(y="i32"),y){case"i1":return Z[p>>0];case"i8":return Z[p>>0];case"i16":return F[p>>1];case"i32":return W[p>>2];case"i64":return W[p>>2];case"float":return de[p>>2];case"double":return ye[p>>3];default:re("invalid type for getValue: "+y)}return null}var K,Q=new WebAssembly.Table({initial:648,maximum:648+0,element:"anyfunc"}),ue=!1;function ae(p,y){p||re("Assertion failed: "+y)}/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */var Re=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ue(p,y,w){for(var H=y+w,X=y;p[X]&&!(X>=H);)++X;if(X-y>16&&p.subarray&&Re)return Re.decode(p.subarray(y,X));for(var ie="";y<X;){var pe=p[y++];if(!(pe&128)){ie+=String.fromCharCode(pe);continue}var xe=p[y++]&63;if((pe&224)==192){ie+=String.fromCharCode((pe&31)<<6|xe);continue}var Ce=p[y++]&63;if((pe&240)==224?pe=(pe&15)<<12|xe<<6|Ce:((pe&248)!=240&&I("Invalid UTF-8 leading byte 0x"+pe.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),pe=(pe&7)<<18|xe<<12|Ce<<6|p[y++]&63),pe<65536)ie+=String.fromCharCode(pe);else{var qe=pe-65536;ie+=String.fromCharCode(55296|qe>>10,56320|qe&1023)}}return ie}function rt(p,y){return p?Ue(Le,p,y):""}function Ve(p,y,w,H){if(!(H>0))return 0;for(var X=w,ie=w+H-1,pe=0;pe<p.length;++pe){var xe=p.charCodeAt(pe);if(xe>=55296&&xe<=57343){var Ce=p.charCodeAt(++pe);xe=65536+((xe&1023)<<10)|Ce&1023}if(xe<=127){if(w>=ie)break;y[w++]=xe}else if(xe<=2047){if(w+1>=ie)break;y[w++]=192|xe>>6,y[w++]=128|xe&63}else if(xe<=65535){if(w+2>=ie)break;y[w++]=224|xe>>12,y[w++]=128|xe>>6&63,y[w++]=128|xe&63}else{if(w+3>=ie)break;xe>=2097152&&I("Invalid Unicode code point 0x"+xe.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),y[w++]=240|xe>>18,y[w++]=128|xe>>12&63,y[w++]=128|xe>>6&63,y[w++]=128|xe&63}}return y[w]=0,w-X}function Fe(p,y,w){return ae(typeof w=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Ve(p,Le,y,w)}function nt(p){for(var y=0,w=0;w<p.length;++w){var H=p.charCodeAt(w);H>=55296&&H<=57343&&(H=65536+((H&1023)<<10)|p.charCodeAt(++w)&1023),H<=127?++y:H<=2047?y+=2:H<=65535?y+=3:y+=4}return y}var dt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function it(p,y){ae(p%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var w=p,H=w>>1,X=H+y/2;!(H>=X)&&z[H];)++H;if(w=H<<1,w-p>32&&dt)return dt.decode(Le.subarray(p,w));for(var ie=0,pe="";;){var xe=F[p+ie*2>>1];if(xe==0||ie==y/2)return pe;++ie,pe+=String.fromCharCode(xe)}}function bt(p,y,w){if(ae(y%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),ae(typeof w=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),w===void 0&&(w=2147483647),w<2)return 0;w-=2;for(var H=y,X=w<p.length*2?w/2:p.length,ie=0;ie<X;++ie){var pe=p.charCodeAt(ie);F[y>>1]=pe,y+=2}return F[y>>1]=0,y-H}function ee(p){return p.length*2}function ne(p,y){ae(p%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var w=0,H="";!(w>=y/4);){var X=W[p+w*4>>2];if(X==0)break;if(++w,X>=65536){var ie=X-65536;H+=String.fromCharCode(55296|ie>>10,56320|ie&1023)}else H+=String.fromCharCode(X)}return H}function se(p,y,w){if(ae(y%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),ae(typeof w=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),w===void 0&&(w=2147483647),w<4)return 0;for(var H=y,X=H+w-4,ie=0;ie<p.length;++ie){var pe=p.charCodeAt(ie);if(pe>=55296&&pe<=57343){var xe=p.charCodeAt(++ie);pe=65536+((pe&1023)<<10)|xe&1023}if(W[y>>2]=pe,y+=4,y+4>X)break}return W[y>>2]=0,y-H}function Ee(p){for(var y=0,w=0;w<p.length;++w){var H=p.charCodeAt(w);H>=55296&&H<=57343&&++w,y+=4}return y}function Se(p){var y=nt(p)+1,w=Xo(y);return w&&Ve(p,Z,w,y),w}function fe(p,y,w){for(var H=0;H<p.length;++H)ae(p.charCodeAt(H)===p.charCodeAt(H)&255),Z[y++>>0]=p.charCodeAt(H);w||(Z[y>>0]=0)}var Pe=65536,He,Z,Le,F,z,W,te,de,ye;function oe(p){He=p,n.HEAP8=Z=new Int8Array(p),n.HEAP16=F=new Int16Array(p),n.HEAP32=W=new Int32Array(p),n.HEAPU8=Le=new Uint8Array(p),n.HEAPU16=z=new Uint16Array(p),n.HEAPU32=te=new Uint32Array(p),n.HEAPF32=de=new Float32Array(p),n.HEAPF64=ye=new Float64Array(p)}var le=5892496,we=649616,De=5892496,Ye=649456;ae(le%16===0,"stack must start aligned"),ae(De%16===0,"heap must start aligned");var $e=5242880;n.TOTAL_STACK&&ae($e===n.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Qe=n.INITIAL_MEMORY||16777216;Object.getOwnPropertyDescriptor(n,"INITIAL_MEMORY")||Object.defineProperty(n,"INITIAL_MEMORY",{configurable:!0,get:function(){re("Module.INITIAL_MEMORY has been replaced with plain INITIAL_INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),ae(Qe>=$e,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Qe+"! (TOTAL_STACK="+$e+")"),ae(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!==void 0&&Int32Array.prototype.set!==void 0,"JS engine does not provide full typed array support");/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 *//**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */n.wasmMemory?K=n.wasmMemory:K=new WebAssembly.Memory({initial:Qe/Pe,maximum:Qe/Pe}),K&&(He=K.buffer),Qe=He.byteLength,ae(Qe%Pe===0),oe(He),W[Ye>>2]=De;/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function Ke(){ae((we&3)==0),te[(we>>2)+1]=34821223,te[(we>>2)+2]=2310721022,W[0]=1668509029}function tt(){var p=te[(we>>2)+1],y=te[(we>>2)+2];(p!=34821223||y!=2310721022)&&re("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+y.toString(16)+" "+p.toString(16)),W[0]!==1668509029&&re("Runtime error: The application has corrupted its heap memory area (address zero)!")}/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */(function(){var p=new Int16Array(1),y=new Int8Array(p.buffer);if(p[0]=25459,y[0]!==115||y[1]!==99)throw"Runtime error: expected the system to be little-endian!"})();function _t(p){for(;p.length>0;){var y=p.shift();if(typeof y=="function"){y(n);continue}var w=y.func;typeof w=="number"?y.arg===void 0?n.dynCall_v(w):n.dynCall_vi(w,y.arg):w(y.arg===void 0?null:y.arg)}}var st=[],St=[],Ot=[],Rt=[],Mt=!1,Ie=!1;function gt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)li(n.preRun.shift());_t(st)}function mt(){tt(),ae(!Mt),Mt=!0,!n.noFSInit&&!U.init.initialized&&U.init(),_t(St)}function Et(){tt(),U.ignorePermissions=!1,_t(Ot)}function Ht(){if(tt(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Er(n.postRun.shift());_t(Rt)}function li(p){st.unshift(p)}function Er(p){Rt.unshift(p)}/**
 * @license
 * Copyright 2019 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */ae(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),ae(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),ae(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),ae(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var mr=Math.abs,xi=Math.ceil,ps=Math.floor,cn=Math.min,Mr=0,Di=null,Zn=null,fr={};function ho(p){for(var y=p;;){if(!fr[p])return p;p=y+Math.random()}}function Yt(p){Mr++,n.monitorRunDependencies&&n.monitorRunDependencies(Mr),p?(ae(!fr[p]),fr[p]=1,Di===null&&typeof setInterval<"u"&&(Di=setInterval(function(){if(ue){clearInterval(Di),Di=null;return}var y=!1;for(var w in fr)y||(y=!0,j("still waiting on run dependencies:")),j("dependency: "+w);y&&j("(end of list)")},1e4))):j("warning: run dependency added without ID")}function Vi(p){if(Mr--,n.monitorRunDependencies&&n.monitorRunDependencies(Mr),p?(ae(fr[p]),delete fr[p]):j("warning: run dependency removed without ID"),Mr==0&&(Di!==null&&(clearInterval(Di),Di=null),Zn)){var y=Zn;Zn=null,y()}}n.preloadedImages={},n.preloadedAudios={};function re(p){n.onAbort&&n.onAbort(p),p+="",N(p),j(p),ue=!0;var y="abort("+p+") at "+Vu();throw p=y,new WebAssembly.RuntimeError(p)}/**
 * @license
 * Copyright 2015 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 *//**
 * @license
 * Copyright 2017 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function zo(p,y){return String.prototype.startsWith?p.startsWith(y):p.indexOf(y)===0}var Hu="data:application/octet-stream;base64,";function Tl(p){return zo(p,Hu)}var Ho="file://";function fo(p){return zo(p,Ho)}function Ut(p,y){return function(){var w=p,H=y;return y||(H=n.asm),ae(Mt,"native function `"+w+"` called before runtime initialization"),ae(!Ie,"native function `"+w+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),H[p]||ae(H[p],"exported native function `"+w+"` not found"),H[p].apply(null,arguments)}}var hn="icu-binding.wasm";Tl(hn)||(hn=P(hn));function Wi(){try{if(M)return new Uint8Array(M);if(D)return D(hn);throw"both async and sync fetching of the wasm failed"}catch(p){re(p)}}function Pl(){return!M&&(d||f)&&typeof fetch=="function"&&!fo(hn)?fetch(hn,{credentials:"same-origin"}).then(function(p){if(!p.ok)throw"failed to load wasm binary file at '"+hn+"'";return p.arrayBuffer()}).catch(function(){return Wi()}):new Promise(function(p,y){p(Wi())})}function jo(){var p={env:Ii,wasi_snapshot_preview1:Ii};function y(xe,Ce){var qe=xe.exports;n.asm=qe,Vi("wasm-instantiate")}Yt("wasm-instantiate");var w=n;function H(xe){ae(n===w,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),w=null,y(xe.instance)}function X(xe){return Pl().then(function(Ce){return WebAssembly.instantiate(Ce,p)}).then(xe,function(Ce){j("failed to asynchronously prepare wasm: "+Ce),re(Ce)})}function ie(){if(!M&&typeof WebAssembly.instantiateStreaming=="function"&&!Tl(hn)&&!fo(hn)&&typeof fetch=="function")fetch(hn,{credentials:"same-origin"}).then(function(xe){var Ce=WebAssembly.instantiateStreaming(xe,p);return Ce.then(H,function(qe){return j("wasm streaming compile failed: "+qe),j("falling back to ArrayBuffer instantiation"),X(H)})});else return X(H)}if(n.instantiateWasm)try{var pe=n.instantiateWasm(p,y);return pe}catch(xe){return j("Module.instantiateWasm callback failed with error: "+xe),!1}return ie(),{}}var wr,es;St.push({func:function(){Ju()}});function Rl(p){return I("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),p}function ju(p){var y=/\b_Z[\w\d_]+/g;return p.replace(y,function(w){var H=Rl(w);return w===H?w:H+" ["+w+"]"})}function Mh(){var p=new Error;if(!p.stack){try{throw new Error}catch(y){p=y}if(!p.stack)return"(no stack trace available)"}return p.stack.toString()}function Vu(){var p=Mh();return n.extraStackTrace&&(p+=`
`+n.extraStackTrace()),ju(p)}function Wu(){re("stack overflow")}function gs(p){return W[Yo()>>2]=p,p}function Dl(p,y){return gs(63),-1}var qt={splitPath:function(p){var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(p).slice(1)},normalizeArray:function(p,y){for(var w=0,H=p.length-1;H>=0;H--){var X=p[H];X==="."?p.splice(H,1):X===".."?(p.splice(H,1),w++):w&&(p.splice(H,1),w--)}if(y)for(;w;w--)p.unshift("..");return p},normalize:function(p){var y=p.charAt(0)==="/",w=p.substr(-1)==="/";return p=qt.normalizeArray(p.split("/").filter(function(H){return!!H}),!y).join("/"),!p&&!y&&(p="."),p&&w&&(p+="/"),(y?"/":"")+p},dirname:function(p){var y=qt.splitPath(p),w=y[0],H=y[1];return!w&&!H?".":(H&&(H=H.substr(0,H.length-1)),w+H)},basename:function(p){if(p==="/")return"/";var y=p.lastIndexOf("/");return y===-1?p:p.substr(y+1)},extname:function(p){return qt.splitPath(p)[3]},join:function(){var p=Array.prototype.slice.call(arguments,0);return qt.normalize(p.join("/"))},join2:function(p,y){return qt.normalize(p+"/"+y)}},ri={resolve:function(){for(var p="",y=!1,w=arguments.length-1;w>=-1&&!y;w--){var H=w>=0?arguments[w]:U.cwd();if(typeof H!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!H)return"";p=H+"/"+p,y=H.charAt(0)==="/"}return p=qt.normalizeArray(p.split("/").filter(function(X){return!!X}),!y).join("/"),(y?"/":"")+p||"."},relative:function(p,y){p=ri.resolve(p).substr(1),y=ri.resolve(y).substr(1);function w(qe){for(var ht=0;ht<qe.length&&qe[ht]==="";ht++);for(var xt=qe.length-1;xt>=0&&qe[xt]==="";xt--);return ht>xt?[]:qe.slice(ht,xt-ht+1)}for(var H=w(p.split("/")),X=w(y.split("/")),ie=Math.min(H.length,X.length),pe=ie,xe=0;xe<ie;xe++)if(H[xe]!==X[xe]){pe=xe;break}for(var Ce=[],xe=pe;xe<H.length;xe++)Ce.push("..");return Ce=Ce.concat(X.slice(pe)),Ce.join("/")}},Vo={ttys:[],init:function(){},shutdown:function(){},register:function(p,y){Vo.ttys[p]={input:[],output:[],ops:y},U.registerDevice(p,Vo.stream_ops)},stream_ops:{open:function(p){var y=Vo.ttys[p.node.rdev];if(!y)throw new U.ErrnoError(43);p.tty=y,p.seekable=!1},close:function(p){p.tty.ops.flush(p.tty)},flush:function(p){p.tty.ops.flush(p.tty)},read:function(p,y,w,H,X){if(!p.tty||!p.tty.ops.get_char)throw new U.ErrnoError(60);for(var ie=0,pe=0;pe<H;pe++){var xe;try{xe=p.tty.ops.get_char(p.tty)}catch{throw new U.ErrnoError(29)}if(xe===void 0&&ie===0)throw new U.ErrnoError(6);if(xe==null)break;ie++,y[w+pe]=xe}return ie&&(p.node.timestamp=Date.now()),ie},write:function(p,y,w,H,X){if(!p.tty||!p.tty.ops.put_char)throw new U.ErrnoError(60);try{for(var ie=0;ie<H;ie++)p.tty.ops.put_char(p.tty,y[w+ie])}catch{throw new U.ErrnoError(29)}return H&&(p.node.timestamp=Date.now()),ie}},default_tty_ops:{get_char:function(p){if(!p.input.length){var y=null;if(g){var w=256,H=Buffer.alloc?Buffer.alloc(w):new Buffer(w),X=0;try{X=C.readSync(process.stdin.fd,H,0,w,null)}catch(ie){if(ie.toString().indexOf("EOF")!=-1)X=0;else throw ie}X>0?y=H.slice(0,X).toString("utf-8"):y=null}else typeof window<"u"&&typeof window.prompt=="function"?(y=window.prompt("Input: "),y!==null&&(y+=`
`)):typeof readline=="function"&&(y=readline(),y!==null&&(y+=`
`));if(!y)return null;p.input=_r(y,!0)}return p.input.shift()},put_char:function(p,y){y===null||y===10?(N(Ue(p.output,0)),p.output=[]):y!=0&&p.output.push(y)},flush:function(p){p.output&&p.output.length>0&&(N(Ue(p.output,0)),p.output=[])}},default_tty1_ops:{put_char:function(p,y){y===null||y===10?(j(Ue(p.output,0)),p.output=[]):y!=0&&p.output.push(y)},flush:function(p){p.output&&p.output.length>0&&(j(Ue(p.output,0)),p.output=[])}}},jt={ops_table:null,mount:function(p){return jt.createNode(null,"/",16895,0)},createNode:function(p,y,w,H){if(U.isBlkdev(w)||U.isFIFO(w))throw new U.ErrnoError(63);jt.ops_table||(jt.ops_table={dir:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr,lookup:jt.node_ops.lookup,mknod:jt.node_ops.mknod,rename:jt.node_ops.rename,unlink:jt.node_ops.unlink,rmdir:jt.node_ops.rmdir,readdir:jt.node_ops.readdir,symlink:jt.node_ops.symlink},stream:{llseek:jt.stream_ops.llseek}},file:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr},stream:{llseek:jt.stream_ops.llseek,read:jt.stream_ops.read,write:jt.stream_ops.write,allocate:jt.stream_ops.allocate,mmap:jt.stream_ops.mmap,msync:jt.stream_ops.msync}},link:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr,readlink:jt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:jt.node_ops.getattr,setattr:jt.node_ops.setattr},stream:U.chrdev_stream_ops}});var X=U.createNode(p,y,w,H);return U.isDir(X.mode)?(X.node_ops=jt.ops_table.dir.node,X.stream_ops=jt.ops_table.dir.stream,X.contents={}):U.isFile(X.mode)?(X.node_ops=jt.ops_table.file.node,X.stream_ops=jt.ops_table.file.stream,X.usedBytes=0,X.contents=null):U.isLink(X.mode)?(X.node_ops=jt.ops_table.link.node,X.stream_ops=jt.ops_table.link.stream):U.isChrdev(X.mode)&&(X.node_ops=jt.ops_table.chrdev.node,X.stream_ops=jt.ops_table.chrdev.stream),X.timestamp=Date.now(),p&&(p.contents[y]=X),X},getFileDataAsRegularArray:function(p){if(p.contents&&p.contents.subarray){for(var y=[],w=0;w<p.usedBytes;++w)y.push(p.contents[w]);return y}return p.contents},getFileDataAsTypedArray:function(p){return p.contents?p.contents.subarray?p.contents.subarray(0,p.usedBytes):new Uint8Array(p.contents):new Uint8Array(0)},expandFileStorage:function(p,y){var w=p.contents?p.contents.length:0;if(!(w>=y)){var H=1024*1024;y=Math.max(y,w*(w<H?2:1.125)>>>0),w!=0&&(y=Math.max(y,256));var X=p.contents;p.contents=new Uint8Array(y),p.usedBytes>0&&p.contents.set(X.subarray(0,p.usedBytes),0)}},resizeFileStorage:function(p,y){if(p.usedBytes!=y){if(y==0){p.contents=null,p.usedBytes=0;return}if(!p.contents||p.contents.subarray){var w=p.contents;p.contents=new Uint8Array(y),w&&p.contents.set(w.subarray(0,Math.min(y,p.usedBytes))),p.usedBytes=y;return}if(p.contents||(p.contents=[]),p.contents.length>y)p.contents.length=y;else for(;p.contents.length<y;)p.contents.push(0);p.usedBytes=y}},node_ops:{getattr:function(p){var y={};return y.dev=U.isChrdev(p.mode)?p.id:1,y.ino=p.id,y.mode=p.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=p.rdev,U.isDir(p.mode)?y.size=4096:U.isFile(p.mode)?y.size=p.usedBytes:U.isLink(p.mode)?y.size=p.link.length:y.size=0,y.atime=new Date(p.timestamp),y.mtime=new Date(p.timestamp),y.ctime=new Date(p.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr:function(p,y){y.mode!==void 0&&(p.mode=y.mode),y.timestamp!==void 0&&(p.timestamp=y.timestamp),y.size!==void 0&&jt.resizeFileStorage(p,y.size)},lookup:function(p,y){throw U.genericErrors[44]},mknod:function(p,y,w,H){return jt.createNode(p,y,w,H)},rename:function(p,y,w){if(U.isDir(p.mode)){var H;try{H=U.lookupNode(y,w)}catch{}if(H)for(var X in H.contents)throw new U.ErrnoError(55)}delete p.parent.contents[p.name],p.name=w,y.contents[w]=p,p.parent=y},unlink:function(p,y){delete p.contents[y]},rmdir:function(p,y){var w=U.lookupNode(p,y);for(var H in w.contents)throw new U.ErrnoError(55);delete p.contents[y]},readdir:function(p){var y=[".",".."];for(var w in p.contents)!p.contents.hasOwnProperty(w)||y.push(w);return y},symlink:function(p,y,w){var H=jt.createNode(p,y,41471,0);return H.link=w,H},readlink:function(p){if(!U.isLink(p.mode))throw new U.ErrnoError(28);return p.link}},stream_ops:{read:function(p,y,w,H,X){var ie=p.node.contents;if(X>=p.node.usedBytes)return 0;var pe=Math.min(p.node.usedBytes-X,H);if(ae(pe>=0),pe>8&&ie.subarray)y.set(ie.subarray(X,X+pe),w);else for(var xe=0;xe<pe;xe++)y[w+xe]=ie[X+xe];return pe},write:function(p,y,w,H,X,ie){if(ae(!(y instanceof ArrayBuffer)),!H)return 0;var pe=p.node;if(pe.timestamp=Date.now(),y.subarray&&(!pe.contents||pe.contents.subarray)){if(ie)return ae(X===0,"canOwn must imply no weird position inside the file"),pe.contents=y.subarray(w,w+H),pe.usedBytes=H,H;if(pe.usedBytes===0&&X===0)return pe.contents=y.slice(w,w+H),pe.usedBytes=H,H;if(X+H<=pe.usedBytes)return pe.contents.set(y.subarray(w,w+H),X),H}if(jt.expandFileStorage(pe,X+H),pe.contents.subarray&&y.subarray)pe.contents.set(y.subarray(w,w+H),X);else for(var xe=0;xe<H;xe++)pe.contents[X+xe]=y[w+xe];return pe.usedBytes=Math.max(pe.usedBytes,X+H),H},llseek:function(p,y,w){var H=y;if(w===1?H+=p.position:w===2&&U.isFile(p.node.mode)&&(H+=p.node.usedBytes),H<0)throw new U.ErrnoError(28);return H},allocate:function(p,y,w){jt.expandFileStorage(p.node,y+w),p.node.usedBytes=Math.max(p.node.usedBytes,y+w)},mmap:function(p,y,w,H,X,ie){if(ae(y===0),!U.isFile(p.node.mode))throw new U.ErrnoError(43);var pe,xe,Ce=p.node.contents;if(!(ie&2)&&Ce.buffer===He)xe=!1,pe=Ce.byteOffset;else{if((H>0||H+w<Ce.length)&&(Ce.subarray?Ce=Ce.subarray(H,H+w):Ce=Array.prototype.slice.call(Ce,H,H+w)),xe=!0,pe=Xo(w),!pe)throw new U.ErrnoError(48);Z.set(Ce,pe)}return{ptr:pe,allocated:xe}},msync:function(p,y,w,H,X){if(!U.isFile(p.node.mode))throw new U.ErrnoError(43);return X&2||jt.stream_ops.write(p,y,0,H,w,!1),0}}},Ci={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},Wf={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},U={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(p){if(!(p instanceof U.ErrnoError))throw p+" : "+Vu();return gs(p.errno)},lookupPath:function(p,y){if(p=ri.resolve(U.cwd(),p),y=y||{},!p)return{path:"",node:null};var w={follow_mount:!0,recurse_count:0};for(var H in w)y[H]===void 0&&(y[H]=w[H]);if(y.recurse_count>8)throw new U.ErrnoError(32);for(var X=qt.normalizeArray(p.split("/").filter(function(yt){return!!yt}),!1),ie=U.root,pe="/",xe=0;xe<X.length;xe++){var Ce=xe===X.length-1;if(Ce&&y.parent)break;if(ie=U.lookupNode(ie,X[xe]),pe=qt.join2(pe,X[xe]),U.isMountpoint(ie)&&(!Ce||Ce&&y.follow_mount)&&(ie=ie.mounted.root),!Ce||y.follow)for(var qe=0;U.isLink(ie.mode);){var ht=U.readlink(pe);pe=ri.resolve(qt.dirname(pe),ht);var xt=U.lookupPath(pe,{recurse_count:y.recurse_count});if(ie=xt.node,qe++>40)throw new U.ErrnoError(32)}}return{path:pe,node:ie}},getPath:function(p){for(var y;;){if(U.isRoot(p)){var w=p.mount.mountpoint;return y?w[w.length-1]!=="/"?w+"/"+y:w+y:w}y=y?p.name+"/"+y:p.name,p=p.parent}},hashName:function(p,y){for(var w=0,H=0;H<y.length;H++)w=(w<<5)-w+y.charCodeAt(H)|0;return(p+w>>>0)%U.nameTable.length},hashAddNode:function(p){var y=U.hashName(p.parent.id,p.name);p.name_next=U.nameTable[y],U.nameTable[y]=p},hashRemoveNode:function(p){var y=U.hashName(p.parent.id,p.name);if(U.nameTable[y]===p)U.nameTable[y]=p.name_next;else for(var w=U.nameTable[y];w;){if(w.name_next===p){w.name_next=p.name_next;break}w=w.name_next}},lookupNode:function(p,y){var w=U.mayLookup(p);if(w)throw new U.ErrnoError(w,p);for(var H=U.hashName(p.id,y),X=U.nameTable[H];X;X=X.name_next){var ie=X.name;if(X.parent.id===p.id&&ie===y)return X}return U.lookup(p,y)},createNode:function(p,y,w,H){var X=new U.FSNode(p,y,w,H);return U.hashAddNode(X),X},destroyNode:function(p){U.hashRemoveNode(p)},isRoot:function(p){return p===p.parent},isMountpoint:function(p){return!!p.mounted},isFile:function(p){return(p&61440)===32768},isDir:function(p){return(p&61440)===16384},isLink:function(p){return(p&61440)===40960},isChrdev:function(p){return(p&61440)===8192},isBlkdev:function(p){return(p&61440)===24576},isFIFO:function(p){return(p&61440)===4096},isSocket:function(p){return(p&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(p){var y=U.flagModes[p];if(typeof y>"u")throw new Error("Unknown file open mode: "+p);return y},flagsToPermissionString:function(p){var y=["r","w","rw"][p&3];return p&512&&(y+="w"),y},nodePermissions:function(p,y){return U.ignorePermissions?0:y.indexOf("r")!==-1&&!(p.mode&292)||y.indexOf("w")!==-1&&!(p.mode&146)||y.indexOf("x")!==-1&&!(p.mode&73)?2:0},mayLookup:function(p){var y=U.nodePermissions(p,"x");return y||(p.node_ops.lookup?0:2)},mayCreate:function(p,y){try{var w=U.lookupNode(p,y);return 20}catch{}return U.nodePermissions(p,"wx")},mayDelete:function(p,y,w){var H;try{H=U.lookupNode(p,y)}catch(ie){return ie.errno}var X=U.nodePermissions(p,"wx");if(X)return X;if(w){if(!U.isDir(H.mode))return 54;if(U.isRoot(H)||U.getPath(H)===U.cwd())return 10}else if(U.isDir(H.mode))return 31;return 0},mayOpen:function(p,y){return p?U.isLink(p.mode)?32:U.isDir(p.mode)&&(U.flagsToPermissionString(y)!=="r"||y&512)?31:U.nodePermissions(p,U.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd:function(p,y){p=p||0,y=y||U.MAX_OPEN_FDS;for(var w=p;w<=y;w++)if(!U.streams[w])return w;throw new U.ErrnoError(33)},getStream:function(p){return U.streams[p]},createStream:function(p,y,w){U.FSStream||(U.FSStream=function(){},U.FSStream.prototype={object:{get:function(){return this.node},set:function(pe){this.node=pe}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var H=new U.FSStream;for(var X in p)H[X]=p[X];p=H;var ie=U.nextfd(y,w);return p.fd=ie,U.streams[ie]=p,p},closeStream:function(p){U.streams[p]=null},chrdev_stream_ops:{open:function(p){var y=U.getDevice(p.node.rdev);p.stream_ops=y.stream_ops,p.stream_ops.open&&p.stream_ops.open(p)},llseek:function(){throw new U.ErrnoError(70)}},major:function(p){return p>>8},minor:function(p){return p&255},makedev:function(p,y){return p<<8|y},registerDevice:function(p,y){U.devices[p]={stream_ops:y}},getDevice:function(p){return U.devices[p]},getMounts:function(p){for(var y=[],w=[p];w.length;){var H=w.pop();y.push(H),w.push.apply(w,H.mounts)}return y},syncfs:function(p,y){typeof p=="function"&&(y=p,p=!1),U.syncFSRequests++,U.syncFSRequests>1&&j("warning: "+U.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var w=U.getMounts(U.root.mount),H=0;function X(pe){return ae(U.syncFSRequests>0),U.syncFSRequests--,y(pe)}function ie(pe){if(pe)return ie.errored?void 0:(ie.errored=!0,X(pe));++H>=w.length&&X(null)}w.forEach(function(pe){if(!pe.type.syncfs)return ie(null);pe.type.syncfs(pe,p,ie)})},mount:function(p,y,w){if(typeof p=="string")throw p;var H=w==="/",X=!w,ie;if(H&&U.root)throw new U.ErrnoError(10);if(!H&&!X){var pe=U.lookupPath(w,{follow_mount:!1});if(w=pe.path,ie=pe.node,U.isMountpoint(ie))throw new U.ErrnoError(10);if(!U.isDir(ie.mode))throw new U.ErrnoError(54)}var xe={type:p,opts:y,mountpoint:w,mounts:[]},Ce=p.mount(xe);return Ce.mount=xe,xe.root=Ce,H?U.root=Ce:ie&&(ie.mounted=xe,ie.mount&&ie.mount.mounts.push(xe)),Ce},unmount:function(p){var y=U.lookupPath(p,{follow_mount:!1});if(!U.isMountpoint(y.node))throw new U.ErrnoError(28);var w=y.node,H=w.mounted,X=U.getMounts(H);Object.keys(U.nameTable).forEach(function(pe){for(var xe=U.nameTable[pe];xe;){var Ce=xe.name_next;X.indexOf(xe.mount)!==-1&&U.destroyNode(xe),xe=Ce}}),w.mounted=null;var ie=w.mount.mounts.indexOf(H);ae(ie!==-1),w.mount.mounts.splice(ie,1)},lookup:function(p,y){return p.node_ops.lookup(p,y)},mknod:function(p,y,w){var H=U.lookupPath(p,{parent:!0}),X=H.node,ie=qt.basename(p);if(!ie||ie==="."||ie==="..")throw new U.ErrnoError(28);var pe=U.mayCreate(X,ie);if(pe)throw new U.ErrnoError(pe);if(!X.node_ops.mknod)throw new U.ErrnoError(63);return X.node_ops.mknod(X,ie,y,w)},create:function(p,y){return y=y!==void 0?y:438,y&=4095,y|=32768,U.mknod(p,y,0)},mkdir:function(p,y){return y=y!==void 0?y:511,y&=1023,y|=16384,U.mknod(p,y,0)},mkdirTree:function(p,y){for(var w=p.split("/"),H="",X=0;X<w.length;++X)if(!!w[X]){H+="/"+w[X];try{U.mkdir(H,y)}catch(ie){if(ie.errno!=20)throw ie}}},mkdev:function(p,y,w){return typeof w>"u"&&(w=y,y=438),y|=8192,U.mknod(p,y,w)},symlink:function(p,y){if(!ri.resolve(p))throw new U.ErrnoError(44);var w=U.lookupPath(y,{parent:!0}),H=w.node;if(!H)throw new U.ErrnoError(44);var X=qt.basename(y),ie=U.mayCreate(H,X);if(ie)throw new U.ErrnoError(ie);if(!H.node_ops.symlink)throw new U.ErrnoError(63);return H.node_ops.symlink(H,X,p)},rename:function(p,y){var w=qt.dirname(p),H=qt.dirname(y),X=qt.basename(p),ie=qt.basename(y),pe,xe,Ce;try{pe=U.lookupPath(p,{parent:!0}),xe=pe.node,pe=U.lookupPath(y,{parent:!0}),Ce=pe.node}catch{throw new U.ErrnoError(10)}if(!xe||!Ce)throw new U.ErrnoError(44);if(xe.mount!==Ce.mount)throw new U.ErrnoError(75);var qe=U.lookupNode(xe,X),ht=ri.relative(p,H);if(ht.charAt(0)!==".")throw new U.ErrnoError(28);if(ht=ri.relative(y,w),ht.charAt(0)!==".")throw new U.ErrnoError(55);var xt;try{xt=U.lookupNode(Ce,ie)}catch{}if(qe!==xt){var yt=U.isDir(qe.mode),At=U.mayDelete(xe,X,yt);if(At)throw new U.ErrnoError(At);if(At=xt?U.mayDelete(Ce,ie,yt):U.mayCreate(Ce,ie),At)throw new U.ErrnoError(At);if(!xe.node_ops.rename)throw new U.ErrnoError(63);if(U.isMountpoint(qe)||xt&&U.isMountpoint(xt))throw new U.ErrnoError(10);if(Ce!==xe&&(At=U.nodePermissions(xe,"w"),At))throw new U.ErrnoError(At);try{U.trackingDelegate.willMovePath&&U.trackingDelegate.willMovePath(p,y)}catch(pt){j("FS.trackingDelegate['willMovePath']('"+p+"', '"+y+"') threw an exception: "+pt.message)}U.hashRemoveNode(qe);try{xe.node_ops.rename(qe,Ce,ie)}catch(pt){throw pt}finally{U.hashAddNode(qe)}try{U.trackingDelegate.onMovePath&&U.trackingDelegate.onMovePath(p,y)}catch(pt){j("FS.trackingDelegate['onMovePath']('"+p+"', '"+y+"') threw an exception: "+pt.message)}}},rmdir:function(p){var y=U.lookupPath(p,{parent:!0}),w=y.node,H=qt.basename(p),X=U.lookupNode(w,H),ie=U.mayDelete(w,H,!0);if(ie)throw new U.ErrnoError(ie);if(!w.node_ops.rmdir)throw new U.ErrnoError(63);if(U.isMountpoint(X))throw new U.ErrnoError(10);try{U.trackingDelegate.willDeletePath&&U.trackingDelegate.willDeletePath(p)}catch(pe){j("FS.trackingDelegate['willDeletePath']('"+p+"') threw an exception: "+pe.message)}w.node_ops.rmdir(w,H),U.destroyNode(X);try{U.trackingDelegate.onDeletePath&&U.trackingDelegate.onDeletePath(p)}catch(pe){j("FS.trackingDelegate['onDeletePath']('"+p+"') threw an exception: "+pe.message)}},readdir:function(p){var y=U.lookupPath(p,{follow:!0}),w=y.node;if(!w.node_ops.readdir)throw new U.ErrnoError(54);return w.node_ops.readdir(w)},unlink:function(p){var y=U.lookupPath(p,{parent:!0}),w=y.node,H=qt.basename(p),X=U.lookupNode(w,H),ie=U.mayDelete(w,H,!1);if(ie)throw new U.ErrnoError(ie);if(!w.node_ops.unlink)throw new U.ErrnoError(63);if(U.isMountpoint(X))throw new U.ErrnoError(10);try{U.trackingDelegate.willDeletePath&&U.trackingDelegate.willDeletePath(p)}catch(pe){j("FS.trackingDelegate['willDeletePath']('"+p+"') threw an exception: "+pe.message)}w.node_ops.unlink(w,H),U.destroyNode(X);try{U.trackingDelegate.onDeletePath&&U.trackingDelegate.onDeletePath(p)}catch(pe){j("FS.trackingDelegate['onDeletePath']('"+p+"') threw an exception: "+pe.message)}},readlink:function(p){var y=U.lookupPath(p),w=y.node;if(!w)throw new U.ErrnoError(44);if(!w.node_ops.readlink)throw new U.ErrnoError(28);return ri.resolve(U.getPath(w.parent),w.node_ops.readlink(w))},stat:function(p,y){var w=U.lookupPath(p,{follow:!y}),H=w.node;if(!H)throw new U.ErrnoError(44);if(!H.node_ops.getattr)throw new U.ErrnoError(63);return H.node_ops.getattr(H)},lstat:function(p){return U.stat(p,!0)},chmod:function(p,y,w){var H;if(typeof p=="string"){var X=U.lookupPath(p,{follow:!w});H=X.node}else H=p;if(!H.node_ops.setattr)throw new U.ErrnoError(63);H.node_ops.setattr(H,{mode:y&4095|H.mode&-4096,timestamp:Date.now()})},lchmod:function(p,y){U.chmod(p,y,!0)},fchmod:function(p,y){var w=U.getStream(p);if(!w)throw new U.ErrnoError(8);U.chmod(w.node,y)},chown:function(p,y,w,H){var X;if(typeof p=="string"){var ie=U.lookupPath(p,{follow:!H});X=ie.node}else X=p;if(!X.node_ops.setattr)throw new U.ErrnoError(63);X.node_ops.setattr(X,{timestamp:Date.now()})},lchown:function(p,y,w){U.chown(p,y,w,!0)},fchown:function(p,y,w){var H=U.getStream(p);if(!H)throw new U.ErrnoError(8);U.chown(H.node,y,w)},truncate:function(p,y){if(y<0)throw new U.ErrnoError(28);var w;if(typeof p=="string"){var H=U.lookupPath(p,{follow:!0});w=H.node}else w=p;if(!w.node_ops.setattr)throw new U.ErrnoError(63);if(U.isDir(w.mode))throw new U.ErrnoError(31);if(!U.isFile(w.mode))throw new U.ErrnoError(28);var X=U.nodePermissions(w,"w");if(X)throw new U.ErrnoError(X);w.node_ops.setattr(w,{size:y,timestamp:Date.now()})},ftruncate:function(p,y){var w=U.getStream(p);if(!w)throw new U.ErrnoError(8);if((w.flags&2097155)===0)throw new U.ErrnoError(28);U.truncate(w.node,y)},utime:function(p,y,w){var H=U.lookupPath(p,{follow:!0}),X=H.node;X.node_ops.setattr(X,{timestamp:Math.max(y,w)})},open:function(p,y,w,H,X){if(p==="")throw new U.ErrnoError(44);y=typeof y=="string"?U.modeStringToFlags(y):y,w=typeof w>"u"?438:w,y&64?w=w&4095|32768:w=0;var ie;if(typeof p=="object")ie=p;else{p=qt.normalize(p);try{var pe=U.lookupPath(p,{follow:!(y&131072)});ie=pe.node}catch{}}var xe=!1;if(y&64)if(ie){if(y&128)throw new U.ErrnoError(20)}else ie=U.mknod(p,w,0),xe=!0;if(!ie)throw new U.ErrnoError(44);if(U.isChrdev(ie.mode)&&(y&=-513),y&65536&&!U.isDir(ie.mode))throw new U.ErrnoError(54);if(!xe){var Ce=U.mayOpen(ie,y);if(Ce)throw new U.ErrnoError(Ce)}y&512&&U.truncate(ie,0),y&=-131713;var qe=U.createStream({node:ie,path:U.getPath(ie),flags:y,seekable:!0,position:0,stream_ops:ie.stream_ops,ungotten:[],error:!1},H,X);qe.stream_ops.open&&qe.stream_ops.open(qe),n.logReadFiles&&!(y&1)&&(U.readFiles||(U.readFiles={}),p in U.readFiles||(U.readFiles[p]=1,j("FS.trackingDelegate error on read file: "+p)));try{if(U.trackingDelegate.onOpenFile){var ht=0;(y&2097155)!==1&&(ht|=U.tracking.openFlags.READ),(y&2097155)!==0&&(ht|=U.tracking.openFlags.WRITE),U.trackingDelegate.onOpenFile(p,ht)}}catch(xt){j("FS.trackingDelegate['onOpenFile']('"+p+"', flags) threw an exception: "+xt.message)}return qe},close:function(p){if(U.isClosed(p))throw new U.ErrnoError(8);p.getdents&&(p.getdents=null);try{p.stream_ops.close&&p.stream_ops.close(p)}catch(y){throw y}finally{U.closeStream(p.fd)}p.fd=null},isClosed:function(p){return p.fd===null},llseek:function(p,y,w){if(U.isClosed(p))throw new U.ErrnoError(8);if(!p.seekable||!p.stream_ops.llseek)throw new U.ErrnoError(70);if(w!=0&&w!=1&&w!=2)throw new U.ErrnoError(28);return p.position=p.stream_ops.llseek(p,y,w),p.ungotten=[],p.position},read:function(p,y,w,H,X){if(H<0||X<0)throw new U.ErrnoError(28);if(U.isClosed(p))throw new U.ErrnoError(8);if((p.flags&2097155)===1)throw new U.ErrnoError(8);if(U.isDir(p.node.mode))throw new U.ErrnoError(31);if(!p.stream_ops.read)throw new U.ErrnoError(28);var ie=typeof X<"u";if(!ie)X=p.position;else if(!p.seekable)throw new U.ErrnoError(70);var pe=p.stream_ops.read(p,y,w,H,X);return ie||(p.position+=pe),pe},write:function(p,y,w,H,X,ie){if(H<0||X<0)throw new U.ErrnoError(28);if(U.isClosed(p))throw new U.ErrnoError(8);if((p.flags&2097155)===0)throw new U.ErrnoError(8);if(U.isDir(p.node.mode))throw new U.ErrnoError(31);if(!p.stream_ops.write)throw new U.ErrnoError(28);p.seekable&&p.flags&1024&&U.llseek(p,0,2);var pe=typeof X<"u";if(!pe)X=p.position;else if(!p.seekable)throw new U.ErrnoError(70);var xe=p.stream_ops.write(p,y,w,H,X,ie);pe||(p.position+=xe);try{p.path&&U.trackingDelegate.onWriteToFile&&U.trackingDelegate.onWriteToFile(p.path)}catch(Ce){j("FS.trackingDelegate['onWriteToFile']('"+p.path+"') threw an exception: "+Ce.message)}return xe},allocate:function(p,y,w){if(U.isClosed(p))throw new U.ErrnoError(8);if(y<0||w<=0)throw new U.ErrnoError(28);if((p.flags&2097155)===0)throw new U.ErrnoError(8);if(!U.isFile(p.node.mode)&&!U.isDir(p.node.mode))throw new U.ErrnoError(43);if(!p.stream_ops.allocate)throw new U.ErrnoError(138);p.stream_ops.allocate(p,y,w)},mmap:function(p,y,w,H,X,ie){if((X&2)!==0&&(ie&2)===0&&(p.flags&2097155)!==2)throw new U.ErrnoError(2);if((p.flags&2097155)===1)throw new U.ErrnoError(2);if(!p.stream_ops.mmap)throw new U.ErrnoError(43);return p.stream_ops.mmap(p,y,w,H,X,ie)},msync:function(p,y,w,H,X){return!p||!p.stream_ops.msync?0:p.stream_ops.msync(p,y,w,H,X)},munmap:function(p){return 0},ioctl:function(p,y,w){if(!p.stream_ops.ioctl)throw new U.ErrnoError(59);return p.stream_ops.ioctl(p,y,w)},readFile:function(p,y){if(y=y||{},y.flags=y.flags||"r",y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error('Invalid encoding type "'+y.encoding+'"');var w,H=U.open(p,y.flags),X=U.stat(p),ie=X.size,pe=new Uint8Array(ie);return U.read(H,pe,0,ie,0),y.encoding==="utf8"?w=Ue(pe,0):y.encoding==="binary"&&(w=pe),U.close(H),w},writeFile:function(p,y,w){w=w||{},w.flags=w.flags||"w";var H=U.open(p,w.flags,w.mode);if(typeof y=="string"){var X=new Uint8Array(nt(y)+1),ie=Ve(y,X,0,X.length);U.write(H,X,0,ie,void 0,w.canOwn)}else if(ArrayBuffer.isView(y))U.write(H,y,0,y.byteLength,void 0,w.canOwn);else throw new Error("Unsupported data type");U.close(H)},cwd:function(){return U.currentPath},chdir:function(p){var y=U.lookupPath(p,{follow:!0});if(y.node===null)throw new U.ErrnoError(44);if(!U.isDir(y.node.mode))throw new U.ErrnoError(54);var w=U.nodePermissions(y.node,"x");if(w)throw new U.ErrnoError(w);U.currentPath=y.path},createDefaultDirectories:function(){U.mkdir("/tmp"),U.mkdir("/home"),U.mkdir("/home/web_user")},createDefaultDevices:function(){U.mkdir("/dev"),U.registerDevice(U.makedev(1,3),{read:function(){return 0},write:function(H,X,ie,pe,xe){return pe}}),U.mkdev("/dev/null",U.makedev(1,3)),Vo.register(U.makedev(5,0),Vo.default_tty_ops),Vo.register(U.makedev(6,0),Vo.default_tty1_ops),U.mkdev("/dev/tty",U.makedev(5,0)),U.mkdev("/dev/tty1",U.makedev(6,0));var p;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var y=new Uint8Array(1);p=function(){return crypto.getRandomValues(y),y[0]}}else if(g)try{var w=gc;p=function(){return w.randomBytes(1)[0]}}catch{}p||(p=function(){re("no cryptographic support found for random_device. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}),U.createDevice("/dev","random",p),U.createDevice("/dev","urandom",p),U.mkdir("/dev/shm"),U.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){U.mkdir("/proc"),U.mkdir("/proc/self"),U.mkdir("/proc/self/fd"),U.mount({mount:function(){var p=U.createNode("/proc/self","fd",16895,73);return p.node_ops={lookup:function(y,w){var H=+w,X=U.getStream(H);if(!X)throw new U.ErrnoError(8);var ie={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return X.path}}};return ie.parent=ie,ie}},p}},{},"/proc/self/fd")},createStandardStreams:function(){n.stdin?U.createDevice("/dev","stdin",n.stdin):U.symlink("/dev/tty","/dev/stdin"),n.stdout?U.createDevice("/dev","stdout",null,n.stdout):U.symlink("/dev/tty","/dev/stdout"),n.stderr?U.createDevice("/dev","stderr",null,n.stderr):U.symlink("/dev/tty1","/dev/stderr");var p=U.open("/dev/stdin","r"),y=U.open("/dev/stdout","w"),w=U.open("/dev/stderr","w");ae(p.fd===0,"invalid handle for stdin ("+p.fd+")"),ae(y.fd===1,"invalid handle for stdout ("+y.fd+")"),ae(w.fd===2,"invalid handle for stderr ("+w.fd+")")},ensureErrnoError:function(){U.ErrnoError||(U.ErrnoError=function(y,w){this.node=w,this.setErrno=function(H){this.errno=H;for(var X in Wf)if(Wf[X]===H){this.code=X;break}},this.setErrno(y),this.message=Ci[y],this.stack&&(Object.defineProperty(this,"stack",{value:new Error().stack,writable:!0}),this.stack=ju(this.stack))},U.ErrnoError.prototype=new Error,U.ErrnoError.prototype.constructor=U.ErrnoError,[44].forEach(function(p){U.genericErrors[p]=new U.ErrnoError(p),U.genericErrors[p].stack="<generic error, no stack>"}))},staticInit:function(){U.ensureErrnoError(),U.nameTable=new Array(4096),U.mount(jt,{},"/"),U.createDefaultDirectories(),U.createDefaultDevices(),U.createSpecialDirectories(),U.filesystems={MEMFS:jt}},init:function(p,y,w){ae(!U.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),U.init.initialized=!0,U.ensureErrnoError(),n.stdin=p||n.stdin,n.stdout=y||n.stdout,n.stderr=w||n.stderr,U.createStandardStreams()},quit:function(){U.init.initialized=!1;var p=n._fflush;p&&p(0);for(var y=0;y<U.streams.length;y++){var w=U.streams[y];!w||U.close(w)}},getMode:function(p,y){var w=0;return p&&(w|=365),y&&(w|=146),w},joinPath:function(p,y){var w=qt.join.apply(null,p);return y&&w[0]=="/"&&(w=w.substr(1)),w},absolutePath:function(p,y){return ri.resolve(y,p)},standardizePath:function(p){return qt.normalize(p)},findObject:function(p,y){var w=U.analyzePath(p,y);return w.exists?w.object:(gs(w.error),null)},analyzePath:function(p,y){try{var w=U.lookupPath(p,{follow:!y});p=w.path}catch{}var H={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var w=U.lookupPath(p,{parent:!0});H.parentExists=!0,H.parentPath=w.path,H.parentObject=w.node,H.name=qt.basename(p),w=U.lookupPath(p,{follow:!y}),H.exists=!0,H.path=w.path,H.object=w.node,H.name=w.node.name,H.isRoot=w.path==="/"}catch(X){H.error=X.errno}return H},createFolder:function(p,y,w,H){var X=qt.join2(typeof p=="string"?p:U.getPath(p),y),ie=U.getMode(w,H);return U.mkdir(X,ie)},createPath:function(p,y,w,H){p=typeof p=="string"?p:U.getPath(p);for(var X=y.split("/").reverse();X.length;){var ie=X.pop();if(!!ie){var pe=qt.join2(p,ie);try{U.mkdir(pe)}catch{}p=pe}}return pe},createFile:function(p,y,w,H,X){var ie=qt.join2(typeof p=="string"?p:U.getPath(p),y),pe=U.getMode(H,X);return U.create(ie,pe)},createDataFile:function(p,y,w,H,X,ie){var pe=y?qt.join2(typeof p=="string"?p:U.getPath(p),y):p,xe=U.getMode(H,X),Ce=U.create(pe,xe);if(w){if(typeof w=="string"){for(var qe=new Array(w.length),ht=0,xt=w.length;ht<xt;++ht)qe[ht]=w.charCodeAt(ht);w=qe}U.chmod(Ce,xe|146);var yt=U.open(Ce,"w");U.write(yt,w,0,w.length,0,ie),U.close(yt),U.chmod(Ce,xe)}return Ce},createDevice:function(p,y,w,H){var X=qt.join2(typeof p=="string"?p:U.getPath(p),y),ie=U.getMode(!!w,!!H);U.createDevice.major||(U.createDevice.major=64);var pe=U.makedev(U.createDevice.major++,0);return U.registerDevice(pe,{open:function(xe){xe.seekable=!1},close:function(xe){H&&H.buffer&&H.buffer.length&&H(10)},read:function(xe,Ce,qe,ht,xt){for(var yt=0,At=0;At<ht;At++){var pt;try{pt=w()}catch{throw new U.ErrnoError(29)}if(pt===void 0&&yt===0)throw new U.ErrnoError(6);if(pt==null)break;yt++,Ce[qe+At]=pt}return yt&&(xe.node.timestamp=Date.now()),yt},write:function(xe,Ce,qe,ht,xt){for(var yt=0;yt<ht;yt++)try{H(Ce[qe+yt])}catch{throw new U.ErrnoError(29)}return ht&&(xe.node.timestamp=Date.now()),yt}}),U.mkdev(X,ie,pe)},createLink:function(p,y,w,H,X){var ie=qt.join2(typeof p=="string"?p:U.getPath(p),y);return U.symlink(w,ie)},forceLoadFile:function(p){if(p.isDevice||p.isFolder||p.link||p.contents)return!0;var y=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(b)try{p.contents=_r(b(p.url),!0),p.usedBytes=p.contents.length}catch{y=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return y||gs(29),y},createLazyFile:function(p,y,w,H,X){function ie(){this.lengthKnown=!1,this.chunks=[]}if(ie.prototype.get=function(yt){if(!(yt>this.length-1||yt<0)){var At=yt%this.chunkSize,pt=yt/this.chunkSize|0;return this.getter(pt)[At]}},ie.prototype.setDataGetter=function(yt){this.getter=yt},ie.prototype.cacheLength=function(){var yt=new XMLHttpRequest;if(yt.open("HEAD",w,!1),yt.send(null),!(yt.status>=200&&yt.status<300||yt.status===304))throw new Error("Couldn't load "+w+". Status: "+yt.status);var At=Number(yt.getResponseHeader("Content-length")),pt,hr=(pt=yt.getResponseHeader("Accept-Ranges"))&&pt==="bytes",Vr=(pt=yt.getResponseHeader("Content-Encoding"))&&pt==="gzip",A=1024*1024;hr||(A=At);var S=function(q,ge){if(q>ge)throw new Error("invalid range ("+q+", "+ge+") or no bytes requested!");if(ge>At-1)throw new Error("only "+At+" bytes available! programmer error!");var Oe=new XMLHttpRequest;if(Oe.open("GET",w,!1),At!==A&&Oe.setRequestHeader("Range","bytes="+q+"-"+ge),typeof Uint8Array<"u"&&(Oe.responseType="arraybuffer"),Oe.overrideMimeType&&Oe.overrideMimeType("text/plain; charset=x-user-defined"),Oe.send(null),!(Oe.status>=200&&Oe.status<300||Oe.status===304))throw new Error("Couldn't load "+w+". Status: "+Oe.status);return Oe.response!==void 0?new Uint8Array(Oe.response||[]):_r(Oe.responseText||"",!0)},B=this;B.setDataGetter(function(q){var ge=q*A,Oe=(q+1)*A-1;if(Oe=Math.min(Oe,At-1),typeof B.chunks[q]>"u"&&(B.chunks[q]=S(ge,Oe)),typeof B.chunks[q]>"u")throw new Error("doXHR failed!");return B.chunks[q]}),(Vr||!At)&&(A=At=1,At=this.getter(0).length,A=At,N("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=At,this._chunkSize=A,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!f)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var pe=new ie;Object.defineProperties(pe,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var xe={isDevice:!1,contents:pe}}else var xe={isDevice:!1,url:w};var Ce=U.createFile(p,y,xe,H,X);xe.contents?Ce.contents=xe.contents:xe.url&&(Ce.contents=null,Ce.url=xe.url),Object.defineProperties(Ce,{usedBytes:{get:function(){return this.contents.length}}});var qe={},ht=Object.keys(Ce.stream_ops);return ht.forEach(function(xt){var yt=Ce.stream_ops[xt];qe[xt]=function(){if(!U.forceLoadFile(Ce))throw new U.ErrnoError(29);return yt.apply(null,arguments)}}),qe.read=function(yt,At,pt,hr,Vr){if(!U.forceLoadFile(Ce))throw new U.ErrnoError(29);var A=yt.node.contents;if(Vr>=A.length)return 0;var S=Math.min(A.length-Vr,hr);if(ae(S>=0),A.slice)for(var B=0;B<S;B++)At[pt+B]=A[Vr+B];else for(var B=0;B<S;B++)At[pt+B]=A.get(Vr+B);return S},Ce.stream_ops=qe,Ce},createPreloadedFile:function(p,y,w,H,X,ie,pe,xe,Ce,qe){Browser.init();var ht=y?ri.resolve(qt.join2(p,y)):p,xt=ho("cp "+ht);function yt(At){function pt(Vr){qe&&qe(),xe||U.createDataFile(p,y,Vr,H,X,Ce),ie&&ie(),Vi(xt)}var hr=!1;n.preloadPlugins.forEach(function(Vr){hr||Vr.canHandle(ht)&&(Vr.handle(At,ht,pt,function(){pe&&pe(),Vi(xt)}),hr=!0)}),hr||pt(At)}Yt(xt),typeof w=="string"?Browser.asyncLoad(w,function(At){yt(At)},pe):yt(w)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(p,y,w){y=y||function(){},w=w||function(){};var H=U.indexedDB();try{var X=H.open(U.DB_NAME(),U.DB_VERSION)}catch(ie){return w(ie)}X.onupgradeneeded=function(){N("creating db");var pe=X.result;pe.createObjectStore(U.DB_STORE_NAME)},X.onsuccess=function(){var pe=X.result,xe=pe.transaction([U.DB_STORE_NAME],"readwrite"),Ce=xe.objectStore(U.DB_STORE_NAME),qe=0,ht=0,xt=p.length;function yt(){ht==0?y():w()}p.forEach(function(At){var pt=Ce.put(U.analyzePath(At).object.contents,At);pt.onsuccess=function(){qe++,qe+ht==xt&&yt()},pt.onerror=function(){ht++,qe+ht==xt&&yt()}}),xe.onerror=w},X.onerror=w},loadFilesFromDB:function(p,y,w){y=y||function(){},w=w||function(){};var H=U.indexedDB();try{var X=H.open(U.DB_NAME(),U.DB_VERSION)}catch(ie){return w(ie)}X.onupgradeneeded=w,X.onsuccess=function(){var pe=X.result;try{var xe=pe.transaction([U.DB_STORE_NAME],"readonly")}catch(At){w(At);return}var Ce=xe.objectStore(U.DB_STORE_NAME),qe=0,ht=0,xt=p.length;function yt(){ht==0?y():w()}p.forEach(function(At){var pt=Ce.get(At);pt.onsuccess=function(){U.analyzePath(At).exists&&U.unlink(At),U.createDataFile(qt.dirname(At),qt.basename(At),pt.result,!0,!0,!0),qe++,qe+ht==xt&&yt()},pt.onerror=function(){ht++,qe+ht==xt&&yt()}}),xe.onerror=w},X.onerror=w}},yi={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(p,y){if(y[0]!=="/"){var w;if(p===-100)w=U.cwd();else{var H=U.getStream(p);if(!H)throw new U.ErrnoError(8);w=H.path}y=qt.join2(w,y)}return y},doStat:function(p,y,w){try{var H=p(y)}catch(X){if(X&&X.node&&qt.normalize(y)!==qt.normalize(U.getPath(X.node)))return-54;throw X}return W[w>>2]=H.dev,W[w+4>>2]=0,W[w+8>>2]=H.ino,W[w+12>>2]=H.mode,W[w+16>>2]=H.nlink,W[w+20>>2]=H.uid,W[w+24>>2]=H.gid,W[w+28>>2]=H.rdev,W[w+32>>2]=0,es=[H.size>>>0,(wr=H.size,+mr(wr)>=1?wr>0?(cn(+ps(wr/4294967296),4294967295)|0)>>>0:~~+xi((wr-+(~~wr>>>0))/4294967296)>>>0:0)],W[w+40>>2]=es[0],W[w+44>>2]=es[1],W[w+48>>2]=4096,W[w+52>>2]=H.blocks,W[w+56>>2]=H.atime.getTime()/1e3|0,W[w+60>>2]=0,W[w+64>>2]=H.mtime.getTime()/1e3|0,W[w+68>>2]=0,W[w+72>>2]=H.ctime.getTime()/1e3|0,W[w+76>>2]=0,es=[H.ino>>>0,(wr=H.ino,+mr(wr)>=1?wr>0?(cn(+ps(wr/4294967296),4294967295)|0)>>>0:~~+xi((wr-+(~~wr>>>0))/4294967296)>>>0:0)],W[w+80>>2]=es[0],W[w+84>>2]=es[1],0},doMsync:function(p,y,w,H,X){var ie=Le.slice(p,p+w);U.msync(y,ie,X,w,H)},doMkdir:function(p,y){return p=qt.normalize(p),p[p.length-1]==="/"&&(p=p.substr(0,p.length-1)),U.mkdir(p,y,0),0},doMknod:function(p,y,w){switch(y&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return U.mknod(p,y,w),0},doReadlink:function(p,y,w){if(w<=0)return-28;var H=U.readlink(p),X=Math.min(w,nt(H)),ie=Z[y+X];return Fe(H,y,w+1),Z[y+X]=ie,X},doAccess:function(p,y){if(y&-8)return-28;var w,H=U.lookupPath(p,{follow:!0});if(w=H.node,!w)return-44;var X="";return y&4&&(X+="r"),y&2&&(X+="w"),y&1&&(X+="x"),X&&U.nodePermissions(w,X)?-2:0},doDup:function(p,y,w){var H=U.getStream(w);return H&&U.close(H),U.open(p,y,0,w,w).fd},doReadv:function(p,y,w,H){for(var X=0,ie=0;ie<w;ie++){var pe=W[y+ie*8>>2],xe=W[y+(ie*8+4)>>2],Ce=U.read(p,Z,pe,xe,H);if(Ce<0)return-1;if(X+=Ce,Ce<xe)break}return X},doWritev:function(p,y,w,H){for(var X=0,ie=0;ie<w;ie++){var pe=W[y+ie*8>>2],xe=W[y+(ie*8+4)>>2],Ce=U.write(p,Z,pe,xe,H);if(Ce<0)return-1;X+=Ce}return X},varargs:void 0,get:function(){ae(yi.varargs!=null),yi.varargs+=4;var p=W[yi.varargs-4>>2];return p},getStr:function(p){var y=rt(p);return y},getStreamFromFD:function(p){var y=U.getStream(p);if(!y)throw new U.ErrnoError(8);return y},get64:function(p,y){return p>=0?ae(y===0):ae(y===-1),p}};function Gg(p,y,w,H,X,ie){ie<<=12;var pe,xe=!1;if((H&16)!==0&&p%16384!==0)return-28;if((H&32)!==0){if(pe=t_(16384,y),!pe)return-48;Jg(pe,0,y),xe=!0}else{var Ce=U.getStream(X);if(!Ce)return-8;var qe=U.mmap(Ce,p,y,ie,w,H);pe=qe.ptr,xe=qe.allocated}return yi.mappings[pe]={malloc:pe,len:y,allocated:xe,fd:X,prot:w,flags:H,offset:ie},pe}function $f(p,y,w,H,X,ie){try{return Gg(p,y,w,H,X,ie)}catch(pe){return(typeof U>"u"||!(pe instanceof U.ErrnoError))&&re(pe),-pe.errno}}function Bh(p,y){if((p|0)===-1||y===0)return-28;var w=yi.mappings[p];if(!w)return 0;if(y===w.len){var H=U.getStream(w.fd);w.prot&2&&yi.doMsync(p,H,y,w.flags,w.offset),yi.mappings[p]=null,w.allocated&&Fi(w.malloc)}return 0}function Kf(p,y){try{return Bh(p,y)}catch(w){return(typeof U>"u"||!(w instanceof U.ErrnoError))&&re(w),-w.errno}}function In(p,y,w){yi.varargs=w;try{var H=yi.getStr(p),X=yi.get(),ie=U.open(H,y,X);return ie.fd}catch(pe){return(typeof U>"u"||!(pe instanceof U.ErrnoError))&&re(pe),-pe.errno}}function Xf(p,y){try{return p=yi.getStr(p),yi.doStat(U.stat,p,y)}catch(w){return(typeof U>"u"||!(w instanceof U.ErrnoError))&&re(w),-w.errno}}function $i(p){switch(p){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+p)}}function jv(){for(var p=new Array(256),y=0;y<256;++y)p[y]=String.fromCharCode(y);Cl=p}var Cl=void 0;function Xr(p){for(var y="",w=p;Le[w];)y+=Cl[Le[w++]];return y}var Ol={},Ba={},Fn={},Vv=48,Lh=57;function Nl(p){if(p===void 0)return"_unknown";p=p.replace(/[^a-zA-Z0-9_]/g,"$");var y=p.charCodeAt(0);return y>=Vv&&y<=Lh?"_"+p:p}function $u(p,y){return p=Nl(p),new Function("body","return function "+p+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(y)}function Yf(p,y){var w=$u(y,function(H){this.name=y,this.message=H;var X=new Error(H).stack;X!==void 0&&(this.stack=this.toString()+`
`+X.replace(/^Error(:[^\n]*)?\n/,""))});return w.prototype=Object.create(p.prototype),w.prototype.constructor=w,w.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},w}var Il=void 0;function ir(p){throw new Il(p)}var Ku=void 0;function Uh(p){throw new Ku(p)}function Wo(p,y,w){p.forEach(function(xe){Fn[xe]=y});function H(xe){var Ce=w(xe);Ce.length!==p.length&&Uh("Mismatched type converter count");for(var qe=0;qe<p.length;++qe)js(p[qe],Ce[qe])}var X=new Array(y.length),ie=[],pe=0;y.forEach(function(xe,Ce){Ba.hasOwnProperty(xe)?X[Ce]=Ba[xe]:(ie.push(xe),Ol.hasOwnProperty(xe)||(Ol[xe]=[]),Ol[xe].push(function(){X[Ce]=Ba[xe],++pe,pe===ie.length&&H(X)}))}),ie.length===0&&H(X)}function js(p,y,w){if(w=w||{},!("argPackAdvance"in y))throw new TypeError("registerType registeredInstance requires argPackAdvance");var H=y.name;if(p||ir('type "'+H+'" must have a positive integer typeid pointer'),Ba.hasOwnProperty(p)){if(w.ignoreDuplicateRegistrations)return;ir("Cannot register type '"+H+"' twice")}if(Ba[p]=y,delete Fn[p],Ol.hasOwnProperty(p)){var X=Ol[p];delete Ol[p],X.forEach(function(ie){ie()})}}function zg(p,y,w,H,X){var ie=$i(w);y=Xr(y),js(p,{name:y,fromWireType:function(pe){return!!pe},toWireType:function(pe,xe){return xe?H:X},argPackAdvance:8,readValueFromPointer:function(pe){var xe;if(w===1)xe=Z;else if(w===2)xe=F;else if(w===4)xe=W;else throw new TypeError("Unknown boolean type size: "+y);return this.fromWireType(xe[pe>>ie])},destructorFunction:null})}function Gh(p){if(!(this instanceof $o)||!(p instanceof $o))return!1;for(var y=this.$$.ptrType.registeredClass,w=this.$$.ptr,H=p.$$.ptrType.registeredClass,X=p.$$.ptr;y.baseClass;)w=y.upcast(w),y=y.baseClass;for(;H.baseClass;)X=H.upcast(X),H=H.baseClass;return y===H&&w===X}function ms(p){return{count:p.count,deleteScheduled:p.deleteScheduled,preservePointerOnDelete:p.preservePointerOnDelete,ptr:p.ptr,ptrType:p.ptrType,smartPtr:p.smartPtr,smartPtrType:p.smartPtrType}}function Fl(p){function y(w){return w.$$.ptrType.registeredClass.name}ir(y(p)+" instance already deleted")}var La=!1;function ts(p){}function xs(p){p.smartPtr?p.smartPtrType.rawDestructor(p.smartPtr):p.ptrType.registeredClass.rawDestructor(p.ptr)}function _o(p){p.count.value-=1;var y=p.count.value===0;y&&xs(p)}function dn(p){return typeof FinalizationGroup>"u"?(dn=function(y){return y},p):(La=new FinalizationGroup(function(y){for(var w=y.next();!w.done;w=y.next()){var H=w.value;H.ptr?_o(H):console.warn("object already deleted: "+H.ptr)}}),dn=function(y){return La.register(y,y.$$,y.$$),y},ts=function(y){La.unregister(y.$$)},dn(p))}function Ml(){if(this.$$.ptr||Fl(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var p=dn(Object.create(Object.getPrototypeOf(this),{$$:{value:ms(this.$$)}}));return p.$$.count.value+=1,p.$$.deleteScheduled=!1,p}function Ua(){this.$$.ptr||Fl(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ir("Object already scheduled for deletion"),ts(this),_o(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Hg(){return!this.$$.ptr}var Bl=void 0,Ll=[];function Ar(){for(;Ll.length;){var p=Ll.pop();p.$$.deleteScheduled=!1,p.delete()}}function Xu(){return this.$$.ptr||Fl(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ir("Object already scheduled for deletion"),Ll.push(this),Ll.length===1&&Bl&&Bl(Ar),this.$$.deleteScheduled=!0,this}function Wv(){$o.prototype.isAliasOf=Gh,$o.prototype.clone=Ml,$o.prototype.delete=Ua,$o.prototype.isDeleted=Hg,$o.prototype.deleteLater=Xu}function $o(){}var qf={};function Qf(p,y,w){if(p[y].overloadTable===void 0){var H=p[y];p[y]=function(){return p[y].overloadTable.hasOwnProperty(arguments.length)||ir("Function '"+w+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+p[y].overloadTable+")!"),p[y].overloadTable[arguments.length].apply(this,arguments)},p[y].overloadTable=[],p[y].overloadTable[H.argCount]=H}}function nr(p,y,w){n.hasOwnProperty(p)?((w===void 0||n[p].overloadTable!==void 0&&n[p].overloadTable[w]!==void 0)&&ir("Cannot register public name '"+p+"' twice"),Qf(n,p,p),n.hasOwnProperty(w)&&ir("Cannot register multiple overloads of a function with the same number of arguments ("+w+")!"),n[p].overloadTable[w]=y):(n[p]=y,w!==void 0&&(n[p].numArguments=w))}function zh(p,y,w,H,X,ie,pe,xe){this.name=p,this.constructor=y,this.instancePrototype=w,this.rawDestructor=H,this.baseClass=X,this.getActualType=ie,this.upcast=pe,this.downcast=xe,this.pureVirtualFunctions=[]}function Ul(p,y,w){for(;y!==w;)y.upcast||ir("Expected null or instance of "+w.name+", got an instance of "+y.name),p=y.upcast(p),y=y.baseClass;return p}function Ga(p,y){if(y===null)return this.isReference&&ir("null is not a valid "+this.name),0;y.$$||ir('Cannot pass "'+Hl(y)+'" as a '+this.name),y.$$.ptr||ir("Cannot pass deleted object as a pointer of type "+this.name);var w=y.$$.ptrType.registeredClass,H=Ul(y.$$.ptr,w,this.registeredClass);return H}function $v(p,y){var w;if(y===null)return this.isReference&&ir("null is not a valid "+this.name),this.isSmartPointer?(w=this.rawConstructor(),p!==null&&p.push(this.rawDestructor,w),w):0;y.$$||ir('Cannot pass "'+Hl(y)+'" as a '+this.name),y.$$.ptr||ir("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&y.$$.ptrType.isConst&&ir("Cannot convert argument of type "+(y.$$.smartPtrType?y.$$.smartPtrType.name:y.$$.ptrType.name)+" to parameter type "+this.name);var H=y.$$.ptrType.registeredClass;if(w=Ul(y.$$.ptr,H,this.registeredClass),this.isSmartPointer)switch(y.$$.smartPtr===void 0&&ir("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:y.$$.smartPtrType===this?w=y.$$.smartPtr:ir("Cannot convert argument of type "+(y.$$.smartPtrType?y.$$.smartPtrType.name:y.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:w=y.$$.smartPtr;break;case 2:if(y.$$.smartPtrType===this)w=y.$$.smartPtr;else{var X=y.clone();w=this.rawShare(w,qg(function(){X.delete()})),p!==null&&p.push(this.rawDestructor,w)}break;default:ir("Unsupporting sharing policy")}return w}function Yu(p,y){if(y===null)return this.isReference&&ir("null is not a valid "+this.name),0;y.$$||ir('Cannot pass "'+Hl(y)+'" as a '+this.name),y.$$.ptr||ir("Cannot pass deleted object as a pointer of type "+this.name),y.$$.ptrType.isConst&&ir("Cannot convert argument of type "+y.$$.ptrType.name+" to parameter type "+this.name);var w=y.$$.ptrType.registeredClass,H=Ul(y.$$.ptr,w,this.registeredClass);return H}function za(p){return this.fromWireType(te[p>>2])}function Jf(p){return this.rawGetPointee&&(p=this.rawGetPointee(p)),p}function cr(p){this.rawDestructor&&this.rawDestructor(p)}function Ko(p){p!==null&&p.delete()}function Gl(p,y,w){if(y===w)return p;if(w.baseClass===void 0)return null;var H=Gl(p,y,w.baseClass);return H===null?null:w.downcast(H)}function jg(){return Object.keys(Ha).length}function Vg(){var p=[];for(var y in Ha)Ha.hasOwnProperty(y)&&p.push(Ha[y]);return p}function Zf(p){Bl=p,Ll.length&&Bl&&Bl(Ar)}function Hh(){n.getInheritedInstanceCount=jg,n.getLiveInheritedInstances=Vg,n.flushPendingDeletes=Ar,n.setDelayFunction=Zf}var Ha={};function jh(p,y){for(y===void 0&&ir("ptr should not be undefined");p.baseClass;)y=p.upcast(y),p=p.baseClass;return y}function Vh(p,y){return y=jh(p,y),Ha[y]}function ja(p,y){(!y.ptrType||!y.ptr)&&Uh("makeClassHandle requires ptr and ptrType");var w=!!y.smartPtrType,H=!!y.smartPtr;return w!==H&&Uh("Both smartPtrType and smartPtr must be specified"),y.count={value:1},dn(Object.create(p,{$$:{value:y}}))}function Kv(p){var y=this.getPointee(p);if(!y)return this.destructor(p),null;var w=Vh(this.registeredClass,y);if(w!==void 0){if(w.$$.count.value===0)return w.$$.ptr=y,w.$$.smartPtr=p,w.clone();var H=w.clone();return this.destructor(p),H}function X(){return this.isSmartPointer?ja(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:y,smartPtrType:this,smartPtr:p}):ja(this.registeredClass.instancePrototype,{ptrType:this,ptr:p})}var ie=this.registeredClass.getActualType(y),pe=qf[ie];if(!pe)return X.call(this);var xe;this.isConst?xe=pe.constPointerType:xe=pe.pointerType;var Ce=Gl(y,this.registeredClass,xe.registeredClass);return Ce===null?X.call(this):this.isSmartPointer?ja(xe.registeredClass.instancePrototype,{ptrType:xe,ptr:Ce,smartPtrType:this,smartPtr:p}):ja(xe.registeredClass.instancePrototype,{ptrType:xe,ptr:Ce})}function Wg(){rs.prototype.getPointee=Jf,rs.prototype.destructor=cr,rs.prototype.argPackAdvance=8,rs.prototype.readValueFromPointer=za,rs.prototype.deleteObject=Ko,rs.prototype.fromWireType=Kv}function rs(p,y,w,H,X,ie,pe,xe,Ce,qe,ht){this.name=p,this.registeredClass=y,this.isReference=w,this.isConst=H,this.isSmartPointer=X,this.pointeeType=ie,this.sharingPolicy=pe,this.rawGetPointee=xe,this.rawConstructor=Ce,this.rawShare=qe,this.rawDestructor=ht,!X&&y.baseClass===void 0?H?(this.toWireType=Ga,this.destructorFunction=null):(this.toWireType=Yu,this.destructorFunction=null):this.toWireType=$v}function ke(p,y,w){n.hasOwnProperty(p)||Uh("Replacing nonexistant public symbol"),n[p].overloadTable!==void 0&&w!==void 0?n[p].overloadTable[w]=y:(n[p]=y,n[p].argCount=w)}function Qr(p,y){p=Xr(p);function w(ie){for(var pe=[],xe=1;xe<p.length;++xe)pe.push("a"+xe);var Ce="dynCall_"+p+"_"+y,qe="return function "+Ce+"("+pe.join(", ")+`) {
`;return qe+="    return dynCall(rawFunction"+(pe.length?", ":"")+pe.join(", ")+`);
`,qe+=`};
`,new Function("dynCall","rawFunction",qe)(ie,y)}var H=n["dynCall_"+p],X=w(H);return typeof X!="function"&&ir("unknown function pointer with signature "+p+": "+y),X}var $g=void 0;function Kg(p){var y=$h(p),w=Xr(y);return Fi(y),w}function qu(p,y){var w=[],H={};function X(ie){if(!H[ie]&&!Ba[ie]){if(Fn[ie]){Fn[ie].forEach(X);return}w.push(ie),H[ie]=!0}}throw y.forEach(X),new $g(p+": "+w.map(Kg).join([", "]))}function Xv(p,y,w,H,X,ie,pe,xe,Ce,qe,ht,xt,yt){ht=Xr(ht),ie=Qr(X,ie),xe&&(xe=Qr(pe,xe)),qe&&(qe=Qr(Ce,qe)),yt=Qr(xt,yt);var At=Nl(ht);nr(At,function(){qu("Cannot construct "+ht+" due to unbound types",[H])}),Wo([p,y,w],H?[H]:[],function(pt){pt=pt[0];var hr,Vr;H?(hr=pt.registeredClass,Vr=hr.instancePrototype):Vr=$o.prototype;var A=$u(At,function(){if(Object.getPrototypeOf(this)!==S)throw new Il("Use 'new' to construct "+ht);if(B.constructor_body===void 0)throw new Il(ht+" has no accessible constructor");var Je=B.constructor_body[arguments.length];if(Je===void 0)throw new Il("Tried to invoke ctor of "+ht+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(B.constructor_body).toString()+") parameters instead!");return Je.apply(this,arguments)}),S=Object.create(Vr,{constructor:{value:A}});A.prototype=S;var B=new zh(ht,A,S,yt,hr,ie,xe,qe),q=new rs(ht,B,!0,!1,!1),ge=new rs(ht+"*",B,!1,!1,!1),Oe=new rs(ht+" const*",B,!1,!0,!1);return qf[p]={pointerType:ge,constPointerType:Oe},ke(At,A),[q,ge,Oe]})}function Xg(p,y){if(!(p instanceof Function))throw new TypeError("new_ called with constructor type "+typeof p+" which is not a function");var w=$u(p.name||"unknownFunctionName",function(){});w.prototype=p.prototype;var H=new w,X=p.apply(H,y);return X instanceof Object?X:H}function zl(p){for(;p.length;){var y=p.pop(),w=p.pop();w(y)}}function is(p,y,w,H,X){var ie=y.length;ie<2&&ir("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var pe=y[1]!==null&&w!==null,xe=!1,Ce=1;Ce<y.length;++Ce)if(y[Ce]!==null&&y[Ce].destructorFunction===void 0){xe=!0;break}for(var qe=y[0].name!=="void",ht="",xt="",Ce=0;Ce<ie-2;++Ce)ht+=(Ce!==0?", ":"")+"arg"+Ce,xt+=(Ce!==0?", ":"")+"arg"+Ce+"Wired";var yt="return function "+Nl(p)+"("+ht+`) {
if (arguments.length !== `+(ie-2)+`) {
throwBindingError('function `+p+" called with ' + arguments.length + ' arguments, expected "+(ie-2)+` args!');
}
`;xe&&(yt+=`var destructors = [];
`);var At=xe?"destructors":"null",pt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],hr=[ir,H,X,zl,y[0],y[1]];pe&&(yt+="var thisWired = classParam.toWireType("+At+`, this);
`);for(var Ce=0;Ce<ie-2;++Ce)yt+="var arg"+Ce+"Wired = argType"+Ce+".toWireType("+At+", arg"+Ce+"); // "+y[Ce+2].name+`
`,pt.push("argType"+Ce),hr.push(y[Ce+2]);if(pe&&(xt="thisWired"+(xt.length>0?", ":"")+xt),yt+=(qe?"var rv = ":"")+"invoker(fn"+(xt.length>0?", ":"")+xt+`);
`,xe)yt+=`runDestructors(destructors);
`;else for(var Ce=pe?1:2;Ce<y.length;++Ce){var Vr=Ce===1?"thisWired":"arg"+(Ce-2)+"Wired";y[Ce].destructorFunction!==null&&(yt+=Vr+"_dtor("+Vr+"); // "+y[Ce].name+`
`,pt.push(Vr+"_dtor"),hr.push(y[Ce].destructorFunction))}qe&&(yt+=`var ret = retType.fromWireType(rv);
return ret;
`),yt+=`}
`,pt.push(yt);var A=Xg(Function,pt).apply(null,hr);return A}function Qu(p,y){for(var w=[],H=0;H<p;H++)w.push(W[(y>>2)+H]);return w}function Yg(p,y,w,H,X,ie,pe){var xe=Qu(w,H);y=Xr(y),ie=Qr(X,ie),Wo([],[p],function(Ce){Ce=Ce[0];var qe=Ce.name+"."+y;function ht(){qu("Cannot call "+qe+" due to unbound types",xe)}var xt=Ce.registeredClass.constructor;return xt[y]===void 0?(ht.argCount=w-1,xt[y]=ht):(Qf(xt,y,qe),xt[y].overloadTable[w-1]=ht),Wo([],xe,function(yt){var At=[yt[0],null].concat(yt.slice(1)),pt=is(qe,At,null,ie,pe);return xt[y].overloadTable===void 0?(pt.argCount=w-1,xt[y]=pt):xt[y].overloadTable[w-1]=pt,[]}),[]})}function Oi(p,y,w,H,X,ie){ae(y>0);var pe=Qu(y,w);X=Qr(H,X);var xe=[ie],Ce=[];Wo([],[p],function(qe){qe=qe[0];var ht="constructor "+qe.name;if(qe.registeredClass.constructor_body===void 0&&(qe.registeredClass.constructor_body=[]),qe.registeredClass.constructor_body[y-1]!==void 0)throw new Il("Cannot register multiple constructors with identical number of parameters ("+(y-1)+") for class '"+qe.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return qe.registeredClass.constructor_body[y-1]=function(){qu("Cannot construct "+qe.name+" due to unbound types",pe)},Wo([],pe,function(xt){return qe.registeredClass.constructor_body[y-1]=function(){arguments.length!==y-1&&ir(ht+" called with "+arguments.length+" arguments, expected "+(y-1)),Ce.length=0,xe.length=y;for(var At=1;At<y;++At)xe[At]=xt[At].toWireType(Ce,arguments[At-1]);var pt=X.apply(null,xe);return zl(Ce),xt[0].fromWireType(pt)},[]}),[]})}function Ni(p,y,w,H,X,ie,pe,xe){var Ce=Qu(w,H);y=Xr(y),ie=Qr(X,ie),Wo([],[p],function(qe){qe=qe[0];var ht=qe.name+"."+y;xe&&qe.registeredClass.pureVirtualFunctions.push(y);function xt(){qu("Cannot call "+ht+" due to unbound types",Ce)}var yt=qe.registeredClass.instancePrototype,At=yt[y];return At===void 0||At.overloadTable===void 0&&At.className!==qe.name&&At.argCount===w-2?(xt.argCount=w-2,xt.className=qe.name,yt[y]=xt):(Qf(yt,y,ht),yt[y].overloadTable[w-2]=xt),Wo([],Ce,function(pt){var hr=is(ht,pt,qe,ie,pe);return yt[y].overloadTable===void 0?(hr.argCount=w-2,yt[y]=hr):yt[y].overloadTable[w-2]=hr,[]}),[]})}var ii=[],ys=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Yv(p){p>4&&--ys[p].refcount===0&&(ys[p]=void 0,ii.push(p))}function qv(){for(var p=0,y=5;y<ys.length;++y)ys[y]!==void 0&&++p;return p}function Qv(){for(var p=5;p<ys.length;++p)if(ys[p]!==void 0)return ys[p];return null}function Jv(){n.count_emval_handles=qv,n.get_first_emval=Qv}function qg(p){switch(p){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var y=ii.length?ii.pop():ys.length;return ys[y]={refcount:1,value:p},y}}}function Zv(p,y){y=Xr(y),js(p,{name:y,fromWireType:function(w){var H=ys[w].value;return Yv(w),H},toWireType:function(w,H){return qg(H)},argPackAdvance:8,readValueFromPointer:za,destructorFunction:null})}function eE(p,y,w){switch(y){case 0:return function(H){var X=w?Z:Le;return this.fromWireType(X[H])};case 1:return function(H){var X=w?F:z;return this.fromWireType(X[H>>1])};case 2:return function(H){var X=w?W:te;return this.fromWireType(X[H>>2])};default:throw new TypeError("Unknown integer type: "+p)}}function tE(p,y,w,H){var X=$i(w);y=Xr(y);function ie(){}ie.values={},js(p,{name:y,constructor:ie,fromWireType:function(pe){return this.constructor.values[pe]},toWireType:function(pe,xe){return xe.value},argPackAdvance:8,readValueFromPointer:eE(y,X,H),destructorFunction:null}),nr(y,ie)}function rE(p,y){var w=Ba[p];return w===void 0&&ir(y+" has unknown type "+Kg(p)),w}function iE(p,y,w){var H=rE(p,"enum");y=Xr(y);var X=H.constructor,ie=Object.create(H.constructor.prototype,{value:{value:w},constructor:{value:$u(H.name+"_"+y,function(){})}});X.values[w]=ie,X[y]=ie}function Hl(p){if(p===null)return"null";var y=typeof p;return y==="object"||y==="array"||y==="function"?p.toString():""+p}function nE(p,y){switch(y){case 2:return function(w){return this.fromWireType(de[w>>2])};case 3:return function(w){return this.fromWireType(ye[w>>3])};default:throw new TypeError("Unknown float type: "+p)}}function sE(p,y,w){var H=$i(w);y=Xr(y),js(p,{name:y,fromWireType:function(X){return X},toWireType:function(X,ie){if(typeof ie!="number"&&typeof ie!="boolean")throw new TypeError('Cannot convert "'+Hl(ie)+'" to '+this.name);return ie},argPackAdvance:8,readValueFromPointer:nE(y,H),destructorFunction:null})}function oE(p,y,w,H,X,ie){var pe=Qu(y,w);p=Xr(p),X=Qr(H,X),nr(p,function(){qu("Cannot call "+p+" due to unbound types",pe)},y-1),Wo([],pe,function(xe){var Ce=[xe[0],null].concat(xe.slice(1));return ke(p,is(p,Ce,null,X,ie),y-1),[]})}function aE(p,y,w){switch(y){case 0:return w?function(X){return Z[X]}:function(X){return Le[X]};case 1:return w?function(X){return F[X>>1]}:function(X){return z[X>>1]};case 2:return w?function(X){return W[X>>2]}:function(X){return te[X>>2]};default:throw new TypeError("Unknown integer type: "+p)}}function Wh(p,y,w,H,X){y=Xr(y),X===-1&&(X=4294967295);var ie=$i(w),pe=function(qe){return qe};if(H===0){var xe=32-8*w;pe=function(qe){return qe<<xe>>>xe}}var Ce=y.indexOf("unsigned")!=-1;js(p,{name:y,fromWireType:pe,toWireType:function(qe,ht){if(typeof ht!="number"&&typeof ht!="boolean")throw new TypeError('Cannot convert "'+Hl(ht)+'" to '+this.name);if(ht<H||ht>X)throw new TypeError('Passing a number "'+Hl(ht)+'" from JS side to C/C++ side to an argument of type "'+y+'", which is outside the valid range ['+H+", "+X+"]!");return Ce?ht>>>0:ht|0},argPackAdvance:8,readValueFromPointer:aE(y,ie,H!==0),destructorFunction:null})}function Qg(p,y,w){var H=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],X=H[y];function ie(pe){pe=pe>>2;var xe=te,Ce=xe[pe],qe=xe[pe+1];return new X(He,qe,Ce)}w=Xr(w),js(p,{name:w,fromWireType:ie,argPackAdvance:8,readValueFromPointer:ie},{ignoreDuplicateRegistrations:!0})}function e_(p,y){y=Xr(y);var w=y==="std::string";js(p,{name:y,fromWireType:function(H){var X=te[H>>2],ie;if(w)for(var pe=H+4,xe=0;xe<=X;++xe){var Ce=H+4+xe;if(Le[Ce]==0||xe==X){var qe=Ce-pe,ht=rt(pe,qe);ie===void 0?ie=ht:(ie+=String.fromCharCode(0),ie+=ht),pe=Ce+1}}else{for(var xt=new Array(X),xe=0;xe<X;++xe)xt[xe]=String.fromCharCode(Le[H+4+xe]);ie=xt.join("")}return Fi(H),ie},toWireType:function(H,X){X instanceof ArrayBuffer&&(X=new Uint8Array(X));var ie,pe=typeof X=="string";pe||X instanceof Uint8Array||X instanceof Uint8ClampedArray||X instanceof Int8Array||ir("Cannot pass non-string to std::string"),w&&pe?ie=function(){return nt(X)}:ie=function(){return X.length};var xe=ie(),Ce=Xo(4+xe+1);if(te[Ce>>2]=xe,w&&pe)Fe(X,Ce+4,xe+1);else if(pe)for(var qe=0;qe<xe;++qe){var ht=X.charCodeAt(qe);ht>255&&(Fi(Ce),ir("String has UTF-16 code units that do not fit in 8 bits")),Le[Ce+4+qe]=ht}else for(var qe=0;qe<xe;++qe)Le[Ce+4+qe]=X[qe];return H!==null&&H.push(Fi,Ce),Ce},argPackAdvance:8,readValueFromPointer:za,destructorFunction:function(H){Fi(H)}})}function h(p,y,w){w=Xr(w);var H,X,ie,pe,xe;y===2?(H=it,X=bt,pe=ee,ie=function(){return z},xe=1):y===4&&(H=ne,X=se,pe=Ee,ie=function(){return te},xe=2),js(p,{name:w,fromWireType:function(Ce){for(var qe=te[Ce>>2],ht=ie(),xt,yt=Ce+4,At=0;At<=qe;++At){var pt=Ce+4+At*y;if(ht[pt>>xe]==0||At==qe){var hr=pt-yt,Vr=H(yt,hr);xt===void 0?xt=Vr:(xt+=String.fromCharCode(0),xt+=Vr),yt=pt+y}}return Fi(Ce),xt},toWireType:function(Ce,qe){typeof qe!="string"&&ir("Cannot pass non-string to C++ string type "+w);var ht=pe(qe),xt=Xo(4+ht+y);return te[xt>>2]=ht>>xe,X(qe,xt+4,ht+y),Ce!==null&&Ce.push(Fi,xt),xt},argPackAdvance:8,readValueFromPointer:za,destructorFunction:function(Ce){Fi(Ce)}})}function m(p,y){y=Xr(y),js(p,{isVoid:!0,name:y,argPackAdvance:0,fromWireType:function(){},toWireType:function(w,H){}})}function v(){re()}function k(){return 649456}function G(p,y,w){Le.copyWithin(p,y,y+w)}function Y(p){re("Cannot enlarge memory arrays to size "+p+" bytes (OOM). Either (1) compile with  -s INITIAL_MEMORY=X  with X higher than the current value "+Z.length+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function ve(p){p=p>>>0,Y(p)}var be={};function Me(){return c||"./this.program"}function Ne(){if(!Ne.strings){var p={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Me()};for(var y in be)p[y]=be[y];var w=[];for(var y in p)w.push(y+"="+p[y]);Ne.strings=w}return Ne.strings}function ct(p,y){var w=0;return Ne().forEach(function(H,X){var ie=y+w;W[p+X*4>>2]=ie,fe(H,ie),w+=H.length+1}),0}function kt(p,y){var w=Ne();W[p>>2]=w.length;var H=0;return w.forEach(function(X){H+=X.length+1}),W[y>>2]=H,0}function Nt(p){try{var y=yi.getStreamFromFD(p);return U.close(y),0}catch(w){return(typeof U>"u"||!(w instanceof U.ErrnoError))&&re(w),w.errno}}function Ge(p){}var Tt=function(p,y,w,H){p||(p=this),this.parent=p,this.mount=p.mount,this.mounted=null,this.id=U.nextInode++,this.name=y,this.mode=w,this.node_ops={},this.stream_ops={},this.rdev=H},sr=365,Or=146;Object.defineProperties(Tt.prototype,{read:{get:function(){return(this.mode&sr)===sr},set:function(p){p?this.mode|=sr:this.mode&=~sr}},write:{get:function(){return(this.mode&Or)===Or},set:function(p){p?this.mode|=Or:this.mode&=~Or}},isFolder:{get:function(){return U.isDir(this.mode)}},isDevice:{get:function(){return U.isChrdev(this.mode)}}}),U.FSNode=Tt,U.staticInit(),jv(),Il=n.BindingError=Yf(Error,"BindingError"),Ku=n.InternalError=Yf(Error,"InternalError"),Wv(),Wg(),Hh(),$g=n.UnboundTypeError=Yf(Error,"UnboundTypeError"),Jv();/**
 * @license
 * Copyright 2017 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */function _r(p,y,w){var H=w>0?w:nt(p)+1,X=new Array(H),ie=Ve(p,X,0,X.length);return y&&(X.length=ie),X}var Ii={__handle_stack_overflow:Wu,__map_file:Dl,__sys_mmap2:$f,__sys_munmap:Kf,__sys_open:In,__sys_stat64:Xf,_embind_register_bool:zg,_embind_register_class:Xv,_embind_register_class_class_function:Yg,_embind_register_class_constructor:Oi,_embind_register_class_function:Ni,_embind_register_emval:Zv,_embind_register_enum:tE,_embind_register_enum_value:iE,_embind_register_float:sE,_embind_register_function:oE,_embind_register_integer:Wh,_embind_register_memory_view:Qg,_embind_register_std_string:e_,_embind_register_std_wstring:h,_embind_register_void:m,abort:v,emscripten_get_sbrk_ptr:k,emscripten_memcpy_big:G,emscripten_resize_heap:ve,environ_get:ct,environ_sizes_get:kt,fd_close:Nt,memory:K,setTempRet0:Ge,table:Q};jo();var Ju=n.___wasm_call_ctors=Ut("__wasm_call_ctors"),Xo=n._malloc=Ut("malloc"),Jg=n._memset=Ut("memset"),Fi=n._free=Ut("free"),$h=n.___getTypeName=Ut("__getTypeName");n.___embind_register_native_and_builtin_types=Ut("__embind_register_native_and_builtin_types"),n._fflush=Ut("fflush");var Yo=n.___errno_location=Ut("__errno_location");n.__get_tzname=Ut("_get_tzname"),n.__get_daylight=Ut("_get_daylight"),n.__get_timezone=Ut("_get_timezone"),n.stackSave=Ut("stackSave"),n.stackRestore=Ut("stackRestore"),n.stackAlloc=Ut("stackAlloc");var t_=n._memalign=Ut("memalign");n.___set_stack_limit=Ut("__set_stack_limit"),n.__growWasmMemory=Ut("__growWasmMemory"),n.dynCall_ii=Ut("dynCall_ii"),n.dynCall_vi=Ut("dynCall_vi"),n.dynCall_iii=Ut("dynCall_iii"),n.dynCall_vii=Ut("dynCall_vii"),n.dynCall_viiii=Ut("dynCall_viiii"),n.dynCall_viii=Ut("dynCall_viii"),n.dynCall_iiii=Ut("dynCall_iiii"),n.dynCall_iiiii=Ut("dynCall_iiiii"),n.dynCall_viiiii=Ut("dynCall_viiiii"),n.dynCall_i=Ut("dynCall_i"),n.dynCall_iiiiiii=Ut("dynCall_iiiiiii"),n.dynCall_v=Ut("dynCall_v"),n.dynCall_ji=Ut("dynCall_ji"),n.dynCall_iiji=Ut("dynCall_iiji"),n.dynCall_iijjiii=Ut("dynCall_iijjiii"),n.dynCall_vijjjii=Ut("dynCall_vijjjii"),n.dynCall_iiiiii=Ut("dynCall_iiiiii"),n.dynCall_iiiiiiiiii=Ut("dynCall_iiiiiiiiii"),n.dynCall_viiiiii=Ut("dynCall_viiiiii"),n.dynCall_viiiiiii=Ut("dynCall_viiiiiii"),n.dynCall_iiiiiiiii=Ut("dynCall_iiiiiiiii");/**
 * @license
 * Copyright 2010 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */n.intArrayFromString=_r,Object.getOwnPropertyDescriptor(n,"intArrayToString")||(n.intArrayToString=function(){re("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ccall")||(n.ccall=function(){re("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"cwrap")||(n.cwrap=function(){re("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.setValue=R,n.getValue=L,Object.getOwnPropertyDescriptor(n,"allocate")||(n.allocate=function(){re("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getMemory")||(n.getMemory=function(){re("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"UTF8ArrayToString")||(n.UTF8ArrayToString=function(){re("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF8ToString")||(n.UTF8ToString=function(){re("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF8Array")||(n.stringToUTF8Array=function(){re("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF8")||(n.stringToUTF8=function(){re("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF8")||(n.lengthBytesUTF8=function(){re("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackTrace")||(n.stackTrace=function(){re("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPreRun")||(n.addOnPreRun=function(){re("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnInit")||(n.addOnInit=function(){re("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPreMain")||(n.addOnPreMain=function(){re("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnExit")||(n.addOnExit=function(){re("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addOnPostRun")||(n.addOnPostRun=function(){re("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeStringToMemory")||(n.writeStringToMemory=function(){re("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeArrayToMemory")||(n.writeArrayToMemory=function(){re("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeAsciiToMemory")||(n.writeAsciiToMemory=function(){re("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addRunDependency")||(n.addRunDependency=function(){re("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"removeRunDependency")||(n.removeRunDependency=function(){re("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createFolder")||(n.FS_createFolder=function(){re("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createPath")||(n.FS_createPath=function(){re("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createDataFile")||(n.FS_createDataFile=function(){re("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createPreloadedFile")||(n.FS_createPreloadedFile=function(){re("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createLazyFile")||(n.FS_createLazyFile=function(){re("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createLink")||(n.FS_createLink=function(){re("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_createDevice")||(n.FS_createDevice=function(){re("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"FS_unlink")||(n.FS_unlink=function(){re("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(n,"dynamicAlloc")||(n.dynamicAlloc=function(){re("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"loadDynamicLibrary")||(n.loadDynamicLibrary=function(){re("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"loadWebAssemblyModule")||(n.loadWebAssemblyModule=function(){re("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getLEB")||(n.getLEB=function(){re("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getFunctionTables")||(n.getFunctionTables=function(){re("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"alignFunctionTables")||(n.alignFunctionTables=function(){re("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerFunctions")||(n.registerFunctions=function(){re("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"addFunction")||(n.addFunction=function(){re("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"removeFunction")||(n.removeFunction=function(){re("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getFuncWrapper")||(n.getFuncWrapper=function(){re("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"prettyPrint")||(n.prettyPrint=function(){re("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeBigInt")||(n.makeBigInt=function(){re("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"dynCall")||(n.dynCall=function(){re("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getCompilerSetting")||(n.getCompilerSetting=function(){re("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"print")||(n.print=function(){re("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"printErr")||(n.printErr=function(){re("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getTempRet0")||(n.getTempRet0=function(){re("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setTempRet0")||(n.setTempRet0=function(){re("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"callMain")||(n.callMain=function(){re("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"abort")||(n.abort=function(){re("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToNewUTF8")||(n.stringToNewUTF8=function(){re("'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"abortOnCannotGrowMemory")||(n.abortOnCannotGrowMemory=function(){re("'abortOnCannotGrowMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscripten_realloc_buffer")||(n.emscripten_realloc_buffer=function(){re("'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ENV")||(n.ENV=function(){re("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ERRNO_CODES")||(n.ERRNO_CODES=function(){re("'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ERRNO_MESSAGES")||(n.ERRNO_MESSAGES=function(){re("'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setErrNo")||(n.setErrNo=function(){re("'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"DNS")||(n.DNS=function(){re("'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GAI_ERRNO_MESSAGES")||(n.GAI_ERRNO_MESSAGES=function(){re("'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Protocols")||(n.Protocols=function(){re("'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Sockets")||(n.Sockets=function(){re("'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UNWIND_CACHE")||(n.UNWIND_CACHE=function(){re("'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readAsmConstArgs")||(n.readAsmConstArgs=function(){re("'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jstoi_q")||(n.jstoi_q=function(){re("'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jstoi_s")||(n.jstoi_s=function(){re("'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"abortStackOverflow")||(n.abortStackOverflow=function(){re("'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"reallyNegative")||(n.reallyNegative=function(){re("'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"formatString")||(n.formatString=function(){re("'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PATH")||(n.PATH=function(){re("'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PATH_FS")||(n.PATH_FS=function(){re("'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SYSCALLS")||(n.SYSCALLS=function(){re("'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"syscallMmap2")||(n.syscallMmap2=function(){re("'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"syscallMunmap")||(n.syscallMunmap=function(){re("'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"JSEvents")||(n.JSEvents=function(){re("'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"specialHTMLTargets")||(n.specialHTMLTargets=function(){re("'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"demangle")||(n.demangle=function(){re("'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"demangleAll")||(n.demangleAll=function(){re("'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"jsStackTrace")||(n.jsStackTrace=function(){re("'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackTrace")||(n.stackTrace=function(){re("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getEnvStrings")||(n.getEnvStrings=function(){re("'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"checkWasiClock")||(n.checkWasiClock=function(){re("'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64")||(n.writeI53ToI64=function(){re("'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64Clamped")||(n.writeI53ToI64Clamped=function(){re("'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToI64Signaling")||(n.writeI53ToI64Signaling=function(){re("'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToU64Clamped")||(n.writeI53ToU64Clamped=function(){re("'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"writeI53ToU64Signaling")||(n.writeI53ToU64Signaling=function(){re("'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readI53FromI64")||(n.readI53FromI64=function(){re("'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readI53FromU64")||(n.readI53FromU64=function(){re("'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"convertI32PairToI53")||(n.convertI32PairToI53=function(){re("'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"convertU32PairToI53")||(n.convertU32PairToI53=function(){re("'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"Browser")||(n.Browser=function(){re("'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"FS")||(n.FS=function(){re("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"MEMFS")||(n.MEMFS=function(){re("'MEMFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"TTY")||(n.TTY=function(){re("'TTY' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PIPEFS")||(n.PIPEFS=function(){re("'PIPEFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SOCKFS")||(n.SOCKFS=function(){re("'SOCKFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GL")||(n.GL=function(){re("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGet")||(n.emscriptenWebGLGet=function(){re("'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetTexPixelData")||(n.emscriptenWebGLGetTexPixelData=function(){re("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetUniform")||(n.emscriptenWebGLGetUniform=function(){re("'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emscriptenWebGLGetVertexAttrib")||(n.emscriptenWebGLGetVertexAttrib=function(){re("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"AL")||(n.AL=function(){re("'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_unicode")||(n.SDL_unicode=function(){re("'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_ttfContext")||(n.SDL_ttfContext=function(){re("'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_audio")||(n.SDL_audio=function(){re("'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL")||(n.SDL=function(){re("'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"SDL_gfx")||(n.SDL_gfx=function(){re("'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLUT")||(n.GLUT=function(){re("'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"EGL")||(n.EGL=function(){re("'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLFW_Window")||(n.GLFW_Window=function(){re("'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLFW")||(n.GLFW=function(){re("'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"GLEW")||(n.GLEW=function(){re("'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"IDBStore")||(n.IDBStore=function(){re("'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runAndAbortIfError")||(n.runAndAbortIfError=function(){re("'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_handle_array")||(n.emval_handle_array=function(){re("'emval_handle_array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_free_list")||(n.emval_free_list=function(){re("'emval_free_list' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_symbols")||(n.emval_symbols=function(){re("'emval_symbols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_emval")||(n.init_emval=function(){re("'init_emval' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"count_emval_handles")||(n.count_emval_handles=function(){re("'count_emval_handles' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"get_first_emval")||(n.get_first_emval=function(){re("'get_first_emval' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getStringOrSymbol")||(n.getStringOrSymbol=function(){re("'getStringOrSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"requireHandle")||(n.requireHandle=function(){re("'requireHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_newers")||(n.emval_newers=function(){re("'emval_newers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"craftEmvalAllocator")||(n.craftEmvalAllocator=function(){re("'craftEmvalAllocator' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_get_global")||(n.emval_get_global=function(){re("'emval_get_global' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"emval_methodCallers")||(n.emval_methodCallers=function(){re("'emval_methodCallers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"InternalError")||(n.InternalError=function(){re("'InternalError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"BindingError")||(n.BindingError=function(){re("'BindingError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UnboundTypeError")||(n.UnboundTypeError=function(){re("'UnboundTypeError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"PureVirtualError")||(n.PureVirtualError=function(){re("'PureVirtualError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_embind")||(n.init_embind=function(){re("'init_embind' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwInternalError")||(n.throwInternalError=function(){re("'throwInternalError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwBindingError")||(n.throwBindingError=function(){re("'throwBindingError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwUnboundTypeError")||(n.throwUnboundTypeError=function(){re("'throwUnboundTypeError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ensureOverloadTable")||(n.ensureOverloadTable=function(){re("'ensureOverloadTable' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"exposePublicSymbol")||(n.exposePublicSymbol=function(){re("'exposePublicSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"replacePublicSymbol")||(n.replacePublicSymbol=function(){re("'replacePublicSymbol' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"extendError")||(n.extendError=function(){re("'extendError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"createNamedFunction")||(n.createNamedFunction=function(){re("'createNamedFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredInstances")||(n.registeredInstances=function(){re("'registeredInstances' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getBasestPointer")||(n.getBasestPointer=function(){re("'getBasestPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerInheritedInstance")||(n.registerInheritedInstance=function(){re("'registerInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"unregisterInheritedInstance")||(n.unregisterInheritedInstance=function(){re("'unregisterInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getInheritedInstance")||(n.getInheritedInstance=function(){re("'getInheritedInstance' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getInheritedInstanceCount")||(n.getInheritedInstanceCount=function(){re("'getInheritedInstanceCount' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getLiveInheritedInstances")||(n.getLiveInheritedInstances=function(){re("'getLiveInheritedInstances' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredTypes")||(n.registeredTypes=function(){re("'registeredTypes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"awaitingDependencies")||(n.awaitingDependencies=function(){re("'awaitingDependencies' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"typeDependencies")||(n.typeDependencies=function(){re("'typeDependencies' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registeredPointers")||(n.registeredPointers=function(){re("'registeredPointers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"registerType")||(n.registerType=function(){re("'registerType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"whenDependentTypesAreResolved")||(n.whenDependentTypesAreResolved=function(){re("'whenDependentTypesAreResolved' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind_charCodes")||(n.embind_charCodes=function(){re("'embind_charCodes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind_init_charCodes")||(n.embind_init_charCodes=function(){re("'embind_init_charCodes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"readLatin1String")||(n.readLatin1String=function(){re("'readLatin1String' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getTypeName")||(n.getTypeName=function(){re("'getTypeName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"heap32VectorToArray")||(n.heap32VectorToArray=function(){re("'heap32VectorToArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"requireRegisteredType")||(n.requireRegisteredType=function(){re("'requireRegisteredType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"getShiftFromSize")||(n.getShiftFromSize=function(){re("'getShiftFromSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"integerReadValueFromPointer")||(n.integerReadValueFromPointer=function(){re("'integerReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"enumReadValueFromPointer")||(n.enumReadValueFromPointer=function(){re("'enumReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"floatReadValueFromPointer")||(n.floatReadValueFromPointer=function(){re("'floatReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"simpleReadValueFromPointer")||(n.simpleReadValueFromPointer=function(){re("'simpleReadValueFromPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runDestructors")||(n.runDestructors=function(){re("'runDestructors' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"new_")||(n.new_=function(){re("'new_' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"craftInvokerFunction")||(n.craftInvokerFunction=function(){re("'craftInvokerFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"embind__requireFunction")||(n.embind__requireFunction=function(){re("'embind__requireFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"tupleRegistrations")||(n.tupleRegistrations=function(){re("'tupleRegistrations' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"structRegistrations")||(n.structRegistrations=function(){re("'structRegistrations' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"genericPointerToWireType")||(n.genericPointerToWireType=function(){re("'genericPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"constNoSmartPtrRawPointerToWireType")||(n.constNoSmartPtrRawPointerToWireType=function(){re("'constNoSmartPtrRawPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"nonConstNoSmartPtrRawPointerToWireType")||(n.nonConstNoSmartPtrRawPointerToWireType=function(){re("'nonConstNoSmartPtrRawPointerToWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_RegisteredPointer")||(n.init_RegisteredPointer=function(){re("'init_RegisteredPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer")||(n.RegisteredPointer=function(){re("'RegisteredPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_getPointee")||(n.RegisteredPointer_getPointee=function(){re("'RegisteredPointer_getPointee' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_destructor")||(n.RegisteredPointer_destructor=function(){re("'RegisteredPointer_destructor' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_deleteObject")||(n.RegisteredPointer_deleteObject=function(){re("'RegisteredPointer_deleteObject' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredPointer_fromWireType")||(n.RegisteredPointer_fromWireType=function(){re("'RegisteredPointer_fromWireType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"runDestructor")||(n.runDestructor=function(){re("'runDestructor' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"releaseClassHandle")||(n.releaseClassHandle=function(){re("'releaseClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"finalizationGroup")||(n.finalizationGroup=function(){re("'finalizationGroup' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"detachFinalizer_deps")||(n.detachFinalizer_deps=function(){re("'detachFinalizer_deps' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"detachFinalizer")||(n.detachFinalizer=function(){re("'detachFinalizer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"attachFinalizer")||(n.attachFinalizer=function(){re("'attachFinalizer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeClassHandle")||(n.makeClassHandle=function(){re("'makeClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"init_ClassHandle")||(n.init_ClassHandle=function(){re("'init_ClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle")||(n.ClassHandle=function(){re("'ClassHandle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_isAliasOf")||(n.ClassHandle_isAliasOf=function(){re("'ClassHandle_isAliasOf' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"throwInstanceAlreadyDeleted")||(n.throwInstanceAlreadyDeleted=function(){re("'throwInstanceAlreadyDeleted' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_clone")||(n.ClassHandle_clone=function(){re("'ClassHandle_clone' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_delete")||(n.ClassHandle_delete=function(){re("'ClassHandle_delete' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"deletionQueue")||(n.deletionQueue=function(){re("'deletionQueue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_isDeleted")||(n.ClassHandle_isDeleted=function(){re("'ClassHandle_isDeleted' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"ClassHandle_deleteLater")||(n.ClassHandle_deleteLater=function(){re("'ClassHandle_deleteLater' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"flushPendingDeletes")||(n.flushPendingDeletes=function(){re("'flushPendingDeletes' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"delayFunction")||(n.delayFunction=function(){re("'delayFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"setDelayFunction")||(n.setDelayFunction=function(){re("'setDelayFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"RegisteredClass")||(n.RegisteredClass=function(){re("'RegisteredClass' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"shallowCopyInternalPointer")||(n.shallowCopyInternalPointer=function(){re("'shallowCopyInternalPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"downcastPointer")||(n.downcastPointer=function(){re("'downcastPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"upcastPointer")||(n.upcastPointer=function(){re("'upcastPointer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"validateThis")||(n.validateThis=function(){re("'validateThis' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"char_0")||(n.char_0=function(){re("'char_0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"char_9")||(n.char_9=function(){re("'char_9' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"makeLegalFunctionName")||(n.makeLegalFunctionName=function(){re("'makeLegalFunctionName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"warnOnce")||(n.warnOnce=function(){re("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackSave")||(n.stackSave=function(){re("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackRestore")||(n.stackRestore=function(){re("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stackAlloc")||(n.stackAlloc=function(){re("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"AsciiToString")||(n.AsciiToString=function(){re("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToAscii")||(n.stringToAscii=function(){re("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF16ToString")||(n.UTF16ToString=function(){re("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF16")||(n.stringToUTF16=function(){re("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF16")||(n.lengthBytesUTF16=function(){re("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"UTF32ToString")||(n.UTF32ToString=function(){re("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"stringToUTF32")||(n.stringToUTF32=function(){re("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(n,"lengthBytesUTF32")||(n.lengthBytesUTF32=function(){re("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.allocateUTF8=Se,Object.getOwnPropertyDescriptor(n,"allocateUTF8OnStack")||(n.allocateUTF8OnStack=function(){re("'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),n.writeStackCookie=Ke,n.checkStackCookie=tt,Object.getOwnPropertyDescriptor(n,"ALLOC_NORMAL")||Object.defineProperty(n,"ALLOC_NORMAL",{configurable:!0,get:function(){re("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(n,"ALLOC_STACK")||Object.defineProperty(n,"ALLOC_STACK",{configurable:!0,get:function(){re("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(n,"ALLOC_DYNAMIC")||Object.defineProperty(n,"ALLOC_DYNAMIC",{configurable:!0,get:function(){re("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(n,"ALLOC_NONE")||Object.defineProperty(n,"ALLOC_NONE",{configurable:!0,get:function(){re("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}});var qo;function r_(p){this.name="ExitStatus",this.message="Program terminated with exit("+p+")",this.status=p}Zn=function p(){qo||ns(),qo||(Zn=p)};function ns(p){if(Mr>0||(Ke(),gt(),Mr>0))return;function y(){qo||(qo=!0,n.calledRun=!0,!ue&&(mt(),Et(),o(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),ae(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),Ht()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),y()},1)):y(),tt()}if(n.run=ns,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return ns(),n.ready}}();r.exports=t})(_N);const f5=_N.exports,_5=""+new URL("icu-binding.a29db31a.wasm",import.meta.url).href;var pN=(r=>(r[r.U_USING_FALLBACK_WARNING=-128]="U_USING_FALLBACK_WARNING",r[r.U_ERROR_WARNING_START=-128]="U_ERROR_WARNING_START",r[r.U_USING_DEFAULT_WARNING=-127]="U_USING_DEFAULT_WARNING",r[r.U_SAFECLONE_ALLOCATED_WARNING=-126]="U_SAFECLONE_ALLOCATED_WARNING",r[r.U_STATE_OLD_WARNING=-125]="U_STATE_OLD_WARNING",r[r.U_STRING_NOT_TERMINATED_WARNING=-124]="U_STRING_NOT_TERMINATED_WARNING",r[r.U_SORT_KEY_TOO_SHORT_WARNING=-123]="U_SORT_KEY_TOO_SHORT_WARNING",r[r.U_AMBIGUOUS_ALIAS_WARNING=-122]="U_AMBIGUOUS_ALIAS_WARNING",r[r.U_DIFFERENT_UCA_VERSION=-121]="U_DIFFERENT_UCA_VERSION",r[r.U_PLUGIN_CHANGED_LEVEL_WARNING=-120]="U_PLUGIN_CHANGED_LEVEL_WARNING",r[r.U_ZERO_ERROR=0]="U_ZERO_ERROR",r[r.U_ILLEGAL_ARGUMENT_ERROR=1]="U_ILLEGAL_ARGUMENT_ERROR",r[r.U_MISSING_RESOURCE_ERROR=2]="U_MISSING_RESOURCE_ERROR",r[r.U_INVALID_FORMAT_ERROR=3]="U_INVALID_FORMAT_ERROR",r[r.U_FILE_ACCESS_ERROR=4]="U_FILE_ACCESS_ERROR",r[r.U_INTERNAL_PROGRAM_ERROR=5]="U_INTERNAL_PROGRAM_ERROR",r[r.U_MESSAGE_PARSE_ERROR=6]="U_MESSAGE_PARSE_ERROR",r[r.U_MEMORY_ALLOCATION_ERROR=7]="U_MEMORY_ALLOCATION_ERROR",r[r.U_INDEX_OUTOFBOUNDS_ERROR=8]="U_INDEX_OUTOFBOUNDS_ERROR",r[r.U_PARSE_ERROR=9]="U_PARSE_ERROR",r[r.U_INVALID_CHAR_FOUND=10]="U_INVALID_CHAR_FOUND",r[r.U_TRUNCATED_CHAR_FOUND=11]="U_TRUNCATED_CHAR_FOUND",r[r.U_ILLEGAL_CHAR_FOUND=12]="U_ILLEGAL_CHAR_FOUND",r[r.U_INVALID_TABLE_FORMAT=13]="U_INVALID_TABLE_FORMAT",r[r.U_INVALID_TABLE_FILE=14]="U_INVALID_TABLE_FILE",r[r.U_BUFFER_OVERFLOW_ERROR=15]="U_BUFFER_OVERFLOW_ERROR",r[r.U_UNSUPPORTED_ERROR=16]="U_UNSUPPORTED_ERROR",r[r.U_RESOURCE_TYPE_MISMATCH=17]="U_RESOURCE_TYPE_MISMATCH",r[r.U_ILLEGAL_ESCAPE_SEQUENCE=18]="U_ILLEGAL_ESCAPE_SEQUENCE",r[r.U_UNSUPPORTED_ESCAPE_SEQUENCE=19]="U_UNSUPPORTED_ESCAPE_SEQUENCE",r[r.U_NO_SPACE_AVAILABLE=20]="U_NO_SPACE_AVAILABLE",r[r.U_CE_NOT_FOUND_ERROR=21]="U_CE_NOT_FOUND_ERROR",r[r.U_PRIMARY_TOO_LONG_ERROR=22]="U_PRIMARY_TOO_LONG_ERROR",r[r.U_STATE_TOO_OLD_ERROR=23]="U_STATE_TOO_OLD_ERROR",r[r.U_TOO_MANY_ALIASES_ERROR=24]="U_TOO_MANY_ALIASES_ERROR",r[r.U_ENUM_OUT_OF_SYNC_ERROR=25]="U_ENUM_OUT_OF_SYNC_ERROR",r[r.U_INVARIANT_CONVERSION_ERROR=26]="U_INVARIANT_CONVERSION_ERROR",r[r.U_INVALID_STATE_ERROR=27]="U_INVALID_STATE_ERROR",r[r.U_COLLATOR_VERSION_MISMATCH=28]="U_COLLATOR_VERSION_MISMATCH",r[r.U_USELESS_COLLATOR_ERROR=29]="U_USELESS_COLLATOR_ERROR",r[r.U_NO_WRITE_PERMISSION=30]="U_NO_WRITE_PERMISSION",r[r.U_INPUT_TOO_LONG_ERROR=31]="U_INPUT_TOO_LONG_ERROR",r[r.U_BAD_VARIABLE_DEFINITION=65536]="U_BAD_VARIABLE_DEFINITION",r[r.U_PARSE_ERROR_START=65536]="U_PARSE_ERROR_START",r[r.U_MALFORMED_RULE=65537]="U_MALFORMED_RULE",r[r.U_MALFORMED_SET=65538]="U_MALFORMED_SET",r[r.U_MALFORMED_SYMBOL_REFERENCE=65539]="U_MALFORMED_SYMBOL_REFERENCE",r[r.U_MALFORMED_UNICODE_ESCAPE=65540]="U_MALFORMED_UNICODE_ESCAPE",r[r.U_MALFORMED_VARIABLE_DEFINITION=65541]="U_MALFORMED_VARIABLE_DEFINITION",r[r.U_MALFORMED_VARIABLE_REFERENCE=65542]="U_MALFORMED_VARIABLE_REFERENCE",r[r.U_MISMATCHED_SEGMENT_DELIMITERS=65543]="U_MISMATCHED_SEGMENT_DELIMITERS",r[r.U_MISPLACED_ANCHOR_START=65544]="U_MISPLACED_ANCHOR_START",r[r.U_MISPLACED_CURSOR_OFFSET=65545]="U_MISPLACED_CURSOR_OFFSET",r[r.U_MISPLACED_QUANTIFIER=65546]="U_MISPLACED_QUANTIFIER",r[r.U_MISSING_OPERATOR=65547]="U_MISSING_OPERATOR",r[r.U_MISSING_SEGMENT_CLOSE=65548]="U_MISSING_SEGMENT_CLOSE",r[r.U_MULTIPLE_ANTE_CONTEXTS=65549]="U_MULTIPLE_ANTE_CONTEXTS",r[r.U_MULTIPLE_CURSORS=65550]="U_MULTIPLE_CURSORS",r[r.U_MULTIPLE_POST_CONTEXTS=65551]="U_MULTIPLE_POST_CONTEXTS",r[r.U_TRAILING_BACKSLASH=65552]="U_TRAILING_BACKSLASH",r[r.U_UNDEFINED_SEGMENT_REFERENCE=65553]="U_UNDEFINED_SEGMENT_REFERENCE",r[r.U_UNDEFINED_VARIABLE=65554]="U_UNDEFINED_VARIABLE",r[r.U_UNQUOTED_SPECIAL=65555]="U_UNQUOTED_SPECIAL",r[r.U_UNTERMINATED_QUOTE=65556]="U_UNTERMINATED_QUOTE",r[r.U_RULE_MASK_ERROR=65557]="U_RULE_MASK_ERROR",r[r.U_MISPLACED_COMPOUND_FILTER=65558]="U_MISPLACED_COMPOUND_FILTER",r[r.U_MULTIPLE_COMPOUND_FILTERS=65559]="U_MULTIPLE_COMPOUND_FILTERS",r[r.U_INVALID_RBT_SYNTAX=65560]="U_INVALID_RBT_SYNTAX",r[r.U_INVALID_PROPERTY_PATTERN=65561]="U_INVALID_PROPERTY_PATTERN",r[r.U_MALFORMED_PRAGMA=65562]="U_MALFORMED_PRAGMA",r[r.U_UNCLOSED_SEGMENT=65563]="U_UNCLOSED_SEGMENT",r[r.U_ILLEGAL_CHAR_IN_SEGMENT=65564]="U_ILLEGAL_CHAR_IN_SEGMENT",r[r.U_VARIABLE_RANGE_EXHAUSTED=65565]="U_VARIABLE_RANGE_EXHAUSTED",r[r.U_VARIABLE_RANGE_OVERLAP=65566]="U_VARIABLE_RANGE_OVERLAP",r[r.U_ILLEGAL_CHARACTER=65567]="U_ILLEGAL_CHARACTER",r[r.U_INTERNAL_TRANSLITERATOR_ERROR=65568]="U_INTERNAL_TRANSLITERATOR_ERROR",r[r.U_INVALID_ID=65569]="U_INVALID_ID",r[r.U_INVALID_FUNCTION=65570]="U_INVALID_FUNCTION",r[r.U_UNEXPECTED_TOKEN=65792]="U_UNEXPECTED_TOKEN",r[r.U_FMT_PARSE_ERROR_START=65792]="U_FMT_PARSE_ERROR_START",r[r.U_MULTIPLE_DECIMAL_SEPARATORS=65793]="U_MULTIPLE_DECIMAL_SEPARATORS",r[r.U_MULTIPLE_DECIMAL_SEPERATORS=65793]="U_MULTIPLE_DECIMAL_SEPERATORS",r[r.U_MULTIPLE_EXPONENTIAL_SYMBOLS=65794]="U_MULTIPLE_EXPONENTIAL_SYMBOLS",r[r.U_MALFORMED_EXPONENTIAL_PATTERN=65795]="U_MALFORMED_EXPONENTIAL_PATTERN",r[r.U_MULTIPLE_PERCENT_SYMBOLS=65796]="U_MULTIPLE_PERCENT_SYMBOLS",r[r.U_MULTIPLE_PERMILL_SYMBOLS=65797]="U_MULTIPLE_PERMILL_SYMBOLS",r[r.U_MULTIPLE_PAD_SPECIFIERS=65798]="U_MULTIPLE_PAD_SPECIFIERS",r[r.U_PATTERN_SYNTAX_ERROR=65799]="U_PATTERN_SYNTAX_ERROR",r[r.U_ILLEGAL_PAD_POSITION=65800]="U_ILLEGAL_PAD_POSITION",r[r.U_UNMATCHED_BRACES=65801]="U_UNMATCHED_BRACES",r[r.U_UNSUPPORTED_PROPERTY=65802]="U_UNSUPPORTED_PROPERTY",r[r.U_UNSUPPORTED_ATTRIBUTE=65803]="U_UNSUPPORTED_ATTRIBUTE",r[r.U_ARGUMENT_TYPE_MISMATCH=65804]="U_ARGUMENT_TYPE_MISMATCH",r[r.U_DUPLICATE_KEYWORD=65805]="U_DUPLICATE_KEYWORD",r[r.U_UNDEFINED_KEYWORD=65806]="U_UNDEFINED_KEYWORD",r[r.U_DEFAULT_KEYWORD_MISSING=65807]="U_DEFAULT_KEYWORD_MISSING",r[r.U_DECIMAL_NUMBER_SYNTAX_ERROR=65808]="U_DECIMAL_NUMBER_SYNTAX_ERROR",r[r.U_FORMAT_INEXACT_ERROR=65809]="U_FORMAT_INEXACT_ERROR",r[r.U_NUMBER_ARG_OUTOFBOUNDS_ERROR=65810]="U_NUMBER_ARG_OUTOFBOUNDS_ERROR",r[r.U_NUMBER_SKELETON_SYNTAX_ERROR=65811]="U_NUMBER_SKELETON_SYNTAX_ERROR",r[r.U_BRK_INTERNAL_ERROR=66048]="U_BRK_INTERNAL_ERROR",r[r.U_BRK_ERROR_START=66048]="U_BRK_ERROR_START",r[r.U_BRK_HEX_DIGITS_EXPECTED=66049]="U_BRK_HEX_DIGITS_EXPECTED",r[r.U_BRK_SEMICOLON_EXPECTED=66050]="U_BRK_SEMICOLON_EXPECTED",r[r.U_BRK_RULE_SYNTAX=66051]="U_BRK_RULE_SYNTAX",r[r.U_BRK_UNCLOSED_SET=66052]="U_BRK_UNCLOSED_SET",r[r.U_BRK_ASSIGN_ERROR=66053]="U_BRK_ASSIGN_ERROR",r[r.U_BRK_VARIABLE_REDFINITION=66054]="U_BRK_VARIABLE_REDFINITION",r[r.U_BRK_MISMATCHED_PAREN=66055]="U_BRK_MISMATCHED_PAREN",r[r.U_BRK_NEW_LINE_IN_QUOTED_STRING=66056]="U_BRK_NEW_LINE_IN_QUOTED_STRING",r[r.U_BRK_UNDEFINED_VARIABLE=66057]="U_BRK_UNDEFINED_VARIABLE",r[r.U_BRK_INIT_ERROR=66058]="U_BRK_INIT_ERROR",r[r.U_BRK_RULE_EMPTY_SET=66059]="U_BRK_RULE_EMPTY_SET",r[r.U_BRK_UNRECOGNIZED_OPTION=66060]="U_BRK_UNRECOGNIZED_OPTION",r[r.U_BRK_MALFORMED_RULE_TAG=66061]="U_BRK_MALFORMED_RULE_TAG",r[r.U_REGEX_INTERNAL_ERROR=66304]="U_REGEX_INTERNAL_ERROR",r[r.U_REGEX_ERROR_START=66304]="U_REGEX_ERROR_START",r[r.U_REGEX_RULE_SYNTAX=66305]="U_REGEX_RULE_SYNTAX",r[r.U_REGEX_INVALID_STATE=66306]="U_REGEX_INVALID_STATE",r[r.U_REGEX_BAD_ESCAPE_SEQUENCE=66307]="U_REGEX_BAD_ESCAPE_SEQUENCE",r[r.U_REGEX_PROPERTY_SYNTAX=66308]="U_REGEX_PROPERTY_SYNTAX",r[r.U_REGEX_UNIMPLEMENTED=66309]="U_REGEX_UNIMPLEMENTED",r[r.U_REGEX_MISMATCHED_PAREN=66310]="U_REGEX_MISMATCHED_PAREN",r[r.U_REGEX_NUMBER_TOO_BIG=66311]="U_REGEX_NUMBER_TOO_BIG",r[r.U_REGEX_BAD_INTERVAL=66312]="U_REGEX_BAD_INTERVAL",r[r.U_REGEX_MAX_LT_MIN=66313]="U_REGEX_MAX_LT_MIN",r[r.U_REGEX_INVALID_BACK_REF=66314]="U_REGEX_INVALID_BACK_REF",r[r.U_REGEX_INVALID_FLAG=66315]="U_REGEX_INVALID_FLAG",r[r.U_REGEX_LOOK_BEHIND_LIMIT=66316]="U_REGEX_LOOK_BEHIND_LIMIT",r[r.U_REGEX_SET_CONTAINS_STRING=66317]="U_REGEX_SET_CONTAINS_STRING",r[r.U_REGEX_MISSING_CLOSE_BRACKET=66319]="U_REGEX_MISSING_CLOSE_BRACKET",r[r.U_REGEX_INVALID_RANGE=66320]="U_REGEX_INVALID_RANGE",r[r.U_REGEX_STACK_OVERFLOW=66321]="U_REGEX_STACK_OVERFLOW",r[r.U_REGEX_TIME_OUT=66322]="U_REGEX_TIME_OUT",r[r.U_REGEX_STOPPED_BY_CALLER=66323]="U_REGEX_STOPPED_BY_CALLER",r[r.U_REGEX_PATTERN_TOO_BIG=66324]="U_REGEX_PATTERN_TOO_BIG",r[r.U_REGEX_INVALID_CAPTURE_GROUP_NAME=66325]="U_REGEX_INVALID_CAPTURE_GROUP_NAME",r[r.U_IDNA_PROHIBITED_ERROR=66560]="U_IDNA_PROHIBITED_ERROR",r[r.U_IDNA_ERROR_START=66560]="U_IDNA_ERROR_START",r[r.U_IDNA_UNASSIGNED_ERROR=66561]="U_IDNA_UNASSIGNED_ERROR",r[r.U_IDNA_CHECK_BIDI_ERROR=66562]="U_IDNA_CHECK_BIDI_ERROR",r[r.U_IDNA_STD3_ASCII_RULES_ERROR=66563]="U_IDNA_STD3_ASCII_RULES_ERROR",r[r.U_IDNA_ACE_PREFIX_ERROR=66564]="U_IDNA_ACE_PREFIX_ERROR",r[r.U_IDNA_VERIFICATION_ERROR=66565]="U_IDNA_VERIFICATION_ERROR",r[r.U_IDNA_LABEL_TOO_LONG_ERROR=66566]="U_IDNA_LABEL_TOO_LONG_ERROR",r[r.U_IDNA_ZERO_LENGTH_LABEL_ERROR=66567]="U_IDNA_ZERO_LENGTH_LABEL_ERROR",r[r.U_IDNA_DOMAIN_NAME_TOO_LONG_ERROR=66568]="U_IDNA_DOMAIN_NAME_TOO_LONG_ERROR",r[r.U_STRINGPREP_PROHIBITED_ERROR=66560]="U_STRINGPREP_PROHIBITED_ERROR",r[r.U_STRINGPREP_UNASSIGNED_ERROR=66561]="U_STRINGPREP_UNASSIGNED_ERROR",r[r.U_STRINGPREP_CHECK_BIDI_ERROR=66562]="U_STRINGPREP_CHECK_BIDI_ERROR",r[r.U_PLUGIN_ERROR_START=66816]="U_PLUGIN_ERROR_START",r[r.U_PLUGIN_TOO_HIGH=66816]="U_PLUGIN_TOO_HIGH",r[r.U_PLUGIN_DIDNT_SET_LEVEL=66817]="U_PLUGIN_DIDNT_SET_LEVEL",r))(pN||{});const MP=-1;let gN,ew,ny,ob,mN,xN,yN,vN,EN,c1,tw,rw,iw;async function p5(){let e=await(await f5({async instantiateWasm(t,i){const s=await WebAssembly.instantiateStreaming(fetch(_5,{credentials:"same-origin"}),t);return i(s.instance)}})).ready;return gN=e.Locale,ew=e.BreakIterator,ny=e.UnicodeString,ob=e.StringPiece,e.init_icu,mN=e.ubidi_openSized,xN=e.ubidi_close,yN=e.ubidi_setPara,vN=e.ubidi_countRuns,EN=e.ubidi_getLogicalRun,c1=(t,i=!1)=>{const s=e.intArrayFromString(t,i),n=e.allocateUTF8(t);return{object:{ptr:n,view:s},dispose(){e._free(n)}}},tw=e._free,rw=e._malloc,iw=e.getValue,e}function g5(r){return r>pN.U_ZERO_ERROR}var SN={exports:{}};(function(r,e){var t=function(){var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(s){s=s||{};var n;n||(n=typeof s<"u"?s:{});var o,a;n.ready=new Promise(function(h,m){o=h,a=m}),function(h){h.Ud=h.Ud||[],h.Ud.push(function(){h.MakeSWCanvasSurface=function(m){var v=m;if(v.tagName!=="CANVAS"&&(v=document.getElementById(m),!v))throw"Canvas with id "+m+" was not found";return(m=h.MakeSurface(v.width,v.height))&&(m.Ld=v),m},h.MakeCanvasSurface||(h.MakeCanvasSurface=h.MakeSWCanvasSurface),h.MakeSurface=function(m,v){var k={width:m,height:v,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB},G=m*v*4,Y=h._malloc(G);return(k=h.Surface._makeRasterDirect(k,Y,4*m))&&(k.Ld=null,k.zf=m,k.wf=v,k.yf=G,k.$e=Y,k.getCanvas().clear(h.TRANSPARENT)),k},h.MakeRasterDirectSurface=function(m,v,k){return h.Surface._makeRasterDirect(m,v.byteOffset,k)},h.Surface.prototype.flush=function(m){if(h.Nd(this.Md),this._flush(),this.Ld){var v=new Uint8ClampedArray(h.HEAPU8.buffer,this.$e,this.yf);v=new ImageData(v,this.zf,this.wf),m?this.Ld.getContext("2d").putImageData(v,0,0,m[0],m[1],m[2]-m[0],m[3]-m[1]):this.Ld.getContext("2d").putImageData(v,0,0)}},h.Surface.prototype.dispose=function(){this.$e&&h._free(this.$e),this.delete()},h.Nd=h.Nd||function(){}})}(n),function(h){h.Ud=h.Ud||[],h.Ud.push(function(){function m(v,k,G){return v&&v.hasOwnProperty(k)?v[k]:G}h.GetWebGLContext=function(v,k){if(!v)throw"null canvas passed into makeWebGLContext";var G={alpha:m(k,"alpha",1),depth:m(k,"depth",1),stencil:m(k,"stencil",8),antialias:m(k,"antialias",0),premultipliedAlpha:m(k,"premultipliedAlpha",1),preserveDrawingBuffer:m(k,"preserveDrawingBuffer",0),preferLowPowerToHighPerformance:m(k,"preferLowPowerToHighPerformance",0),failIfMajorPerformanceCaveat:m(k,"failIfMajorPerformanceCaveat",0),enableExtensionsByDefault:m(k,"enableExtensionsByDefault",1),explicitSwapControl:m(k,"explicitSwapControl",0),renderViaOffscreenBackBuffer:m(k,"renderViaOffscreenBackBuffer",0)};if(G.majorVersion=k&&k.majorVersion?k.majorVersion:typeof WebGL2RenderingContext<"u"?2:1,G.explicitSwapControl)throw"explicitSwapControl is not supported";return v=Wv(v,G),v?(qf(v),v):0},h.deleteContext=function(v){nr===dn[v]&&(nr=null),typeof JSEvents=="object"&&JSEvents.Eg(dn[v].le.canvas),dn[v]&&dn[v].le.canvas&&(dn[v].le.canvas.uf=void 0),dn[v]=null},h._setTextureCleanup({deleteTexture:function(v,k){var G=ts[k];G&&dn[v].le.deleteTexture(G),ts[k]=null}}),h.MakeGrContext=function(v){if(!this.Nd(v))return null;var k=this._MakeGrContext();return k?(k.Md=v,k):null},h.MakeOnScreenGLSurface=function(v,k,G,Y){return k=this._MakeOnScreenGLSurface(v,k,G,Y),k?(k.Md=v.Md,k):null},h.MakeRenderTarget=function(v,k,G){return k=this._MakeRenderTargetWH(v,k,G),k?(k.Md=v.Md,k):null},h.MakeRenderTarget=function(v,k){return k=this._MakeRenderTargetII(v,k),k?(k.Md=v.Md,k):null},h.MakeWebGLCanvasSurface=function(v,k,G){k=k||null;var Y=v,ve=typeof OffscreenCanvas<"u"&&Y instanceof OffscreenCanvas;if(!(typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||ve||(Y=document.getElementById(v),Y)))throw"Canvas with id "+v+" was not found";if(v=this.GetWebGLContext(Y,G),!v||0>v)throw"failed to create webgl context: err "+v;return v=this.MakeGrContext(v),k=this.MakeOnScreenGLSurface(v,Y.width,Y.height,k),k||(k=Y.cloneNode(!0),Y.parentNode.replaceChild(k,Y),k.classList.add("ck-replaced"),h.MakeSWCanvasSurface(k))},h.MakeCanvasSurface=h.MakeWebGLCanvasSurface,h.Surface.prototype.makeImageFromTexture=function(v,k){k.colorSpace||(k.colorSpace=h.ColorSpace.SRGB);var G=ts.length;return G||(ts.push(null),G=1),ts.push(v),this._makeImageFromTexture(nr.Rf,G,k)},h.Surface.prototype.makeImageFromTextureSource=function(v,k,G){G=G||v.naturalHeight||v.videoHeight||v.height,k=k||v.naturalWidth||v.videoWidth||v.width,h.Nd(this.Md);var Y=nr.le,ve=Y.createTexture();return Y.bindTexture(Y.TEXTURE_2D,ve),nr.version===2?Y.texImage2D(Y.TEXTURE_2D,0,Y.RGBA,k,G,0,Y.RGBA,Y.UNSIGNED_BYTE,v):Y.texImage2D(Y.TEXTURE_2D,0,Y.RGBA,Y.RGBA,Y.UNSIGNED_BYTE,v),Y.bindTexture(Y.TEXTURE_2D,null),this.makeImageFromTexture(ve,{height:G,width:k,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB})},h.Nd=function(v){return v?qf(v):!1}})}(n),function(h){function m(A,S,B,q,ge){for(var Oe=0;Oe<A.length;Oe++)S[Oe*B+(Oe*ge+q+B)%B]=A[Oe];return S}function v(A){for(var S=A*A,B=Array(S);S--;)B[S]=S%(A+1)===0?1:0;return B}function k(A){return A?A.constructor===Float32Array&&A.length===4:!1}function G(A){return(be(255*A[3])<<24|be(255*A[0])<<16|be(255*A[1])<<8|be(255*A[2])<<0)>>>0}function Y(A){if(A&&A._ck)return A;if(A instanceof Float32Array){for(var S=Math.floor(A.length/4),B=new Uint32Array(S),q=0;q<S;q++)B[q]=G(A.slice(4*q,4*(q+1)));return B}if(A instanceof Uint32Array)return A;if(A instanceof Array&&A[0]instanceof Float32Array)return A.map(G)}function ve(A){if(A===void 0)return 1;var S=parseFloat(A);return A&&A.indexOf("%")!==-1?S/100:S}function be(A){return Math.round(Math.max(0,Math.min(A||0,255)))}function Me(A,S){S&&S._ck||h._free(A)}function Ne(A,S,B){if(!A||!A.length)return pt;if(A&&A._ck)return A.byteOffset;var q=h[S].BYTES_PER_ELEMENT;return B||(B=h._malloc(A.length*q)),h[S].set(A,B/q),B}function ct(A){var S={be:pt,count:A.length,Je:h.ColorType.RGBA_F32};if(A instanceof Float32Array)S.be=Ne(A,"HEAPF32"),S.count=A.length/4;else if(A instanceof Uint32Array)S.be=Ne(A,"HEAPU32"),S.Je=h.ColorType.RGBA_8888;else if(A instanceof Array){if(A&&A.length){for(var B=h._malloc(16*A.length),q=0,ge=B/4,Oe=0;Oe<A.length;Oe++)for(var Je=0;4>Je;Je++)h.HEAPF32[ge+q]=A[Oe][Je],q++;A=B}else A=pt;S.be=A}else throw"Invalid argument to copyFlexibleColorArray, Not a color array "+typeof A;return S}function kt(A){if(!A)return pt;if(A.length){if(A.length===6||A.length===9)return Ne(A,"HEAPF32",Fi),A.length===6&&h.HEAPF32.set(At,6+Fi/4),Fi;if(A.length===16){var S=$h.toTypedArray();return S[0]=A[0],S[1]=A[1],S[2]=A[3],S[3]=A[4],S[4]=A[5],S[5]=A[7],S[6]=A[12],S[7]=A[13],S[8]=A[15],Fi}throw"invalid matrix size"}return S=$h.toTypedArray(),S[0]=A.m11,S[1]=A.m21,S[2]=A.m41,S[3]=A.m12,S[4]=A.m22,S[5]=A.m42,S[6]=A.m14,S[7]=A.m24,S[8]=A.m44,Fi}function Nt(A){if(!A)return pt;var S=t_.toTypedArray();if(A.length){if(A.length!==16&&A.length!==6&&A.length!==9)throw"invalid matrix size";return A.length===16?Ne(A,"HEAPF32",Yo):(S.fill(0),S[0]=A[0],S[1]=A[1],S[3]=A[2],S[4]=A[3],S[5]=A[4],S[7]=A[5],S[12]=A[6],S[13]=A[7],S[15]=A[8],A.length===6&&(S[12]=0,S[13]=0,S[15]=1),Yo)}return S[0]=A.m11,S[1]=A.m21,S[2]=A.m31,S[3]=A.m41,S[4]=A.m12,S[5]=A.m22,S[6]=A.m32,S[7]=A.m42,S[8]=A.m13,S[9]=A.m23,S[10]=A.m33,S[11]=A.m43,S[12]=A.m14,S[13]=A.m24,S[14]=A.m34,S[15]=A.m44,Yo}function Ge(A){for(var S=Array(16),B=0;16>B;B++)S[B]=h.HEAPF32[A/4+B];return S}function Tt(A,S){return Ne(A,"HEAPF32",S||qo)}function sr(A,S,B,q){var ge=r_.toTypedArray();return ge[0]=A,ge[1]=S,ge[2]=B,ge[3]=q,qo}function Or(A){for(var S=new Float32Array(4),B=0;4>B;B++)S[B]=h.HEAPF32[A/4+B];return S}function _r(A,S){return Ne(A,"HEAPF32",S||p)}function Ii(A,S){return Ne(A,"HEAPF32",S||ht)}function Ju(){for(var A=0,S=0;S<arguments.length-1;S+=2)A+=arguments[S]*arguments[S+1];return A}function Xo(A,S,B){for(var q=Array(A.length),ge=0;ge<B;ge++)for(var Oe=0;Oe<B;Oe++){for(var Je=0,vt=0;vt<B;vt++)Je+=A[B*ge+vt]*S[B*vt+Oe];q[ge*B+Oe]=Je}return q}function Jg(A,S){for(var B=Xo(S[0],S[1],A),q=2;q<S.length;)B=Xo(B,S[q],A),q++;return B}h.Color=function(A,S,B,q){return q===void 0&&(q=1),h.Color4f(be(A)/255,be(S)/255,be(B)/255,q)},h.ColorAsInt=function(A,S,B,q){return q===void 0&&(q=255),(be(q)<<24|be(A)<<16|be(S)<<8|be(B)<<0&268435455)>>>0},h.Color4f=function(A,S,B,q){return q===void 0&&(q=1),Float32Array.of(A,S,B,q)},Object.defineProperty(h,"TRANSPARENT",{get:function(){return h.Color4f(0,0,0,0)}}),Object.defineProperty(h,"BLACK",{get:function(){return h.Color4f(0,0,0,1)}}),Object.defineProperty(h,"WHITE",{get:function(){return h.Color4f(1,1,1,1)}}),Object.defineProperty(h,"RED",{get:function(){return h.Color4f(1,0,0,1)}}),Object.defineProperty(h,"GREEN",{get:function(){return h.Color4f(0,1,0,1)}}),Object.defineProperty(h,"BLUE",{get:function(){return h.Color4f(0,0,1,1)}}),Object.defineProperty(h,"YELLOW",{get:function(){return h.Color4f(1,1,0,1)}}),Object.defineProperty(h,"CYAN",{get:function(){return h.Color4f(0,1,1,1)}}),Object.defineProperty(h,"MAGENTA",{get:function(){return h.Color4f(1,0,1,1)}}),h.getColorComponents=function(A){return[Math.floor(255*A[0]),Math.floor(255*A[1]),Math.floor(255*A[2]),A[3]]},h.parseColorString=function(A,S){if(A=A.toLowerCase(),A.startsWith("#")){switch(S=255,A.length){case 9:S=parseInt(A.slice(7,9),16);case 7:var B=parseInt(A.slice(1,3),16),q=parseInt(A.slice(3,5),16),ge=parseInt(A.slice(5,7),16);break;case 5:S=17*parseInt(A.slice(4,5),16);case 4:B=17*parseInt(A.slice(1,2),16),q=17*parseInt(A.slice(2,3),16),ge=17*parseInt(A.slice(3,4),16)}return h.Color(B,q,ge,S/255)}return A.startsWith("rgba")?(A=A.slice(5,-1),A=A.split(","),h.Color(+A[0],+A[1],+A[2],ve(A[3]))):A.startsWith("rgb")?(A=A.slice(4,-1),A=A.split(","),h.Color(+A[0],+A[1],+A[2],ve(A[3]))):A.startsWith("gray(")||A.startsWith("hsl")||!S||(A=S[A],A===void 0)?h.BLACK:A},h.multiplyByAlpha=function(A,S){return A=A.slice(),A[3]=Math.max(0,Math.min(A[3]*S,1)),A},h.Malloc=function(A,S){var B=h._malloc(S*A.BYTES_PER_ELEMENT);return{_ck:!0,length:S,byteOffset:B,ne:null,subarray:function(q,ge){return q=this.toTypedArray().subarray(q,ge),q._ck=!0,q},toTypedArray:function(){return this.ne&&this.ne.length?this.ne:(this.ne=new A(h.HEAPU8.buffer,B,S),this.ne._ck=!0,this.ne)}}},h.Free=function(A){h._free(A.byteOffset),A.byteOffset=pt,A.toTypedArray=null,A.ne=null};var Fi=pt,$h,Yo=pt,t_,qo=pt,r_,ns,p=pt,y,w=pt,H,X=pt,ie,pe=pt,xe,Ce=pt,qe,ht=pt,xt,yt=pt,At=Float32Array.of(0,0,1),pt=0;h.onRuntimeInitialized=function(){function A(S,B,q,ge,Oe,Je){Je||(Je=4*ge.width,ge.colorType===h.ColorType.RGBA_F16?Je*=2:ge.colorType===h.ColorType.RGBA_F32&&(Je*=4));var vt=Je*ge.height,Ct=Oe?Oe.byteOffset:h._malloc(vt);if(!S._readPixels(ge,Ct,Je,B,q))return Oe||h._free(Ct),null;if(Oe)return Oe.toTypedArray();switch(ge.colorType){case h.ColorType.RGBA_8888:case h.ColorType.RGBA_F16:S=new Uint8Array(h.HEAPU8.buffer,Ct,vt).slice();break;case h.ColorType.RGBA_F32:S=new Float32Array(h.HEAPU8.buffer,Ct,vt).slice();break;default:return null}return h._free(Ct),S}r_=h.Malloc(Float32Array,4),qo=r_.byteOffset,t_=h.Malloc(Float32Array,16),Yo=t_.byteOffset,$h=h.Malloc(Float32Array,9),Fi=$h.byteOffset,qe=h.Malloc(Float32Array,12),ht=qe.byteOffset,xt=h.Malloc(Float32Array,12),yt=xt.byteOffset,ns=h.Malloc(Float32Array,4),p=ns.byteOffset,y=h.Malloc(Float32Array,4),w=y.byteOffset,H=h.Malloc(Float32Array,3),X=H.byteOffset,ie=h.Malloc(Float32Array,3),pe=ie.byteOffset,xe=h.Malloc(Int32Array,4),Ce=xe.byteOffset,h.ColorSpace.SRGB=h.ColorSpace._MakeSRGB(),h.ColorSpace.DISPLAY_P3=h.ColorSpace._MakeDisplayP3(),h.ColorSpace.ADOBE_RGB=h.ColorSpace._MakeAdobeRGB(),h.GlyphRunFlags={IsWhiteSpace:h._GlyphRunFlags_isWhiteSpace},h.Path.MakeFromCmds=function(S){var B=Ne(S,"HEAPF32"),q=h.Path._MakeFromCmds(B,S.length);return Me(B,S),q},h.Path.MakeFromVerbsPointsWeights=function(S,B,q){var ge=Ne(S,"HEAPU8"),Oe=Ne(B,"HEAPF32"),Je=Ne(q,"HEAPF32"),vt=h.Path._MakeFromVerbsPointsWeights(ge,S.length,Oe,B.length,Je,q&&q.length||0);return Me(ge,S),Me(Oe,B),Me(Je,q),vt},h.Path.prototype.addArc=function(S,B,q){return S=_r(S),this._addArc(S,B,q),this},h.Path.prototype.addOval=function(S,B,q){return q===void 0&&(q=1),S=_r(S),this._addOval(S,!!B,q),this},h.Path.prototype.addPath=function(){var S=Array.prototype.slice.call(arguments),B=S[0],q=!1;if(typeof S[S.length-1]=="boolean"&&(q=S.pop()),S.length===1)this._addPath(B,1,0,0,0,1,0,0,0,1,q);else if(S.length===2)S=S[1],this._addPath(B,S[0],S[1],S[2],S[3],S[4],S[5],S[6]||0,S[7]||0,S[8]||1,q);else if(S.length===7||S.length===10)this._addPath(B,S[1],S[2],S[3],S[4],S[5],S[6],S[7]||0,S[8]||0,S[9]||1,q);else return null;return this},h.Path.prototype.addPoly=function(S,B){var q=Ne(S,"HEAPF32");return this._addPoly(q,S.length/2,B),Me(q,S),this},h.Path.prototype.addRect=function(S,B){return S=_r(S),this._addRect(S,!!B),this},h.Path.prototype.addRRect=function(S,B){return S=Ii(S),this._addRRect(S,!!B),this},h.Path.prototype.addVerbsPointsWeights=function(S,B,q){var ge=Ne(S,"HEAPU8"),Oe=Ne(B,"HEAPF32"),Je=Ne(q,"HEAPF32");this._addVerbsPointsWeights(ge,S.length,Oe,B.length,Je,q&&q.length||0),Me(ge,S),Me(Oe,B),Me(Je,q)},h.Path.prototype.arc=function(S,B,q,ge,Oe,Je){return S=h.LTRBRect(S-q,B-q,S+q,B+q),Oe=(Oe-ge)/Math.PI*180-360*!!Je,Je=new h.Path,Je.addArc(S,ge/Math.PI*180,Oe),this.addPath(Je,!0),Je.delete(),this},h.Path.prototype.arcToOval=function(S,B,q,ge){return S=_r(S),this._arcToOval(S,B,q,ge),this},h.Path.prototype.arcToRotated=function(S,B,q,ge,Oe,Je,vt){return this._arcToRotated(S,B,q,!!ge,!!Oe,Je,vt),this},h.Path.prototype.arcToTangent=function(S,B,q,ge,Oe){return this._arcToTangent(S,B,q,ge,Oe),this},h.Path.prototype.close=function(){return this._close(),this},h.Path.prototype.conicTo=function(S,B,q,ge,Oe){return this._conicTo(S,B,q,ge,Oe),this},h.Path.prototype.computeTightBounds=function(S){this._computeTightBounds(p);var B=ns.toTypedArray();return S?(S.set(B),S):B.slice()},h.Path.prototype.cubicTo=function(S,B,q,ge,Oe,Je){return this._cubicTo(S,B,q,ge,Oe,Je),this},h.Path.prototype.dash=function(S,B,q){return this._dash(S,B,q)?this:null},h.Path.prototype.getBounds=function(S){this._getBounds(p);var B=ns.toTypedArray();return S?(S.set(B),S):B.slice()},h.Path.prototype.lineTo=function(S,B){return this._lineTo(S,B),this},h.Path.prototype.moveTo=function(S,B){return this._moveTo(S,B),this},h.Path.prototype.offset=function(S,B){return this._transform(1,0,S,0,1,B,0,0,1),this},h.Path.prototype.quadTo=function(S,B,q,ge){return this._quadTo(S,B,q,ge),this},h.Path.prototype.rArcTo=function(S,B,q,ge,Oe,Je,vt){return this._rArcTo(S,B,q,ge,Oe,Je,vt),this},h.Path.prototype.rConicTo=function(S,B,q,ge,Oe){return this._rConicTo(S,B,q,ge,Oe),this},h.Path.prototype.rCubicTo=function(S,B,q,ge,Oe,Je){return this._rCubicTo(S,B,q,ge,Oe,Je),this},h.Path.prototype.rLineTo=function(S,B){return this._rLineTo(S,B),this},h.Path.prototype.rMoveTo=function(S,B){return this._rMoveTo(S,B),this},h.Path.prototype.rQuadTo=function(S,B,q,ge){return this._rQuadTo(S,B,q,ge),this},h.Path.prototype.stroke=function(S){return S=S||{},S.width=S.width||1,S.miter_limit=S.miter_limit||4,S.cap=S.cap||h.StrokeCap.Butt,S.join=S.join||h.StrokeJoin.Miter,S.precision=S.precision||1,this._stroke(S)?this:null},h.Path.prototype.transform=function(){if(arguments.length===1){var S=arguments[0];this._transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6]||0,S[7]||0,S[8]||1)}else if(arguments.length===6||arguments.length===9)S=arguments,this._transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6]||0,S[7]||0,S[8]||1);else throw"transform expected to take 1 or 9 arguments. Got "+arguments.length;return this},h.Path.prototype.trim=function(S,B,q){return this._trim(S,B,!!q)?this:null},h.Image.prototype.makeShaderCubic=function(S,B,q,ge,Oe){return Oe=kt(Oe),this._makeShaderCubic(S,B,q,ge,Oe)},h.Image.prototype.makeShaderOptions=function(S,B,q,ge,Oe){return Oe=kt(Oe),this._makeShaderOptions(S,B,q,ge,Oe)},h.Image.prototype.readPixels=function(S,B,q,ge,Oe){return A(this,S,B,q,ge,Oe)},h.Canvas.prototype.clear=function(S){h.Nd(this.Md),S=Tt(S),this._clear(S)},h.Canvas.prototype.clipRRect=function(S,B,q){h.Nd(this.Md),S=Ii(S),this._clipRRect(S,B,q)},h.Canvas.prototype.clipRect=function(S,B,q){h.Nd(this.Md),S=_r(S),this._clipRect(S,B,q)},h.Canvas.prototype.concat=function(S){h.Nd(this.Md),S=Nt(S),this._concat(S)},h.Canvas.prototype.drawArc=function(S,B,q,ge,Oe){h.Nd(this.Md),S=_r(S),this._drawArc(S,B,q,ge,Oe)},h.Canvas.prototype.drawAtlas=function(S,B,q,ge,Oe,Je,vt){if(S&&ge&&B&&q&&B.length===q.length){h.Nd(this.Md),Oe||(Oe=h.BlendMode.SrcOver);var Ct=Ne(B,"HEAPF32"),Gt=Ne(q,"HEAPF32"),ur=q.length/4,Ae=Ne(Y(Je),"HEAPU32");if(vt&&"B"in vt&&"C"in vt)this._drawAtlasCubic(S,Gt,Ct,Ae,ur,Oe,vt.B,vt.C,ge);else{let ft=h.FilterMode.Linear,Vt=h.MipmapMode.None;vt&&(ft=vt.filter,"mipmap"in vt&&(Vt=vt.mipmap)),this._drawAtlasOptions(S,Gt,Ct,Ae,ur,Oe,ft,Vt,ge)}Me(Ct,B),Me(Gt,q),Me(Ae,Je)}},h.Canvas.prototype.drawCircle=function(S,B,q,ge){h.Nd(this.Md),this._drawCircle(S,B,q,ge)},h.Canvas.prototype.drawColor=function(S,B){h.Nd(this.Md),S=Tt(S),B!==void 0?this._drawColor(S,B):this._drawColor(S)},h.Canvas.prototype.drawColorInt=function(S,B){h.Nd(this.Md),this._drawColorInt(S,B||h.BlendMode.SrcOver)},h.Canvas.prototype.drawColorComponents=function(S,B,q,ge,Oe){h.Nd(this.Md),S=sr(S,B,q,ge),Oe!==void 0?this._drawColor(S,Oe):this._drawColor(S)},h.Canvas.prototype.drawDRRect=function(S,B,q){h.Nd(this.Md),S=Ii(S,ht),B=Ii(B,yt),this._drawDRRect(S,B,q)},h.Canvas.prototype.drawGlyphs=function(S,B,q,ge,Oe,Je){if(!(2*S.length<=B.length))throw"Not enough positions for the array of gyphs";h.Nd(this.Md);const vt=Ne(S,"HEAPU16"),Ct=Ne(B,"HEAPF32");this._drawGlyphs(S.length,vt,Ct,q,ge,Oe,Je),Me(Ct,B),Me(vt,S)},h.Canvas.prototype.drawImage=function(S,B,q,ge){h.Nd(this.Md),this._drawImage(S,B,q,ge||null)},h.Canvas.prototype.drawImageCubic=function(S,B,q,ge,Oe,Je){h.Nd(this.Md),this._drawImageCubic(S,B,q,ge,Oe,Je||null)},h.Canvas.prototype.drawImageOptions=function(S,B,q,ge,Oe,Je){h.Nd(this.Md),this._drawImageOptions(S,B,q,ge,Oe,Je||null)},h.Canvas.prototype.drawImageNine=function(S,B,q,ge,Oe){h.Nd(this.Md),B=Ne(B,"HEAP32",Ce),q=_r(q),this._drawImageNine(S,B,q,ge,Oe||null)},h.Canvas.prototype.drawImageRect=function(S,B,q,ge,Oe){h.Nd(this.Md),_r(B,p),_r(q,w),this._drawImageRect(S,p,w,ge,!!Oe)},h.Canvas.prototype.drawImageRectCubic=function(S,B,q,ge,Oe,Je){h.Nd(this.Md),_r(B,p),_r(q,w),this._drawImageRectCubic(S,p,w,ge,Oe,Je||null)},h.Canvas.prototype.drawImageRectOptions=function(S,B,q,ge,Oe,Je){h.Nd(this.Md),_r(B,p),_r(q,w),this._drawImageRectOptions(S,p,w,ge,Oe,Je||null)},h.Canvas.prototype.drawLine=function(S,B,q,ge,Oe){h.Nd(this.Md),this._drawLine(S,B,q,ge,Oe)},h.Canvas.prototype.drawOval=function(S,B){h.Nd(this.Md),S=_r(S),this._drawOval(S,B)},h.Canvas.prototype.drawPaint=function(S){h.Nd(this.Md),this._drawPaint(S)},h.Canvas.prototype.drawParagraph=function(S,B,q){h.Nd(this.Md),this._drawParagraph(S,B,q)},h.Canvas.prototype.drawPatch=function(S,B,q,ge,Oe){if(24>S.length)throw"Need 12 cubic points";if(B&&4>B.length)throw"Need 4 colors";if(q&&8>q.length)throw"Need 4 shader coordinates";h.Nd(this.Md);const Je=Ne(S,"HEAPF32"),vt=B?Ne(Y(B),"HEAPU32"):pt,Ct=q?Ne(q,"HEAPF32"):pt;ge||(ge=h.BlendMode.Modulate),this._drawPatch(Je,vt,Ct,ge,Oe),Me(Ct,q),Me(vt,B),Me(Je,S)},h.Canvas.prototype.drawPath=function(S,B){h.Nd(this.Md),this._drawPath(S,B)},h.Canvas.prototype.drawPicture=function(S){h.Nd(this.Md),this._drawPicture(S)},h.Canvas.prototype.drawPoints=function(S,B,q){h.Nd(this.Md);var ge=Ne(B,"HEAPF32");this._drawPoints(S,ge,B.length/2,q),Me(ge,B)},h.Canvas.prototype.drawRRect=function(S,B){h.Nd(this.Md),S=Ii(S),this._drawRRect(S,B)},h.Canvas.prototype.drawRect=function(S,B){h.Nd(this.Md),S=_r(S),this._drawRect(S,B)},h.Canvas.prototype.drawRect4f=function(S,B,q,ge,Oe){h.Nd(this.Md),this._drawRect4f(S,B,q,ge,Oe)},h.Canvas.prototype.drawShadow=function(S,B,q,ge,Oe,Je,vt){h.Nd(this.Md);var Ct=Ne(Oe,"HEAPF32"),Gt=Ne(Je,"HEAPF32");B=Ne(B,"HEAPF32",X),q=Ne(q,"HEAPF32",pe),this._drawShadow(S,B,q,ge,Ct,Gt,vt),Me(Ct,Oe),Me(Gt,Je)},h.getShadowLocalBounds=function(S,B,q,ge,Oe,Je,vt){return S=kt(S),q=Ne(q,"HEAPF32",X),ge=Ne(ge,"HEAPF32",pe),this._getShadowLocalBounds(S,B,q,ge,Oe,Je,p)?(B=ns.toTypedArray(),vt?(vt.set(B),vt):B.slice()):null},h.Canvas.prototype.drawTextBlob=function(S,B,q,ge){h.Nd(this.Md),this._drawTextBlob(S,B,q,ge)},h.Canvas.prototype.drawVertices=function(S,B,q){h.Nd(this.Md),this._drawVertices(S,B,q)},h.Canvas.prototype.getLocalToDevice=function(){return this._getLocalToDevice(Yo),Ge(Yo)},h.Canvas.prototype.findMarkedCTM=function(S){return this._findMarkedCTM(S,Yo)?Ge(Yo):null},h.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(Fi);for(var S=Array(9),B=0;9>B;B++)S[B]=h.HEAPF32[Fi/4+B];return S},h.Canvas.prototype.makeSurface=function(S){return S=this._makeSurface(S),S.Md=this.Md,S},h.Canvas.prototype.readPixels=function(S,B,q,ge,Oe){return h.Nd(this.Md),A(this,S,B,q,ge,Oe)},h.Canvas.prototype.saveLayer=function(S,B,q,ge){return B=_r(B),this._saveLayer(S||null,B,q||null,ge||0)},h.Canvas.prototype.writePixels=function(S,B,q,ge,Oe,Je,vt,Ct){if(S.byteLength%(B*q))throw"pixels length must be a multiple of the srcWidth * srcHeight";h.Nd(this.Md);var Gt=S.byteLength/(B*q);Je=Je||h.AlphaType.Unpremul,vt=vt||h.ColorType.RGBA_8888,Ct=Ct||h.ColorSpace.SRGB;var ur=Gt*B;return Gt=Ne(S,"HEAPU8"),B=this._writePixels({width:B,height:q,colorType:vt,alphaType:Je,colorSpace:Ct},Gt,ur,ge,Oe),Me(Gt,S),B},h.ColorFilter.MakeBlend=function(S,B){return S=Tt(S),h.ColorFilter._MakeBlend(S,B)},h.ColorFilter.MakeMatrix=function(S){if(!S||S.length!==20)throw"invalid color matrix";var B=Ne(S,"HEAPF32"),q=h.ColorFilter._makeMatrix(B);return Me(B,S),q},h.ContourMeasure.prototype.getPosTan=function(S,B){return this._getPosTan(S,p),S=ns.toTypedArray(),B?(B.set(S),B):S.slice()},h.ImageFilter.MakeMatrixTransform=function(S,B,q){if(S=kt(S),"B"in B&&"C"in B)return h.ImageFilter._MakeMatrixTransformCubic(S,B.xg,B.yg,q);const ge=B.filter;let Oe=h.MipmapMode.None;return"mipmap"in B&&(Oe=B.mipmap),h.ImageFilter._MakeMatrixTransformOptions(S,ge,Oe,q)},h.Paint.prototype.getColor=function(){return this._getColor(qo),Or(qo)},h.Paint.prototype.setColor=function(S,B){B=B||null,S=Tt(S),this._setColor(S,B)},h.Paint.prototype.setColorComponents=function(S,B,q,ge,Oe){Oe=Oe||null,S=sr(S,B,q,ge),this._setColor(S,Oe)},h.Path.prototype.getPoint=function(S,B){return this._getPoint(S,p),S=ns.toTypedArray(),B?(B[0]=S[0],B[1]=S[1],B):S.slice(0,2)},h.PictureRecorder.prototype.beginRecording=function(S){return S=_r(S),this._beginRecording(S)},h.Surface.prototype.getCanvas=function(){var S=this._getCanvas();return S.Md=this.Md,S},h.Surface.prototype.makeImageSnapshot=function(S){return S=Ne(S,"HEAP32",Ce),this._makeImageSnapshot(S)},h.Surface.prototype.makeSurface=function(S){return S=this._makeSurface(S),S.Md=this.Md,S},h.Surface.prototype.requestAnimationFrame=function(S,B){this.Fe||(this.Fe=this.getCanvas()),requestAnimationFrame(function(){h.Nd(this.Md),S(this.Fe),this.flush(B)}.bind(this))},h.Surface.prototype.drawOnce=function(S,B){this.Fe||(this.Fe=this.getCanvas()),requestAnimationFrame(function(){h.Nd(this.Md),S(this.Fe),this.flush(B),this.dispose()}.bind(this))},h.PathEffect.MakeDash=function(S,B){if(B||(B=0),!S.length||S.length%2===1)throw"Intervals array must have even length";var q=Ne(S,"HEAPF32");return B=h.PathEffect._MakeDash(q,S.length,B),Me(q,S),B},h.Shader.MakeColor=function(S,B){return B=B||null,S=Tt(S),h.Shader._MakeColor(S,B)},h.Shader.Blend=h.Shader.MakeBlend,h.Shader.Color=h.Shader.MakeColor,h.Shader.MakeLinearGradient=function(S,B,q,ge,Oe,Je,vt,Ct){Ct=Ct||null;var Gt=ct(q),ur=Ne(ge,"HEAPF32");vt=vt||0,Je=kt(Je);var Ae=ns.toTypedArray();return Ae.set(S),Ae.set(B,2),S=h.Shader._MakeLinearGradient(p,Gt.be,Gt.Je,ur,Gt.count,Oe,vt,Je,Ct),Me(Gt.be,q),ge&&Me(ur,ge),S},h.Shader.MakeRadialGradient=function(S,B,q,ge,Oe,Je,vt,Ct){Ct=Ct||null;var Gt=ct(q),ur=Ne(ge,"HEAPF32");return vt=vt||0,Je=kt(Je),S=h.Shader._MakeRadialGradient(S[0],S[1],B,Gt.be,Gt.Je,ur,Gt.count,Oe,vt,Je,Ct),Me(Gt.be,q),ge&&Me(ur,ge),S},h.Shader.MakeSweepGradient=function(S,B,q,ge,Oe,Je,vt,Ct,Gt,ur){ur=ur||null;var Ae=ct(q),ft=Ne(ge,"HEAPF32");return vt=vt||0,Ct=Ct||0,Gt=Gt||360,Je=kt(Je),S=h.Shader._MakeSweepGradient(S,B,Ae.be,Ae.Je,ft,Ae.count,Oe,Ct,Gt,vt,Je,ur),Me(Ae.be,q),ge&&Me(ft,ge),S},h.Shader.MakeTwoPointConicalGradient=function(S,B,q,ge,Oe,Je,vt,Ct,Gt,ur){ur=ur||null;var Ae=ct(Oe),ft=Ne(Je,"HEAPF32");Gt=Gt||0,Ct=kt(Ct);var Vt=ns.toTypedArray();return Vt.set(S),Vt.set(q,2),S=h.Shader._MakeTwoPointConicalGradient(p,B,ge,Ae.be,Ae.Je,ft,Ae.count,vt,Gt,Ct,ur),Me(Ae.be,Oe),Je&&Me(ft,Je),S},h.Vertices.prototype.bounds=function(S){this._bounds(p);var B=ns.toTypedArray();return S?(S.set(B),S):B.slice()},h.Ud&&h.Ud.forEach(function(S){S()})},h.computeTonalColors=function(A){var S=Ne(A.ambient,"HEAPF32"),B=Ne(A.spot,"HEAPF32");this._computeTonalColors(S,B);var q={ambient:Or(S),spot:Or(B)};return Me(S,A.ambient),Me(B,A.spot),q},h.LTRBRect=function(A,S,B,q){return Float32Array.of(A,S,B,q)},h.XYWHRect=function(A,S,B,q){return Float32Array.of(A,S,A+B,S+q)},h.LTRBiRect=function(A,S,B,q){return Int32Array.of(A,S,B,q)},h.XYWHiRect=function(A,S,B,q){return Int32Array.of(A,S,A+B,S+q)},h.RRectXY=function(A,S,B){return Float32Array.of(A[0],A[1],A[2],A[3],S,B,S,B,S,B,S,B)},h.MakeAnimatedImageFromEncoded=function(A){A=new Uint8Array(A);var S=h._malloc(A.byteLength);return h.HEAPU8.set(A,S),(A=h._decodeAnimatedImage(S,A.byteLength))?A:null},h.MakeImageFromEncoded=function(A){A=new Uint8Array(A);var S=h._malloc(A.byteLength);return h.HEAPU8.set(A,S),(A=h._decodeImage(S,A.byteLength))?A:null};var hr=null;h.MakeImageFromCanvasImageSource=function(A){var S=A.width,B=A.height;hr||(hr=document.createElement("canvas")),hr.width=S,hr.height=B;var q=hr.getContext("2d");return q.drawImage(A,0,0),A=q.getImageData(0,0,S,B),h.MakeImage({width:S,height:B,alphaType:h.AlphaType.Unpremul,colorType:h.ColorType.RGBA_8888,colorSpace:h.ColorSpace.SRGB},A.data,4*S)},h.MakeImage=function(A,S,B){var q=h._malloc(S.length);return h.HEAPU8.set(S,q),h._MakeImage(A,q,S.length,B)},h.MakeVertices=function(A,S,B,q,ge,Oe){var Je=ge&&ge.length||0,vt=0;return B&&B.length&&(vt|=1),q&&q.length&&(vt|=2),Oe===void 0||Oe||(vt|=4),A=new h._VerticesBuilder(A,S.length/2,Je,vt),Ne(S,"HEAPF32",A.positions()),A.texCoords()&&Ne(B,"HEAPF32",A.texCoords()),A.colors()&&Ne(Y(q),"HEAPU32",A.colors()),A.indices()&&Ne(ge,"HEAPU16",A.indices()),A.detach()},h.Matrix={},h.Matrix.identity=function(){return v(3)},h.Matrix.invert=function(A){var S=A[0]*A[4]*A[8]+A[1]*A[5]*A[6]+A[2]*A[3]*A[7]-A[2]*A[4]*A[6]-A[1]*A[3]*A[8]-A[0]*A[5]*A[7];return S?[(A[4]*A[8]-A[5]*A[7])/S,(A[2]*A[7]-A[1]*A[8])/S,(A[1]*A[5]-A[2]*A[4])/S,(A[5]*A[6]-A[3]*A[8])/S,(A[0]*A[8]-A[2]*A[6])/S,(A[2]*A[3]-A[0]*A[5])/S,(A[3]*A[7]-A[4]*A[6])/S,(A[1]*A[6]-A[0]*A[7])/S,(A[0]*A[4]-A[1]*A[3])/S]:null},h.Matrix.mapPoints=function(A,S){for(var B=0;B<S.length;B+=2){var q=S[B],ge=S[B+1],Oe=A[6]*q+A[7]*ge+A[8],Je=A[3]*q+A[4]*ge+A[5];S[B]=(A[0]*q+A[1]*ge+A[2])/Oe,S[B+1]=Je/Oe}return S},h.Matrix.multiply=function(){return Jg(3,arguments)},h.Matrix.rotated=function(A,S,B){S=S||0,B=B||0;var q=Math.sin(A);return A=Math.cos(A),[A,-q,Ju(q,B,1-A,S),q,A,Ju(-q,S,1-A,B),0,0,1]},h.Matrix.scaled=function(A,S,B,q){B=B||0,q=q||0;var ge=m([A,S],v(3),3,0,1);return m([B-A*B,q-S*q],ge,3,2,0)},h.Matrix.skewed=function(A,S,B,q){B=B||0,q=q||0;var ge=m([A,S],v(3),3,1,-1);return m([-A*B,-S*q],ge,3,2,0)},h.Matrix.translated=function(A,S){return m(arguments,v(3),3,2,0)},h.Vector={},h.Vector.dot=function(A,S){return A.map(function(B,q){return B*S[q]}).reduce(function(B,q){return B+q})},h.Vector.lengthSquared=function(A){return h.Vector.dot(A,A)},h.Vector.length=function(A){return Math.sqrt(h.Vector.lengthSquared(A))},h.Vector.mulScalar=function(A,S){return A.map(function(B){return B*S})},h.Vector.add=function(A,S){return A.map(function(B,q){return B+S[q]})},h.Vector.sub=function(A,S){return A.map(function(B,q){return B-S[q]})},h.Vector.dist=function(A,S){return h.Vector.length(h.Vector.sub(A,S))},h.Vector.normalize=function(A){return h.Vector.mulScalar(A,1/h.Vector.length(A))},h.Vector.cross=function(A,S){return[A[1]*S[2]-A[2]*S[1],A[2]*S[0]-A[0]*S[2],A[0]*S[1]-A[1]*S[0]]},h.M44={},h.M44.identity=function(){return v(4)},h.M44.translated=function(A){return m(A,v(4),4,3,0)},h.M44.scaled=function(A){return m(A,v(4),4,0,1)},h.M44.rotated=function(A,S){return h.M44.rotatedUnitSinCos(h.Vector.normalize(A),Math.sin(S),Math.cos(S))},h.M44.rotatedUnitSinCos=function(A,S,B){var q=A[0],ge=A[1];A=A[2];var Oe=1-B;return[Oe*q*q+B,Oe*q*ge-S*A,Oe*q*A+S*ge,0,Oe*q*ge+S*A,Oe*ge*ge+B,Oe*ge*A-S*q,0,Oe*q*A-S*ge,Oe*ge*A+S*q,Oe*A*A+B,0,0,0,0,1]},h.M44.lookat=function(A,S,B){S=h.Vector.normalize(h.Vector.sub(S,A)),B=h.Vector.normalize(B),B=h.Vector.normalize(h.Vector.cross(S,B));var q=h.M44.identity();return m(B,q,4,0,0),m(h.Vector.cross(B,S),q,4,1,0),m(h.Vector.mulScalar(S,-1),q,4,2,0),m(A,q,4,3,0),A=h.M44.invert(q),A===null?h.M44.identity():A},h.M44.perspective=function(A,S,B){var q=1/(S-A);return B/=2,B=Math.cos(B)/Math.sin(B),[B,0,0,0,0,B,0,0,0,0,(S+A)*q,2*S*A*q,0,0,-1,1]},h.M44.rc=function(A,S,B){return A[4*S+B]},h.M44.multiply=function(){return Jg(4,arguments)},h.M44.invert=function(A){var S=A[0],B=A[4],q=A[8],ge=A[12],Oe=A[1],Je=A[5],vt=A[9],Ct=A[13],Gt=A[2],ur=A[6],Ae=A[10],ft=A[14],Vt=A[3],br=A[7],fn=A[11];A=A[15];var Vs=S*Je-B*Oe,Ws=S*vt-q*Oe,_n=S*Ct-ge*Oe,lt=B*vt-q*Je,V=B*Ct-ge*Je,he=q*Ct-ge*vt,Be=Gt*br-ur*Vt,We=Gt*fn-Ae*Vt,Ze=Gt*A-ft*Vt,at=ur*fn-Ae*br,Pt=ur*A-ft*br,xr=Ae*A-ft*fn,Mn=Vs*xr-Ws*Pt+_n*at+lt*Ze-V*We+he*Be,ui=1/Mn;return Mn===0||ui===1/0?null:(Vs*=ui,Ws*=ui,_n*=ui,lt*=ui,V*=ui,he*=ui,Be*=ui,We*=ui,Ze*=ui,at*=ui,Pt*=ui,xr*=ui,S=[Je*xr-vt*Pt+Ct*at,vt*Ze-Oe*xr-Ct*We,Oe*Pt-Je*Ze+Ct*Be,Je*We-Oe*at-vt*Be,q*Pt-B*xr-ge*at,S*xr-q*Ze+ge*We,B*Ze-S*Pt-ge*Be,S*at-B*We+q*Be,br*he-fn*V+A*lt,fn*_n-Vt*he-A*Ws,Vt*V-br*_n+A*Vs,br*Ws-Vt*lt-fn*Vs,Ae*V-ur*he-ft*lt,Gt*he-Ae*_n+ft*Ws,ur*_n-Gt*V-ft*Vs,Gt*lt-ur*Ws+Ae*Vs],S.every(function(Va){return!isNaN(Va)&&Va!==1/0&&Va!==-1/0})?S:null)},h.M44.transpose=function(A){return[A[0],A[4],A[8],A[12],A[1],A[5],A[9],A[13],A[2],A[6],A[10],A[14],A[3],A[7],A[11],A[15]]},h.M44.mustInvert=function(A){if(A=h.M44.invert(A),A===null)throw"Matrix not invertible";return A},h.M44.setupCamera=function(A,S,B){var q=h.M44.lookat(B.eye,B.coa,B.up);return B=h.M44.perspective(B.near,B.far,B.angle),S=[(A[2]-A[0])/2,(A[3]-A[1])/2,S],A=h.M44.multiply(h.M44.translated([(A[0]+A[2])/2,(A[1]+A[3])/2,0]),h.M44.scaled(S)),h.M44.multiply(A,B,q,h.M44.mustInvert(A))},h.ColorMatrix={},h.ColorMatrix.identity=function(){var A=new Float32Array(20);return A[0]=1,A[6]=1,A[12]=1,A[18]=1,A},h.ColorMatrix.scaled=function(A,S,B,q){var ge=new Float32Array(20);return ge[0]=A,ge[6]=S,ge[12]=B,ge[18]=q,ge};var Vr=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];h.ColorMatrix.rotated=function(A,S,B){var q=h.ColorMatrix.identity();return A=Vr[A],q[A[0]]=B,q[A[1]]=S,q[A[2]]=-S,q[A[3]]=B,q},h.ColorMatrix.postTranslate=function(A,S,B,q,ge){return A[4]+=S,A[9]+=B,A[14]+=q,A[19]+=ge,A},h.ColorMatrix.concat=function(A,S){for(var B=new Float32Array(20),q=0,ge=0;20>ge;ge+=5){for(var Oe=0;4>Oe;Oe++)B[q++]=A[ge]*S[Oe]+A[ge+1]*S[Oe+5]+A[ge+2]*S[Oe+10]+A[ge+3]*S[Oe+15];B[q++]=A[ge]*S[4]+A[ge+1]*S[9]+A[ge+2]*S[14]+A[ge+3]*S[19]+A[ge+4]}return B},function(A){A.Ud=A.Ud||[],A.Ud.push(function(){function S(Ae){if(!Ae||!Ae.length)return[];for(var ft=[],Vt=0;Vt<Ae.length;Vt+=5){var br=A.LTRBRect(Ae[Vt],Ae[Vt+1],Ae[Vt+2],Ae[Vt+3]);br.direction=Ae[Vt+4]===0?A.TextDirection.RTL:A.TextDirection.LTR,ft.push(br)}return A._free(Ae.byteOffset),ft}function B(Ae){return Ae=Ae||{},Ae.weight===void 0&&(Ae.weight=A.FontWeight.Normal),Ae.width=Ae.width||A.FontWidth.Normal,Ae.slant=Ae.slant||A.FontSlant.Upright,Ae}function q(Ae){if(!Ae||!Ae.length)return pt;for(var ft=[],Vt=0;Vt<Ae.length;Vt++){var br=ge(Ae[Vt]);ft.push(br)}return Ne(ft,"HEAPU32")}function ge(Ae){if(vt[Ae])return vt[Ae];var ft=Fe(Ae)+1,Vt=A._malloc(ft);return Ve(Ae,fe,Vt,ft),vt[Ae]=Vt}function Oe(Ae){if(Ae._colorPtr=Tt(Ae.color),Ae._foregroundColorPtr=pt,Ae._backgroundColorPtr=pt,Ae._decorationColorPtr=pt,Ae.foregroundColor&&(Ae._foregroundColorPtr=Tt(Ae.foregroundColor,Ct)),Ae.backgroundColor&&(Ae._backgroundColorPtr=Tt(Ae.backgroundColor,Gt)),Ae.decorationColor&&(Ae._decorationColorPtr=Tt(Ae.decorationColor,ur)),Array.isArray(Ae.fontFamilies)&&Ae.fontFamilies.length?(Ae._fontFamiliesPtr=q(Ae.fontFamilies),Ae._fontFamiliesLen=Ae.fontFamilies.length):(Ae._fontFamiliesPtr=pt,Ae._fontFamiliesLen=0),Ae.locale){var ft=Ae.locale;Ae._localePtr=ge(ft),Ae._localeLen=Fe(ft)+1}else Ae._localePtr=pt,Ae._localeLen=0;if(Array.isArray(Ae.shadows)&&Ae.shadows.length){ft=Ae.shadows;var Vt=ft.map(function(lt){return lt.color||A.BLACK}),br=ft.map(function(lt){return lt.blurRadius||0});Ae._shadowLen=ft.length;for(var fn=A._malloc(8*ft.length),Vs=fn/4,Ws=0;Ws<ft.length;Ws++){var _n=ft[Ws].offset||[0,0];A.HEAPF32[Vs]=_n[0],A.HEAPF32[Vs+1]=_n[1],Vs+=2}Ae._shadowColorsPtr=ct(Vt).be,Ae._shadowOffsetsPtr=fn,Ae._shadowBlurRadiiPtr=Ne(br,"HEAPF32")}else Ae._shadowLen=0,Ae._shadowColorsPtr=pt,Ae._shadowOffsetsPtr=pt,Ae._shadowBlurRadiiPtr=pt;Array.isArray(Ae.fontFeatures)&&Ae.fontFeatures.length?(ft=Ae.fontFeatures,Vt=ft.map(function(lt){return lt.name}),br=ft.map(function(lt){return lt.value}),Ae._fontFeatureLen=ft.length,Ae._fontFeatureNamesPtr=q(Vt),Ae._fontFeatureValuesPtr=Ne(br,"HEAPU32")):(Ae._fontFeatureLen=0,Ae._fontFeatureNamesPtr=pt,Ae._fontFeatureValuesPtr=pt)}function Je(Ae){A._free(Ae._fontFamiliesPtr),A._free(Ae._localePtr),A._free(Ae._shadowColorsPtr),A._free(Ae._shadowOffsetsPtr),A._free(Ae._shadowBlurRadiiPtr),A._free(Ae._fontFeatureNamesPtr),A._free(Ae._fontFeatureValuesPtr)}A.Paragraph.prototype.getRectsForRange=function(Ae,ft,Vt,br){return Ae=this._getRectsForRange(Ae,ft,Vt,br),S(Ae)},A.Paragraph.prototype.getRectsForPlaceholders=function(){var Ae=this._getRectsForPlaceholders();return S(Ae)},A.TypefaceFontProvider.prototype.registerFont=function(Ae,ft){if(Ae=A.FontMgr.RefDefault().MakeTypefaceFromData(Ae),!Ae)return null;ft=ge(ft),this._registerFont(Ae,ft)},A.ParagraphStyle=function(Ae){if(Ae.disableHinting=Ae.disableHinting||!1,Ae.ellipsis){var ft=Ae.ellipsis;Ae._ellipsisPtr=ge(ft),Ae._ellipsisLen=Fe(ft)+1}else Ae._ellipsisPtr=pt,Ae._ellipsisLen=0;return Ae.heightMultiplier=Ae.heightMultiplier||0,Ae.maxLines=Ae.maxLines||0,ft=(ft=Ae.strutStyle)||{},ft.strutEnabled=ft.strutEnabled||!1,ft.strutEnabled&&Array.isArray(ft.fontFamilies)&&ft.fontFamilies.length?(ft._fontFamiliesPtr=q(ft.fontFamilies),ft._fontFamiliesLen=ft.fontFamilies.length):(ft._fontFamiliesPtr=pt,ft._fontFamiliesLen=0),ft.fontStyle=B(ft.fontStyle),ft.fontSize=ft.fontSize||0,ft.heightMultiplier=ft.heightMultiplier||0,ft.halfLeading=ft.halfLeading||!1,ft.leading=ft.leading||0,ft.forceStrutHeight=ft.forceStrutHeight||!1,Ae.strutStyle=ft,Ae.textAlign=Ae.textAlign||A.TextAlign.Start,Ae.textDirection=Ae.textDirection||A.TextDirection.LTR,Ae.textHeightBehavior=Ae.textHeightBehavior||A.TextHeightBehavior.All,Ae.textStyle=A.TextStyle(Ae.textStyle),Ae},A.TextStyle=function(Ae){return Ae.color||(Ae.color=A.BLACK),Ae.decoration=Ae.decoration||0,Ae.decorationThickness=Ae.decorationThickness||0,Ae.decorationStyle=Ae.decorationStyle||A.DecorationStyle.Solid,Ae.textBaseline=Ae.textBaseline||A.TextBaseline.Alphabetic,Ae.fontSize=Ae.fontSize||0,Ae.letterSpacing=Ae.letterSpacing||0,Ae.wordSpacing=Ae.wordSpacing||0,Ae.heightMultiplier=Ae.heightMultiplier||0,Ae.halfLeading=Ae.halfLeading||!1,Ae.fontStyle=B(Ae.fontStyle),Ae};var vt={},Ct=A._malloc(16),Gt=A._malloc(16),ur=A._malloc(16);A.ParagraphBuilder.Make=function(Ae,ft){return Oe(Ae.textStyle),ft=A.ParagraphBuilder._Make(Ae,ft),Je(Ae.textStyle),ft},A.ParagraphBuilder.MakeFromFontProvider=function(Ae,ft){return Oe(Ae.textStyle),ft=A.ParagraphBuilder._MakeFromFontProvider(Ae,ft),Je(Ae.textStyle),ft},A.ParagraphBuilder.ShapeText=function(Ae,ft,Vt){let br=0;for(const fn of ft)br+=fn.length;if(br!==Ae.length)throw"Accumulated block lengths must equal text.length";return A.ParagraphBuilder._ShapeText(Ae,ft,Vt)},A.ParagraphBuilder.prototype.pushStyle=function(Ae){Oe(Ae),this._pushStyle(Ae),Je(Ae)},A.ParagraphBuilder.prototype.pushPaintStyle=function(Ae,ft,Vt){Oe(Ae),this._pushPaintStyle(Ae,ft,Vt),Je(Ae)},A.ParagraphBuilder.prototype.addPlaceholder=function(Ae,ft,Vt,br,fn){Vt=Vt||A.PlaceholderAlignment.Baseline,br=br||A.TextBaseline.Alphabetic,this._addPlaceholder(Ae||0,ft||0,Vt,br,fn||0)}})}(n),h.Ud=h.Ud||[],h.Ud.push(function(){h.Path.prototype.op=function(A,S){return this._op(A,S)?this:null},h.Path.prototype.simplify=function(){return this._simplify()?this:null}}),h.Ud=h.Ud||[],h.Ud.push(function(){h.Canvas.prototype.drawText=function(A,S,B,q,ge){var Oe=Fe(A),Je=h._malloc(Oe+1);Ve(A,fe,Je,Oe+1),this._drawSimpleText(Je,Oe,S,B,ge,q),h._free(Je)},h.Font.prototype.getGlyphBounds=function(A,S,B){var q=Ne(A,"HEAPU16"),ge=h._malloc(16*A.length);return this._getGlyphWidthBounds(q,A.length,pt,ge,S||null),S=new Float32Array(h.HEAPU8.buffer,ge,4*A.length),Me(q,A),B?(B.set(S),h._free(ge),B):(A=Float32Array.from(S),h._free(ge),A)},h.Font.prototype.getGlyphIDs=function(A,S,B){S||(S=A.length);var q=Fe(A)+1,ge=h._malloc(q);return Ve(A,fe,ge,q),A=h._malloc(2*S),S=this._getGlyphIDs(ge,q-1,S,A),h._free(ge),0>S?(h._free(A),null):(ge=new Uint16Array(h.HEAPU8.buffer,A,S),B?(B.set(ge),h._free(A),B):(B=Uint16Array.from(ge),h._free(A),B))},h.Font.prototype.getGlyphIntercepts=function(A,S,B,q){var ge=Ne(A,"HEAPU16"),Oe=Ne(S,"HEAPF32");return this._getGlyphIntercepts(ge,A.length,!(A&&A._ck),Oe,S.length,!(S&&S._ck),B,q)},h.Font.prototype.getGlyphWidths=function(A,S,B){var q=Ne(A,"HEAPU16"),ge=h._malloc(4*A.length);return this._getGlyphWidthBounds(q,A.length,ge,pt,S||null),S=new Float32Array(h.HEAPU8.buffer,ge,A.length),Me(q,A),B?(B.set(S),h._free(ge),B):(A=Float32Array.from(S),h._free(ge),A)},h.FontMgr.FromData=function(){if(!arguments.length)return null;var A=arguments;if(A.length===1&&Array.isArray(A[0])&&(A=arguments[0]),!A.length)return null;for(var S=[],B=[],q=0;q<A.length;q++){var ge=new Uint8Array(A[q]),Oe=Ne(ge,"HEAPU8");S.push(Oe),B.push(ge.byteLength)}return S=Ne(S,"HEAPU32"),B=Ne(B,"HEAPU32"),A=h.FontMgr._fromData(S,B,A.length),h._free(S),h._free(B),A},h.FontMgr.prototype.MakeTypefaceFromData=function(A){A=new Uint8Array(A);var S=Ne(A,"HEAPU8");return(A=this._makeTypefaceFromData(S,A.byteLength))?A:null},h.Typeface.MakeFreeTypeFaceFromData=function(A){A=new Uint8Array(A);var S=Ne(A,"HEAPU8");return(A=h.Typeface._MakeFreeTypeFaceFromData(S,A.byteLength))?A:null},h.Typeface.prototype.getGlyphIDs=function(A,S,B){S||(S=A.length);var q=Fe(A)+1,ge=h._malloc(q);return Ve(A,fe,ge,q),A=h._malloc(2*S),S=this._getGlyphIDs(ge,q-1,S,A),h._free(ge),0>S?(h._free(A),null):(ge=new Uint16Array(h.HEAPU8.buffer,A,S),B?(B.set(ge),h._free(A),B):(B=Uint16Array.from(ge),h._free(A),B))},h.TextBlob.MakeOnPath=function(A,S,B,q){if(A&&A.length&&S&&S.countPoints()){if(S.countPoints()===1)return this.MakeFromText(A,B);q||(q=0);var ge=B.getGlyphIDs(A);ge=B.getGlyphWidths(ge);var Oe=[];S=new h.ContourMeasureIter(S,!1,1);for(var Je=S.next(),vt=new Float32Array(4),Ct=0;Ct<A.length&&Je;Ct++){var Gt=ge[Ct];if(q+=Gt/2,q>Je.length()){if(Je.delete(),Je=S.next(),!Je){A=A.substring(0,Ct);break}q=Gt/2}Je.getPosTan(q,vt);var ur=vt[2],Ae=vt[3];Oe.push(ur,Ae,vt[0]-Gt/2*ur,vt[1]-Gt/2*Ae),q+=Gt/2}return A=this.MakeFromRSXform(A,Oe,B),Je&&Je.delete(),S.delete(),A}},h.TextBlob.MakeFromRSXform=function(A,S,B){var q=Fe(A)+1,ge=h._malloc(q);return Ve(A,fe,ge,q),A=Ne(S,"HEAPF32"),B=h.TextBlob._MakeFromRSXform(ge,q-1,A,B),h._free(ge),B||null},h.TextBlob.MakeFromRSXformGlyphs=function(A,S,B){var q=Ne(A,"HEAPU16");return S=Ne(S,"HEAPF32"),B=h.TextBlob._MakeFromRSXformGlyphs(q,2*A.length,S,B),Me(q,A),B||null},h.TextBlob.MakeFromGlyphs=function(A,S){var B=Ne(A,"HEAPU16");return S=h.TextBlob._MakeFromGlyphs(B,2*A.length,S),Me(B,A),S||null},h.TextBlob.MakeFromText=function(A,S){var B=Fe(A)+1,q=h._malloc(B);return Ve(A,fe,q,B),A=h.TextBlob._MakeFromText(q,B-1,S),h._free(q),A||null},h.MallocGlyphIDs=function(A){return h.Malloc(Uint16Array,A)}}),h.Ud=h.Ud||[],h.Ud.push(function(){h.MakePicture=function(A){A=new Uint8Array(A);var S=h._malloc(A.byteLength);return h.HEAPU8.set(A,S),(A=h._MakePicture(S,A.byteLength))?A:null}}),function(){function A(lt){for(var V=0;V<lt.length;V++)if(lt[V]!==void 0&&!Number.isFinite(lt[V]))return!1;return!0}function S(lt){var V=h.getColorComponents(lt);lt=V[0];var he=V[1],Be=V[2];return V=V[3],V===1?(lt=lt.toString(16).toLowerCase(),he=he.toString(16).toLowerCase(),Be=Be.toString(16).toLowerCase(),lt=lt.length===1?"0"+lt:lt,he=he.length===1?"0"+he:he,Be=Be.length===1?"0"+Be:Be,"#"+lt+he+Be):(V=V===0||V===1?V:V.toFixed(8),"rgba("+lt+", "+he+", "+Be+", "+V+")")}function B(lt){return h.parseColorString(lt,Vs)}function q(lt){if(lt=Ws.exec(lt),!lt)return null;var V=parseFloat(lt[4]),he=16;switch(lt[5]){case"em":case"rem":he=16*V;break;case"pt":he=4*V/3;break;case"px":he=V;break;case"pc":he=16*V;break;case"in":he=96*V;break;case"cm":he=96*V/2.54;break;case"mm":he=3.7795275590551185*V;break;case"q":he=.9448818897637796*V;break;case"%":he=.21333333333333335*V}return{style:lt[1],variant:lt[2],weight:lt[3],sizePx:he,family:lt[6].trim()}}function ge(lt){this.Ld=lt,this.Pd=new h.Paint,this.Pd.setAntiAlias(!0),this.Pd.setStrokeMiter(10),this.Pd.setStrokeCap(h.StrokeCap.Butt),this.Pd.setStrokeJoin(h.StrokeJoin.Miter),this.Oe="10px monospace",this.qe=new h.Font(null,10),this.qe.setSubpixel(!0),this.ae=this.ge=h.BLACK,this.te=0,this.He=h.TRANSPARENT,this.ve=this.ue=0,this.Ie=this.ie=1,this.Ge=0,this.se=[],this.Od=h.BlendMode.SrcOver,this.Pd.setStrokeWidth(this.Ie),this.Pd.setBlendMode(this.Od),this.Sd=new h.Path,this.Td=h.Matrix.identity(),this.jf=[],this.ze=[],this.ke=function(){this.Sd.delete(),this.Pd.delete(),this.qe.delete(),this.ze.forEach(function(V){V.ke()})},Object.defineProperty(this,"currentTransform",{enumerable:!0,get:function(){return{a:this.Td[0],c:this.Td[1],e:this.Td[2],b:this.Td[3],d:this.Td[4],f:this.Td[5]}},set:function(V){V.a&&this.setTransform(V.a,V.b,V.c,V.d,V.e,V.f)}}),Object.defineProperty(this,"fillStyle",{enumerable:!0,get:function(){return k(this.ae)?S(this.ae):this.ae},set:function(V){typeof V=="string"?this.ae=B(V):V.re&&(this.ae=V)}}),Object.defineProperty(this,"font",{enumerable:!0,get:function(){return this.Oe},set:function(V){var he=q(V),Be=he.family;he.typeface=_n[Be]?_n[Be][(he.style||"normal")+"|"+(he.variant||"normal")+"|"+(he.weight||"normal")]||_n[Be]["*"]:null,he&&(this.qe.setSize(he.sizePx),this.qe.setTypeface(he.typeface),this.Oe=V)}}),Object.defineProperty(this,"globalAlpha",{enumerable:!0,get:function(){return this.ie},set:function(V){!isFinite(V)||0>V||1<V||(this.ie=V)}}),Object.defineProperty(this,"globalCompositeOperation",{enumerable:!0,get:function(){switch(this.Od){case h.BlendMode.SrcOver:return"source-over";case h.BlendMode.DstOver:return"destination-over";case h.BlendMode.Src:return"copy";case h.BlendMode.Dst:return"destination";case h.BlendMode.Clear:return"clear";case h.BlendMode.SrcIn:return"source-in";case h.BlendMode.DstIn:return"destination-in";case h.BlendMode.SrcOut:return"source-out";case h.BlendMode.DstOut:return"destination-out";case h.BlendMode.SrcATop:return"source-atop";case h.BlendMode.DstATop:return"destination-atop";case h.BlendMode.Xor:return"xor";case h.BlendMode.Plus:return"lighter";case h.BlendMode.Multiply:return"multiply";case h.BlendMode.Screen:return"screen";case h.BlendMode.Overlay:return"overlay";case h.BlendMode.Darken:return"darken";case h.BlendMode.Lighten:return"lighten";case h.BlendMode.ColorDodge:return"color-dodge";case h.BlendMode.ColorBurn:return"color-burn";case h.BlendMode.HardLight:return"hard-light";case h.BlendMode.SoftLight:return"soft-light";case h.BlendMode.Difference:return"difference";case h.BlendMode.Exclusion:return"exclusion";case h.BlendMode.Hue:return"hue";case h.BlendMode.Saturation:return"saturation";case h.BlendMode.Color:return"color";case h.BlendMode.Luminosity:return"luminosity"}},set:function(V){switch(V){case"source-over":this.Od=h.BlendMode.SrcOver;break;case"destination-over":this.Od=h.BlendMode.DstOver;break;case"copy":this.Od=h.BlendMode.Src;break;case"destination":this.Od=h.BlendMode.Dst;break;case"clear":this.Od=h.BlendMode.Clear;break;case"source-in":this.Od=h.BlendMode.SrcIn;break;case"destination-in":this.Od=h.BlendMode.DstIn;break;case"source-out":this.Od=h.BlendMode.SrcOut;break;case"destination-out":this.Od=h.BlendMode.DstOut;break;case"source-atop":this.Od=h.BlendMode.SrcATop;break;case"destination-atop":this.Od=h.BlendMode.DstATop;break;case"xor":this.Od=h.BlendMode.Xor;break;case"lighter":this.Od=h.BlendMode.Plus;break;case"plus-lighter":this.Od=h.BlendMode.Plus;break;case"plus-darker":throw"plus-darker is not supported";case"multiply":this.Od=h.BlendMode.Multiply;break;case"screen":this.Od=h.BlendMode.Screen;break;case"overlay":this.Od=h.BlendMode.Overlay;break;case"darken":this.Od=h.BlendMode.Darken;break;case"lighten":this.Od=h.BlendMode.Lighten;break;case"color-dodge":this.Od=h.BlendMode.ColorDodge;break;case"color-burn":this.Od=h.BlendMode.ColorBurn;break;case"hard-light":this.Od=h.BlendMode.HardLight;break;case"soft-light":this.Od=h.BlendMode.SoftLight;break;case"difference":this.Od=h.BlendMode.Difference;break;case"exclusion":this.Od=h.BlendMode.Exclusion;break;case"hue":this.Od=h.BlendMode.Hue;break;case"saturation":this.Od=h.BlendMode.Saturation;break;case"color":this.Od=h.BlendMode.Color;break;case"luminosity":this.Od=h.BlendMode.Luminosity;break;default:return}this.Pd.setBlendMode(this.Od)}}),Object.defineProperty(this,"imageSmoothingEnabled",{enumerable:!0,get:function(){return!0},set:function(){}}),Object.defineProperty(this,"imageSmoothingQuality",{enumerable:!0,get:function(){return"high"},set:function(){}}),Object.defineProperty(this,"lineCap",{enumerable:!0,get:function(){switch(this.Pd.getStrokeCap()){case h.StrokeCap.Butt:return"butt";case h.StrokeCap.Round:return"round";case h.StrokeCap.Square:return"square"}},set:function(V){switch(V){case"butt":this.Pd.setStrokeCap(h.StrokeCap.Butt);break;case"round":this.Pd.setStrokeCap(h.StrokeCap.Round);break;case"square":this.Pd.setStrokeCap(h.StrokeCap.Square)}}}),Object.defineProperty(this,"lineDashOffset",{enumerable:!0,get:function(){return this.Ge},set:function(V){isFinite(V)&&(this.Ge=V)}}),Object.defineProperty(this,"lineJoin",{enumerable:!0,get:function(){switch(this.Pd.getStrokeJoin()){case h.StrokeJoin.Miter:return"miter";case h.StrokeJoin.Round:return"round";case h.StrokeJoin.Bevel:return"bevel"}},set:function(V){switch(V){case"miter":this.Pd.setStrokeJoin(h.StrokeJoin.Miter);break;case"round":this.Pd.setStrokeJoin(h.StrokeJoin.Round);break;case"bevel":this.Pd.setStrokeJoin(h.StrokeJoin.Bevel)}}}),Object.defineProperty(this,"lineWidth",{enumerable:!0,get:function(){return this.Pd.getStrokeWidth()},set:function(V){0>=V||!V||(this.Ie=V,this.Pd.setStrokeWidth(V))}}),Object.defineProperty(this,"miterLimit",{enumerable:!0,get:function(){return this.Pd.getStrokeMiter()},set:function(V){0>=V||!V||this.Pd.setStrokeMiter(V)}}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,get:function(){return this.te},set:function(V){0>V||!isFinite(V)||(this.te=V)}}),Object.defineProperty(this,"shadowColor",{enumerable:!0,get:function(){return S(this.He)},set:function(V){this.He=B(V)}}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,get:function(){return this.ue},set:function(V){isFinite(V)&&(this.ue=V)}}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,get:function(){return this.ve},set:function(V){isFinite(V)&&(this.ve=V)}}),Object.defineProperty(this,"strokeStyle",{enumerable:!0,get:function(){return S(this.ge)},set:function(V){typeof V=="string"?this.ge=B(V):V.re&&(this.ge=V)}}),this.arc=function(V,he,Be,We,Ze,at){Ae(this.Sd,V,he,Be,Be,0,We,Ze,at)},this.arcTo=function(V,he,Be,We,Ze){Ct(this.Sd,V,he,Be,We,Ze)},this.beginPath=function(){this.Sd.delete(),this.Sd=new h.Path},this.bezierCurveTo=function(V,he,Be,We,Ze,at){var Pt=this.Sd;A([V,he,Be,We,Ze,at])&&(Pt.isEmpty()&&Pt.moveTo(V,he),Pt.cubicTo(V,he,Be,We,Ze,at))},this.clearRect=function(V,he,Be,We){this.Pd.setStyle(h.PaintStyle.Fill),this.Pd.setBlendMode(h.BlendMode.Clear),this.Ld.drawRect(h.XYWHRect(V,he,Be,We),this.Pd),this.Pd.setBlendMode(this.Od)},this.clip=function(V,he){typeof V=="string"?(he=V,V=this.Sd):V&&V.Ze&&(V=V.Vd),V||(V=this.Sd),V=V.copy(),he&&he.toLowerCase()==="evenodd"?V.setFillType(h.FillType.EvenOdd):V.setFillType(h.FillType.Winding),this.Ld.clipPath(V,h.ClipOp.Intersect,!0),V.delete()},this.closePath=function(){Gt(this.Sd)},this.createImageData=function(){if(arguments.length===1){var V=arguments[0];return new Je(new Uint8ClampedArray(4*V.width*V.height),V.width,V.height)}if(arguments.length===2){V=arguments[0];var he=arguments[1];return new Je(new Uint8ClampedArray(4*V*he),V,he)}throw"createImageData expects 1 or 2 arguments, got "+arguments.length},this.createLinearGradient=function(V,he,Be,We){if(A(arguments)){var Ze=new vt(V,he,Be,We);return this.ze.push(Ze),Ze}},this.createPattern=function(V,he){return V=new br(V,he),this.ze.push(V),V},this.createRadialGradient=function(V,he,Be,We,Ze,at){if(A(arguments)){var Pt=new fn(V,he,Be,We,Ze,at);return this.ze.push(Pt),Pt}},this.drawImage=function(V){var he=this.Ne();if(arguments.length===3||arguments.length===5)var Be=h.XYWHRect(arguments[1],arguments[2],arguments[3]||V.width(),arguments[4]||V.height()),We=h.XYWHRect(0,0,V.width(),V.height());else if(arguments.length===9)Be=h.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),We=h.XYWHRect(arguments[1],arguments[2],arguments[3],arguments[4]);else throw"invalid number of args for drawImage, need 3, 5, or 9; got "+arguments.length;this.Ld.drawImageRect(V,We,Be,he,!1),he.dispose()},this.ellipse=function(V,he,Be,We,Ze,at,Pt,xr){Ae(this.Sd,V,he,Be,We,Ze,at,Pt,xr)},this.Ne=function(){var V=this.Pd.copy();if(V.setStyle(h.PaintStyle.Fill),k(this.ae)){var he=h.multiplyByAlpha(this.ae,this.ie);V.setColor(he)}else he=this.ae.re(this.Td),V.setColor(h.Color(0,0,0,this.ie)),V.setShader(he);return V.dispose=function(){this.delete()},V},this.fill=function(V,he){if(typeof V=="string"?(he=V,V=this.Sd):V&&V.Ze&&(V=V.Vd),he==="evenodd")this.Sd.setFillType(h.FillType.EvenOdd);else{if(he!=="nonzero"&&he)throw"invalid fill rule";this.Sd.setFillType(h.FillType.Winding)}V||(V=this.Sd),he=this.Ne();var Be=this.we(he);Be&&(this.Ld.save(),this.oe(),this.Ld.drawPath(V,Be),this.Ld.restore(),Be.dispose()),this.Ld.drawPath(V,he),he.dispose()},this.fillRect=function(V,he,Be,We){var Ze=this.Ne(),at=this.we(Ze);at&&(this.Ld.save(),this.oe(),this.Ld.drawRect(h.XYWHRect(V,he,Be,We),at),this.Ld.restore(),at.dispose()),this.Ld.drawRect(h.XYWHRect(V,he,Be,We),Ze),Ze.dispose()},this.fillText=function(V,he,Be){var We=this.Ne();V=h.TextBlob.MakeFromText(V,this.qe);var Ze=this.we(We);Ze&&(this.Ld.save(),this.oe(),this.Ld.drawTextBlob(V,he,Be,Ze),this.Ld.restore(),Ze.dispose()),this.Ld.drawTextBlob(V,he,Be,We),V.delete(),We.dispose()},this.getImageData=function(V,he,Be,We){return(V=this.Ld.readPixels(V,he,{width:Be,height:We,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB}))?new Je(new Uint8ClampedArray(V.buffer),Be,We):null},this.getLineDash=function(){return this.se.slice()},this.kf=function(V){var he=h.Matrix.invert(this.Td);return h.Matrix.mapPoints(he,V),V},this.isPointInPath=function(V,he,Be){var We=arguments;if(We.length===3)var Ze=this.Sd;else if(We.length===4)Ze=We[0],V=We[1],he=We[2],Be=We[3];else throw"invalid arg count, need 3 or 4, got "+We.length;return!isFinite(V)||!isFinite(he)||(Be=Be||"nonzero",Be!=="nonzero"&&Be!=="evenodd")?!1:(We=this.kf([V,he]),V=We[0],he=We[1],Ze.setFillType(Be==="nonzero"?h.FillType.Winding:h.FillType.EvenOdd),Ze.contains(V,he))},this.isPointInStroke=function(V,he){var Be=arguments;if(Be.length===2)var We=this.Sd;else if(Be.length===3)We=Be[0],V=Be[1],he=Be[2];else throw"invalid arg count, need 2 or 3, got "+Be.length;return!isFinite(V)||!isFinite(he)?!1:(Be=this.kf([V,he]),V=Be[0],he=Be[1],We=We.copy(),We.setFillType(h.FillType.Winding),We.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.Pd.getStrokeCap(),join:this.Pd.getStrokeJoin(),precision:.3}),Be=We.contains(V,he),We.delete(),Be)},this.lineTo=function(V,he){ft(this.Sd,V,he)},this.measureText=function(){throw Error("Clients wishing to properly measure text should use the Paragraph API")},this.moveTo=function(V,he){var Be=this.Sd;A([V,he])&&Be.moveTo(V,he)},this.putImageData=function(V,he,Be,We,Ze,at,Pt){if(A([he,Be,We,Ze,at,Pt])){if(We===void 0)this.Ld.writePixels(V.data,V.width,V.height,he,Be);else if(We=We||0,Ze=Ze||0,at=at||V.width,Pt=Pt||V.height,0>at&&(We+=at,at=Math.abs(at)),0>Pt&&(Ze+=Pt,Pt=Math.abs(Pt)),0>We&&(at+=We,We=0),0>Ze&&(Pt+=Ze,Ze=0),!(0>=at||0>=Pt)){V=h.MakeImage({width:V.width,height:V.height,alphaType:h.AlphaType.Unpremul,colorType:h.ColorType.RGBA_8888,colorSpace:h.ColorSpace.SRGB},V.data,4*V.width);var xr=h.XYWHRect(We,Ze,at,Pt);he=h.XYWHRect(he+We,Be+Ze,at,Pt),Be=h.Matrix.invert(this.Td),this.Ld.save(),this.Ld.concat(Be),this.Ld.drawImageRect(V,xr,he,null,!1),this.Ld.restore(),V.delete()}}},this.quadraticCurveTo=function(V,he,Be,We){var Ze=this.Sd;A([V,he,Be,We])&&(Ze.isEmpty()&&Ze.moveTo(V,he),Ze.quadTo(V,he,Be,We))},this.rect=function(V,he,Be,We){var Ze=this.Sd;V=h.XYWHRect(V,he,Be,We),A(V)&&Ze.addRect(V)},this.resetTransform=function(){this.Sd.transform(this.Td);var V=h.Matrix.invert(this.Td);this.Ld.concat(V),this.Td=this.Ld.getTotalMatrix()},this.restore=function(){var V=this.jf.pop();if(V){var he=h.Matrix.multiply(this.Td,h.Matrix.invert(V.Cf));this.Sd.transform(he),this.Pd.delete(),this.Pd=V.$f,this.se=V.Wf,this.Ie=V.rg,this.ge=V.qg,this.ae=V.fs,this.ue=V.og,this.ve=V.pg,this.te=V.dg,this.He=V.ng,this.ie=V.Jf,this.Od=V.Kf,this.Ge=V.Xf,this.Oe=V.If,this.Ld.restore(),this.Td=this.Ld.getTotalMatrix()}},this.rotate=function(V){if(isFinite(V)){var he=h.Matrix.rotated(-V);this.Sd.transform(he),this.Ld.rotate(V/Math.PI*180,0,0),this.Td=this.Ld.getTotalMatrix()}},this.save=function(){if(this.ae.pe){var V=this.ae.pe();this.ze.push(V)}else V=this.ae;if(this.ge.pe){var he=this.ge.pe();this.ze.push(he)}else he=this.ge;this.jf.push({Cf:this.Td.slice(),Wf:this.se.slice(),rg:this.Ie,qg:he,fs:V,og:this.ue,pg:this.ve,dg:this.te,ng:this.He,Jf:this.ie,Xf:this.Ge,Kf:this.Od,$f:this.Pd.copy(),If:this.Oe}),this.Ld.save()},this.scale=function(V,he){if(A(arguments)){var Be=h.Matrix.scaled(1/V,1/he);this.Sd.transform(Be),this.Ld.scale(V,he),this.Td=this.Ld.getTotalMatrix()}},this.setLineDash=function(V){for(var he=0;he<V.length;he++)if(!isFinite(V[he])||0>V[he])return;V.length%2===1&&Array.prototype.push.apply(V,V),this.se=V},this.setTransform=function(V,he,Be,We,Ze,at){A(arguments)&&(this.resetTransform(),this.transform(V,he,Be,We,Ze,at))},this.oe=function(){var V=h.Matrix.invert(this.Td);this.Ld.concat(V),this.Ld.concat(h.Matrix.translated(this.ue,this.ve)),this.Ld.concat(this.Td)},this.we=function(V){var he=h.multiplyByAlpha(this.He,this.ie);if(!h.getColorComponents(he)[3]||!(this.te||this.ve||this.ue))return null;V=V.copy(),V.setColor(he);var Be=h.MaskFilter.MakeBlur(h.BlurStyle.Normal,this.te/2,!1);return V.setMaskFilter(Be),V.dispose=function(){Be.delete(),this.delete()},V},this.af=function(){var V=this.Pd.copy();if(V.setStyle(h.PaintStyle.Stroke),k(this.ge)){var he=h.multiplyByAlpha(this.ge,this.ie);V.setColor(he)}else he=this.ge.re(this.Td),V.setColor(h.Color(0,0,0,this.ie)),V.setShader(he);if(V.setStrokeWidth(this.Ie),this.se.length){var Be=h.PathEffect.MakeDash(this.se,this.Ge);V.setPathEffect(Be)}return V.dispose=function(){Be&&Be.delete(),this.delete()},V},this.stroke=function(V){V=V?V.Vd:this.Sd;var he=this.af(),Be=this.we(he);Be&&(this.Ld.save(),this.oe(),this.Ld.drawPath(V,Be),this.Ld.restore(),Be.dispose()),this.Ld.drawPath(V,he),he.dispose()},this.strokeRect=function(V,he,Be,We){var Ze=this.af(),at=this.we(Ze);at&&(this.Ld.save(),this.oe(),this.Ld.drawRect(h.XYWHRect(V,he,Be,We),at),this.Ld.restore(),at.dispose()),this.Ld.drawRect(h.XYWHRect(V,he,Be,We),Ze),Ze.dispose()},this.strokeText=function(V,he,Be){var We=this.af();V=h.TextBlob.MakeFromText(V,this.qe);var Ze=this.we(We);Ze&&(this.Ld.save(),this.oe(),this.Ld.drawTextBlob(V,he,Be,Ze),this.Ld.restore(),Ze.dispose()),this.Ld.drawTextBlob(V,he,Be,We),V.delete(),We.dispose()},this.translate=function(V,he){if(A(arguments)){var Be=h.Matrix.translated(-V,-he);this.Sd.transform(Be),this.Ld.translate(V,he),this.Td=this.Ld.getTotalMatrix()}},this.transform=function(V,he,Be,We,Ze,at){V=[V,Be,Ze,he,We,at,0,0,1],he=h.Matrix.invert(V),this.Sd.transform(he),this.Ld.concat(V),this.Td=this.Ld.getTotalMatrix()},this.addHitRegion=function(){},this.clearHitRegions=function(){},this.drawFocusIfNeeded=function(){},this.removeHitRegion=function(){},this.scrollPathIntoView=function(){},Object.defineProperty(this,"canvas",{value:null,writable:!1})}function Oe(lt){this.bf=lt,this.Md=new ge(lt.getCanvas()),this.Pe=[],this.vf=h.FontMgr.RefDefault(),this.decodeImage=function(V){if(V=h.MakeImageFromEncoded(V),!V)throw"Invalid input";return this.Pe.push(V),V},this.loadFont=function(V,he){if(V=this.vf.MakeTypefaceFromData(V),!V)return null;this.Pe.push(V);var Be=(he.style||"normal")+"|"+(he.variant||"normal")+"|"+(he.weight||"normal");he=he.family,_n[he]||(_n[he]={"*":V}),_n[he][Be]=V},this.makePath2D=function(V){return V=new Vt(V),this.Pe.push(V.Vd),V},this.getContext=function(V){return V==="2d"?this.Md:null},this.toDataURL=function(V,he){this.bf.flush();var Be=this.bf.makeImageSnapshot();if(Be){V=V||"image/png";var We=h.ImageFormat.PNG;if(V==="image/jpeg"&&(We=h.ImageFormat.JPEG),he=Be.encodeToBytes(We,he||.92)){if(Be.delete(),V="data:"+V+";base64,",typeof Buffer<"u")he=Buffer.from(he).toString("base64");else{Be=0,We=he.length;for(var Ze="",at;Be<We;)at=he.slice(Be,Math.min(Be+32768,We)),Ze+=String.fromCharCode.apply(null,at),Be+=32768;he=btoa(Ze)}return V+he}}},this.dispose=function(){this.Md.ke(),this.Pe.forEach(function(V){V.delete()}),this.bf.dispose()}}function Je(lt,V,he){if(!V||he===0)throw"invalid dimensions, width and height must be non-zero";if(lt.length%4)throw"arr must be a multiple of 4";he=he||lt.length/(4*V),Object.defineProperty(this,"data",{value:lt,writable:!1}),Object.defineProperty(this,"height",{value:he,writable:!1}),Object.defineProperty(this,"width",{value:V,writable:!1})}function vt(lt,V,he,Be){this.Xd=null,this.de=[],this.Zd=[],this.addColorStop=function(We,Ze){if(0>We||1<We||!isFinite(We))throw"offset must be between 0 and 1 inclusively";Ze=B(Ze);var at=this.Zd.indexOf(We);if(at!==-1)this.de[at]=Ze;else{for(at=0;at<this.Zd.length&&!(this.Zd[at]>We);at++);this.Zd.splice(at,0,We),this.de.splice(at,0,Ze)}},this.pe=function(){var We=new vt(lt,V,he,Be);return We.de=this.de.slice(),We.Zd=this.Zd.slice(),We},this.ke=function(){this.Xd&&(this.Xd.delete(),this.Xd=null)},this.re=function(We){var Ze=[lt,V,he,Be];h.Matrix.mapPoints(We,Ze),We=Ze[0];var at=Ze[1],Pt=Ze[2];return Ze=Ze[3],this.ke(),this.Xd=h.Shader.MakeLinearGradient([We,at],[Pt,Ze],this.de,this.Zd,h.TileMode.Clamp)}}function Ct(lt,V,he,Be,We,Ze){if(A([V,he,Be,We,Ze])){if(0>Ze)throw"radii cannot be negative";lt.isEmpty()&&lt.moveTo(V,he),lt.arcToTangent(V,he,Be,We,Ze)}}function Gt(lt){if(!lt.isEmpty()){var V=lt.getBounds();(V[3]-V[1]||V[2]-V[0])&&lt.close()}}function ur(lt,V,he,Be,We,Ze,at){at=(at-Ze)/Math.PI*180,Ze=Ze/Math.PI*180,V=h.LTRBRect(V-Be,he-We,V+Be,he+We),1e-5>Math.abs(Math.abs(at)-360)?(he=at/2,lt.arcToOval(V,Ze,he,!1),lt.arcToOval(V,Ze+he,he,!1)):lt.arcToOval(V,Ze,at,!1)}function Ae(lt,V,he,Be,We,Ze,at,Pt,xr){if(A([V,he,Be,We,Ze,at,Pt])){if(0>Be||0>We)throw"radii cannot be negative";var Mn=2*Math.PI,ui=at%Mn;0>ui&&(ui+=Mn);var Va=ui-at;at=ui,Pt+=Va,!xr&&Pt-at>=Mn?Pt=at+Mn:xr&&at-Pt>=Mn?Pt=at-Mn:!xr&&at>Pt?Pt=at+(Mn-(at-Pt)%Mn):xr&&at<Pt&&(Pt=at-(Mn-(Pt-at)%Mn)),Ze?(xr=h.Matrix.rotated(Ze,V,he),Ze=h.Matrix.rotated(-Ze,V,he),lt.transform(Ze),ur(lt,V,he,Be,We,at,Pt),lt.transform(xr)):ur(lt,V,he,Be,We,at,Pt)}}function ft(lt,V,he){A([V,he])&&(lt.isEmpty()&&lt.moveTo(V,he),lt.lineTo(V,he))}function Vt(lt){this.Vd=null,this.Vd=typeof lt=="string"?h.Path.MakeFromSVGString(lt):lt&&lt.Ze?lt.Vd.copy():new h.Path,this.Ze=function(){return this.Vd},this.addPath=function(V,he){he||(he={a:1,c:0,e:0,b:0,d:1,f:0}),this.Vd.addPath(V.Vd,[he.a,he.c,he.e,he.b,he.d,he.f])},this.arc=function(V,he,Be,We,Ze,at){Ae(this.Vd,V,he,Be,Be,0,We,Ze,at)},this.arcTo=function(V,he,Be,We,Ze){Ct(this.Vd,V,he,Be,We,Ze)},this.bezierCurveTo=function(V,he,Be,We,Ze,at){var Pt=this.Vd;A([V,he,Be,We,Ze,at])&&(Pt.isEmpty()&&Pt.moveTo(V,he),Pt.cubicTo(V,he,Be,We,Ze,at))},this.closePath=function(){Gt(this.Vd)},this.ellipse=function(V,he,Be,We,Ze,at,Pt,xr){Ae(this.Vd,V,he,Be,We,Ze,at,Pt,xr)},this.lineTo=function(V,he){ft(this.Vd,V,he)},this.moveTo=function(V,he){var Be=this.Vd;A([V,he])&&Be.moveTo(V,he)},this.quadraticCurveTo=function(V,he,Be,We){var Ze=this.Vd;A([V,he,Be,We])&&(Ze.isEmpty()&&Ze.moveTo(V,he),Ze.quadTo(V,he,Be,We))},this.rect=function(V,he,Be,We){var Ze=this.Vd;V=h.XYWHRect(V,he,Be,We),A(V)&&Ze.addRect(V)}}function br(lt,V){switch(this.Xd=null,this.xf=lt,this._transform=h.Matrix.identity(),V===""&&(V="repeat"),V){case"repeat-x":this.xe=h.TileMode.Repeat,this.ye=h.TileMode.Decal;break;case"repeat-y":this.xe=h.TileMode.Decal,this.ye=h.TileMode.Repeat;break;case"repeat":this.ye=this.xe=h.TileMode.Repeat;break;case"no-repeat":this.ye=this.xe=h.TileMode.Decal;break;default:throw"invalid repetition mode "+V}this.setTransform=function(he){he=[he.a,he.c,he.e,he.b,he.d,he.f,0,0,1],A(he)&&(this._transform=he)},this.pe=function(){var he=new br;return he.xe=this.xe,he.ye=this.ye,he},this.ke=function(){this.Xd&&(this.Xd.delete(),this.Xd=null)},this.re=function(){return this.ke(),this.Xd=this.xf.makeShaderCubic(this.xe,this.ye,.3333333333333333,.3333333333333333,this._transform)}}function fn(lt,V,he,Be,We,Ze){this.Xd=null,this.de=[],this.Zd=[],this.addColorStop=function(at,Pt){if(0>at||1<at||!isFinite(at))throw"offset must be between 0 and 1 inclusively";Pt=B(Pt);var xr=this.Zd.indexOf(at);if(xr!==-1)this.de[xr]=Pt;else{for(xr=0;xr<this.Zd.length&&!(this.Zd[xr]>at);xr++);this.Zd.splice(xr,0,at),this.de.splice(xr,0,Pt)}},this.pe=function(){var at=new fn(lt,V,he,Be,We,Ze);return at.de=this.de.slice(),at.Zd=this.Zd.slice(),at},this.ke=function(){this.Xd&&(this.Xd.delete(),this.Xd=null)},this.re=function(at){var Pt=[lt,V,Be,We];h.Matrix.mapPoints(at,Pt);var xr=Pt[0],Mn=Pt[1],ui=Pt[2];Pt=Pt[3];var Va=(Math.abs(at[0])+Math.abs(at[4]))/2;return at=he*Va,Va*=Ze,this.ke(),this.Xd=h.Shader.MakeTwoPointConicalGradient([xr,Mn],at,[ui,Pt],Va,this.de,this.Zd,h.TileMode.Clamp)}}h._testing={};var Vs={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),lightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};h._testing.parseColor=B,h._testing.colorToString=S;var Ws=/(italic|oblique|normal|)\s*(small-caps|normal|)\s*(bold|bolder|lighter|[1-9]00|normal|)\s*([\d\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)/,_n={"Noto Mono":{"*":null},monospace:{"*":null}};h._testing.parseFontString=q,h.MakeCanvas=function(lt,V){return(lt=h.MakeSurface(lt,V))?new Oe(lt):null},h.ImageData=function(){if(arguments.length===2){var lt=arguments[0],V=arguments[1];return new Je(new Uint8ClampedArray(4*lt*V),lt,V)}if(arguments.length===3){var he=arguments[0];if(he.prototype.constructor!==Uint8ClampedArray)throw"bytes must be given as a Uint8ClampedArray";if(lt=arguments[1],V=arguments[2],he%4)throw"bytes must be given in a multiple of 4";if(he%lt)throw"bytes must divide evenly by width";if(V&&V!==he/(4*lt))throw"invalid height given";return new Je(he,lt,he/(4*lt))}throw"invalid number of arguments - takes 2 or 3, saw "+arguments.length}}()}(n);var l={},c;for(c in n)n.hasOwnProperty(c)&&(l[c]=n[c]);var d="./this.program";function f(h,m){throw m}var g=!1,x=!1,E=!1,P=!1;g=typeof window=="object",x=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",P=!g&&!E&&!x;var b="",D,C,O,N,j;E?(b=x?gc.dirname(b)+"/":__dirname+"/",D=function(h,m){return N||(N=gc),j||(j=gc),h=j.normalize(h),N.readFileSync(h,m?null:"utf8")},O=function(h){return h=D(h,!0),h.buffer||(h=new Uint8Array(h)),ae(h.buffer),h},1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(h){if(!(h instanceof Qg))throw h}),process.on("unhandledRejection",Ye),f=function(h){process.exit(h)},n.inspect=function(){return"[Emscripten Module object]"}):P?(typeof read<"u"&&(D=function(h){return read(h)}),O=function(h){return typeof readbuffer=="function"?new Uint8Array(readbuffer(h)):(h=read(h,"binary"),ae(typeof h=="object"),h)},typeof quit=="function"&&(f=function(h){quit(h)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(g||x)&&(x?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),i&&(b=i),b.indexOf("blob:")!==0?b=b.substr(0,b.lastIndexOf("/")+1):b="",D=function(h){var m=new XMLHttpRequest;return m.open("GET",h,!1),m.send(null),m.responseText},x&&(O=function(h){var m=new XMLHttpRequest;return m.open("GET",h,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),C=function(h,m,v){var k=new XMLHttpRequest;k.open("GET",h,!0),k.responseType="arraybuffer",k.onload=function(){k.status==200||k.status==0&&k.response?m(k.response):v()},k.onerror=v,k.send(null)});var I=n.print||console.log.bind(console),M=n.printErr||console.warn.bind(console);for(c in l)l.hasOwnProperty(c)&&(n[c]=l[c]);l=null,n.thisProgram&&(d=n.thisProgram),n.quit&&(f=n.quit);var R=0,L;n.wasmBinary&&(L=n.wasmBinary);var K=n.noExitRuntime||!0;typeof WebAssembly!="object"&&Ye("no native wasm support detected");var Q,ue=!1;function ae(h,m){h||Ye("Assertion failed: "+m)}var Re=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ue(h,m,v){var k=m+v;for(v=m;h[v]&&!(v>=k);)++v;if(16<v-m&&h.subarray&&Re)return Re.decode(h.subarray(m,v));for(k="";m<v;){var G=h[m++];if(G&128){var Y=h[m++]&63;if((G&224)==192)k+=String.fromCharCode((G&31)<<6|Y);else{var ve=h[m++]&63;G=(G&240)==224?(G&15)<<12|Y<<6|ve:(G&7)<<18|Y<<12|ve<<6|h[m++]&63,65536>G?k+=String.fromCharCode(G):(G-=65536,k+=String.fromCharCode(55296|G>>10,56320|G&1023))}}else k+=String.fromCharCode(G)}return k}function rt(h,m){return h?Ue(fe,h,m):""}function Ve(h,m,v,k){if(!(0<k))return 0;var G=v;k=v+k-1;for(var Y=0;Y<h.length;++Y){var ve=h.charCodeAt(Y);if(55296<=ve&&57343>=ve){var be=h.charCodeAt(++Y);ve=65536+((ve&1023)<<10)|be&1023}if(127>=ve){if(v>=k)break;m[v++]=ve}else{if(2047>=ve){if(v+1>=k)break;m[v++]=192|ve>>6}else{if(65535>=ve){if(v+2>=k)break;m[v++]=224|ve>>12}else{if(v+3>=k)break;m[v++]=240|ve>>18,m[v++]=128|ve>>12&63}m[v++]=128|ve>>6&63}m[v++]=128|ve&63}}return m[v]=0,v-G}function Fe(h){for(var m=0,v=0;v<h.length;++v){var k=h.charCodeAt(v);55296<=k&&57343>=k&&(k=65536+((k&1023)<<10)|h.charCodeAt(++v)&1023),127>=k?++m:m=2047>=k?m+2:65535>=k?m+3:m+4}return m}var nt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function dt(h,m){for(var v=h>>1,k=v+m/2;!(v>=k)&&He[v];)++v;if(v<<=1,32<v-h&&nt)return nt.decode(fe.subarray(h,v));for(v="",k=0;!(k>=m/2);++k){var G=Pe[h+2*k>>1];if(G==0)break;v+=String.fromCharCode(G)}return v}function it(h,m,v){if(v===void 0&&(v=2147483647),2>v)return 0;v-=2;var k=m;v=v<2*h.length?v/2:h.length;for(var G=0;G<v;++G)Pe[m>>1]=h.charCodeAt(G),m+=2;return Pe[m>>1]=0,m-k}function bt(h){return 2*h.length}function ee(h,m){for(var v=0,k="";!(v>=m/4);){var G=Z[h+4*v>>2];if(G==0)break;++v,65536<=G?(G-=65536,k+=String.fromCharCode(55296|G>>10,56320|G&1023)):k+=String.fromCharCode(G)}return k}function ne(h,m,v){if(v===void 0&&(v=2147483647),4>v)return 0;var k=m;v=k+v-4;for(var G=0;G<h.length;++G){var Y=h.charCodeAt(G);if(55296<=Y&&57343>=Y){var ve=h.charCodeAt(++G);Y=65536+((Y&1023)<<10)|ve&1023}if(Z[m>>2]=Y,m+=4,m+4>v)break}return Z[m>>2]=0,m-k}function se(h){for(var m=0,v=0;v<h.length;++v){var k=h.charCodeAt(v);55296<=k&&57343>=k&&++v,m+=4}return m}var Ee,Se,fe,Pe,He,Z,Le,F,z;function W(){var h=Q.buffer;Ee=h,n.HEAP8=Se=new Int8Array(h),n.HEAP16=Pe=new Int16Array(h),n.HEAP32=Z=new Int32Array(h),n.HEAPU8=fe=new Uint8Array(h),n.HEAPU16=He=new Uint16Array(h),n.HEAPU32=Le=new Uint32Array(h),n.HEAPF32=F=new Float32Array(h),n.HEAPF64=z=new Float64Array(h)}var te,de=[],ye=[],oe=[];function le(){var h=n.preRun.shift();de.unshift(h)}var we=0,De=null;n.preloadedImages={},n.preloadedAudios={};function Ye(h){throw n.onAbort&&n.onAbort(h),M(h),ue=!0,h=new WebAssembly.RuntimeError("abort("+h+"). Build with -s ASSERTIONS=1 for more info."),a(h),h}function $e(){return Qe.startsWith("data:application/octet-stream;base64,")}var Qe="canvaskit.wasm";if(!$e()){var Ke=Qe;Qe=n.locateFile?n.locateFile(Ke,b):b+Ke}function tt(){var h=Qe;try{if(h==Qe&&L)return new Uint8Array(L);if(O)return O(h);throw"both async and sync fetching of the wasm failed"}catch(m){Ye(m)}}function _t(){if(!L&&(g||x)){if(typeof fetch=="function"&&!Qe.startsWith("file://"))return fetch(Qe,{credentials:"same-origin"}).then(function(h){if(!h.ok)throw"failed to load wasm binary file at '"+Qe+"'";return h.arrayBuffer()}).catch(function(){return tt()});if(C)return new Promise(function(h,m){C(Qe,function(v){h(new Uint8Array(v))},m)})}return Promise.resolve().then(function(){return tt()})}function st(h){for(;0<h.length;){var m=h.shift();if(typeof m=="function")m(n);else{var v=m.Ag;typeof v=="number"?m.cf===void 0?te.get(v)():te.get(v)(m.cf):v(m.cf===void 0?null:m.cf)}}}function St(h){this.Qd=h-16,this.ig=function(m){Z[this.Qd+8>>2]=m},this.fg=function(m){Z[this.Qd+0>>2]=m},this.gg=function(){Z[this.Qd+4>>2]=0},this.eg=function(){Se[this.Qd+12>>0]=0},this.hg=function(){Se[this.Qd+13>>0]=0},this.Tf=function(m,v){this.ig(m),this.fg(v),this.gg(),this.eg(),this.hg()}}var Ot={},Rt=[null,[],[]],Mt={},Ie={};function gt(h){for(;h.length;){var m=h.pop();h.pop()(m)}}function mt(h){return this.fromWireType(Le[h>>2])}var Et={},Ht={},li={};function Er(h){if(h===void 0)return"_unknown";h=h.replace(/[^a-zA-Z0-9_]/g,"$");var m=h.charCodeAt(0);return 48<=m&&57>=m?"_"+h:h}function mr(h,m){return h=Er(h),new Function("body","return function "+h+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(m)}function xi(h){var m=Error,v=mr(h,function(k){this.name=h,this.message=k,k=Error(k).stack,k!==void 0&&(this.stack=this.toString()+`
`+k.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},v}var ps=void 0;function cn(h){throw new ps(h)}function Mr(h,m,v){function k(be){be=v(be),be.length!==h.length&&cn("Mismatched type converter count");for(var Me=0;Me<h.length;++Me)Vi(h[Me],be[Me])}h.forEach(function(be){li[be]=m});var G=Array(m.length),Y=[],ve=0;m.forEach(function(be,Me){Ht.hasOwnProperty(be)?G[Me]=Ht[be]:(Y.push(be),Et.hasOwnProperty(be)||(Et[be]=[]),Et[be].push(function(){G[Me]=Ht[be],++ve,ve===Y.length&&k(G)}))}),Y.length===0&&k(G)}function Di(h){switch(h){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+h)}}var Zn=void 0;function fr(h){for(var m="";fe[h];)m+=Zn[fe[h++]];return m}var ho=void 0;function Yt(h){throw new ho(h)}function Vi(h,m,v){if(v=v||{},!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");var k=m.name;if(h||Yt('type "'+k+'" must have a positive integer typeid pointer'),Ht.hasOwnProperty(h)){if(v.Sf)return;Yt("Cannot register type '"+k+"' twice")}Ht[h]=m,delete li[h],Et.hasOwnProperty(h)&&(m=Et[h],delete Et[h],m.forEach(function(G){G()}))}function re(h){Yt(h.Kd.Wd.Rd.name+" instance already deleted")}var zo=!1;function Hu(){}function Tl(h){--h.count.value,h.count.value===0&&(h.ce?h.fe.je(h.ce):h.Wd.Rd.je(h.Qd))}function Ho(h){return typeof FinalizationGroup>"u"?(Ho=function(m){return m},h):(zo=new FinalizationGroup(function(m){for(var v=m.next();!v.done;v=m.next())v=v.value,v.Qd?Tl(v):console.warn("object already deleted: "+v.Qd)}),Ho=function(m){return zo.register(m,m.Kd,m.Kd),m},Hu=function(m){zo.unregister(m.Kd)},Ho(h))}var fo=void 0,Ut=[];function hn(){for(;Ut.length;){var h=Ut.pop();h.Kd.Ce=!1,h.delete()}}function Wi(){}var Pl={};function jo(h,m,v){if(h[m].Yd===void 0){var k=h[m];h[m]=function(){return h[m].Yd.hasOwnProperty(arguments.length)||Yt("Function '"+v+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+h[m].Yd+")!"),h[m].Yd[arguments.length].apply(this,arguments)},h[m].Yd=[],h[m].Yd[k.Ae]=k}}function wr(h,m,v){n.hasOwnProperty(h)?((v===void 0||n[h].Yd!==void 0&&n[h].Yd[v]!==void 0)&&Yt("Cannot register public name '"+h+"' twice"),jo(n,h,h),n.hasOwnProperty(v)&&Yt("Cannot register multiple overloads of a function with the same number of arguments ("+v+")!"),n[h].Yd[v]=m):(n[h]=m,v!==void 0&&(n[h].Cg=v))}function es(h,m,v,k,G,Y,ve,be){this.name=h,this.constructor=m,this.De=v,this.je=k,this.he=G,this.Lf=Y,this.Me=ve,this.Ff=be,this.bg=[]}function Rl(h,m,v){for(;m!==v;)m.Me||Yt("Expected null or instance of "+v.name+", got an instance of "+m.name),h=m.Me(h),m=m.he;return h}function ju(h,m){return m===null?(this.ef&&Yt("null is not a valid "+this.name),0):(m.Kd||Yt('Cannot pass "'+Xr(m)+'" as a '+this.name),m.Kd.Qd||Yt("Cannot pass deleted object as a pointer of type "+this.name),Rl(m.Kd.Qd,m.Kd.Wd.Rd,this.Rd))}function Mh(h,m){if(m===null){if(this.ef&&Yt("null is not a valid "+this.name),this.Re){var v=this.ff();return h!==null&&h.push(this.je,v),v}return 0}if(m.Kd||Yt('Cannot pass "'+Xr(m)+'" as a '+this.name),m.Kd.Qd||Yt("Cannot pass deleted object as a pointer of type "+this.name),!this.Qe&&m.Kd.Wd.Qe&&Yt("Cannot convert argument of type "+(m.Kd.fe?m.Kd.fe.name:m.Kd.Wd.name)+" to parameter type "+this.name),v=Rl(m.Kd.Qd,m.Kd.Wd.Rd,this.Rd),this.Re)switch(m.Kd.ce===void 0&&Yt("Passing raw pointer to smart pointer is illegal"),this.mg){case 0:m.Kd.fe===this?v=m.Kd.ce:Yt("Cannot convert argument of type "+(m.Kd.fe?m.Kd.fe.name:m.Kd.Wd.name)+" to parameter type "+this.name);break;case 1:v=m.Kd.ce;break;case 2:if(m.Kd.fe===this)v=m.Kd.ce;else{var k=m.clone();v=this.cg(v,$i(function(){k.delete()})),h!==null&&h.push(this.je,v)}break;default:Yt("Unsupporting sharing policy")}return v}function Vu(h,m){return m===null?(this.ef&&Yt("null is not a valid "+this.name),0):(m.Kd||Yt('Cannot pass "'+Xr(m)+'" as a '+this.name),m.Kd.Qd||Yt("Cannot pass deleted object as a pointer of type "+this.name),m.Kd.Wd.Qe&&Yt("Cannot convert argument of type "+m.Kd.Wd.name+" to parameter type "+this.name),Rl(m.Kd.Qd,m.Kd.Wd.Rd,this.Rd))}function Wu(h,m,v){return m===v?h:v.he===void 0?null:(h=Wu(h,m,v.he),h===null?null:v.Ff(h))}var gs={};function Dl(h,m){for(m===void 0&&Yt("ptr should not be undefined");h.he;)m=h.Me(m),h=h.he;return gs[m]}function qt(h,m){return m.Wd&&m.Qd||cn("makeClassHandle requires ptr and ptrType"),!!m.fe!=!!m.ce&&cn("Both smartPtrType and smartPtr must be specified"),m.count={value:1},Ho(Object.create(h,{Kd:{value:m}}))}function ri(h,m,v,k,G,Y,ve,be,Me,Ne,ct){this.name=h,this.Rd=m,this.ef=v,this.Qe=k,this.Re=G,this.ag=Y,this.mg=ve,this.sf=be,this.ff=Me,this.cg=Ne,this.je=ct,G||m.he!==void 0?this.toWireType=Mh:(this.toWireType=k?ju:Vu,this.ee=null)}function Vo(h,m,v){n.hasOwnProperty(h)||cn("Replacing nonexistant public symbol"),n[h].Yd!==void 0&&v!==void 0?n[h].Yd[v]=m:(n[h]=m,n[h].Ae=v)}function jt(h,m){var v=[];return function(){v.length=arguments.length;for(var k=0;k<arguments.length;k++)v[k]=arguments[k];return h.includes("j")?(k=n["dynCall_"+h],k=v&&v.length?k.apply(null,[m].concat(v)):k.call(null,m)):k=te.get(m).apply(null,v),k}}function Ci(h,m){h=fr(h);var v=h.includes("j")?jt(h,m):te.get(m);return typeof v!="function"&&Yt("unknown function pointer with signature "+h+": "+m),v}var Wf=void 0;function U(h){h=Yg(h);var m=fr(h);return is(h),m}function yi(h,m){function v(Y){G[Y]||Ht[Y]||(li[Y]?li[Y].forEach(v):(k.push(Y),G[Y]=!0))}var k=[],G={};throw m.forEach(v),new Wf(h+": "+k.map(U).join([", "]))}function Gg(h){var m=Function;if(!(m instanceof Function))throw new TypeError("new_ called with constructor type "+typeof m+" which is not a function");var v=mr(m.name||"unknownFunctionName",function(){});return v.prototype=m.prototype,v=new v,h=m.apply(v,h),h instanceof Object?h:v}function $f(h,m,v,k,G){var Y=m.length;2>Y&&Yt("argTypes array size mismatch! Must at least get return value and 'this' types!");var ve=m[1]!==null&&v!==null,be=!1;for(v=1;v<m.length;++v)if(m[v]!==null&&m[v].ee===void 0){be=!0;break}var Me=m[0].name!=="void",Ne="",ct="";for(v=0;v<Y-2;++v)Ne+=(v!==0?", ":"")+"arg"+v,ct+=(v!==0?", ":"")+"arg"+v+"Wired";h="return function "+Er(h)+"("+Ne+`) {
if (arguments.length !== `+(Y-2)+`) {
throwBindingError('function `+h+" called with ' + arguments.length + ' arguments, expected "+(Y-2)+` args!');
}
`,be&&(h+=`var destructors = [];
`);var kt=be?"destructors":"null";for(Ne="throwBindingError invoker fn runDestructors retType classParam".split(" "),k=[Yt,k,G,gt,m[0],m[1]],ve&&(h+="var thisWired = classParam.toWireType("+kt+`, this);
`),v=0;v<Y-2;++v)h+="var arg"+v+"Wired = argType"+v+".toWireType("+kt+", arg"+v+"); // "+m[v+2].name+`
`,Ne.push("argType"+v),k.push(m[v+2]);if(ve&&(ct="thisWired"+(0<ct.length?", ":"")+ct),h+=(Me?"var rv = ":"")+"invoker(fn"+(0<ct.length?", ":"")+ct+`);
`,be)h+=`runDestructors(destructors);
`;else for(v=ve?1:2;v<m.length;++v)Y=v===1?"thisWired":"arg"+(v-2)+"Wired",m[v].ee!==null&&(h+=Y+"_dtor("+Y+"); // "+m[v].name+`
`,Ne.push(Y+"_dtor"),k.push(m[v].ee));return Me&&(h+=`var ret = retType.fromWireType(rv);
return ret;
`),Ne.push(h+`}
`),Gg(Ne).apply(null,k)}function Bh(h,m){for(var v=[],k=0;k<h;k++)v.push(Z[(m>>2)+k]);return v}var Kf=[],In=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Xf(h){4<h&&--In[h].gf===0&&(In[h]=void 0,Kf.push(h))}function $i(h){switch(h){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var m=Kf.length?Kf.pop():In.length;return In[m]={gf:1,value:h},m}}function jv(h,m,v){switch(m){case 0:return function(k){return this.fromWireType((v?Se:fe)[k])};case 1:return function(k){return this.fromWireType((v?Pe:He)[k>>1])};case 2:return function(k){return this.fromWireType((v?Z:Le)[k>>2])};default:throw new TypeError("Unknown integer type: "+h)}}function Cl(h,m){var v=Ht[h];return v===void 0&&Yt(m+" has unknown type "+U(h)),v}function Xr(h){if(h===null)return"null";var m=typeof h;return m==="object"||m==="array"||m==="function"?h.toString():""+h}function Ol(h,m){switch(m){case 2:return function(v){return this.fromWireType(F[v>>2])};case 3:return function(v){return this.fromWireType(z[v>>3])};default:throw new TypeError("Unknown float type: "+h)}}function Ba(h,m,v){switch(m){case 0:return v?function(k){return Se[k]}:function(k){return fe[k]};case 1:return v?function(k){return Pe[k>>1]}:function(k){return He[k>>1]};case 2:return v?function(k){return Z[k>>2]}:function(k){return Le[k>>2]};default:throw new TypeError("Unknown integer type: "+h)}}function Fn(h){return h||Yt("Cannot use deleted val. handle = "+h),In[h].value}var Vv={};function Lh(h){var m=Vv[h];return m===void 0?fr(h):m}var Nl=[];function $u(){return typeof globalThis=="object"?globalThis:Function("return this")()}function Yf(h){var m=Nl.length;return Nl.push(h),m}function Il(h,m){for(var v=Array(h),k=0;k<h;++k)v[k]=Cl(Z[(m>>2)+k],"parameter "+k);return v}var ir={},Ku;E?Ku=function(){var h=process.hrtime();return 1e3*h[0]+h[1]/1e6}:typeof dateNow<"u"?Ku=dateNow:Ku=function(){return performance.now()};function Uh(h){var m=h.getExtension("ANGLE_instanced_arrays");m&&(h.vertexAttribDivisor=function(v,k){m.vertexAttribDivisorANGLE(v,k)},h.drawArraysInstanced=function(v,k,G,Y){m.drawArraysInstancedANGLE(v,k,G,Y)},h.drawElementsInstanced=function(v,k,G,Y,ve){m.drawElementsInstancedANGLE(v,k,G,Y,ve)})}function Wo(h){var m=h.getExtension("OES_vertex_array_object");m&&(h.createVertexArray=function(){return m.createVertexArrayOES()},h.deleteVertexArray=function(v){m.deleteVertexArrayOES(v)},h.bindVertexArray=function(v){m.bindVertexArrayOES(v)},h.isVertexArray=function(v){return m.isVertexArrayOES(v)})}function js(h){var m=h.getExtension("WEBGL_draw_buffers");m&&(h.drawBuffers=function(v,k){m.drawBuffersWEBGL(v,k)})}var zg=1,Gh=[],ms=[],Fl=[],La=[],ts=[],xs=[],_o=[],dn=[],Ml=[],Ua=[],Hg={},Bl={},Ll=4;function Ar(h){zh||(zh=h)}function Xu(h){for(var m=zg++,v=h.length;v<m;v++)h[v]=null;return m}function Wv(h,m){h.qf||(h.qf=h.getContext,h.getContext=function(k,G){return G=h.qf(k,G),k=="webgl"==G instanceof WebGLRenderingContext?G:null});var v=1<m.majorVersion?h.getContext("webgl2",m):h.getContext("webgl",m);return v?$o(v,m):0}function $o(h,m){var v=Xu(dn),k={Rf:v,attributes:m,version:m.majorVersion,le:h};return h.canvas&&(h.canvas.uf=k),dn[v]=k,(typeof m.Gf>"u"||m.Gf)&&Qf(k),v}function qf(h){return nr=dn[h],n.zg=ke=nr&&nr.le,!(h&&!ke)}function Qf(h){if(h||(h=nr),!h.Uf){h.Uf=!0;var m=h.le;Uh(m),Wo(m),js(m),m.mf=m.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),m.rf=m.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=h.version&&(m.nf=m.getExtension("EXT_disjoint_timer_query_webgl2")),(2>h.version||!m.nf)&&(m.nf=m.getExtension("EXT_disjoint_timer_query")),m.Bg=m.getExtension("WEBGL_multi_draw"),(m.getSupportedExtensions()||[]).forEach(function(v){v.includes("lose_context")||v.includes("debug")||m.getExtension(v)})}}var nr,zh,Ul=[];function Ga(h,m,v,k){for(var G=0;G<h;G++){var Y=ke[v](),ve=Y&&Xu(k);Y?(Y.name=ve,k[ve]=Y):Ar(1282),Z[m+4*G>>2]=ve}}function $v(h,m){if(m){var v=void 0;switch(h){case 36346:v=1;break;case 36344:return;case 34814:case 36345:v=0;break;case 34466:var k=ke.getParameter(34467);v=k?k.length:0;break;case 33309:if(2>nr.version){Ar(1282);return}v=2*(ke.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>nr.version){Ar(1280);return}v=h==33307?3:0}if(v===void 0)switch(k=ke.getParameter(h),typeof k){case"number":v=k;break;case"boolean":v=k?1:0;break;case"string":Ar(1280);return;case"object":if(k===null)switch(h){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:v=0;break;default:Ar(1280);return}else{if(k instanceof Float32Array||k instanceof Uint32Array||k instanceof Int32Array||k instanceof Array){for(h=0;h<k.length;++h)Z[m+4*h>>2]=k[h];return}try{v=k.name|0}catch(G){Ar(1280),M("GL_INVALID_ENUM in glGet0v: Unknown object returned from WebGL getParameter("+h+")! (error: "+G+")");return}}break;default:Ar(1280),M("GL_INVALID_ENUM in glGet0v: Native code calling glGet0v("+h+") and it returns "+k+" of type "+typeof k+"!");return}Z[m>>2]=v}else Ar(1281)}function Yu(h){var m=Fe(h)+1,v=zl(m);return Ve(h,fe,v,m),v}function za(h){return h-=5120,h==0?Se:h==1?fe:h==2?Pe:h==4?Z:h==6?F:h==5||h==28922||h==28520||h==30779||h==30782?Le:He}function Jf(h,m,v,k,G){h=za(h);var Y=31-Math.clz32(h.BYTES_PER_ELEMENT),ve=Ll;return h.subarray(G>>Y,G+k*(v*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[m-6402]||1)*(1<<Y)+ve-1&-ve)>>Y)}function cr(h){var m=ke.Df,v=m.Ye[h];return 0<=v&&(m.Ye[h]=v=ke.getUniformLocation(m,m.tf[h]+(0<v?"["+v+"]":""))),v}var Ko=[],Gl=[],jg={};function Vg(){if(!Zf){var h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},m;for(m in jg)h[m]=jg[m];var v=[];for(m in h)v.push(m+"="+h[m]);Zf=v}return Zf}var Zf;function Hh(h){return h%4===0&&(h%100!==0||h%400===0)}function Ha(h,m){for(var v=0,k=0;k<=m;v+=h[k++]);return v}var jh=[31,29,31,30,31,30,31,31,30,31,30,31],Vh=[31,28,31,30,31,30,31,31,30,31,30,31];function ja(h,m){for(h=new Date(h.getTime());0<m;){var v=h.getMonth(),k=(Hh(h.getFullYear())?jh:Vh)[v];if(m>k-h.getDate())m-=k-h.getDate()+1,h.setDate(1),11>v?h.setMonth(v+1):(h.setMonth(0),h.setFullYear(h.getFullYear()+1));else{h.setDate(h.getDate()+m);break}}return h}function Kv(h,m,v,k){function G(Ge,Tt,sr){for(Ge=typeof Ge=="number"?Ge.toString():Ge||"";Ge.length<Tt;)Ge=sr[0]+Ge;return Ge}function Y(Ge,Tt){return G(Ge,Tt,"0")}function ve(Ge,Tt){function sr(_r){return 0>_r?-1:0<_r?1:0}var Or;return(Or=sr(Ge.getFullYear()-Tt.getFullYear()))===0&&(Or=sr(Ge.getMonth()-Tt.getMonth()))===0&&(Or=sr(Ge.getDate()-Tt.getDate())),Or}function be(Ge){switch(Ge.getDay()){case 0:return new Date(Ge.getFullYear()-1,11,29);case 1:return Ge;case 2:return new Date(Ge.getFullYear(),0,3);case 3:return new Date(Ge.getFullYear(),0,2);case 4:return new Date(Ge.getFullYear(),0,1);case 5:return new Date(Ge.getFullYear()-1,11,31);case 6:return new Date(Ge.getFullYear()-1,11,30)}}function Me(Ge){Ge=ja(new Date(Ge.$d+1900,0,1),Ge.Xe);var Tt=new Date(Ge.getFullYear()+1,0,4),sr=be(new Date(Ge.getFullYear(),0,4));return Tt=be(Tt),0>=ve(sr,Ge)?0>=ve(Tt,Ge)?Ge.getFullYear()+1:Ge.getFullYear():Ge.getFullYear()-1}var Ne=Z[k+40>>2];k={ug:Z[k>>2],tg:Z[k+4>>2],Ve:Z[k+8>>2],Le:Z[k+12>>2],Ee:Z[k+16>>2],$d:Z[k+20>>2],We:Z[k+24>>2],Xe:Z[k+28>>2],Fg:Z[k+32>>2],sg:Z[k+36>>2],vg:Ne?rt(Ne):""},v=rt(v),Ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ct in Ne)v=v.replace(new RegExp(ct,"g"),Ne[ct]);var kt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Nt="January February March April May June July August September October November December".split(" ");Ne={"%a":function(Ge){return kt[Ge.We].substring(0,3)},"%A":function(Ge){return kt[Ge.We]},"%b":function(Ge){return Nt[Ge.Ee].substring(0,3)},"%B":function(Ge){return Nt[Ge.Ee]},"%C":function(Ge){return Y((Ge.$d+1900)/100|0,2)},"%d":function(Ge){return Y(Ge.Le,2)},"%e":function(Ge){return G(Ge.Le,2," ")},"%g":function(Ge){return Me(Ge).toString().substring(2)},"%G":function(Ge){return Me(Ge)},"%H":function(Ge){return Y(Ge.Ve,2)},"%I":function(Ge){return Ge=Ge.Ve,Ge==0?Ge=12:12<Ge&&(Ge-=12),Y(Ge,2)},"%j":function(Ge){return Y(Ge.Le+Ha(Hh(Ge.$d+1900)?jh:Vh,Ge.Ee-1),3)},"%m":function(Ge){return Y(Ge.Ee+1,2)},"%M":function(Ge){return Y(Ge.tg,2)},"%n":function(){return`
`},"%p":function(Ge){return 0<=Ge.Ve&&12>Ge.Ve?"AM":"PM"},"%S":function(Ge){return Y(Ge.ug,2)},"%t":function(){return"	"},"%u":function(Ge){return Ge.We||7},"%U":function(Ge){var Tt=new Date(Ge.$d+1900,0,1),sr=Tt.getDay()===0?Tt:ja(Tt,7-Tt.getDay());return Ge=new Date(Ge.$d+1900,Ge.Ee,Ge.Le),0>ve(sr,Ge)?Y(Math.ceil((31-sr.getDate()+(Ha(Hh(Ge.getFullYear())?jh:Vh,Ge.getMonth()-1)-31)+Ge.getDate())/7),2):ve(sr,Tt)===0?"01":"00"},"%V":function(Ge){var Tt=new Date(Ge.$d+1901,0,4),sr=be(new Date(Ge.$d+1900,0,4));Tt=be(Tt);var Or=ja(new Date(Ge.$d+1900,0,1),Ge.Xe);return 0>ve(Or,sr)?"53":0>=ve(Tt,Or)?"01":Y(Math.ceil((sr.getFullYear()<Ge.$d+1900?Ge.Xe+32-sr.getDate():Ge.Xe+1-sr.getDate())/7),2)},"%w":function(Ge){return Ge.We},"%W":function(Ge){var Tt=new Date(Ge.$d,0,1),sr=Tt.getDay()===1?Tt:ja(Tt,Tt.getDay()===0?1:7-Tt.getDay()+1);return Ge=new Date(Ge.$d+1900,Ge.Ee,Ge.Le),0>ve(sr,Ge)?Y(Math.ceil((31-sr.getDate()+(Ha(Hh(Ge.getFullYear())?jh:Vh,Ge.getMonth()-1)-31)+Ge.getDate())/7),2):ve(sr,Tt)===0?"01":"00"},"%y":function(Ge){return(Ge.$d+1900).toString().substring(2)},"%Y":function(Ge){return Ge.$d+1900},"%z":function(Ge){Ge=Ge.sg;var Tt=0<=Ge;return Ge=Math.abs(Ge)/60,(Tt?"+":"-")+String("0000"+(Ge/60*100+Ge%60)).slice(-4)},"%Z":function(Ge){return Ge.vg},"%%":function(){return"%"}};for(ct in Ne)v.includes(ct)&&(v=v.replace(new RegExp(ct,"g"),Ne[ct](k)));return ct=qu(v),ct.length>m?0:(Se.set(ct,h),ct.length-1)}ps=n.InternalError=xi("InternalError");for(var Wg=Array(256),rs=0;256>rs;++rs)Wg[rs]=String.fromCharCode(rs);Zn=Wg,ho=n.BindingError=xi("BindingError"),Wi.prototype.isAliasOf=function(h){if(!(this instanceof Wi&&h instanceof Wi))return!1;var m=this.Kd.Wd.Rd,v=this.Kd.Qd,k=h.Kd.Wd.Rd;for(h=h.Kd.Qd;m.he;)v=m.Me(v),m=m.he;for(;k.he;)h=k.Me(h),k=k.he;return m===k&&v===h},Wi.prototype.clone=function(){if(this.Kd.Qd||re(this),this.Kd.Ke)return this.Kd.count.value+=1,this;var h=Ho,m=Object,v=m.create,k=Object.getPrototypeOf(this),G=this.Kd;return h=h(v.call(m,k,{Kd:{value:{count:G.count,Ce:G.Ce,Ke:G.Ke,Qd:G.Qd,Wd:G.Wd,ce:G.ce,fe:G.fe}}})),h.Kd.count.value+=1,h.Kd.Ce=!1,h},Wi.prototype.delete=function(){this.Kd.Qd||re(this),this.Kd.Ce&&!this.Kd.Ke&&Yt("Object already scheduled for deletion"),Hu(this),Tl(this.Kd),this.Kd.Ke||(this.Kd.ce=void 0,this.Kd.Qd=void 0)},Wi.prototype.isDeleted=function(){return!this.Kd.Qd},Wi.prototype.deleteLater=function(){return this.Kd.Qd||re(this),this.Kd.Ce&&!this.Kd.Ke&&Yt("Object already scheduled for deletion"),Ut.push(this),Ut.length===1&&fo&&fo(hn),this.Kd.Ce=!0,this},ri.prototype.Mf=function(h){return this.sf&&(h=this.sf(h)),h},ri.prototype.lf=function(h){this.je&&this.je(h)},ri.prototype.argPackAdvance=8,ri.prototype.readValueFromPointer=mt,ri.prototype.deleteObject=function(h){h!==null&&h.delete()},ri.prototype.fromWireType=function(h){function m(){return this.Re?qt(this.Rd.De,{Wd:this.ag,Qd:v,fe:this,ce:h}):qt(this.Rd.De,{Wd:this,Qd:h})}var v=this.Mf(h);if(!v)return this.lf(h),null;var k=Dl(this.Rd,v);if(k!==void 0)return k.Kd.count.value===0?(k.Kd.Qd=v,k.Kd.ce=h,k.clone()):(k=k.clone(),this.lf(h),k);if(k=this.Rd.Lf(v),k=Pl[k],!k)return m.call(this);k=this.Qe?k.Bf:k.pointerType;var G=Wu(v,this.Rd,k.Rd);return G===null?m.call(this):this.Re?qt(k.Rd.De,{Wd:k,Qd:G,fe:this,ce:h}):qt(k.Rd.De,{Wd:k,Qd:G})},n.getInheritedInstanceCount=function(){return Object.keys(gs).length},n.getLiveInheritedInstances=function(){var h=[],m;for(m in gs)gs.hasOwnProperty(m)&&h.push(gs[m]);return h},n.flushPendingDeletes=hn,n.setDelayFunction=function(h){fo=h,Ut.length&&fo&&fo(hn)},Wf=n.UnboundTypeError=xi("UnboundTypeError"),n.count_emval_handles=function(){for(var h=0,m=5;m<In.length;++m)In[m]!==void 0&&++h;return h},n.get_first_emval=function(){for(var h=5;h<In.length;++h)if(In[h]!==void 0)return In[h];return null};for(var ke,Qr=0;32>Qr;++Qr)Ul.push(Array(Qr));var $g=new Float32Array(288);for(Qr=0;288>Qr;++Qr)Ko[Qr]=$g.subarray(0,Qr+1);var Kg=new Int32Array(288);for(Qr=0;288>Qr;++Qr)Gl[Qr]=Kg.subarray(0,Qr+1);function qu(h){var m=Array(Fe(h)+1);return Ve(h,m,0,m.length),m}var Xv={Kb:function(h){return zl(h+16)+16},Db:function(h,m,v){throw new St(h).Tf(m,v),h},N:function(){return 0},Bb:function(){},xb:function(){return 0},yb:function(h,m,v,k,G,Y){return Y<<=12,(k&16)!==0&&h%65536!==0?m=-28:(k&32)!==0?(h=ys(65536,m))?(Xg(h,0,m),Ot[h]={Zf:h,Yf:m,Af:!0,fd:G,Dg:v,flags:k,offset:Y},m=h):m=-48:m=-52,m},zb:function(h,m){if((h|0)===-1||m===0)h=-28;else{var v=Ot[h];v&&m===v.Yf&&(Ot[h]=null,v.Af&&is(v.Zf)),h=0}return h},Q:function(){},P:function(){},y:function(h){var m=Ie[h];delete Ie[h];var v=m.ff,k=m.je,G=m.pf,Y=G.map(function(ve){return ve.Qf}).concat(G.map(function(ve){return ve.kg}));Mr([h],Y,function(ve){var be={};return G.forEach(function(Me,Ne){var ct=ve[Ne],kt=Me.Of,Nt=Me.Pf,Ge=ve[Ne+G.length],Tt=Me.jg,sr=Me.lg;be[Me.Hf]={read:function(Or){return ct.fromWireType(kt(Nt,Or))},write:function(Or,_r){var Ii=[];Tt(sr,Or,Ge.toWireType(Ii,_r)),gt(Ii)}}}),[{name:m.name,fromWireType:function(Me){var Ne={},ct;for(ct in be)Ne[ct]=be[ct].read(Me);return k(Me),Ne},toWireType:function(Me,Ne){for(var ct in be)if(!(ct in Ne))throw new TypeError('Missing field:  "'+ct+'"');var kt=v();for(ct in be)be[ct].write(kt,Ne[ct]);return Me!==null&&Me.push(k,kt),kt},argPackAdvance:8,readValueFromPointer:mt,ee:k}]})},ob:function(){},Eb:function(h,m,v,k,G){var Y=Di(v);m=fr(m),Vi(h,{name:m,fromWireType:function(ve){return!!ve},toWireType:function(ve,be){return be?k:G},argPackAdvance:8,readValueFromPointer:function(ve){if(v===1)var be=Se;else if(v===2)be=Pe;else if(v===4)be=Z;else throw new TypeError("Unknown boolean type size: "+m);return this.fromWireType(be[ve>>Y])},ee:null})},m:function(h,m,v,k,G,Y,ve,be,Me,Ne,ct,kt,Nt){ct=fr(ct),Y=Ci(G,Y),be&&(be=Ci(ve,be)),Ne&&(Ne=Ci(Me,Ne)),Nt=Ci(kt,Nt);var Ge=Er(ct);wr(Ge,function(){yi("Cannot construct "+ct+" due to unbound types",[k])}),Mr([h,m,v],k?[k]:[],function(Tt){if(Tt=Tt[0],k)var sr=Tt.Rd,Or=sr.De;else Or=Wi.prototype;Tt=mr(Ge,function(){if(Object.getPrototypeOf(this)!==_r)throw new ho("Use 'new' to construct "+ct);if(Ii.me===void 0)throw new ho(ct+" has no accessible constructor");var Xo=Ii.me[arguments.length];if(Xo===void 0)throw new ho("Tried to invoke ctor of "+ct+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ii.me).toString()+") parameters instead!");return Xo.apply(this,arguments)});var _r=Object.create(Or,{constructor:{value:Tt}});Tt.prototype=_r;var Ii=new es(ct,Tt,_r,Nt,sr,Y,be,Ne);sr=new ri(ct,Ii,!0,!1,!1),Or=new ri(ct+"*",Ii,!1,!1,!1);var Ju=new ri(ct+" const*",Ii,!1,!0,!1);return Pl[h]={pointerType:Or,Bf:Ju},Vo(Ge,Tt),[sr,Or,Ju]})},f:function(h,m,v,k,G,Y,ve){var be=Bh(v,k);m=fr(m),Y=Ci(G,Y),Mr([],[h],function(Me){function Ne(){yi("Cannot call "+ct+" due to unbound types",be)}Me=Me[0];var ct=Me.name+"."+m,kt=Me.Rd.constructor;return kt[m]===void 0?(Ne.Ae=v-1,kt[m]=Ne):(jo(kt,m,ct),kt[m].Yd[v-1]=Ne),Mr([],be,function(Nt){return Nt=[Nt[0],null].concat(Nt.slice(1)),Nt=$f(ct,Nt,null,Y,ve),kt[m].Yd===void 0?(Nt.Ae=v-1,kt[m]=Nt):kt[m].Yd[v-1]=Nt,[]}),[]})},v:function(h,m,v,k,G,Y){ae(0<m);var ve=Bh(m,v);G=Ci(k,G);var be=[Y],Me=[];Mr([],[h],function(Ne){Ne=Ne[0];var ct="constructor "+Ne.name;if(Ne.Rd.me===void 0&&(Ne.Rd.me=[]),Ne.Rd.me[m-1]!==void 0)throw new ho("Cannot register multiple constructors with identical number of parameters ("+(m-1)+") for class '"+Ne.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return Ne.Rd.me[m-1]=function(){yi("Cannot construct "+Ne.name+" due to unbound types",ve)},Mr([],ve,function(kt){return Ne.Rd.me[m-1]=function(){arguments.length!==m-1&&Yt(ct+" called with "+arguments.length+" arguments, expected "+(m-1)),Me.length=0,be.length=m;for(var Nt=1;Nt<m;++Nt)be[Nt]=kt[Nt].toWireType(Me,arguments[Nt-1]);return Nt=G.apply(null,be),gt(Me),kt[0].fromWireType(Nt)},[]}),[]})},c:function(h,m,v,k,G,Y,ve,be){var Me=Bh(v,k);m=fr(m),Y=Ci(G,Y),Mr([],[h],function(Ne){function ct(){yi("Cannot call "+kt+" due to unbound types",Me)}Ne=Ne[0];var kt=Ne.name+"."+m;be&&Ne.Rd.bg.push(m);var Nt=Ne.Rd.De,Ge=Nt[m];return Ge===void 0||Ge.Yd===void 0&&Ge.className!==Ne.name&&Ge.Ae===v-2?(ct.Ae=v-2,ct.className=Ne.name,Nt[m]=ct):(jo(Nt,m,kt),Nt[m].Yd[v-2]=ct),Mr([],Me,function(Tt){return Tt=$f(kt,Tt,Ne,Y,ve),Nt[m].Yd===void 0?(Tt.Ae=v-2,Nt[m]=Tt):Nt[m].Yd[v-2]=Tt,[]}),[]})},W:function(h,m,v){h=fr(h),Mr([],[m],function(k){return k=k[0],n[h]=k.fromWireType(v),[]})},Cb:function(h,m){m=fr(m),Vi(h,{name:m,fromWireType:function(v){var k=In[v].value;return Xf(v),k},toWireType:function(v,k){return $i(k)},argPackAdvance:8,readValueFromPointer:mt,ee:null})},k:function(h,m,v,k){function G(){}v=Di(v),m=fr(m),G.values={},Vi(h,{name:m,constructor:G,fromWireType:function(Y){return this.constructor.values[Y]},toWireType:function(Y,ve){return ve.value},argPackAdvance:8,readValueFromPointer:jv(m,v,k),ee:null}),wr(m,G)},j:function(h,m,v){var k=Cl(h,"enum");m=fr(m),h=k.constructor,k=Object.create(k.constructor.prototype,{value:{value:v},constructor:{value:mr(k.name+"_"+m,function(){})}}),h.values[v]=k,h[m]=k},R:function(h,m,v){v=Di(v),m=fr(m),Vi(h,{name:m,fromWireType:function(k){return k},toWireType:function(k,G){if(typeof G!="number"&&typeof G!="boolean")throw new TypeError('Cannot convert "'+Xr(G)+'" to '+this.name);return G},argPackAdvance:8,readValueFromPointer:Ol(m,v),ee:null})},t:function(h,m,v,k,G,Y){var ve=Bh(m,v);h=fr(h),G=Ci(k,G),wr(h,function(){yi("Cannot call "+h+" due to unbound types",ve)},m-1),Mr([],ve,function(be){return be=[be[0],null].concat(be.slice(1)),Vo(h,$f(h,be,null,G,Y),m-1),[]})},x:function(h,m,v,k,G){function Y(Ne){return Ne}m=fr(m),G===-1&&(G=4294967295);var ve=Di(v);if(k===0){var be=32-8*v;Y=function(Ne){return Ne<<be>>>be}}var Me=m.includes("unsigned");Vi(h,{name:m,fromWireType:Y,toWireType:function(Ne,ct){if(typeof ct!="number"&&typeof ct!="boolean")throw new TypeError('Cannot convert "'+Xr(ct)+'" to '+this.name);if(ct<k||ct>G)throw new TypeError('Passing a number "'+Xr(ct)+'" from JS side to C/C++ side to an argument of type "'+m+'", which is outside the valid range ['+k+", "+G+"]!");return Me?ct>>>0:ct|0},argPackAdvance:8,readValueFromPointer:Ba(m,ve,k!==0),ee:null})},u:function(h,m,v){function k(Y){Y>>=2;var ve=Le;return new G(Ee,ve[Y+1],ve[Y])}var G=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][m];v=fr(v),Vi(h,{name:v,fromWireType:k,argPackAdvance:8,readValueFromPointer:k},{Sf:!0})},p:function(h,m,v,k,G,Y,ve,be,Me,Ne,ct,kt){v=fr(v),Y=Ci(G,Y),be=Ci(ve,be),Ne=Ci(Me,Ne),kt=Ci(ct,kt),Mr([h],[m],function(Nt){return Nt=Nt[0],[new ri(v,Nt.Rd,!1,!1,!0,Nt,k,Y,be,Ne,kt)]})},S:function(h,m){m=fr(m);var v=m==="std::string";Vi(h,{name:m,fromWireType:function(k){var G=Le[k>>2];if(v)for(var Y=k+4,ve=0;ve<=G;++ve){var be=k+4+ve;if(ve==G||fe[be]==0){if(Y=rt(Y,be-Y),Me===void 0)var Me=Y;else Me+=String.fromCharCode(0),Me+=Y;Y=be+1}}else{for(Me=Array(G),ve=0;ve<G;++ve)Me[ve]=String.fromCharCode(fe[k+4+ve]);Me=Me.join("")}return is(k),Me},toWireType:function(k,G){G instanceof ArrayBuffer&&(G=new Uint8Array(G));var Y=typeof G=="string";Y||G instanceof Uint8Array||G instanceof Uint8ClampedArray||G instanceof Int8Array||Yt("Cannot pass non-string to std::string");var ve=(v&&Y?function(){return Fe(G)}:function(){return G.length})(),be=zl(4+ve+1);if(Le[be>>2]=ve,v&&Y)Ve(G,fe,be+4,ve+1);else if(Y)for(Y=0;Y<ve;++Y){var Me=G.charCodeAt(Y);255<Me&&(is(be),Yt("String has UTF-16 code units that do not fit in 8 bits")),fe[be+4+Y]=Me}else for(Y=0;Y<ve;++Y)fe[be+4+Y]=G[Y];return k!==null&&k.push(is,be),be},argPackAdvance:8,readValueFromPointer:mt,ee:function(k){is(k)}})},H:function(h,m,v){if(v=fr(v),m===2)var k=dt,G=it,Y=bt,ve=function(){return He},be=1;else m===4&&(k=ee,G=ne,Y=se,ve=function(){return Le},be=2);Vi(h,{name:v,fromWireType:function(Me){for(var Ne=Le[Me>>2],ct=ve(),kt,Nt=Me+4,Ge=0;Ge<=Ne;++Ge){var Tt=Me+4+Ge*m;(Ge==Ne||ct[Tt>>be]==0)&&(Nt=k(Nt,Tt-Nt),kt===void 0?kt=Nt:(kt+=String.fromCharCode(0),kt+=Nt),Nt=Tt+m)}return is(Me),kt},toWireType:function(Me,Ne){typeof Ne!="string"&&Yt("Cannot pass non-string to C++ string type "+v);var ct=Y(Ne),kt=zl(4+ct+m);return Le[kt>>2]=ct>>be,G(Ne,kt+4,ct+m),Me!==null&&Me.push(is,kt),kt},argPackAdvance:8,readValueFromPointer:mt,ee:function(Me){is(Me)}})},z:function(h,m,v,k,G,Y){Ie[h]={name:fr(m),ff:Ci(v,k),je:Ci(G,Y),pf:[]}},h:function(h,m,v,k,G,Y,ve,be,Me,Ne){Ie[h].pf.push({Hf:fr(m),Qf:v,Of:Ci(k,G),Pf:Y,kg:ve,jg:Ci(be,Me),lg:Ne})},Fb:function(h,m){m=fr(m),Vi(h,{Vf:!0,name:m,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},A:function(h,m,v){h=Fn(h),m=Cl(m,"emval::as");var k=[],G=$i(k);return Z[v>>2]=G,m.toWireType(k,h)},lb:function(h,m,v,k,G){h=Nl[h],m=Fn(m),v=Lh(v);var Y=[];return Z[k>>2]=$i(Y),h(m,v,Y,G)},F:function(h,m,v,k){h=Nl[h],m=Fn(m),v=Lh(v),h(m,v,null,k)},D:Xf,Ab:function(h){return h===0?$i($u()):(h=Lh(h),$i($u()[h]))},B:function(h,m){m=Il(h,m);for(var v=m[0],k=v.name+"_$"+m.slice(1).map(function(Ne){return Ne.name}).join("_")+"$",G=["retType"],Y=[v],ve="",be=0;be<h-1;++be)ve+=(be!==0?", ":"")+"arg"+be,G.push("argType"+be),Y.push(m[1+be]);k="return function "+Er("methodCaller_"+k)+`(handle, name, destructors, args) {
`;var Me=0;for(be=0;be<h-1;++be)k+="    var arg"+be+" = argType"+be+".readValueFromPointer(args"+(Me?"+"+Me:"")+`);
`,Me+=m[be+1].argPackAdvance;for(k+="    var rv = handle[name]("+ve+`);
`,be=0;be<h-1;++be)m[be+1].deleteObject&&(k+="    argType"+be+".deleteObject(arg"+be+`);
`);return v.Vf||(k+=`    return retType.toWireType(destructors, rv);
`),G.push(k+`};
`),h=Gg(G).apply(null,Y),Yf(h)},J:function(h,m){return h=Fn(h),m=Fn(m),$i(h[m])},L:function(h){4<h&&(In[h].gf+=1)},rb:function(h,m,v,k){h=Fn(h);var G=ir[m];if(!G){G="";for(var Y=0;Y<m;++Y)G+=(Y!==0?", ":"")+"arg"+Y;var ve="return function emval_allocator_"+m+`(constructor, argTypes, args) {
`;for(Y=0;Y<m;++Y)ve+="var argType"+Y+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+Y+'], "parameter '+Y+`");
var arg`+Y+" = argType"+Y+`.readValueFromPointer(args);
args += argType`+Y+`['argPackAdvance'];
`;G=new Function("requireRegisteredType","Module","__emval_register",ve+("var obj = new constructor("+G+`);
return __emval_register(obj);
}
`))(Cl,n,$i),ir[m]=G}return G(h,v,k)},ib:function(){return $i([])},La:function(h){return $i(Lh(h))},jb:function(){return $i({})},hb:function(h){return h=Fn(h),!h},kb:function(h){gt(In[h].value),Xf(h)},w:function(h,m,v){h=Fn(h),m=Fn(m),v=Fn(v),h[m]=v},s:function(h,m){return h=Cl(h,"_emval_take_value"),h=h.readValueFromPointer(m),$i(h)},d:function(){Ye()},qb:function(h,m){if(h===0)h=Date.now();else if(h===1||h===4)h=Ku();else return Z[Qu()>>2]=28,-1;return Z[m>>2]=h/1e3|0,Z[m+4>>2]=h%1e3*1e6|0,0},Zc:function(h){ke.activeTexture(h)},_c:function(h,m){ke.attachShader(ms[h],xs[m])},Z:function(h,m,v){ke.bindAttribLocation(ms[h],m,rt(v))},_:function(h,m){h==35051?ke.df=m:h==35052&&(ke.Be=m),ke.bindBuffer(h,Gh[m])},Y:function(h,m){ke.bindFramebuffer(h,Fl[m])},bc:function(h,m){ke.bindRenderbuffer(h,La[m])},Pb:function(h,m){ke.bindSampler(h,Ml[m])},$:function(h,m){ke.bindTexture(h,ts[m])},vc:function(h){ke.bindVertexArray(_o[h])},yc:function(h){ke.bindVertexArray(_o[h])},aa:function(h,m,v,k){ke.blendColor(h,m,v,k)},ba:function(h){ke.blendEquation(h)},ca:function(h,m){ke.blendFunc(h,m)},Wb:function(h,m,v,k,G,Y,ve,be,Me,Ne){ke.blitFramebuffer(h,m,v,k,G,Y,ve,be,Me,Ne)},da:function(h,m,v,k){2<=nr.version?v?ke.bufferData(h,fe,k,v,m):ke.bufferData(h,m,k):ke.bufferData(h,v?fe.subarray(v,v+m):m,k)},ea:function(h,m,v,k){2<=nr.version?ke.bufferSubData(h,m,fe,k,v):ke.bufferSubData(h,m,fe.subarray(k,k+v))},cc:function(h){return ke.checkFramebufferStatus(h)},K:function(h){ke.clear(h)},X:function(h,m,v,k){ke.clearColor(h,m,v,k)},O:function(h){ke.clearStencil(h)},fb:function(h,m,v,k){return ke.clientWaitSync(Ua[h],m,(v>>>0)+4294967296*k)},fa:function(h,m,v,k){ke.colorMask(!!h,!!m,!!v,!!k)},ga:function(h){ke.compileShader(xs[h])},ha:function(h,m,v,k,G,Y,ve,be){2<=nr.version?ke.Be?ke.compressedTexImage2D(h,m,v,k,G,Y,ve,be):ke.compressedTexImage2D(h,m,v,k,G,Y,fe,be,ve):ke.compressedTexImage2D(h,m,v,k,G,Y,be?fe.subarray(be,be+ve):null)},ia:function(h,m,v,k,G,Y,ve,be,Me){2<=nr.version?ke.Be?ke.compressedTexSubImage2D(h,m,v,k,G,Y,ve,be,Me):ke.compressedTexSubImage2D(h,m,v,k,G,Y,ve,fe,Me,be):ke.compressedTexSubImage2D(h,m,v,k,G,Y,ve,Me?fe.subarray(Me,Me+be):null)},ja:function(h,m,v,k,G,Y,ve,be){ke.copyTexSubImage2D(h,m,v,k,G,Y,ve,be)},ka:function(){var h=Xu(ms),m=ke.createProgram();return m.name=h,m.Ue=m.Se=m.Te=0,m.hf=1,ms[h]=m,h},la:function(h){var m=Xu(xs);return xs[m]=ke.createShader(h),m},ma:function(h){ke.cullFace(h)},na:function(h,m){for(var v=0;v<h;v++){var k=Z[m+4*v>>2],G=Gh[k];G&&(ke.deleteBuffer(G),G.name=0,Gh[k]=null,k==ke.df&&(ke.df=0),k==ke.Be&&(ke.Be=0))}},dc:function(h,m){for(var v=0;v<h;++v){var k=Z[m+4*v>>2],G=Fl[k];G&&(ke.deleteFramebuffer(G),G.name=0,Fl[k]=null)}},oa:function(h){if(h){var m=ms[h];m?(ke.deleteProgram(m),m.name=0,ms[h]=null):Ar(1281)}},ec:function(h,m){for(var v=0;v<h;v++){var k=Z[m+4*v>>2],G=La[k];G&&(ke.deleteRenderbuffer(G),G.name=0,La[k]=null)}},Qb:function(h,m){for(var v=0;v<h;v++){var k=Z[m+4*v>>2],G=Ml[k];G&&(ke.deleteSampler(G),G.name=0,Ml[k]=null)}},pa:function(h){if(h){var m=xs[h];m?(ke.deleteShader(m),xs[h]=null):Ar(1281)}},Yb:function(h){if(h){var m=Ua[h];m?(ke.deleteSync(m),m.name=0,Ua[h]=null):Ar(1281)}},qa:function(h,m){for(var v=0;v<h;v++){var k=Z[m+4*v>>2],G=ts[k];G&&(ke.deleteTexture(G),G.name=0,ts[k]=null)}},wc:function(h,m){for(var v=0;v<h;v++){var k=Z[m+4*v>>2];ke.deleteVertexArray(_o[k]),_o[k]=null}},zc:function(h,m){for(var v=0;v<h;v++){var k=Z[m+4*v>>2];ke.deleteVertexArray(_o[k]),_o[k]=null}},ra:function(h){ke.depthMask(!!h)},sa:function(h){ke.disable(h)},ta:function(h){ke.disableVertexAttribArray(h)},ua:function(h,m,v){ke.drawArrays(h,m,v)},tc:function(h,m,v,k){ke.drawArraysInstanced(h,m,v,k)},rc:function(h,m,v,k,G){ke.mf.drawArraysInstancedBaseInstanceWEBGL(h,m,v,k,G)},pc:function(h,m){for(var v=Ul[h],k=0;k<h;k++)v[k]=Z[m+4*k>>2];ke.drawBuffers(v)},va:function(h,m,v,k){ke.drawElements(h,m,v,k)},uc:function(h,m,v,k,G){ke.drawElementsInstanced(h,m,v,k,G)},sc:function(h,m,v,k,G,Y,ve){ke.mf.drawElementsInstancedBaseVertexBaseInstanceWEBGL(h,m,v,k,G,Y,ve)},jc:function(h,m,v,k,G,Y){ke.drawElements(h,k,G,Y)},wa:function(h){ke.enable(h)},xa:function(h){ke.enableVertexAttribArray(h)},Ub:function(h,m){return(h=ke.fenceSync(h,m))?(m=Xu(Ua),h.name=m,Ua[m]=h,m):0},ya:function(){ke.finish()},za:function(){ke.flush()},fc:function(h,m,v,k){ke.framebufferRenderbuffer(h,m,v,La[k])},gc:function(h,m,v,k,G){ke.framebufferTexture2D(h,m,v,ts[k],G)},Aa:function(h){ke.frontFace(h)},Ba:function(h,m){Ga(h,m,"createBuffer",Gh)},hc:function(h,m){Ga(h,m,"createFramebuffer",Fl)},ic:function(h,m){Ga(h,m,"createRenderbuffer",La)},Rb:function(h,m){Ga(h,m,"createSampler",Ml)},Ca:function(h,m){Ga(h,m,"createTexture",ts)},xc:function(h,m){Ga(h,m,"createVertexArray",_o)},Ac:function(h,m){Ga(h,m,"createVertexArray",_o)},Zb:function(h){ke.generateMipmap(h)},Da:function(h,m,v){v?Z[v>>2]=ke.getBufferParameter(h,m):Ar(1281)},Ea:function(){var h=ke.getError()||zh;return zh=0,h},_b:function(h,m,v,k){h=ke.getFramebufferAttachmentParameter(h,m,v),(h instanceof WebGLRenderbuffer||h instanceof WebGLTexture)&&(h=h.name|0),Z[k>>2]=h},E:function(h,m){$v(h,m)},Fa:function(h,m,v,k){h=ke.getProgramInfoLog(ms[h]),h===null&&(h="(unknown error)"),m=0<m&&k?Ve(h,fe,k,m):0,v&&(Z[v>>2]=m)},Ga:function(h,m,v){if(v)if(h>=zg)Ar(1281);else if(h=ms[h],m==35716)h=ke.getProgramInfoLog(h),h===null&&(h="(unknown error)"),Z[v>>2]=h.length+1;else if(m==35719){if(!h.Ue)for(m=0;m<ke.getProgramParameter(h,35718);++m)h.Ue=Math.max(h.Ue,ke.getActiveUniform(h,m).name.length+1);Z[v>>2]=h.Ue}else if(m==35722){if(!h.Se)for(m=0;m<ke.getProgramParameter(h,35721);++m)h.Se=Math.max(h.Se,ke.getActiveAttrib(h,m).name.length+1);Z[v>>2]=h.Se}else if(m==35381){if(!h.Te)for(m=0;m<ke.getProgramParameter(h,35382);++m)h.Te=Math.max(h.Te,ke.getActiveUniformBlockName(h,m).length+1);Z[v>>2]=h.Te}else Z[v>>2]=ke.getProgramParameter(h,m);else Ar(1281)},$b:function(h,m,v){v?Z[v>>2]=ke.getRenderbufferParameter(h,m):Ar(1281)},Ha:function(h,m,v,k){h=ke.getShaderInfoLog(xs[h]),h===null&&(h="(unknown error)"),m=0<m&&k?Ve(h,fe,k,m):0,v&&(Z[v>>2]=m)},Mb:function(h,m,v,k){h=ke.getShaderPrecisionFormat(h,m),Z[v>>2]=h.rangeMin,Z[v+4>>2]=h.rangeMax,Z[k>>2]=h.precision},Ia:function(h,m,v){v?m==35716?(h=ke.getShaderInfoLog(xs[h]),h===null&&(h="(unknown error)"),Z[v>>2]=h?h.length+1:0):m==35720?(h=ke.getShaderSource(xs[h]),Z[v>>2]=h?h.length+1:0):Z[v>>2]=ke.getShaderParameter(xs[h],m):Ar(1281)},I:function(h){var m=Hg[h];if(!m){switch(h){case 7939:m=ke.getSupportedExtensions()||[],m=m.concat(m.map(function(k){return"GL_"+k})),m=Yu(m.join(" "));break;case 7936:case 7937:case 37445:case 37446:(m=ke.getParameter(h))||Ar(1280),m=m&&Yu(m);break;case 7938:m=ke.getParameter(7938),m=2<=nr.version?"OpenGL ES 3.0 ("+m+")":"OpenGL ES 2.0 ("+m+")",m=Yu(m);break;case 35724:m=ke.getParameter(35724);var v=m.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);v!==null&&(v[1].length==3&&(v[1]+="0"),m="OpenGL ES GLSL ES "+v[1]+" ("+m+")"),m=Yu(m);break;default:Ar(1280)}Hg[h]=m}return m},eb:function(h,m){if(2>nr.version)return Ar(1282),0;var v=Bl[h];if(v)return 0>m||m>=v.length?(Ar(1281),0):v[m];switch(h){case 7939:return v=ke.getSupportedExtensions()||[],v=v.concat(v.map(function(k){return"GL_"+k})),v=v.map(function(k){return Yu(k)}),v=Bl[h]=v,0>m||m>=v.length?(Ar(1281),0):v[m];default:return Ar(1280),0}},Ja:function(h,m){function v(Ge){return Ge.slice(-1)=="]"&&Ge.lastIndexOf("[")}m=rt(m),h=ms[h];var k=h.Ye,G=h.wg,Y,ve=0,be=m,Me=v(m);if(!k)for(h.Ye=k={},h.tf={},Y=0;Y<ke.getProgramParameter(h,35718);++Y){var Ne=ke.getActiveUniform(h,Y),ct=Ne.name;Ne=Ne.size;var kt=v(ct);kt=0<kt?ct.slice(0,kt):ct;var Nt=h.hf;for(h.hf+=Ne,G[kt]=[Ne,Nt],ct=0;ct<Ne;++ct)k[Nt]=ct,h.tf[Nt++]=kt}return 0<Me&&(ve=parseInt(m.slice(Me+1))>>>0,be=m.slice(0,Me)),(G=G[be])&&ve<G[0]&&(ve+=G[1],k[ve]=k[ve]||ke.getUniformLocation(h,m))?ve:-1},Nb:function(h,m,v){for(var k=Ul[m],G=0;G<m;G++)k[G]=Z[v+4*G>>2];ke.invalidateFramebuffer(h,k)},Ob:function(h,m,v,k,G,Y,ve){for(var be=Ul[m],Me=0;Me<m;Me++)be[Me]=Z[v+4*Me>>2];ke.invalidateSubFramebuffer(h,be,k,G,Y,ve)},Vb:function(h){return ke.isSync(Ua[h])},Ka:function(h){return(h=ts[h])?ke.isTexture(h):0},Ma:function(h){ke.lineWidth(h)},Na:function(h){h=ms[h],ke.linkProgram(h),h.Ye=0,h.wg={}},nc:function(h,m,v,k,G,Y){ke.rf.multiDrawArraysInstancedBaseInstanceWEBGL(h,Z,m>>2,Z,v>>2,Z,k>>2,Le,G>>2,Y)},oc:function(h,m,v,k,G,Y,ve,be){ke.rf.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(h,Z,m>>2,v,Z,k>>2,Z,G>>2,Z,Y>>2,Le,ve>>2,be)},Oa:function(h,m){h==3317&&(Ll=m),ke.pixelStorei(h,m)},qc:function(h){ke.readBuffer(h)},Pa:function(h,m,v,k,G,Y,ve){if(2<=nr.version)if(ke.df)ke.readPixels(h,m,v,k,G,Y,ve);else{var be=za(Y);ke.readPixels(h,m,v,k,G,Y,be,ve>>31-Math.clz32(be.BYTES_PER_ELEMENT))}else(ve=Jf(Y,G,v,k,ve))?ke.readPixels(h,m,v,k,G,Y,ve):Ar(1280)},ac:function(h,m,v,k){ke.renderbufferStorage(h,m,v,k)},Xb:function(h,m,v,k,G){ke.renderbufferStorageMultisample(h,m,v,k,G)},Sb:function(h,m,v){ke.samplerParameteri(Ml[h],m,v)},Tb:function(h,m,v){ke.samplerParameteri(Ml[h],m,Z[v>>2])},Qa:function(h,m,v,k){ke.scissor(h,m,v,k)},Ra:function(h,m,v,k){for(var G="",Y=0;Y<m;++Y){var ve=k?Z[k+4*Y>>2]:-1;G+=rt(Z[v+4*Y>>2],0>ve?void 0:ve)}ke.shaderSource(xs[h],G)},Sa:function(h,m,v){ke.stencilFunc(h,m,v)},Ta:function(h,m,v,k){ke.stencilFuncSeparate(h,m,v,k)},Ua:function(h){ke.stencilMask(h)},Va:function(h,m){ke.stencilMaskSeparate(h,m)},Wa:function(h,m,v){ke.stencilOp(h,m,v)},Xa:function(h,m,v,k){ke.stencilOpSeparate(h,m,v,k)},Ya:function(h,m,v,k,G,Y,ve,be,Me){if(2<=nr.version)if(ke.Be)ke.texImage2D(h,m,v,k,G,Y,ve,be,Me);else if(Me){var Ne=za(be);ke.texImage2D(h,m,v,k,G,Y,ve,be,Ne,Me>>31-Math.clz32(Ne.BYTES_PER_ELEMENT))}else ke.texImage2D(h,m,v,k,G,Y,ve,be,null);else ke.texImage2D(h,m,v,k,G,Y,ve,be,Me?Jf(be,ve,k,G,Me):null)},Za:function(h,m,v){ke.texParameterf(h,m,v)},_a:function(h,m,v){ke.texParameterf(h,m,F[v>>2])},$a:function(h,m,v){ke.texParameteri(h,m,v)},ab:function(h,m,v){ke.texParameteri(h,m,Z[v>>2])},kc:function(h,m,v,k,G){ke.texStorage2D(h,m,v,k,G)},bb:function(h,m,v,k,G,Y,ve,be,Me){if(2<=nr.version)if(ke.Be)ke.texSubImage2D(h,m,v,k,G,Y,ve,be,Me);else if(Me){var Ne=za(be);ke.texSubImage2D(h,m,v,k,G,Y,ve,be,Ne,Me>>31-Math.clz32(Ne.BYTES_PER_ELEMENT))}else ke.texSubImage2D(h,m,v,k,G,Y,ve,be,null);else Ne=null,Me&&(Ne=Jf(be,ve,G,Y,Me)),ke.texSubImage2D(h,m,v,k,G,Y,ve,be,Ne)},cb:function(h,m){ke.uniform1f(cr(h),m)},db:function(h,m,v){if(2<=nr.version)ke.uniform1fv(cr(h),F,v>>2,m);else{if(288>=m)for(var k=Ko[m-1],G=0;G<m;++G)k[G]=F[v+4*G>>2];else k=F.subarray(v>>2,v+4*m>>2);ke.uniform1fv(cr(h),k)}},Vc:function(h,m){ke.uniform1i(cr(h),m)},Wc:function(h,m,v){if(2<=nr.version)ke.uniform1iv(cr(h),Z,v>>2,m);else{if(288>=m)for(var k=Gl[m-1],G=0;G<m;++G)k[G]=Z[v+4*G>>2];else k=Z.subarray(v>>2,v+4*m>>2);ke.uniform1iv(cr(h),k)}},Xc:function(h,m,v){ke.uniform2f(cr(h),m,v)},Yc:function(h,m,v){if(2<=nr.version)ke.uniform2fv(cr(h),F,v>>2,2*m);else{if(144>=m)for(var k=Ko[2*m-1],G=0;G<2*m;G+=2)k[G]=F[v+4*G>>2],k[G+1]=F[v+(4*G+4)>>2];else k=F.subarray(v>>2,v+8*m>>2);ke.uniform2fv(cr(h),k)}},Uc:function(h,m,v){ke.uniform2i(cr(h),m,v)},Tc:function(h,m,v){if(2<=nr.version)ke.uniform2iv(cr(h),Z,v>>2,2*m);else{if(144>=m)for(var k=Gl[2*m-1],G=0;G<2*m;G+=2)k[G]=Z[v+4*G>>2],k[G+1]=Z[v+(4*G+4)>>2];else k=Z.subarray(v>>2,v+8*m>>2);ke.uniform2iv(cr(h),k)}},Sc:function(h,m,v,k){ke.uniform3f(cr(h),m,v,k)},Rc:function(h,m,v){if(2<=nr.version)ke.uniform3fv(cr(h),F,v>>2,3*m);else{if(96>=m)for(var k=Ko[3*m-1],G=0;G<3*m;G+=3)k[G]=F[v+4*G>>2],k[G+1]=F[v+(4*G+4)>>2],k[G+2]=F[v+(4*G+8)>>2];else k=F.subarray(v>>2,v+12*m>>2);ke.uniform3fv(cr(h),k)}},Qc:function(h,m,v,k){ke.uniform3i(cr(h),m,v,k)},Pc:function(h,m,v){if(2<=nr.version)ke.uniform3iv(cr(h),Z,v>>2,3*m);else{if(96>=m)for(var k=Gl[3*m-1],G=0;G<3*m;G+=3)k[G]=Z[v+4*G>>2],k[G+1]=Z[v+(4*G+4)>>2],k[G+2]=Z[v+(4*G+8)>>2];else k=Z.subarray(v>>2,v+12*m>>2);ke.uniform3iv(cr(h),k)}},Oc:function(h,m,v,k,G){ke.uniform4f(cr(h),m,v,k,G)},Nc:function(h,m,v){if(2<=nr.version)ke.uniform4fv(cr(h),F,v>>2,4*m);else{if(72>=m){var k=Ko[4*m-1],G=F;v>>=2;for(var Y=0;Y<4*m;Y+=4){var ve=v+Y;k[Y]=G[ve],k[Y+1]=G[ve+1],k[Y+2]=G[ve+2],k[Y+3]=G[ve+3]}}else k=F.subarray(v>>2,v+16*m>>2);ke.uniform4fv(cr(h),k)}},Bc:function(h,m,v,k,G){ke.uniform4i(cr(h),m,v,k,G)},Cc:function(h,m,v){if(2<=nr.version)ke.uniform4iv(cr(h),Z,v>>2,4*m);else{if(72>=m)for(var k=Gl[4*m-1],G=0;G<4*m;G+=4)k[G]=Z[v+4*G>>2],k[G+1]=Z[v+(4*G+4)>>2],k[G+2]=Z[v+(4*G+8)>>2],k[G+3]=Z[v+(4*G+12)>>2];else k=Z.subarray(v>>2,v+16*m>>2);ke.uniform4iv(cr(h),k)}},Dc:function(h,m,v,k){if(2<=nr.version)ke.uniformMatrix2fv(cr(h),!!v,F,k>>2,4*m);else{if(72>=m)for(var G=Ko[4*m-1],Y=0;Y<4*m;Y+=4)G[Y]=F[k+4*Y>>2],G[Y+1]=F[k+(4*Y+4)>>2],G[Y+2]=F[k+(4*Y+8)>>2],G[Y+3]=F[k+(4*Y+12)>>2];else G=F.subarray(k>>2,k+16*m>>2);ke.uniformMatrix2fv(cr(h),!!v,G)}},Ec:function(h,m,v,k){if(2<=nr.version)ke.uniformMatrix3fv(cr(h),!!v,F,k>>2,9*m);else{if(32>=m)for(var G=Ko[9*m-1],Y=0;Y<9*m;Y+=9)G[Y]=F[k+4*Y>>2],G[Y+1]=F[k+(4*Y+4)>>2],G[Y+2]=F[k+(4*Y+8)>>2],G[Y+3]=F[k+(4*Y+12)>>2],G[Y+4]=F[k+(4*Y+16)>>2],G[Y+5]=F[k+(4*Y+20)>>2],G[Y+6]=F[k+(4*Y+24)>>2],G[Y+7]=F[k+(4*Y+28)>>2],G[Y+8]=F[k+(4*Y+32)>>2];else G=F.subarray(k>>2,k+36*m>>2);ke.uniformMatrix3fv(cr(h),!!v,G)}},Fc:function(h,m,v,k){if(2<=nr.version)ke.uniformMatrix4fv(cr(h),!!v,F,k>>2,16*m);else{if(18>=m){var G=Ko[16*m-1],Y=F;k>>=2;for(var ve=0;ve<16*m;ve+=16){var be=k+ve;G[ve]=Y[be],G[ve+1]=Y[be+1],G[ve+2]=Y[be+2],G[ve+3]=Y[be+3],G[ve+4]=Y[be+4],G[ve+5]=Y[be+5],G[ve+6]=Y[be+6],G[ve+7]=Y[be+7],G[ve+8]=Y[be+8],G[ve+9]=Y[be+9],G[ve+10]=Y[be+10],G[ve+11]=Y[be+11],G[ve+12]=Y[be+12],G[ve+13]=Y[be+13],G[ve+14]=Y[be+14],G[ve+15]=Y[be+15]}}else G=F.subarray(k>>2,k+64*m>>2);ke.uniformMatrix4fv(cr(h),!!v,G)}},Gc:function(h){h=ms[h],ke.useProgram(h),ke.Df=h},Hc:function(h,m){ke.vertexAttrib1f(h,m)},Ic:function(h,m){ke.vertexAttrib2f(h,F[m>>2],F[m+4>>2])},Jc:function(h,m){ke.vertexAttrib3f(h,F[m>>2],F[m+4>>2],F[m+8>>2])},Kc:function(h,m){ke.vertexAttrib4f(h,F[m>>2],F[m+4>>2],F[m+8>>2],F[m+12>>2])},lc:function(h,m){ke.vertexAttribDivisor(h,m)},mc:function(h,m,v,k,G){ke.vertexAttribIPointer(h,m,v,k,G)},Lc:function(h,m,v,k,G,Y){ke.vertexAttribPointer(h,m,v,!!k,G,Y)},Mc:function(h,m,v,k){ke.viewport(h,m,v,k)},gb:function(h,m,v,k){ke.waitSync(Ua[h],m,(v>>>0)+4294967296*k)},e:function(h,m){throw ii(h,m||1),"longjmp"},pb:function(h){var m=fe.length;if(h>>>=0,2147483648<h)return!1;for(var v=1;4>=v;v*=2){var k=m*(1+.2/v);k=Math.min(k,h+100663296),k=Math.max(h,k),0<k%65536&&(k+=65536-k%65536);e:{try{Q.grow(Math.min(2147483648,k)-Ee.byteLength+65535>>>16),W();var G=1;break e}catch{}G=void 0}if(G)return!0}return!1},ub:function(h,m){var v=0;return Vg().forEach(function(k,G){var Y=m+v;for(G=Z[h+4*G>>2]=Y,Y=0;Y<k.length;++Y)Se[G++>>0]=k.charCodeAt(Y);Se[G>>0]=0,v+=k.length+1}),0},vb:function(h,m){var v=Vg();Z[h>>2]=v.length;var k=0;return v.forEach(function(G){k+=G.length+1}),Z[m>>2]=k,0},Gb:function(h){K||(n.onExit&&n.onExit(h),ue=!0),f(h,new Qg(h))},G:function(){return 0},tb:function(h,m){return h=h==1||h==2?2:Ye(),Se[m>>0]=h,0},nb:function(h,m,v,k,G,Y){return h=Mt.Nf(h),m=Mt.Ef(h,m,v,k),Z[Y>>2]=m,0},wb:function(h,m,v,k){return h=Mt.Nf(h),m=Mt.Ef(h,m,v),Z[k>>2]=m,0},mb:function(){},M:function(h,m,v,k){for(var G=0,Y=0;Y<v;Y++){for(var ve=Z[m+8*Y>>2],be=Z[m+(8*Y+4)>>2],Me=0;Me<be;Me++){var Ne=fe[ve+Me],ct=Rt[h];Ne===0||Ne===10?((h===1?I:M)(Ue(ct,0)),ct.length=0):ct.push(Ne)}G+=be}return Z[k>>2]=G,0},a:function(){return R},l:Yv,o:qv,g:Jv,C:iE,Lb:eE,V:rE,U:oE,T:aE,n:qg,r:Zv,i:Qv,q:tE,Jb:Hl,Hb:sE,Ib:nE,b:function(h){R=h},sb:function(h,m,v,k){return Kv(h,m,v,k)}};(function(){function h(G){n.asm=G.exports,Q=n.asm.$c,W(),te=n.asm.cd,ye.unshift(n.asm.ad),we--,n.monitorRunDependencies&&n.monitorRunDependencies(we),we==0&&De&&(G=De,De=null,G())}function m(G){h(G.instance)}function v(G){return _t().then(function(Y){return WebAssembly.instantiate(Y,k)}).then(G,function(Y){M("failed to asynchronously prepare wasm: "+Y),Ye(Y)})}var k={a:Xv};if(we++,n.monitorRunDependencies&&n.monitorRunDependencies(we),n.instantiateWasm)try{return n.instantiateWasm(k,h)}catch(G){return M("Module.instantiateWasm callback failed with error: "+G),!1}return function(){return L||typeof WebAssembly.instantiateStreaming!="function"||$e()||Qe.startsWith("file://")||typeof fetch!="function"?v(m):fetch(Qe,{credentials:"same-origin"}).then(function(G){return WebAssembly.instantiateStreaming(G,k).then(m,function(Y){return M("wasm streaming compile failed: "+Y),M("falling back to ArrayBuffer instantiation"),v(m)})})}().catch(a),{}})(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.ad).apply(null,arguments)};var Xg=n._memset=function(){return(Xg=n._memset=n.asm.bd).apply(null,arguments)},zl=n._malloc=function(){return(zl=n._malloc=n.asm.dd).apply(null,arguments)},is=n._free=function(){return(is=n._free=n.asm.ed).apply(null,arguments)},Qu=n.___errno_location=function(){return(Qu=n.___errno_location=n.asm.fd).apply(null,arguments)},Yg=n.___getTypeName=function(){return(Yg=n.___getTypeName=n.asm.gd).apply(null,arguments)};n.___embind_register_native_and_builtin_types=function(){return(n.___embind_register_native_and_builtin_types=n.asm.hd).apply(null,arguments)};var Oi=n.stackSave=function(){return(Oi=n.stackSave=n.asm.id).apply(null,arguments)},Ni=n.stackRestore=function(){return(Ni=n.stackRestore=n.asm.jd).apply(null,arguments)},ii=n._setThrew=function(){return(ii=n._setThrew=n.asm.kd).apply(null,arguments)},ys=n._memalign=function(){return(ys=n._memalign=n.asm.ld).apply(null,arguments)};n.dynCall_iiiji=function(){return(n.dynCall_iiiji=n.asm.md).apply(null,arguments)},n.dynCall_ji=function(){return(n.dynCall_ji=n.asm.nd).apply(null,arguments)},n.dynCall_iiji=function(){return(n.dynCall_iiji=n.asm.od).apply(null,arguments)},n.dynCall_iijjiii=function(){return(n.dynCall_iijjiii=n.asm.pd).apply(null,arguments)},n.dynCall_iij=function(){return(n.dynCall_iij=n.asm.qd).apply(null,arguments)},n.dynCall_vijjjii=function(){return(n.dynCall_vijjjii=n.asm.rd).apply(null,arguments)},n.dynCall_viji=function(){return(n.dynCall_viji=n.asm.sd).apply(null,arguments)},n.dynCall_vijiii=function(){return(n.dynCall_vijiii=n.asm.td).apply(null,arguments)},n.dynCall_viiiiij=function(){return(n.dynCall_viiiiij=n.asm.ud).apply(null,arguments)},n.dynCall_viijii=function(){return(n.dynCall_viijii=n.asm.vd).apply(null,arguments)},n.dynCall_jii=function(){return(n.dynCall_jii=n.asm.wd).apply(null,arguments)},n.dynCall_iiij=function(){return(n.dynCall_iiij=n.asm.xd).apply(null,arguments)},n.dynCall_iiiij=function(){return(n.dynCall_iiiij=n.asm.yd).apply(null,arguments)},n.dynCall_viij=function(){return(n.dynCall_viij=n.asm.zd).apply(null,arguments)},n.dynCall_viiij=function(){return(n.dynCall_viiij=n.asm.Ad).apply(null,arguments)},n.dynCall_vij=function(){return(n.dynCall_vij=n.asm.Bd).apply(null,arguments)},n.dynCall_jiiii=function(){return(n.dynCall_jiiii=n.asm.Cd).apply(null,arguments)},n.dynCall_jiiiiii=function(){return(n.dynCall_jiiiiii=n.asm.Dd).apply(null,arguments)},n.dynCall_jiiiiji=function(){return(n.dynCall_jiiiiji=n.asm.Ed).apply(null,arguments)},n.dynCall_iijj=function(){return(n.dynCall_iijj=n.asm.Fd).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.Gd).apply(null,arguments)},n.dynCall_iiiiij=function(){return(n.dynCall_iiiiij=n.asm.Hd).apply(null,arguments)},n.dynCall_iiiiijj=function(){return(n.dynCall_iiiiijj=n.asm.Id).apply(null,arguments)},n.dynCall_iiiiiijj=function(){return(n.dynCall_iiiiiijj=n.asm.Jd).apply(null,arguments)};function Yv(h,m){var v=Oi();try{return te.get(h)(m)}catch(k){if(Ni(v),k!==k+0&&k!=="longjmp")throw k;ii(1,0)}}function qv(h,m,v){var k=Oi();try{return te.get(h)(m,v)}catch(G){if(Ni(k),G!==G+0&&G!=="longjmp")throw G;ii(1,0)}}function Qv(h,m,v,k){var G=Oi();try{te.get(h)(m,v,k)}catch(Y){if(Ni(G),Y!==Y+0&&Y!=="longjmp")throw Y;ii(1,0)}}function Jv(h,m,v,k){var G=Oi();try{return te.get(h)(m,v,k)}catch(Y){if(Ni(G),Y!==Y+0&&Y!=="longjmp")throw Y;ii(1,0)}}function qg(h,m){var v=Oi();try{te.get(h)(m)}catch(k){if(Ni(v),k!==k+0&&k!=="longjmp")throw k;ii(1,0)}}function Zv(h,m,v){var k=Oi();try{te.get(h)(m,v)}catch(G){if(Ni(k),G!==G+0&&G!=="longjmp")throw G;ii(1,0)}}function eE(h,m,v,k,G,Y){var ve=Oi();try{return te.get(h)(m,v,k,G,Y)}catch(be){if(Ni(ve),be!==be+0&&be!=="longjmp")throw be;ii(1,0)}}function tE(h,m,v,k,G){var Y=Oi();try{te.get(h)(m,v,k,G)}catch(ve){if(Ni(Y),ve!==ve+0&&ve!=="longjmp")throw ve;ii(1,0)}}function rE(h,m,v,k,G,Y,ve){var be=Oi();try{return te.get(h)(m,v,k,G,Y,ve)}catch(Me){if(Ni(be),Me!==Me+0&&Me!=="longjmp")throw Me;ii(1,0)}}function iE(h,m,v,k,G){var Y=Oi();try{return te.get(h)(m,v,k,G)}catch(ve){if(Ni(Y),ve!==ve+0&&ve!=="longjmp")throw ve;ii(1,0)}}function Hl(h,m,v,k,G,Y){var ve=Oi();try{te.get(h)(m,v,k,G,Y)}catch(be){if(Ni(ve),be!==be+0&&be!=="longjmp")throw be;ii(1,0)}}function nE(h,m,v,k,G,Y,ve,be,Me,Ne){var ct=Oi();try{te.get(h)(m,v,k,G,Y,ve,be,Me,Ne)}catch(kt){if(Ni(ct),kt!==kt+0&&kt!=="longjmp")throw kt;ii(1,0)}}function sE(h,m,v,k,G,Y,ve){var be=Oi();try{te.get(h)(m,v,k,G,Y,ve)}catch(Me){if(Ni(be),Me!==Me+0&&Me!=="longjmp")throw Me;ii(1,0)}}function oE(h,m,v,k,G,Y,ve,be,Me,Ne){var ct=Oi();try{return te.get(h)(m,v,k,G,Y,ve,be,Me,Ne)}catch(kt){if(Ni(ct),kt!==kt+0&&kt!=="longjmp")throw kt;ii(1,0)}}function aE(h){var m=Oi();try{te.get(h)()}catch(v){if(Ni(m),v!==v+0&&v!=="longjmp")throw v;ii(1,0)}}var Wh;function Qg(h){this.name="ExitStatus",this.message="Program terminated with exit("+h+")",this.status=h}De=function h(){Wh||e_(),Wh||(De=h)};function e_(){function h(){if(!Wh&&(Wh=!0,n.calledRun=!0,!ue)){if(st(ye),o(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var m=n.postRun.shift();oe.unshift(m)}st(oe)}}if(!(0<we)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)le();st(de),0<we||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),h()},1)):h())}}if(n.run=e_,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return e_(),s.ready}}();r.exports=t})(SN);const m5=SN.exports,x5=""+new URL("canvaskit.63f87ea9.wasm",import.meta.url).href,y5={locateFile:()=>x5};let gr;async function v5(){gr=await m5(y5)}function lc(r){const e=new gr.Paint;try{return r(e)}finally{e.deleteLater()}}function E5(r){return e=>{const t=gr.Path.MakeFromSVGString(r);t||et();try{return e(t)}finally{t.deleteLater()}}}function S5(r){const e=new gr.Path;e||et();try{return r(e)}finally{e.deleteLater()}}var Gi=(r=>(r.none="none",r.arrow="default",r.pointer="pointer",r.grab="grab",r.grabbing="grabbing",r.move="move",r.text="text",r))(Gi||{});class h1 extends zt{constructor(t,i){super();u(this,"isActivated",!1);u(this,"_cursorBefore");u(this,"_phase",Ks.noop);this.canvas=t,this.cursor=i}get phase(){return this._phase}set phase(t){this._phase=t}activate(){this.isActivated=!0,this._cursorBefore=this.canvas.view.currentCursor(),this.useCursor(this.cursor)}deactivate(){this.isActivated=!1,this._cursorBefore||et(),this.useCursor(this._cursorBefore),this._cursorBefore=void 0}useCursor(t){this.canvas.view.setCursor(t)}resetCursorStyle(){this.useCursor(this.cursor)}convertToPixelCoord(t){return{x:Math.round(t.clientX),y:Math.round(t.clientY)}}processEvent(t){}isStrokeTool(){return!1}}class Z0 extends h1{beginPrimaryAction(e){}continuePrimaryAction(e){}endPrimaryAction(e){}isStrokeTool(){return!0}}var nw={exports:{}};(function(r,e){(function(t,i){{var s=i();r&&r.exports&&(e=r.exports=s),e.randomColor=s}})($,function(){var t=null,i={};D();var s=[],n=function(M){if(M=M||{},M.seed!==void 0&&M.seed!==null&&M.seed===parseInt(M.seed,10))t=M.seed;else if(typeof M.seed=="string")t=j(M.seed);else{if(M.seed!==void 0&&M.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var R,L,K;if(M.count!==null&&M.count!==void 0){for(var Q=M.count,ue=[],ae=0;ae<M.count;ae++)s.push(!1);for(M.count=null;Q>ue.length;){var Re=n(M);t!==null&&(M.seed=t),ue.push(Re)}return M.count=Q,ue}return R=o(M),L=a(R,M),K=l(R,L,M),c([R,L,K],M)};function o(M){if(s.length>0){var R=I(M.hue),L=E(R),K=(R[1]-R[0])/s.length,Q=parseInt((L-R[0])/K);s[Q]===!0?Q=(Q+2)%s.length:s[Q]=!0;var ue=(R[0]+Q*K)%359,ae=(R[0]+(Q+1)*K)%359;return R=[ue,ae],L=E(R),L<0&&(L=360+L),L}else{var R=f(M.hue);return L=E(R),L<0&&(L=360+L),L}}function a(M,R){if(R.hue==="monochrome")return 0;if(R.luminosity==="random")return E([0,100]);var L=g(M),K=L[0],Q=L[1];switch(R.luminosity){case"bright":K=55;break;case"dark":K=Q-10;break;case"light":Q=55;break}return E([K,Q])}function l(M,R,L){var K=d(M,R),Q=100;switch(L.luminosity){case"dark":Q=K+20;break;case"light":K=(Q+K)/2;break;case"random":K=0,Q=100;break}return E([K,Q])}function c(M,R){switch(R.format){case"hsvArray":return M;case"hslArray":return N(M);case"hsl":var L=N(M);return"hsl("+L[0]+", "+L[1]+"%, "+L[2]+"%)";case"hsla":var K=N(M),ae=R.alpha||Math.random();return"hsla("+K[0]+", "+K[1]+"%, "+K[2]+"%, "+ae+")";case"rgbArray":return C(M);case"rgb":var Q=C(M);return"rgb("+Q.join(", ")+")";case"rgba":var ue=C(M),ae=R.alpha||Math.random();return"rgba("+ue.join(", ")+", "+ae+")";default:return P(M)}}function d(M,R){for(var L=x(M).lowerBounds,K=0;K<L.length-1;K++){var Q=L[K][0],ue=L[K][1],ae=L[K+1][0],Re=L[K+1][1];if(R>=Q&&R<=ae){var Ue=(Re-ue)/(ae-Q),rt=ue-Ue*Q;return Ue*R+rt}}return 0}function f(M){if(typeof parseInt(M)=="number"){var R=parseInt(M);if(R<360&&R>0)return[R,R]}if(typeof M=="string"){if(i[M]){var L=i[M];if(L.hueRange)return L.hueRange}else if(M.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var K=O(M)[0];return[K,K]}}return[0,360]}function g(M){return x(M).saturationRange}function x(M){M>=334&&M<=360&&(M-=360);for(var R in i){var L=i[R];if(L.hueRange&&M>=L.hueRange[0]&&M<=L.hueRange[1])return i[R]}return"Color not found"}function E(M){if(t===null){var R=.618033988749895,L=Math.random();return L+=R,L%=1,Math.floor(M[0]+L*(M[1]+1-M[0]))}else{var K=M[1]||1,Q=M[0]||0;t=(t*9301+49297)%233280;var ue=t/233280;return Math.floor(Q+ue*(K-Q))}}function P(M){var R=C(M);function L(Q){var ue=Q.toString(16);return ue.length==1?"0"+ue:ue}var K="#"+L(R[0])+L(R[1])+L(R[2]);return K}function b(M,R,L){var K=L[0][0],Q=L[L.length-1][0],ue=L[L.length-1][1],ae=L[0][1];i[M]={hueRange:R,lowerBounds:L,saturationRange:[K,Q],brightnessRange:[ue,ae]}}function D(){b("monochrome",null,[[0,0],[100,0]]),b("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),b("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),b("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),b("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),b("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),b("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),b("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function C(M){var R=M[0];R===0&&(R=1),R===360&&(R=359),R=R/360;var L=M[1]/100,K=M[2]/100,Q=Math.floor(R*6),ue=R*6-Q,ae=K*(1-L),Re=K*(1-ue*L),Ue=K*(1-(1-ue)*L),rt=256,Ve=256,Fe=256;switch(Q){case 0:rt=K,Ve=Ue,Fe=ae;break;case 1:rt=Re,Ve=K,Fe=ae;break;case 2:rt=ae,Ve=K,Fe=Ue;break;case 3:rt=ae,Ve=Re,Fe=K;break;case 4:rt=Ue,Ve=ae,Fe=K;break;case 5:rt=K,Ve=ae,Fe=Re;break}var nt=[Math.floor(rt*255),Math.floor(Ve*255),Math.floor(Fe*255)];return nt}function O(M){M=M.replace(/^#/,""),M=M.length===3?M.replace(/(.)/g,"$1$1"):M;var R=parseInt(M.substr(0,2),16)/255,L=parseInt(M.substr(2,2),16)/255,K=parseInt(M.substr(4,2),16)/255,Q=Math.max(R,L,K),ue=Q-Math.min(R,L,K),ae=Q?ue/Q:0;switch(Q){case R:return[60*((L-K)/ue%6)||0,ae,Q];case L:return[60*((K-R)/ue+2)||0,ae,Q];case K:return[60*((R-L)/ue+4)||0,ae,Q]}}function N(M){var R=M[0],L=M[1]/100,K=M[2]/100,Q=(2-L)*K;return[R,Math.round(L*K/(Q<1?Q:2-Q)*1e4)/100,Q/2*100]}function j(M){for(var R=0,L=0;L!==M.length&&!(R>=Number.MAX_SAFE_INTEGER);L++)R+=M.charCodeAt(L);return R}function I(M){if(isNaN(M)){if(typeof M=="string"){if(i[M]){var L=i[M];if(L.hueRange)return L.hueRange}else if(M.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var K=O(M)[0];return x(K).hueRange}}}else{var R=parseInt(M);if(R<360&&R>0)return x(M).hueRange}return[0,360]}return n})})(nw,nw.exports);const w5=nw.exports;function sy(r){return`${r}px`}function wN(r){return`matrix(${r.a}, ${r.b}, ${r.c}, ${r.d}, ${r.tx}, ${r.ty})`}const fd=class{constructor(e){this.symbol=e,Object.freeze(this)}static fromFullPath(e){const t=Symbol.for(`${e.join("/")}`);return this.instances.has(t)||this.instances.set(t,new fd(t)),this.instances.get(t)}createChild(e){const t=Symbol.keyFor(this.symbol);return fd.fromFullPath(t.split("/").concat(e))}get key(){return Symbol.keyFor(this.symbol)}get name(){return Qs(this.key.split("/"))}get parent(){const e=this.key.split("/");if(e.length!==1)return e.pop(),fd.fromFullPath(e)}get path(){return this.key.split("/")}EQ(e){return this.symbol===e.symbol}NE(e){return this.symbol!==e.symbol}*[Symbol.iterator](){const e=this.path;for(let t=0,i=e.length;t<i;t++)yield fd.fromFullPath(e.slice(0,t+1))}};let Hp=fd;u(Hp,"instances",new Map);const A5=Hp.fromFullPath([""]),gT=class{constructor(e,t){this.id=e,this.scope=t,Object.freeze(this)}static create(e,t){let i=this.scoped.get(t);return i||(i=new Map,this.scoped.set(t,i)),i.has(e)||i.set(e,new gT(e,t)),i.get(e)}EQ(e){return this.id===e.id&&this.scope.EQ(e.scope)}NE(e){return!this.EQ(e)}};let nx=gT;u(nx,"scoped",new WeakMap);var d1=(r=>(r.TrailingBreak="TrailingBreak",r))(d1||{});const Ac="id",sw="data-scope",AN="data-root",m0="data-com-type";function b5(r){return r.getAttribute(sw)||""}function bN(r){return r.getAttribute(AN)||""}function k5(r){return!!bN(r)}function kN(r){return r.getAttribute(Ac)||""}function TN(r){const e=b5(r).split("/");if(k5(r)){const t=kN(r);e.push(t)}return Hp.fromFullPath(e)}function o_(r){let e=r;const t=[];let i=0;for(;e;){const s=Object.create(null);if(e.hasAttribute(Ac)){const n=bN(e);n?s.id=n:s.id=kN(e),s.scope=TN(e),t[i++]=s}if(e.tagName==="BODY")break;e=e.parentElement}return t.reverse()}var oi=(r=>(r.Root="root",r.Image="image",r.Text="text",r.Block="block",r.Fragment="fragment",r))(oi||{});function ab(r,e){return`${Reflect.get(r,"name")}::${Reflect.get(e,"name")}`}var oy=(r=>(r[r.kDispatchSubtreeModifiedEvent=0]="kDispatchSubtreeModifiedEvent",r[r.kOmitSubtreeModifiedEvent=1]="kOmitSubtreeModifiedEvent",r))(oy||{});class T5{constructor(e){u(this,"base_");u(this,"current_");this.base_=e}First(){return this.current_=this.base_.firstChild,this.current_}Next(){if(!!this.current_){if(this.current_.firstChild)this.current_=this.current_.firstChild;else{for(;!this.current_.next_sibling();)if(this.current_=this.current_.parentNode,this.current_===this.base_)return this.current_=void 0,this.current_;this.current_=this.current_.next_sibling()}return this.current_}}}class ow{constructor(){u(this,"collection_",[])}Length(){return this.collection_.length}get length(){return this.Length()}Item(e){return this.collection_[e]}AppendNode(e){this.collection_.push(e)}Clear(){this.collection_.length=0}indexOf(e){return this.collection_.indexOf(e)}[Symbol.iterator](){let e=0;return{next:()=>{if(e<this.Length()){let t=this.Item(e);return e++,{value:t,done:!1}}else return{value:void 0,done:!0}}}}}class P5{constructor(e){u(this,"parent_");u(this,"current_");this.parent_=e}First(){return this.current_=this.parent_.firstChild,this.current_}Next(){return this.current_&&(this.current_=this.current_.next_sibling()),this.current_}}class lb extends ow{constructor(t){super();u(this,"base_");u(this,"base_node_generation_");this.base_=t,this.base_node_generation_=PN.kInvalidNodeGeneration}static CreateWithChildren(t){return J(t),new Proxy(new lb(t),{get:function(i,s,n){if(uo(s)){let o=parseInt(s);if(!Number.isNaN(o))return i.Item(o)}return Reflect.get(i,s)}})}Length(){return this.MaybeRefreshCollection(),super.Length()}get length(){return this.MaybeRefreshCollection(),super.length}Item(t){return this.MaybeRefreshCollection(),super.Item(t)}MaybeRefreshCollection(){if(this.base_node_generation_!=this.base_.node_generation()){this.Clear();let t=new P5(this.base_),i=t.First();for(;i;)this.AppendNode(i),i=t.Next();this.base_node_generation_=this.base_.node_generation()}}}var bo=(r=>(r[r.kElementNode=1]="kElementNode",r[r.kTextNode=3]="kTextNode",r[r.kCommentNode=8]="kCommentNode",r[r.kDocumentNode=9]="kDocumentNode",r))(bo||{}),PN=(r=>(r[r.kInvalidNodeGeneration=0]="kInvalidNodeGeneration",r[r.kInitialNodeGeneration=1]="kInitialNodeGeneration",r))(PN||{});class RN{}const sx=2,ox=4,aw=15,R5=17;var D5=(r=>(r[r.kNoStyleChange=0]="kNoStyleChange",r[r.kLocalStyleChange=1<<aw]="kLocalStyleChange",r[r.kSubtreeStyleChange=2<<aw]="kSubtreeStyleChange",r))(D5||{}),C5=(r=>(r[r.kHasRareDataFlag=1]="kHasRareDataFlag",r[r.kIsContainerFlag=2]="kIsContainerFlag",r[r.kDOMNodeTypeMask=3<<sx]="kDOMNodeTypeMask",r[r.kElementNamespaceTypeMask=3<<ox]="kElementNamespaceTypeMask",r[r.kIsLinkFlag=64]="kIsLinkFlag",r[r.kIsUserActionElementFlag=128]="kIsUserActionElementFlag",r[r.kIsConnectedFlag=256]="kIsConnectedFlag",r[r.kIsInShadowTreeFlag=512]="kIsInShadowTreeFlag",r[r.kIsFinishedParsingChildrenFlag=1024]="kIsFinishedParsingChildrenFlag",r[r.kHasCustomStyleCallbacksFlag=2048]="kHasCustomStyleCallbacksFlag",r[r.kChildNeedsStyleInvalidationFlag=4096]="kChildNeedsStyleInvalidationFlag",r[r.kNeedsStyleInvalidationFlag=8192]="kNeedsStyleInvalidationFlag",r[r.kChildNeedsStyleRecalcFlag=16384]="kChildNeedsStyleRecalcFlag",r[r.kStyleChangeMask=3<<aw]="kStyleChangeMask",r[r.kCustomElementStateMask=7<<R5]="kCustomElementStateMask",r[r.kHasNameOrIsEditingTextFlag=1048576]="kHasNameOrIsEditingTextFlag",r[r.kHasEventTargetDataFlag=2097152]="kHasEventTargetDataFlag",r[r.kNeedsReattachLayoutTree=4194304]="kNeedsReattachLayoutTree",r[r.kChildNeedsReattachLayoutTree=8388608]="kChildNeedsReattachLayoutTree",r[r.kHasDuplicateAttributes=16777216]="kHasDuplicateAttributes",r[r.kForceReattachLayoutTree=33554432]="kForceReattachLayoutTree",r[r.kHasDisplayLockContext=67108864]="kHasDisplayLockContext",r[r.kSelfOrAncestorHasDirAutoAttribute=134217728]="kSelfOrAncestorHasDirAutoAttribute",r[r.kCachedDirectionalityIsRtl=268435456]="kCachedDirectionalityIsRtl",r[r.kNeedsInheritDirectionalityFromParent=536870912]="kNeedsInheritDirectionalityFromParent",r[r.kDefaultNodeFlags=1024]="kDefaultNodeFlags",r))(C5||{}),cp=(r=>(r[r.kElement=0]="kElement",r[r.kText=1<<sx]="kText",r[r.kDocumentFragment=2<<sx]="kDocumentFragment",r[r.kOther=3<<sx]="kOther",r))(cp||{}),Ql=(r=>(r[r.kHTML=0]="kHTML",r[r.kMathML=1<<ox]="kMathML",r[r.kSVG=2<<ox]="kSVG",r[r.kOther=3<<ox]="kOther",r))(Ql||{}),Is=(r=>(r[r.kCreateNone=0]="kCreateNone",r[r.kCreateOther=1024|cp.kOther|Ql.kOther]="kCreateOther",r[r.kCreateText=1024|cp.kText|Ql.kOther]="kCreateText",r[r.kCreateContainer=1026|cp.kOther|Ql.kOther]="kCreateContainer",r[r.kCreateElement=1026|Ql.kOther]="kCreateElement",r[r.kCreateDocumentFragment=1026|cp.kDocumentFragment|Ql.kOther]="kCreateDocumentFragment",r[r.kCreateShadowRoot=r.kCreateDocumentFragment|512]="kCreateShadowRoot",r[r.kCreateHTMLElement=1026]="kCreateHTMLElement",r[r.kCreateMathMLElement=1026|Ql.kMathML]="kCreateMathMLElement",r[r.kCreateSVGElement=1026|Ql.kSVG]="kCreateSVGElement",r[r.kCreateDocument=r.kCreateContainer|256]="kCreateDocument",r[r.kCreateEditingText=r.kCreateText|1048576]="kCreateEditingText",r))(Is||{});class DN{constructor(e,t){u(this,"parent_");u(this,"first_child_");u(this,"last_child_");u(this,"next_sibling_");u(this,"previous_sibling_");u(this,"node_document_");u(this,"inserted_into_document_",!1);u(this,"node_value_");u(this,"node_generation_",1);u(this,"node_flags_",0);u(this,"layout_object_");this.node_flags_=e,t&&(this.node_document_=t)}IsDocument(){return this.getNodeType()===9}IsElement(){return this.getNodeType()===1}IsText(){return this.getNodeType()===3}isConnected(){return this.inserted_into_document_}get nodeType(){return this.getNodeType()}get nodeValue(){return this.node_value_}set nodeValue(e){}get firstChild(){return this.first_child_}get lastChild(){return this.last_child_}next_sibling(){return this.next_sibling_}get nextSibling(){return this.next_sibling()}previous_sibling(){return this.previous_sibling_}get previousSibling(){return this.previous_sibling()}SetPreviousSibling(e){this.previous_sibling_=e}SetNextSibling(e){this.next_sibling_=e}get childNodes(){return lb.CreateWithChildren(this)}get parentElement(){var e;return(e=this.parent_)==null?void 0:e.AsElement()}get parentNode(){return this.parent_}SetParentNode(e){this.parent_=e}GetDocument(){return this.node_document_}compareDocumentPosition(e){return ze()}AsComment(){}AsText(){}AsElement(){}AsCharacterData(){}AsContainerNode(){}get textContent(){let e=this.AsText();if(e)return e.data;let t=this.AsComment();if(t)return t.data;if(this.IsDocument())return"";let i="",s=this.firstChild;for(;s;)(s.IsText()||s.IsElement())&&(i+=s.textContent||""),s=s.next_sibling();return i}set textContent(e){switch(e=e||"",this.getNodeType()){case 3:case 8:this.nodeValue=e;return;case 1:{let t=this.AsContainerNode();if(J(t),this.childNodes.length==1){let s=this.first_child_.AsText();if(s&&s.data===e&&e.length>0)return}e?(t.RemoveChildren(oy.kOmitSubtreeModifiedEvent),t.appendChild(this.GetDocument().createTextNode(e))):t.RemoveChildren(oy.kDispatchSubtreeModifiedEvent)}case 9:return}et()}first_element_child(){let e=this.firstChild;for(;e;){if(e.IsElement())return e;e=e.nextSibling}}get lastElementChild(){let e=this.lastChild;for(;e;){if(e.IsElement())return e;e=e.previousSibling}}get nextElementSibling(){let e=this.next_sibling();for(;e;){if(e.IsElement())return e.AsElement();e=e.next_sibling()}}contains(e){let t=e;for(;t;){if(this===t)return!0;t=t.parentNode}return!1}CommonAncestor(e){if(this==e)return this;if(this.GetDocument()!=e.GetDocument())return;let t=0;for(let o=this;o;o=o.parentNode){if(o==e)return o;t++}let i=0;for(let o=e;o;o=o.parentNode){if(o==this)return this;i++}let s=this,n=e;if(t>i)for(let o=t;o>i;--o)s=Tn(s).parentNode;else if(i>t)for(let o=i;o>t;--o)n=Tn(n).parentNode;for(;s;){if(s==n)return s;s=Tn(s).parentNode,n=Tn(n).parentNode}J(!n)}HasChildNodes(){return!!this.first_child_}appendChild(e){return this.PreInsert(e)}removeChild(e){return this.PreRemove(e)}insertBefore(e,t){return this.PreInsert(e,t)}ReplaceAll(e){e&&e.AdoptIntoDocument(this.GetDocument());let t=new ow,i=this.first_child_;for(;i;)t.AppendNode(i),i=i.next_sibling();let s=new ow;for(e&&s.AppendNode(e);this.HasChildNodes();)this.Remove(this.firstChild,!0);e&&this.Insert(e,void 0,!0)}cloneNode(e){let t=this.Duplicate();if(J(t),e){let i=this.first_child_;for(;i;){let s=i.cloneNode(!0);J(s),t.appendChild(s),i=i.next_sibling_}}return t}node_generation(){return this.node_generation_}UpdateGenerationForNodeAndAncestors(){++this.node_generation_==0&&(this.node_generation_=1),this.parent_&&this.parent_.UpdateGenerationForNodeAndAncestors()}GetRootNode(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}AdoptIntoDocument(e){if(J(!this.IsDocument()),!e)return;this.parent_&&this.parent_.removeChild(this),this.node_document_=e;let t=new T5(this),i=t.First();for(;i;)i.node_document_=e,i=t.Next()}PreInsert(e,t){if(!!this.EnsurePreInsertionValidity(e,t))return e.AdoptIntoDocument(this.node_document_),this.Insert(e,t==e?t.nextSibling:t),e}EnsurePreInsertionValidity(e,t){if(!e||!this.IsDocument()&&!this.IsElement())return!1;let i=this;for(;i;){if(e==i)return!1;i=i.parentNode}return!(t&&t.parentNode!=this||e.IsDocument())}PreRemove(e){if(!(!e||e.parentNode!==this.AsContainerNode()))return this.Remove(e),e}Insert(e,t,i=!0){var o;e.parent_=this.AsContainerNode();let s=t,n=s?s.previous_sibling_:this.last_child_;n?n.next_sibling_=e:this.first_child_=e,e.previous_sibling_=n,s?s.previous_sibling_=e:this.last_child_=e,e.next_sibling_=s,this.OnMutation(),e.UpdateGenerationForNodeAndAncestors(),this.InvalidateLayoutBoxesOfNodeAndAncestors(),this.inserted_into_document_&&(e.OnInsertedIntoDocument(),(o=this.GetDocument())==null||o.OnDOMMutation())}OnInsertedIntoDocument(){J(this.node_document_),J(!this.inserted_into_document_),this.inserted_into_document_=!0,this.GetDocument().onNodeInserted(this);let e=this.first_child_;for(;e;)e.OnInsertedIntoDocument(),e=e.next_sibling_}OnRemovedFromDocument(){J(this.inserted_into_document_),this.inserted_into_document_=!1,this.GetDocument().onNodeRemoved(this);let e=this.first_child_;for(;e;)e.OnRemovedFromDocument(),e=e.next_sibling_}OnMutation(){}Remove(e,t=!0){var o;J(e),this.OnMutation(),e.UpdateGenerationForNodeAndAncestors(),this.InvalidateLayoutBoxesOfNodeAndAncestors(),e.InvalidateComputedStylesOfNodeAndDescendants(),e.InvalidateLayoutBoxesOfNodeAndDescendants(),e.inserted_into_document_&&(e.OnRemovedFromDocument(),e.MarkNotDisplayedOnNodeAndDescendants());let s=e.previous_sibling_;s?s.next_sibling_=e.next_sibling_:this.first_child_=e.next_sibling_;let n=e.next_sibling_;n?n.previous_sibling_=e.previous_sibling_:this.last_child_=e.previous_sibling_,e.parent_=void 0,e.previous_sibling_=void 0,e.next_sibling_=void 0,(o=e.GetDocument())==null||o.OnDOMMutation()}InvalidateLayoutBoxesOfNodeAndAncestors(){this.InvalidateLayoutBoxesOfAncestors()}InvalidateLayoutBoxesOfNodeAndDescendants(){this.InvalidateLayoutBoxesOfDescendants()}InvalidateLayoutBoxesOfAncestors(){this.parent_&&this.parent_.InvalidateLayoutBoxesOfNodeAndAncestors()}InvalidateLayoutBoxesOfDescendants(){let e=this.first_child_;for(;e;)e.InvalidateLayoutBoxesOfNodeAndDescendants(),e=e.next_sibling()}InvalidateComputedStylesOfNodeAndDescendants(){this.InvalidateComputedStylesOfDescendants()}InvalidateComputedStylesOfDescendants(){let e=this.first_child_;for(;e;)e.InvalidateComputedStylesOfNodeAndDescendants(),e=e.next_sibling()}MarkNotDisplayedOnDescendants(){let e=this.first_child_;for(;e;)e.MarkNotDisplayedOnNodeAndDescendants(),e=e.next_sibling_}MarkNotDisplayedOnNodeAndDescendants(){this.MarkNotDisplayedOnDescendants()}GetLayoutObject(){return this.layout_object_}SetLayoutObject(e){this.layout_object_=e}ClearFlag(e){this.node_flags_&=~e}GetFlag(e){return this.node_flags_&e}SetFlag(e){this.node_flags_|=e}ClearNeedsReattachLayoutTree(){this.ClearFlag(4194304)}ClearChildNeedsReattachLayoutTree(){this.ClearFlag(8388608)}ChildNeedsReattachLayoutTree(){return this.GetFlag(8388608)}SetHasDisplayLockContext(){this.SetFlag(67108864)}HasDisplayLockContext(){return this.GetFlag(67108864)}IsInUserAgentShadowRoot(){return console.warn("shadowroot"),!1}DispatchSubtreeModifiedEvent(){}}class CN extends RN{constructor(){super(...arguments);u(this,"entering_node_",!0);u(this,"out_stream_","")}VisitDocument(t){et()}VisitElement(t){this.entering_node_?(this.out_stream_+="<",this.out_stream_+=t.tagName,this.out_stream_=O5(t,this.out_stream_),this.out_stream_+=">"):(this.out_stream_+="</",this.out_stream_+=t.tagName,this.out_stream_+=">")}VisitText(t){this.entering_node_&&(this.out_stream_+=t.data)}SerializeDescendantsOnly(t){let i=t.firstChild;for(;i;)this.Serialize(i),i=i.next_sibling()}Serialize(t){this.entering_node_=!0,t.Accept(this),this.SerializeDescendantsOnly(t),this.entering_node_=!1,t.Accept(this)}SerializeSelfOnly(t){this.entering_node_=!0,t.Accept(this),t.firstChild&&(this.out_stream_+="..."),this.entering_node_=!1,t.Accept(this)}toString(){return this.out_stream_}VisitComment(t){this.entering_node_&&(this.out_stream_+="<!--",this.out_stream_+=t.data,this.out_stream_+="-->")}}function O5(r,e){let t=r.attributes;{const s=r.AsHTMLElement();s&&(e+=" style=",e+=s.style.toString())}let i=Array.from(t.keys());i.sort((s,n)=>s.localeCompare(n));for(let s of i){let n=s,o=t.get(s);e+=" ",e+=n,o.length&&(e+="=",e+='"',e+=o.toString(),e+='"')}return e}function $n(r,e,...t){J(r>=e)}function Rr(r,e){J(r<=e)}function Kt(r,e,...t){}class ON extends DN{ChildrenChangedAllChildrenRemovedNeedsList(){return!1}RemoveChildren(e){if(!!this.first_child_){this.WillRemoveChildren(),this.ChildrenChangedAllChildrenRemovedNeedsList();{{let t;for(;t=this.first_child_;)this.RemoveBetween(void 0,t.nextSibling,t)}e==oy.kDispatchSubtreeModifiedEvent&&this.DispatchSubtreeModifiedEvent()}}}RemoveBetween(e,t,i){Kt(i.parentNode),t&&t.SetPreviousSibling(e),e&&e.SetNextSibling(t),this.first_child_==i&&this.SetFirstChild(t),this.last_child_==i&&this.SetLastChild(e),i.SetPreviousSibling(void 0),i.SetNextSibling(void 0),i.SetParentNode(void 0)}GetChildNodes(){let e=[];for(let t=this.firstChild;t;t=t.nextSibling)e.push(t);return e}WillRemoveChildren(){let e=this.GetChildNodes();for(let t of e)J(t),this.DispatchChildRemovalEvents(t)}DispatchChildRemovalEvents(e){}NotifyNodeRemoved(e){}AsContainerNode(){return this}SetFirstChild(e){this.first_child_=e}SetLastChild(e){this.last_child_=e}}const uc="style";class N5 extends ON{constructor(t,i,s){var e=(...args)=>{super(...args);u(this,"local_name_");u(this,"attribute_map_",new Map);u(this,"element_flags_",6)};uo(i)?(e(t||Is.kCreateElement),this.local_name_=i):(e(t||Is.kCreateElement,i),this.local_name_=s)}Accept(t){t.VisitElement(this)}getNodeType(){return bo.kElementNode}get nodeName(){return this.tagName}get tagName(){return this.local_name_}get className(){return this.getAttribute("class")||""}get id(){return this.getAttribute("id")||""}set id(t){this.setAttribute("id",t)}AsElement(){return this}AsHTMLElement(){}get attributes(){return this.attribute_map_}copyAttributes(t){this.attribute_map_=Js(t.attribute_map_)}setAttribute(t,i){let s=this.GetDocument(),n=i.toString(),o=t.toString();switch(s&&(o=o.toLocaleLowerCase()),o){case uc:ze();default:{if(this.attribute_map_.get(o)===n)return;this.attribute_map_.set(o,n);break}}switch(o){case"class":ze();break}s&&this.GetRootNode()==s&&s.OnDOMMutation(),this.OnSetAttribute(o,n)}getAttribute(t){let i=this.GetDocument(),s=t;switch(i&&(s=s.toLocaleLowerCase()),s.length){case 5:if(s==uc)return this.GetStyleAttribute();default:return this.attribute_map_.get(s)||null}}removeAttribute(t){let i=this.GetDocument(),s=t;switch(i&&!i.IsXMLDocument()&&(s=s.toLowerCase()),this.getAttribute(s),s.length){case 5:if(s==uc){this.RemoveStyleAttribute();break}default:{this.attribute_map_.delete(s);break}}switch(s.length){case 2:break;case 5:s=="class"&&this.UpdateGenerationForNodeAndAncestors();break}i&&this.GetRootNode()==i&&i.OnDOMMutation(),this.OnRemoveAttribute(s)}GetStyleAttribute(){return this.attribute_map_.get(uc)||null}RemoveStyleAttribute(){this.attribute_map_.delete(uc)}hasAttribute(t){let i=this.GetDocument(),s=t;return i&&!i.IsXMLDocument()&&(s=s.toLowerCase()),this.attribute_map_.has(s)}inner_html(){let t=new CN;return t.SerializeDescendantsOnly(this),t.toString()}IsInTopLayer(){return this.HasElementFlag(16)}HasElementFlag(t){return Ti(this.element_flags_)?!1:!!(this.element_flags_&t)}getBoundingClientRects(){const t=this.GetLayoutObject();J(t);const i=t.box.GetClientRect();return new DOMRect(i.x().toFloat(),i.y().toFloat(),i.width().toFloat(),i.height().toFloat())}}class qn{}const I5="absolute",F5="alternate",M5="alternate-reverse",B5="auto",L5="backwards",U5="baseline",G5="block",z5="bold",H5="both",j5="bottom",V5="break-word",W5="center",$5="clip",K5="collapse",X5="column",Y5="column-reverse",q5="contain",Q5="content",J5="cover",Z5="currentColor",e6="cursive",t6="ellipsis",r6="end",i6="equirectangular",n6="fantasy",s6="fixed",o6="flex-end",a6="flex",l6="flex-start",u6="forwards",c6="hidden",h6="infinite",d6="inherit",f6="initial",_6="inline-block",p6="inline-flex",g6="inline",m6="inset",x6="italic",y6="left",v6="line-through",E6="middle",S6="monoscopic",w6="monospace",A6="none",b6="no-repeat",ub="normal",k6="nowrap",T6="oblique",P6="pre",R6="pre-line",D6="pre-wrap",C6="relative",O6="repeat",N6="reverse",I6="right",F6="row",M6="row-reverse",B6="sans-serif",L6="scroll",U6="serif",G6="solid",z6="space-around",H6="space-between",j6="start",V6="static",W6="stereoscopic-left-right",$6="stereoscopic-top-bottom",K6="stretch",X6="top",Y6="uppercase",q6="visible",Q6="wrap",J6="wrap-reverse",om=new Map;function rr(r){if(om.has(r))return om.get(r);let e=om.size+1;return om.set(r,e),e}var Z6=typeof global=="object"&&global&&global.Object===Object&&global;const e7=Z6;var t7=typeof self=="object"&&self&&self.Object===Object&&self,r7=e7||t7||Function("return this")();const i7=r7;var n7=i7.Symbol;const Vd=n7;var NN=Object.prototype,s7=NN.hasOwnProperty,o7=NN.toString,a_=Vd?Vd.toStringTag:void 0;function a7(r){var e=s7.call(r,a_),t=r[a_];try{r[a_]=void 0;var i=!0}catch{}var s=o7.call(r);return i&&(e?r[a_]=t:delete r[a_]),s}var l7=Object.prototype,u7=l7.toString;function c7(r){return u7.call(r)}var h7="[object Null]",d7="[object Undefined]",BP=Vd?Vd.toStringTag:void 0;function f7(r){return r==null?r===void 0?d7:h7:BP&&BP in Object(r)?a7(r):c7(r)}function _7(r){return r!=null&&typeof r=="object"}var p7="[object Symbol]";function g7(r){return typeof r=="symbol"||_7(r)&&f7(r)==p7}function m7(r,e){for(var t=-1,i=r==null?0:r.length,s=Array(i);++t<i;)s[t]=e(r[t],t,r);return s}var x7=Array.isArray;const y7=x7;var v7=1/0,LP=Vd?Vd.prototype:void 0,UP=LP?LP.toString:void 0;function IN(r){if(typeof r=="string")return r;if(y7(r))return m7(r,IN)+"";if(g7(r))return UP?UP.call(r):"";var e=r+"";return e=="0"&&1/r==-v7?"-0":e}function f1(r){return r==null?"":IN(r)}function E7(r,e,t){var i=-1,s=r.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var n=Array(s);++i<s;)n[i]=r[i+e];return n}function S7(r,e,t){var i=r.length;return t=t===void 0?i:t,!e&&t>=i?r:E7(r,e,t)}var w7="\\ud800-\\udfff",A7="\\u0300-\\u036f",b7="\\ufe20-\\ufe2f",k7="\\u20d0-\\u20ff",T7=A7+b7+k7,P7="\\ufe0e\\ufe0f",R7="\\u200d",D7=RegExp("["+R7+w7+T7+P7+"]");function FN(r){return D7.test(r)}function C7(r){return r.split("")}var MN="\\ud800-\\udfff",O7="\\u0300-\\u036f",N7="\\ufe20-\\ufe2f",I7="\\u20d0-\\u20ff",F7=O7+N7+I7,M7="\\ufe0e\\ufe0f",B7="["+MN+"]",lw="["+F7+"]",uw="\\ud83c[\\udffb-\\udfff]",L7="(?:"+lw+"|"+uw+")",BN="[^"+MN+"]",LN="(?:\\ud83c[\\udde6-\\uddff]){2}",UN="[\\ud800-\\udbff][\\udc00-\\udfff]",U7="\\u200d",GN=L7+"?",zN="["+M7+"]?",G7="(?:"+U7+"(?:"+[BN,LN,UN].join("|")+")"+zN+GN+")*",z7=zN+GN+G7,H7="(?:"+[BN+lw+"?",lw,LN,UN,B7].join("|")+")",j7=RegExp(uw+"(?="+uw+")|"+H7+z7,"g");function V7(r){return r.match(j7)||[]}function W7(r){return FN(r)?V7(r):C7(r)}function $7(r){return function(e){e=f1(e);var t=FN(e)?W7(e):void 0,i=t?t[0]:e.charAt(0),s=t?S7(t,1).join(""):e.slice(1);return i[r]()+s}}var K7=$7("toUpperCase");const X7=K7;function Y7(r){return X7(f1(r).toLowerCase())}function q7(r,e,t,i){var s=-1,n=r==null?0:r.length;for(i&&n&&(t=r[++s]);++s<n;)t=e(t,r[s],s,r);return t}function Q7(r){return function(e){return r==null?void 0:r[e]}}var J7={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Z7=Q7(J7);const eG=Z7;var tG=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rG="\\u0300-\\u036f",iG="\\ufe20-\\ufe2f",nG="\\u20d0-\\u20ff",sG=rG+iG+nG,oG="["+sG+"]",aG=RegExp(oG,"g");function lG(r){return r=f1(r),r&&r.replace(tG,eG).replace(aG,"")}var uG=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function cG(r){return r.match(uG)||[]}var hG=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function dG(r){return hG.test(r)}var HN="\\ud800-\\udfff",fG="\\u0300-\\u036f",_G="\\ufe20-\\ufe2f",pG="\\u20d0-\\u20ff",gG=fG+_G+pG,jN="\\u2700-\\u27bf",VN="a-z\\xdf-\\xf6\\xf8-\\xff",mG="\\xac\\xb1\\xd7\\xf7",xG="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yG="\\u2000-\\u206f",vG=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",WN="A-Z\\xc0-\\xd6\\xd8-\\xde",EG="\\ufe0e\\ufe0f",$N=mG+xG+yG+vG,KN="['\u2019]",GP="["+$N+"]",SG="["+gG+"]",XN="\\d+",wG="["+jN+"]",YN="["+VN+"]",qN="[^"+HN+$N+XN+jN+VN+WN+"]",AG="\\ud83c[\\udffb-\\udfff]",bG="(?:"+SG+"|"+AG+")",kG="[^"+HN+"]",QN="(?:\\ud83c[\\udde6-\\uddff]){2}",JN="[\\ud800-\\udbff][\\udc00-\\udfff]",Zh="["+WN+"]",TG="\\u200d",zP="(?:"+YN+"|"+qN+")",PG="(?:"+Zh+"|"+qN+")",HP="(?:"+KN+"(?:d|ll|m|re|s|t|ve))?",jP="(?:"+KN+"(?:D|LL|M|RE|S|T|VE))?",ZN=bG+"?",e3="["+EG+"]?",RG="(?:"+TG+"(?:"+[kG,QN,JN].join("|")+")"+e3+ZN+")*",DG="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CG="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",OG=e3+ZN+RG,NG="(?:"+[wG,QN,JN].join("|")+")"+OG,IG=RegExp([Zh+"?"+YN+"+"+HP+"(?="+[GP,Zh,"$"].join("|")+")",PG+"+"+jP+"(?="+[GP,Zh+zP,"$"].join("|")+")",Zh+"?"+zP+"+"+HP,Zh+"+"+jP,CG,DG,XN,NG].join("|"),"g");function FG(r){return r.match(IG)||[]}function MG(r,e,t){return r=f1(r),e=t?void 0:e,e===void 0?dG(r)?FG(r):cG(r):r.match(e)||[]}var BG="['\u2019]",LG=RegExp(BG,"g");function UG(r){return function(e){return q7(MG(lG(e).replace(LG,"")),r,"")}}var GG=UG(function(r,e,t){return e=e.toLowerCase(),r+(t?Y7(e):e)});const zG=GG;var _=(r=>(r[r.kAbsolute=0]="kAbsolute",r[r.kAlternate=1]="kAlternate",r[r.kAlternateReverse=2]="kAlternateReverse",r[r.kAuto=3]="kAuto",r[r.kBackwards=4]="kBackwards",r[r.kBaseline=5]="kBaseline",r[r.kBlock=6]="kBlock",r[r.kBoth=7]="kBoth",r[r.kBottom=8]="kBottom",r[r.kBreakWord=9]="kBreakWord",r[r.kCenter=10]="kCenter",r[r.kClip=11]="kClip",r[r.kCollapse=12]="kCollapse",r[r.kColumn=13]="kColumn",r[r.kColumnReverse=14]="kColumnReverse",r[r.kContain=15]="kContain",r[r.kContent=16]="kContent",r[r.kCover=17]="kCover",r[r.kCurrentColor=18]="kCurrentColor",r[r.kCursive=19]="kCursive",r[r.kEllipsis=20]="kEllipsis",r[r.kEnd=21]="kEnd",r[r.kEquirectangular=22]="kEquirectangular",r[r.kFantasy=23]="kFantasy",r[r.kFixed=24]="kFixed",r[r.kFlex=25]="kFlex",r[r.kFlexEnd=26]="kFlexEnd",r[r.kFlexStart=27]="kFlexStart",r[r.kForwards=28]="kForwards",r[r.kHidden=29]="kHidden",r[r.kInfinite=30]="kInfinite",r[r.kInherit=31]="kInherit",r[r.kInitial=32]="kInitial",r[r.kInline=33]="kInline",r[r.kInlineBlock=34]="kInlineBlock",r[r.kInlineFlex=35]="kInlineFlex",r[r.kLeft=36]="kLeft",r[r.kLineThrough=37]="kLineThrough",r[r.kMiddle=38]="kMiddle",r[r.kMonoscopic=39]="kMonoscopic",r[r.kMonospace=40]="kMonospace",r[r.kNone=41]="kNone",r[r.kNoRepeat=42]="kNoRepeat",r[r.kNormal=43]="kNormal",r[r.kNowrap=44]="kNowrap",r[r.kPre=45]="kPre",r[r.kPreLine=46]="kPreLine",r[r.kPreWrap=47]="kPreWrap",r[r.kRelative=48]="kRelative",r[r.kRepeat=49]="kRepeat",r[r.kReverse=50]="kReverse",r[r.kRight=51]="kRight",r[r.kRow=52]="kRow",r[r.kRowReverse=53]="kRowReverse",r[r.kSansSerif=54]="kSansSerif",r[r.kScroll=55]="kScroll",r[r.kSerif=56]="kSerif",r[r.kSolid=57]="kSolid",r[r.kSpaceAround=58]="kSpaceAround",r[r.kSpaceBetween=59]="kSpaceBetween",r[r.kStart=60]="kStart",r[r.kStatic=61]="kStatic",r[r.kStereoscopicLeftRight=62]="kStereoscopicLeftRight",r[r.kStereoscopicTopBottom=63]="kStereoscopicTopBottom",r[r.kStretch=64]="kStretch",r[r.kTop=65]="kTop",r[r.kUppercase=66]="kUppercase",r[r.kVisible=67]="kVisible",r[r.kWrap=68]="kWrap",r[r.kWrapReverse=69]="kWrapReverse",r[r.kMaxKeywordValue=69]="kMaxKeywordValue",r))(_||{});let Wt;class _e extends qn{constructor(t){super();u(this,"value_");this.value_=t}GetTypeId(){return rr(_e)}static GetAbsolute(){return Wt.absolute}static GetAuto(){return Wt.auto}static GetBaseline(){return Wt.baseline}static GetBlock(){return Wt.block}static GetBottom(){return Wt.bottom}static GetBreakWord(){return Wt.breakWord}static GetCenter(){return Wt.center}static GetClip(){return Wt.clip}static GetCurrentColor(){return Wt.currentColor}static GetEllipsis(){return Wt.ellipsis}static GetEnd(){return Wt.end}static GetFixed(){return Wt.fixed}static GetFlex(){return Wt.flex}static GetFlexStart(){return Wt.flexStart}static GetHidden(){return Wt.hidden}static GetInherit(){return Wt.inherit}static GetInitial(){return Wt.initial}static GetInline(){return Wt.inline}static GetInlineBlock(){return Wt.inlineBlock}static GetInlineFlex(){return Wt.inlineFlex}static GetLeft(){return Wt.left}static GetMiddle(){return Wt.middle}static GetNone(){return Wt.none}static GetNormal(){return Wt.normal}static GetNowrap(){return Wt.nowrap}static GetPre(){return Wt.pre}static GetPreLine(){return Wt.preLine}static GetPreWrap(){return Wt.preWrap}static GetRelative(){return Wt.relative}static GetRepeat(){return Wt.repeat}static GetRight(){return Wt.right}static GetRow(){return Wt.row}static GetScroll(){return Wt.scroll}static GetSolid(){return Wt.solid}static GetStart(){return Wt.start}static GetStatic(){return Wt.static}static GetStretch(){return Wt.stretch}static GetTop(){return Wt.top}static GetUppercase(){return Wt.uppercase}static GetVisible(){return Wt.visible}static fromString(t){const i=Reflect.get(Wt,zG(t));return i||(ze(),console.log("404",i)),i}Accept(t){t.VisitKeyword(this)}value(){return this.value_}ToString(){switch(this.value_){case 0:return I5;case 1:return F5;case 2:return M5;case 3:return B5;case 4:return L5;case 5:return U5;case 6:return G5;case 7:return H5;case 8:return j5;case 9:return V5;case 10:return W5;case 11:return $5;case 12:return K5;case 13:return X5;case 14:return Y5;case 15:return q5;case 16:return Q5;case 17:return J5;case 18:return Z5;case 19:return e6;case 20:return t6;case 21:return r6;case 22:return i6;case 23:return n6;case 28:return u6;case 24:return s6;case 25:return a6;case 26:return o6;case 27:return l6;case 29:return c6;case 30:return h6;case 31:return d6;case 32:return f6;case 33:return g6;case 34:return _6;case 35:return p6;case 36:return y6;case 37:return v6;case 38:return E6;case 40:return w6;case 39:return S6;case 41:return A6;case 42:return b6;case 43:return ub;case 44:return k6;case 45:return P6;case 46:return R6;case 47:return D6;case 48:return C6;case 49:return O6;case 50:return N6;case 51:return I6;case 52:return F6;case 53:return M6;case 55:return L6;case 54:return B6;case 56:return U6;case 57:return G6;case 58:return z6;case 59:return H6;case 60:return j6;case 61:return V6;case 62:return W6;case 63:return $6;case 64:return K6;case 65:return X6;case 66:return Y6;case 67:return q6;case 68:return Q6;case 69:return J6}return""}EQ(t){return t instanceof _e?this.value_===t.value_:!1}}class HG{constructor(){u(this,"absolute");u(this,"alternate");u(this,"alternateReverse");u(this,"auto");u(this,"backwards");u(this,"baseline");u(this,"block");u(this,"both");u(this,"bottom");u(this,"breakWord");u(this,"center");u(this,"clip");u(this,"collapse");u(this,"column");u(this,"columnReverse");u(this,"contain");u(this,"content");u(this,"cover");u(this,"currentColor");u(this,"cursive");u(this,"ellipsis");u(this,"end");u(this,"equirectangular");u(this,"fantasy");u(this,"fixed");u(this,"flex");u(this,"flexEnd");u(this,"flexStart");u(this,"forwards");u(this,"hidden");u(this,"infinite");u(this,"inherit");u(this,"initial");u(this,"inlineBlock");u(this,"inlineFlex");u(this,"inline");u(this,"left");u(this,"lineThrough");u(this,"middle");u(this,"monoscopic");u(this,"monospace");u(this,"none");u(this,"noRepeat");u(this,"normal");u(this,"nowrap");u(this,"pre");u(this,"preLine");u(this,"preWrap");u(this,"relative");u(this,"repeat");u(this,"reverse");u(this,"right");u(this,"row");u(this,"rowReverse");u(this,"sansSerif");u(this,"scroll");u(this,"serif");u(this,"solid");u(this,"spaceAround");u(this,"spaceBetween");u(this,"start");u(this,"static");u(this,"stereoscopicLeftRight");u(this,"stereoscopicTopBottom");u(this,"stretch");u(this,"top");u(this,"uppercase");u(this,"visible");u(this,"wrap");u(this,"wrapReverse");this.absolute=new _e(0),this.alternate=new _e(1),this.alternateReverse=new _e(2),this.auto=new _e(3),this.backwards=new _e(4),this.baseline=new _e(5),this.block=new _e(6),this.both=new _e(7),this.bottom=new _e(8),this.breakWord=new _e(9),this.center=new _e(10),this.clip=new _e(11),this.collapse=new _e(12),this.column=new _e(13),this.columnReverse=new _e(14),this.contain=new _e(15),this.content=new _e(16),this.cover=new _e(17),this.currentColor=new _e(18),this.cursive=new _e(19),this.ellipsis=new _e(20),this.end=new _e(21),this.equirectangular=new _e(22),this.fantasy=new _e(23),this.fixed=new _e(24),this.flex=new _e(25),this.flexEnd=new _e(26),this.flexStart=new _e(27),this.forwards=new _e(28),this.hidden=new _e(29),this.infinite=new _e(30),this.inherit=new _e(31),this.initial=new _e(32),this.inlineBlock=new _e(34),this.inlineFlex=new _e(35),this.inline=new _e(33),this.left=new _e(36),this.lineThrough=new _e(37),this.middle=new _e(38),this.monoscopic=new _e(39),this.monospace=new _e(40),this.none=new _e(41),this.noRepeat=new _e(42),this.normal=new _e(43),this.nowrap=new _e(44),this.pre=new _e(45),this.preLine=new _e(46),this.preWrap=new _e(47),this.relative=new _e(48),this.repeat=new _e(49),this.reverse=new _e(50),this.right=new _e(51),this.row=new _e(52),this.rowReverse=new _e(53),this.sansSerif=new _e(54),this.scroll=new _e(55),this.serif=new _e(56),this.solid=new _e(57),this.spaceAround=new _e(58),this.spaceBetween=new _e(59),this.start=new _e(60),this.static=new _e(61),this.stereoscopicLeftRight=new _e(62),this.stereoscopicTopBottom=new _e(63),this.stretch=new _e(64),this.top=new _e(65),this.uppercase=new _e(66),this.visible=new _e(67),this.wrap=new _e(68),this.wrapReverse=new _e(69)}}Wt=new HG;function fu(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}class si{constructor(e,t,i,s=1){u(this,"_rgbaBrand");u(this,"r");u(this,"g");u(this,"b");u(this,"a");this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=fu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Eo{constructor(e,t,i,s){u(this,"_hslaBrand");u(this,"h");u(this,"s");u(this,"l");u(this,"a");this.h=Math.max(Math.min(360,e),0)|0,this.s=fu(Math.max(Math.min(1,t),0),3),this.l=fu(Math.max(Math.min(1,i),0),3),this.a=fu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,n=e.a,o=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const d=(a+o)/2,f=o-a;if(f>0){switch(c=Math.min(d<=.5?f/(2*d):f/(2-2*d),1),o){case t:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-t)/f+2;break;case s:l=(t-i)/f+4;break}l*=60,l=Math.round(l)}return new Eo(l,c,d,n)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:n}=e;let o,a,l;if(i===0)o=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;o=Eo._hue2rgb(d,c,t+1/3),a=Eo._hue2rgb(d,c,t),l=Eo._hue2rgb(d,c,t-1/3)}return new si(Math.round(o*255),Math.round(a*255),Math.round(l*255),n)}}class sd{constructor(e,t,i,s){u(this,"_hsvaBrand");u(this,"h");u(this,"s");u(this,"v");u(this,"a");this.h=Math.max(Math.min(360,e),0)|0,this.s=fu(Math.max(Math.min(1,t),0),3),this.v=fu(Math.max(Math.min(1,i),0),3),this.a=fu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,n=Math.max(t,i,s),o=Math.min(t,i,s),a=n-o,l=n===0?0:a/n;let c;return a===0?c=0:n===t?c=((i-s)/a%6+6)%6:n===i?c=(s-t)/a+2:c=(t-i)/a+4,new sd(Math.round(c*60),l,n,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:n}=e,o=s*i,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,d,f]=[0,0,0];return t<60?(c=o,d=a):t<120?(c=a,d=o):t<180?(d=o,f=a):t<240?(d=a,f=o):t<300?(c=a,f=o):t<=360&&(c=o,f=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),f=Math.round((f+l)*255),new si(c,d,f,n)}}const Lr=class{constructor(e){u(this,"rgba");u(this,"_hsla");u(this,"_hsva");u(this,"_toString");if(e)if(e instanceof si)this.rgba=e;else if(e instanceof Eo)this._hsla=e,this.rgba=Eo.toRGBA(e);else if(e instanceof sd)this._hsva=e,this.rgba=sd.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Lr.Format.CSS.parseHex(e)}get hsla(){return this._hsla?this._hsla:Eo.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:sd.fromRGBA(this.rgba)}equals(e){return!!e&&si.equals(this.rgba,e.rgba)&&Eo.equals(this.hsla,e.hsla)&&sd.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Lr._relativeLuminanceForComponent(this.rgba.r),t=Lr._relativeLuminanceForComponent(this.rgba.g),i=Lr._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return fu(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new Lr(new Eo(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Lr(new Eo(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:n}=this.rgba;return new Lr(new si(t,i,s,n*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Lr(new si(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,i=this.rgba.a,s=t.a,n=i+s*(1-i);if(n<1e-6)return Lr.transparent;const o=this.rgba.r*i/n+t.r*s*(1-i)/n,a=this.rgba.g*i/n+t.g*s*(1-i)/n,l=this.rgba.b*i/n+t.b*s*(1-i)/n;return new Lr(new si(o,a,l,n))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:n}=this.rgba;return new Lr(new si(e.rgba.r-n*(e.rgba.r-t),e.rgba.g-n*(e.rgba.g-i),e.rgba.b-n*(e.rgba.b-s),1))}flatten(...e){const t=e.reduceRight((i,s)=>Lr._flatten(s,i));return Lr._flatten(this,t)}static _flatten(e,t){const i=1-e.rgba.a;return new Lr(new si(i*t.rgba.r+e.rgba.a*e.rgba.r,i*t.rgba.g+e.rgba.a*e.rgba.g,i*t.rgba.b+e.rgba.a*e.rgba.b))}toString(){return this._toString||(this._toString=Lr.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),n=t.getRelativeLuminance();return i=i*(n-s)/n,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),n=t.getRelativeLuminance();return i=i*(s-n)/s,e.darken(i)}};let Sn=Lr;u(Sn,"white",new Lr(new si(255,255,255,1))),u(Sn,"black",new Lr(new si(0,0,0,1))),u(Sn,"red",new Lr(new si(255,0,0,1))),u(Sn,"blue",new Lr(new si(0,0,255,1))),u(Sn,"green",new Lr(new si(0,255,0,1))),u(Sn,"cyan",new Lr(new si(0,255,255,1))),u(Sn,"lightgrey",new Lr(new si(211,211,211,1))),u(Sn,"transparent",new Lr(new si(0,0,0,0)));(r=>{(e=>{(t=>{function i(x){return x.rgba.a===1?`rgb(${x.rgba.r}, ${x.rgba.g}, ${x.rgba.b})`:r.Format.CSS.formatRGBA(x)}t.formatRGB=i;function s(x){return`rgba(${x.rgba.r}, ${x.rgba.g}, ${x.rgba.b}, ${+x.rgba.a.toFixed(2)})`}t.formatRGBA=s;function n(x){return x.hsla.a===1?`hsl(${x.hsla.h}, ${(x.hsla.s*100).toFixed(2)}%, ${(x.hsla.l*100).toFixed(2)}%)`:r.Format.CSS.formatHSLA(x)}t.formatHSL=n;function o(x){return`hsla(${x.hsla.h}, ${(x.hsla.s*100).toFixed(2)}%, ${(x.hsla.l*100).toFixed(2)}%, ${x.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(x){const E=x.toString(16);return E.length!==2?"0"+E:E}function l(x){return`#${a(x.rgba.r)}${a(x.rgba.g)}${a(x.rgba.b)}`}t.formatHex=l;function c(x,E=!1){return E&&x.rgba.a===1?r.Format.CSS.formatHex(x):`#${a(x.rgba.r)}${a(x.rgba.g)}${a(x.rgba.b)}${a(Math.round(x.rgba.a*255))}`}t.formatHexA=c;function d(x){return x.isOpaque()?r.Format.CSS.formatHex(x):r.Format.CSS.formatRGBA(x)}t.format=d;function f(x){const E=x.length;if(E===0||x.charCodeAt(0)!==wt.Hash)return null;if(E===7){const P=16*g(x.charCodeAt(1))+g(x.charCodeAt(2)),b=16*g(x.charCodeAt(3))+g(x.charCodeAt(4)),D=16*g(x.charCodeAt(5))+g(x.charCodeAt(6));return new r(new si(P,b,D,1))}if(E===9){const P=16*g(x.charCodeAt(1))+g(x.charCodeAt(2)),b=16*g(x.charCodeAt(3))+g(x.charCodeAt(4)),D=16*g(x.charCodeAt(5))+g(x.charCodeAt(6)),C=16*g(x.charCodeAt(7))+g(x.charCodeAt(8));return new r(new si(P,b,D,C/255))}if(E===4){const P=g(x.charCodeAt(1)),b=g(x.charCodeAt(2)),D=g(x.charCodeAt(3));return new r(new si(16*P+P,16*b+b,16*D+D))}if(E===5){const P=g(x.charCodeAt(1)),b=g(x.charCodeAt(2)),D=g(x.charCodeAt(3)),C=g(x.charCodeAt(4));return new r(new si(16*P+P,16*b+b,16*D+D,(16*C+C)/255))}return null}t.parseHex=f;function g(x){switch(x){case wt.Digit0:return 0;case wt.Digit1:return 1;case wt.Digit2:return 2;case wt.Digit3:return 3;case wt.Digit4:return 4;case wt.Digit5:return 5;case wt.Digit6:return 6;case wt.Digit7:return 7;case wt.Digit8:return 8;case wt.Digit9:return 9;case wt.a:return 10;case wt.A:return 10;case wt.b:return 11;case wt.B:return 11;case wt.c:return 12;case wt.C:return 12;case wt.d:return 13;case wt.D:return 13;case wt.e:return 14;case wt.E:return 14;case wt.f:return 15;case wt.F:return 15}return 0}})(e.CSS||(e.CSS={}))})(r.Format||(r.Format={}))})(Sn||(Sn={}));function jG(r){return`${r*100}%`}function am(r,e,t){return Math.min(Math.max(e,r),t)}function bs(r){return Math.round(r)}const VG=16777215,WG=255,$G=65535,KG=4278255615,XG=2155905279,YG=8388863,qG=16711935,QG=2147483903,JG=33023,ZG=2155872511,e9=2147516671,t9=4278190335,r9=3233857791,i9=8421631,n9=0,s9=4294967295,o9=4294902015;let t3;class Sr extends qn{constructor(t,i,s,n){super();u(this,"value_");arguments.length==1?this.value_=bs(t):(lm(t),lm(i),lm(s),lm(n),this.value_=bs(t<<24)|bs(i<<16)|bs(s<<8)|bs(n<<0))}static fromString(t){const i=Reflect.get(t3,t);return J(i),i}static fromHex(t){const i=Sn.fromHex(t);J(i);const{rgba:s}=i;return new Sr(s.r,s.g,s.b,s.a*255)}Accept(t){t.VisitRGBAColor(this)}value(){return this.value_}r(){return bs(this.value_>>24&255)}g(){return bs(this.value_>>16&255)}b(){return bs(this.value_>>8&255)}a(){return bs(this.value_>>0&255)}ToString(){return`rgba(${this.r()}, ${this.g()}, ${this.b()}, ${this.a()/255})`}EQ(t){return this.value_==t.value_}GetTypeId(){return rr(Sr)}}function lm(r){J(0<=r),J(255>=r)}class a9{constructor(){u(this,"aqua",new Sr(VG));u(this,"black",new Sr(WG));u(this,"blue",new Sr($G));u(this,"fuchsia",new Sr(KG));u(this,"gray",new Sr(XG));u(this,"green",new Sr(YG));u(this,"lime",new Sr(qG));u(this,"maroon",new Sr(QG));u(this,"navy",new Sr(JG));u(this,"olive",new Sr(ZG));u(this,"purple",new Sr(e9));u(this,"red",new Sr(t9));u(this,"silver",new Sr(r9));u(this,"teal",new Sr(i9));u(this,"transparent",new Sr(n9));u(this,"white",new Sr(s9));u(this,"yellow",new Sr(o9))}}t3=new a9;class l9 extends qn{constructor(t){super();u(this,"value_");this.value_=t,J(t),J(t.length)}value(){return this.value_}EQ(t){if(this.value_.length!==t.value_.length)return!1;for(let i=0;i<this.value_.length;i++)this.value_[i];return!0}}class ko extends l9{constructor(e){super(e)}Accept(e){e.VisitPropertyList(this)}ToString(){return this.value().map(e=>e.ToString()).join(", ")}GetTypeId(){return rr(ko)}}var Ft=(r=>(r[r.kPixelsUnit=0]="kPixelsUnit",r[r.kAbsoluteUnitMax=0]="kAbsoluteUnitMax",r[r.kFontSizesAkaEmUnit=1]="kFontSizesAkaEmUnit",r[r.kRootElementFontSizesAkaRemUnit=2]="kRootElementFontSizesAkaRemUnit",r[r.kViewportWidthPercentsAkaVwUnit=3]="kViewportWidthPercentsAkaVwUnit",r[r.kViewportHeightPercentsAkaVhUnit=4]="kViewportHeightPercentsAkaVhUnit",r))(Ft||{});class Qt extends qn{constructor(t,i){super();u(this,"value_");u(this,"unit_");this.value_=t,this.unit_=i}Accept(t){t.VisitLength(this)}value(){return this.value_}unit(){return this.unit_}IsUnitRelative(){return this.unit_>0}ToString(){const t=["px","em","rem","vw","vh"];return`${this.value_}${t[this.unit_]}`}EQ(t){return this.value_==t.value_&&this.unit_==t.unit_}GE(t){return Kt(this.unit_,t.unit_,"Value larger comparison of length values ","can only be done for matching unit types"),this.value_>=t.value_}LE(t){return Kt(this.unit_,t.unit_,"Value smaller comparison of length ","values can only be done for matching ","unit types"),this.value_<=t.value_}GetTypeId(){return rr(Qt)}}class Zs extends qn{constructor(t){super();u(this,"value_");this.value_=t}Accept(t){t.VisitPercentage(this)}value(){return this.value_}ToString(){return jG(this.value_)}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(Zs)}}class ca extends qn{constructor(t,i){super();u(this,"length_value_",new Qt(0,Ft.kPixelsUnit));u(this,"percentage_value_",new Zs(0));t instanceof Qt?this.length_value_=t:t instanceof Zs&&(this.percentage_value_=t),i&&(this.percentage_value_=i)}Accept(t){t.VisitCalc(this)}length_value(){return this.length_value_}percentage_value(){return this.percentage_value_}ToString(){return`calc(${this.length_value_.ToString()} + ${this.percentage_value_.ToString()})`}EQ(t){return this.length_value_.EQ(t.length_value_)&&this.percentage_value_.EQ(t.percentage_value_)}GetTypeId(){return rr(ca)}}class jp extends qn{constructor(t){super();u(this,"value_");this.value_=t}Accept(t){t.VisitNumber(this)}value(){return this.value_}ToString(){return this.value_.toString()}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(jp)}}class _1 extends qn{constructor(t){super();u(this,"value_");this.value_=t}Accept(t){t.VisitString(this)}value(){return this.value_}ToString(){return"'"+this.value_+"'"}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(_1)}}var r3=(r=>(r[r.kItalic=0]="kItalic",r[r.kNormal=1]="kNormal",r[r.kOblique=2]="kOblique",r))(r3||{});class bc extends qn{constructor(t){super();u(this,"value_",1);this.value_=t}static GetItalic(){return SE.italic}static GetNormal(){return SE.normal}static GetOblique(){return SE.oblique}Accept(t){t.VisitFontStyle(this)}value(){return this.value_}ToString(){switch(this.value_){case 0:return x6;case 1:return ub;case 2:return T6;default:return et(),""}}GetTypeId(){return rr(bc)}EQ(t){return t instanceof bc?this.value_===t.value_:!1}}class u9{constructor(){u(this,"italic",new bc(0));u(this,"normal",new bc(1));u(this,"oblique",new bc(2))}}const SE=new u9;var ea=(r=>(r[r.kThinAka100=0]="kThinAka100",r[r.kExtraLightAka200=1]="kExtraLightAka200",r[r.kLightAka300=2]="kLightAka300",r[r.kNormalAka400=3]="kNormalAka400",r[r.kMediumAka500=4]="kMediumAka500",r[r.kSemiBoldAka600=5]="kSemiBoldAka600",r[r.kBoldAka700=6]="kBoldAka700",r[r.kExtraBoldAka800=7]="kExtraBoldAka800",r[r.kBlackAka900=8]="kBlackAka900",r))(ea||{});class Xs extends qn{constructor(t){super();u(this,"value_");this.value_=t}static GetThinAka100(){return $a.thin_aka_100}static GetExtraLightAka200(){return $a.extra_light_aka_200}static GetLightAka300(){return $a.light_aka_300}static GetNormalAka400(){return $a.normal_aka_400}static GetMediumAka500(){return $a.medium_aka_500}static GetSemiBoldAka600(){return $a.semi_bold_aka_600}static GetBoldAka700(){return $a.bold_aka_700}static GetExtraBoldAka800(){return $a.extra_bold_aka_800}static GetBlackAka900(){return $a.black_aka_900}Accept(t){t.VisitFontWeight(this)}value(){return this.value_}ToString(){switch(this.value_){case 3:return ub;case 6:return z5;case 0:case 1:case 2:case 4:case 5:case 7:case 8:default:ze()}}EQ(t){return this.value_===t.value_}GetTypeId(){return rr(Xs)}}class c9{constructor(){u(this,"thin_aka_100");u(this,"extra_light_aka_200");u(this,"light_aka_300");u(this,"normal_aka_400");u(this,"medium_aka_500");u(this,"semi_bold_aka_600");u(this,"bold_aka_700");u(this,"extra_bold_aka_800");u(this,"black_aka_900");this.thin_aka_100=new Xs(0),this.extra_light_aka_200=new Xs(1),this.light_aka_300=new Xs(2),this.normal_aka_400=new Xs(3),this.medium_aka_500=new Xs(4),this.semi_bold_aka_600=new Xs(5),this.bold_aka_700=new Xs(6),this.extra_bold_aka_800=new Xs(7),this.black_aka_900=new Xs(8)}}let $a=new c9;class ay extends qn{constructor(t){super();u(this,"value_");this.value_=t}Accept(t){t.VisitInteger(this)}value(){return this.value_}ToString(){return this.value_.toString()}GetTypeId(){return rr(ay)}EQ(t){return t instanceof ay?this.value_===t.value_:!1}}class ly extends qn{constructor(t,i){super();u(this,"start_");u(this,"end_");this.start_=t,this.end_=i}Accept(t){t.VisitUnicodeRange(this)}start(){return this.start_}end(){return this.end_}ToString(){return this.start_==this.end_?`U+${this.start_.toString(16)}`:`U+${this.start_.toString(16)}-${this.end_.toString(16)}`}EQ(t){return t instanceof ly?this.start_==t.start_&&this.end_==t.end_:!1}IsValid(){return this.start_<=this.end_}GetTypeId(){return rr(ly)}}var T=(r=>(r[r.kNoneProperty=-1]="kNoneProperty",r[r.kAlignContentProperty=0]="kAlignContentProperty",r[r.kAlignItemsProperty=1]="kAlignItemsProperty",r[r.kAlignSelfProperty=2]="kAlignSelfProperty",r[r.kBackgroundColorProperty=3]="kBackgroundColorProperty",r[r.kBackgroundImageProperty=4]="kBackgroundImageProperty",r[r.kBackgroundPositionProperty=5]="kBackgroundPositionProperty",r[r.kBackgroundRepeatProperty=6]="kBackgroundRepeatProperty",r[r.kBackgroundSizeProperty=7]="kBackgroundSizeProperty",r[r.kBorderBottomColorProperty=8]="kBorderBottomColorProperty",r[r.kBorderBottomLeftRadiusProperty=9]="kBorderBottomLeftRadiusProperty",r[r.kBorderBottomRightRadiusProperty=10]="kBorderBottomRightRadiusProperty",r[r.kBorderBottomStyleProperty=11]="kBorderBottomStyleProperty",r[r.kBorderBottomWidthProperty=12]="kBorderBottomWidthProperty",r[r.kBorderLeftColorProperty=13]="kBorderLeftColorProperty",r[r.kBorderLeftStyleProperty=14]="kBorderLeftStyleProperty",r[r.kBorderLeftWidthProperty=15]="kBorderLeftWidthProperty",r[r.kBorderRightColorProperty=16]="kBorderRightColorProperty",r[r.kBorderRightStyleProperty=17]="kBorderRightStyleProperty",r[r.kBorderRightWidthProperty=18]="kBorderRightWidthProperty",r[r.kBorderTopColorProperty=19]="kBorderTopColorProperty",r[r.kBorderTopLeftRadiusProperty=20]="kBorderTopLeftRadiusProperty",r[r.kBorderTopRightRadiusProperty=21]="kBorderTopRightRadiusProperty",r[r.kBorderTopStyleProperty=22]="kBorderTopStyleProperty",r[r.kBorderTopWidthProperty=23]="kBorderTopWidthProperty",r[r.kBottomProperty=24]="kBottomProperty",r[r.kBoxShadowProperty=25]="kBoxShadowProperty",r[r.kColorProperty=26]="kColorProperty",r[r.kContentProperty=27]="kContentProperty",r[r.kDisplayProperty=28]="kDisplayProperty",r[r.kFilterProperty=29]="kFilterProperty",r[r.kFlexBasisProperty=30]="kFlexBasisProperty",r[r.kFlexDirectionProperty=31]="kFlexDirectionProperty",r[r.kFlexGrowProperty=32]="kFlexGrowProperty",r[r.kFlexShrinkProperty=33]="kFlexShrinkProperty",r[r.kFlexWrapProperty=34]="kFlexWrapProperty",r[r.kFontFamilyProperty=35]="kFontFamilyProperty",r[r.kFontSizeProperty=36]="kFontSizeProperty",r[r.kFontStyleProperty=37]="kFontStyleProperty",r[r.kFontWeightProperty=38]="kFontWeightProperty",r[r.kHeightProperty=39]="kHeightProperty",r[r.kIntersectionObserverRootMarginProperty=40]="kIntersectionObserverRootMarginProperty",r[r.kJustifyContentProperty=41]="kJustifyContentProperty",r[r.kLeftProperty=42]="kLeftProperty",r[r.kLineHeightProperty=43]="kLineHeightProperty",r[r.kMarginBottomProperty=44]="kMarginBottomProperty",r[r.kMarginLeftProperty=45]="kMarginLeftProperty",r[r.kMarginRightProperty=46]="kMarginRightProperty",r[r.kMarginTopProperty=47]="kMarginTopProperty",r[r.kMaxHeightProperty=48]="kMaxHeightProperty",r[r.kMaxWidthProperty=49]="kMaxWidthProperty",r[r.kMinHeightProperty=50]="kMinHeightProperty",r[r.kMinWidthProperty=51]="kMinWidthProperty",r[r.kOpacityProperty=52]="kOpacityProperty",r[r.kOrderProperty=53]="kOrderProperty",r[r.kOutlineColorProperty=54]="kOutlineColorProperty",r[r.kOutlineStyleProperty=55]="kOutlineStyleProperty",r[r.kOutlineWidthProperty=56]="kOutlineWidthProperty",r[r.kOverflowProperty=57]="kOverflowProperty",r[r.kOverflowWrapProperty=58]="kOverflowWrapProperty",r[r.kPaddingBottomProperty=59]="kPaddingBottomProperty",r[r.kPaddingLeftProperty=60]="kPaddingLeftProperty",r[r.kPaddingRightProperty=61]="kPaddingRightProperty",r[r.kPaddingTopProperty=62]="kPaddingTopProperty",r[r.kPointerEventsProperty=63]="kPointerEventsProperty",r[r.kPositionProperty=64]="kPositionProperty",r[r.kRightProperty=65]="kRightProperty",r[r.kTextAlignProperty=66]="kTextAlignProperty",r[r.kTextDecorationColorProperty=67]="kTextDecorationColorProperty",r[r.kTextDecorationLineProperty=68]="kTextDecorationLineProperty",r[r.kTextIndentProperty=69]="kTextIndentProperty",r[r.kTextOverflowProperty=70]="kTextOverflowProperty",r[r.kTextShadowProperty=71]="kTextShadowProperty",r[r.kTextTransformProperty=72]="kTextTransformProperty",r[r.kTopProperty=73]="kTopProperty",r[r.kTransformOriginProperty=74]="kTransformOriginProperty",r[r.kTransformProperty=75]="kTransformProperty",r[r.kVerticalAlignProperty=76]="kVerticalAlignProperty",r[r.kVisibilityProperty=77]="kVisibilityProperty",r[r.kWhiteSpaceProperty=78]="kWhiteSpaceProperty",r[r.kWidthProperty=79]="kWidthProperty",r[r.kZIndexProperty=80]="kZIndexProperty",r[r.kMaxLonghandPropertyKey=80]="kMaxLonghandPropertyKey",r[r.kAllProperty=81]="kAllProperty",r[r.kSrcProperty=82]="kSrcProperty",r[r.kUnicodeRangeProperty=83]="kUnicodeRangeProperty",r[r.kWordWrapProperty=84]="kWordWrapProperty",r[r.kFirstShorthandPropertyKey=85]="kFirstShorthandPropertyKey",r[r.kBackgroundProperty=85]="kBackgroundProperty",r[r.kBorderBottomProperty=86]="kBorderBottomProperty",r[r.kBorderColorProperty=87]="kBorderColorProperty",r[r.kBorderLeftProperty=88]="kBorderLeftProperty",r[r.kBorderProperty=89]="kBorderProperty",r[r.kBorderRadiusProperty=90]="kBorderRadiusProperty",r[r.kBorderRightProperty=91]="kBorderRightProperty",r[r.kBorderStyleProperty=92]="kBorderStyleProperty",r[r.kBorderTopProperty=93]="kBorderTopProperty",r[r.kBorderWidthProperty=94]="kBorderWidthProperty",r[r.kFlexProperty=95]="kFlexProperty",r[r.kFlexFlowProperty=96]="kFlexFlowProperty",r[r.kFontProperty=97]="kFontProperty",r[r.kMarginProperty=98]="kMarginProperty",r[r.kOutlineProperty=99]="kOutlineProperty",r[r.kPaddingProperty=100]="kPaddingProperty",r[r.kTextDecorationProperty=101]="kTextDecorationProperty",r[r.kMaxShorthandPropertyKey=101]="kMaxShorthandPropertyKey",r[r.kMaxEveryPropertyKey=101]="kMaxEveryPropertyKey",r[r.kNumLonghandProperties=81]="kNumLonghandProperties",r))(T||{}),uy=(r=>(r[r.kInheritedNo=0]="kInheritedNo",r[r.kInheritedYes=1]="kInheritedYes",r))(uy||{}),i3=(r=>(r[r.kImpactsChildComputedStyleNo=0]="kImpactsChildComputedStyleNo",r[r.kImpactsChildComputedStyleYes=1]="kImpactsChildComputedStyleYes",r))(i3||{}),n3=(r=>(r[r.kImpactsBoxGenerationNo=0]="kImpactsBoxGenerationNo",r[r.kImpactsBoxGenerationYes=1]="kImpactsBoxGenerationYes",r))(n3||{}),s3=(r=>(r[r.kImpactsBoxSizesNo=0]="kImpactsBoxSizesNo",r[r.kImpactsBoxSizesYes=1]="kImpactsBoxSizesYes",r))(s3||{}),o3=(r=>(r[r.kImpactsBoxCrossReferencesNo=0]="kImpactsBoxCrossReferencesNo",r[r.kImpactsBoxCrossReferencesYes=1]="kImpactsBoxCrossReferencesYes",r))(o3||{});class VP{constructor(e){u(this,"name","");u(this,"inherited",0);u(this,"animatable",0);u(this,"impacts_child_computed_style",0);u(this,"impacts_box_generation",0);u(this,"impacts_box_sizes",0);u(this,"impacts_box_cross_references",0);u(this,"initial_value");u(this,"longhand_properties",new Set);this.initial_value=e}}class h9{constructor(){u(this,"properties",[]);u(this,"animatable_properties",[]);u(this,"inherited_animatable_properties",[]);u(this,"inherited_properties",[]);this.SetPropertyDefinition(0,"align-content",0,0,0,0,1,0,_e.GetStretch()),this.SetPropertyDefinition(1,"align-items",0,0,0,0,1,0,_e.GetStretch()),this.SetPropertyDefinition(2,"align-self",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(3,"background-color",0,1,0,0,0,0,new Sr(0)),this.SetPropertyDefinition(4,"background-image",0,0,0,0,0,0,WP(_e.GetNone()));let e=new Array(2);e.push(new ca(new Zs(0))),e.push(new ca(new Zs(0)));let t=new ko(e);this.SetPropertyDefinition(5,"background-position",0,0,0,0,0,0,t);let i=new Array(2);i.push(_e.GetRepeat()),i.push(_e.GetRepeat());let s=new ko(i);this.SetPropertyDefinition(6,"background-repeat",0,0,0,0,0,0,s);let n=new Array(2);n.push(_e.GetAuto()),n.push(_e.GetAuto());let o=new ko(n);this.SetPropertyDefinition(7,"background-size",0,0,0,0,0,0,o),this.SetPropertyDefinition(19,"border-top-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(16,"border-right-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(8,"border-bottom-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(13,"border-left-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(22,"border-top-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(17,"border-right-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(11,"border-bottom-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(14,"border-left-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(23,"border-top-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(18,"border-right-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(12,"border-bottom-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(15,"border-left-width",0,0,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(20,"border-top-left-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(21,"border-top-right-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(10,"border-bottom-right-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(9,"border-bottom-left-radius",0,0,0,0,0,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(24,"bottom",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(25,"box-shadow",0,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(26,"color",1,1,1,1,0,0,new Sr(255)),this.SetPropertyDefinition(27,"content",0,0,0,1,0,0,_e.GetNormal()),this.SetPropertyDefinition(28,"display",0,0,0,1,0,0,_e.GetBlock()),this.SetPropertyDefinition(29,"filter",0,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(30,"flex-basis",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(31,"flex-direction",0,0,0,0,1,0,_e.GetRow()),this.SetPropertyDefinition(32,"flex-grow",0,0,0,0,1,0,new jp(0)),this.SetPropertyDefinition(33,"flex-shrink",0,0,0,0,1,0,new jp(1)),this.SetPropertyDefinition(34,"flex-wrap",0,0,0,0,1,0,_e.GetNowrap()),this.SetPropertyDefinition(35,"font-family",1,0,0,1,1,0,WP(new _1("Noto Mono"))),this.SetPropertyDefinition(36,"font-size",1,0,1,1,1,0,new Qt(16,Ft.kPixelsUnit)),this.SetPropertyDefinition(37,"font-style",1,0,0,1,1,0,bc.GetNormal()),this.SetPropertyDefinition(38,"font-weight",1,0,0,1,1,0,Xs.GetNormalAka400()),this.SetPropertyDefinition(39,"height",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(40,"intersection-observer-root-margin",0,0,0,0,0,0,_e.GetAuto()),this.SetPropertyDefinition(41,"justify-content",0,0,0,0,1,0,_e.GetFlexStart()),this.SetPropertyDefinition(42,"left",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(43,"line-height",1,0,0,0,1,0,_e.GetNormal()),this.SetPropertyDefinition(44,"margin-bottom",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(45,"margin-left",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(46,"margin-right",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(47,"margin-top",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(48,"max-height",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(49,"max-width",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(50,"min-height",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(51,"min-width",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(52,"opacity",0,1,0,0,0,1,new jp(1)),this.SetPropertyDefinition(53,"order",0,0,0,0,1,0,new ay(0)),this.SetPropertyDefinition(54,"outline-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(55,"outline-style",0,0,0,0,1,0,_e.GetNone()),this.SetPropertyDefinition(56,"outline-width",0,1,0,0,1,0,new Qt(3,Ft.kPixelsUnit)),this.SetPropertyDefinition(57,"overflow",0,0,0,0,1,1,_e.GetVisible()),this.SetPropertyDefinition(58,"overflow-wrap",1,0,0,0,1,0,_e.GetNormal()),this.SetPropertyDefinition(59,"padding-bottom",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(60,"padding-left",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(61,"padding-right",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(62,"padding-top",0,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(63,"pointer-events",1,0,0,0,0,0,_e.GetAuto()),this.SetPropertyDefinition(64,"position",0,0,0,1,1,1,_e.GetStatic()),this.SetPropertyDefinition(65,"right",0,0,0,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(66,"text-align",1,0,0,0,1,0,_e.GetStart()),this.SetPropertyDefinition(67,"text-decoration-color",0,1,0,0,0,0,_e.GetCurrentColor()),this.SetPropertyDefinition(68,"text-decoration-line",0,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(69,"text-indent",1,0,0,0,1,0,new Qt(0,Ft.kPixelsUnit)),this.SetPropertyDefinition(70,"text-overflow",0,0,0,0,1,0,_e.GetClip()),this.SetPropertyDefinition(71,"text-shadow",1,0,0,0,0,0,_e.GetNone()),this.SetPropertyDefinition(72,"text-transform",1,0,0,1,0,0,_e.GetNone()),this.SetPropertyDefinition(73,"top",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(75,"transform",0,1,0,0,1,1,_e.GetNone());let a=new Array(3);a.push(new ca(new Zs(.5))),a.push(new ca(new Zs(.5))),a.push(new Qt(0,Ft.kPixelsUnit));let l=new ko(a);this.SetPropertyDefinition(74,"transform-origin",0,0,0,0,0,0,l),this.SetPropertyDefinition(76,"vertical-align",0,0,0,0,0,0,_e.GetBaseline()),this.SetPropertyDefinition(77,"visibility",1,0,0,0,0,0,_e.GetVisible()),this.SetPropertyDefinition(78,"white-space",1,0,0,1,1,0,_e.GetNormal()),this.SetPropertyDefinition(79,"width",0,0,1,0,1,0,_e.GetAuto()),this.SetPropertyDefinition(80,"z-index",0,0,0,0,0,1,_e.GetAuto()),this.SetPropertyDefinition(81,"all",0,0,0,0,0,0),this.SetPropertyDefinition(82,"src",0,0,0,0,0,0),this.SetPropertyDefinition(83,"unicode-range",0,0,0,0,0,0,new ly(0,1114111)),this.SetPropertyDefinition(84,"word-wrap",1,0,0,0,1,0,_e.GetNormal());let c=new Set;c.add(3),c.add(4),c.add(5),c.add(6),c.add(7),this.SetShorthandPropertyDefinition(85,"background",c);let d=new Set;d.add(19),d.add(16),d.add(8),d.add(13),this.SetShorthandPropertyDefinition(87,"border-color",d);let f=new Set;f.add(22),f.add(17),f.add(11),f.add(14),this.SetShorthandPropertyDefinition(92,"border-style",f);let g=new Set;g.add(23),g.add(18),g.add(12),g.add(15),this.SetShorthandPropertyDefinition(94,"border-width",g);let x=new Set;x.add(20),x.add(21),x.add(10),x.add(9),this.SetShorthandPropertyDefinition(90,"border-radius",x);let E=new Set;E.add(87),E.add(92),E.add(94),this.SetShorthandPropertyDefinition(89,"border",E);let P=new Set;P.add(19),P.add(22),P.add(23),this.SetShorthandPropertyDefinition(93,"border-top",P);let b=new Set;b.add(16),b.add(17),b.add(18),this.SetShorthandPropertyDefinition(91,"border-right",b);let D=new Set;D.add(8),D.add(11),D.add(12),this.SetShorthandPropertyDefinition(86,"border-bottom",D);let C=new Set;C.add(13),C.add(14),C.add(15),this.SetShorthandPropertyDefinition(88,"border-left",C);let O=new Set;O.add(32),O.add(33),O.add(30),this.SetShorthandPropertyDefinition(95,"flex",O);let N=new Set;N.add(31),N.add(34),this.SetShorthandPropertyDefinition(96,"flex-flow",N);let j=new Set;j.add(37),j.add(38),j.add(36),j.add(35),this.SetShorthandPropertyDefinition(97,"font",j);let I=new Set;I.add(44),I.add(45),I.add(46),I.add(47),this.SetShorthandPropertyDefinition(98,"margin",I);let M=new Set;M.add(54),M.add(55),M.add(56),this.SetShorthandPropertyDefinition(99,"outline",M);let R=new Set;R.add(59),R.add(60),R.add(61),R.add(62),this.SetShorthandPropertyDefinition(100,"padding",R);let L=new Set;L.add(67),L.add(68),this.SetShorthandPropertyDefinition(101,"text-decoration",L),this.CompileSetOfAnimatableProperties()}SetPropertyDefinition(e,t,i,s,n,o,a,l,c){let d=this.properties[e];J(!(d!=null&&d.name),"Properties can only be defined once.");let f=new VP(c);f.name=t,f.inherited=i,f.animatable=s,f.impacts_child_computed_style=n,f.impacts_box_generation=o,f.impacts_box_sizes=a,f.impacts_box_cross_references=l,this.properties[e]=f}SetShorthandPropertyDefinition(e,t,i){Rr(85,e),$n(101,e);let s=this.properties[e];J(!(s!=null&&s.name),"Properties can only be defined once.");let n=new VP;n.name=t,n.longhand_properties=i,this.properties[e]=n}CompileSetOfAnimatableProperties(){for(let e=0;e<101+1;++e)this.properties[e].animatable==1&&(this.animatable_properties.push(e),this.properties[e].inherited==1&&this.inherited_animatable_properties.push(e)),this.properties[e].inherited===1&&this.inherited_properties.push(e)}CompileSortedLonghandProperties(){ze()}}const Cu=new h9;function ot(r){return Rr(r,101),Cu.properties[r].name}function cw(r){return J(!Af(r)),Rr(r,101),Cu.properties[r].inherited}function Af(r){return r>=85&&r<=101}function cb(r){return J(!Af(r)),Rr(r,101),Cu.properties[r].initial_value}function d9(){return Cu.inherited_properties.slice()}function f9(r){return J(!Af(r)),Rr(r,101),Cu.properties[r].impacts_child_computed_style}function _9(r){return J(!Af(r)),Rr(r,101),Cu.properties[r].impacts_box_generation}function p9(r){return J(!Af(r)),Rr(r,101),Cu.properties[r].impacts_box_sizes}function g9(r){return J(!Af(r)),Rr(r,101),Cu.properties[r].impacts_box_cross_references}function WP(r){return new ko([r])}function a3(r){switch(r.length){case 3:return ut(r,ot(73))?73:-1;case 4:return ut(r,ot(95))?95:ut(r,ot(97))?97:ut(r,ot(42))?42:-1;case 5:return ut(r,ot(26))?26:ut(r,ot(53))?53:ut(r,ot(65))?65:ut(r,ot(79))?79:-1;case 6:return ut(r,ot(89))?89:ut(r,ot(24))?24:ut(r,ot(29))?29:ut(r,ot(39))?39:ut(r,ot(98))?98:-1;case 7:return ut(r,ot(27))?27:ut(r,ot(28))?28:ut(r,ot(52))?52:ut(r,ot(99))?99:ut(r,ot(100))?100:ut(r,ot(80))?80:-1;case 8:return ut(r,ot(57))?57:ut(r,ot(64))?64:-1;case 9:return ut(r,ot(96))?96:ut(r,ot(32))?32:ut(r,ot(34))?34:ut(r,ot(36))?36:ut(r,ot(49))?49:ut(r,ot(51))?51:ut(r,ot(75))?75:-1;case 10:return ut(r,ot(2))?2:ut(r,ot(85))?85:ut(r,ot(93))?93:ut(r,ot(25))?25:ut(r,ot(30))?30:ut(r,ot(37))?37:ut(r,ot(47))?47:ut(r,ot(48))?48:ut(r,ot(50))?50:ut(r,ot(66))?66:ut(r,ot(77))?77:-1;case 11:return ut(r,ot(1))?1:ut(r,ot(88))?88:ut(r,ot(33))?33:ut(r,ot(35))?35:ut(r,ot(38))?38:ut(r,ot(43))?43:ut(r,ot(45))?45:ut(r,ot(62))?62:ut(r,ot(69))?69:ut(r,ot(71))?71:ut(r,ot(78))?78:-1;case 12:return ut(r,ot(87))?87:ut(r,ot(91))?91:ut(r,ot(92))?92:ut(r,ot(94))?94:ut(r,ot(46))?46:ut(r,ot(60))?60:-1;case 13:return ut(r,ot(0))?0:ut(r,ot(86))?86:ut(r,ot(90))?90:ut(r,ot(44))?44:ut(r,ot(54))?54:ut(r,ot(55))?55:ut(r,ot(56))?56:ut(r,ot(58))?58:ut(r,ot(61))?61:ut(r,ot(70))?70:-1;case 14:return ut(r,ot(31))?31:ut(r,ot(59))?59:ut(r,ot(63))?63:ut(r,ot(72))?72:ut(r,ot(76))?76:-1;case 15:return ut(r,ot(7))?7:ut(r,ot(41))?41:ut(r,ot(101))?101:-1;case 16:return ut(r,ot(3))?3:ut(r,ot(19))?19:ut(r,ot(22))?22:ut(r,ot(23))?23:ut(r,ot(4))?4:ut(r,ot(74))?74:-1;case 17:return ut(r,ot(6))?6:ut(r,ot(13))?13:ut(r,ot(14))?14:ut(r,ot(15))?15:-1;case 18:return ut(r,ot(16))?16:ut(r,ot(17))?17:ut(r,ot(18))?18:-1;case 19:return ut(r,ot(5))?5:ut(r,ot(8))?8:ut(r,ot(11))?11:ut(r,ot(12))?12:-1;case 20:return ut(r,ot(68))?68:-1;case 21:return ut(r,ot(67))?67:-1;case 22:return ut(r,ot(20))?20:-1;case 23:return ut(r,ot(21))?21:-1;case 25:return-1;case 26:return ut(r,ot(10))?10:-1;case 33:return ut(r,ot(40))?40:-1;default:return-1}}class l3{removeProperty(e){this.GetPropertyValue(e)&&this.setProperty(e,"")}GetPropertyValue(e){return this.GetDeclaredPropertyValueStringByKey(a3(e))}SetPropertyValueStringByKey(e,t){this.setProperty(ot(e),t)}get alignContent(){return this.GetDeclaredPropertyValueStringByKey(T.kAlignContentProperty)}set alignContent(e){this.SetPropertyValueStringByKey(T.kAlignContentProperty,e)}get alignItems(){return this.GetDeclaredPropertyValueStringByKey(T.kAlignItemsProperty)}set alignItems(e){this.SetPropertyValueStringByKey(T.kAlignItemsProperty,e)}get alignSelf(){return this.GetDeclaredPropertyValueStringByKey(T.kAlignSelfProperty)}set alignSelf(e){this.SetPropertyValueStringByKey(T.kAlignSelfProperty,e)}get background(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundProperty)}set background(e){this.SetPropertyValueStringByKey(T.kBackgroundProperty,e)}get backgroundColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundColorProperty)}set backgroundColor(e){this.SetPropertyValueStringByKey(T.kBackgroundColorProperty,e)}get backgroundImage(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundImageProperty)}set backgroundImage(e){this.SetPropertyValueStringByKey(T.kBackgroundImageProperty,e)}get backgroundPosition(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundPositionProperty)}set backgroundPosition(e){this.SetPropertyValueStringByKey(T.kBackgroundPositionProperty,e)}get backgroundRepeat(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundRepeatProperty)}set backgroundRepeat(e){this.SetPropertyValueStringByKey(T.kBackgroundRepeatProperty,e)}get backgroundSize(){return this.GetDeclaredPropertyValueStringByKey(T.kBackgroundSizeProperty)}set backgroundSize(e){this.SetPropertyValueStringByKey(T.kBackgroundSizeProperty,e)}get border(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderProperty)}set border(e){this.SetPropertyValueStringByKey(T.kBorderProperty,e)}get borderBottom(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomProperty)}set borderBottom(e){this.SetPropertyValueStringByKey(T.kBorderBottomProperty,e)}get borderLeft(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftProperty)}set borderLeft(e){this.SetPropertyValueStringByKey(T.kBorderLeftProperty,e)}get borderRight(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightProperty)}set borderRight(e){this.SetPropertyValueStringByKey(T.kBorderRightProperty,e)}get borderTop(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopProperty)}set borderTop(e){this.SetPropertyValueStringByKey(T.kBorderTopProperty,e)}get borderColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderColorProperty)}set borderColor(e){this.SetPropertyValueStringByKey(T.kBorderColorProperty,e)}get borderTopColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopColorProperty)}set borderTopColor(e){this.SetPropertyValueStringByKey(T.kBorderTopColorProperty,e)}get borderRightColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightColorProperty)}set borderRightColor(e){this.SetPropertyValueStringByKey(T.kBorderRightColorProperty,e)}get borderBottomColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomColorProperty)}set borderBottomColor(e){this.SetPropertyValueStringByKey(T.kBorderBottomColorProperty,e)}get borderLeftColor(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftColorProperty)}set borderLeftColor(e){this.SetPropertyValueStringByKey(T.kBorderLeftColorProperty,e)}get borderStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderStyleProperty)}set borderStyle(e){this.SetPropertyValueStringByKey(T.kBorderStyleProperty,e)}get borderTopStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopStyleProperty)}set borderTopStyle(e){this.SetPropertyValueStringByKey(T.kBorderTopStyleProperty,e)}get borderRightStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightStyleProperty)}set borderRightStyle(e){this.SetPropertyValueStringByKey(T.kBorderRightStyleProperty,e)}get borderBottomStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomStyleProperty)}set borderBottomStyle(e){this.SetPropertyValueStringByKey(T.kBorderBottomStyleProperty,e)}get borderLeftStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftStyleProperty)}set borderLeftStyle(e){this.SetPropertyValueStringByKey(T.kBorderLeftStyleProperty,e)}get borderWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderWidthProperty)}set borderWidth(e){this.SetPropertyValueStringByKey(T.kBorderWidthProperty,e)}get borderTopWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopWidthProperty)}set borderTopWidth(e){this.SetPropertyValueStringByKey(T.kBorderTopWidthProperty,e)}get borderRightWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRightWidthProperty)}set borderRightWidth(e){this.SetPropertyValueStringByKey(T.kBorderRightWidthProperty,e)}get borderBottomWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomWidthProperty)}set borderBottomWidth(e){this.SetPropertyValueStringByKey(T.kBorderBottomWidthProperty,e)}get borderLeftWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderLeftWidthProperty)}set borderLeftWidth(e){this.SetPropertyValueStringByKey(T.kBorderLeftWidthProperty,e)}get borderRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderRadiusProperty)}set borderRadius(e){this.SetPropertyValueStringByKey(T.kBorderRadiusProperty,e)}get borderTopLeftRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopLeftRadiusProperty)}set borderTopLeftRadius(e){this.SetPropertyValueStringByKey(T.kBorderTopLeftRadiusProperty,e)}get borderTopRightRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderTopRightRadiusProperty)}set borderTopRightRadius(e){this.SetPropertyValueStringByKey(T.kBorderTopRightRadiusProperty,e)}get borderBottomRightRadius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomRightRadiusProperty)}set borderBottomRightRadius(e){this.SetPropertyValueStringByKey(T.kBorderBottomRightRadiusProperty,e)}get borderBottomLeftradius(){return this.GetDeclaredPropertyValueStringByKey(T.kBorderBottomLeftRadiusProperty)}set borderBottomLeftradius(e){this.SetPropertyValueStringByKey(T.kBorderBottomLeftRadiusProperty,e)}get bottom(){return this.GetDeclaredPropertyValueStringByKey(T.kBottomProperty)}set bottom(e){this.SetPropertyValueStringByKey(T.kBottomProperty,e)}get boxShadow(){return this.GetDeclaredPropertyValueStringByKey(T.kBoxShadowProperty)}set boxShadow(e){this.SetPropertyValueStringByKey(T.kBoxShadowProperty,e)}get color(){return this.GetDeclaredPropertyValueStringByKey(T.kColorProperty)}set color(e){this.SetPropertyValueStringByKey(T.kColorProperty,e)}get content(){return this.GetDeclaredPropertyValueStringByKey(T.kContentProperty)}set content(e){this.SetPropertyValueStringByKey(T.kContentProperty,e)}get display(){return this.GetDeclaredPropertyValueStringByKey(T.kDisplayProperty)}set display(e){this.SetPropertyValueStringByKey(T.kDisplayProperty,e)}get filter(){return this.GetDeclaredPropertyValueStringByKey(T.kFilterProperty)}set filter(e){this.SetPropertyValueStringByKey(T.kFilterProperty,e)}get flex(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexProperty)}set flex(e){this.SetPropertyValueStringByKey(T.kFlexProperty,e)}get flexBasis(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexBasisProperty)}set flexBasis(e){this.SetPropertyValueStringByKey(T.kFlexBasisProperty,e)}get flexDirection(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexDirectionProperty)}set flexDirection(e){this.SetPropertyValueStringByKey(T.kFlexDirectionProperty,e)}get flexFlow(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexFlowProperty)}set flexFlow(e){this.SetPropertyValueStringByKey(T.kFlexFlowProperty,e)}get flexGrow(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexGrowProperty)}set flexGrow(e){this.SetPropertyValueStringByKey(T.kFlexGrowProperty,e)}get flexShrink(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexShrinkProperty)}set flexShrink(e){this.SetPropertyValueStringByKey(T.kFlexShrinkProperty,e)}get flexWrap(){return this.GetDeclaredPropertyValueStringByKey(T.kFlexWrapProperty)}set flexWrap(e){this.SetPropertyValueStringByKey(T.kFlexWrapProperty,e)}get font(){return this.GetDeclaredPropertyValueStringByKey(T.kFontProperty)}set font(e){this.SetPropertyValueStringByKey(T.kFontProperty,e)}get fontFamily(){return this.GetDeclaredPropertyValueStringByKey(T.kFontFamilyProperty)}set fontFamily(e){this.SetPropertyValueStringByKey(T.kFontFamilyProperty,e)}get fontSize(){return this.GetDeclaredPropertyValueStringByKey(T.kFontSizeProperty)}set fontSize(e){this.SetPropertyValueStringByKey(T.kFontSizeProperty,e)}get fontStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kFontStyleProperty)}set fontStyle(e){this.SetPropertyValueStringByKey(T.kFontStyleProperty,e)}get fontWeight(){return this.GetDeclaredPropertyValueStringByKey(T.kFontWeightProperty)}set fontWeight(e){this.SetPropertyValueStringByKey(T.kFontWeightProperty,e)}get height(){return this.GetDeclaredPropertyValueStringByKey(T.kHeightProperty)}set height(e){this.SetPropertyValueStringByKey(T.kHeightProperty,e)}get justifyContent(){return this.GetDeclaredPropertyValueStringByKey(T.kJustifyContentProperty)}set justifyContent(e){this.SetPropertyValueStringByKey(T.kJustifyContentProperty,e)}get left(){return this.GetDeclaredPropertyValueStringByKey(T.kLeftProperty)}set left(e){this.SetPropertyValueStringByKey(T.kLeftProperty,e)}get lineHeight(){return this.GetDeclaredPropertyValueStringByKey(T.kLineHeightProperty)}set lineHeight(e){this.SetPropertyValueStringByKey(T.kLineHeightProperty,e)}get margin(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginProperty)}set margin(e){this.SetPropertyValueStringByKey(T.kMarginProperty,e)}get marginBottom(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginBottomProperty)}set marginBottom(e){this.SetPropertyValueStringByKey(T.kMarginBottomProperty,e)}get marginLeft(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginLeftProperty)}set marginLeft(e){this.SetPropertyValueStringByKey(T.kMarginLeftProperty,e)}get marginRight(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginRightProperty)}set marginRight(e){this.SetPropertyValueStringByKey(T.kMarginRightProperty,e)}get marginTop(){return this.GetDeclaredPropertyValueStringByKey(T.kMarginTopProperty)}set marginTop(e){this.SetPropertyValueStringByKey(T.kMarginTopProperty,e)}get maxHeight(){return this.GetDeclaredPropertyValueStringByKey(T.kMaxHeightProperty)}set maxHeight(e){this.SetPropertyValueStringByKey(T.kMaxHeightProperty,e)}get maxWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kMaxWidthProperty)}set maxWidth(e){this.SetPropertyValueStringByKey(T.kMaxWidthProperty,e)}get minHeight(){return this.GetDeclaredPropertyValueStringByKey(T.kMinHeightProperty)}set minHeight(e){this.SetPropertyValueStringByKey(T.kMinHeightProperty,e)}get minWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kMinWidthProperty)}set minWidth(e){this.SetPropertyValueStringByKey(T.kMinWidthProperty,e)}get opacity(){return this.GetDeclaredPropertyValueStringByKey(T.kOpacityProperty)}set opacity(e){this.SetPropertyValueStringByKey(T.kOpacityProperty,e)}get order(){return this.GetDeclaredPropertyValueStringByKey(T.kOrderProperty)}set order(e){this.SetPropertyValueStringByKey(T.kOrderProperty,e)}get outline(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineProperty)}set outline(e){this.SetPropertyValueStringByKey(T.kOutlineProperty,e)}get outlineColor(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineColorProperty)}set outlineColor(e){this.SetPropertyValueStringByKey(T.kOutlineColorProperty,e)}get outlineStyle(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineStyleProperty)}set outlineStyle(e){this.SetPropertyValueStringByKey(T.kOutlineStyleProperty,e)}get outlineWidth(){return this.GetDeclaredPropertyValueStringByKey(T.kOutlineWidthProperty)}set outlineWidth(e){this.SetPropertyValueStringByKey(T.kOutlineWidthProperty,e)}get overflow(){return this.GetDeclaredPropertyValueStringByKey(T.kOverflowProperty)}set overflow(e){this.SetPropertyValueStringByKey(T.kOverflowProperty,e)}get overflowWrap(){return this.GetDeclaredPropertyValueStringByKey(T.kOverflowWrapProperty)}set overflowWrap(e){this.SetPropertyValueStringByKey(T.kOverflowWrapProperty,e)}get padding(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingProperty)}set padding(e){this.SetPropertyValueStringByKey(T.kPaddingProperty,e)}get paddingBottom(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingBottomProperty)}set paddingBottom(e){this.SetPropertyValueStringByKey(T.kPaddingBottomProperty,e)}get paddingLeft(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingLeftProperty)}set paddingLeft(e){this.SetPropertyValueStringByKey(T.kPaddingLeftProperty,e)}get paddingRight(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingRightProperty)}set paddingRight(e){this.SetPropertyValueStringByKey(T.kPaddingRightProperty,e)}get paddingTop(){return this.GetDeclaredPropertyValueStringByKey(T.kPaddingTopProperty)}set paddingTop(e){this.SetPropertyValueStringByKey(T.kPaddingTopProperty,e)}get pointerEvents(){return this.GetDeclaredPropertyValueStringByKey(T.kPointerEventsProperty)}set pointerEvents(e){this.SetPropertyValueStringByKey(T.kPointerEventsProperty,e)}get position(){return this.GetDeclaredPropertyValueStringByKey(T.kPositionProperty)}set position(e){this.SetPropertyValueStringByKey(T.kPositionProperty,e)}get right(){return this.GetDeclaredPropertyValueStringByKey(T.kRightProperty)}set right(e){this.SetPropertyValueStringByKey(T.kRightProperty,e)}get textAlign(){return this.GetDeclaredPropertyValueStringByKey(T.kTextAlignProperty)}set textAlign(e){this.SetPropertyValueStringByKey(T.kTextAlignProperty,e)}get textDecoration(){return this.GetDeclaredPropertyValueStringByKey(T.kTextDecorationLineProperty)}set textDecoration(e){this.SetPropertyValueStringByKey(T.kTextDecorationLineProperty,e)}get textDecorationColor(){return this.GetDeclaredPropertyValueStringByKey(T.kTextDecorationColorProperty)}set textDecorationColor(e){this.SetPropertyValueStringByKey(T.kTextDecorationColorProperty,e)}get textDecorationLine(){return this.GetDeclaredPropertyValueStringByKey(T.kTextDecorationLineProperty)}set textDecorationLine(e){this.SetPropertyValueStringByKey(T.kTextDecorationLineProperty,e)}get textIndent(){return this.GetDeclaredPropertyValueStringByKey(T.kTextIndentProperty)}set textIndent(e){this.SetPropertyValueStringByKey(T.kTextIndentProperty,e)}get textOverflow(){return this.GetDeclaredPropertyValueStringByKey(T.kTextOverflowProperty)}set textOverflow(e){this.SetPropertyValueStringByKey(T.kTextOverflowProperty,e)}get textShadow(){return this.GetDeclaredPropertyValueStringByKey(T.kTextShadowProperty)}set textShadow(e){this.SetPropertyValueStringByKey(T.kTextShadowProperty,e)}get textTransform(){return this.GetDeclaredPropertyValueStringByKey(T.kTextTransformProperty)}set textTransform(e){this.SetPropertyValueStringByKey(T.kTextTransformProperty,e)}get top(){return this.GetDeclaredPropertyValueStringByKey(T.kTopProperty)}set top(e){this.SetPropertyValueStringByKey(T.kTopProperty,e)}get transform(){return this.GetDeclaredPropertyValueStringByKey(T.kTransformProperty)}set transform(e){this.SetPropertyValueStringByKey(T.kTransformProperty,e)}get transformOrigin(){return this.GetDeclaredPropertyValueStringByKey(T.kTransformOriginProperty)}set transformOrigin(e){this.SetPropertyValueStringByKey(T.kTransformOriginProperty,e)}get verticalAlign(){return this.GetDeclaredPropertyValueStringByKey(T.kVerticalAlignProperty)}set verticalAlign(e){this.SetPropertyValueStringByKey(T.kVerticalAlignProperty,e)}get visibility(){return this.GetDeclaredPropertyValueStringByKey(T.kVisibilityProperty)}set visibility(e){this.SetPropertyValueStringByKey(T.kVisibilityProperty,e)}get whiteSpace(){return this.GetDeclaredPropertyValueStringByKey(T.kWhiteSpaceProperty)}set whiteSpace(e){this.SetPropertyValueStringByKey(T.kWhiteSpaceProperty,e)}get width(){return this.GetDeclaredPropertyValueStringByKey(T.kWidthProperty)}set width(e){this.SetPropertyValueStringByKey(T.kWidthProperty,e)}get wordWrap(){return this.GetDeclaredPropertyValueStringByKey(T.kOverflowWrapProperty)}set wordWrap(e){this.SetPropertyValueStringByKey(T.kWordWrapProperty,e)}get zIndex(){return this.GetDeclaredPropertyValueStringByKey(T.kZIndexProperty)}set zIndex(e){this.SetPropertyValueStringByKey(T.kZIndexProperty,e)}}var u3=(r=>(r[r.kNone=0]="kNone",r[r.kIndexSizeErr=1]="kIndexSizeErr",r[r.kDomstringSizeErr=2]="kDomstringSizeErr",r[r.kHierarchyRequestErr=3]="kHierarchyRequestErr",r[r.kWrongDocumentErr=4]="kWrongDocumentErr",r[r.kInvalidCharacterErr=5]="kInvalidCharacterErr",r[r.kNoDataAllowedErr=6]="kNoDataAllowedErr",r[r.kNoModificationAllowedErr=7]="kNoModificationAllowedErr",r[r.kNotFoundErr=8]="kNotFoundErr",r[r.kNotSupportedErr=9]="kNotSupportedErr",r[r.kInuseAttributeErr=10]="kInuseAttributeErr",r[r.kInvalidStateErr=11]="kInvalidStateErr",r[r.kSyntaxErr=12]="kSyntaxErr",r[r.kInvalidModificationErr=13]="kInvalidModificationErr",r[r.kNamespaceErr=14]="kNamespaceErr",r[r.kInvalidAccessErr=15]="kInvalidAccessErr",r[r.kValidationErr=16]="kValidationErr",r[r.kTypeMismatchErr=17]="kTypeMismatchErr",r[r.kSecurityErr=18]="kSecurityErr",r[r.kNetworkErr=19]="kNetworkErr",r[r.kAbortErr=20]="kAbortErr",r[r.kUrlMismatchErr=21]="kUrlMismatchErr",r[r.kQuotaExceededErr=22]="kQuotaExceededErr",r[r.kTimeoutErr=23]="kTimeoutErr",r[r.kInvalidNodeTypeErr=24]="kInvalidNodeTypeErr",r[r.kDataCloneErr=25]="kDataCloneErr",r[r.kHighestErrCodeValue=25]="kHighestErrCodeValue",r[r.kReadOnlyErr=26]="kReadOnlyErr",r[r.kInvalidPointerIdErr=27]="kInvalidPointerIdErr",r[r.kNotAllowedErr=28]="kNotAllowedErr",r))(u3||{});class ax extends Error{static Raise(e){throw new Error(e.toString())}constructor(e,t){super()}}class qc extends l3{constructor(){super(...arguments);u(this,"data_",null);u(this,"data_with_inherited_properties_",null)}data(){return this.data_}setProperty(t,i){ax.Raise(u3.kInvalidAccessErr)}HasInheritedProperties(){return!!this.data_with_inherited_properties_}GetInheritedPropertyValueReference(t){if(!this.data_with_inherited_properties_)throw new Error("500");return this.data_with_inherited_properties_.GetPropertyValueReference(t)}SetData(t){this.data_=t,this.UpdateInheritedData()}UpdateInheritedData(){if(!this.data_)this.data_with_inherited_properties_=null;else if(this.data_.has_declared_inherited_properties())this.data_with_inherited_properties_=this.data_;else{let t=this.data_.GetParentComputedStyleDeclaration();t?this.data_with_inherited_properties_=t.data_with_inherited_properties_:this.data_with_inherited_properties_=null}}GetDeclaredPropertyValueStringByKey(t){if(t>T.kMaxLonghandPropertyKey)return Rr(t,T.kMaxEveryPropertyKey),ze(),_i(nn,'Unsupported property query for "',ot(t),'": Returning of property value strings is not ',"supported for shorthand properties."),"";J(this.data_);const i=this.data_.GetPropertyValueReference(t);return J(i),i.ToString()}}class m9{}class um extends m9{constructor(){super(...arguments);u(this,"declared_property_values_",new Map);u(this,"important_properties_",new Set)}GetPropertyValue(t){return T.kNoneProperty,Rr(t,T.kMaxLonghandPropertyKey),this.declared_property_values_.has(t)?this.declared_property_values_.get(t):cb(t)}SetPropertyValue(t,i){T.kNoneProperty,Rr(t,T.kMaxLonghandPropertyKey),i?this.declared_property_values_.set(t,i):this.declared_property_values_.delete(t)}GetPropertyValueString(t){return T.kNoneProperty,Rr(t,T.kMaxLonghandPropertyKey),this.declared_property_values_.has(t)?this.declared_property_values_.get(t).ToString():""}declared_property_values(){return this.declared_property_values_}IsDeclaredPropertyImportant(t){return this.important_properties_.has(t)}AssignFrom(t){this.declared_property_values_=new Map(t.declared_property_values()),this.important_properties_=new Set(t.important_properties_)}get align_content(){return this.GetPropertyValue(T.kAlignContentProperty)}set align_content(t){this.SetPropertyValue(T.kAlignContentProperty,t)}toString(){const i=Array.from(this.declared_property_values_.keys()).sort();let s=[];for(let n of i){const o=this.GetPropertyValueString(n);s.push(`${ot(n)}:${o}`)}return s.join(";")}}var hw={},c3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(c3,"__esModule",{value:!0});var h3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(h3,"__esModule",{value:!0});var p1={};function hp(r){return r!=null&&(!!r._isBuffer||d3(r)||x9(r))}function d3(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function x9(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&d3(r.slice(0,0))}var dw;typeof Object.create=="function"?dw=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:dw=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e};const hb=dw;var y9=/%[sdj%]/g;function g1(r){if(!tg(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(Po(arguments[t]));return e.join(" ")}for(var t=1,i=arguments,s=i.length,n=String(r).replace(y9,function(a){if(a==="%%")return"%";if(t>=s)return a;switch(a){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":try{return JSON.stringify(i[t++])}catch{return"[Circular]"}default:return a}}),o=i[t];t<s;o=i[++t])eg(o)||!yh(o)?n+=" "+o:n+=" "+Po(o);return n}function db(r,e){if(ha(global.process))return function(){return db(r,e).apply(this,arguments)};if(zp.noDeprecation===!0)return r;var t=!1;function i(){if(!t){if(zp.throwDeprecation)throw new Error(e);zp.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return i}var cm={},wE;function f3(r){if(ha(wE)&&(wE=zp.env.NODE_DEBUG||""),r=r.toUpperCase(),!cm[r])if(new RegExp("\\b"+r+"\\b","i").test(wE)){var e=0;cm[r]=function(){var t=g1.apply(null,arguments);console.error("%s %d: %s",r,e,t)}}else cm[r]=function(){};return cm[r]}function Po(r,e){var t={seen:[],stylize:E9};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),m1(e)?t.showHidden=e:e&&gb(t,e),ha(t.showHidden)&&(t.showHidden=!1),ha(t.depth)&&(t.depth=2),ha(t.colors)&&(t.colors=!1),ha(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=v9),cy(t,r,t.depth)}Po.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Po.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function v9(r,e){var t=Po.styles[e];return t?"\x1B["+Po.colors[t][0]+"m"+r+"\x1B["+Po.colors[t][1]+"m":r}function E9(r,e){return r}function S9(r){var e={};return r.forEach(function(t,i){e[t]=!0}),e}function cy(r,e,t){if(r.customInspect&&e&&Tc(e.inspect)&&e.inspect!==Po&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(t,r);return tg(i)||(i=cy(r,i,t)),i}var s=w9(r,e);if(s)return s;var n=Object.keys(e),o=S9(n);if(r.showHidden&&(n=Object.getOwnPropertyNames(e)),yd(e)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return AE(e);if(n.length===0){if(Tc(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(kc(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Wd(e))return r.stylize(Date.prototype.toString.call(e),"date");if(yd(e))return AE(e)}var l="",c=!1,d=["{","}"];if(fb(e)&&(c=!0,d=["[","]"]),Tc(e)){var f=e.name?": "+e.name:"";l=" [Function"+f+"]"}if(kc(e)&&(l=" "+RegExp.prototype.toString.call(e)),Wd(e)&&(l=" "+Date.prototype.toUTCString.call(e)),yd(e)&&(l=" "+AE(e)),n.length===0&&(!c||e.length==0))return d[0]+l+d[1];if(t<0)return kc(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var g;return c?g=A9(r,e,t,o,n):g=n.map(function(x){return fw(r,e,t,o,x,c)}),r.seen.pop(),b9(g,l,d)}function w9(r,e){if(ha(e))return r.stylize("undefined","undefined");if(tg(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(_b(e))return r.stylize(""+e,"number");if(m1(e))return r.stylize(""+e,"boolean");if(eg(e))return r.stylize("null","null")}function AE(r){return"["+Error.prototype.toString.call(r)+"]"}function A9(r,e,t,i,s){for(var n=[],o=0,a=e.length;o<a;++o)x3(e,String(o))?n.push(fw(r,e,t,i,String(o),!0)):n.push("");return s.forEach(function(l){l.match(/^\d+$/)||n.push(fw(r,e,t,i,l,!0))}),n}function fw(r,e,t,i,s,n){var o,a,l;if(l=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]},l.get?l.set?a=r.stylize("[Getter/Setter]","special"):a=r.stylize("[Getter]","special"):l.set&&(a=r.stylize("[Setter]","special")),x3(i,s)||(o="["+s+"]"),a||(r.seen.indexOf(l.value)<0?(eg(t)?a=cy(r,l.value,null):a=cy(r,l.value,t-1),a.indexOf(`
`)>-1&&(n?a=a.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(c){return"   "+c}).join(`
`))):a=r.stylize("[Circular]","special")),ha(o)){if(n&&s.match(/^\d+$/))return a;o=JSON.stringify(""+s),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=r.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=r.stylize(o,"string"))}return o+": "+a}function b9(r,e,t){var i=r.reduce(function(s,n){return n.indexOf(`
`)>=0,s+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function fb(r){return Array.isArray(r)}function m1(r){return typeof r=="boolean"}function eg(r){return r===null}function _3(r){return r==null}function _b(r){return typeof r=="number"}function tg(r){return typeof r=="string"}function p3(r){return typeof r=="symbol"}function ha(r){return r===void 0}function kc(r){return yh(r)&&pb(r)==="[object RegExp]"}function yh(r){return typeof r=="object"&&r!==null}function Wd(r){return yh(r)&&pb(r)==="[object Date]"}function yd(r){return yh(r)&&(pb(r)==="[object Error]"||r instanceof Error)}function Tc(r){return typeof r=="function"}function hy(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function g3(r){return Buffer.isBuffer(r)}function pb(r){return Object.prototype.toString.call(r)}function bE(r){return r<10?"0"+r.toString(10):r.toString(10)}var k9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T9(){var r=new Date,e=[bE(r.getHours()),bE(r.getMinutes()),bE(r.getSeconds())].join(":");return[r.getDate(),k9[r.getMonth()],e].join(" ")}function m3(){console.log("%s - %s",T9(),g1.apply(null,arguments))}function gb(r,e){if(!e||!yh(e))return r;for(var t=Object.keys(e),i=t.length;i--;)r[t[i]]=e[t[i]];return r}function x3(r,e){return Object.prototype.hasOwnProperty.call(r,e)}const P9={inherits:hb,_extend:gb,log:m3,isBuffer:g3,isPrimitive:hy,isFunction:Tc,isError:yd,isDate:Wd,isObject:yh,isRegExp:kc,isUndefined:ha,isSymbol:p3,isString:tg,isNumber:_b,isNullOrUndefined:_3,isNull:eg,isBoolean:m1,isArray:fb,inspect:Po,deprecate:db,format:g1,debuglog:f3},R9=Object.freeze(Object.defineProperty({__proto__:null,format:g1,deprecate:db,debuglog:f3,inspect:Po,isArray:fb,isBoolean:m1,isNull:eg,isNullOrUndefined:_3,isNumber:_b,isString:tg,isSymbol:p3,isUndefined:ha,isRegExp:kc,isObject:yh,isDate:Wd,isError:yd,isFunction:Tc,isPrimitive:hy,isBuffer:g3,log:m3,inherits:hb,_extend:gb,default:P9},Symbol.toStringTag,{value:"Module"}));function $P(r,e){if(r===e)return 0;for(var t=r.length,i=e.length,s=0,n=Math.min(t,i);s<n;++s)if(r[s]!==e[s]){t=r[s],i=e[s];break}return t<i?-1:i<t?1:0}var D9=Object.prototype.hasOwnProperty,KP=Object.keys||function(r){var e=[];for(var t in r)D9.call(r,t)&&e.push(t);return e},XP=Array.prototype.slice,kE;function y3(){return typeof kE<"u"?kE:kE=function(){return function(){}.name==="foo"}()}function YP(r){return Object.prototype.toString.call(r)}function qP(r){return hp(r)||typeof global.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function Qn(r,e){r||Kn(r,!0,e,"==",x0)}var C9=/\s*function\s+([^\(\s]*)\s*/;function v3(r){if(!!Tc(r)){if(y3())return r.name;var e=r.toString(),t=e.match(C9);return t&&t[1]}}Qn.AssertionError=x1;function x1(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=O9(this),this.generatedMessage=!0);var e=r.stackStartFunction||Kn;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var i=t.stack,s=v3(e),n=i.indexOf(`
`+s);if(n>=0){var o=i.indexOf(`
`,n+1);i=i.substring(o+1)}this.stack=i}}}hb(x1,Error);function QP(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function JP(r){if(y3()||!Tc(r))return Po(r);var e=v3(r),t=e?": "+e:"";return"[Function"+t+"]"}function O9(r){return QP(JP(r.actual),128)+" "+r.operator+" "+QP(JP(r.expected),128)}function Kn(r,e,t,i,s){throw new x1({message:t,actual:r,expected:e,operator:i,stackStartFunction:s})}Qn.fail=Kn;function x0(r,e){r||Kn(r,!0,e,"==",x0)}Qn.ok=x0;Qn.equal=mb;function mb(r,e,t){r!=e&&Kn(r,e,t,"==",mb)}Qn.notEqual=xb;function xb(r,e,t){r==e&&Kn(r,e,t,"!=",xb)}Qn.deepEqual=yb;function yb(r,e,t){$d(r,e,!1)||Kn(r,e,t,"deepEqual",yb)}Qn.deepStrictEqual=vb;function vb(r,e,t){$d(r,e,!0)||Kn(r,e,t,"deepStrictEqual",vb)}function $d(r,e,t,i){if(r===e)return!0;if(hp(r)&&hp(e))return $P(r,e)===0;if(Wd(r)&&Wd(e))return r.getTime()===e.getTime();if(kc(r)&&kc(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(qP(r)&&qP(e)&&YP(r)===YP(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return $P(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(hp(r)!==hp(e))return!1;i=i||{actual:[],expected:[]};var s=i.actual.indexOf(r);return s!==-1&&s===i.expected.indexOf(e)?!0:(i.actual.push(r),i.expected.push(e),N9(r,e,t,i))}function ZP(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function N9(r,e,t,i){if(r==null||e===null||e===void 0)return!1;if(hy(r)||hy(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var s=ZP(r),n=ZP(e);if(s&&!n||!s&&n)return!1;if(s)return r=XP.call(r),e=XP.call(e),$d(r,e,t);var o=KP(r),a=KP(e),l,c;if(o.length!==a.length)return!1;for(o.sort(),a.sort(),c=o.length-1;c>=0;c--)if(o[c]!==a[c])return!1;for(c=o.length-1;c>=0;c--)if(l=o[c],!$d(r[l],e[l],t,i))return!1;return!0}Qn.notDeepEqual=Eb;function Eb(r,e,t){$d(r,e,!1)&&Kn(r,e,t,"notDeepEqual",Eb)}Qn.notDeepStrictEqual=Sb;function Sb(r,e,t){$d(r,e,!0)&&Kn(r,e,t,"notDeepStrictEqual",Sb)}Qn.strictEqual=wb;function wb(r,e,t){r!==e&&Kn(r,e,t,"===",wb)}Qn.notStrictEqual=Ab;function Ab(r,e,t){r===e&&Kn(r,e,t,"!==",Ab)}function eR(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function I9(r){var e;try{r()}catch(t){e=t}return e}function E3(r,e,t,i){var s;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(i=t,t=null),s=I9(e),i=(t&&t.name?" ("+t.name+").":".")+(i?" "+i:"."),r&&!s&&Kn(s,t,"Missing expected exception"+i);var n=typeof i=="string",o=!r&&yd(s),a=!r&&s&&!t;if((o&&n&&eR(s,t)||a)&&Kn(s,t,"Got unwanted exception"+i),r&&s&&t&&!eR(s,t)||!r&&s)throw s}Qn.throws=S3;function S3(r,e,t){E3(!0,r,e,t)}Qn.doesNotThrow=w3;function w3(r,e,t){E3(!1,r,e,t)}Qn.ifError=A3;function A3(r){if(r)throw r}const F9=Object.freeze(Object.defineProperty({__proto__:null,default:Qn,AssertionError:x1,fail:Kn,ok:x0,assert:x0,equal:mb,notEqual:xb,deepEqual:yb,deepStrictEqual:vb,notDeepEqual:Eb,notDeepStrictEqual:Sb,strictEqual:wb,notStrictEqual:Ab,throws:S3,doesNotThrow:w3,ifError:A3},Symbol.toStringTag,{value:"Module"})),Us=sb(F9);var Xe={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Xe,"__esModule",{value:!0});Xe.SuppressWarnings=Xe.Override=Xe.Nullable=Xe.NotNull=void 0;function M9(r,e,t){}Xe.NotNull=M9;function B9(r,e,t){}Xe.Nullable=B9;function L9(r,e,t){}Xe.Override=L9;function U9(r){return(e,t,i)=>{}}Xe.SuppressWarnings=U9;var ml={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.IntStream=void 0,function(e){e.EOF=-1,e.UNKNOWN_SOURCE_NAME="<unknown>"}(r.IntStream||(r.IntStream={}))})(ml);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ka=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(p1,"__esModule",{value:!0});p1.ANTLRInputStream=void 0;const G9=Us,Ta=Xe,hm=ml;class No{constructor(e){this.p=0,this.data=e,this.n=e.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw G9(this.LA(1)===hm.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(e){return e===0?0:e<0&&(e++,this.p+e-1<0)||this.p+e-1>=this.n?hm.IntStream.EOF:this.data.charCodeAt(this.p+e-1)}LT(e){return this.LA(e)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(e){}seek(e){if(e<=this.p){this.p=e;return}for(e=Math.min(e,this.n);this.p<e;)this.consume()}getText(e){let t=e.a,i=e.b;i>=this.n&&(i=this.n-1);let s=i-t+1;return t>=this.n?"":this.data.substr(t,s)}get sourceName(){return this.name?this.name:hm.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}}ka([Ta.Override],No.prototype,"consume",null);ka([Ta.Override],No.prototype,"LA",null);ka([Ta.Override],No.prototype,"index",null);ka([Ta.Override],No.prototype,"size",null);ka([Ta.Override],No.prototype,"mark",null);ka([Ta.Override],No.prototype,"release",null);ka([Ta.Override],No.prototype,"seek",null);ka([Ta.Override],No.prototype,"getText",null);ka([Ta.Override],No.prototype,"sourceName",null);ka([Ta.Override],No.prototype,"toString",null);p1.ANTLRInputStream=No;var l_={},u_={},Pa={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,c=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(c=(l<3?d(c):l>3?d(n,o,c):d(n,o))||c);return l>3&&c&&Object.defineProperty(n,o,c),c};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNState=void 0;const t=Xe;class i{constructor(){this.stateNumber=i.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(n){return n instanceof i?this.stateNumber===n.stateNumber:!1}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(n,o){if(this.transitions.length===0)this.epsilonOnlyTransitions=n.isEpsilon;else if(this.epsilonOnlyTransitions!==n.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(o!==void 0?o:this.transitions.length,0,n)}transition(n){return this.transitions[n]}setTransition(n,o){this.transitions[n]=o}removeTransition(n){return this.transitions.splice(n,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(n){this.ruleIndex=n}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(n){return this.optimizedTransitions[n]}addOptimizedTransition(n){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(n)}setOptimizedTransition(n,o){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[n]=o}removeOptimizedTransition(n){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(n,1)}}e([t.Override],i.prototype,"hashCode",null),e([t.Override],i.prototype,"equals",null),e([t.Override],i.prototype,"toString",null),r.ATNState=i,function(s){s.INVALID_STATE_NUMBER=-1}(i=r.ATNState||(r.ATNState={}))})(Pa);var ji={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.ATNStateType=void 0,function(e){e[e.INVALID_TYPE=0]="INVALID_TYPE",e[e.BASIC=1]="BASIC",e[e.RULE_START=2]="RULE_START",e[e.BLOCK_START=3]="BLOCK_START",e[e.PLUS_BLOCK_START=4]="PLUS_BLOCK_START",e[e.STAR_BLOCK_START=5]="STAR_BLOCK_START",e[e.TOKEN_START=6]="TOKEN_START",e[e.RULE_STOP=7]="RULE_STOP",e[e.BLOCK_END=8]="BLOCK_END",e[e.STAR_LOOP_BACK=9]="STAR_LOOP_BACK",e[e.STAR_LOOP_ENTRY=10]="STAR_LOOP_ENTRY",e[e.PLUS_LOOP_BACK=11]="PLUS_LOOP_BACK",e[e.LOOP_END=12]="LOOP_END"}(r.ATNStateType||(r.ATNStateType={}))})(ji);var bf={},Ra={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ra,"__esModule",{value:!0});var Br=Ra.RecognitionException=void 0;class z9 extends Error{constructor(e,t,i,s){super(s),this._offendingState=-1,this._recognizer=e,this.input=t,this.ctx=i,e&&(this._offendingState=e.state)}get offendingState(){return this._offendingState}setOffendingState(e){this._offendingState=e}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(e){if(!(e&&e!==this._recognizer))return this.offendingToken}setOffendingToken(e,t){e===this._recognizer&&(this.offendingToken=t)}get recognizer(){return this._recognizer}}Br=Ra.RecognitionException=z9;var rg={},kf={},Io={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var b3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},H9=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Io,"__esModule",{value:!0});Io.Transition=void 0;const k3=Xe;let y0=class{constructor(e){if(e==null)throw new Error("target cannot be null.");this.target=e}get isEpsilon(){return!1}get label(){}};y0.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];b3([k3.NotNull],y0.prototype,"target",void 0);y0=b3([H9(0,k3.NotNull)],y0);Io.Transition=y0;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(kf,"__esModule",{value:!0});kf.AbstractPredicateTransition=void 0;const j9=Io;class V9 extends j9.Transition{constructor(e){super(e)}}kf.AbstractPredicateTransition=V9;var vh={},Fo={},y1={},ti={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash=void 0,function(e){function i(l=0){return l}e.initialize=i;function s(l,c){c==null?c=0:typeof c=="string"?c=a(c):typeof c=="object"&&(c=c.hashCode());let b=c;return b=Math.imul(b,3432918353),b=b<<15|b>>>32-15,b=Math.imul(b,461845907),l=l^b,l=l<<13|l>>>32-13,l=Math.imul(l,5)+3864292196,l&4294967295}e.update=s;function n(l,c){return l=l^c*4,l=l^l>>>16,l=Math.imul(l,2246822507),l=l^l>>>13,l=Math.imul(l,3266489909),l=l^l>>>16,l}e.finish=n;function o(l,c=0){let d=i(c),f=0;for(let g of l)d=s(d,g),f++;return d=n(d,f),d}e.hashCode=o;function a(l){let c=l.length;if(c===0)return 0;let d=0;for(let f=0;f<c;f++){let g=l.charCodeAt(f);d=(d<<5>>>0)-d+g,d|=0}return d}}(r.MurmurHash||(r.MurmurHash={}))})(ti);var Gs={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var T3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ObjectEqualityComparator=void 0;const P3=Xe;class v0{hashCode(e){return e==null?0:e.hashCode()}equals(e,t){return e==null?t==null:e.equals(t)}}v0.INSTANCE=new v0;T3([P3.Override],v0.prototype,"hashCode",null);T3([P3.Override],v0.prototype,"equals",null);Gs.ObjectEqualityComparator=v0;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var R3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(y1,"__esModule",{value:!0});y1.DefaultEqualityComparator=void 0;const D3=Xe,W9=ti,tR=Gs;class E0{hashCode(e){return e==null?0:typeof e=="string"||typeof e=="number"?W9.MurmurHash.hashCode([e]):tR.ObjectEqualityComparator.INSTANCE.hashCode(e)}equals(e,t){return e==null?t==null:typeof e=="string"||typeof e=="number"?e===t:tR.ObjectEqualityComparator.INSTANCE.equals(e,t)}}E0.INSTANCE=new E0;R3([D3.Override],E0.prototype,"hashCode",null);R3([D3.Override],E0.prototype,"equals",null);y1.DefaultEqualityComparator=E0;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Cn=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},$9=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Array2DHashSet=void 0;const K9=Us,X9=y1,On=Xe,TE=ti,dm=16,PE=.75;class ai{constructor(e,t=dm){if(this.n=0,this.threshold=Math.floor(dm*PE),e instanceof ai){this.comparator=e.comparator,this.buckets=e.buckets.slice(0);for(let i=0;i<this.buckets.length;i++){let s=this.buckets[i];s&&(this.buckets[i]=s.slice(0))}this.n=e.n,this.threshold=e.threshold}else this.comparator=e||X9.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(t)}getOrAdd(e){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(e)}getOrAddImpl(e){let t=this.getBucket(e),i=this.buckets[t];if(!i)return i=[e],this.buckets[t]=i,this.n++,e;for(let s of i)if(this.comparator.equals(s,e))return s;return i.push(e),this.n++,e}get(e){if(e==null)return e;let t=this.getBucket(e),i=this.buckets[t];if(!!i){for(let s of i)if(this.comparator.equals(s,e))return s}}getBucket(e){return this.comparator.hashCode(e)&this.buckets.length-1}hashCode(){let e=TE.MurmurHash.initialize();for(let t of this.buckets)if(t!=null)for(let i of t){if(i==null)break;e=TE.MurmurHash.update(e,this.comparator.hashCode(i))}return e=TE.MurmurHash.finish(e,this.size),e}equals(e){return e===this?!0:!(e instanceof ai)||e.size!==this.size?!1:this.containsAll(e)}expand(){let e=this.buckets,t=this.buckets.length*2,i=this.createBuckets(t);this.buckets=i,this.threshold=Math.floor(t*PE);let s=this.size;for(let n of e)if(!!n)for(let o of n){let a=this.getBucket(o),l=this.buckets[a];l||(l=[],this.buckets[a]=l),l.push(o)}K9(this.n===s)}add(e){return this.getOrAdd(e)===e}get size(){return this.n}get isEmpty(){return this.n===0}contains(e){return this.containsFast(this.asElementType(e))}containsFast(e){return e==null?!1:this.get(e)!=null}*[Symbol.iterator](){yield*this.toArray()}toArray(){const e=new Array(this.size);let t=0;for(let i of this.buckets)if(i!=null)for(let s of i){if(s==null)break;e[t++]=s}return e}containsAll(e){if(e instanceof ai){let t=e;for(let i of t.buckets)if(i!=null)for(let s of i){if(s==null)break;if(!this.containsFast(this.asElementType(s)))return!1}}else for(let t of e)if(!this.containsFast(this.asElementType(t)))return!1;return!0}addAll(e){let t=!1;for(let i of e)this.getOrAdd(i)!==i&&(t=!0);return t}clear(){this.buckets=this.createBuckets(dm),this.n=0,this.threshold=Math.floor(dm*PE)}toString(){if(this.size===0)return"{}";let e="{",t=!0;for(let i of this.buckets)if(i!=null)for(let s of i){if(s==null)break;t?t=!1:e+=", ",e+=s.toString()}return e+="}",e}toTableString(){let e="";for(let t of this.buckets){if(t==null){e+=`null
`;continue}e+="[";let i=!0;for(let s of t)i?i=!1:e+=" ",s==null?e+="_":e+=s.toString();e+=`]
`}return e}asElementType(e){return e}createBuckets(e){return new Array(e)}}Cn([On.NotNull],ai.prototype,"comparator",void 0);Cn([On.Override],ai.prototype,"hashCode",null);Cn([On.Override],ai.prototype,"equals",null);Cn([On.Override],ai.prototype,"add",null);Cn([On.Override],ai.prototype,"size",null);Cn([On.Override],ai.prototype,"isEmpty",null);Cn([On.Override],ai.prototype,"contains",null);Cn([$9(0,On.Nullable)],ai.prototype,"containsFast",null);Cn([On.Override],ai.prototype,Symbol.iterator,null);Cn([On.Override],ai.prototype,"toArray",null);Cn([On.Override],ai.prototype,"containsAll",null);Cn([On.Override],ai.prototype,"addAll",null);Cn([On.Override],ai.prototype,"clear",null);Cn([On.Override],ai.prototype,"toString",null);Cn([On.SuppressWarnings("unchecked")],ai.prototype,"asElementType",null);Cn([On.SuppressWarnings("unchecked")],ai.prototype,"createBuckets",null);Fo.Array2DHashSet=ai;var Eh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var C3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.ArrayEqualityComparator=void 0;const O3=Xe,Y9=ti,q9=Gs;class S0{hashCode(e){return e==null?0:Y9.MurmurHash.hashCode(e,0)}equals(e,t){if(e==null)return t==null;if(t==null||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!q9.ObjectEqualityComparator.INSTANCE.equals(e[i],t[i]))return!1;return!0}}S0.INSTANCE=new S0;C3([O3.Override],S0.prototype,"hashCode",null);C3([O3.Override],S0.prototype,"equals",null);Eh.ArrayEqualityComparator=S0;var Ei={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ei,"__esModule",{value:!0});var bb=Ei.toCharArray=Ei.toMap=Ei.equals=N3=Ei.join=Ei.escapeWhitespace=void 0;function Q9(r,e){return e?r.replace(/ /,"\xB7"):r.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")}Ei.escapeWhitespace=Q9;function J9(r,e){let t="",i=!0;for(let s of r)i?i=!1:t+=e,t+=s;return t}var N3=Ei.join=J9;function Z9(r,e){return r===e?!0:r===void 0||e===void 0?!1:r.equals(e)}Ei.equals=Z9;function ez(r){let e=new Map;for(let t=0;t<r.length;t++)e.set(r[t],t);return e}Ei.toMap=ez;function tz(r){if(typeof r=="string"){let e=new Uint16Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}else return r.toCharArray()}bb=Ei.toCharArray=tz;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(g,x,E,P){var b=arguments.length,D=b<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,E):P,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,x,E,P);else for(var O=g.length-1;O>=0;O--)(C=g[O])&&(D=(b<3?C(D):b>3?C(x,E,D):C(x,E))||D);return b>3&&D&&Object.defineProperty(x,E,D),D},t=$&&$.__param||function(g,x){return function(E,P){x(E,P,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SemanticContext=void 0;const i=Fo,s=Eh,n=ti,o=Xe,a=Gs,l=Ei;function c(g){let x;for(let E of g){if(x===void 0){x=E;continue}x.compareTo(E)<0&&(x=E)}return x}function d(g){let x;for(let E of g){if(x===void 0){x=E;continue}x.compareTo(E)>0&&(x=E)}return x}class f{static get NONE(){return f._NONE===void 0&&(f._NONE=new f.Predicate),f._NONE}evalPrecedence(x,E){return this}static and(x,E){if(!x||x===f.NONE)return E;if(E===f.NONE)return x;let P=new f.AND(x,E);return P.opnds.length===1?P.opnds[0]:P}static or(x,E){if(!x)return E;if(x===f.NONE||E===f.NONE)return f.NONE;let P=new f.OR(x,E);return P.opnds.length===1?P.opnds[0]:P}}r.SemanticContext=f,function(g){function P(j){let I=[];for(let M=0;M<j.length;M++){let R=j[M];R instanceof g.PrecedencePredicate&&(I.push(R),j.splice(M,1),M--)}return I}class b extends g{constructor(I=-1,M=-1,R=!1){super(),this.ruleIndex=I,this.predIndex=M,this.isCtxDependent=R}eval(I,M){let R=this.isCtxDependent?M:void 0;return I.sempred(R,this.ruleIndex,this.predIndex)}hashCode(){let I=n.MurmurHash.initialize();return I=n.MurmurHash.update(I,this.ruleIndex),I=n.MurmurHash.update(I,this.predIndex),I=n.MurmurHash.update(I,this.isCtxDependent?1:0),I=n.MurmurHash.finish(I,3),I}equals(I){return I instanceof b?this===I?!0:this.ruleIndex===I.ruleIndex&&this.predIndex===I.predIndex&&this.isCtxDependent===I.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}e([o.Override],b.prototype,"eval",null),e([o.Override],b.prototype,"hashCode",null),e([o.Override],b.prototype,"equals",null),e([o.Override],b.prototype,"toString",null),g.Predicate=b;class D extends g{constructor(I){super(),this.precedence=I}eval(I,M){return I.precpred(M,this.precedence)}evalPrecedence(I,M){if(I.precpred(M,this.precedence))return g.NONE}compareTo(I){return this.precedence-I.precedence}hashCode(){let I=1;return I=31*I+this.precedence,I}equals(I){return I instanceof D?this===I?!0:this.precedence===I.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}}e([o.Override],D.prototype,"eval",null),e([o.Override],D.prototype,"evalPrecedence",null),e([o.Override],D.prototype,"compareTo",null),e([o.Override],D.prototype,"hashCode",null),e([o.Override],D.prototype,"equals",null),e([o.Override],D.prototype,"toString",null),g.PrecedencePredicate=D;class C extends g{}g.Operator=C;let O=class lx extends C{constructor(I,M){super();let R=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);I instanceof lx?R.addAll(I.opnds):R.add(I),M instanceof lx?R.addAll(M.opnds):R.add(M),this.opnds=R.toArray();let L=P(this.opnds),K=d(L);K&&this.opnds.push(K)}get operands(){return this.opnds}equals(I){return this===I?!0:I instanceof lx?s.ArrayEqualityComparator.INSTANCE.equals(this.opnds,I.opnds):!1}hashCode(){return n.MurmurHash.hashCode(this.opnds,40363613)}eval(I,M){for(let R of this.opnds)if(!R.eval(I,M))return!1;return!0}evalPrecedence(I,M){let R=!1,L=[];for(let Q of this.opnds){let ue=Q.evalPrecedence(I,M);if(R=R||ue!==Q,ue==null)return;ue!==g.NONE&&L.push(ue)}if(!R)return this;if(L.length===0)return g.NONE;let K=L[0];for(let Q=1;Q<L.length;Q++)K=g.and(K,L[Q]);return K}toString(){return l.join(this.opnds,"&&")}};e([o.Override],O.prototype,"operands",null),e([o.Override],O.prototype,"equals",null),e([o.Override],O.prototype,"hashCode",null),e([o.Override],O.prototype,"eval",null),e([o.Override],O.prototype,"evalPrecedence",null),e([o.Override],O.prototype,"toString",null),O=e([t(0,o.NotNull),t(1,o.NotNull)],O),g.AND=O;let N=class ux extends C{constructor(I,M){super();let R=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);I instanceof ux?R.addAll(I.opnds):R.add(I),M instanceof ux?R.addAll(M.opnds):R.add(M),this.opnds=R.toArray();let L=P(this.opnds),K=c(L);K&&this.opnds.push(K)}get operands(){return this.opnds}equals(I){return this===I?!0:I instanceof ux?s.ArrayEqualityComparator.INSTANCE.equals(this.opnds,I.opnds):!1}hashCode(){return n.MurmurHash.hashCode(this.opnds,486279973)}eval(I,M){for(let R of this.opnds)if(R.eval(I,M))return!0;return!1}evalPrecedence(I,M){let R=!1,L=[];for(let Q of this.opnds){let ue=Q.evalPrecedence(I,M);if(R=R||ue!==Q,ue===g.NONE)return g.NONE;ue&&L.push(ue)}if(!R)return this;if(L.length===0)return;let K=L[0];for(let Q=1;Q<L.length;Q++)K=g.or(K,L[Q]);return K}toString(){return l.join(this.opnds,"||")}};e([o.Override],N.prototype,"operands",null),e([o.Override],N.prototype,"equals",null),e([o.Override],N.prototype,"hashCode",null),e([o.Override],N.prototype,"eval",null),e([o.Override],N.prototype,"evalPrecedence",null),e([o.Override],N.prototype,"toString",null),N=e([t(0,o.NotNull),t(1,o.NotNull)],N),g.OR=N}(f=r.SemanticContext||(r.SemanticContext={}))})(vh);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ig=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},rz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(rg,"__esModule",{value:!0});rg.PredicateTransition=void 0;const iz=kf,Kd=Xe,nz=vh;let Qc=class extends iz.AbstractPredicateTransition{constructor(e,t,i,s){super(e),this.ruleIndex=t,this.predIndex=i,this.isCtxDependent=s}get serializationType(){return 4}get isEpsilon(){return!0}matches(e,t,i){return!1}get predicate(){return new nz.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};ig([Kd.Override],Qc.prototype,"serializationType",null);ig([Kd.Override],Qc.prototype,"isEpsilon",null);ig([Kd.Override],Qc.prototype,"matches",null);ig([Kd.Override,Kd.NotNull],Qc.prototype,"toString",null);Qc=ig([rz(0,Kd.NotNull)],Qc);rg.PredicateTransition=Qc;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var I3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},sz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(bf,"__esModule",{value:!0});var F3=bf.FailedPredicateException=void 0;const oz=Ra,M3=Xe,az=rg;let dy=class B3 extends oz.RecognitionException{constructor(e,t,i){super(e,e.inputStream,e.context,B3.formatMessage(t,i));let n=e.interpreter.atn.states[e.state].transition(0);n instanceof az.PredicateTransition?(this._ruleIndex=n.ruleIndex,this._predicateIndex=n.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=t,super.setOffendingToken(e,e.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(e,t){return t||`failed predicate: {${e}}?`}};I3([M3.NotNull],dy,"formatMessage",null);dy=I3([sz(0,M3.NotNull)],dy);F3=bf.FailedPredicateException=dy;var Sh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var lz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},uz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.InputMismatchException=void 0;const cz=Ra,hz=Xe;let _w=class extends cz.RecognitionException{constructor(e,t,i){i===void 0&&(i=e.context),super(e,e.inputStream,i),t!==void 0&&this.setOffendingState(t),this.setOffendingToken(e,e.currentToken)}};_w=lz([uz(0,hz.NotNull)],_w);Sh.InputMismatchException=_w;var c_={},Tf={},v1={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Arrays=void 0,function(e){function t(n,o,a,l){return i(n,a!==void 0?a:0,l!==void 0?l:n.length,o)}e.binarySearch=t;function i(n,o,a,l){let c=o,d=a-1;for(;c<=d;){let f=c+d>>>1,g=n[f];if(g<l)c=f+1;else if(g>l)d=f-1;else return f}return-(c+1)}function s(n){let o="[",a=!0;for(let l of n)a?a=!1:o+=", ",l===null?o+="null":l===void 0?o+="undefined":o+=l;return o+="]",o}e.toString=s}(r.Arrays||(r.Arrays={}))})(v1);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var E1=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.IntegerList=void 0;const dz=v1,S1=Xe,RE=new Int32Array(0),fz=4,DE=(1<<31>>>0)-1-8;class sl{constructor(e){if(!e)this._data=RE,this._size=0;else if(e instanceof sl)this._data=e._data.slice(0),this._size=e._size;else if(typeof e=="number")e===0?(this._data=RE,this._size=0):(this._data=new Int32Array(e),this._size=0);else{this._data=RE,this._size=0;for(let t of e)this.add(t)}}add(e){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=e,this._size++}addAll(e){if(Array.isArray(e))this.ensureCapacity(this._size+e.length),this._data.subarray(this._size,this._size+e.length).set(e),this._size+=e.length;else if(e instanceof sl)this.ensureCapacity(this._size+e._size),this._data.subarray(this._size,this._size+e.size).set(e._data),this._size+=e._size;else{this.ensureCapacity(this._size+e.size);let t=0;for(let i of e)this._data[this._size+t]=i,t++;this._size+=e.size}}get(e){if(e<0||e>=this._size)throw RangeError();return this._data[e]}contains(e){for(let t=0;t<this._size;t++)if(this._data[t]===e)return!0;return!1}set(e,t){if(e<0||e>=this._size)throw RangeError();let i=this._data[e];return this._data[e]=t,i}removeAt(e){let t=this.get(e);return this._data.copyWithin(e,e+1,this._size),this._data[this._size-1]=0,this._size--,t}removeRange(e,t){if(e<0||t<0||e>this._size||t>this._size||e>t)throw RangeError();this._data.copyWithin(t,e,this._size),this._data.fill(0,this._size-(t-e),this._size),this._size-=t-e}get isEmpty(){return this._size===0}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return this._size===0?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(e){if(e===this)return!0;if(!(e instanceof sl)||this._size!==e._size)return!1;for(let t=0;t<this._size;t++)if(this._data[t]!==e._data[t])return!1;return!0}hashCode(){let e=1;for(let t=0;t<this._size;t++)e=31*e+this._data[t];return e}toString(){return this._data.toString()}binarySearch(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=this._size),t<0||i<0||t>this._size||i>this._size)throw new RangeError;if(t>i)throw new RangeError;return dz.Arrays.binarySearch(this._data,e,t,i)}ensureCapacity(e){if(e<0||e>DE)throw new RangeError;let t;for(this._data.length===0?t=fz:t=this._data.length;t<e;)t=t*2,(t<0||t>DE)&&(t=DE);let i=new Int32Array(t);i.set(this._data),this._data=i}toCharArray(){let e=new Uint16Array(this._size),t=0,i=!1;for(let s=0;s<this._size;s++){let n=this._data[s];if(n>=0&&n<65536){e[t]=n,t++;continue}if(!i){let a=new Uint16Array(this.charArraySize());a.set(e,0),e=a,i=!0}let o=String.fromCodePoint(n);e[t]=o.charCodeAt(0),e[t+1]=o.charCodeAt(1),t+=2}return e}charArraySize(){let e=0;for(let t=0;t<this._size;t++)e+=this._data[t]>=65536?2:1;return e}}E1([S1.NotNull],sl.prototype,"_data",void 0);E1([S1.Override],sl.prototype,"equals",null);E1([S1.Override],sl.prototype,"hashCode",null);E1([S1.Override],sl.prototype,"toString",null);Tf.IntegerList=sl;var un={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var kb=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(un,"__esModule",{value:!0});un.Interval=void 0;const Tb=Xe,L3=1e3;class vi{constructor(e,t){this.a=e,this.b=t}static get INVALID(){return vi._INVALID}static of(e,t){return e!==t||e<0||e>L3?new vi(e,t):(vi.cache[e]==null&&(vi.cache[e]=new vi(e,e)),vi.cache[e])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(e){return e===this?!0:e instanceof vi?this.a===e.a&&this.b===e.b:!1}hashCode(){let e=23;return e=e*31+this.a,e=e*31+this.b,e}startsBeforeDisjoint(e){return this.a<e.a&&this.b<e.a}startsBeforeNonDisjoint(e){return this.a<=e.a&&this.b>=e.a}startsAfter(e){return this.a>e.a}startsAfterDisjoint(e){return this.a>e.b}startsAfterNonDisjoint(e){return this.a>e.a&&this.a<=e.b}disjoint(e){return this.startsBeforeDisjoint(e)||this.startsAfterDisjoint(e)}adjacent(e){return this.a===e.b+1||this.b===e.a-1}properlyContains(e){return e.a>=this.a&&e.b<=this.b}union(e){return vi.of(Math.min(this.a,e.a),Math.max(this.b,e.b))}intersection(e){return vi.of(Math.max(this.a,e.a),Math.min(this.b,e.b))}differenceNotProperlyContained(e){let t;return e.startsBeforeNonDisjoint(this)?t=vi.of(Math.max(this.a,e.b+1),this.b):e.startsAfterNonDisjoint(this)&&(t=vi.of(this.a,e.a-1)),t}toString(){return this.a+".."+this.b}}vi._INVALID=new vi(-1,-2);vi.cache=new Array(L3+1);kb([Tb.Override],vi.prototype,"equals",null);kb([Tb.Override],vi.prototype,"hashCode",null);kb([Tb.Override],vi.prototype,"toString",null);un.Interval=vi;var h_={},w1={},Ou={},dr={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0;const e=ml;(function(t){t.INVALID_TYPE=0,t.EPSILON=-2,t.MIN_USER_TOKEN_TYPE=1,t.EOF=e.IntStream.EOF,t.DEFAULT_CHANNEL=0,t.HIDDEN_CHANNEL=1,t.MIN_USER_CHANNEL_VALUE=2})(r.Token||(r.Token={}))})(dr);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var hs=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},U3=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.CommonToken=void 0;const _z=un,ds=Xe,rR=dr;let on=class dp{constructor(e,t,i=dp.EMPTY_SOURCE,s=rR.Token.DEFAULT_CHANNEL,n=0,o=0){this._line=0,this._charPositionInLine=-1,this._channel=rR.Token.DEFAULT_CHANNEL,this.index=-1,this._text=t,this._type=e,this.source=i,this._channel=s,this.start=n,this.stop=o,i.source!=null&&(this._line=i.source.line,this._charPositionInLine=i.source.charPositionInLine)}static fromToken(e){let t=new dp(e.type,void 0,dp.EMPTY_SOURCE,e.channel,e.startIndex,e.stopIndex);return t._line=e.line,t.index=e.tokenIndex,t._charPositionInLine=e.charPositionInLine,e instanceof dp?(t._text=e._text,t.source=e.source):(t._text=e.text,t.source={source:e.tokenSource,stream:e.inputStream}),t}get type(){return this._type}set type(e){this._type=e}get line(){return this._line}set line(e){this._line=e}get text(){if(this._text!=null)return this._text;let e=this.inputStream;if(e==null)return;let t=e.size;return this.start<t&&this.stop<t?e.getText(_z.Interval.of(this.start,this.stop)):"<EOF>"}set text(e){this._text=e}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(e){this._charPositionInLine=e}get channel(){return this._channel}set channel(e){this._channel=e}get startIndex(){return this.start}set startIndex(e){this.start=e}get stopIndex(){return this.stop}set stopIndex(e){this.stop=e}get tokenIndex(){return this.index}set tokenIndex(e){this.index=e}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(e){let t="";this._channel>0&&(t=",channel="+this._channel);let i=this.text;i!=null?(i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i=i.replace(/\t/g,"\\t")):i="<no text>";let s=String(this._type);return e&&(s=e.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+i+"',<"+s+">"+t+","+this._line+":"+this.charPositionInLine+"]"}};on.EMPTY_SOURCE={source:void 0,stream:void 0};hs([ds.NotNull],on.prototype,"source",void 0);hs([ds.Override],on.prototype,"type",null);hs([ds.Override],on.prototype,"line",null);hs([ds.Override],on.prototype,"text",null);hs([ds.Override],on.prototype,"charPositionInLine",null);hs([ds.Override],on.prototype,"channel",null);hs([ds.Override],on.prototype,"startIndex",null);hs([ds.Override],on.prototype,"stopIndex",null);hs([ds.Override],on.prototype,"tokenIndex",null);hs([ds.Override],on.prototype,"tokenSource",null);hs([ds.Override],on.prototype,"inputStream",null);hs([ds.Override],on.prototype,"toString",null);hs([U3(0,ds.NotNull)],on,"fromToken",null);on=hs([U3(2,ds.NotNull)],on);Ou.CommonToken=on;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(r,"__esModule",{value:!0}),r.CommonTokenFactory=void 0;const t=Ou,i=un,s=Xe;class n{constructor(a=!1){this.copyText=a}create(a,l,c,d,f,g,x,E){let P=new t.CommonToken(l,c,a,d,f,g);return P.line=x,P.charPositionInLine=E,c==null&&this.copyText&&a.stream!=null&&(P.text=a.stream.getText(i.Interval.of(f,g))),P}createSimple(a,l){return new t.CommonToken(a,l)}}e([s.Override],n.prototype,"create",null),e([s.Override],n.prototype,"createSimple",null),r.CommonTokenFactory=n,function(o){o.DEFAULT=new o}(n=r.CommonTokenFactory||(r.CommonTokenFactory={}))})(w1);var ng={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(ng,"__esModule",{value:!0});ng.IntegerStack=void 0;const pz=Tf;class gz extends pz.IntegerList{constructor(e){super(e)}push(e){this.add(e)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}}ng.IntegerStack=gz;var CE={},sg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(sg,"__esModule",{value:!0});sg.AcceptStateInfo=void 0;class mz{constructor(e,t){this._prediction=e,this._lexerActionExecutor=t}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}}sg.AcceptStateInfo=mz;var OE={},xl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(xl,"__esModule",{value:!0});xl.Array2DHashMap=void 0;const iR=Fo;class xz{constructor(e){this.keyComparator=e}hashCode(e){return this.keyComparator.hashCode(e.key)}equals(e,t){return this.keyComparator.equals(e.key,t.key)}}class fy{constructor(e){e instanceof fy?this.backingStore=new iR.Array2DHashSet(e.backingStore):this.backingStore=new iR.Array2DHashSet(new xz(e))}clear(){this.backingStore.clear()}containsKey(e){return this.backingStore.contains({key:e})}get(e){let t=this.backingStore.get({key:e});if(!!t)return t.value}get isEmpty(){return this.backingStore.isEmpty}put(e,t){let i=this.backingStore.get({key:e,value:t}),s;return i?(s=i.value,i.value=t):this.backingStore.add({key:e,value:t}),s}putIfAbsent(e,t){let i=this.backingStore.get({key:e,value:t}),s;return i?s=i.value:this.backingStore.add({key:e,value:t}),s}get size(){return this.backingStore.size}hashCode(){return this.backingStore.hashCode()}equals(e){return e instanceof fy?this.backingStore.equals(e.backingStore):!1}}xl.Array2DHashMap=fy;var d_={},f_={},wh={},Da={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Da,"__esModule",{value:!0});Da.DecisionState=void 0;const yz=Pa;class vz extends yz.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}}Da.DecisionState=vz;var NE={},IE={},nR;function Pb(){return nR||(nR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(l,c,d,f){var g=arguments.length,x=g<3?c:f===null?f=Object.getOwnPropertyDescriptor(c,d):f,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,c,d,f);else for(var P=l.length-1;P>=0;P--)(E=l[P])&&(x=(g<3?E(x):g>3?E(c,d,x):E(c,d))||x);return g>3&&x&&Object.defineProperty(c,d,x),x};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionContextCache=void 0;const t=xl,i=Xe,s=Gs,n=Mo(),o=Us;class a{constructor(c=!0){this.contexts=new t.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.childContexts=new t.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.joinContexts=new t.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.enableCache=c}getAsCached(c){if(!this.enableCache)return c;let d=this.contexts.get(c);return d||(d=c,this.contexts.put(c,c)),d}getChild(c,d){if(!this.enableCache)return c.getChild(d);let f=new a.PredictionContextAndInt(c,d),g=this.childContexts.get(f);return g||(g=c.getChild(d),g=this.getAsCached(g),this.childContexts.put(f,g)),g}join(c,d){if(!this.enableCache)return n.PredictionContext.join(c,d,this);let f=new a.IdentityCommutativePredictionContextOperands(c,d),g=this.joinContexts.get(f);return g||(g=n.PredictionContext.join(c,d,this),g=this.getAsCached(g),this.joinContexts.put(f,g),g)}}r.PredictionContextCache=a,a.UNCACHED=new a(!1),function(l){class c{constructor(g,x){this.obj=g,this.value=x}equals(g){if(g instanceof c){if(g===this)return!0}else return!1;let x=g;return this.value===x.value&&(this.obj===x.obj||this.obj!=null&&this.obj.equals(x.obj))}hashCode(){let g=5;return g=7*g+(this.obj!=null?this.obj.hashCode():0),g=7*g+this.value,g}}e([i.Override],c.prototype,"equals",null),e([i.Override],c.prototype,"hashCode",null),l.PredictionContextAndInt=c;class d{constructor(g,x){o(g!=null),o(x!=null),this._x=g,this._y=x}get x(){return this._x}get y(){return this._y}equals(g){if(g instanceof d){if(this===g)return!0}else return!1;let x=g;return this._x===x._x&&this._y===x._y||this._x===x._y&&this._y===x._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}e([i.Override],d.prototype,"equals",null),e([i.Override],d.prototype,"hashCode",null),l.IdentityCommutativePredictionContextOperands=d}(a=r.PredictionContextCache||(r.PredictionContextCache={}))}(IE)),IE}var sR;function Mo(){return sR||(sR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(P,b,D,C){var O=arguments.length,N=O<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,D):C,j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(P,b,D,C);else for(var I=P.length-1;I>=0;I--)(j=P[I])&&(N=(O<3?j(N):O>3?j(b,D,N):j(b,D))||N);return O>3&&N&&Object.defineProperty(b,D,N),N},t=$&&$.__param||function(P,b){return function(D,C){b(D,C,P)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SingletonPredictionContext=r.PredictionContext=void 0;const i=xl,s=Fo,n=v1,o=ti,a=Xe,l=Pb(),c=Us,d=1;class f{constructor(b){this.cachedHashCode=b}static calculateEmptyHashCode(){let b=o.MurmurHash.initialize(d);return b=o.MurmurHash.finish(b,0),b}static calculateSingleHashCode(b,D){let C=o.MurmurHash.initialize(d);return C=o.MurmurHash.update(C,b),C=o.MurmurHash.update(C,D),C=o.MurmurHash.finish(C,2),C}static calculateHashCode(b,D){let C=o.MurmurHash.initialize(d);for(let O of b)C=o.MurmurHash.update(C,O);for(let O of D)C=o.MurmurHash.update(C,O);return C=o.MurmurHash.finish(C,2*b.length),C}static fromRuleContext(b,D,C=!0){if(D.isEmpty)return C?f.EMPTY_FULL:f.EMPTY_LOCAL;let O;D._parent?O=f.fromRuleContext(b,D._parent,C):O=C?f.EMPTY_FULL:f.EMPTY_LOCAL;let j=b.states[D.invokingState].transition(0);return O.getChild(j.followState.stateNumber)}static addEmptyContext(b){return b.addEmptyContext()}static removeEmptyContext(b){return b.removeEmptyContext()}static join(b,D,C=l.PredictionContextCache.UNCACHED){if(b===D)return b;if(b.isEmpty)return f.isEmptyLocal(b)?b:f.addEmptyContext(D);if(D.isEmpty)return f.isEmptyLocal(D)?D:f.addEmptyContext(b);let O=b.size,N=D.size;if(O===1&&N===1&&b.getReturnState(0)===D.getReturnState(0)){let ue=C.join(b.getParent(0),D.getParent(0));return ue===b.getParent(0)?b:ue===D.getParent(0)?D:ue.getChild(b.getReturnState(0))}let j=0,I=new Array(O+N),M=new Array(I.length),R=0,L=0,K=!0,Q=!0;for(;R<O&&L<N;)b.getReturnState(R)===D.getReturnState(L)?(I[j]=C.join(b.getParent(R),D.getParent(L)),M[j]=b.getReturnState(R),K=K&&I[j]===b.getParent(R),Q=Q&&I[j]===D.getParent(L),R++,L++):b.getReturnState(R)<D.getReturnState(L)?(I[j]=b.getParent(R),M[j]=b.getReturnState(R),Q=!1,R++):(c(D.getReturnState(L)<b.getReturnState(R)),I[j]=D.getParent(L),M[j]=D.getReturnState(L),K=!1,L++),j++;for(;R<O;)I[j]=b.getParent(R),M[j]=b.getReturnState(R),R++,Q=!1,j++;for(;L<N;)I[j]=D.getParent(L),M[j]=D.getReturnState(L),L++,K=!1,j++;return K?b:Q?D:(j<I.length&&(I=I.slice(0,j),M=M.slice(0,j)),I.length===0?f.EMPTY_FULL:I.length===1?new E(I[0],M[0]):new x(I,M))}static isEmptyLocal(b){return b===f.EMPTY_LOCAL}static getCachedContext(b,D,C){if(b.isEmpty)return b;let O=C.get(b);if(O)return O;if(O=D.get(b),O)return C.put(b,O),O;let N=!1,j=new Array(b.size);for(let M=0;M<j.length;M++){let R=f.getCachedContext(b.getParent(M),D,C);if(N||R!==b.getParent(M)){if(!N){j=new Array(b.size);for(let L=0;L<b.size;L++)j[L]=b.getParent(L);N=!0}j[M]=R}}if(!N)return O=D.putIfAbsent(b,b),C.put(b,O!=null?O:b),b;let I;if(j.length===1)I=new E(j[0],b.getReturnState(0));else{let M=new Array(b.size);for(let R=0;R<b.size;R++)M[R]=b.getReturnState(R);I=new x(j,M,b.hashCode())}return O=D.putIfAbsent(I,I),C.put(I,O||I),C.put(b,O||I),I}appendSingleContext(b,D){return this.appendContext(f.EMPTY_FULL.getChild(b),D)}getChild(b){return new E(this,b)}hashCode(){return this.cachedHashCode}toStrings(b,D,C=f.EMPTY_FULL){let O=[];e:for(let N=0;;N++){let j=0,I=!0,M=this,R=D,L="";for(L+="[";!M.isEmpty&&M!==C;){let K=0;if(M.size>0){let Q=1;for(;1<<Q>>>0<M.size;)Q++;let ue=(1<<Q>>>0)-1;if(K=N>>j&ue,I=I&&K>=M.size-1,K>=M.size)continue e;j+=Q}if(b){L.length>1&&(L+=" ");let ue=b.atn.states[R],ae=b.ruleNames[ue.ruleIndex];L+=ae}else M.getReturnState(K)!==f.EMPTY_FULL_STATE_KEY&&(M.isEmpty||(L.length>1&&(L+=" "),L+=M.getReturnState(K)));R=M.getReturnState(K),M=M.getParent(K)}if(L+="]",O.push(L),I)break}return O}}e([a.Override],f.prototype,"hashCode",null),e([t(0,a.NotNull),t(1,a.NotNull),t(2,a.NotNull)],f,"join",null),e([t(0,a.NotNull),t(1,a.NotNull),t(2,a.NotNull)],f,"getCachedContext",null),r.PredictionContext=f;class g extends f{constructor(b){super(f.calculateEmptyHashCode()),this.fullContext=b}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(b){throw new Error("index out of bounds")}getReturnState(b){throw new Error("index out of bounds")}findReturnState(b){return-1}get size(){return 0}appendSingleContext(b,D){return D.getChild(this,b)}appendContext(b,D){return b}get isEmpty(){return!0}get hasEmpty(){return!0}equals(b){return this===b}toStrings(b,D,C){return["[]"]}}e([a.Override],g.prototype,"addEmptyContext",null),e([a.Override],g.prototype,"removeEmptyContext",null),e([a.Override],g.prototype,"getParent",null),e([a.Override],g.prototype,"getReturnState",null),e([a.Override],g.prototype,"findReturnState",null),e([a.Override],g.prototype,"size",null),e([a.Override],g.prototype,"appendSingleContext",null),e([a.Override],g.prototype,"appendContext",null),e([a.Override],g.prototype,"isEmpty",null),e([a.Override],g.prototype,"hasEmpty",null),e([a.Override],g.prototype,"equals",null),e([a.Override],g.prototype,"toStrings",null);let x=class nc extends f{constructor(b,D,C){super(C||f.calculateHashCode(b,D)),c(b.length===D.length),c(D.length>1||D[0]!==f.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=b,this.returnStates=D}getParent(b){return this.parents[b]}getReturnState(b){return this.returnStates[b]}findReturnState(b){return n.Arrays.binarySearch(this.returnStates,b)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===f.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let b=this.parents.slice(0),D=this.returnStates.slice(0);return b.push(f.EMPTY_FULL),D.push(f.EMPTY_FULL_STATE_KEY),new nc(b,D)}removeEmptyContext(){if(!this.hasEmpty)return this;if(this.returnStates.length===2)return new E(this.parents[0],this.returnStates[0]);{let b=this.parents.slice(0,this.parents.length-1),D=this.returnStates.slice(0,this.returnStates.length-1);return new nc(b,D)}}appendContext(b,D){return nc.appendContextImpl(this,b,new f.IdentityHashMap)}static appendContextImpl(b,D,C){if(D.isEmpty){if(f.isEmptyLocal(D)){if(b.hasEmpty)return f.EMPTY_LOCAL;throw new Error("what to do here?")}return b}if(D.size!==1)throw new Error("Appending a tree suffix is not yet supported.");let O=C.get(b);if(!O){if(b.isEmpty)O=D;else{let N=b.size;b.hasEmpty&&N--;let j=new Array(N),I=new Array(N);for(let M=0;M<N;M++)I[M]=b.getReturnState(M);for(let M=0;M<N;M++)j[M]=nc.appendContextImpl(b.getParent(M),D,C);j.length===1?O=new E(j[0],I[0]):(c(j.length>1),O=new nc(j,I)),b.hasEmpty&&(O=f.join(O,D))}C.put(b,O)}return O}equals(b){if(this===b)return!0;if(!(b instanceof nc)||this.hashCode()!==b.hashCode())return!1;let D=b;return this.equalsImpl(D,new s.Array2DHashSet)}equalsImpl(b,D){let C=[],O=[];for(C.push(this),O.push(b);;){let N=C.pop(),j=O.pop();if(!N||!j)break;let I=new l.PredictionContextCache.IdentityCommutativePredictionContextOperands(N,j);if(!D.add(I))continue;let M=I.x.size;if(M===0){if(!I.x.equals(I.y))return!1;continue}let R=I.y.size;if(M!==R)return!1;for(let L=0;L<M;L++){if(I.x.getReturnState(L)!==I.y.getReturnState(L))return!1;let K=I.x.getParent(L),Q=I.y.getParent(L);if(K.hashCode()!==Q.hashCode())return!1;K!==Q&&(C.push(K),O.push(Q))}}return!0}};e([a.NotNull],x.prototype,"parents",void 0),e([a.NotNull],x.prototype,"returnStates",void 0),e([a.Override],x.prototype,"getParent",null),e([a.Override],x.prototype,"getReturnState",null),e([a.Override],x.prototype,"findReturnState",null),e([a.Override],x.prototype,"size",null),e([a.Override],x.prototype,"isEmpty",null),e([a.Override],x.prototype,"hasEmpty",null),e([a.Override],x.prototype,"addEmptyContext",null),e([a.Override],x.prototype,"removeEmptyContext",null),e([a.Override],x.prototype,"appendContext",null),e([a.Override],x.prototype,"equals",null),x=e([t(0,a.NotNull)],x);let E=class G3 extends f{constructor(b,D){super(f.calculateSingleHashCode(b,D)),this.parent=b,this.returnState=D}getParent(b){return this.parent}getReturnState(b){return this.returnState}findReturnState(b){return this.returnState===b?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(b,D){return D.getChild(this.parent.appendContext(b,D),this.returnState)}addEmptyContext(){let b=[this.parent,f.EMPTY_FULL],D=[this.returnState,f.EMPTY_FULL_STATE_KEY];return new x(b,D)}removeEmptyContext(){return this}equals(b){if(b===this)return!0;if(!(b instanceof G3))return!1;let D=b;return this.hashCode()!==D.hashCode()?!1:this.returnState===D.returnState&&this.parent.equals(D.parent)}};e([a.NotNull],E.prototype,"parent",void 0),e([a.Override],E.prototype,"getParent",null),e([a.Override],E.prototype,"getReturnState",null),e([a.Override],E.prototype,"findReturnState",null),e([a.Override],E.prototype,"size",null),e([a.Override],E.prototype,"isEmpty",null),e([a.Override],E.prototype,"hasEmpty",null),e([a.Override],E.prototype,"appendContext",null),e([a.Override],E.prototype,"addEmptyContext",null),e([a.Override],E.prototype,"removeEmptyContext",null),e([a.Override],E.prototype,"equals",null),E=e([t(0,a.NotNull)],E),r.SingletonPredictionContext=E,function(P){P.EMPTY_LOCAL=new g(!1),P.EMPTY_FULL=new g(!0),P.EMPTY_LOCAL_STATE_KEY=-(1<<31>>>0),P.EMPTY_FULL_STATE_KEY=(1<<31>>>0)-1;class b extends i.Array2DHashMap{constructor(){super(D.INSTANCE)}}P.IdentityHashMap=b;class D{IdentityEqualityComparator(){}hashCode(O){return O.hashCode()}equals(O,N){return O===N}}D.INSTANCE=new D,e([a.Override],D.prototype,"hashCode",null),e([a.Override],D.prototype,"equals",null),P.IdentityEqualityComparator=D}(f=r.PredictionContext||(r.PredictionContext={}))}(NE)),NE}/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var mi=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Ms=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(wh,"__esModule",{value:!0});wh.ATNConfig=void 0;const Ez=xl,Sz=Da,Ka=ti,Dr=Xe,wz=Gs,oR=Mo(),sc=vh,aR=Us,FE=2147483648;let Xn=class fp{constructor(e,t,i){typeof t=="number"?(aR((t&16777215)===t),this._state=e,this.altAndOuterContextDepth=t,this._context=i):(this._state=e,this.altAndOuterContextDepth=t.altAndOuterContextDepth,this._context=i)}static create(e,t,i,s=sc.SemanticContext.NONE,n){return s!==sc.SemanticContext.NONE?n!=null?new Yd(n,s,e,t,i,!1):new Jc(s,e,t,i):n!=null?new Xd(n,e,t,i,!1):new fp(e,t,i)}get state(){return this._state}get alt(){return this.altAndOuterContextDepth&16777215}get context(){return this._context}set context(e){this._context=e}get reachesIntoOuterContext(){return this.outerContextDepth!==0}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(e){aR(e>=0),e=Math.min(e,127),this.altAndOuterContextDepth=e<<24|(this.altAndOuterContextDepth&-2130706433)>>>0}get lexerActionExecutor(){}get semanticContext(){return sc.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(e,t,i){return i==null?this.transformImpl(e,this._context,this.semanticContext,t,this.lexerActionExecutor):i instanceof oR.PredictionContext?this.transformImpl(e,i,this.semanticContext,t,this.lexerActionExecutor):i instanceof sc.SemanticContext?this.transformImpl(e,this._context,i,t,this.lexerActionExecutor):this.transformImpl(e,this._context,this.semanticContext,t,i)}transformImpl(e,t,i,s,n){let o=s&&fp.checkNonGreedyDecision(this,e);return i!==sc.SemanticContext.NONE?n!=null||o?new Yd(n,i,e,this,t,o):new Jc(i,e,this,t):n!=null||o?new Xd(n,e,this,t,o):new fp(e,this,t)}static checkNonGreedyDecision(e,t){return e.hasPassedThroughNonGreedyDecision||t instanceof Sz.DecisionState&&t.nonGreedy}appendContext(e,t){if(typeof e=="number"){let i=this.context.appendSingleContext(e,t);return this.transform(this.state,!1,i)}else{let i=this.context.appendContext(e,t);return this.transform(this.state,!1,i)}}contains(e){if(this.state.stateNumber!==e.state.stateNumber||this.alt!==e.alt||!this.semanticContext.equals(e.semanticContext))return!1;let t=[],i=[];for(t.push(this.context),i.push(e.context);;){let s=t.pop(),n=i.pop();if(!s||!n)break;if(s===n)return!0;if(s.size<n.size)return!1;if(n.isEmpty)return s.hasEmpty;for(let o=0;o<n.size;o++){let a=s.findReturnState(n.getReturnState(o));if(a<0)return!1;t.push(s.getParent(a)),i.push(n.getParent(o))}}return!1}get isPrecedenceFilterSuppressed(){return(this.altAndOuterContextDepth&FE)!==0}set isPrecedenceFilterSuppressed(e){e?this.altAndOuterContextDepth|=FE:this.altAndOuterContextDepth&=~FE}equals(e){return this===e?!0:e instanceof fp?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.reachesIntoOuterContext===e.reachesIntoOuterContext&&this.context.equals(e.context)&&this.semanticContext.equals(e.semanticContext)&&this.isPrecedenceFilterSuppressed===e.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision===e.hasPassedThroughNonGreedyDecision&&wz.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,e.lexerActionExecutor):!1}hashCode(){let e=Ka.MurmurHash.initialize(7);return e=Ka.MurmurHash.update(e,this.state.stateNumber),e=Ka.MurmurHash.update(e,this.alt),e=Ka.MurmurHash.update(e,this.reachesIntoOuterContext?1:0),e=Ka.MurmurHash.update(e,this.context),e=Ka.MurmurHash.update(e,this.semanticContext),e=Ka.MurmurHash.update(e,this.hasPassedThroughNonGreedyDecision?1:0),e=Ka.MurmurHash.update(e,this.lexerActionExecutor),e=Ka.MurmurHash.finish(e,7),e}toDotString(){let e="";e+=`digraph G {
`,e+=`rankdir=LR;
`;let t=new Ez.Array2DHashMap(oR.PredictionContext.IdentityEqualityComparator.INSTANCE),i=[];function s(n){let o=t.size,a=t.putIfAbsent(n,o);return a!=null?a:(i.push(n),o)}for(i.push(this.context),t.put(this.context,0);;){let n=i.pop();if(!n)break;for(let o=0;o<n.size;o++)e+="  s"+s(n),e+="->",e+="s"+s(n.getParent(o)),e+='[label="'+n.getReturnState(o)+`"];
`}return e+=`}
`,e.toString()}toString(e,t,i){i==null&&(i=t!=null),t==null&&(t=!0);let s="",n;i?n=this.context.toStrings(e,this.state.stateNumber):n=["?"];let o=!0;for(let a of n)o?o=!1:s+=", ",s+="(",s+=this.state,t&&(s+=",",s+=this.alt),this.context&&(s+=",",s+=a),this.semanticContext!==sc.SemanticContext.NONE&&(s+=",",s+=this.semanticContext),this.reachesIntoOuterContext&&(s+=",up="+this.outerContextDepth),s+=")";return s.toString()}};mi([Dr.NotNull],Xn.prototype,"_state",void 0);mi([Dr.NotNull],Xn.prototype,"_context",void 0);mi([Dr.NotNull],Xn.prototype,"state",null);mi([Dr.NotNull,Ms(0,Dr.NotNull)],Xn.prototype,"context",null);mi([Dr.NotNull],Xn.prototype,"semanticContext",null);mi([Dr.Override],Xn.prototype,"clone",null);mi([Ms(0,Dr.NotNull),Ms(2,Dr.NotNull)],Xn.prototype,"transformImpl",null);mi([Dr.Override],Xn.prototype,"equals",null);mi([Dr.Override],Xn.prototype,"hashCode",null);mi([Ms(0,Dr.NotNull),Ms(3,Dr.NotNull)],Xn,"create",null);Xn=mi([Ms(0,Dr.NotNull),Ms(2,Dr.NotNull)],Xn);wh.ATNConfig=Xn;let Jc=class extends Xn{constructor(e,t,i,s){typeof i=="number"?super(t,i,s):super(t,i,s),this._semanticContext=e}get semanticContext(){return this._semanticContext}};mi([Dr.NotNull],Jc.prototype,"_semanticContext",void 0);mi([Dr.Override],Jc.prototype,"semanticContext",null);Jc=mi([Ms(1,Dr.NotNull),Ms(2,Dr.NotNull)],Jc);let Xd=class extends Xn{constructor(e,t,i,s,n){if(typeof i=="number")super(t,i,s);else if(super(t,i,s),i.semanticContext!==sc.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=n}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};mi([Dr.Override],Xd.prototype,"lexerActionExecutor",null);mi([Dr.Override],Xd.prototype,"hasPassedThroughNonGreedyDecision",null);Xd=mi([Ms(1,Dr.NotNull),Ms(2,Dr.NotNull)],Xd);let Yd=class extends Jc{constructor(e,t,i,s,n,o){typeof s=="number"?super(t,i,s,n):super(t,i,s,n),this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=o}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};mi([Dr.Override],Yd.prototype,"lexerActionExecutor",null);mi([Dr.Override],Yd.prototype,"hasPassedThroughNonGreedyDecision",null);Yd=mi([Ms(1,Dr.NotNull),Ms(2,Dr.NotNull)],Yd);var Bo={};const Az=sb(R9);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Bo,"__esModule",{value:!0});Bo.BitSet=void 0;const bz=Az,kz=ti,__=new Uint16Array(0);function vs(r){return r>>>4}function ed(r){return r*16}function pw(r){let e=1;for(let t=0;t<16;t++){if((r&e)!==0)return t;e=e<<1>>>0}throw new RangeError("No specified bit found")}function lR(r){let e=32768;for(let t=15;t>=0;t--){if((r&e)!==0)return t;e=e>>>1}throw new RangeError("No specified bit found")}function $s(r,e){return r&=15,e&=15,r===e?1<<r>>>0:65535>>>15-e^65535>>>16-r}const gw=new Uint8Array(65536);for(let r=0;r<16;r++){const e=1<<r>>>0;let t=0;for(;t<gw.length;){t+=e;for(let i=0;i<e;i++)gw[t]++,t++}}class od{constructor(e){if(!e)this.data=__;else if(typeof e=="number"){if(e<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(vs(e-1)+1)}else if(e instanceof od)this.data=e.data.slice(0);else{let t=-1;for(let i of e)t<i&&(t=i);this.data=new Uint16Array(vs(t-1)+1);for(let i of e)this.set(i)}}and(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length);let n=-1;for(let o=0;o<s;o++)(t[o]&=i[o])!==0&&(n=o);n===-1&&(this.data=__),n<t.length-1&&(this.data=t.slice(0,n+1))}andNot(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length);let n=-1;for(let o=0;o<s;o++)(t[o]&=i[o]^65535)!==0&&(n=o);n===-1&&(this.data=__),n<t.length-1&&(this.data=t.slice(0,n+1))}cardinality(){if(this.isEmpty)return 0;const e=this.data,t=e.length;let i=0;for(let s=0;s<t;s++)i+=gw[e[s]];return i}clear(e,t){e==null?this.data.fill(0):t==null?this.set(e,!1):this.set(e,t,!1)}flip(e,t){if(t==null&&(t=e),e<0||t<e)throw new RangeError;let i=vs(e);const s=vs(t);if(i===s)this.data[i]^=$s(e,t);else{for(this.data[i++]^=$s(e,15);i<s;)this.data[i++]^=65535;this.data[i++]^=$s(0,t)}}get(e,t){if(t===void 0)return!!(this.data[vs(e)]&$s(e,e));{let i=new od(t+1);for(let s=e;s<=t;s++)i.set(s,this.get(s));return i}}intersects(e){let t=Math.min(this.length(),e.length());if(t===0)return!1;let i=vs(t-1);for(let s=0;s<=i;s++)if((this.data[s]&e.data[s])!==0)return!0;return!1}get isEmpty(){return this.length()===0}length(){return this.data.length?this.previousSetBit(ed(this.data.length)-1)+1:0}nextClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=vs(e);if(s>i)return-1;let n=65535^$s(e,15);if((t[s]|n)===65535){for(s++,n=0;s<i&&t[s]===65535;s++);if(s===i)return-1}return ed(s)+pw((t[s]|n)^65535)}nextSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=vs(e);if(s>i)return-1;let n=$s(e,15);if((t[s]&n)===0){for(s++,n=65535;s<i&&t[s]===0;s++);if(s>=i)return-1}return ed(s)+pw(t[s]&n)}or(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length),n=Math.max(t.length,i.length),o=t.length===n?t:new Uint16Array(n);let a=-1;for(let c=0;c<s;c++)(o[c]=t[c]|i[c])!==0&&(a=c);const l=t.length>i.length?t:i;for(let c=s;c<n;c++)(o[c]=l[c])!==0&&(a=c);a===-1?this.data=__:o.length===a+1?this.data=o:this.data=o.slice(0,a)}previousClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=vs(e);s>=i&&(s=i-1);let n=65535^$s(0,e);if((t[s]|n)===65535){for(n=0,s--;s>=0&&t[s]===65535;s--);if(s<0)return-1}return ed(s)+lR((t[s]|n)^65535)}previousSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,i=t.length;let s=vs(e);s>=i&&(s=i-1);let n=$s(0,e);if((t[s]&n)===0){for(s--,n=65535;s>=0&&t[s]===0;s--);if(s<0)return-1}return ed(s)+lR(t[s]&n)}set(e,t,i){if(t===void 0?(t=e,i=!0):typeof t=="boolean"&&(i=t,t=e),i===void 0&&(i=!0),e<0||e>t)throw new RangeError;let s=vs(e),n=vs(t);if(i&&n>=this.data.length){let o=new Uint16Array(n+1);this.data.forEach((a,l)=>o[l]=a),this.data=o}else if(!i){if(s>=this.data.length)return;n>=this.data.length&&(n=this.data.length-1,t=this.data.length*16-1)}if(s===n)this._setBits(s,i,$s(e,t));else{for(this._setBits(s++,i,$s(e,15));s<n;)this.data[s++]=i?65535:0;this._setBits(s,i,$s(0,t))}}_setBits(e,t,i){t?this.data[e]|=i:this.data[e]&=65535^i}get size(){return this.data.byteLength*8}hashCode(){return kz.MurmurHash.hashCode(this.data,22)}equals(e){if(e===this)return!0;if(!(e instanceof od))return!1;const t=this.length();if(t!==e.length())return!1;if(t===0)return!0;let i=vs(t-1);for(let s=0;s<=i;s++)if(this.data[s]!==e.data[s])return!1;return!0}toString(){let e="{",t=!0;for(let i=this.nextSetBit(0);i>=0;i=this.nextSetBit(i+1))t?t=!1:e+=", ",e+=i;return e+="}",e}xor(e){const t=this.data,i=e.data,s=Math.min(t.length,i.length),n=Math.max(t.length,i.length),o=t.length===n?t:new Uint16Array(n);let a=-1;for(let c=0;c<s;c++)(o[c]=t[c]^i[c])!==0&&(a=c);const l=t.length>i.length?t:i;for(let c=s;c<n;c++)(o[c]=l[c])!==0&&(a=c);a===-1?this.data=__:o.length===a+1?this.data=o:this.data=o.slice(0,a+1)}clone(){return new od(this)}[Symbol.iterator](){return new Tz(this.data)}[bz.inspect.custom](){return"BitSet "+this.toString()}}Bo.BitSet=od;class Tz{constructor(e){this.data=e,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){const e=this.data[this.index]&this.mask;if(e!==0){const t=ed(this.index)+pw(e);return this.mask=$s(t+1,15),{done:!1,value:t}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}var uR;function og(){if(uR)return f_;uR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(D,C,O,N){var j=arguments.length,I=j<3?C:N===null?N=Object.getOwnPropertyDescriptor(C,O):N,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(D,C,O,N);else for(var R=D.length-1;R>=0;R--)(M=D[R])&&(I=(j<3?M(I):j>3?M(C,O,I):M(C,O))||I);return j>3&&I&&Object.defineProperty(C,O,I),I};Object.defineProperty(f_,"__esModule",{value:!0}),f_.ATNConfigSet=void 0;const e=xl,t=Fo,i=Eh,s=Oa(),n=wh,o=Bo,a=Xe,l=Gs,c=Mo(),d=Pb(),f=vh,g=Us,x=Ei;class E{hashCode(C){return C.state^C.alt}equals(C,O){return C.state===O.state&&C.alt===O.alt}}E.INSTANCE=new E;function P(D){return D?new e.Array2DHashMap(D):new e.Array2DHashMap(E.INSTANCE)}class b{constructor(C,O){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,C?(O?(this.mergedConfigs=void 0,this.unmerged=void 0):C.isReadOnly?(this.mergedConfigs=P(),this.unmerged=[]):(this.mergedConfigs=P(C.mergedConfigs),this.unmerged=C.unmerged.slice(0)),this.configs=C.configs.slice(0),this._dipsIntoOuterContext=C._dipsIntoOuterContext,this._hasSemanticContext=C._hasSemanticContext,this.outermostConfigSet=C.outermostConfigSet,(O||!C.isReadOnly)&&(this._uniqueAlt=C._uniqueAlt,this._conflictInfo=C._conflictInfo)):(this.mergedConfigs=P(),this.unmerged=[],this.configs=[],this._uniqueAlt=s.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts.clone();let C=new o.BitSet;for(let O of this)C.set(O.alt);return C}get isReadOnly(){return this.mergedConfigs==null}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(C){if(this.outermostConfigSet&&!C)throw new Error("IllegalStateException");g(!C||!this._dipsIntoOuterContext),this.outermostConfigSet=C}getStates(){let C=new t.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE);for(let O of this.configs)C.add(O.state);return C}optimizeConfigs(C){if(this.configs.length!==0)for(let O of this.configs)O.context=C.atn.getCachedContext(O.context)}clone(C){let O=new b(this,C);return!C&&this.isReadOnly&&O.addAll(this.configs),O}get size(){return this.configs.length}get isEmpty(){return this.configs.length===0}contains(C){if(!(C instanceof n.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let O=C,N=this.getKey(O),j=this.mergedConfigs.get(N);if(j!=null&&this.canMerge(O,N,j))return j.contains(O);for(let I of this.unmerged)if(I.contains(C))return!0}else for(let O of this.configs)if(O.contains(C))return!0;return!1}*[Symbol.iterator](){yield*this.configs}toArray(){return this.configs}add(C,O){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");g(!this.outermostConfigSet||!C.reachesIntoOuterContext),O==null&&(O=d.PredictionContextCache.UNCACHED);let N,j=this.getKey(C),I=this.mergedConfigs.get(j);if(N=I==null,I!=null&&this.canMerge(C,j,I)){I.outerContextDepth=Math.max(I.outerContextDepth,C.outerContextDepth),C.isPrecedenceFilterSuppressed&&(I.isPrecedenceFilterSuppressed=!0);let M=c.PredictionContext.join(I.context,C.context,O);return this.updatePropertiesForMergedConfig(C),I.context===M?!1:(I.context=M,!0)}for(let M=0;M<this.unmerged.length;M++){let R=this.unmerged[M];if(this.canMerge(C,j,R)){R.outerContextDepth=Math.max(R.outerContextDepth,C.outerContextDepth),C.isPrecedenceFilterSuppressed&&(R.isPrecedenceFilterSuppressed=!0);let L=c.PredictionContext.join(R.context,C.context,O);return this.updatePropertiesForMergedConfig(C),R.context===L?!1:(R.context=L,N&&(this.mergedConfigs.put(j,R),this.unmerged.splice(M,1)),!0)}}return this.configs.push(C),N?this.mergedConfigs.put(j,C):this.unmerged.push(C),this.updatePropertiesForAddedConfig(C),!0}updatePropertiesForMergedConfig(C){this._dipsIntoOuterContext=this._dipsIntoOuterContext||C.reachesIntoOuterContext,g(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(C){this.configs.length===1?this._uniqueAlt=C.alt:this._uniqueAlt!==C.alt&&(this._uniqueAlt=s.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!f.SemanticContext.NONE.equals(C.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||C.reachesIntoOuterContext,g(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(C,O,N){return C.state.stateNumber!==N.state.stateNumber||O.alt!==N.alt?!1:C.semanticContext.equals(N.semanticContext)}getKey(C){return{state:C.state.stateNumber,alt:C.alt}}containsAll(C){for(let O of C)if(!(O instanceof n.ATNConfig)||!this.contains(O))return!1;return!0}addAll(C,O){this.ensureWritable();let N=!1;for(let j of C)this.add(j,O)&&(N=!0);return N}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=s.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(C){return this===C?!0:C instanceof b?this.outermostConfigSet===C.outermostConfigSet&&x.equals(this._conflictInfo,C._conflictInfo)&&i.ArrayEqualityComparator.INSTANCE.equals(this.configs,C.configs):!1}hashCode(){if(this.isReadOnly&&this.cachedHashCode!==-1)return this.cachedHashCode;let C=1;return C=5*C^(this.outermostConfigSet?1:0),C=5*C^i.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=C),C}toString(C){C==null&&(C=!1);let O="",N=this.configs.slice(0);N.sort((j,I)=>j.alt!==I.alt?j.alt-I.alt:j.state.stateNumber!==I.state.stateNumber?j.state.stateNumber-I.state.stateNumber:j.semanticContext.toString().localeCompare(I.semanticContext.toString())),O+="[";for(let j=0;j<N.length;j++)j>0&&(O+=", "),O+=N[j].toString(void 0,!0,C);return O+="]",this._hasSemanticContext&&(O+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==s.ATN.INVALID_ALT_NUMBER&&(O+=",uniqueAlt="+this._uniqueAlt),this._conflictInfo!=null&&(O+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(O+="*")),this._dipsIntoOuterContext&&(O+=",dipsIntoOuterContext"),O.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(C){this.ensureWritable(),this._hasSemanticContext=C}get conflictInfo(){return this._conflictInfo}set conflictInfo(C){this.ensureWritable(),this._conflictInfo=C}get conflictingAlts(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts}get isExactConflict(){return this._conflictInfo==null?!1:this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(C){return this.configs[C]}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}}return r([a.NotNull],b.prototype,"getRepresentedAlternatives",null),r([a.Override],b.prototype,"size",null),r([a.Override],b.prototype,"isEmpty",null),r([a.Override],b.prototype,"contains",null),r([a.Override],b.prototype,Symbol.iterator,null),r([a.Override],b.prototype,"toArray",null),r([a.Override],b.prototype,"containsAll",null),r([a.Override],b.prototype,"clear",null),r([a.Override],b.prototype,"equals",null),r([a.Override],b.prototype,"hashCode",null),f_.ATNConfigSet=b,f_}var p_={},ME={},BE={},cR;function A1(){return cR||(cR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(d,f,g,x){var E=arguments.length,P=E<3?f:x===null?x=Object.getOwnPropertyDescriptor(f,g):x,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(d,f,g,x);else for(var D=d.length-1;D>=0;D--)(b=d[D])&&(P=(E<3?b(P):E>3?b(f,g,P):b(f,g))||P);return E>3&&P&&Object.defineProperty(f,g,P),P},t=$&&$.__param||function(d,f){return function(g,x){f(g,x,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DFAState=void 0;const i=Oa(),s=Bo,n=ti,o=Xe,a=Mo(),l=Us;class c{constructor(f){this.stateNumber=-1,this.configs=f,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(f){return this.isContextSensitive?this.contextSymbols.get(f):!1}setContextSymbol(f){l(this.isContextSensitive),this.contextSymbols.set(f)}setContextSensitive(f){l(!this.configs.isOutermostConfigSet),!this.isContextSensitive&&(this.contextSymbols||(this.contextSymbols=new s.BitSet))}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(f){this._acceptStateInfo=f}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:i.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(!!this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(f){return this.edges.get(f)}setTarget(f,g){this.edges.set(f,g)}getEdgeMap(){return this.edges}getContextTarget(f){return f===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(f=-1),this.contextEdges.get(f)}setContextTarget(f,g){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");f===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(f=-1),this.contextEdges.set(f,g)}getContextEdgeMap(){let f=new Map(this.contextEdges),g=f.get(-1);if(g!==void 0)if(f.size===1){let x=new Map;return x.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,g),x}else f.delete(-1),f.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,g);return f}hashCode(){let f=n.MurmurHash.initialize(7);return f=n.MurmurHash.update(f,this.configs.hashCode()),f=n.MurmurHash.finish(f,1),f}equals(f){if(this===f)return!0;if(!(f instanceof c))return!1;let g=f;return this.configs.equals(g.configs)}toString(){let f="";return f+=this.stateNumber+":"+this.configs,this.isAcceptState&&(f+="=>",this.predicates?f+=this.predicates:f+=this.prediction),f.toString()}}e([o.NotNull],c.prototype,"configs",void 0),e([o.NotNull],c.prototype,"edges",void 0),e([o.NotNull],c.prototype,"contextEdges",void 0),e([o.Override],c.prototype,"hashCode",null),e([o.Override],c.prototype,"equals",null),e([o.Override],c.prototype,"toString",null),r.DFAState=c,function(d){let f=class{constructor(x,E){this.alt=E,this.pred=x}toString(){return"("+this.pred+", "+this.alt+")"}};e([o.NotNull],f.prototype,"pred",void 0),e([o.Override],f.prototype,"toString",null),f=e([t(0,o.NotNull)],f),d.PredPrediction=f}(c=r.DFAState||(r.DFAState={}))}(BE)),BE}var hR;function b1(){return hR||(hR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(l,c,d,f){var g=arguments.length,x=g<3?c:f===null?f=Object.getOwnPropertyDescriptor(c,d):f,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,c,d,f);else for(var P=l.length-1;P>=0;P--)(E=l[P])&&(x=(g<3?E(x):g>3?E(c,d,x):E(c,d))||x);return g>3&&x&&Object.defineProperty(c,d,x),x},t=$&&$.__param||function(l,c){return function(d,f){c(d,f,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNSimulator=void 0;const i=og(),s=A1(),n=Xe,o=Mo();let a=class _p{constructor(c){this.atn=c}static get ERROR(){return _p._ERROR||(_p._ERROR=new s.DFAState(new i.ATNConfigSet),_p._ERROR.stateNumber=o.PredictionContext.EMPTY_FULL_STATE_KEY),_p._ERROR}clearDFA(){this.atn.clearDFA()}};e([n.NotNull],a.prototype,"atn",void 0),e([n.NotNull],a,"ERROR",null),a=e([t(0,n.NotNull)],a),r.ATNSimulator=a,function(l){}(a=r.ATNSimulator||(r.ATNSimulator={})),r.ATNSimulator=a}(ME)),ME}var Nu={},ag={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(ag,"__esModule",{value:!0});ag.ConsoleErrorListener=void 0;class mw{syntaxError(e,t,i,s,n,o){console.error(`line ${i}:${s} ${n}`)}}ag.ConsoleErrorListener=mw;mw.INSTANCE=new mw;var Pf={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Pz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},dR=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.ProxyErrorListener=void 0;const LE=Xe;class z3{constructor(e){if(this.delegates=e,!e)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(e,t,i,s,n,o){this.delegates.forEach(a=>{a.syntaxError&&a.syntaxError(e,t,i,s,n,o)})}}Pz([LE.Override,dR(0,LE.NotNull),dR(4,LE.NotNull)],z3.prototype,"syntaxError",null);Pf.ProxyErrorListener=z3;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ca=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},k1=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.Recognizer=void 0;const Rz=ag,Dz=Pf,Bs=Xe,fR=dr,Cz=Ei;class Ai{constructor(){this._listeners=[Rz.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let e=this.vocabulary,t=Ai.tokenTypeMapCache.get(e);if(t==null){let i=new Map;for(let s=0;s<=this.atn.maxTokenType;s++){let n=e.getLiteralName(s);n!=null&&i.set(n,s);let o=e.getSymbolicName(s);o!=null&&i.set(o,s)}i.set("EOF",fR.Token.EOF),t=i,Ai.tokenTypeMapCache.set(e,t)}return t}getRuleIndexMap(){let e=this.ruleNames;if(e==null)throw new Error("The current recognizer does not provide a list of rule names.");let t=Ai.ruleIndexMapCache.get(e);return t==null&&(t=Cz.toMap(e),Ai.ruleIndexMapCache.set(e,t)),t}getTokenType(e){let t=this.getTokenTypeMap().get(e);return t!=null?t:fR.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}set interpreter(e){this._interp=e}get parseInfo(){return Promise.resolve(void 0)}getErrorHeader(e){let t=e.getOffendingToken();if(!t)return"";let i=t.line,s=t.charPositionInLine;return"line "+i+":"+s}addErrorListener(e){if(!e)throw new TypeError("listener must not be null");this._listeners.push(e)}removeErrorListener(e){let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new Dz.ProxyErrorListener(this.getErrorListeners())}sempred(e,t,i){return!0}precpred(e,t){return!0}action(e,t,i){}get state(){return this._stateNumber}set state(e){this._stateNumber=e}}Ai.EOF=-1;Ai.tokenTypeMapCache=new WeakMap;Ai.ruleIndexMapCache=new WeakMap;Ca([Bs.SuppressWarnings("serial"),Bs.NotNull],Ai.prototype,"_listeners",void 0);Ca([Bs.NotNull],Ai.prototype,"getTokenTypeMap",null);Ca([Bs.NotNull],Ai.prototype,"getRuleIndexMap",null);Ca([Bs.NotNull],Ai.prototype,"serializedATN",null);Ca([Bs.NotNull],Ai.prototype,"atn",null);Ca([Bs.NotNull,k1(0,Bs.NotNull)],Ai.prototype,"interpreter",null);Ca([Bs.NotNull,k1(0,Bs.NotNull)],Ai.prototype,"getErrorHeader",null);Ca([k1(0,Bs.NotNull)],Ai.prototype,"addErrorListener",null);Ca([k1(0,Bs.NotNull)],Ai.prototype,"removeErrorListener",null);Ca([Bs.NotNull],Ai.prototype,"getErrorListeners",null);Nu.Recognizer=Ai;var yl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Iu=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(yl,"__esModule",{value:!0});var Rb=yl.VocabularyImpl=void 0;const cl=Xe,Oz=dr;class Oo{constructor(e,t,i){this.literalNames=e,this.symbolicNames=t,this.displayNames=i,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(e){if(e>=0&&e<this.literalNames.length)return this.literalNames[e]}getSymbolicName(e){if(e>=0&&e<this.symbolicNames.length)return this.symbolicNames[e];if(e===Oz.Token.EOF)return"EOF"}getDisplayName(e){if(e>=0&&e<this.displayNames.length){let s=this.displayNames[e];if(s)return s}let t=this.getLiteralName(e);if(t)return t;let i=this.getSymbolicName(e);return i||String(e)}}Oo.EMPTY_VOCABULARY=new Oo([],[],[]);Iu([cl.NotNull],Oo.prototype,"literalNames",void 0);Iu([cl.NotNull],Oo.prototype,"symbolicNames",void 0);Iu([cl.NotNull],Oo.prototype,"displayNames",void 0);Iu([cl.Override],Oo.prototype,"maxTokenType",null);Iu([cl.Override],Oo.prototype,"getLiteralName",null);Iu([cl.Override],Oo.prototype,"getSymbolicName",null);Iu([cl.Override,cl.NotNull],Oo.prototype,"getDisplayName",null);Iu([cl.NotNull],Oo,"EMPTY_VOCABULARY",void 0);Rb=yl.VocabularyImpl=Oo;var _R;function H3(){if(_R)return p_;_R=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(a,l,c,d){var f=arguments.length,g=f<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,c):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(a,l,c,d);else for(var E=a.length-1;E>=0;E--)(x=a[E])&&(g=(f<3?x(g):f>3?x(l,c,g):x(l,c))||g);return f>3&&g&&Object.defineProperty(l,c,g),g};Object.defineProperty(p_,"__esModule",{value:!0}),p_.DFASerializer=void 0;const e=b1(),t=Xe,i=Mo(),s=Nu,n=yl;class o{constructor(l,c,d,f){c instanceof s.Recognizer?(d=c.ruleNames,f=c.atn,c=c.vocabulary):c||(c=n.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=l,this.vocabulary=c,this.ruleNames=d,this.atn=f}toString(){if(!this.dfa.s0)return"";let l="";if(this.dfa.states){let d=new Array(...this.dfa.states.toArray());d.sort((f,g)=>f.stateNumber-g.stateNumber);for(let f of d){let g=f.getEdgeMap(),x=[...g.keys()].sort((b,D)=>b-D),E=f.getContextEdgeMap(),P=[...E.keys()].sort((b,D)=>b-D);for(let b of x){let D=g.get(b);if((D==null||D===e.ATNSimulator.ERROR)&&!f.isContextSymbol(b))continue;let C=!1;l+=this.getStateString(f)+"-"+this.getEdgeLabel(b)+"->",f.isContextSymbol(b)&&(l+="!",C=!0);let O=D;O&&O.stateNumber!==e.ATNSimulator.ERROR.stateNumber?l+=this.getStateString(O)+`
`:C&&(l+=`ctx
`)}if(f.isContextSensitive)for(let b of P)l+=this.getStateString(f)+"-"+this.getContextLabel(b)+"->"+this.getStateString(E.get(b))+`
`}}let c=l;return c.length===0?"":c}getContextLabel(l){if(l===i.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(l===i.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&l>0&&l<=this.atn.states.length){let d=this.atn.states[l].ruleIndex;if(this.ruleNames&&d>=0&&d<this.ruleNames.length)return"ctx:"+String(l)+"("+this.ruleNames[d]+")"}return"ctx:"+String(l)}getEdgeLabel(l){return this.vocabulary.getDisplayName(l)}getStateString(l){if(l===e.ATNSimulator.ERROR)return"ERROR";let c=l.stateNumber,d="s"+c;if(l.isAcceptState&&(l.predicates?d=":s"+c+"=>"+l.predicates:d=":s"+c+"=>"+l.prediction),l.isContextSensitive){d+="*";for(let f of l.configs)if(f.reachesIntoOuterContext){d+="*";break}}return d}}return r([t.NotNull],o.prototype,"dfa",void 0),r([t.NotNull],o.prototype,"vocabulary",void 0),r([t.Override],o.prototype,"toString",null),p_.DFASerializer=o,p_}var g_={},pR;function Nz(){if(pR)return g_;pR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},e=$&&$.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(g_,"__esModule",{value:!0}),g_.LexerDFASerializer=void 0;const t=H3(),i=Xe,s=yl;let n=class extends t.DFASerializer{constructor(a){super(a,s.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(a){return"'"+String.fromCodePoint(a)+"'"}};return r([i.Override,i.NotNull],n.prototype,"getEdgeLabel",null),n=r([e(0,i.NotNull)],n),g_.LexerDFASerializer=n,g_}var Rf={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Iz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.StarLoopEntryState=void 0;const Fz=ji,Mz=Bo,Bz=Da,Lz=Xe;class j3 extends Bz.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new Mz.BitSet}get stateType(){return Fz.ATNStateType.STAR_LOOP_ENTRY}}Iz([Lz.Override],j3.prototype,"stateType",null);Rf.StarLoopEntryState=j3;var gR;function V3(){if(gR)return d_;gR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(g,x,E,P){var b=arguments.length,D=b<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,E):P,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,x,E,P);else for(var O=g.length-1;O>=0;O--)(C=g[O])&&(D=(b<3?C(D):b>3?C(x,E,D):C(x,E))||D);return b>3&&D&&Object.defineProperty(x,E,D),D},e=$&&$.__param||function(g,x){return function(E,P){x(E,P,g)}};Object.defineProperty(d_,"__esModule",{value:!0}),d_.DFA=void 0;const t=Fo,i=og(),s=H3(),n=A1(),o=Nz(),a=Xe,l=Gs,c=Rf,d=yl;let f=class{constructor(x,E=0){if(this.states=new t.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!x.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=x,this.atn=x.atn,this.decision=E;let P=!1;x instanceof c.StarLoopEntryState&&x.precedenceRuleDecision&&(P=!0,this.s0=new n.DFAState(new i.ATNConfigSet),this.s0full=new n.DFAState(new i.ATNConfigSet)),this.precedenceDfa=P}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(x,E){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return E?this.s0full.getTarget(x):this.s0.getTarget(x)}setPrecedenceStartState(x,E,P){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");x<0||(E?this.s0full.setTarget(x,P):this.s0.setTarget(x,P))}get isEmpty(){return this.isPrecedenceDfa?this.s0.getEdgeMap().size===0&&this.s0full.getEdgeMap().size===0:this.s0==null&&this.s0full==null}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:this.s0full!=null}addState(x){return x.stateNumber=this.nextStateNumber++,this.states.getOrAdd(x)}toString(x,E){if(x||(x=d.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let P;return E?P=new s.DFASerializer(this,x,E,this.atnStartState.atn):P=new s.DFASerializer(this,x),P.toString()}toLexerString(){return this.s0?new o.LexerDFASerializer(this).toString():""}};return r([a.NotNull],f.prototype,"states",void 0),r([a.NotNull],f.prototype,"atnStartState",void 0),r([a.NotNull],f.prototype,"atn",void 0),f=r([e(0,a.NotNull)],f),d_.DFA=f,d_}var lg={},ug={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Uz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(ug,"__esModule",{value:!0});ug.BasicState=void 0;const Gz=Pa,zz=ji,Hz=Xe;class W3 extends Gz.ATNState{get stateType(){return zz.ATNStateType.BASIC}}Uz([Hz.Override],W3.prototype,"stateType",null);ug.BasicState=W3;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var jz=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(lg,"__esModule",{value:!0});lg.InvalidState=void 0;const Vz=ji,Wz=ug,$z=Xe;class $3 extends Wz.BasicState{get stateType(){return Vz.ATNStateType.INVALID_TYPE}}jz([$z.Override],$3.prototype,"stateType",null);lg.InvalidState=$3;var m_={},x_={},y_={},mR;function Db(){if(mR)return y_;mR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(a,l,c,d){var f=arguments.length,g=f<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,c):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(a,l,c,d);else for(var E=a.length-1;E>=0;E--)(x=a[E])&&(g=(f<3?x(g):f>3?x(l,c,g):x(l,c))||g);return f>3&&g&&Object.defineProperty(l,c,g),g},e=$&&$.__param||function(a,l){return function(c,d){l(c,d,a)}};Object.defineProperty(y_,"__esModule",{value:!0}),y_.SetTransition=void 0;const t=Ph(),i=Xe,s=dr,n=Io;let o=class extends n.Transition{constructor(l,c){super(l),c==null&&(c=t.IntervalSet.of(s.Token.INVALID_TYPE)),this.set=c}get serializationType(){return 7}get label(){return this.set}matches(l,c,d){return this.set.contains(l)}toString(){return this.set.toString()}};return r([i.NotNull],o.prototype,"set",void 0),r([i.Override],o.prototype,"serializationType",null),r([i.Override,i.NotNull],o.prototype,"label",null),r([i.Override],o.prototype,"matches",null),r([i.Override,i.NotNull],o.prototype,"toString",null),o=r([e(0,i.NotNull),e(1,i.Nullable)],o),y_.SetTransition=o,y_}var xR;function Cb(){if(xR)return x_;xR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(x_,"__esModule",{value:!0}),x_.NotSetTransition=void 0;const t=Xe,i=Db();let s=class extends i.SetTransition{constructor(o,a){super(o,a)}get serializationType(){return 8}matches(o,a,l){return o>=a&&o<=l&&!super.matches(o,a,l)}toString(){return"~"+super.toString()}};return r([t.Override],s.prototype,"serializationType",null),r([t.Override],s.prototype,"matches",null),r([t.Override],s.prototype,"toString",null),s=r([e(0,t.NotNull),e(1,t.Nullable)],s),x_.NotSetTransition=s,x_}var Fu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var K3=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.RuleStopState=void 0;const Kz=Pa,Xz=ji,X3=Xe;class Ob extends Kz.ATNState{get nonStopStateNumber(){return-1}get stateType(){return Xz.ATNStateType.RULE_STOP}}K3([X3.Override],Ob.prototype,"nonStopStateNumber",null);K3([X3.Override],Ob.prototype,"stateType",null);Fu.RuleStopState=Ob;var Df={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var cg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},yR=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Df,"__esModule",{value:!0});Df.RuleTransition=void 0;const qd=Xe,Yz=Io;let Zc=class extends Yz.Transition{constructor(e,t,i,s){super(e),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=t,this.precedence=i,this.followState=s}get serializationType(){return 3}get isEpsilon(){return!0}matches(e,t,i){return!1}};cg([qd.NotNull],Zc.prototype,"followState",void 0);cg([qd.Override],Zc.prototype,"serializationType",null);cg([qd.Override],Zc.prototype,"isEpsilon",null);cg([qd.Override],Zc.prototype,"matches",null);Zc=cg([yR(0,qd.NotNull),yR(3,qd.NotNull)],Zc);Df.RuleTransition=Zc;var hg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var T1=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},qz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(hg,"__esModule",{value:!0});hg.WildcardTransition=void 0;const w0=Xe,Qz=Io;let Qd=class extends Qz.Transition{constructor(e){super(e)}get serializationType(){return 9}matches(e,t,i){return e>=t&&e<=i}toString(){return"."}};T1([w0.Override],Qd.prototype,"serializationType",null);T1([w0.Override],Qd.prototype,"matches",null);T1([w0.Override,w0.NotNull],Qd.prototype,"toString",null);Qd=T1([qz(0,w0.NotNull)],Qd);hg.WildcardTransition=Qd;var vR;function Jz(){if(vR)return m_;vR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(b,D,C,O){var N=arguments.length,j=N<3?D:O===null?O=Object.getOwnPropertyDescriptor(D,C):O,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(b,D,C,O);else for(var M=b.length-1;M>=0;M--)(I=b[M])&&(j=(N<3?I(j):N>3?I(D,C,j):I(D,C))||j);return N>3&&j&&Object.defineProperty(D,C,j),j},e=$&&$.__param||function(b,D){return function(C,O){D(C,O,b)}};Object.defineProperty(m_,"__esModule",{value:!0}),m_.LL1Analyzer=void 0;const t=kf,i=Fo,s=wh,n=Bo,o=Ph(),a=Xe,l=Cb(),c=Gs,d=Mo(),f=Fu,g=Df,x=dr,E=hg;let P=class xw{constructor(D){this.atn=D}getDecisionLookahead(D){if(D==null)return;let C=new Array(D.numberOfTransitions);for(let O=0;O<D.numberOfTransitions;O++){let N=new o.IntervalSet;C[O]=N;let j=new i.Array2DHashSet(c.ObjectEqualityComparator.INSTANCE),I=!1;this._LOOK(D.transition(O).target,void 0,d.PredictionContext.EMPTY_LOCAL,N,j,new n.BitSet,I,!1),(N.size===0||N.contains(xw.HIT_PRED))&&(N=void 0,C[O]=N)}return C}LOOK(D,C,O){if(O===void 0){if(D.atn==null)throw new Error("Illegal state");O=D.atn.ruleToStopState[D.ruleIndex]}else O===null&&(O=void 0);let N=new o.IntervalSet,j=!0,I=!0;return this._LOOK(D,O,C,N,new i.Array2DHashSet,new n.BitSet,j,I),N}_LOOK(D,C,O,N,j,I,M,R){let L=s.ATNConfig.create(D,0,O);if(!j.add(L))return;if(D===C){if(d.PredictionContext.isEmptyLocal(O)){N.add(x.Token.EPSILON);return}else if(O.isEmpty){R&&N.add(x.Token.EOF);return}}if(D instanceof f.RuleStopState){if(O.isEmpty&&!d.PredictionContext.isEmptyLocal(O)){R&&N.add(x.Token.EOF);return}let Q=I.get(D.ruleIndex);try{I.clear(D.ruleIndex);for(let ue=0;ue<O.size;ue++){if(O.getReturnState(ue)===d.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let ae=this.atn.states[O.getReturnState(ue)];this._LOOK(ae,C,O.getParent(ue),N,j,I,M,R)}}finally{Q&&I.set(D.ruleIndex)}}let K=D.numberOfTransitions;for(let Q=0;Q<K;Q++){let ue=D.transition(Q);if(ue instanceof g.RuleTransition){if(I.get(ue.ruleIndex))continue;let ae=O.getChild(ue.followState.stateNumber);try{I.set(ue.ruleIndex),this._LOOK(ue.target,C,ae,N,j,I,M,R)}finally{I.clear(ue.ruleIndex)}}else if(ue instanceof t.AbstractPredicateTransition)M?this._LOOK(ue.target,C,O,N,j,I,M,R):N.add(xw.HIT_PRED);else if(ue.isEpsilon)this._LOOK(ue.target,C,O,N,j,I,M,R);else if(ue instanceof E.WildcardTransition)N.addAll(o.IntervalSet.of(x.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let ae=ue.label;ae!=null&&(ue instanceof l.NotSetTransition&&(ae=ae.complement(o.IntervalSet.of(x.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),N.addAll(ae))}}}};return P.HIT_PRED=x.Token.INVALID_TYPE,r([a.NotNull],P.prototype,"atn",void 0),r([a.NotNull,e(0,a.NotNull),e(1,a.NotNull)],P.prototype,"LOOK",null),r([e(0,a.NotNull),e(2,a.NotNull),e(3,a.NotNull),e(4,a.NotNull),e(5,a.NotNull)],P.prototype,"_LOOK",null),P=r([e(0,a.NotNull)],P),m_.LL1Analyzer=P,m_}var ER;function Oa(){return ER||(ER=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(E,P,b,D){var C=arguments.length,O=C<3?P:D===null?D=Object.getOwnPropertyDescriptor(P,b):D,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(E,P,b,D);else for(var j=E.length-1;j>=0;j--)(N=E[j])&&(O=(C<3?N(O):C>3?N(P,b,O):N(P,b))||O);return C>3&&O&&Object.defineProperty(P,b,O),O},t=$&&$.__param||function(E,P){return function(b,D){P(b,D,E)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATN=void 0;const i=xl,s=V3(),n=Ph(),o=lg,a=Jz(),l=Xe,c=Gs,d=Mo(),f=dr,g=Us;let x=class{constructor(P,b){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new i.Array2DHashMap(c.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=P,this.maxTokenType=b}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let P=0;P<this.decisionToDFA.length;P++)this.decisionToDFA[P]=new s.DFA(this.decisionToState[P],P);this.modeToDFA=new Array(this.modeToStartState.length);for(let P=0;P<this.modeToDFA.length;P++)this.modeToDFA[P]=new s.DFA(this.modeToStartState[P]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(P){return d.PredictionContext.getCachedContext(P,this.contextCache,new d.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return g(this.decisionToDFA!=null&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(P,b){return b?new a.LL1Analyzer(this).LOOK(P,b):(P.nextTokenWithinRule||(P.nextTokenWithinRule=this.nextTokens(P,d.PredictionContext.EMPTY_LOCAL),P.nextTokenWithinRule.setReadonly(!0)),P.nextTokenWithinRule)}addState(P){P.atn=this,P.stateNumber=this.states.length,this.states.push(P)}removeState(P){let b=new o.InvalidState;b.atn=this,b.stateNumber=P.stateNumber,this.states[P.stateNumber]=b}defineMode(P,b){this.modeNameToStartState.set(P,b),this.modeToStartState.push(b),this.modeToDFA.push(new s.DFA(b)),this.defineDecisionState(b)}defineDecisionState(P){return this.decisionToState.push(P),P.decision=this.decisionToState.length-1,this.decisionToDFA.push(new s.DFA(P,P.decision)),P.decision}getDecisionState(P){if(this.decisionToState.length>0)return this.decisionToState[P]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(P,b){if(P<0||P>=this.states.length)throw new RangeError("Invalid state number.");let D=b,C=this.states[P],O=this.nextTokens(C);if(!O.contains(f.Token.EPSILON))return O;let N=new n.IntervalSet;for(N.addAll(O),N.remove(f.Token.EPSILON);D!=null&&D.invokingState>=0&&O.contains(f.Token.EPSILON);){let I=this.states[D.invokingState].transition(0);O=this.nextTokens(I.followState),N.addAll(O),N.remove(f.Token.EPSILON),D=D._parent}return O.contains(f.Token.EPSILON)&&N.add(f.Token.EOF),N}};e([l.NotNull],x.prototype,"states",void 0),e([l.NotNull],x.prototype,"decisionToState",void 0),e([l.NotNull],x.prototype,"modeNameToStartState",void 0),e([l.NotNull],x.prototype,"modeToStartState",void 0),e([l.NotNull],x.prototype,"decisionToDFA",void 0),e([l.NotNull],x.prototype,"modeToDFA",void 0),e([l.NotNull],x.prototype,"nextTokens",null),e([t(0,l.NotNull)],x.prototype,"removeState",null),e([t(0,l.NotNull),t(1,l.NotNull)],x.prototype,"defineMode",null),e([t(0,l.NotNull)],x.prototype,"defineDecisionState",null),e([l.NotNull],x.prototype,"getExpectedTokens",null),x=e([t(0,l.NotNull)],x),r.ATN=x,function(E){E.INVALID_ALT_NUMBER=0}(x=r.ATN||(r.ATN={})),r.ATN=x}(OE)),OE}var P1={},R1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ah=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Zz=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(R1,"__esModule",{value:!0});R1.LexerIndexedCustomAction=void 0;const fm=ti,bh=Xe;let hl=class Y3{constructor(e,t){this._offset=e,this._action=t}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(e){this._action.execute(e)}hashCode(){let e=fm.MurmurHash.initialize();return e=fm.MurmurHash.update(e,this._offset),e=fm.MurmurHash.update(e,this._action),fm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof Y3?this._offset===e._offset&&this._action.equals(e._action):!1}};Ah([bh.NotNull],hl.prototype,"action",null);Ah([bh.Override],hl.prototype,"actionType",null);Ah([bh.Override],hl.prototype,"isPositionDependent",null);Ah([bh.Override],hl.prototype,"execute",null);Ah([bh.Override],hl.prototype,"hashCode",null);Ah([bh.Override],hl.prototype,"equals",null);hl=Ah([Zz(1,bh.NotNull)],hl);R1.LexerIndexedCustomAction=hl;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var kh=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Nb=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(P1,"__esModule",{value:!0});P1.LexerActionExecutor=void 0;const eH=Eh,UE=R1,GE=ti,bu=Xe;let dl=class pp{constructor(e){this._lexerActions=e;let t=GE.MurmurHash.initialize();for(let i of e)t=GE.MurmurHash.update(t,i);this.cachedHashCode=GE.MurmurHash.finish(t,e.length)}static append(e,t){if(!e)return new pp([t]);let i=e._lexerActions.slice(0);return i.push(t),new pp(i)}fixOffsetBeforeMatch(e){let t;for(let i=0;i<this._lexerActions.length;i++)this._lexerActions[i].isPositionDependent&&!(this._lexerActions[i]instanceof UE.LexerIndexedCustomAction)&&(t||(t=this._lexerActions.slice(0)),t[i]=new UE.LexerIndexedCustomAction(e,this._lexerActions[i]));return t?new pp(t):this}get lexerActions(){return this._lexerActions}execute(e,t,i){let s=!1,n=t.index;try{for(let o of this._lexerActions){if(o instanceof UE.LexerIndexedCustomAction){let a=o.offset;t.seek(i+a),o=o.action,s=i+a!==n}else o.isPositionDependent&&(t.seek(n),s=!1);o.execute(e)}}finally{s&&t.seek(n)}}hashCode(){return this.cachedHashCode}equals(e){return e===this?!0:e instanceof pp?this.cachedHashCode===e.cachedHashCode&&eH.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,e._lexerActions):!1}};kh([bu.NotNull],dl.prototype,"_lexerActions",void 0);kh([bu.NotNull],dl.prototype,"lexerActions",null);kh([Nb(0,bu.NotNull)],dl.prototype,"execute",null);kh([bu.Override],dl.prototype,"hashCode",null);kh([bu.Override],dl.prototype,"equals",null);kh([bu.NotNull,Nb(1,bu.NotNull)],dl,"append",null);dl=kh([Nb(0,bu.NotNull)],dl);P1.LexerActionExecutor=dl;var Th={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ib=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},tH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Th,"__esModule",{value:!0});Th.LexerNoViableAltException=void 0;const rH=Ra,Fb=Xe,iH=un,nH=Ei;let A0=class extends rH.RecognitionException{constructor(e,t,i,s){super(e,t),this._startIndex=i,this._deadEndConfigs=s}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let e="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(e=this.inputStream.getText(iH.Interval.of(this._startIndex,this._startIndex)),e=nH.escapeWhitespace(e,!1)),`LexerNoViableAltException('${e}')`}};Ib([Fb.Override],A0.prototype,"inputStream",null);Ib([Fb.Override],A0.prototype,"toString",null);A0=Ib([tH(1,Fb.NotNull)],A0);Th.LexerNoViableAltException=A0;var v_={},SR;function sH(){if(SR)return v_;SR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,c=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(c=(l<3?d(c):l>3?d(n,o,c):d(n,o))||c);return l>3&&c&&Object.defineProperty(n,o,c),c};Object.defineProperty(v_,"__esModule",{value:!0}),v_.OrderedATNConfigSet=void 0;const e=og(),t=Xe;class i extends e.ATNConfigSet{constructor(n,o){n!=null&&o!=null?super(n,o):super()}clone(n){let o=new i(this,n);return!n&&this.isReadOnly&&o.addAll(this),o}getKey(n){return{state:0,alt:n.hashCode()}}canMerge(n,o,a){return n.equals(a)}}return r([t.Override],i.prototype,"clone",null),r([t.Override],i.prototype,"getKey",null),r([t.Override],i.prototype,"canMerge",null),v_.OrderedATNConfigSet=i,v_}var wR;function D1(){return wR||(wR=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(j,I,M,R){var L=arguments.length,K=L<3?I:R===null?R=Object.getOwnPropertyDescriptor(I,M):R,Q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(j,I,M,R);else for(var ue=j.length-1;ue>=0;ue--)(Q=j[ue])&&(K=(L<3?Q(K):L>3?Q(I,M,K):Q(I,M))||K);return L>3&&K&&Object.defineProperty(I,M,K),K},t=$&&$.__param||function(j,I){return function(M,R){I(M,R,j)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerATNSimulator=void 0;const i=sg,s=Oa(),n=wh,o=og(),a=b1(),l=A1(),c=un,d=ml,f=Mu(),g=P1,x=Th,E=Xe,P=sH(),b=Mo(),D=Fu,C=dr,O=Us;let N=class Ss extends a.ATNSimulator{constructor(I,M){super(I),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=f.Lexer.DEFAULT_MODE,this.prevAccept=new Ss.SimState,this.recog=M}copyState(I){this._charPositionInLine=I.charPositionInLine,this._line=I._line,this.mode=I.mode,this.startIndex=I.startIndex}match(I,M){this.mode=M;let R=I.mark();try{this.startIndex=I.index,this.prevAccept.reset();let L=this.atn.modeToDFA[M].s0;return L==null?this.matchATN(I):this.execATN(I,L)}finally{I.release(R)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=f.Lexer.DEFAULT_MODE}matchATN(I){let M=this.atn.modeToStartState[this.mode];Ss.debug&&console.log(`matchATN mode ${this.mode} start: ${M}`);let R=this.mode,L=this.computeStartState(I,M),K=L.hasSemanticContext;K&&(L.hasSemanticContext=!1);let Q=this.addDFAState(L);if(!K){let ae=this.atn.modeToDFA[this.mode];ae.s0?Q=ae.s0:ae.s0=Q}let ue=this.execATN(I,Q);return Ss.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[R].toLexerString()}`),ue}execATN(I,M){Ss.debug&&console.log(`start state closure=${M.configs}`),M.isAcceptState&&this.captureSimState(this.prevAccept,I,M);let R=I.LA(1),L=M;for(;;){Ss.debug&&console.log(`execATN loop starting closure: ${L.configs}`);let K=this.getExistingTargetState(L,R);if(K==null&&(K=this.computeTargetState(I,L,R)),K===a.ATNSimulator.ERROR||(R!==d.IntStream.EOF&&this.consume(I),K.isAcceptState&&(this.captureSimState(this.prevAccept,I,K),R===d.IntStream.EOF)))break;R=I.LA(1),L=K}return this.failOrAccept(this.prevAccept,I,L.configs,R)}getExistingTargetState(I,M){let R=I.getTarget(M);return Ss.debug&&R!=null&&console.log("reuse state "+I.stateNumber+" edge to "+R.stateNumber),R}computeTargetState(I,M,R){let L=new P.OrderedATNConfigSet;return this.getReachableConfigSet(I,M.configs,L,R),L.isEmpty?(L.hasSemanticContext||this.addDFAEdge(M,R,a.ATNSimulator.ERROR),a.ATNSimulator.ERROR):this.addDFAEdge(M,R,L)}failOrAccept(I,M,R,L){if(I.dfaState!=null){let K=I.dfaState.lexerActionExecutor;return this.accept(M,K,this.startIndex,I.index,I.line,I.charPos),I.dfaState.prediction}else{if(L===d.IntStream.EOF&&M.index===this.startIndex)return C.Token.EOF;throw new x.LexerNoViableAltException(this.recog,M,this.startIndex,R)}}getReachableConfigSet(I,M,R,L){let K=s.ATN.INVALID_ALT_NUMBER;for(let Q of M){let ue=Q.alt===K;if(ue&&Q.hasPassedThroughNonGreedyDecision)continue;Ss.debug&&console.log(`testing ${this.getTokenName(L)} at ${Q.toString(this.recog,!0)}`);let ae=Q.state.numberOfOptimizedTransitions;for(let Re=0;Re<ae;Re++){let Ue=Q.state.getOptimizedTransition(Re),rt=this.getReachableTarget(Ue,L);if(rt!=null){let Ve=Q.lexerActionExecutor,Fe;Ve!=null?(Ve=Ve.fixOffsetBeforeMatch(I.index-this.startIndex),Fe=Q.transform(rt,!0,Ve)):(O(Q.lexerActionExecutor==null),Fe=Q.transform(rt,!0));let nt=L===d.IntStream.EOF;if(this.closure(I,Fe,R,ue,!0,nt)){K=Q.alt;break}}}}}accept(I,M,R,L,K,Q){Ss.debug&&console.log(`ACTION ${M}`),I.seek(L),this._line=K,this._charPositionInLine=Q,M!=null&&this.recog!=null&&M.execute(this.recog,I,R)}getReachableTarget(I,M){if(I.matches(M,f.Lexer.MIN_CHAR_VALUE,f.Lexer.MAX_CHAR_VALUE))return I.target}computeStartState(I,M){let R=b.PredictionContext.EMPTY_FULL,L=new P.OrderedATNConfigSet;for(let K=0;K<M.numberOfTransitions;K++){let Q=M.transition(K).target,ue=n.ATNConfig.create(Q,K+1,R);this.closure(I,ue,L,!1,!1,!1)}return L}closure(I,M,R,L,K,Q){if(Ss.debug&&console.log("closure("+M.toString(this.recog,!0)+")"),M.state instanceof D.RuleStopState){Ss.debug&&(this.recog!=null?console.log(`closure at ${this.recog.ruleNames[M.state.ruleIndex]} rule stop ${M}`):console.log(`closure at rule stop ${M}`));let ae=M.context;if(ae.isEmpty)return R.add(M),!0;ae.hasEmpty&&(R.add(M.transform(M.state,!0,b.PredictionContext.EMPTY_FULL)),L=!0);for(let Re=0;Re<ae.size;Re++){let Ue=ae.getReturnState(Re);if(Ue===b.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let rt=ae.getParent(Re),Ve=this.atn.states[Ue],Fe=M.transform(Ve,!1,rt);L=this.closure(I,Fe,R,L,K,Q)}return L}M.state.onlyHasEpsilonTransitions||(!L||!M.hasPassedThroughNonGreedyDecision)&&R.add(M);let ue=M.state;for(let ae=0;ae<ue.numberOfOptimizedTransitions;ae++){let Re=ue.getOptimizedTransition(ae),Ue=this.getEpsilonTarget(I,M,Re,R,K,Q);Ue!=null&&(L=this.closure(I,Ue,R,L,K,Q))}return L}getEpsilonTarget(I,M,R,L,K,Q){let ue;switch(R.serializationType){case 3:let ae=R;if(this.optimize_tail_calls&&ae.optimizedTailCall&&!M.context.hasEmpty)ue=M.transform(R.target,!0);else{let Ue=M.context.getChild(ae.followState.stateNumber);ue=M.transform(R.target,!0,Ue)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let Re=R;Ss.debug&&console.log("EVAL rule "+Re.ruleIndex+":"+Re.predIndex),L.hasSemanticContext=!0,this.evaluatePredicate(I,Re.ruleIndex,Re.predIndex,K)?ue=M.transform(R.target,!0):ue=void 0;break;case 6:if(M.context.hasEmpty){let Ue=g.LexerActionExecutor.append(M.lexerActionExecutor,this.atn.lexerActions[R.actionIndex]);ue=M.transform(R.target,!0,Ue);break}else{ue=M.transform(R.target,!0);break}case 1:ue=M.transform(R.target,!0);break;case 5:case 2:case 7:if(Q&&R.matches(d.IntStream.EOF,f.Lexer.MIN_CHAR_VALUE,f.Lexer.MAX_CHAR_VALUE)){ue=M.transform(R.target,!1);break}ue=void 0;break;default:ue=void 0;break}return ue}evaluatePredicate(I,M,R,L){if(this.recog==null)return!0;if(!L)return this.recog.sempred(void 0,M,R);let K=this._charPositionInLine,Q=this._line,ue=I.index,ae=I.mark();try{return this.consume(I),this.recog.sempred(void 0,M,R)}finally{this._charPositionInLine=K,this._line=Q,I.seek(ue),I.release(ae)}}captureSimState(I,M,R){I.index=M.index,I.line=this._line,I.charPos=this._charPositionInLine,I.dfaState=R}addDFAEdge(I,M,R){if(R instanceof o.ATNConfigSet){let L=R.hasSemanticContext;L&&(R.hasSemanticContext=!1);let K=this.addDFAState(R);return L||this.addDFAEdge(I,M,K),K}else Ss.debug&&console.log("EDGE "+I+" -> "+R+" upon "+String.fromCharCode(M)),I!=null&&I.setTarget(M,R)}addDFAState(I){O(!I.hasSemanticContext);let M=new l.DFAState(I),R=this.atn.modeToDFA[this.mode].states.get(M);if(R!=null)return R;I.optimizeConfigs(this);let L=new l.DFAState(I.clone(!0)),K;for(let Q of I)if(Q.state instanceof D.RuleStopState){K=Q;break}if(K!=null){let Q=this.atn.ruleToTokenType[K.state.ruleIndex],ue=K.lexerActionExecutor;L.acceptStateInfo=new i.AcceptStateInfo(Q,ue)}return this.atn.modeToDFA[this.mode].addState(L)}getDFA(I){return this.atn.modeToDFA[I]}getText(I){return I.getText(c.Interval.of(this.startIndex,I.index-1))}get line(){return this._line}set line(I){this._line=I}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(I){this._charPositionInLine=I}consume(I){I.LA(1)===`
`.charCodeAt(0)?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,I.consume()}getTokenName(I){return I===-1?"EOF":"'"+String.fromCharCode(I)+"'"}};e([E.NotNull],N.prototype,"prevAccept",void 0),e([t(0,E.NotNull)],N.prototype,"copyState",null),e([t(0,E.NotNull)],N.prototype,"match",null),e([E.Override],N.prototype,"reset",null),e([t(0,E.NotNull)],N.prototype,"matchATN",null),e([t(0,E.NotNull),t(1,E.NotNull)],N.prototype,"execATN",null),e([t(0,E.NotNull)],N.prototype,"getExistingTargetState",null),e([E.NotNull,t(0,E.NotNull),t(1,E.NotNull)],N.prototype,"computeTargetState",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull)],N.prototype,"getReachableConfigSet",null),e([t(0,E.NotNull)],N.prototype,"accept",null),e([E.NotNull,t(0,E.NotNull),t(1,E.NotNull)],N.prototype,"computeStartState",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull)],N.prototype,"closure",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull),t(3,E.NotNull)],N.prototype,"getEpsilonTarget",null),e([t(0,E.NotNull)],N.prototype,"evaluatePredicate",null),e([t(0,E.NotNull),t(1,E.NotNull),t(2,E.NotNull)],N.prototype,"captureSimState",null),e([E.NotNull,t(0,E.NotNull)],N.prototype,"addDFAState",null),e([E.NotNull],N.prototype,"getDFA",null),e([E.NotNull,t(0,E.NotNull)],N.prototype,"getText",null),e([t(0,E.NotNull)],N.prototype,"consume",null),e([E.NotNull],N.prototype,"getTokenName",null),N=e([t(0,E.NotNull)],N),r.LexerATNSimulator=N,function(j){j.debug=!1,j.dfa_debug=!1;class I{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}j.SimState=I}(N=r.LexerATNSimulator||(r.LexerATNSimulator={})),r.LexerATNSimulator=N}(CE)),CE}var AR;function Mu(){if(AR)return h_;AR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(f,g,x,E){var P=arguments.length,b=P<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,x):E,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(f,g,x,E);else for(var C=f.length-1;C>=0;C--)(D=f[C])&&(b=(P<3?D(b):P>3?D(g,x,b):D(g,x))||b);return P>3&&b&&Object.defineProperty(g,x,b),b};Object.defineProperty(h_,"__esModule",{value:!0}),h_.Lexer=void 0;const e=w1,t=ng,i=un,s=ml,n=D1(),o=Th,a=Xe,l=Nu,c=dr;class d extends l.Recognizer{constructor(g){super(),this._factory=e.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new t.IntegerStack,this._mode=d.DEFAULT_MODE,this._input=g,this._tokenFactorySourcePair={source:this,stream:g}}static get DEFAULT_TOKEN_CHANNEL(){return c.Token.DEFAULT_CHANNEL}static get HIDDEN(){return c.Token.HIDDEN_CHANNEL}reset(g){(g===void 0||g)&&this._input.seek(0),this._token=void 0,this._type=c.Token.INVALID_TYPE,this._channel=c.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=d.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(this._input==null)throw new Error("nextToken requires a non-null input stream.");let g=this._input.mark();try{e:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=c.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{this._type=c.Token.INVALID_TYPE;let x;try{x=this.interpreter.match(this._input,this._mode)}catch(E){if(E instanceof o.LexerNoViableAltException)this.notifyListeners(E),this.recover(E),x=d.SKIP;else throw E}if(this._input.LA(1)===s.IntStream.EOF&&(this._hitEOF=!0),this._type===c.Token.INVALID_TYPE&&(this._type=x),this._type===d.SKIP)continue e}while(this._type===d.MORE);return this._token==null?this.emit():this._token}}finally{this._input.release(g)}}skip(){this._type=d.SKIP}more(){this._type=d.MORE}mode(g){this._mode=g}pushMode(g){n.LexerATNSimulator.debug&&console.log("pushMode "+g),this._modeStack.push(this._mode),this.mode(g)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return n.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(g){this._factory=g}get inputStream(){return this._input}set inputStream(g){this.reset(!1),this._input=g,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}emit(g){return g||(g=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=g,g}emitEOF(){let g=this.charPositionInLine,x=this.line,E=this._factory.create(this._tokenFactorySourcePair,c.Token.EOF,void 0,c.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,x,g);return this.emit(E),E}get line(){return this.interpreter.line}set line(g){this.interpreter.line=g}get charPositionInLine(){return this.interpreter.charPositionInLine}set charPositionInLine(g){this.interpreter.charPositionInLine=g}get charIndex(){return this._input.index}get text(){return this._text!=null?this._text:this.interpreter.getText(this._input)}set text(g){this._text=g}get token(){return this._token}set token(g){this._token=g}set type(g){this._type=g}get type(){return this._type}set channel(g){this._channel=g}get channel(){return this._channel}getAllTokens(){let g=[],x=this.nextToken();for(;x.type!==c.Token.EOF;)g.push(x),x=this.nextToken();return g}notifyListeners(g){let x=this._input.getText(i.Interval.of(this._tokenStartCharIndex,this._input.index)),E="token recognition error at: '"+this.getErrorDisplay(x)+"'",P=this.getErrorListenerDispatch();P.syntaxError&&P.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,E,g)}getErrorDisplay(g){if(typeof g=="number"){switch(g){case c.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(g)}return g.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(g){return"'"+this.getErrorDisplay(g)+"'"}recover(g){g instanceof o.LexerNoViableAltException?this._input.LA(1)!==s.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}}return d.DEFAULT_MODE=0,d.MORE=-2,d.SKIP=-3,d.MIN_CHAR_VALUE=0,d.MAX_CHAR_VALUE=1114111,r([a.Override],d.prototype,"nextToken",null),r([a.Override],d.prototype,"tokenFactory",null),r([a.Override],d.prototype,"inputStream",null),r([a.Override],d.prototype,"sourceName",null),r([a.Override],d.prototype,"line",null),r([a.Override],d.prototype,"charPositionInLine",null),h_.Lexer=d,h_}var bR;function Ph(){if(bR)return c_;bR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(d,f,g,x){var E=arguments.length,P=E<3?f:x===null?x=Object.getOwnPropertyDescriptor(f,g):x,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(d,f,g,x);else for(var D=d.length-1;D>=0;D--)(b=d[D])&&(P=(E<3?b(P):E>3?b(f,g,P):b(f,g))||P);return E>3&&P&&Object.defineProperty(f,g,P),P},e=$&&$.__param||function(d,f){return function(g,x){f(g,x,d)}};Object.defineProperty(c_,"__esModule",{value:!0}),c_.IntervalSet=void 0;const t=Eh,i=Tf,s=un,n=Mu(),o=ti,a=Xe,l=dr;class c{constructor(f){this.readonly=!1,f!=null?this._intervals=f.slice(0):this._intervals=[]}static get COMPLETE_CHAR_SET(){return c._COMPLETE_CHAR_SET===void 0&&(c._COMPLETE_CHAR_SET=c.of(n.Lexer.MIN_CHAR_VALUE,n.Lexer.MAX_CHAR_VALUE),c._COMPLETE_CHAR_SET.setReadonly(!0)),c._COMPLETE_CHAR_SET}static get EMPTY_SET(){return c._EMPTY_SET==null&&(c._EMPTY_SET=new c,c._EMPTY_SET.setReadonly(!0)),c._EMPTY_SET}static of(f,g=f){let x=new c;return x.add(f,g),x}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(f,g=f){this.addRange(s.Interval.of(f,g))}addRange(f){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(f.b<f.a)){for(let g=0;g<this._intervals.length;g++){let x=this._intervals[g];if(f.equals(x))return;if(f.adjacent(x)||!f.disjoint(x)){let E=f.union(x);for(this._intervals[g]=E;g<this._intervals.length-1;){g++;let P=this._intervals[g];if(!E.adjacent(P)&&E.disjoint(P))break;this._intervals.splice(g,1),g--,this._intervals[g]=E.union(P)}return}if(f.startsBeforeDisjoint(x)){this._intervals.splice(g,0,f);return}}this._intervals.push(f)}}static or(f){let g=new c;for(let x of f)g.addAll(x);return g}addAll(f){if(f==null)return this;if(f instanceof c){let g=f,x=g._intervals.length;for(let E=0;E<x;E++){let P=g._intervals[E];this.add(P.a,P.b)}}else for(let g of f.toArray())this.add(g);return this}complementRange(f,g){return this.complement(c.of(f,g))}complement(f){if(f.isNil)return c.EMPTY_SET;let g;return f instanceof c?g=f:(g=new c,g.addAll(f)),g.subtract(this)}subtract(f){if(f==null||f.isNil)return new c(this._intervals);if(f instanceof c)return c.subtract(this,f);let g=new c;return g.addAll(f),c.subtract(this,g)}static subtract(f,g){if(f.isNil)return new c;let x=new c(f._intervals);if(g.isNil)return x;let E=0,P=0;for(;E<x._intervals.length&&P<g._intervals.length;){let b=x._intervals[E],D=g._intervals[P];if(D.b<b.a){P++;continue}if(D.a>b.b){E++;continue}let C,O;if(D.a>b.a&&(C=new s.Interval(b.a,D.a-1)),D.b<b.b&&(O=new s.Interval(D.b+1,b.b)),C)if(O){x._intervals[E]=C,x._intervals.splice(E+1,0,O),E++,P++;continue}else{x._intervals[E]=C,E++;continue}else if(O){x._intervals[E]=O,P++;continue}else{x._intervals.splice(E,1);continue}}return x}or(f){let g=new c;return g.addAll(this),g.addAll(f),g}and(f){if(f.isNil)return new c;let g=this._intervals,x=f._intervals,E,P=g.length,b=x.length,D=0,C=0;for(;D<P&&C<b;){let O=g[D],N=x[C];O.startsBeforeDisjoint(N)?D++:N.startsBeforeDisjoint(O)?C++:O.properlyContains(N)?(E||(E=new c),E.addRange(O.intersection(N)),C++):N.properlyContains(O)?(E||(E=new c),E.addRange(O.intersection(N)),D++):O.disjoint(N)||(E||(E=new c),E.addRange(O.intersection(N)),O.startsAfterNonDisjoint(N)?C++:N.startsAfterNonDisjoint(O)&&D++)}return E||new c}contains(f){let g=this._intervals.length,x=0,E=g-1;for(;x<=E;){let P=x+E>>1,b=this._intervals[P],D=b.a;if(b.b<f)x=P+1;else if(D>f)E=P-1;else return!0}return!1}get isNil(){return this._intervals==null||this._intervals.length===0}get maxElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[this._intervals.length-1].b}get minElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let f=o.MurmurHash.initialize();for(let g of this._intervals)f=o.MurmurHash.update(f,g.a),f=o.MurmurHash.update(f,g.b);return f=o.MurmurHash.finish(f,this._intervals.length*2),f}equals(f){return f==null||!(f instanceof c)?!1:t.ArrayEqualityComparator.INSTANCE.equals(this._intervals,f._intervals)}toString(f=!1){let g="";if(this._intervals==null||this._intervals.length===0)return"{}";this.size>1&&(g+="{");let x=!0;for(let E of this._intervals){x?x=!1:g+=", ";let P=E.a,b=E.b;P===b?P===l.Token.EOF?g+="<EOF>":f?g+="'"+String.fromCodePoint(P)+"'":g+=P:f?g+="'"+String.fromCodePoint(P)+"'..'"+String.fromCodePoint(b)+"'":g+=P+".."+b}return this.size>1&&(g+="}"),g}toStringVocabulary(f){if(this._intervals==null||this._intervals.length===0)return"{}";let g="";this.size>1&&(g+="{");let x=!0;for(let E of this._intervals){x?x=!1:g+=", ";let P=E.a,b=E.b;if(P===b)g+=this.elementName(f,P);else for(let D=P;D<=b;D++)D>P&&(g+=", "),g+=this.elementName(f,D)}return this.size>1&&(g+="}"),g}elementName(f,g){return g===l.Token.EOF?"<EOF>":g===l.Token.EPSILON?"<EPSILON>":f.getDisplayName(g)}get size(){let f=0,g=this._intervals.length;if(g===1){let x=this._intervals[0];return x.b-x.a+1}for(let x=0;x<g;x++){let E=this._intervals[x];f+=E.b-E.a+1}return f}toIntegerList(){let f=new i.IntegerList(this.size),g=this._intervals.length;for(let x=0;x<g;x++){let E=this._intervals[x],P=E.a,b=E.b;for(let D=P;D<=b;D++)f.add(D)}return f}toSet(){let f=new Set;for(let g of this._intervals){let x=g.a,E=g.b;for(let P=x;P<=E;P++)f.add(P)}return f}toArray(){let f=new Array,g=this._intervals.length;for(let x=0;x<g;x++){let E=this._intervals[x],P=E.a,b=E.b;for(let D=P;D<=b;D++)f.push(D)}return f}remove(f){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let g=this._intervals.length;for(let x=0;x<g;x++){let E=this._intervals[x],P=E.a,b=E.b;if(f<P)break;if(f===P&&f===b){this._intervals.splice(x,1);break}if(f===P){this._intervals[x]=s.Interval.of(E.a+1,E.b);break}if(f===b){this._intervals[x]=s.Interval.of(E.a,E.b-1);break}if(f>P&&f<b){let D=E.b;this._intervals[x]=s.Interval.of(E.a,f-1),this.add(f+1,D)}}}get isReadonly(){return this.readonly}setReadonly(f){if(this.readonly&&!f)throw new Error("can't alter readonly IntervalSet");this.readonly=f}}return r([a.Override],c.prototype,"addAll",null),r([a.Override],c.prototype,"complement",null),r([a.Override],c.prototype,"subtract",null),r([a.Override],c.prototype,"or",null),r([a.Override],c.prototype,"and",null),r([a.Override],c.prototype,"contains",null),r([a.Override],c.prototype,"isNil",null),r([a.Override],c.prototype,"hashCode",null),r([a.Override],c.prototype,"equals",null),r([e(0,a.NotNull)],c.prototype,"toStringVocabulary",null),r([a.NotNull,e(0,a.NotNull)],c.prototype,"elementName",null),r([a.Override],c.prototype,"size",null),r([a.Override],c.prototype,"remove",null),r([a.NotNull],c,"of",null),r([a.NotNull],c,"subtract",null),c_.IntervalSet=c,c_}var E_={},S_={},dg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var oH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(dg,"__esModule",{value:!0});dg.ATNDeserializationOptions=void 0;const aH=Xe;class ou{constructor(e){this.readOnly=!1,e?(this.verifyATN=e.verifyATN,this.generateRuleBypassTransitions=e.generateRuleBypassTransitions,this.optimize=e.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return ou._defaultOptions==null&&(ou._defaultOptions=new ou,ou._defaultOptions.makeReadOnly()),ou._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(e){this.throwIfReadOnly(),this.verifyATN=e}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(e){this.throwIfReadOnly(),this.generateRuleBypassTransitions=e}get isOptimize(){return this.optimize}set isOptimize(e){this.throwIfReadOnly(),this.optimize=e}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}}oH([aH.NotNull],ou,"defaultOptions",null);dg.ATNDeserializationOptions=ou;var w_={},fg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _g=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},lH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(fg,"__esModule",{value:!0});fg.ActionTransition=void 0;const pg=Xe,uH=Io;let eh=class extends uH.Transition{constructor(e,t,i=-1,s=!1){super(e),this.ruleIndex=t,this.actionIndex=i,this.isCtxDependent=s}get serializationType(){return 6}get isEpsilon(){return!0}matches(e,t,i){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};_g([pg.Override],eh.prototype,"serializationType",null);_g([pg.Override],eh.prototype,"isEpsilon",null);_g([pg.Override],eh.prototype,"matches",null);_g([pg.Override],eh.prototype,"toString",null);eh=_g([lH(0,pg.NotNull)],eh);fg.ActionTransition=eh;var gg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var mg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},cH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(gg,"__esModule",{value:!0});gg.AtomTransition=void 0;const hH=Ph(),th=Xe,dH=Io;let rh=class extends dH.Transition{constructor(e,t){super(e),this._label=t}get serializationType(){return 5}get label(){return hH.IntervalSet.of(this._label)}matches(e,t,i){return this._label===e}toString(){return String(this.label)}};mg([th.Override],rh.prototype,"serializationType",null);mg([th.Override,th.NotNull],rh.prototype,"label",null);mg([th.Override],rh.prototype,"matches",null);mg([th.Override,th.NotNull],rh.prototype,"toString",null);rh=mg([cH(0,th.NotNull)],rh);gg.AtomTransition=rh;var C1={},Rh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Rh,"__esModule",{value:!0});Rh.BlockStartState=void 0;const fH=Da;class _H extends fH.DecisionState{}Rh.BlockStartState=_H;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var pH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(C1,"__esModule",{value:!0});C1.BasicBlockStartState=void 0;const gH=ji,mH=Rh,xH=Xe;class q3 extends mH.BlockStartState{get stateType(){return gH.ATNStateType.BLOCK_START}}pH([xH.Override],q3.prototype,"stateType",null);C1.BasicBlockStartState=q3;var O1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var yH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(O1,"__esModule",{value:!0});O1.BlockEndState=void 0;const vH=Pa,EH=ji,SH=Xe;class Q3 extends vH.ATNState{get stateType(){return EH.ATNStateType.BLOCK_END}}yH([SH.Override],Q3.prototype,"stateType",null);O1.BlockEndState=Q3;var N1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},wH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(N1,"__esModule",{value:!0});N1.EpsilonTransition=void 0;const Jd=Xe,AH=Io;let ih=class extends AH.Transition{constructor(e,t=-1){super(e),this._outermostPrecedenceReturn=t}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(e,t,i){return!1}toString(){return"epsilon"}};xg([Jd.Override],ih.prototype,"serializationType",null);xg([Jd.Override],ih.prototype,"isEpsilon",null);xg([Jd.Override],ih.prototype,"matches",null);xg([Jd.Override,Jd.NotNull],ih.prototype,"toString",null);ih=xg([wH(0,Jd.NotNull)],ih);N1.EpsilonTransition=ih;var I1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Cf=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},bH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(I1,"__esModule",{value:!0});I1.LexerChannelAction=void 0;const _m=ti,nh=Xe;class vl{constructor(e){this._channel=e}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(e){e.channel=this._channel}hashCode(){let e=_m.MurmurHash.initialize();return e=_m.MurmurHash.update(e,this.actionType),e=_m.MurmurHash.update(e,this._channel),_m.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof vl?this._channel===e._channel:!1}toString(){return`channel(${this._channel})`}}Cf([nh.Override],vl.prototype,"actionType",null);Cf([nh.Override],vl.prototype,"isPositionDependent",null);Cf([nh.Override,bH(0,nh.NotNull)],vl.prototype,"execute",null);Cf([nh.Override],vl.prototype,"hashCode",null);Cf([nh.Override],vl.prototype,"equals",null);Cf([nh.Override],vl.prototype,"toString",null);I1.LexerChannelAction=vl;var F1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var yg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},kH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(F1,"__esModule",{value:!0});F1.LexerCustomAction=void 0;const A_=ti,Zd=Xe;class Bu{constructor(e,t){this._ruleIndex=e,this._actionIndex=t}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(e){e.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let e=A_.MurmurHash.initialize();return e=A_.MurmurHash.update(e,this.actionType),e=A_.MurmurHash.update(e,this._ruleIndex),e=A_.MurmurHash.update(e,this._actionIndex),A_.MurmurHash.finish(e,3)}equals(e){return e===this?!0:e instanceof Bu?this._ruleIndex===e._ruleIndex&&this._actionIndex===e._actionIndex:!1}}yg([Zd.Override],Bu.prototype,"actionType",null);yg([Zd.Override],Bu.prototype,"isPositionDependent",null);yg([Zd.Override,kH(0,Zd.NotNull)],Bu.prototype,"execute",null);yg([Zd.Override],Bu.prototype,"hashCode",null);yg([Zd.Override],Bu.prototype,"equals",null);F1.LexerCustomAction=Bu;var M1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Of=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},TH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(M1,"__esModule",{value:!0});M1.LexerModeAction=void 0;const pm=ti,sh=Xe;class El{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(e){e.mode(this._mode)}hashCode(){let e=pm.MurmurHash.initialize();return e=pm.MurmurHash.update(e,this.actionType),e=pm.MurmurHash.update(e,this._mode),pm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof El?this._mode===e._mode:!1}toString(){return`mode(${this._mode})`}}Of([sh.Override],El.prototype,"actionType",null);Of([sh.Override],El.prototype,"isPositionDependent",null);Of([sh.Override,TH(0,sh.NotNull)],El.prototype,"execute",null);Of([sh.Override],El.prototype,"hashCode",null);Of([sh.Override],El.prototype,"equals",null);Of([sh.Override],El.prototype,"toString",null);M1.LexerModeAction=El;var J3={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},t=$&&$.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerMoreAction=void 0;const i=ti,s=Xe;class n{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(a){a.more()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"more"}}e([s.Override],n.prototype,"actionType",null),e([s.Override],n.prototype,"isPositionDependent",null),e([s.Override,t(0,s.NotNull)],n.prototype,"execute",null),e([s.Override],n.prototype,"hashCode",null),e([s.Override],n.prototype,"equals",null),e([s.Override],n.prototype,"toString",null),r.LexerMoreAction=n,function(o){o.INSTANCE=new o}(n=r.LexerMoreAction||(r.LexerMoreAction={}))})(J3);var Z3={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},t=$&&$.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerPopModeAction=void 0;const i=ti,s=Xe;class n{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(a){a.popMode()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"popMode"}}e([s.Override],n.prototype,"actionType",null),e([s.Override],n.prototype,"isPositionDependent",null),e([s.Override,t(0,s.NotNull)],n.prototype,"execute",null),e([s.Override],n.prototype,"hashCode",null),e([s.Override],n.prototype,"equals",null),e([s.Override],n.prototype,"toString",null),r.LexerPopModeAction=n,function(o){o.INSTANCE=new o}(n=r.LexerPopModeAction||(r.LexerPopModeAction={}))})(Z3);var B1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Nf=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},PH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(B1,"__esModule",{value:!0});B1.LexerPushModeAction=void 0;const gm=ti,oh=Xe;class Sl{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(e){e.pushMode(this._mode)}hashCode(){let e=gm.MurmurHash.initialize();return e=gm.MurmurHash.update(e,this.actionType),e=gm.MurmurHash.update(e,this._mode),gm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof Sl?this._mode===e._mode:!1}toString(){return`pushMode(${this._mode})`}}Nf([oh.Override],Sl.prototype,"actionType",null);Nf([oh.Override],Sl.prototype,"isPositionDependent",null);Nf([oh.Override,PH(0,oh.NotNull)],Sl.prototype,"execute",null);Nf([oh.Override],Sl.prototype,"hashCode",null);Nf([oh.Override],Sl.prototype,"equals",null);Nf([oh.Override],Sl.prototype,"toString",null);B1.LexerPushModeAction=Sl;var eI={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f},t=$&&$.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerSkipAction=void 0;const i=ti,s=Xe;class n{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(a){a.skip()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"skip"}}e([s.Override],n.prototype,"actionType",null),e([s.Override],n.prototype,"isPositionDependent",null),e([s.Override,t(0,s.NotNull)],n.prototype,"execute",null),e([s.Override],n.prototype,"hashCode",null),e([s.Override],n.prototype,"equals",null),e([s.Override],n.prototype,"toString",null),r.LexerSkipAction=n,function(o){o.INSTANCE=new o}(n=r.LexerSkipAction||(r.LexerSkipAction={}))})(eI);var L1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var If=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},RH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(L1,"__esModule",{value:!0});L1.LexerTypeAction=void 0;const mm=ti,ah=Xe;class wl{constructor(e){this._type=e}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(e){e.type=this._type}hashCode(){let e=mm.MurmurHash.initialize();return e=mm.MurmurHash.update(e,this.actionType),e=mm.MurmurHash.update(e,this._type),mm.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof wl?this._type===e._type:!1}toString(){return`type(${this._type})`}}If([ah.Override],wl.prototype,"actionType",null);If([ah.Override],wl.prototype,"isPositionDependent",null);If([ah.Override,RH(0,ah.NotNull)],wl.prototype,"execute",null);If([ah.Override],wl.prototype,"hashCode",null);If([ah.Override],wl.prototype,"equals",null);If([ah.Override],wl.prototype,"toString",null);L1.LexerTypeAction=wl;var vg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var DH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(vg,"__esModule",{value:!0});vg.LoopEndState=void 0;const CH=Pa,OH=ji,NH=Xe;class tI extends CH.ATNState{get stateType(){return OH.ATNStateType.LOOP_END}}DH([NH.Override],tI.prototype,"stateType",null);vg.LoopEndState=tI;var b_={},U1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var rI=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(U1,"__esModule",{value:!0});U1.ConflictInfo=void 0;const iI=Xe,IH=Ei;class Eg{constructor(e,t){this._conflictedAlts=e,this.exact=t}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(e){return e===this?!0:e instanceof Eg?this.isExact===e.isExact&&IH.equals(this.conflictedAlts,e.conflictedAlts):!1}hashCode(){return this.conflictedAlts.hashCode()}}rI([iI.Override],Eg.prototype,"equals",null);rI([iI.Override],Eg.prototype,"hashCode",null);U1.ConflictInfo=Eg;var k_={},Ff={},Al={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Na=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Al,"__esModule",{value:!0});Al.TerminalNode=void 0;const FH=un,Ia=Xe,MH=dr;class Lo{constructor(e){this._symbol=e}getChild(e){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}setParent(e){this._parent=e}get payload(){return this._symbol}get sourceInterval(){let e=this._symbol.tokenIndex;return new FH.Interval(e,e)}get childCount(){return 0}accept(e){return e.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(e){return this.toString()}toString(){return this._symbol.type===MH.Token.EOF?"<EOF>":this._symbol.text||""}}Na([Ia.Override],Lo.prototype,"getChild",null);Na([Ia.Override],Lo.prototype,"parent",null);Na([Ia.Override],Lo.prototype,"setParent",null);Na([Ia.Override],Lo.prototype,"payload",null);Na([Ia.Override],Lo.prototype,"sourceInterval",null);Na([Ia.Override],Lo.prototype,"childCount",null);Na([Ia.Override],Lo.prototype,"accept",null);Na([Ia.Override],Lo.prototype,"text",null);Na([Ia.Override],Lo.prototype,"toStringTree",null);Na([Ia.Override],Lo.prototype,"toString",null);Al.TerminalNode=Lo;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var BH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.ErrorNode=void 0;const LH=Xe,UH=Al;class nI extends UH.TerminalNode{constructor(e){super(e)}accept(e){return e.visitErrorNode(this)}}BH([LH.Override],nI.prototype,"accept",null);Ff.ErrorNode=nI;var T_={},Mf={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Mf,"__esModule",{value:!0});Mf.RuleNode=void 0;class GH{}Mf.RuleNode=GH;var P_={},kR;function Dh(){if(kR)return P_;kR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(x,E,P,b){var D=arguments.length,C=D<3?E:b===null?b=Object.getOwnPropertyDescriptor(E,P):b,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(x,E,P,b);else for(var N=x.length-1;N>=0;N--)(O=x[N])&&(C=(D<3?O(C):D>3?O(E,P,C):O(E,P))||C);return D>3&&C&&Object.defineProperty(E,P,C),C},e=$&&$.__param||function(x,E){return function(P,b){E(P,b,x)}};Object.defineProperty(P_,"__esModule",{value:!0}),P_.Trees=void 0;const t=Oa(),i=Ou,s=Ff,n=Xe,o=Og(),a=Uo(),l=Mf,c=Al,d=dr,f=Ei;class g{static toStringTree(E,P){let b;P instanceof o.Parser?b=P.ruleNames:b=P;let D=f.escapeWhitespace(this.getNodeText(E,b),!1);if(E.childCount===0)return D;let C="";C+="(",D=f.escapeWhitespace(this.getNodeText(E,b),!1),C+=D,C+=" ";for(let O=0;O<E.childCount;O++)O>0&&(C+=" "),C+=this.toStringTree(E.getChild(O),b);return C+=")",C}static getNodeText(E,P){let b;if(P instanceof o.Parser)b=P.ruleNames;else if(P)b=P;else{let D=E.payload;return typeof D.text=="string"?D.text:E.payload.toString()}if(E instanceof l.RuleNode){let D=E.ruleContext,C=D.ruleIndex,O=b[C],N=D.altNumber;return N!==t.ATN.INVALID_ALT_NUMBER?O+":"+N:O}else{if(E instanceof s.ErrorNode)return E.toString();if(E instanceof c.TerminalNode)return E.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(E){let P=[];for(let b=0;b<E.childCount;b++)P.push(E.getChild(b));return P}static getAncestors(E){let P=[],b=E.parent;for(;b;)P.unshift(b),b=b.parent;return P}static isAncestorOf(E,P){if(!E||!P||!E.parent)return!1;let b=P.parent;for(;b;){if(E===b)return!0;b=b.parent}return!1}static findAllTokenNodes(E,P){return g.findAllNodes(E,P,!0)}static findAllRuleNodes(E,P){return g.findAllNodes(E,P,!1)}static findAllNodes(E,P,b){let D=[];return g._findAllNodes(E,P,b,D),D}static _findAllNodes(E,P,b,D){b&&E instanceof c.TerminalNode?E.symbol.type===P&&D.push(E):!b&&E instanceof a.ParserRuleContext&&E.ruleIndex===P&&D.push(E);for(let C=0;C<E.childCount;C++)g._findAllNodes(E.getChild(C),P,b,D)}static getDescendants(E){let P=[];function b(D){P.push(D);const C=D.childCount;for(let O=0;O<C;O++)b(D.getChild(O))}return b(E),P}static getRootOfSubtreeEnclosingRegion(E,P,b){let D=E.childCount;for(let C=0;C<D;C++){let O=E.getChild(C),N=g.getRootOfSubtreeEnclosingRegion(O,P,b);if(N)return N}if(E instanceof a.ParserRuleContext){let C=E.stop;if(P>=E.start.tokenIndex&&(C==null||b<=C.tokenIndex))return E}}static stripChildrenOutOfRange(E,P,b,D){if(!E)return;let C=E.childCount;for(let O=0;O<C;O++){let N=E.getChild(O),j=N.sourceInterval;if(N instanceof a.ParserRuleContext&&(j.b<b||j.a>D)&&g.isAncestorOf(N,P)){let I=new i.CommonToken(d.Token.INVALID_TYPE,"...");E.children[O]=new c.TerminalNode(I)}}}static findNodeSuchThat(E,P){if(P(E))return E;let b=E.childCount;for(let D=0;D<b;D++){let C=g.findNodeSuchThat(E.getChild(D),P);if(C!==void 0)return C}}}return r([e(0,n.NotNull)],g,"toStringTree",null),r([n.NotNull,e(0,n.NotNull)],g,"getAncestors",null),r([e(0,n.NotNull)],g,"getRootOfSubtreeEnclosingRegion",null),P_.Trees=g,P_}var TR;function sI(){if(TR)return T_;TR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(c,d,f,g){var x=arguments.length,E=x<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,f):g,P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,d,f,g);else for(var b=c.length-1;b>=0;b--)(P=c[b])&&(E=(x<3?P(E):x>3?P(d,f,E):P(d,f))||E);return x>3&&E&&Object.defineProperty(d,f,E),E};Object.defineProperty(T_,"__esModule",{value:!0}),T_.RuleContext=void 0;const e=Oa(),t=Nu,i=Mf,s=un,n=Xe,o=Dh(),a=Uo();class l extends i.RuleNode{constructor(d,f){super(),this._parent=d,this.invokingState=f!=null?f:-1}static getChildContext(d,f){return new l(d,f)}depth(){let d=0,f=this;for(;f;)f=f._parent,d++;return d}get isEmpty(){return this.invokingState===-1}get sourceInterval(){return s.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}setParent(d){this._parent=d}get payload(){return this}get text(){if(this.childCount===0)return"";let d="";for(let f=0;f<this.childCount;f++)d+=this.getChild(f).text;return d.toString()}get ruleIndex(){return-1}get altNumber(){return e.ATN.INVALID_ALT_NUMBER}set altNumber(d){}getChild(d){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(d){return d.visitChildren(this)}toStringTree(d){return o.Trees.toStringTree(this,d)}toString(d,f){const g=d instanceof t.Recognizer?d.ruleNames:d;f=f||a.ParserRuleContext.emptyContext();let x="",E=this;for(x+="[";E&&E!==f;){if(!g)E.isEmpty||(x+=E.invokingState);else{let P=E.ruleIndex,b=P>=0&&P<g.length?g[P]:P.toString();x+=b}E._parent&&(g||!E._parent.isEmpty)&&(x+=" "),E=E._parent}return x+="]",x.toString()}}return r([n.Override],l.prototype,"sourceInterval",null),r([n.Override],l.prototype,"ruleContext",null),r([n.Override],l.prototype,"parent",null),r([n.Override],l.prototype,"setParent",null),r([n.Override],l.prototype,"payload",null),r([n.Override],l.prototype,"text",null),r([n.Override],l.prototype,"getChild",null),r([n.Override],l.prototype,"childCount",null),r([n.Override],l.prototype,"accept",null),r([n.Override],l.prototype,"toStringTree",null),T_.RuleContext=l,T_}var PR;function Uo(){if(PR)return k_;PR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(a,l,c,d){var f=arguments.length,g=f<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,c):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(a,l,c,d);else for(var E=a.length-1;E>=0;E--)(x=a[E])&&(g=(f<3?x(g):f>3?x(l,c,g):x(l,c))||g);return f>3&&g&&Object.defineProperty(l,c,g),g};Object.defineProperty(k_,"__esModule",{value:!0}),k_.ParserRuleContext=void 0;const e=Ff,t=un,i=Xe,s=sI(),n=Al;class o extends s.RuleContext{constructor(l,c){c==null?super():super(l,c)}static emptyContext(){return o.EMPTY}copyFrom(l){if(this._parent=l._parent,this.invokingState=l.invokingState,this._start=l._start,this._stop=l._stop,l.children){this.children=[];for(let c of l.children)c instanceof e.ErrorNode&&this.addChild(c)}}enterRule(l){}exitRule(l){}addAnyChild(l){return this.children?this.children.push(l):this.children=[l],l}addChild(l){if(l instanceof n.TerminalNode){l.setParent(this),this.addAnyChild(l);return}else if(l instanceof s.RuleContext){this.addAnyChild(l);return}else return l=new n.TerminalNode(l),this.addAnyChild(l),l.setParent(this),l}addErrorNode(l){if(l instanceof e.ErrorNode){const c=l;return c.setParent(this),this.addAnyChild(c)}else{const c=l;let d=new e.ErrorNode(c);return this.addAnyChild(d),d.setParent(this),d}}removeLastChild(){this.children&&this.children.pop()}get parent(){let l=super.parent;if(l===void 0||l instanceof o)return l;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(l,c){if(!this.children||l<0||l>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(c==null)return this.children[l];let d=this.tryGetChild(l,c);if(d===void 0)throw new Error("The specified node does not exist");return d}tryGetChild(l,c){if(!this.children||l<0||l>=this.children.length)return;let d=-1;for(let f of this.children)if(f instanceof c&&(d++,d===l))return f}getToken(l,c){let d=this.tryGetToken(l,c);if(d===void 0)throw new Error("The specified token does not exist");return d}tryGetToken(l,c){if(!this.children||c<0||c>=this.children.length)return;let d=-1;for(let f of this.children)if(f instanceof n.TerminalNode&&f.symbol.type===l&&(d++,d===c))return f}getTokens(l){let c=[];if(!this.children)return c;for(let d of this.children)d instanceof n.TerminalNode&&d.symbol.type===l&&c.push(d);return c}get ruleContext(){return this}getRuleContext(l,c){return this.getChild(l,c)}tryGetRuleContext(l,c){return this.tryGetChild(l,c)}getRuleContexts(l){let c=[];if(!this.children)return c;for(let d of this.children)d instanceof l&&c.push(d);return c}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?t.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):t.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):t.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(l){return"ParserRuleContext"+l.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}}return o.EMPTY=new o,r([i.Override],o.prototype,"parent",null),r([i.Override],o.prototype,"childCount",null),r([i.Override],o.prototype,"sourceInterval",null),k_.ParserRuleContext=o,k_}var oI={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionMode=void 0;const t=xl,i=ti,s=Xe,n=Fu;(function(o){o[o.SLL=0]="SLL",o[o.LL=1]="LL",o[o.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"})(r.PredictionMode||(r.PredictionMode={})),function(o){class a extends t.Array2DHashMap{constructor(){super(l.INSTANCE)}}class l{AltAndContextConfigEqualityComparator(){}hashCode(g){let x=i.MurmurHash.initialize(7);return x=i.MurmurHash.update(x,g.state.stateNumber),x=i.MurmurHash.update(x,g.context),x=i.MurmurHash.finish(x,2),x}equals(g,x){return g===x?!0:g==null||x==null?!1:g.state.stateNumber===x.state.stateNumber&&g.context.equals(x.context)}}l.INSTANCE=new l,e([s.Override],l.prototype,"hashCode",null),e([s.Override],l.prototype,"equals",null);function c(f){for(let g of f)if(g.state instanceof n.RuleStopState)return!0;return!1}o.hasConfigInRuleStopState=c;function d(f){for(let g of f)if(!(g.state instanceof n.RuleStopState))return!1;return!0}o.allConfigsInRuleStopStates=d}(r.PredictionMode||(r.PredictionMode={}))})(oI);var R_={},RR;function aI(){if(RR)return R_;RR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(R_,"__esModule",{value:!0}),R_.SimulatorState=void 0;const t=Xe,i=Uo();let s=class{constructor(o,a,l,c){this.outerContext=o!=null?o:i.ParserRuleContext.emptyContext(),this.s0=a,this.useContext=l,this.remainingOuterContext=c}};return s=r([e(1,t.NotNull)],s),R_.SimulatorState=s,R_}var DR;function Sg(){if(DR)return b_;DR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(bt,ee,ne,se){var Ee=arguments.length,Se=Ee<3?ee:se===null?se=Object.getOwnPropertyDescriptor(ee,ne):se,fe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Se=Reflect.decorate(bt,ee,ne,se);else for(var Pe=bt.length-1;Pe>=0;Pe--)(fe=bt[Pe])&&(Se=(Ee<3?fe(Se):Ee>3?fe(ee,ne,Se):fe(ee,ne))||Se);return Ee>3&&Se&&Object.defineProperty(ee,ne,Se),Se},e=$&&$.__param||function(bt,ee){return function(ne,se){ee(ne,se,bt)}};Object.defineProperty(b_,"__esModule",{value:!0}),b_.ParserATNSimulator=void 0;const t=sg,i=fg,s=Fo,n=v1,o=Oa(),a=wh,l=og(),c=b1(),d=ji,f=gg,g=Bo,x=U1,E=Da,P=A1(),b=Tf,D=un,C=ml,O=Xe,N=Cb(),j=ev(),I=Gs,M=Uo(),R=Mo(),L=Pb(),K=oI,Q=Fu,ue=Df,ae=vh,Re=Db(),Ue=aI(),rt=dr,Ve=yl,Fe=Us,nt=65535,dt=-(1<<31>>>0);let it=class $t extends c.ATNSimulator{constructor(ee,ne){super(ee),this.predictionMode=K.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=ne}getPredictionMode(){return this.predictionMode}setPredictionMode(ee){this.predictionMode=ee}reset(){}adaptivePredict(ee,ne,se,Ee){Ee===void 0&&(Ee=!1);let Se=this.atn.decisionToDFA[ne];if(Fe(Se!=null),this.optimize_ll1&&!Se.isPrecedenceDfa&&!Se.isEmpty){let Z=ee.LA(1);if(Z>=0&&Z<=65535){let Le=(ne<<16>>>0)+Z,F=this.atn.LL1Table.get(Le);if(F!=null)return F}}this.dfa=Se,this.force_global_context?Ee=!0:this.always_try_local_context||(Ee=Ee||Se.isContextSensitive),this.userWantsCtxSensitive=Ee||this.predictionMode!==K.PredictionMode.SLL&&se!=null&&!this.atn.decisionToState[ne].sll,se==null&&(se=M.ParserRuleContext.emptyContext());let fe;Se.isEmpty||(fe=this.getStartState(Se,ee,se,Ee)),fe==null&&(se==null&&(se=M.ParserRuleContext.emptyContext()),$t.debug&&console.log("ATN decision "+Se.decision+" exec LA(1)=="+this.getLookaheadName(ee)+", outerContext="+se.toString(this._parser)),fe=this.computeStartState(Se,se,Ee));let Pe=ee.mark(),He=ee.index;try{let Z=this.execDFA(Se,ee,He,fe);return $t.debug&&console.log("DFA after predictATN: "+Se.toString(this._parser.vocabulary,this._parser.ruleNames)),Z}finally{this.dfa=void 0,ee.seek(He),ee.release(Pe)}}getStartState(ee,ne,se,Ee){if(!Ee)if(ee.isPrecedenceDfa){let Pe=ee.getPrecedenceStartState(this._parser.precedence,!1);return Pe==null?void 0:new Ue.SimulatorState(se,Pe,!1,se)}else return ee.s0==null?void 0:new Ue.SimulatorState(se,ee.s0,!1,se);if(!this.enable_global_context_dfa)return;let Se=se;Fe(se!=null);let fe;for(ee.isPrecedenceDfa?fe=ee.getPrecedenceStartState(this._parser.precedence,!0):fe=ee.s0full;Se!=null&&fe!=null&&fe.isContextSensitive;)Se=this.skipTailCalls(Se),fe=fe.getContextTarget(this.getReturnState(Se)),Se.isEmpty?Fe(fe==null||!fe.isContextSensitive):Se=Se.parent;if(fe!=null)return new Ue.SimulatorState(se,fe,Ee,Se)}execDFA(ee,ne,se,Ee){let Se=Ee.outerContext;$t.dfa_debug&&console.log("DFA decision "+ee.decision+" exec LA(1)=="+this.getLookaheadName(ne)+", outerContext="+Se.toString(this._parser)),$t.dfa_debug&&console.log(ee.toString(this._parser.vocabulary,this._parser.ruleNames));let fe=Ee.s0,Pe=ne.LA(1),He=Ee.remainingOuterContext;for(;;){if($t.dfa_debug&&console.log("DFA state "+fe.stateNumber+" LA(1)=="+this.getLookaheadName(ne)),Ee.useContext)for(;fe.isContextSymbol(Pe);){let F;if(He!=null&&(He=this.skipTailCalls(He),F=fe.getContextTarget(this.getReturnState(He))),F==null){let z=new Ue.SimulatorState(Ee.outerContext,fe,Ee.useContext,He);return this.execATN(ee,ne,se,z)}Fe(He!=null),He=He.parent,fe=F}if(this.isAcceptState(fe,Ee.useContext)){fe.predicates!=null?$t.dfa_debug&&console.log("accept "+fe):$t.dfa_debug&&console.log("accept; predict "+fe.prediction+" in state "+fe.stateNumber);break}Fe(!this.isAcceptState(fe,Ee.useContext));let Le=this.getExistingTargetState(fe,Pe);if(Le==null){$t.dfa_debug&&Pe>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName(Pe));let F;if($t.dfa_debug){let W=D.Interval.of(se,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText(W)+" at DFA state "+fe.stateNumber)}let z=new Ue.SimulatorState(Se,fe,Ee.useContext,He);return F=this.execATN(ee,ne,se,z),$t.dfa_debug&&console.log("back from DFA update, alt="+F+`, dfa=
`+ee.toString(this._parser.vocabulary,this._parser.ruleNames)),$t.dfa_debug&&console.log("DFA decision "+ee.decision+" predicts "+F),F}else if(Le===c.ATNSimulator.ERROR){let F=new Ue.SimulatorState(Se,fe,Ee.useContext,He);return this.handleNoViableAlt(ne,se,F)}fe=Le,!this.isAcceptState(fe,Ee.useContext)&&Pe!==C.IntStream.EOF&&(ne.consume(),Pe=ne.LA(1))}if(!Ee.useContext&&fe.configs.conflictInfo!=null&&ee.atnStartState instanceof E.DecisionState&&!(!this.userWantsCtxSensitive||!fe.configs.dipsIntoOuterContext&&fe.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&ne.index===se)){Fe(!Ee.useContext);let Le,F=fe.predicates;if(F!=null){let z=ne.index;if(z!==se&&ne.seek(se),Le=this.evalSemanticContext(F,Se,!0),Le.cardinality()===1)return Le.nextSetBit(0);z!==se&&ne.seek(z)}if(this.reportAmbiguities){let z=new Ue.SimulatorState(Se,fe,Ee.useContext,He);this.reportAttemptingFullContext(ee,Le,z,se,ne.index)}return ne.seek(se),this.adaptivePredict(ne,ee.decision,Se,!0)}let Z=fe.predicates;if(Z!=null){let Le=ne.index;se!==Le&&ne.seek(se);let F=this.evalSemanticContext(Z,Se,this.reportAmbiguities&&this.predictionMode===K.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch(F.cardinality()){case 0:throw this.noViableAlt(ne,Se,fe.configs,se);case 1:return F.nextSetBit(0);default:return se!==Le&&ne.seek(Le),this.reportAmbiguity(ee,fe,se,Le,fe.configs.isExactConflict,F,fe.configs),F.nextSetBit(0)}}return $t.dfa_debug&&console.log("DFA decision "+ee.decision+" predicts "+fe.prediction),fe.prediction}isAcceptState(ee,ne){return ee.isAcceptState?ee.configs.conflictingAlts==null?!0:ne&&this.predictionMode===K.PredictionMode.LL_EXACT_AMBIG_DETECTION?ee.configs.isExactConflict:!0:!1}execATN(ee,ne,se,Ee){$t.debug&&console.log("execATN decision "+ee.decision+" exec LA(1)=="+this.getLookaheadName(ne));let Se=Ee.outerContext,fe=Ee.useContext,Pe=ne.LA(1),He=Ee,Z=new L.PredictionContextCache;for(;;){let Le=this.computeReachSet(ee,He,Pe,Z);if(Le==null)return this.setDFAEdge(He.s0,ne.LA(1),c.ATNSimulator.ERROR),this.handleNoViableAlt(ne,se,He);let F=Le.s0;if(Fe(F.isAcceptState||F.prediction===o.ATN.INVALID_ALT_NUMBER),Fe(F.isAcceptState||F.configs.conflictInfo==null),this.isAcceptState(F,fe)){let z=F.configs.conflictingAlts,W=z==null?F.prediction:o.ATN.INVALID_ALT_NUMBER;if(W!==o.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&ne.index===se&&!ee.isPrecedenceDfa&&Le.outerContext===Le.remainingOuterContext&&ee.decision>=0&&!F.configs.hasSemanticContext&&Pe>=0&&Pe<=nt){let de=(ee.decision<<16>>>0)+Pe;this.atn.LL1Table.set(de,W)}fe&&this.always_try_local_context&&this.reportContextSensitivity(ee,W,Le,se,ne.index)}W=F.prediction;let te=z!=null&&this.userWantsCtxSensitive;if(te&&(te=!fe&&(F.configs.dipsIntoOuterContext||!F.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||ne.index!==se)),F.configs.hasSemanticContext){let de=F.predicates;if(de!=null){let ye=ne.index;switch(ye!==se&&ne.seek(se),z=this.evalSemanticContext(de,Se,te||this.reportAmbiguities),z.cardinality()){case 0:throw this.noViableAlt(ne,Se,F.configs,se);case 1:return z.nextSetBit(0)}ye!==se&&ne.seek(ye)}}if(te){Fe(!fe),Fe(this.isAcceptState(F,!1)),$t.debug&&console.log("RETRY with outerContext="+Se);let de=this.computeStartState(ee,Se,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(ee,z,Le,se,ne.index),ne.seek(se),this.execATN(ee,ne,se,de)}else return z!=null&&(this.reportAmbiguities&&z.cardinality()>1&&this.reportAmbiguity(ee,F,se,ne.index,F.configs.isExactConflict,z,F.configs),W=z.nextSetBit(0)),W}He=Le,Pe!==C.IntStream.EOF&&(ne.consume(),Pe=ne.LA(1))}}handleNoViableAlt(ee,ne,se){if(se.s0!=null){let Ee=new g.BitSet,Se=0;for(let fe of se.s0.configs)(fe.reachesIntoOuterContext||fe.state instanceof Q.RuleStopState)&&(Ee.set(fe.alt),Se=Math.max(Se,fe.alt));switch(Ee.cardinality()){case 0:break;case 1:return Ee.nextSetBit(0);default:if(!se.s0.configs.hasSemanticContext)return Ee.nextSetBit(0);let fe=new l.ATNConfigSet;for(let He of se.s0.configs)(He.reachesIntoOuterContext||He.state instanceof Q.RuleStopState)&&fe.add(He);let Pe=this.getPredsForAmbigAlts(Ee,fe,Se);if(Pe!=null){let He=this.getPredicatePredictions(Ee,Pe);if(He!=null){let Z=ee.index;try{ee.seek(ne);let Le=this.evalSemanticContext(He,se.outerContext,!1);if(!Le.isEmpty)return Le.nextSetBit(0)}finally{ee.seek(Z)}}}return Ee.nextSetBit(0)}}throw this.noViableAlt(ee,se.outerContext,se.s0.configs,ne)}computeReachSet(ee,ne,se,Ee){let Se=ne.useContext,fe=ne.remainingOuterContext,Pe=ne.s0;if(Se)for(;Pe.isContextSymbol(se);){let Le;if(fe!=null&&(fe=this.skipTailCalls(fe),Le=Pe.getContextTarget(this.getReturnState(fe))),Le==null)break;Fe(fe!=null),fe=fe.parent,Pe=Le}if(Fe(!this.isAcceptState(Pe,Se)),this.isAcceptState(Pe,Se))return new Ue.SimulatorState(ne.outerContext,Pe,Se,fe);let He=Pe,Z=this.getExistingTargetState(He,se);if(Z==null){let Le=this.computeTargetState(ee,He,fe,se,Se,Ee);Z=Le[0],fe=Le[1]}if(Z!==c.ATNSimulator.ERROR)return Fe(!Se||!Z.configs.dipsIntoOuterContext),new Ue.SimulatorState(ne.outerContext,Z,Se,fe)}getExistingTargetState(ee,ne){return ee.getTarget(ne)}computeTargetState(ee,ne,se,Ee,Se,fe){let Pe=ne.configs.toArray(),He,Z=new l.ATNConfigSet,Le;do{let z=!Se||se!=null;z||(Z.isOutermostConfigSet=!0);let W=new l.ATNConfigSet,te;for(let oe of Pe){if($t.debug&&console.log("testing "+this.getTokenName(Ee)+" at "+oe.toString()),oe.state instanceof Q.RuleStopState){Fe(oe.context.isEmpty),(Se&&!oe.reachesIntoOuterContext||Ee===C.IntStream.EOF)&&(te==null&&(te=[]),te.push(oe));continue}let le=oe.state.numberOfOptimizedTransitions;for(let we=0;we<le;we++){let De=oe.state.getOptimizedTransition(we),Ye=this.getReachableTarget(oe,De,Ee);Ye!=null&&W.add(oe.transform(Ye,!1),fe)}}if(this.optimize_unique_closure&&te==null&&Ee!==rt.Token.EOF&&W.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER){W.isOutermostConfigSet=Z.isOutermostConfigSet,Z=W;break}let de=!1,ye=Ee===rt.Token.EOF;if(this.closure(W,Z,de,z,fe,ye),Le=Z.dipsIntoOuterContext,Ee===C.IntStream.EOF&&(Z=this.removeAllConfigsNotInRuleStopState(Z,fe)),te!=null&&(!Se||!K.PredictionMode.hasConfigInRuleStopState(Z))){Fe(te.length>0);for(let oe of te)Z.add(oe,fe)}if(Se&&Le){Z.clear(),se=se,se=this.skipTailCalls(se);let oe=this.getReturnState(se);if(He==null&&(He=new b.IntegerList),se.isEmpty?se=void 0:se=se.parent,He.add(oe),oe!==R.PredictionContext.EMPTY_FULL_STATE_KEY)for(let le=0;le<Pe.length;le++)Pe[le]=Pe[le].appendContext(oe,fe)}}while(Se&&Le);return Z.isEmpty?(this.setDFAEdge(ne,Ee,c.ATNSimulator.ERROR),[c.ATNSimulator.ERROR,se]):[this.addDFAEdge(ee,ne,Ee,He,Z,fe),se]}removeAllConfigsNotInRuleStopState(ee,ne){if(K.PredictionMode.allConfigsInRuleStopStates(ee))return ee;let se=new l.ATNConfigSet;for(let Ee of ee)Ee.state instanceof Q.RuleStopState&&se.add(Ee,ne);return se}computeStartState(ee,ne,se){let Ee=ee.isPrecedenceDfa?ee.getPrecedenceStartState(this._parser.precedence,se):se?ee.s0full:ee.s0;if(Ee!=null){if(!se)return new Ue.SimulatorState(ne,Ee,se,ne);Ee.setContextSensitive(this.atn)}ee.decision;let Se=ee.atnStartState,fe=0,Pe=ne,He=se?R.PredictionContext.EMPTY_FULL:R.PredictionContext.EMPTY_LOCAL,Z=new L.PredictionContextCache;if(se){if(!this.enable_global_context_dfa)for(;Pe!=null;)Pe.isEmpty?(fe=R.PredictionContext.EMPTY_FULL_STATE_KEY,Pe=void 0):(fe=this.getReturnState(Pe),He=He.appendSingleContext(fe,Z),Pe=Pe.parent);for(;Ee!=null&&Ee.isContextSensitive&&Pe!=null;){let F;if(Pe=this.skipTailCalls(Pe),Pe.isEmpty?(F=Ee.getContextTarget(R.PredictionContext.EMPTY_FULL_STATE_KEY),fe=R.PredictionContext.EMPTY_FULL_STATE_KEY,Pe=void 0):(fe=this.getReturnState(Pe),F=Ee.getContextTarget(fe),He=He.appendSingleContext(fe,Z),Pe=Pe.parent),F==null)break;Ee=F}}if(Ee!=null&&!Ee.isContextSensitive)return new Ue.SimulatorState(ne,Ee,se,Pe);let Le=new l.ATNConfigSet;for(;;){let F=new l.ATNConfigSet,z=Se.numberOfTransitions;for(let le=0;le<z;le++){let we=Se.transition(le).target;F.add(a.ATNConfig.create(we,le+1,He))}let W=Pe!=null;W||(Le.isOutermostConfigSet=!0);let te=!0;this.closure(F,Le,te,W,Z,!1);let de=Le.dipsIntoOuterContext,ye;if(se&&!this.enable_global_context_dfa){Ee=this.addDFAState(ee,Le,Z);break}else Ee==null?ee.isPrecedenceDfa?(Le=this.applyPrecedenceFilter(Le,ne,Z),ye=this.addDFAState(ee,Le,Z),ee.setPrecedenceStartState(this._parser.precedence,se,ye)):(ye=this.addDFAState(ee,Le,Z),se?ee.s0full?ye=ee.s0full:ee.s0full=ye:ee.s0?ye=ee.s0:ee.s0=ye):(ee.isPrecedenceDfa&&(Le=this.applyPrecedenceFilter(Le,ne,Z)),ye=this.addDFAState(ee,Le,Z),Ee.setContextTarget(fe,ye));if(Ee=ye,!se||!de)break;ye.setContextSensitive(this.atn),Pe=Pe,Le.clear(),Pe=this.skipTailCalls(Pe);let oe=this.getReturnState(Pe);Pe.isEmpty?Pe=void 0:Pe=Pe.parent,oe!==R.PredictionContext.EMPTY_FULL_STATE_KEY&&(He=He.appendSingleContext(oe,Z)),fe=oe}return new Ue.SimulatorState(ne,Ee,se,Pe)}applyPrecedenceFilter(ee,ne,se){let Ee=new Map,Se=new l.ATNConfigSet;for(let fe of ee){if(fe.alt!==1)continue;let Pe=fe.semanticContext.evalPrecedence(this._parser,ne);Pe!=null&&(Ee.set(fe.state.stateNumber,fe.context),Pe!==fe.semanticContext?Se.add(fe.transform(fe.state,!1,Pe),se):Se.add(fe,se))}for(let fe of ee)if(fe.alt!==1){if(!fe.isPrecedenceFilterSuppressed){let Pe=Ee.get(fe.state.stateNumber);if(Pe!=null&&Pe.equals(fe.context))continue}Se.add(fe,se)}return Se}getReachableTarget(ee,ne,se){if(ne.matches(se,0,this.atn.maxTokenType))return ne.target}predicateDFAState(ee,ne,se){let Ee=this.getConflictingAltsFromConfigSet(ne);if(!Ee)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");$t.debug&&console.log("predicateDFAState "+ee);let Se=this.getPredsForAmbigAlts(Ee,ne,se),fe;return Se!=null&&(fe=this.getPredicatePredictions(Ee,Se),ee.predicates=fe),fe}getPredsForAmbigAlts(ee,ne,se){let Ee=new Array(se+1),Se=Ee.length;for(let He of ne)ee.get(He.alt)&&(Ee[He.alt]=ae.SemanticContext.or(Ee[He.alt],He.semanticContext));let fe=0;for(let He=0;He<Se;He++)Ee[He]==null?Ee[He]=ae.SemanticContext.NONE:Ee[He]!==ae.SemanticContext.NONE&&fe++;let Pe=Ee;return fe===0&&(Pe=void 0),$t.debug&&console.log("getPredsForAmbigAlts result "+(Pe?n.Arrays.toString(Pe):"undefined")),Pe}getPredicatePredictions(ee,ne){let se=[],Ee=!1;for(let Se=1;Se<ne.length;Se++){let fe=ne[Se];Fe(fe!=null),ee!=null&&ee.get(Se)&&fe===ae.SemanticContext.NONE?se.push(new P.DFAState.PredPrediction(fe,Se)):fe!==ae.SemanticContext.NONE&&(Ee=!0,se.push(new P.DFAState.PredPrediction(fe,Se)))}if(!!Ee)return se}evalSemanticContext(ee,ne,se){let Ee=new g.BitSet;for(let Se of ee){if(Se.pred===ae.SemanticContext.NONE){if(Ee.set(Se.alt),!se)break;continue}let fe=this.evalSemanticContextImpl(Se.pred,ne,Se.alt);if(($t.debug||$t.dfa_debug)&&console.log("eval pred "+Se+"="+fe),fe&&(($t.debug||$t.dfa_debug)&&console.log("PREDICT "+Se.alt),Ee.set(Se.alt),!se))break}return Ee}evalSemanticContextImpl(ee,ne,se){return ee.eval(this._parser,ne)}closure(ee,ne,se,Ee,Se,fe){Se==null&&(Se=L.PredictionContextCache.UNCACHED);let Pe=ee,He=new s.Array2DHashSet(I.ObjectEqualityComparator.INSTANCE);for(;Pe.size>0;){let Z=new l.ATNConfigSet;for(let Le of Pe)this.closureImpl(Le,ne,Z,He,se,Ee,Se,0,fe);Pe=Z}}closureImpl(ee,ne,se,Ee,Se,fe,Pe,He,Z){if($t.debug&&console.log("closure("+ee.toString(this._parser,!0)+")"),ee.state instanceof Q.RuleStopState)if(ee.context.isEmpty)if(fe)$t.debug&&console.log("FALLING off rule "+this.getRuleName(ee.state.ruleIndex)),ee.context===R.PredictionContext.EMPTY_FULL?ee=ee.transform(ee.state,!1,R.PredictionContext.EMPTY_LOCAL):!ee.reachesIntoOuterContext&&R.PredictionContext.isEmptyLocal(ee.context)&&ne.add(ee,Pe);else{ne.add(ee,Pe);return}else{let F=ee.context.hasEmpty,z=ee.context.size-(F?1:0);for(let W=0;W<z;W++){let te=ee.context.getParent(W),de=this.atn.states[ee.context.getReturnState(W)],ye=a.ATNConfig.create(de,ee.alt,te,ee.semanticContext);ye.outerContextDepth=ee.outerContextDepth,ye.isPrecedenceFilterSuppressed=ee.isPrecedenceFilterSuppressed,Fe(He>dt),this.closureImpl(ye,ne,se,Ee,Se,fe,Pe,He-1,Z)}if(!F||!fe)return;ee=ee.transform(ee.state,!1,R.PredictionContext.EMPTY_LOCAL)}let Le=ee.state;Le.onlyHasEpsilonTransitions||(ne.add(ee,Pe),$t.debug&&console.log("added config "+ne));for(let F=0;F<Le.numberOfOptimizedTransitions;F++){if(F===0&&Le.stateType===d.ATNStateType.STAR_LOOP_ENTRY&&Le.precedenceRuleDecision&&!ee.context.hasEmpty){let de=Le,ye=!0;for(let oe=0;oe<ee.context.size;oe++)if(!de.precedenceLoopbackStates.get(ee.context.getReturnState(oe))){ye=!1;break}if(ye)continue}let z=Le.getOptimizedTransition(F),W=!(z instanceof i.ActionTransition)&&Se,te=this.getEpsilonTarget(ee,z,W,He===0,Pe,Z);if(te!=null){if(z instanceof ue.RuleTransition&&se!=null&&!Se){se.add(te,Pe);continue}let de=He;if(ee.state instanceof Q.RuleStopState){if(this.dfa!=null&&this.dfa.isPrecedenceDfa&&z.outermostPrecedenceReturn===this.dfa.atnStartState.ruleIndex&&(te.isPrecedenceFilterSuppressed=!0),te.outerContextDepth=te.outerContextDepth+1,!Ee.add(te))continue;Fe(de>dt),de--,$t.debug&&console.log("dips into outer ctx: "+te)}else if(z instanceof ue.RuleTransition)this.optimize_tail_calls&&z.optimizedTailCall&&(!this.tail_call_preserves_sll||!R.PredictionContext.isEmptyLocal(ee.context))?(Fe(te.context===ee.context),de===0&&(de--,!this.tail_call_preserves_sll&&R.PredictionContext.isEmptyLocal(ee.context)&&(te.outerContextDepth=te.outerContextDepth+1))):de>=0&&de++;else if(!z.isEpsilon&&!Ee.add(te))continue;this.closureImpl(te,ne,se,Ee,W,fe,Pe,de,Z)}}}getRuleName(ee){return this._parser!=null&&ee>=0?this._parser.ruleNames[ee]:"<rule "+ee+">"}getEpsilonTarget(ee,ne,se,Ee,Se,fe){switch(ne.serializationType){case 3:return this.ruleTransition(ee,ne,Se);case 10:return this.precedenceTransition(ee,ne,se,Ee);case 4:return this.predTransition(ee,ne,se,Ee);case 6:return this.actionTransition(ee,ne);case 1:return ee.transform(ne.target,!1);case 5:case 2:case 7:return fe&&ne.matches(rt.Token.EOF,0,1)?ee.transform(ne.target,!1):void 0;default:return}}actionTransition(ee,ne){return $t.debug&&console.log("ACTION edge "+ne.ruleIndex+":"+ne.actionIndex),ee.transform(ne.target,!1)}precedenceTransition(ee,ne,se,Ee){$t.debug&&(console.log("PRED (collectPredicates="+se+") "+ne.precedence+">=_p, ctx dependent=true"),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let Se;if(se&&Ee){let fe=ae.SemanticContext.and(ee.semanticContext,ne.predicate);Se=ee.transform(ne.target,!1,fe)}else Se=ee.transform(ne.target,!1);return $t.debug&&console.log("config from pred transition="+Se),Se}predTransition(ee,ne,se,Ee){$t.debug&&(console.log("PRED (collectPredicates="+se+") "+ne.ruleIndex+":"+ne.predIndex+", ctx dependent="+ne.isCtxDependent),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let Se;if(se&&(!ne.isCtxDependent||ne.isCtxDependent&&Ee)){let fe=ae.SemanticContext.and(ee.semanticContext,ne.predicate);Se=ee.transform(ne.target,!1,fe)}else Se=ee.transform(ne.target,!1);return $t.debug&&console.log("config from pred transition="+Se),Se}ruleTransition(ee,ne,se){$t.debug&&console.log("CALL rule "+this.getRuleName(ne.target.ruleIndex)+", ctx="+ee.context);let Ee=ne.followState,Se;return this.optimize_tail_calls&&ne.optimizedTailCall&&(!this.tail_call_preserves_sll||!R.PredictionContext.isEmptyLocal(ee.context))?Se=ee.context:se!=null?Se=se.getChild(ee.context,Ee.stateNumber):Se=ee.context.getChild(Ee.stateNumber),ee.transform(ne.target,!1,Se)}isConflicted(ee,ne){if(ee.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER||ee.size<=1)return;let se=ee.toArray();se.sort($t.STATE_ALT_SORT_COMPARATOR);let Ee=!ee.dipsIntoOuterContext,Se=new g.BitSet,fe=se[0].alt;Se.set(fe);let Pe=se[0].state.nonStopStateNumber;for(let z of se){let W=z.state.nonStopStateNumber;if(W!==Pe){if(z.alt!==fe)return;Pe=W}}let He;if(Ee){Pe=se[0].state.nonStopStateNumber,He=new g.BitSet;let z=fe;for(let te of se){if(te.state.nonStopStateNumber!==Pe)break;let de=te.alt;He.set(de),z=de}Pe=se[0].state.nonStopStateNumber;let W=fe;for(let te of se){let de=te.state.nonStopStateNumber,ye=te.alt;if(de!==Pe){if(W!==z){Ee=!1;break}Pe=de,W=fe}else if(ye!==W){if(ye!==He.nextSetBit(W+1)){Ee=!1;break}W=ye}}}Pe=se[0].state.nonStopStateNumber;let Z=0,Le=0,F=se[0].context;for(let z=1;z<se.length;z++){let W=se[z];if(W.alt!==fe||W.state.nonStopStateNumber!==Pe)break;Le=z,F=ne.join(F,se[z].context)}for(let z=Le+1;z<se.length;z++){let W=se[z],te=W.state;if(Se.set(W.alt),te.nonStopStateNumber!==Pe){Pe=te.nonStopStateNumber,Z=z,Le=z,F=W.context;for(let we=Z+1;we<se.length;we++){let De=se[we];if(De.alt!==fe||De.state.nonStopStateNumber!==Pe)break;Le=we,F=ne.join(F,De.context)}z=Le;continue}let de=W.context,ye=W.alt,oe=z;for(let we=oe+1;we<se.length;we++){let De=se[we];if(De.alt!==ye||De.state.nonStopStateNumber!==Pe)break;oe=we,de=ne.join(de,De.context)}z=oe;let le=ne.join(F,de);if(!F.equals(le))return;Ee=Ee&&F.equals(de)}return new x.ConflictInfo(Se,Ee)}getConflictingAltsFromConfigSet(ee){let ne=ee.conflictingAlts;return ne==null&&ee.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER&&(ne=new g.BitSet,ne.set(ee.uniqueAlt)),ne}getTokenName(ee){if(ee===rt.Token.EOF)return"EOF";let se=(this._parser!=null?this._parser.vocabulary:Ve.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(ee);return se===String(ee)?se:se+"<"+ee+">"}getLookaheadName(ee){return this.getTokenName(ee.LA(1))}dumpDeadEndConfigs(ee){console.log("dead end configs: ");let ne=ee.deadEndConfigs;if(!!ne)for(let se of ne){let Ee="no edges";if(se.state.numberOfOptimizedTransitions>0){let Se=se.state.getOptimizedTransition(0);Se instanceof f.AtomTransition?Ee="Atom "+this.getTokenName(Se._label):Se instanceof Re.SetTransition&&(Ee=(Se instanceof N.NotSetTransition?"~":"")+"Set "+Se.set.toString())}console.log(se.toString(this._parser,!0)+":"+Ee)}}noViableAlt(ee,ne,se,Ee){return new j.NoViableAltException(this._parser,ee,ee.get(Ee),ee.LT(1),se,ne)}getUniqueAlt(ee){let ne=o.ATN.INVALID_ALT_NUMBER;for(let se of ee)if(ne===o.ATN.INVALID_ALT_NUMBER)ne=se.alt;else if(se.alt!==ne)return o.ATN.INVALID_ALT_NUMBER;return ne}configWithAltAtStopState(ee,ne){for(let se of ee)if(se.alt===ne&&se.state instanceof Q.RuleStopState)return!0;return!1}addDFAEdge(ee,ne,se,Ee,Se,fe){Fe(Ee==null||Ee.isEmpty||ee.isContextSensitive);let Pe=ne,He=this.addDFAState(ee,Se,fe);if(Ee!=null)for(let Z of Ee.toArray()){if(Z===R.PredictionContext.EMPTY_FULL_STATE_KEY&&Pe.configs.isOutermostConfigSet)continue;Pe.setContextSensitive(this.atn),Pe.setContextSymbol(se);let Le=Pe.getContextTarget(Z);if(Le!=null){Pe=Le;continue}Le=this.addDFAContextState(ee,Pe.configs,Z,fe),Fe(Z!==R.PredictionContext.EMPTY_FULL_STATE_KEY||Le.configs.isOutermostConfigSet),Pe.setContextTarget(Z,Le),Pe=Le}return $t.debug&&console.log("EDGE "+Pe+" -> "+He+" upon "+this.getTokenName(se)),this.setDFAEdge(Pe,se,He),$t.debug&&console.log(`DFA=
`+ee.toString(this._parser!=null?this._parser.vocabulary:Ve.VocabularyImpl.EMPTY_VOCABULARY,this._parser!=null?this._parser.ruleNames:void 0)),He}setDFAEdge(ee,ne,se){ee!=null&&ee.setTarget(ne,se)}addDFAContextState(ee,ne,se,Ee){if(se!==R.PredictionContext.EMPTY_FULL_STATE_KEY){let Se=new l.ATNConfigSet;for(let fe of ne)Se.add(fe.appendContext(se,Ee));return this.addDFAState(ee,Se,Ee)}else return Fe(!ne.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),ne=ne.clone(!0),ne.isOutermostConfigSet=!0,this.addDFAState(ee,ne,Ee)}addDFAState(ee,ne,se){let Ee=this.enable_global_context_dfa||!ne.isOutermostConfigSet;if(Ee){ne.isReadOnly||ne.optimizeConfigs(this);let Z=this.createDFAState(ee,ne),Le=ee.states.get(Z);if(Le!=null)return Le}ne.isReadOnly||ne.conflictInfo==null&&(ne.conflictInfo=this.isConflicted(ne,se));let Se=this.createDFAState(ee,ne.clone(!0)),fe=this.atn.getDecisionState(ee.decision),Pe=this.getUniqueAlt(ne);if(Pe!==o.ATN.INVALID_ALT_NUMBER)Se.acceptStateInfo=new t.AcceptStateInfo(Pe);else if(ne.conflictingAlts!=null){let Z=ne.conflictingAlts;Z&&(Se.acceptStateInfo=new t.AcceptStateInfo(Z.nextSetBit(0)))}if(Se.isAcceptState&&ne.hasSemanticContext&&this.predicateDFAState(Se,ne,fe.numberOfTransitions),!Ee)return Se;let He=ee.addState(Se);return $t.debug&&He===Se&&console.log("adding new DFA state: "+Se),He}createDFAState(ee,ne){return new P.DFAState(ne)}reportAttemptingFullContext(ee,ne,se,Ee,Se){if($t.debug||$t.retry_debug){let fe=D.Interval.of(Ee,Se);console.log("reportAttemptingFullContext decision="+ee.decision+":"+se.s0.configs+", input="+this._parser.inputStream.getText(fe))}if(this._parser!=null){let fe=this._parser.getErrorListenerDispatch();fe.reportAttemptingFullContext&&fe.reportAttemptingFullContext(this._parser,ee,Ee,Se,ne,se)}}reportContextSensitivity(ee,ne,se,Ee,Se){if($t.debug||$t.retry_debug){let fe=D.Interval.of(Ee,Se);console.log("reportContextSensitivity decision="+ee.decision+":"+se.s0.configs+", input="+this._parser.inputStream.getText(fe))}if(this._parser!=null){let fe=this._parser.getErrorListenerDispatch();fe.reportContextSensitivity&&fe.reportContextSensitivity(this._parser,ee,Ee,Se,ne,se)}}reportAmbiguity(ee,ne,se,Ee,Se,fe,Pe){if($t.debug||$t.retry_debug){let He=D.Interval.of(se,Ee);console.log("reportAmbiguity "+fe+":"+Pe+", input="+this._parser.inputStream.getText(He))}if(this._parser!=null){let He=this._parser.getErrorListenerDispatch();He.reportAmbiguity&&He.reportAmbiguity(this._parser,ee,se,Ee,Se,fe,Pe)}}getReturnState(ee){return ee.isEmpty?R.PredictionContext.EMPTY_FULL_STATE_KEY:this.atn.states[ee.invokingState].transition(0).followState.stateNumber}skipTailCalls(ee){if(!this.optimize_tail_calls)return ee;for(;!ee.isEmpty;){let ne=this.atn.states[ee.invokingState];if(Fe(ne.numberOfTransitions===1&&ne.transition(0).serializationType===3),!ne.transition(0).tailCall)break;ee=ee.parent}return ee}get parser(){return this._parser}};return it.debug=!1,it.dfa_debug=!1,it.retry_debug=!1,it.STATE_ALT_SORT_COMPARATOR=(bt,ee)=>{let ne=bt.state.nonStopStateNumber-ee.state.nonStopStateNumber;return ne!==0||(ne=bt.alt-ee.alt,ne!==0)?ne:0},r([O.NotNull],it.prototype,"predictionMode",void 0),r([O.NotNull],it.prototype,"getPredictionMode",null),r([e(0,O.NotNull)],it.prototype,"setPredictionMode",null),r([O.Override],it.prototype,"reset",null),r([e(0,O.NotNull)],it.prototype,"adaptivePredict",null),r([e(0,O.NotNull),e(1,O.NotNull),e(2,O.NotNull)],it.prototype,"getStartState",null),r([e(0,O.NotNull),e(1,O.NotNull),e(3,O.NotNull)],it.prototype,"execDFA",null),r([e(0,O.NotNull),e(1,O.NotNull),e(3,O.NotNull)],it.prototype,"execATN",null),r([e(0,O.NotNull),e(2,O.NotNull)],it.prototype,"handleNoViableAlt",null),r([e(0,O.NotNull)],it.prototype,"getExistingTargetState",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"computeTargetState",null),r([O.NotNull,e(0,O.NotNull)],it.prototype,"removeAllConfigsNotInRuleStopState",null),r([O.NotNull],it.prototype,"computeStartState",null),r([O.NotNull,e(0,O.NotNull)],it.prototype,"applyPrecedenceFilter",null),r([e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"getReachableTarget",null),r([e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"getPredsForAmbigAlts",null),r([e(0,O.NotNull)],it.prototype,"evalSemanticContext",null),r([e(0,O.NotNull)],it.prototype,"evalSemanticContextImpl",null),r([e(1,O.NotNull),e(4,O.Nullable)],it.prototype,"closure",null),r([e(0,O.NotNull),e(1,O.NotNull),e(2,O.Nullable),e(3,O.NotNull),e(6,O.NotNull)],it.prototype,"closureImpl",null),r([O.NotNull],it.prototype,"getRuleName",null),r([e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"getEpsilonTarget",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"actionTransition",null),r([O.Nullable,e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"precedenceTransition",null),r([O.Nullable,e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"predTransition",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull),e(2,O.Nullable)],it.prototype,"ruleTransition",null),r([e(0,O.NotNull)],it.prototype,"isConflicted",null),r([O.NotNull],it.prototype,"getTokenName",null),r([e(0,O.NotNull)],it.prototype,"dumpDeadEndConfigs",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull),e(2,O.NotNull)],it.prototype,"noViableAlt",null),r([e(0,O.NotNull)],it.prototype,"getUniqueAlt",null),r([e(0,O.NotNull)],it.prototype,"configWithAltAtStopState",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull),e(4,O.NotNull)],it.prototype,"addDFAEdge",null),r([e(0,O.Nullable),e(2,O.Nullable)],it.prototype,"setDFAEdge",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"addDFAContextState",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"addDFAState",null),r([O.NotNull,e(0,O.NotNull),e(1,O.NotNull)],it.prototype,"createDFAState",null),r([e(0,O.NotNull),e(2,O.NotNull)],it.prototype,"reportAttemptingFullContext",null),r([e(0,O.NotNull),e(2,O.NotNull)],it.prototype,"reportContextSensitivity",null),r([e(0,O.NotNull),e(5,O.NotNull),e(6,O.NotNull)],it.prototype,"reportAmbiguity",null),it=r([e(0,O.NotNull)],it),b_.ParserATNSimulator=it,b_}var G1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var zH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(G1,"__esModule",{value:!0});G1.PlusBlockStartState=void 0;const HH=ji,jH=Rh,VH=Xe;class lI extends jH.BlockStartState{get stateType(){return HH.ATNStateType.PLUS_BLOCK_START}}zH([VH.Override],lI.prototype,"stateType",null);G1.PlusBlockStartState=lI;var z1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var WH=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(z1,"__esModule",{value:!0});z1.PlusLoopbackState=void 0;const $H=ji,KH=Da,XH=Xe;class uI extends KH.DecisionState{get stateType(){return $H.ATNStateType.PLUS_LOOP_BACK}}WH([XH.Override],uI.prototype,"stateType",null);z1.PlusLoopbackState=uI;var H1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var wg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},YH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(H1,"__esModule",{value:!0});H1.PrecedencePredicateTransition=void 0;const qH=kf,Ag=Xe,QH=vh;let lh=class extends qH.AbstractPredicateTransition{constructor(e,t){super(e),this.precedence=t}get serializationType(){return 10}get isEpsilon(){return!0}matches(e,t,i){return!1}get predicate(){return new QH.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};wg([Ag.Override],lh.prototype,"serializationType",null);wg([Ag.Override],lh.prototype,"isEpsilon",null);wg([Ag.Override],lh.prototype,"matches",null);wg([Ag.Override],lh.prototype,"toString",null);lh=wg([YH(0,Ag.NotNull)],lh);H1.PrecedencePredicateTransition=lh;var j1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var bg=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},JH=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(j1,"__esModule",{value:!0});j1.RangeTransition=void 0;const ZH=Ph(),uh=Xe,ej=Io;let ch=class extends ej.Transition{constructor(e,t,i){super(e),this.from=t,this.to=i}get serializationType(){return 2}get label(){return ZH.IntervalSet.of(this.from,this.to)}matches(e,t,i){return e>=this.from&&e<=this.to}toString(){return"'"+String.fromCodePoint(this.from)+"'..'"+String.fromCodePoint(this.to)+"'"}};bg([uh.Override],ch.prototype,"serializationType",null);bg([uh.Override,uh.NotNull],ch.prototype,"label",null);bg([uh.Override],ch.prototype,"matches",null);bg([uh.Override,uh.NotNull],ch.prototype,"toString",null);ch=bg([JH(0,uh.NotNull)],ch);j1.RangeTransition=ch;var V1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var tj=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(V1,"__esModule",{value:!0});V1.RuleStartState=void 0;const rj=Pa,ij=ji,nj=Xe;class cI extends rj.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return ij.ATNStateType.RULE_START}}tj([nj.Override],cI.prototype,"stateType",null);V1.RuleStartState=cI;var W1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var sj=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(W1,"__esModule",{value:!0});W1.StarBlockStartState=void 0;const oj=ji,aj=Rh,lj=Xe;class hI extends aj.BlockStartState{get stateType(){return oj.ATNStateType.STAR_BLOCK_START}}sj([lj.Override],hI.prototype,"stateType",null);W1.StarBlockStartState=hI;var $1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var uj=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty($1,"__esModule",{value:!0});$1.StarLoopbackState=void 0;const cj=Pa,hj=ji,dj=Xe;class dI extends cj.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return hj.ATNStateType.STAR_LOOP_BACK}}uj([dj.Override],dI.prototype,"stateType",null);$1.StarLoopbackState=dI;var K1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var fj=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(K1,"__esModule",{value:!0});K1.TokensStartState=void 0;const _j=ji,pj=Da,gj=Xe;class fI extends pj.DecisionState{get stateType(){return _j.ATNStateType.TOKEN_START}}fj([gj.Override],fI.prototype,"stateType",null);K1.TokensStartState=fI;var X1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(X1,"__esModule",{value:!0});X1.UUID=void 0;const mj=ti;class _y{constructor(e,t,i,s){this.data=new Uint32Array(4),this.data[0]=e,this.data[1]=t,this.data[2]=i,this.data[3]=s}static fromString(e){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(e))throw new Error("Incorrectly formatted UUID");let t=e.split("-"),i=parseInt(t[0],16),s=(parseInt(t[1],16)<<16>>>0)+parseInt(t[2],16),n=(parseInt(t[3],16)<<16>>>0)+parseInt(t[4].substr(0,4),16),o=parseInt(t[4].substr(-8),16);return new _y(i,s,n,o)}hashCode(){return mj.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(e){return e===this?!0:e instanceof _y?this.data[0]===e.data[0]&&this.data[1]===e.data[1]&&this.data[2]===e.data[2]&&this.data[3]===e.data[3]:!1}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}}X1.UUID=_y;var CR;function Mb(){if(CR)return w_;CR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(Le,F,z,W){var te=arguments.length,de=te<3?F:W===null?W=Object.getOwnPropertyDescriptor(F,z):W,ye;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")de=Reflect.decorate(Le,F,z,W);else for(var oe=Le.length-1;oe>=0;oe--)(ye=Le[oe])&&(de=(te<3?ye(de):te>3?ye(F,z,de):ye(F,z))||de);return te>3&&de&&Object.defineProperty(F,z,de),de},e=$&&$.__param||function(Le,F){return function(z,W){F(z,W,Le)}};Object.defineProperty(w_,"__esModule",{value:!0}),w_.ATNDeserializer=void 0;const t=fg,i=Fo,s=Oa(),n=dg,o=ji,a=gg,l=C1,c=ug,d=Bo,f=O1,g=Rh,x=Da,E=V3(),P=N1,b=Ph(),D=lg,C=I1,O=F1,N=M1,j=J3,I=Z3,M=B1,R=eI,L=L1,K=vg,Q=Xe,ue=Cb(),ae=Sg(),Re=G1,Ue=z1,rt=H1,Ve=rg,Fe=j1,nt=V1,dt=Fu,it=Df,bt=Db(),ee=W1,ne=$1,se=Rf,Ee=dr,Se=K1,fe=X1,Pe=hg;var He;(function(Le){Le[Le.UNICODE_BMP=0]="UNICODE_BMP",Le[Le.UNICODE_SMP=1]="UNICODE_SMP"})(He||(He={}));class Z{constructor(F){F===void 0&&(F=n.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=F}static get SERIALIZED_VERSION(){return 3}static isFeatureSupported(F,z){let W=Z.SUPPORTED_UUIDS.findIndex(te=>te.equals(F));return W<0?!1:Z.SUPPORTED_UUIDS.findIndex(te=>te.equals(z))>=W}static getUnicodeDeserializer(F){return F===0?{readUnicode:(z,W)=>Z.toInt(z[W]),size:1}:{readUnicode:(z,W)=>Z.toInt32(z,W),size:2}}deserialize(F){F=F.slice(0);for(let Ie=1;Ie<F.length;Ie++)F[Ie]=F[Ie]-2&65535;let z=0,W=Z.toInt(F[z++]);if(W!==Z.SERIALIZED_VERSION){let Ie=`Could not deserialize ATN with version ${W} (expected ${Z.SERIALIZED_VERSION}).`;throw new Error(Ie)}let te=Z.toUUID(F,z);if(z+=8,Z.SUPPORTED_UUIDS.findIndex(Ie=>Ie.equals(te))<0){let Ie=`Could not deserialize ATN with UUID ${te} (expected ${Z.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(Ie)}let de=Z.isFeatureSupported(Z.ADDED_LEXER_ACTIONS,te),ye=Z.toInt(F[z++]),oe=Z.toInt(F[z++]),le=new s.ATN(ye,oe),we=[],De=[],Ye=Z.toInt(F[z++]);for(let Ie=0;Ie<Ye;Ie++){let gt=Z.toInt(F[z++]);if(gt===o.ATNStateType.INVALID_TYPE){le.addState(new D.InvalidState);continue}let mt=Z.toInt(F[z++]);mt===65535&&(mt=-1);let Et=this.stateFactory(gt,mt);if(gt===o.ATNStateType.LOOP_END){let Ht=Z.toInt(F[z++]);we.push([Et,Ht])}else if(Et instanceof g.BlockStartState){let Ht=Z.toInt(F[z++]);De.push([Et,Ht])}le.addState(Et)}for(let Ie of we)Ie[0].loopBackState=le.states[Ie[1]];for(let Ie of De)Ie[0].endState=le.states[Ie[1]];let $e=Z.toInt(F[z++]);for(let Ie=0;Ie<$e;Ie++){let gt=Z.toInt(F[z++]);le.states[gt].nonGreedy=!0}let Qe=Z.toInt(F[z++]);for(let Ie=0;Ie<Qe;Ie++){let gt=Z.toInt(F[z++]);le.states[gt].sll=!0}let Ke=Z.toInt(F[z++]);for(let Ie=0;Ie<Ke;Ie++){let gt=Z.toInt(F[z++]);le.states[gt].isPrecedenceRule=!0}let tt=Z.toInt(F[z++]);le.grammarType===0&&(le.ruleToTokenType=new Int32Array(tt)),le.ruleToStartState=new Array(tt);for(let Ie=0;Ie<tt;Ie++){let gt=Z.toInt(F[z++]),mt=le.states[gt];if(mt.leftFactored=Z.toInt(F[z++])!==0,le.ruleToStartState[Ie]=mt,le.grammarType===0){let Et=Z.toInt(F[z++]);Et===65535&&(Et=Ee.Token.EOF),le.ruleToTokenType[Ie]=Et,Z.isFeatureSupported(Z.ADDED_LEXER_ACTIONS,te)||Z.toInt(F[z++])}}le.ruleToStopState=new Array(tt);for(let Ie of le.states)Ie instanceof dt.RuleStopState&&(le.ruleToStopState[Ie.ruleIndex]=Ie,le.ruleToStartState[Ie.ruleIndex].stopState=Ie);let _t=Z.toInt(F[z++]);for(let Ie=0;Ie<_t;Ie++){let gt=Z.toInt(F[z++]);le.modeToStartState.push(le.states[gt])}le.modeToDFA=new Array(_t);for(let Ie=0;Ie<_t;Ie++)le.modeToDFA[Ie]=new E.DFA(le.modeToStartState[Ie]);let st=[];z=this.deserializeSets(F,z,st,Z.getUnicodeDeserializer(0)),Z.isFeatureSupported(Z.ADDED_UNICODE_SMP,te)&&(z=this.deserializeSets(F,z,st,Z.getUnicodeDeserializer(1)));let St=Z.toInt(F[z++]);for(let Ie=0;Ie<St;Ie++){let gt=Z.toInt(F[z]),mt=Z.toInt(F[z+1]),Et=Z.toInt(F[z+2]),Ht=Z.toInt(F[z+3]),li=Z.toInt(F[z+4]),Er=Z.toInt(F[z+5]),mr=this.edgeFactory(le,Et,gt,mt,Ht,li,Er,st);le.states[gt].addTransition(mr),z+=6}let Ot=new i.Array2DHashSet({hashCode:Ie=>Ie.stopState^Ie.returnState^Ie.outermostPrecedenceReturn,equals:(Ie,gt)=>Ie.stopState===gt.stopState&&Ie.returnState===gt.returnState&&Ie.outermostPrecedenceReturn===gt.outermostPrecedenceReturn}),Rt=[];for(let Ie of le.states){let gt=Ie.ruleIndex>=0&&le.ruleToStartState[Ie.ruleIndex].leftFactored;for(let mt=0;mt<Ie.numberOfTransitions;mt++){let Et=Ie.transition(mt);if(!(Et instanceof it.RuleTransition))continue;let Ht=Et;if(!le.ruleToStartState[Ht.target.ruleIndex].leftFactored&&gt)continue;let Er=-1;le.ruleToStartState[Ht.target.ruleIndex].isPrecedenceRule&&Ht.precedence===0&&(Er=Ht.target.ruleIndex);let mr={stopState:Ht.target.ruleIndex,returnState:Ht.followState.stateNumber,outermostPrecedenceReturn:Er};Ot.add(mr)&&Rt.push(mr)}}for(let Ie of Rt){let gt=new P.EpsilonTransition(le.states[Ie.returnState],Ie.outermostPrecedenceReturn);le.ruleToStopState[Ie.stopState].addTransition(gt)}for(let Ie of le.states){if(Ie instanceof g.BlockStartState){if(Ie.endState===void 0)throw new Error("IllegalStateException");if(Ie.endState.startState!==void 0)throw new Error("IllegalStateException");Ie.endState.startState=Ie}if(Ie instanceof Ue.PlusLoopbackState){let gt=Ie;for(let mt=0;mt<gt.numberOfTransitions;mt++){let Et=gt.transition(mt).target;Et instanceof Re.PlusBlockStartState&&(Et.loopBackState=gt)}}else if(Ie instanceof ne.StarLoopbackState){let gt=Ie;for(let mt=0;mt<gt.numberOfTransitions;mt++){let Et=gt.transition(mt).target;Et instanceof se.StarLoopEntryState&&(Et.loopBackState=gt)}}}let Mt=Z.toInt(F[z++]);for(let Ie=1;Ie<=Mt;Ie++){let gt=Z.toInt(F[z++]),mt=le.states[gt];le.decisionToState.push(mt),mt.decision=Ie-1}if(le.grammarType===0)if(de){le.lexerActions=new Array(Z.toInt(F[z++]));for(let Ie=0;Ie<le.lexerActions.length;Ie++){let gt=Z.toInt(F[z++]),mt=Z.toInt(F[z++]);mt===65535&&(mt=-1);let Et=Z.toInt(F[z++]);Et===65535&&(Et=-1);let Ht=this.lexerActionFactory(gt,mt,Et);le.lexerActions[Ie]=Ht}}else{let Ie=[];for(let gt of le.states)for(let mt=0;mt<gt.numberOfTransitions;mt++){let Et=gt.transition(mt);if(!(Et instanceof t.ActionTransition))continue;let Ht=Et.ruleIndex,li=Et.actionIndex,Er=new O.LexerCustomAction(Ht,li);gt.setTransition(mt,new t.ActionTransition(Et.target,Ht,Ie.length,!1)),Ie.push(Er)}le.lexerActions=Ie}this.markPrecedenceDecisions(le),le.decisionToDFA=new Array(Mt);for(let Ie=0;Ie<Mt;Ie++)le.decisionToDFA[Ie]=new E.DFA(le.decisionToState[Ie],Ie);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(le),this.deserializationOptions.isGenerateRuleBypassTransitions&&le.grammarType===1){le.ruleToTokenType=new Int32Array(le.ruleToStartState.length);for(let Ie=0;Ie<le.ruleToStartState.length;Ie++)le.ruleToTokenType[Ie]=le.maxTokenType+Ie+1;for(let Ie=0;Ie<le.ruleToStartState.length;Ie++){let gt=new l.BasicBlockStartState;gt.ruleIndex=Ie,le.addState(gt);let mt=new f.BlockEndState;mt.ruleIndex=Ie,le.addState(mt),gt.endState=mt,le.defineDecisionState(gt),mt.startState=gt;let Et,Ht;if(le.ruleToStartState[Ie].isPrecedenceRule){Et=void 0;for(let Er of le.states){if(Er.ruleIndex!==Ie||!(Er instanceof se.StarLoopEntryState))continue;let mr=Er.transition(Er.numberOfTransitions-1).target;if(mr instanceof K.LoopEndState&&mr.epsilonOnlyTransitions&&mr.transition(0).target instanceof dt.RuleStopState){Et=Er;break}}if(!Et)throw new Error("Couldn't identify final state of the precedence rule prefix section.");Ht=Et.loopBackState.transition(0)}else Et=le.ruleToStopState[Ie];for(let Er of le.states)for(let mr=0;mr<Er.numberOfTransitions;mr++){let xi=Er.transition(mr);xi!==Ht&&xi.target===Et&&(xi.target=mt)}for(;le.ruleToStartState[Ie].numberOfTransitions>0;){let Er=le.ruleToStartState[Ie].removeTransition(le.ruleToStartState[Ie].numberOfTransitions-1);gt.addTransition(Er)}le.ruleToStartState[Ie].addTransition(new P.EpsilonTransition(gt)),mt.addTransition(new P.EpsilonTransition(Et));let li=new c.BasicState;le.addState(li),li.addTransition(new a.AtomTransition(mt,le.ruleToTokenType[Ie])),gt.addTransition(new P.EpsilonTransition(li))}this.deserializationOptions.isVerifyATN&&this.verifyATN(le)}if(this.deserializationOptions.isOptimize){for(;;){let Ie=0;Ie+=Z.inlineSetRules(le),Ie+=Z.combineChainedEpsilons(le);let gt=le.grammarType===0;if(Ie+=Z.optimizeSets(le,gt),Ie===0)break}this.deserializationOptions.isVerifyATN&&this.verifyATN(le)}return Z.identifyTailCalls(le),le}deserializeSets(F,z,W,te){let de=Z.toInt(F[z++]);for(let ye=0;ye<de;ye++){let oe=Z.toInt(F[z]);z++;let le=new b.IntervalSet;W.push(le),Z.toInt(F[z++])!==0&&le.add(-1);for(let De=0;De<oe;De++){let Ye=te.readUnicode(F,z);z+=te.size;let $e=te.readUnicode(F,z);z+=te.size,le.add(Ye,$e)}}return z}markPrecedenceDecisions(F){let z=new Map;for(let W of F.states)if(W instanceof se.StarLoopEntryState&&F.ruleToStartState[W.ruleIndex].isPrecedenceRule){let te=W.transition(W.numberOfTransitions-1).target;te instanceof K.LoopEndState&&te.epsilonOnlyTransitions&&te.transition(0).target instanceof dt.RuleStopState&&(z.set(W.ruleIndex,W),W.precedenceRuleDecision=!0,W.precedenceLoopbackStates=new d.BitSet(F.states.length))}for(let W of z)for(let te of F.ruleToStopState[W[0]].getTransitions())te.serializationType!==1||te.outermostPrecedenceReturn!==-1||W[1].precedenceLoopbackStates.set(te.target.stateNumber)}verifyATN(F){for(let z of F.states)if(this.checkCondition(z!==void 0,"ATN states should not be undefined."),z.stateType!==o.ATNStateType.INVALID_TYPE){if(this.checkCondition(z.onlyHasEpsilonTransitions||z.numberOfTransitions<=1),z instanceof Re.PlusBlockStartState&&this.checkCondition(z.loopBackState!==void 0),z instanceof se.StarLoopEntryState){let W=z;if(this.checkCondition(W.loopBackState!==void 0),this.checkCondition(W.numberOfTransitions===2),W.transition(0).target instanceof ee.StarBlockStartState)this.checkCondition(W.transition(1).target instanceof K.LoopEndState),this.checkCondition(!W.nonGreedy);else if(W.transition(0).target instanceof K.LoopEndState)this.checkCondition(W.transition(1).target instanceof ee.StarBlockStartState),this.checkCondition(W.nonGreedy);else throw new Error("IllegalStateException")}if(z instanceof ne.StarLoopbackState&&(this.checkCondition(z.numberOfTransitions===1),this.checkCondition(z.transition(0).target instanceof se.StarLoopEntryState)),z instanceof K.LoopEndState&&this.checkCondition(z.loopBackState!==void 0),z instanceof nt.RuleStartState&&this.checkCondition(z.stopState!==void 0),z instanceof g.BlockStartState&&this.checkCondition(z.endState!==void 0),z instanceof f.BlockEndState&&this.checkCondition(z.startState!==void 0),z instanceof x.DecisionState){let W=z;this.checkCondition(W.numberOfTransitions<=1||W.decision>=0)}else this.checkCondition(z.numberOfTransitions<=1||z instanceof dt.RuleStopState)}}checkCondition(F,z){if(!F)throw new Error("IllegalStateException: "+z)}static inlineSetRules(F){let z=0,W=new Array(F.ruleToStartState.length);for(let te=0;te<F.ruleToStartState.length;te++){let ye=F.ruleToStartState[te];for(;ye.onlyHasEpsilonTransitions&&ye.numberOfOptimizedTransitions===1&&ye.getOptimizedTransition(0).serializationType===1;)ye=ye.getOptimizedTransition(0).target;if(ye.numberOfOptimizedTransitions!==1)continue;let oe=ye.getOptimizedTransition(0),le=oe.target;if(!(oe.isEpsilon||!le.onlyHasEpsilonTransitions||le.numberOfOptimizedTransitions!==1||!(le.getOptimizedTransition(0).target instanceof dt.RuleStopState)))switch(oe.serializationType){case 5:case 2:case 7:W[te]=oe;break;case 8:case 9:continue;default:continue}}for(let te of F.states){if(te.ruleIndex<0)continue;let de;for(let ye=0;ye<te.numberOfOptimizedTransitions;ye++){let oe=te.getOptimizedTransition(ye);if(!(oe instanceof it.RuleTransition)){de!==void 0&&de.push(oe);continue}let le=oe,we=W[le.target.ruleIndex];if(we===void 0){de!==void 0&&de.push(oe);continue}if(de===void 0){de=[];for(let $e=0;$e<ye;$e++)de.push(te.getOptimizedTransition(ye))}z++;let De=le.followState,Ye=new c.BasicState;switch(Ye.setRuleIndex(De.ruleIndex),F.addState(Ye),de.push(new P.EpsilonTransition(Ye)),we.serializationType){case 5:Ye.addTransition(new a.AtomTransition(De,we._label));break;case 2:Ye.addTransition(new Fe.RangeTransition(De,we.from,we.to));break;case 7:Ye.addTransition(new bt.SetTransition(De,we.label));break;default:throw new Error("UnsupportedOperationException")}}if(de!==void 0){if(te.isOptimized)for(;te.numberOfOptimizedTransitions>0;)te.removeOptimizedTransition(te.numberOfOptimizedTransitions-1);for(let ye of de)te.addOptimizedTransition(ye)}}return ae.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+z+" rule invocations by inlining sets."),z}static combineChainedEpsilons(F){let z=0;for(let W of F.states){if(!W.onlyHasEpsilonTransitions||W instanceof dt.RuleStopState)continue;let te;e:for(let de=0;de<W.numberOfOptimizedTransitions;de++){let ye=W.getOptimizedTransition(de),oe=ye.target;if(ye.serializationType!==1||ye.outermostPrecedenceReturn!==-1||oe.stateType!==o.ATNStateType.BASIC||!oe.onlyHasEpsilonTransitions){te!==void 0&&te.push(ye);continue e}for(let le=0;le<oe.numberOfOptimizedTransitions;le++)if(oe.getOptimizedTransition(le).serializationType!==1||oe.getOptimizedTransition(le).outermostPrecedenceReturn!==-1){te!==void 0&&te.push(ye);continue e}if(z++,te===void 0){te=[];for(let le=0;le<de;le++)te.push(W.getOptimizedTransition(le))}for(let le=0;le<oe.numberOfOptimizedTransitions;le++){let we=oe.getOptimizedTransition(le).target;te.push(new P.EpsilonTransition(we))}}if(te!==void 0){if(W.isOptimized)for(;W.numberOfOptimizedTransitions>0;)W.removeOptimizedTransition(W.numberOfOptimizedTransitions-1);for(let de of te)W.addOptimizedTransition(de)}}return ae.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+z+" transitions by combining chained epsilon transitions."),z}static optimizeSets(F,z){if(z)return 0;let W=0,te=F.decisionToState;for(let de of te){let ye=new b.IntervalSet;for(let $e=0;$e<de.numberOfOptimizedTransitions;$e++){let Qe=de.getOptimizedTransition($e);if(!(Qe instanceof P.EpsilonTransition)||Qe.target.numberOfOptimizedTransitions!==1)continue;let Ke=Qe.target.getOptimizedTransition(0);Ke.target instanceof f.BlockEndState&&(Ke instanceof ue.NotSetTransition||(Ke instanceof a.AtomTransition||Ke instanceof Fe.RangeTransition||Ke instanceof bt.SetTransition)&&ye.add($e))}if(ye.size<=1)continue;let oe=[];for(let $e=0;$e<de.numberOfOptimizedTransitions;$e++)ye.contains($e)||oe.push(de.getOptimizedTransition($e));let le=de.getOptimizedTransition(ye.minElement).target.getOptimizedTransition(0).target,we=new b.IntervalSet;for(let $e of ye.intervals)for(let Qe=$e.a;Qe<=$e.b;Qe++){let Ke=de.getOptimizedTransition(Qe).target.getOptimizedTransition(0);if(Ke instanceof ue.NotSetTransition)throw new Error("Not yet implemented.");we.addAll(Ke.label)}let De;if(we.intervals.length===1)if(we.size===1)De=new a.AtomTransition(le,we.minElement);else{let $e=we.intervals[0];De=new Fe.RangeTransition(le,$e.a,$e.b)}else De=new bt.SetTransition(le,we);let Ye=new c.BasicState;if(Ye.setRuleIndex(de.ruleIndex),F.addState(Ye),Ye.addTransition(De),oe.push(new P.EpsilonTransition(Ye)),W+=de.numberOfOptimizedTransitions-oe.length,de.isOptimized)for(;de.numberOfOptimizedTransitions>0;)de.removeOptimizedTransition(de.numberOfOptimizedTransitions-1);for(let $e of oe)de.addOptimizedTransition($e)}return ae.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+W+" paths by collapsing sets."),W}static identifyTailCalls(F){for(let z of F.states){for(let W=0;W<z.numberOfTransitions;W++){let te=z.transition(W);te instanceof it.RuleTransition&&(te.tailCall=this.testTailCall(F,te,!1),te.optimizedTailCall=this.testTailCall(F,te,!0))}if(!!z.isOptimized)for(let W=0;W<z.numberOfOptimizedTransitions;W++){let te=z.getOptimizedTransition(W);te instanceof it.RuleTransition&&(te.tailCall=this.testTailCall(F,te,!1),te.optimizedTailCall=this.testTailCall(F,te,!0))}}}static testTailCall(F,z,W){if(!W&&z.tailCall||W&&z.optimizedTailCall)return!0;let te=new d.BitSet(F.states.length),de=[];for(de.push(z.followState);;){let ye=de.pop();if(!ye)break;if(te.get(ye.stateNumber)||ye instanceof dt.RuleStopState)continue;if(!ye.onlyHasEpsilonTransitions)return!1;let oe=W?ye.numberOfOptimizedTransitions:ye.numberOfTransitions;for(let le=0;le<oe;le++){let we=W?ye.getOptimizedTransition(le):ye.transition(le);if(we.serializationType!==1)return!1;de.push(we.target)}}return!0}static toInt(F){return F}static toInt32(F,z){return(F[z]|F[z+1]<<16)>>>0}static toUUID(F,z){let W=Z.toInt32(F,z),te=Z.toInt32(F,z+2),de=Z.toInt32(F,z+4),ye=Z.toInt32(F,z+6);return new fe.UUID(ye,de,te,W)}edgeFactory(F,z,W,te,de,ye,oe,le){let we=F.states[te];switch(z){case 1:return new P.EpsilonTransition(we);case 2:return oe!==0?new Fe.RangeTransition(we,Ee.Token.EOF,ye):new Fe.RangeTransition(we,de,ye);case 3:return new it.RuleTransition(F.states[de],ye,oe,we);case 4:return new Ve.PredicateTransition(we,de,ye,oe!==0);case 10:return new rt.PrecedencePredicateTransition(we,de);case 5:return oe!==0?new a.AtomTransition(we,Ee.Token.EOF):new a.AtomTransition(we,de);case 6:return new t.ActionTransition(we,de,ye,oe!==0);case 7:return new bt.SetTransition(we,le[de]);case 8:return new ue.NotSetTransition(we,le[de]);case 9:return new Pe.WildcardTransition(we)}throw new Error("The specified transition type is not valid.")}stateFactory(F,z){let W;switch(F){case o.ATNStateType.INVALID_TYPE:return new D.InvalidState;case o.ATNStateType.BASIC:W=new c.BasicState;break;case o.ATNStateType.RULE_START:W=new nt.RuleStartState;break;case o.ATNStateType.BLOCK_START:W=new l.BasicBlockStartState;break;case o.ATNStateType.PLUS_BLOCK_START:W=new Re.PlusBlockStartState;break;case o.ATNStateType.STAR_BLOCK_START:W=new ee.StarBlockStartState;break;case o.ATNStateType.TOKEN_START:W=new Se.TokensStartState;break;case o.ATNStateType.RULE_STOP:W=new dt.RuleStopState;break;case o.ATNStateType.BLOCK_END:W=new f.BlockEndState;break;case o.ATNStateType.STAR_LOOP_BACK:W=new ne.StarLoopbackState;break;case o.ATNStateType.STAR_LOOP_ENTRY:W=new se.StarLoopEntryState;break;case o.ATNStateType.PLUS_LOOP_BACK:W=new Ue.PlusLoopbackState;break;case o.ATNStateType.LOOP_END:W=new K.LoopEndState;break;default:let te=`The specified state type ${F} is not valid.`;throw new Error(te)}return W.ruleIndex=z,W}lexerActionFactory(F,z,W){switch(F){case 0:return new C.LexerChannelAction(z);case 1:return new O.LexerCustomAction(z,W);case 2:return new N.LexerModeAction(z);case 3:return j.LexerMoreAction.INSTANCE;case 4:return I.LexerPopModeAction.INSTANCE;case 5:return new M.LexerPushModeAction(z);case 6:return R.LexerSkipAction.INSTANCE;case 7:return new L.LexerTypeAction(z);default:let te=`The specified lexer action type ${F} is not valid.`;throw new Error(te)}}}return Z.BASE_SERIALIZED_UUID=fe.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3"),Z.ADDED_LEXER_ACTIONS=fe.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D"),Z.ADDED_UNICODE_SMP=fe.UUID.fromString("C23FEA89-0605-4f51-AFB8-058BCAB8C91B"),Z.SUPPORTED_UUIDS=[Z.BASE_SERIALIZED_UUID,Z.ADDED_LEXER_ACTIONS,Z.ADDED_UNICODE_SMP],Z.SERIALIZED_UUID=Z.ADDED_UNICODE_SMP,r([Q.NotNull],Z.prototype,"deserializationOptions",void 0),r([e(0,Q.NotNull)],Z.prototype,"deserialize",null),r([e(0,Q.NotNull)],Z.prototype,"markPrecedenceDecisions",null),r([Q.NotNull,e(0,Q.NotNull)],Z.prototype,"edgeFactory",null),w_.ATNDeserializer=Z,w_}var Y1={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Bb=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},xj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Y1,"__esModule",{value:!0});Y1.ParseInfo=void 0;const Lb=Xe;let b0=class{constructor(e){this.atnSimulator=e}getDecisionInfo(){return this.atnSimulator.getDecisionInfo()}getLLDecisions(){let e=this.atnSimulator.getDecisionInfo(),t=[];for(let i=0;i<e.length;i++)e[i].LL_Fallback>0&&t.push(i);return t}getTotalTimeInPrediction(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.timeInPrediction;return t}getTotalSLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.SLL_TotalLook;return t}getTotalLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.LL_TotalLook;return t}getTotalSLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.SLL_ATNTransitions;return t}getTotalLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.LL_ATNTransitions;return t}getTotalATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let i of e)t+=i.SLL_ATNTransitions,t+=i.LL_ATNTransitions;return t}getDFASize(e){if(e)return this.atnSimulator.atn.decisionToDFA[e].states.size;{let t=0,i=this.atnSimulator.atn.decisionToDFA;for(let s=0;s<i.length;s++)t+=this.getDFASize(s);return t}}};Bb([Lb.NotNull],b0.prototype,"getDecisionInfo",null);Bb([Lb.NotNull],b0.prototype,"getLLDecisions",null);b0=Bb([xj(0,Lb.NotNull)],b0);Y1.ParseInfo=b0;var kg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ub=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(kg,"__esModule",{value:!0});kg.ProxyParserErrorListener=void 0;const yj=Pf,Gb=Xe;class q1 extends yj.ProxyErrorListener{constructor(e){super(e)}reportAmbiguity(e,t,i,s,n,o,a){this.getDelegates().forEach(l=>{l.reportAmbiguity&&l.reportAmbiguity(e,t,i,s,n,o,a)})}reportAttemptingFullContext(e,t,i,s,n,o){this.getDelegates().forEach(a=>{a.reportAttemptingFullContext&&a.reportAttemptingFullContext(e,t,i,s,n,o)})}reportContextSensitivity(e,t,i,s,n,o){this.getDelegates().forEach(a=>{a.reportContextSensitivity&&a.reportContextSensitivity(e,t,i,s,n,o)})}}Ub([Gb.Override],q1.prototype,"reportAmbiguity",null);Ub([Gb.Override],q1.prototype,"reportAttemptingFullContext",null);Ub([Gb.Override],q1.prototype,"reportContextSensitivity",null);kg.ProxyParserErrorListener=q1;var zE={},Q1={},zb={},_u={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(_u,"__esModule",{value:!0});_u.isSupplementaryCodePoint=_u.isLowSurrogate=_u.isHighSurrogate=void 0;function vj(r){return r>=55296&&r<=56319}_u.isHighSurrogate=vj;function Ej(r){return r>=56320&&r<=57343}_u.isLowSurrogate=Ej;function Sj(r){return r>=65536}_u.isSupplementaryCodePoint=Sj;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CodePointBuffer=void 0;const e=Us,t=_u;class i{constructor(n,o){this.buffer=n,this._position=0,this._size=o}static withArray(n){return new i(n,n.length)}get position(){return this._position}set position(n){if(n<0||n>this._size)throw new RangeError;this._position=n}get remaining(){return this._size-this.position}get(n){return this.buffer[n]}array(){return this.buffer.slice(0,this._size)}static builder(n){return new i.Builder(n)}}r.CodePointBuffer=i,function(s){let n;(function(a){a[a.BYTE=0]="BYTE",a[a.CHAR=1]="CHAR",a[a.INT=2]="INT"})(n||(n={}));class o{constructor(l){this.type=0,this.buffer=new Uint8Array(l),this.prevHighSurrogate=-1,this.position=0}build(){return new s(this.buffer,this.position)}static roundUpToNextPowerOfTwo(l){let c=32-Math.clz32(l-1);return Math.pow(2,c)}ensureRemaining(l){switch(this.type){case 0:if(this.buffer.length-this.position<l){let c=o.roundUpToNextPowerOfTwo(this.buffer.length+l),d=new Uint8Array(c);d.set(this.buffer.subarray(0,this.position),0),this.buffer=d}break;case 1:if(this.buffer.length-this.position<l){let c=o.roundUpToNextPowerOfTwo(this.buffer.length+l),d=new Uint16Array(c);d.set(this.buffer.subarray(0,this.position),0),this.buffer=d}break;case 2:if(this.buffer.length-this.position<l){let c=o.roundUpToNextPowerOfTwo(this.buffer.length+l),d=new Int32Array(c);d.set(this.buffer.subarray(0,this.position),0),this.buffer=d}break}}append(l){this.ensureRemaining(l.length),this.appendArray(l)}appendArray(l){switch(this.type){case 0:this.appendArrayByte(l);break;case 1:this.appendArrayChar(l);break;case 2:this.appendArrayInt(l);break}}appendArrayByte(l){e(this.prevHighSurrogate===-1);let c=l,d=0,f=l.length,g=this.buffer,x=this.position;for(;d<f;){let E=c[d];if(E<=255)g[x]=E;else if(l=l.subarray(d,f),this.position=x,t.isHighSurrogate(E)){this.byteToIntBuffer(l.length),this.appendArrayInt(l);return}else{this.byteToCharBuffer(l.length),this.appendArrayChar(l);return}d++,x++}this.position=x}appendArrayChar(l){e(this.prevHighSurrogate===-1);let c=l,d=0,f=l.length,g=this.buffer,x=this.position;for(;d<f;){let E=c[d];if(!t.isHighSurrogate(E))g[x]=E;else{l=l.subarray(d,f),this.position=x,this.charToIntBuffer(l.length),this.appendArrayInt(l);return}d++,x++}this.position=x}appendArrayInt(l){let c=l,d=0,f=l.length,g=this.buffer,x=this.position;for(;d<f;){let E=c[d];d++,this.prevHighSurrogate!==-1?t.isLowSurrogate(E)?(g[x]=String.fromCharCode(this.prevHighSurrogate,E).codePointAt(0),x++,this.prevHighSurrogate=-1):(g[x]=this.prevHighSurrogate,x++,t.isHighSurrogate(E)?this.prevHighSurrogate=E:(g[x]=E,x++,this.prevHighSurrogate=-1)):t.isHighSurrogate(E)?this.prevHighSurrogate=E:(g[x]=E,x++)}this.prevHighSurrogate!==-1&&(g[x]=this.prevHighSurrogate,x++),this.position=x}byteToCharBuffer(l){let c=new Uint16Array(Math.max(this.position+l,this.buffer.length>>1));c.set(this.buffer.subarray(0,this.position),0),this.type=1,this.buffer=c}byteToIntBuffer(l){let c=new Int32Array(Math.max(this.position+l,this.buffer.length>>2));c.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=c}charToIntBuffer(l){let c=new Int32Array(Math.max(this.position+l,this.buffer.length>>1));c.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=c}}s.Builder=o}(i=r.CodePointBuffer||(r.CodePointBuffer={}))})(zb);var Tg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Fa=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(Tg,"__esModule",{value:!0});Tg.CodePointCharStream=void 0;const OR=Us,xm=ml,wj=un,Ma=Xe;class zs{constructor(e,t,i,s){OR(t===0),this._array=e,this._size=i,this._name=s,this._position=0}get internalStorage(){return this._array}static fromBuffer(e,t){return(t===void 0||t.length===0)&&(t=xm.IntStream.UNKNOWN_SOURCE_NAME),new zs(e.array(),e.position,e.remaining,t)}consume(){if(this._size-this._position===0)throw OR(this.LA(1)===xm.IntStream.EOF),new RangeError("cannot consume EOF");this._position++}get index(){return this._position}get size(){return this._size}mark(){return-1}release(e){}seek(e){this._position=e}get sourceName(){return this._name}toString(){return this.getText(wj.Interval.of(0,this.size-1))}LA(e){let t;switch(Math.sign(e)){case-1:return t=this.index+e,t<0?xm.IntStream.EOF:this._array[t];case 0:return 0;case 1:return t=this.index+e-1,t>=this.size?xm.IntStream.EOF:this._array[t]}throw new RangeError("Not reached")}getText(e){const t=Math.min(e.a,this.size),i=Math.min(e.b-e.a+1,this.size-t);return this._array instanceof Int32Array?String.fromCodePoint(...Array.from(this._array.subarray(t,t+i))):String.fromCharCode(...Array.from(this._array.subarray(t,t+i)))}}Fa([Ma.Override],zs.prototype,"consume",null);Fa([Ma.Override],zs.prototype,"index",null);Fa([Ma.Override],zs.prototype,"size",null);Fa([Ma.Override],zs.prototype,"mark",null);Fa([Ma.Override],zs.prototype,"release",null);Fa([Ma.Override],zs.prototype,"seek",null);Fa([Ma.Override],zs.prototype,"sourceName",null);Fa([Ma.Override],zs.prototype,"toString",null);Fa([Ma.Override],zs.prototype,"LA",null);Fa([Ma.Override],zs.prototype,"getText",null);Tg.CodePointCharStream=zs;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CharStreams=void 0;const e=zb,t=Tg,i=ml;(function(s){function n(o,a){(a===void 0||a.length===0)&&(a=i.IntStream.UNKNOWN_SOURCE_NAME);let l=e.CodePointBuffer.builder(o.length),c=new Uint16Array(o.length);for(let d=0;d<o.length;d++)c[d]=o.charCodeAt(d);return l.append(c),t.CodePointCharStream.fromBuffer(l.build(),a)}s.fromString=n})(r.CharStreams||(r.CharStreams={}))})(Q1);var Bf={},Pg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Jn=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Aj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Pg,"__esModule",{value:!0});Pg.BufferedTokenStream=void 0;const NR=Us,IR=Ou,HE=un,jE=Mu(),Hi=Xe,Zu=dr;let an=class{constructor(e){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,e==null)throw new Error("tokenSource cannot be null");this._tokenSource=e}get tokenSource(){return this._tokenSource}set tokenSource(e){this._tokenSource=e,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}get index(){return this.p}mark(){return 0}release(e){}seek(e){this.lazyInit(),this.p=this.adjustSeekIndex(e)}get size(){return this.tokens.length}consume(){let e;if(this.p>=0?this.fetchedEOF?e=this.p<this.tokens.length-1:e=this.p<this.tokens.length:e=!1,!e&&this.LA(1)===Zu.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(e){NR(e>=0);let t=e-this.tokens.length+1;return t>0?this.fetch(t)>=t:!0}fetch(e){if(this.fetchedEOF)return 0;for(let t=0;t<e;t++){let i=this.tokenSource.nextToken();if(this.isWritableToken(i)&&(i.tokenIndex=this.tokens.length),this.tokens.push(i),i.type===Zu.Token.EOF)return this.fetchedEOF=!0,t+1}return e}get(e){if(e<0||e>=this.tokens.length)throw new RangeError("token index "+e+" out of range 0.."+(this.tokens.length-1));return this.tokens[e]}getRange(e,t){if(e<0||t<0)return[];this.lazyInit();let i=new Array;t>=this.tokens.length&&(t=this.tokens.length-1);for(let s=e;s<=t;s++){let n=this.tokens[s];if(n.type===Zu.Token.EOF)break;i.push(n)}return i}LA(e){let t=this.LT(e);return t?t.type:Zu.Token.INVALID_TYPE}tryLB(e){if(!(this.p-e<0))return this.tokens[this.p-e]}LT(e){let t=this.tryLT(e);if(t===void 0)throw new RangeError("requested lookback index out of range");return t}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p+e-1;return this.sync(t),t>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[t]}adjustSeekIndex(e){return e}lazyInit(){this.p===-1&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}getTokens(e,t,i){if(this.lazyInit(),e===void 0)return NR(t===void 0&&i===void 0),this.tokens;if(t===void 0&&(t=this.tokens.length-1),e<0||t>=this.tokens.length||t<0||e>=this.tokens.length)throw new RangeError("start "+e+" or stop "+t+" not in 0.."+(this.tokens.length-1));if(e>t)return[];if(i===void 0)return this.tokens.slice(e,t+1);typeof i=="number"&&(i=new Set().add(i));let s=i,n=this.tokens.slice(e,t+1);return n=n.filter(o=>s.has(o.type)),n}nextTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;let i=this.tokens[e];for(;i.channel!==t;){if(i.type===Zu.Token.EOF)return e;e++,this.sync(e),i=this.tokens[e]}return e}previousTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;for(;e>=0;){let i=this.tokens[e];if(i.type===Zu.Token.EOF||i.channel===t)return e;e--}return e}getHiddenTokensToRight(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));let i=this.nextTokenOnChannel(e+1,jE.Lexer.DEFAULT_TOKEN_CHANNEL),s,n=e+1;return i===-1?s=this.size-1:s=i,this.filterForChannel(n,s,t)}getHiddenTokensToLeft(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));if(e===0)return[];let i=this.previousTokenOnChannel(e-1,jE.Lexer.DEFAULT_TOKEN_CHANNEL);if(i===e-1)return[];let s=i+1,n=e-1;return this.filterForChannel(s,n,t)}filterForChannel(e,t,i){let s=new Array;for(let n=e;n<=t;n++){let o=this.tokens[n];i===-1?o.channel!==jE.Lexer.DEFAULT_TOKEN_CHANNEL&&s.push(o):o.channel===i&&s.push(o)}return s}get sourceName(){return this.tokenSource.sourceName}getText(e){e===void 0?e=HE.Interval.of(0,this.size-1):e instanceof HE.Interval||(e=e.sourceInterval);let t=e.a,i=e.b;if(t<0||i<0)return"";this.fill(),i>=this.tokens.length&&(i=this.tokens.length-1);let s="";for(let n=t;n<=i;n++){let o=this.tokens[n];if(o.type===Zu.Token.EOF)break;s+=o.text}return s.toString()}getTextFromRange(e,t){return this.isToken(e)&&this.isToken(t)?this.getText(HE.Interval.of(e.tokenIndex,t.tokenIndex)):""}fill(){this.lazyInit();const e=1e3;for(;;)if(this.fetch(e)<e)return}isWritableToken(e){return e instanceof IR.CommonToken}isToken(e){return e instanceof IR.CommonToken}};Jn([Hi.NotNull],an.prototype,"_tokenSource",void 0);Jn([Hi.Override],an.prototype,"tokenSource",null);Jn([Hi.Override],an.prototype,"index",null);Jn([Hi.Override],an.prototype,"mark",null);Jn([Hi.Override],an.prototype,"release",null);Jn([Hi.Override],an.prototype,"seek",null);Jn([Hi.Override],an.prototype,"size",null);Jn([Hi.Override],an.prototype,"consume",null);Jn([Hi.Override],an.prototype,"get",null);Jn([Hi.Override],an.prototype,"LA",null);Jn([Hi.NotNull,Hi.Override],an.prototype,"LT",null);Jn([Hi.Override],an.prototype,"sourceName",null);Jn([Hi.NotNull,Hi.Override],an.prototype,"getText",null);Jn([Hi.NotNull,Hi.Override],an.prototype,"getTextFromRange",null);an=Jn([Aj(0,Hi.NotNull)],an);Pg.BufferedTokenStream=an;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var J1=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},bj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Bf,"__esModule",{value:!0});Bf.CommonTokenStream=void 0;const kj=Pg,Z1=Xe,FR=dr;let ef=class extends kj.BufferedTokenStream{constructor(e,t=FR.Token.DEFAULT_CHANNEL){super(e),this.channel=t}adjustSeekIndex(e){return this.nextTokenOnChannel(e,this.channel)}tryLB(e){if(this.p-e<0)return;let t=this.p,i=1;for(;i<=e&&t>0;)t=this.previousTokenOnChannel(t-1,this.channel),i++;if(!(t<0))return this.tokens[t]}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p,i=1;for(;i<e;)this.sync(t+1)&&(t=this.nextTokenOnChannel(t+1,this.channel)),i++;return this.tokens[t]}getNumberOfOnChannelTokens(){let e=0;this.fill();for(let t of this.tokens)if(t.channel===this.channel&&e++,t.type===FR.Token.EOF)break;return e}};J1([Z1.Override],ef.prototype,"adjustSeekIndex",null);J1([Z1.Override],ef.prototype,"tryLB",null);J1([Z1.Override],ef.prototype,"tryLT",null);ef=J1([bj(0,Z1.NotNull)],ef);Bf.CommonTokenStream=ef;var Rg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ch=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},_I=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Rg,"__esModule",{value:!0});Rg.ListTokenSource=void 0;const Tj=w1,ol=Xe,VE=dr;let fl=class{constructor(e,t){if(this.i=0,this._factory=Tj.CommonTokenFactory.DEFAULT,e==null)throw new Error("tokens cannot be null");this.tokens=e,this._sourceName=t}get charPositionInLine(){if(this.i<this.tokens.length)return this.tokens[this.i].charPositionInLine;if(this.eofToken!=null)return this.eofToken.charPositionInLine;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],t=e.text;if(t!=null){let i=t.lastIndexOf(`
`);if(i>=0)return t.length-i-1}return e.charPositionInLine+e.stopIndex-e.startIndex+1}return 0}nextToken(){if(this.i>=this.tokens.length){if(this.eofToken==null){let t=-1;if(this.tokens.length>0){let s=this.tokens[this.tokens.length-1].stopIndex;s!==-1&&(t=s+1)}let i=Math.max(-1,t-1);this.eofToken=this._factory.create({source:this,stream:this.inputStream},VE.Token.EOF,"EOF",VE.Token.DEFAULT_CHANNEL,t,i,this.line,this.charPositionInLine)}return this.eofToken}let e=this.tokens[this.i];return this.i===this.tokens.length-1&&e.type===VE.Token.EOF&&(this.eofToken=e),this.i++,e}get line(){if(this.i<this.tokens.length)return this.tokens[this.i].line;if(this.eofToken!=null)return this.eofToken.line;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],t=e.line,i=e.text;if(i!=null)for(let s=0;s<i.length;s++)i.charAt(s)===`
`&&t++;return t}return 1}get inputStream(){if(this.i<this.tokens.length)return this.tokens[this.i].inputStream;if(this.eofToken!=null)return this.eofToken.inputStream;if(this.tokens.length>0)return this.tokens[this.tokens.length-1].inputStream}get sourceName(){if(this._sourceName)return this._sourceName;let e=this.inputStream;return e!=null?e.sourceName:"List"}set tokenFactory(e){this._factory=e}get tokenFactory(){return this._factory}};Ch([ol.Override],fl.prototype,"charPositionInLine",null);Ch([ol.Override],fl.prototype,"nextToken",null);Ch([ol.Override],fl.prototype,"line",null);Ch([ol.Override],fl.prototype,"inputStream",null);Ch([ol.Override],fl.prototype,"sourceName",null);Ch([ol.Override,ol.NotNull,_I(0,ol.NotNull)],fl.prototype,"tokenFactory",null);fl=Ch([_I(0,ol.NotNull)],fl);Rg.ListTokenSource=fl;var D_={},MR;function Pj(){if(MR)return D_;MR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(D_,"__esModule",{value:!0}),D_.MultiMap=void 0;class r extends Map{constructor(){super()}map(t,i){let s=super.get(t);s||(s=[],super.set(t,s)),s.push(i)}getPairs(){let t=[];return this.forEach((i,s)=>{i.forEach(n=>{t.push([s,n])})}),t}}return D_.MultiMap=r,D_}var Dg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Dg,"__esModule",{value:!0});Dg.ParseCancellationException=void 0;class Rj extends Error{constructor(e){super(e.message),this.cause=e,this.stack=e.stack}getCause(){return this.cause}}Dg.ParseCancellationException=Rj;var C_={},O_={},BR;function pI(){if(BR)return O_;BR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,c=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(c=(l<3?d(c):l>3?d(n,o,c):d(n,o))||c);return l>3&&c&&Object.defineProperty(n,o,c),c};Object.defineProperty(O_,"__esModule",{value:!0}),O_.InterpreterRuleContext=void 0;const e=Xe,t=Uo();class i extends t.ParserRuleContext{constructor(n,o,a){a!==void 0?super(o,a):super(),this._ruleIndex=n}get ruleIndex(){return this._ruleIndex}}return r([e.Override],i.prototype,"ruleIndex",null),O_.InterpreterRuleContext=i,O_}var LR;function gI(){if(LR)return C_;LR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(D,C,O,N){var j=arguments.length,I=j<3?C:N===null?N=Object.getOwnPropertyDescriptor(C,O):N,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(D,C,O,N);else for(var R=D.length-1;R>=0;R--)(M=D[R])&&(I=(j<3?M(I):j>3?M(C,O,I):M(C,O))||I);return j>3&&I&&Object.defineProperty(C,O,I),I},e=$&&$.__param||function(D,C){return function(O,N){C(O,N,D)}};Object.defineProperty(C_,"__esModule",{value:!0}),C_.ParserInterpreter=void 0;const t=Pa,i=ji,s=Bo,n=bf,o=Sh,a=pI(),l=vg,c=Xe,d=Xe,f=Og(),g=Sg(),x=Ra,E=Rf,P=dr;let b=class yw extends f.Parser{constructor(C,O,N,j,I){if(super(C instanceof yw?C.inputStream:I),this._parentContextStack=[],this.overrideDecision=-1,this.overrideDecisionInputIndex=-1,this.overrideDecisionAlt=-1,this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0,C instanceof yw){let M=C;this._grammarFileName=M._grammarFileName,this._atn=M._atn,this.pushRecursionContextStates=M.pushRecursionContextStates,this._ruleNames=M._ruleNames,this._vocabulary=M._vocabulary,this.interpreter=new g.ParserATNSimulator(this._atn,this)}else{O=O,N=N,j=j,this._grammarFileName=C,this._atn=j,this._ruleNames=N.slice(0),this._vocabulary=O,this.pushRecursionContextStates=new s.BitSet(j.states.length);for(let M of j.states)M instanceof E.StarLoopEntryState&&M.precedenceRuleDecision&&this.pushRecursionContextStates.set(M.stateNumber);this.interpreter=new g.ParserATNSimulator(j,this)}}reset(C){C===void 0?super.reset():super.reset(C),this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0}get atn(){return this._atn}get vocabulary(){return this._vocabulary}get ruleNames(){return this._ruleNames}get grammarFileName(){return this._grammarFileName}parse(C){let O=this._atn.ruleToStartState[C];for(this._rootContext=this.createInterpreterRuleContext(void 0,t.ATNState.INVALID_STATE_NUMBER,C),O.isPrecedenceRule?this.enterRecursionRule(this._rootContext,O.stateNumber,C,0):this.enterRule(this._rootContext,O.stateNumber,C);;){let N=this.atnState;switch(N.stateType){case i.ATNStateType.RULE_STOP:if(this._ctx.isEmpty)if(O.isPrecedenceRule){let j=this._ctx,I=this._parentContextStack.pop();return this.unrollRecursionContexts(I[0]),j}else return this.exitRule(),this._rootContext;this.visitRuleStopState(N);break;default:try{this.visitState(N)}catch(j){if(j instanceof x.RecognitionException)this.state=this._atn.ruleToStopState[N.ruleIndex].stateNumber,this.context.exception=j,this.errorHandler.reportError(this,j),this.recover(j);else throw j}break}}}enterRecursionRule(C,O,N,j){this._parentContextStack.push([this._ctx,C.invokingState]),super.enterRecursionRule(C,O,N,j)}get atnState(){return this._atn.states[this.state]}visitState(C){let O=1;C.numberOfTransitions>1&&(O=this.visitDecisionState(C));let N=C.transition(O-1);switch(N.serializationType){case 1:if(this.pushRecursionContextStates.get(C.stateNumber)&&!(N.target instanceof l.LoopEndState)){let K=this._parentContextStack[this._parentContextStack.length-1],Q=this.createInterpreterRuleContext(K[0],K[1],this._ctx.ruleIndex);this.pushNewRecursionContext(Q,this._atn.ruleToStartState[C.ruleIndex].stateNumber,this._ctx.ruleIndex)}break;case 5:this.match(N._label);break;case 2:case 7:case 8:N.matches(this._input.LA(1),P.Token.MIN_USER_TOKEN_TYPE,65535)||this.recoverInline(),this.matchWildcard();break;case 9:this.matchWildcard();break;case 3:let j=N.target,I=j.ruleIndex,M=this.createInterpreterRuleContext(this._ctx,C.stateNumber,I);j.isPrecedenceRule?this.enterRecursionRule(M,j.stateNumber,I,N.precedence):this.enterRule(M,N.target.stateNumber,I);break;case 4:let R=N;if(!this.sempred(this._ctx,R.ruleIndex,R.predIndex))throw new n.FailedPredicateException(this);break;case 6:let L=N;this.action(this._ctx,L.ruleIndex,L.actionIndex);break;case 10:if(!this.precpred(this._ctx,N.precedence)){let K=N.precedence;throw new n.FailedPredicateException(this,`precpred(_ctx, ${K})`)}break;default:throw new Error("UnsupportedOperationException: Unrecognized ATN transition type.")}this.state=N.target.stateNumber}visitDecisionState(C){let O;this.errorHandler.sync(this);let N=C.decision;return N===this.overrideDecision&&this._input.index===this.overrideDecisionInputIndex&&!this.overrideDecisionReached?(O=this.overrideDecisionAlt,this.overrideDecisionReached=!0):O=this.interpreter.adaptivePredict(this._input,N,this._ctx),O}createInterpreterRuleContext(C,O,N){return new a.InterpreterRuleContext(N,C,O)}visitRuleStopState(C){if(this._atn.ruleToStartState[C.ruleIndex].isPrecedenceRule){let j=this._parentContextStack.pop();this.unrollRecursionContexts(j[0]),this.state=j[1]}else this.exitRule();let N=this._atn.states[this.state].transition(0);this.state=N.followState.stateNumber}addDecisionOverride(C,O,N){this.overrideDecision=C,this.overrideDecisionInputIndex=O,this.overrideDecisionAlt=N}get overrideDecisionRoot(){return this._overrideDecisionRoot}recover(C){let O=this._input.index;if(this.errorHandler.recover(this,C),this._input.index===O){let N=C.getOffendingToken();if(!N)throw new Error("Expected exception to have an offending token");let j=N.tokenSource,I=j!==void 0?j.inputStream:void 0,M={source:j,stream:I};if(C instanceof o.InputMismatchException){let R=C.expectedTokens;if(R===void 0)throw new Error("Expected the exception to provide expected tokens");let L=P.Token.INVALID_TYPE;R.isNil||(L=R.minElement);let K=this.tokenFactory.create(M,L,N.text,P.Token.DEFAULT_CHANNEL,-1,-1,N.line,N.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,K))}else{N.tokenSource;let R=this.tokenFactory.create(M,P.Token.INVALID_TYPE,N.text,P.Token.DEFAULT_CHANNEL,-1,-1,N.line,N.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,R))}}}recoverInline(){return this._errHandler.recoverInline(this)}get rootContext(){return this._rootContext}};return r([c.NotNull],b.prototype,"_vocabulary",void 0),r([d.Override],b.prototype,"reset",null),r([d.Override],b.prototype,"atn",null),r([d.Override],b.prototype,"vocabulary",null),r([d.Override],b.prototype,"ruleNames",null),r([d.Override],b.prototype,"grammarFileName",null),r([d.Override],b.prototype,"enterRecursionRule",null),b=r([e(1,c.NotNull)],b),C_.ParserInterpreter=b,C_}var N_={},UR;function Dj(){if(UR)return N_;UR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,c=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(c=(l<3?d(c):l>3?d(n,o,c):d(n,o))||c);return l>3&&c&&Object.defineProperty(n,o,c),c},e=$&&$.__param||function(s,n){return function(o,a){n(o,a,s)}};Object.defineProperty(N_,"__esModule",{value:!0}),N_.ParseTreeMatch=void 0;const t=Xe;let i=class{constructor(n,o,a,l){if(!n)throw new Error("tree cannot be null");if(!o)throw new Error("pattern cannot be null");if(!a)throw new Error("labels cannot be null");this._tree=n,this._pattern=o,this._labels=a,this._mismatchedNode=l}get(n){let o=this._labels.get(n);if(!(!o||o.length===0))return o[o.length-1]}getAll(n){const o=this._labels.get(n);return o||[]}get labels(){return this._labels}get mismatchedNode(){return this._mismatchedNode}get succeeded(){return!this._mismatchedNode}get pattern(){return this._pattern}get tree(){return this._tree}toString(){return`Match ${this.succeeded?"succeeded":"failed"}; found ${this.labels.size} labels`}};return r([t.NotNull,e(0,t.NotNull)],i.prototype,"getAll",null),r([t.NotNull],i.prototype,"labels",null),r([t.NotNull],i.prototype,"pattern",null),r([t.NotNull],i.prototype,"tree",null),r([t.Override],i.prototype,"toString",null),i=r([e(0,t.NotNull),e(1,t.NotNull),e(2,t.NotNull)],i),N_.ParseTreeMatch=i,N_}var I_={},F_={},M_={},GR;function Cj(){if(GR)return M_;GR=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.XPathLexer=void 0;const r=Mb(),e=Mu(),t=D1(),i=yl,s=Ei;class n extends e.Lexer{constructor(a){super(a),this._interp=new t.LexerATNSimulator(n._ATN,this)}get vocabulary(){return n.VOCABULARY}get grammarFileName(){return"XPathLexer.g4"}get ruleNames(){return n.ruleNames}get serializedATN(){return n._serializedATN}get channelNames(){return n.channelNames}get modeNames(){return n.modeNames}action(a,l,c){switch(l){case 4:this.ID_action(a,c);break}}ID_action(a,l){switch(l){case 0:let c=this.text;c.charAt(0)===c.charAt(0).toUpperCase()?this.type=n.TOKEN_REF:this.type=n.RULE_REF;break}}static get _ATN(){return n.__ATN||(n.__ATN=new r.ATNDeserializer().deserialize(s.toCharArray(n._serializedATN))),n.__ATN}}return M_.XPathLexer=n,n.TOKEN_REF=1,n.RULE_REF=2,n.ANYWHERE=3,n.ROOT=4,n.WILDCARD=5,n.BANG=6,n.ID=7,n.STRING=8,n.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],n.modeNames=["DEFAULT_MODE"],n.ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"],n._LITERAL_NAMES=[void 0,void 0,void 0,"'//'","'/'","'*'","'!'"],n._SYMBOLIC_NAMES=[void 0,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"],n.VOCABULARY=new i.VocabularyImpl(n._LITERAL_NAMES,n._SYMBOLIC_NAMES,[]),n._serializedATNSegments=2,n._serializedATNSegment0=`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241
2\b					\x07	\x07\b	\b			\x07
\f"\v\x07\x07\b\b		\x07	,
	\f		/\v			-
\x07\x07	\b\v	\r
\u02B6
2;C\\aac|\x81\xA1\xAC\xAC\xAF\xAF\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0302\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u0485\u0489\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u0593\u05BF\u05C1\u05C1\u05C3\u05C4\u05C6\u05C7\u05C9\u05C9\u05D2\u05EC\u05F2\u05F4\u0602\u0607\u0612\u061C\u061E\u061E\u0622\u066B\u0670\u06D5\u06D7\u06DF\u06E1\u06EA\u06EC\u06FE\u0701\u0701\u0711\u074C\u074F\u07B3\u07C2\u07F7\u07FC\u07FC\u0802\u082F\u0842\u085D\u08A2\u08B6\u08B8\u08BF\u08D6\u0965\u0968\u0971\u0973\u0985\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BE\u09C6\u09C9\u09CA\u09CD\u09D0\u09D9\u09D9\u09DE\u09DF\u09E1\u09E5\u09E8\u09F3\u0A03\u0A05\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A3E\u0A3E\u0A40\u0A44\u0A49\u0A4A\u0A4D\u0A4F\u0A53\u0A53\u0A5B\u0A5E\u0A60\u0A60\u0A68\u0A77\u0A83\u0A85\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABE\u0AC7\u0AC9\u0ACB\u0ACD\u0ACF\u0AD2\u0AD2\u0AE2\u0AE5\u0AE8\u0AF1\u0AFB\u0AFB\u0B03\u0B05\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3E\u0B46\u0B49\u0B4A\u0B4D\u0B4F\u0B58\u0B59\u0B5E\u0B5F\u0B61\u0B65\u0B68\u0B71\u0B73\u0B73\u0B84\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BC0\u0BC4\u0BC8\u0BCA\u0BCC\u0BCF\u0BD2\u0BD2\u0BD9\u0BD9\u0BE8\u0BF1\u0C02\u0C05\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C46\u0C48\u0C4A\u0C4C\u0C4F\u0C57\u0C58\u0C5A\u0C5C\u0C62\u0C65\u0C68\u0C71\u0C82\u0C85\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBE\u0CC6\u0CC8\u0CCA\u0CCC\u0CCF\u0CD7\u0CD8\u0CE0\u0CE0\u0CE2\u0CE5\u0CE8\u0CF1\u0CF3\u0CF4\u0D03\u0D05\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D46\u0D48\u0D4A\u0D4C\u0D50\u0D56\u0D59\u0D61\u0D65\u0D68\u0D71\u0D7C\u0D81\u0D84\u0D85\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0DCC\u0DCC\u0DD1\u0DD6\u0DD8\u0DD8\u0DDA\u0DE1\u0DE8\u0DF1\u0DF4\u0DF5\u0E03\u0E3C\u0E42\u0E50\u0E52\u0E5B\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EBB\u0EBD\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0ECA\u0ECF\u0ED2\u0EDB\u0EDE\u0EE1\u0F02\u0F02\u0F1A\u0F1B\u0F22\u0F2B\u0F37\u0F37\u0F39\u0F39\u0F3B\u0F3B\u0F40\u0F49\u0F4B\u0F6E\u0F73\u0F86\u0F88\u0F99\u0F9B\u0FBE\u0FC8\u0FC8\u1002\u104B\u1052\u109F\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u135F\u1361\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1716\u1722\u1736\u1742\u1755\u1762\u176E\u1770\u1772\u1774\u1775\u1782\u17D5\u17D9\u17D9\u17DE\u17DF\u17E2\u17EB\u180D\u1810\u1812\u181B\u1822\u1879\u1882\u18AC\u18B2\u18F7\u1902\u1920\u1922\u192D\u1932\u193D\u1948\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u19D2\u19DB\u1A02\u1A1D\u1A22\u1A60\u1A62\u1A7E\u1A81\u1A8B\u1A92\u1A9B\u1AA9\u1AA9\u1AB2\u1ABF\u1B02\u1B4D\u1B52\u1B5B\u1B6D\u1B75\u1B82\u1BF5\u1C02\u1C39\u1C42\u1C4B\u1C4F\u1C7F\u1C82\u1C8A\u1CD2\u1CD4\u1CD6\u1CF8\u1CFA\u1CFB\u1D02\u1DF7\u1DFD\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u200D\u2011\u202C\u2030\u2041\u2042\u2056\u2056\u2062\u2066\u2068\u2071\u2073\u2073\u2081\u2081\u2092\u209E\u20D2\u20DE\u20E3\u20E3\u20E7\u20F2\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D81\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2DE2\u2E01\u2E31\u2E31\u3007\u3009\u3023\u3031\u3033\u3037\u303A\u303E\u3043\u3098\u309B\u309C\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA62D\uA642\uA671\uA676\uA67F\uA681\uA6F3\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA829\uA842\uA875\uA882\uA8C7\uA8D2\uA8DB\uA8E2\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA902\uA92F\uA932\uA955\uA962\uA97E\uA982\uA9C2\uA9D1\uA9DB\uA9E2\uAA00\uAA02\uAA38\uAA42\uAA4F\uAA52\uAA5B\uAA62\uAA78\uAA7C\uAAC4\uAADD\uAADF\uAAE2\uAAF1\uAAF4\uAAF8\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABEC\uABEE\uABEF\uABF2\uABFB\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE02\uFE11\uFE22\uFE31\uFE35\uFE36\uFE4F\uFE51\uFE72\uFE76\uFE78\uFEFE\uFF01\uFF01\uFF12\uFF1B\uFF23\uFF3C\uFF41\uFF41\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\uFFFB\uFFFD\r(*<>?AOR_\x82\xFC\u0142\u0176\u01FF\u01FF\u0282\u029E\u02A2\u02D2\u02E2\u02E2\u0302\u0321\u0332\u034C\u0352\u037C\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04A2\u04AB\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A05\u0A07\u0A08\u0A0E\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A3A\u0A3C\u0A41\u0A41\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE8\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1002\u1048\u1068\u1071\u1081\u10BC\u10BF\u10BF\u10D2\u10EA\u10F2\u10FB\u1102\u1136\u1138\u1141\u1152\u1175\u1178\u1178\u1182\u11C6\u11CC\u11CE\u11D2\u11DC\u11DE\u11DE\u1202\u1213\u1215\u1239\u1240\u1240\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12EC\u12F2\u12FB\u1302\u1305\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133E\u1346\u1349\u134A\u134D\u134F\u1352\u1352\u1359\u1359\u135F\u1365\u1368\u136E\u1372\u1376\u1402\u144C\u1452\u145B\u1482\u14C7\u14C9\u14C9\u14D2\u14DB\u1582\u15B7\u15BA\u15C2\u15DA\u15DF\u1602\u1642\u1646\u1646\u1652\u165B\u1682\u16B9\u16C2\u16CB\u1702\u171B\u171F\u172D\u1732\u173B\u18A2\u18EB\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C38\u1C3A\u1C42\u1C52\u1C5B\u1C74\u1C91\u1C94\u1CA9\u1CAB\u1CB8\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6A62\u6A6B\u6AD2\u6AEF\u6AF2\u6AF6\u6B02\u6B38\u6B42\u6B45\u6B52\u6B5B\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F80\u6F91\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uBC9F\uBCA0\uBCA2\uBCA5\uD167\uD16B\uD16F\uD184\uD187\uD18D\uD1AC\uD1AF\uD244\uD246\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uD7D0\uD801\uDA02\uDA38\uDA3D\uDA6E\uDA77\uDA77\uDA86\uDA86\uDA9D\uDAA1\uDAA3\uDAB1\uE002\uE008\uE00A\uE01A\uE01D\uE023\uE025\uE026\uE028\uE02C\uE802\uE8C6\uE8D2\uE8D8\uE902\uE94C\uE952\uE95B\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F"\x81\u0102\u01F1\u0240C\\c|\xAC\xAC\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0372\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u05D2\u05EC\u05F2\u05F4\u0622\u064C\u0670\u0671\u0673\u06D5\u06D7\u06D7\u06E7\u06E8\u06F0\u06F1\u06FC\u06FE\u0701\u0701\u0712\u0712\u0714\u0731\u074F\u07A7\u07B3\u07B3\u07CC\u07EC\u07F6\u07F7\u07FC\u07FC\u0802\u0817\u081C\u081C\u0826\u0826\u082A\u082A\u0842\u085A\u08A2\u08B6\u08B8\u08BF\u0906\u093B\u093F\u093F\u0952\u0952\u095A\u0963\u0973\u0982\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BF\u09BF\u09D0\u09D0\u09DE\u09DF\u09E1\u09E3\u09F2\u09F3\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A5B\u0A5E\u0A60\u0A60\u0A74\u0A76\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABF\u0ABF\u0AD2\u0AD2\u0AE2\u0AE3\u0AFB\u0AFB\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3F\u0B3F\u0B5E\u0B5F\u0B61\u0B63\u0B73\u0B73\u0B85\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BD2\u0BD2\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C3F\u0C5A\u0C5C\u0C62\u0C63\u0C82\u0C82\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBF\u0CBF\u0CE0\u0CE0\u0CE2\u0CE3\u0CF3\u0CF4\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D3F\u0D50\u0D50\u0D56\u0D58\u0D61\u0D63\u0D7C\u0D81\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0E03\u0E32\u0E34\u0E35\u0E42\u0E48\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EB2\u0EB4\u0EB5\u0EBF\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0EDE\u0EE1\u0F02\u0F02\u0F42\u0F49\u0F4B\u0F6E\u0F8A\u0F8E\u1002\u102C\u1041\u1041\u1052\u1057\u105C\u105F\u1063\u1063\u1067\u1068\u1070\u1072\u1077\u1083\u1090\u1090\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1713\u1722\u1733\u1742\u1753\u1762\u176E\u1770\u1772\u1782\u17B5\u17D9\u17D9\u17DE\u17DE\u1822\u1879\u1882\u1886\u1889\u18AA\u18AC\u18AC\u18B2\u18F7\u1902\u1920\u1952\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u1A02\u1A18\u1A22\u1A56\u1AA9\u1AA9\u1B07\u1B35\u1B47\u1B4D\u1B85\u1BA2\u1BB0\u1BB1\u1BBC\u1BE7\u1C02\u1C25\u1C4F\u1C51\u1C5C\u1C7F\u1C82\u1C8A\u1CEB\u1CEE\u1CF0\u1CF3\u1CF7\u1CF8\u1D02\u1DC1\u1E02\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u2073\u2073\u2081\u2081\u2092\u209E\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF0\u2CF4\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D82\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2E31\u2E31\u3007\u3009\u3023\u302B\u3033\u3037\u303A\u303E\u3043\u3098\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA621\uA62C\uA62D\uA642\uA670\uA681\uA69F\uA6A2\uA6F1\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA803\uA805\uA807\uA809\uA80C\uA80E\uA824\uA842\uA875\uA884\uA8B5\uA8F4\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA90C\uA927\uA932\uA948\uA962\uA97E\uA986\uA9B4\uA9D1\uA9D1\uA9E2\uA9E6\uA9E8\uA9F1\uA9FC\uAA00\uAA02\uAA2A\uAA42\uAA44\uAA46\uAA4D\uAA62\uAA78\uAA7C\uAA7C\uAA80\uAAB1\uAAB3\uAAB3\uAAB7\uAAB8\uAABB\uAABF\uAAC2\uAAC2\uAAC4\uAAC4\uAADD\uAADF\uAAE2\uAAEC\uAAF4\uAAF6\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABE4\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB1F\uFB21\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE72\uFE76\uFE78\uFEFE\uFF23\uFF3C\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\r(*<>?AOR_\x82\xFC\u0142\u0176\u0282\u029E\u02A2\u02D2\u0302\u0321\u0332\u034C\u0352\u0377\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A02\u0A12\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE6\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1005\u1039\u1085\u10B1\u10D2\u10EA\u1105\u1128\u1152\u1174\u1178\u1178\u1185\u11B4\u11C3\u11C6\u11DC\u11DC\u11DE\u11DE\u1202\u1213\u1215\u122D\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12E0\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133F\u133F\u1352\u1352\u135F\u1363\u1402\u1436\u1449\u144C\u1482\u14B1\u14C6\u14C7\u14C9\u14C9\u1582\u15B0\u15DA\u15DD\u1602\u1631\u1646\u1646\u1682\u16AC\u1702\u171B\u18A2\u18E1\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C30\u1C42\u1C42\u1C74\u1C91\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6AD2\u6AEF\u6B02\u6B31\u6B42\u6B45\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F52\u6F95\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548`,n._serializedATNSegment1=`\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uE802\uE8C6\uE902\uE945\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F1\x07	\v\x07	\v\r%')\x071\x071\x071\x07,\b\x1B\x07#\x1B
 \b\r\x07"  !!#" #$\b$\f%&	&'(	()-\x07)*,\v+*,/-.-+.0/-01\x07)1 -`,n._serializedATN=s.join([n._serializedATNSegment0,n._serializedATNSegment1],""),M_}var B_={},zR;function Oj(){if(zR)return B_;zR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(i,s,n,o){var a=arguments.length,l=a<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,n):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,s,n,o);else for(var d=i.length-1;d>=0;d--)(c=i[d])&&(l=(a<3?c(l):a>3?c(s,n,l):c(s,n))||l);return a>3&&l&&Object.defineProperty(s,n,l),l};Object.defineProperty(B_,"__esModule",{value:!0}),B_.XPathLexerErrorListener=void 0;const e=Xe;class t{syntaxError(s,n,o,a,l,c){}}return r([e.Override],t.prototype,"syntaxError",null),B_.XPathLexerErrorListener=t,B_}var L_={},U_={},HR;function Lf(){if(HR)return U_;HR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(i,s,n,o){var a=arguments.length,l=a<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,n):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,s,n,o);else for(var d=i.length-1;d>=0;d--)(c=i[d])&&(l=(a<3?c(l):a>3?c(s,n,l):c(s,n))||l);return a>3&&l&&Object.defineProperty(s,n,l),l};Object.defineProperty(U_,"__esModule",{value:!0}),U_.XPathElement=void 0;const e=Xe;class t{constructor(s){this.nodeName=s,this.invert=!1}toString(){let s=this.invert?"!":"";return Object.constructor.name+"["+s+this.nodeName+"]"}}return r([e.Override],t.prototype,"toString",null),U_.XPathElement=t,U_}var jR;function Nj(){if(jR)return L_;jR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d};Object.defineProperty(L_,"__esModule",{value:!0}),L_.XPathRuleAnywhereElement=void 0;const e=Xe,t=Dh(),i=Lf();class s extends i.XPathElement{constructor(o,a){super(o),this.ruleIndex=a}evaluate(o){return t.Trees.findAllRuleNodes(o,this.ruleIndex)}}return r([e.Override],s.prototype,"evaluate",null),L_.XPathRuleAnywhereElement=s,L_}var G_={},VR;function Ij(){if(VR)return G_;VR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(G_,"__esModule",{value:!0}),G_.XPathRuleElement=void 0;const e=Uo(),t=Xe,i=Dh(),s=Lf();class n extends s.XPathElement{constructor(a,l){super(a),this.ruleIndex=l}evaluate(a){let l=[];for(let c of i.Trees.getChildren(a))c instanceof e.ParserRuleContext&&(c.ruleIndex===this.ruleIndex&&!this.invert||c.ruleIndex!==this.ruleIndex&&this.invert)&&l.push(c);return l}}return r([t.Override],n.prototype,"evaluate",null),G_.XPathRuleElement=n,G_}var z_={},WR;function Fj(){if(WR)return z_;WR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d};Object.defineProperty(z_,"__esModule",{value:!0}),z_.XPathTokenAnywhereElement=void 0;const e=Xe,t=Dh(),i=Lf();class s extends i.XPathElement{constructor(o,a){super(o),this.tokenType=a}evaluate(o){return t.Trees.findAllTokenNodes(o,this.tokenType)}}return r([e.Override],s.prototype,"evaluate",null),z_.XPathTokenAnywhereElement=s,z_}var H_={},$R;function Mj(){if($R)return H_;$R=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(H_,"__esModule",{value:!0}),H_.XPathTokenElement=void 0;const e=Xe,t=Al,i=Dh(),s=Lf();class n extends s.XPathElement{constructor(a,l){super(a),this.tokenType=l}evaluate(a){let l=[];for(let c of i.Trees.getChildren(a))c instanceof t.TerminalNode&&(c.symbol.type===this.tokenType&&!this.invert||c.symbol.type!==this.tokenType&&this.invert)&&l.push(c);return l}}return r([e.Override],n.prototype,"evaluate",null),H_.XPathTokenElement=n,H_}var j_={},KR;function Bj(){if(KR)return j_;KR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(j_,"__esModule",{value:!0}),j_.XPathWildcardAnywhereElement=void 0;const e=Xe,t=Dh(),i=Hb(),s=Lf();class n extends s.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){return this.invert?[]:t.Trees.getDescendants(a)}}return r([e.Override],n.prototype,"evaluate",null),j_.XPathWildcardAnywhereElement=n,j_}var V_={},XR;function Lj(){if(XR)return V_;XR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(V_,"__esModule",{value:!0}),V_.XPathWildcardElement=void 0;const e=Xe,t=Dh(),i=Hb(),s=Lf();class n extends s.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){let l=[];if(this.invert)return l;for(let c of t.Trees.getChildren(a))l.push(c);return l}}return r([e.Override],n.prototype,"evaluate",null),V_.XPathWildcardElement=n,V_}var YR;function Hb(){if(YR)return F_;YR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(F_,"__esModule",{value:!0}),F_.XPath=void 0;const r=Q1,e=Bf,t=Th,i=Uo(),s=dr,n=Cj(),o=Oj(),a=Nj(),l=Ij(),c=Fj(),d=Mj(),f=Bj(),g=Lj();class x{constructor(P,b){this.parser=P,this.path=b,this.elements=this.split(b)}split(P){let b=new n.XPathLexer(r.CharStreams.fromString(P));b.recover=I=>{throw I},b.removeErrorListeners(),b.addErrorListener(new o.XPathLexerErrorListener);let D=new e.CommonTokenStream(b);try{D.fill()}catch(I){if(I instanceof t.LexerNoViableAltException){let R="Invalid tokens or characters at index "+b.charPositionInLine+" in path '"+P+"' -- "+I.message;throw new RangeError(R)}throw I}let C=D.getTokens(),O=[],N=C.length,j=0;e:for(;j<N;){let I=C[j],M;switch(I.type){case n.XPathLexer.ROOT:case n.XPathLexer.ANYWHERE:let R=I.type===n.XPathLexer.ANYWHERE;j++,M=C[j];let L=M.type===n.XPathLexer.BANG;L&&(j++,M=C[j]);let K=this.getXPathElement(M,R);K.invert=L,O.push(K),j++;break;case n.XPathLexer.TOKEN_REF:case n.XPathLexer.RULE_REF:case n.XPathLexer.WILDCARD:O.push(this.getXPathElement(I,!1)),j++;break;case s.Token.EOF:break e;default:throw new Error("Unknowth path element "+I)}}return O}getXPathElement(P,b){if(P.type===s.Token.EOF)throw new Error("Missing path element at end of path");let D=P.text;if(D==null)throw new Error("Expected wordToken to have text content.");let C=this.parser.getTokenType(D),O=this.parser.getRuleIndex(D);switch(P.type){case n.XPathLexer.WILDCARD:return b?new f.XPathWildcardAnywhereElement:new g.XPathWildcardElement;case n.XPathLexer.TOKEN_REF:case n.XPathLexer.STRING:if(C===s.Token.INVALID_TYPE)throw new Error(D+" at index "+P.startIndex+" isn't a valid token name");return b?new c.XPathTokenAnywhereElement(D,C):new d.XPathTokenElement(D,C);default:if(O===-1)throw new Error(D+" at index "+P.startIndex+" isn't a valid rule name");return b?new a.XPathRuleAnywhereElement(D,O):new l.XPathRuleElement(D,O)}}static findAll(P,b,D){return new x(D,b).evaluate(P)}evaluate(P){let b=new i.ParserRuleContext;b.addChild(P);let D=new Set([b]),C=0;for(;C<this.elements.length;){let O=new Set;for(let N of D)N.childCount>0&&this.elements[C].evaluate(N).forEach(O.add,O);C++,D=O}return D}}return F_.XPath=x,x.WILDCARD="*",x.NOT="!",F_}var qR;function Uj(){if(qR)return I_;qR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(I_,"__esModule",{value:!0}),I_.ParseTreePattern=void 0;const t=Xe,i=Hb();let s=class{constructor(o,a,l,c){this._matcher=o,this._patternRuleIndex=l,this._pattern=a,this._patternTree=c}match(o){return this._matcher.match(o,this)}matches(o){return this._matcher.match(o,this).succeeded}findAll(o,a){let l=i.XPath.findAll(o,a,this._matcher.parser),c=[];for(let d of l){let f=this.match(d);f.succeeded&&c.push(f)}return c}get matcher(){return this._matcher}get pattern(){return this._pattern}get patternRuleIndex(){return this._patternRuleIndex}get patternTree(){return this._patternTree}};return r([t.NotNull],s.prototype,"_pattern",void 0),r([t.NotNull],s.prototype,"_patternTree",void 0),r([t.NotNull],s.prototype,"_matcher",void 0),r([t.NotNull,e(0,t.NotNull)],s.prototype,"match",null),r([e(0,t.NotNull)],s.prototype,"matches",null),r([t.NotNull,e(0,t.NotNull),e(1,t.NotNull)],s.prototype,"findAll",null),r([t.NotNull],s.prototype,"matcher",null),r([t.NotNull],s.prototype,"pattern",null),r([t.NotNull],s.prototype,"patternTree",null),s=r([e(0,t.NotNull),e(1,t.NotNull),e(3,t.NotNull)],s),I_.ParseTreePattern=s,I_}var W_={},QR;function Gj(){if(QR)return W_;QR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(W_,"__esModule",{value:!0}),W_.RuleTagToken=void 0;const t=Xe,i=dr;let s=class{constructor(o,a,l){if(o==null||o.length===0)throw new Error("ruleName cannot be null or empty.");this._ruleName=o,this.bypassTokenType=a,this._label=l}get ruleName(){return this._ruleName}get label(){return this._label}get channel(){return i.Token.DEFAULT_CHANNEL}get text(){return this._label!=null?"<"+this._label+":"+this._ruleName+">":"<"+this._ruleName+">"}get type(){return this.bypassTokenType}get line(){return 0}get charPositionInLine(){return-1}get tokenIndex(){return-1}get startIndex(){return-1}get stopIndex(){return-1}get tokenSource(){}get inputStream(){}toString(){return this._ruleName+":"+this.bypassTokenType}};return r([t.NotNull],s.prototype,"ruleName",null),r([t.Override],s.prototype,"channel",null),r([t.Override],s.prototype,"text",null),r([t.Override],s.prototype,"type",null),r([t.Override],s.prototype,"line",null),r([t.Override],s.prototype,"charPositionInLine",null),r([t.Override],s.prototype,"tokenIndex",null),r([t.Override],s.prototype,"startIndex",null),r([t.Override],s.prototype,"stopIndex",null),r([t.Override],s.prototype,"tokenSource",null),r([t.Override],s.prototype,"inputStream",null),r([t.Override],s.prototype,"toString",null),s=r([e(0,t.NotNull)],s),W_.RuleTagToken=s,W_}var $_={},K_={},JR;function mI(){if(JR)return K_;JR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(K_,"__esModule",{value:!0}),K_.Chunk=void 0;class r{}return K_.Chunk=r,K_}var ZR;function zj(){if(ZR)return $_;ZR=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,c=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(c=(l<3?d(c):l>3?d(n,o,c):d(n,o))||c);return l>3&&c&&Object.defineProperty(n,o,c),c};Object.defineProperty($_,"__esModule",{value:!0}),$_.TagChunk=void 0;const e=mI(),t=Xe;class i extends e.Chunk{constructor(n,o){if(super(),n==null||n.length===0)throw new Error("tag cannot be null or empty");this._tag=n,this._label=o}get tag(){return this._tag}get label(){return this._label}toString(){return this._label!=null?this._label+":"+this._tag:this._tag}}return r([t.NotNull],i.prototype,"tag",null),r([t.Override],i.prototype,"toString",null),$_.TagChunk=i,$_}var X_={},eD;function Hj(){if(eD)return X_;eD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(X_,"__esModule",{value:!0}),X_.TextChunk=void 0;const t=mI(),i=Xe;let s=class extends t.Chunk{constructor(o){if(super(),o==null)throw new Error("text cannot be null");this._text=o}get text(){return this._text}toString(){return"'"+this._text+"'"}};return r([i.NotNull],s.prototype,"_text",void 0),r([i.NotNull],s.prototype,"text",null),r([i.Override],s.prototype,"toString",null),s=r([e(0,i.NotNull)],s),X_.TextChunk=s,X_}var Y_={},tD;function jj(){if(tD)return Y_;tD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.TokenTagToken=void 0;const t=Ou,i=Xe;let s=class extends t.CommonToken{constructor(o,a,l){super(a),this._tokenName=o,this._label=l}get tokenName(){return this._tokenName}get label(){return this._label}get text(){return this._label!=null?"<"+this._label+":"+this._tokenName+">":"<"+this._tokenName+">"}toString(){return this._tokenName+":"+this.type}};return r([i.NotNull],s.prototype,"_tokenName",void 0),r([i.NotNull],s.prototype,"tokenName",null),r([i.Override],s.prototype,"text",null),r([i.Override],s.prototype,"toString",null),s=r([e(0,i.NotNull)],s),Y_.TokenTagToken=s,Y_}var rD;function Vj(){return rD||(rD=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__decorate||function(M,R,L,K){var Q=arguments.length,ue=Q<3?R:K===null?K=Object.getOwnPropertyDescriptor(R,L):K,ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ue=Reflect.decorate(M,R,L,K);else for(var Re=M.length-1;Re>=0;Re--)(ae=M[Re])&&(ue=(Q<3?ae(ue):Q>3?ae(R,L,ue):ae(R,L))||ue);return Q>3&&ue&&Object.defineProperty(R,L,ue),ue},t=$&&$.__param||function(M,R){return function(L,K){R(L,K,M)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ParseTreePatternMatcher=void 0;const i=xI(),s=Q1,n=Bf,o=Rg,a=Pj(),l=Xe,c=Dg,d=gI(),f=Uo(),g=Dj(),x=Uj(),E=Ra,P=Mf,b=Gj(),D=zj(),C=Al,O=Hj(),N=dr,j=jj();class I{constructor(R,L){this.start="<",this.stop=">",this.escape="\\",this.escapeRE=/\\/g,this._lexer=R,this._parser=L}setDelimiters(R,L,K){if(!R)throw new Error("start cannot be null or empty");if(!L)throw new Error("stop cannot be null or empty");this.start=R,this.stop=L,this.escape=K,this.escapeRE=new RegExp(K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}matches(R,L,K=0){if(typeof L=="string"){let Q=this.compile(L,K);return this.matches(R,Q)}else{let Q=new a.MultiMap;return!this.matchImpl(R,L.patternTree,Q)}}match(R,L,K=0){if(typeof L=="string"){let Q=this.compile(L,K);return this.match(R,Q)}else{let Q=new a.MultiMap,ue=this.matchImpl(R,L.patternTree,Q);return new g.ParseTreeMatch(R,L,Q,ue)}}compile(R,L){let K=this.tokenize(R),Q=new o.ListTokenSource(K),ue=new n.CommonTokenStream(Q);const ae=this._parser;let Re=new d.ParserInterpreter(ae.grammarFileName,ae.vocabulary,ae.ruleNames,ae.getATNWithBypassAlts(),ue),Ue;try{Re.errorHandler=new i.BailErrorStrategy,Ue=Re.parse(L)}catch(rt){throw rt instanceof c.ParseCancellationException?rt.getCause():rt instanceof E.RecognitionException?rt:rt instanceof Error?new I.CannotInvokeStartRule(rt):rt}if(ue.LA(1)!==N.Token.EOF)throw new I.StartRuleDoesNotConsumeFullPattern;return new x.ParseTreePattern(this,R,L,Ue)}get lexer(){return this._lexer}get parser(){return this._parser}matchImpl(R,L,K){if(!R)throw new TypeError("tree cannot be null");if(!L)throw new TypeError("patternTree cannot be null");if(R instanceof C.TerminalNode&&L instanceof C.TerminalNode){let Q;if(R.symbol.type===L.symbol.type)if(L.symbol instanceof j.TokenTagToken){let ue=L.symbol;K.map(ue.tokenName,R);const ae=ue.label;ae&&K.map(ae,R)}else R.text===L.text||Q||(Q=R);else Q||(Q=R);return Q}if(R instanceof f.ParserRuleContext&&L instanceof f.ParserRuleContext){let Q,ue=this.getRuleTagToken(L);if(ue){if(R.ruleContext.ruleIndex===L.ruleContext.ruleIndex){K.map(ue.ruleName,R);const Re=ue.label;Re&&K.map(Re,R)}else Q||(Q=R);return Q}if(R.childCount!==L.childCount)return Q||(Q=R),Q;let ae=R.childCount;for(let Re=0;Re<ae;Re++){let Ue=this.matchImpl(R.getChild(Re),L.getChild(Re),K);if(Ue)return Ue}return Q}return R}getRuleTagToken(R){if(R instanceof P.RuleNode&&R.childCount===1&&R.getChild(0)instanceof C.TerminalNode){let L=R.getChild(0);if(L.symbol instanceof b.RuleTagToken)return L.symbol}}tokenize(R){let L=this.split(R),K=[];for(let Q of L)if(Q instanceof D.TagChunk){let ue=Q;const ae=ue.tag.substr(0,1);if(ae===ae.toUpperCase()){let Re=this._parser.getTokenType(ue.tag);if(Re===N.Token.INVALID_TYPE)throw new Error("Unknown token "+ue.tag+" in pattern: "+R);let Ue=new j.TokenTagToken(ue.tag,Re,ue.label);K.push(Ue)}else if(ae===ae.toLowerCase()){let Re=this._parser.getRuleIndex(ue.tag);if(Re===-1)throw new Error("Unknown rule "+ue.tag+" in pattern: "+R);let Ue=this._parser.getATNWithBypassAlts().ruleToTokenType[Re];K.push(new b.RuleTagToken(ue.tag,Ue,ue.label))}else throw new Error("invalid tag: "+ue.tag+" in pattern: "+R)}else{let ue=Q;this._lexer.inputStream=s.CharStreams.fromString(ue.text);let ae=this._lexer.nextToken();for(;ae.type!==N.Token.EOF;)K.push(ae),ae=this._lexer.nextToken()}return K}split(R){let L=0,K=R.length,Q=[],ue=[],ae=[];for(;L<K;)L===R.indexOf(this.escape+this.start,L)?L+=this.escape.length+this.start.length:L===R.indexOf(this.escape+this.stop,L)?L+=this.escape.length+this.stop.length:L===R.indexOf(this.start,L)?(ue.push(L),L+=this.start.length):L===R.indexOf(this.stop,L)?(ae.push(L),L+=this.stop.length):L++;if(ue.length>ae.length)throw new Error("unterminated tag in pattern: "+R);if(ue.length<ae.length)throw new Error("missing start tag in pattern: "+R);let Re=ue.length;for(let Ue=0;Ue<Re;Ue++)if(ue[Ue]>=ae[Ue])throw new Error("tag delimiters out of order in pattern: "+R);if(Re===0){let Ue=R.substring(0,K);Q.push(new O.TextChunk(Ue))}if(Re>0&&ue[0]>0){let Ue=R.substring(0,ue[0]);Q.push(new O.TextChunk(Ue))}for(let Ue=0;Ue<Re;Ue++){let rt=R.substring(ue[Ue]+this.start.length,ae[Ue]),Ve=rt,Fe,nt=rt.indexOf(":");if(nt>=0&&(Fe=rt.substring(0,nt),Ve=rt.substring(nt+1,rt.length)),Q.push(new D.TagChunk(Ve,Fe)),Ue+1<Re){let dt=R.substring(ae[Ue]+this.stop.length,ue[Ue+1]);Q.push(new O.TextChunk(dt))}}if(Re>0){let Ue=ae[Re-1]+this.stop.length;if(Ue<K){let rt=R.substring(Ue,K);Q.push(new O.TextChunk(rt))}}for(let Ue=0;Ue<Q.length;Ue++){let rt=Q[Ue];if(rt instanceof O.TextChunk){let Ve=rt.text.replace(this.escapeRE,"");Ve.length<rt.text.length&&(Q[Ue]=new O.TextChunk(Ve))}}return Q}}e([l.NotNull,t(1,l.NotNull)],I.prototype,"match",null),e([l.NotNull],I.prototype,"lexer",null),e([l.NotNull],I.prototype,"parser",null),e([t(0,l.NotNull),t(1,l.NotNull),t(2,l.NotNull)],I.prototype,"matchImpl",null),r.ParseTreePatternMatcher=I,function(M){class R extends Error{constructor(Q){super(`CannotInvokeStartRule: ${Q}`),this.error=Q}}M.CannotInvokeStartRule=R;class L extends Error{constructor(){super("StartRuleDoesNotConsumeFullPattern")}}M.StartRuleDoesNotConsumeFullPattern=L}(I=r.ParseTreePatternMatcher||(r.ParseTreePatternMatcher={}))}(zE)),zE}var q_={},Q_={},J_={},iD;function Cg(){if(iD)return J_;iD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(s,n,o,a){var l=arguments.length,c=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,o):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,n,o,a);else for(var f=s.length-1;f>=0;f--)(d=s[f])&&(c=(l<3?d(c):l>3?d(n,o,c):d(n,o))||c);return l>3&&c&&Object.defineProperty(n,o,c),c},e=$&&$.__param||function(s,n){return function(o,a){n(o,a,s)}};Object.defineProperty(J_,"__esModule",{value:!0}),J_.DecisionEventInfo=void 0;const t=Xe;let i=class{constructor(n,o,a,l,c,d){this.decision=n,this.fullCtx=d,this.stopIndex=c,this.input=a,this.startIndex=l,this.state=o}};return r([t.NotNull],i.prototype,"input",void 0),i=r([e(2,t.NotNull)],i),J_.DecisionEventInfo=i,J_}var nD;function Wj(){if(nD)return Q_;nD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.AmbiguityInfo=void 0;const t=Cg(),i=Xe;let s=class extends t.DecisionEventInfo{constructor(o,a,l,c,d,f){super(o,a,c,d,f,a.useContext),this.ambigAlts=l}get ambiguousAlternatives(){return this.ambigAlts}};return r([i.NotNull],s.prototype,"ambigAlts",void 0),r([i.NotNull],s.prototype,"ambiguousAlternatives",null),s=r([e(1,i.NotNull),e(2,i.NotNull),e(3,i.NotNull)],s),Q_.AmbiguityInfo=s,Q_}var Z_={},sD;function $j(){if(sD)return Z_;sD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.ContextSensitivityInfo=void 0;const t=Cg(),i=Xe;let s=class extends t.DecisionEventInfo{constructor(o,a,l,c,d){super(o,a,l,c,d,!0)}};return s=r([e(1,i.NotNull),e(2,i.NotNull)],s),Z_.ContextSensitivityInfo=s,Z_}var ep={},oD;function Kj(){if(oD)return ep;oD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(i,s,n,o){var a=arguments.length,l=a<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,n):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,s,n,o);else for(var d=i.length-1;d>=0;d--)(c=i[d])&&(l=(a<3?c(l):a>3?c(s,n,l):c(s,n))||l);return a>3&&l&&Object.defineProperty(s,n,l),l};Object.defineProperty(ep,"__esModule",{value:!0}),ep.DecisionInfo=void 0;const e=Xe;class t{constructor(s){this.invocations=0,this.timeInPrediction=0,this.SLL_TotalLook=0,this.SLL_MinLook=0,this.SLL_MaxLook=0,this.LL_TotalLook=0,this.LL_MinLook=0,this.LL_MaxLook=0,this.contextSensitivities=[],this.errors=[],this.ambiguities=[],this.predicateEvals=[],this.SLL_ATNTransitions=0,this.SLL_DFATransitions=0,this.LL_Fallback=0,this.LL_ATNTransitions=0,this.LL_DFATransitions=0,this.decision=s}toString(){return"{decision="+this.decision+", contextSensitivities="+this.contextSensitivities.length+", errors="+this.errors.length+", ambiguities="+this.ambiguities.length+", SLL_lookahead="+this.SLL_TotalLook+", SLL_ATNTransitions="+this.SLL_ATNTransitions+", SLL_DFATransitions="+this.SLL_DFATransitions+", LL_Fallback="+this.LL_Fallback+", LL_lookahead="+this.LL_TotalLook+", LL_ATNTransitions="+this.LL_ATNTransitions+"}"}}return r([e.Override],t.prototype,"toString",null),ep.DecisionInfo=t,ep}var tp={},aD;function Xj(){if(aD)return tp;aD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(tp,"__esModule",{value:!0}),tp.ErrorInfo=void 0;const t=Cg(),i=Xe;let s=class extends t.DecisionEventInfo{constructor(o,a,l,c,d){super(o,a,l,c,d,a.useContext)}};return s=r([e(1,i.NotNull),e(2,i.NotNull)],s),tp.ErrorInfo=s,tp}var rp={},lD;function Yj(){if(lD)return rp;lD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(rp,"__esModule",{value:!0}),rp.LookaheadEventInfo=void 0;const t=Cg(),i=Xe;let s=class extends t.DecisionEventInfo{constructor(o,a,l,c,d,f,g){super(o,a,c,d,f,g),this.predictedAlt=l}};return s=r([e(3,i.NotNull)],s),rp.LookaheadEventInfo=s,rp}var ip={},uD;function qj(){if(uD)return ip;uD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d},e=$&&$.__param||function(n,o){return function(a,l){o(a,l,n)}};Object.defineProperty(ip,"__esModule",{value:!0}),ip.PredicateEvalInfo=void 0;const t=Cg(),i=Xe;let s=class extends t.DecisionEventInfo{constructor(o,a,l,c,d,f,g,x){super(a,o,l,c,d,o.useContext),this.semctx=f,this.evalResult=g,this.predictedAlt=x}};return s=r([e(0,i.NotNull),e(2,i.NotNull),e(5,i.NotNull)],s),ip.PredicateEvalInfo=s,ip}var cD;function hD(){if(cD)return q_;cD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(P,b,D,C){var O=arguments.length,N=O<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,D):C,j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(P,b,D,C);else for(var I=P.length-1;I>=0;I--)(j=P[I])&&(N=(O<3?j(N):O>3?j(b,D,N):j(b,D))||N);return O>3&&N&&Object.defineProperty(b,D,N),N},e=$&&$.__param||function(P,b){return function(D,C){b(D,C,P)}};Object.defineProperty(q_,"__esModule",{value:!0}),q_.ProfilingATNSimulator=void 0;const t=Wj(),i=Oa(),s=b1(),n=$j(),o=Kj(),a=Xj(),l=Xe,c=Yj(),d=Sg(),f=qj(),g=vh,x=aI();class E extends d.ParserATNSimulator{constructor(b){super(b.interpreter.atn,b),this._startIndex=0,this._sllStopIndex=0,this._llStopIndex=0,this.currentDecision=0,this.conflictingAltResolvedBySLL=0,this.optimize_ll1=!1,this.reportAmbiguities=!0,this.numDecisions=this.atn.decisionToState.length,this.decisions=[];for(let D=0;D<this.numDecisions;D++)this.decisions.push(new o.DecisionInfo(D))}adaptivePredict(b,D,C,O){if(O!==void 0)return super.adaptivePredict(b,D,C,O);try{this._input=b,this._startIndex=b.index,this._sllStopIndex=this._startIndex-1,this._llStopIndex=-1,this.currentDecision=D,this.currentState=void 0,this.conflictingAltResolvedBySLL=i.ATN.INVALID_ALT_NUMBER;let N=process.hrtime(),j=super.adaptivePredict(b,D,C),I=process.hrtime(),M=(I[0]-N[0])*1e9;M===0?M=I[1]-N[1]:M+=1e9-N[1]+I[1],this.decisions[D].timeInPrediction+=M,this.decisions[D].invocations++;let R=this._sllStopIndex-this._startIndex+1;if(this.decisions[D].SLL_TotalLook+=R,this.decisions[D].SLL_MinLook=this.decisions[D].SLL_MinLook===0?R:Math.min(this.decisions[D].SLL_MinLook,R),R>this.decisions[D].SLL_MaxLook&&(this.decisions[D].SLL_MaxLook=R,this.decisions[D].SLL_MaxLookEvent=new c.LookaheadEventInfo(D,void 0,j,b,this._startIndex,this._sllStopIndex,!1)),this._llStopIndex>=0){let L=this._llStopIndex-this._startIndex+1;this.decisions[D].LL_TotalLook+=L,this.decisions[D].LL_MinLook=this.decisions[D].LL_MinLook===0?L:Math.min(this.decisions[D].LL_MinLook,L),L>this.decisions[D].LL_MaxLook&&(this.decisions[D].LL_MaxLook=L,this.decisions[D].LL_MaxLookEvent=new c.LookaheadEventInfo(D,void 0,j,b,this._startIndex,this._llStopIndex,!0))}return j}finally{this._input=void 0,this.currentDecision=-1}}getStartState(b,D,C,O){let N=super.getStartState(b,D,C,O);return this.currentState=N,N}computeStartState(b,D,C){let O=super.computeStartState(b,D,C);return this.currentState=O,O}computeReachSet(b,D,C,O){if(this._input===void 0)throw new Error("Invalid state");let N=super.computeReachSet(b,D,C,O);return N==null&&this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,D,this._input,this._startIndex,this._input.index)),this.currentState=N,N}getExistingTargetState(b,D){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");this.currentState.useContext?this._llStopIndex=this._input.index:this._sllStopIndex=this._input.index;let C=super.getExistingTargetState(b,D);if(C!=null&&(this.currentState=new x.SimulatorState(this.currentState.outerContext,C,this.currentState.useContext,this.currentState.remainingOuterContext),this.currentState.useContext?this.decisions[this.currentDecision].LL_DFATransitions++:this.decisions[this.currentDecision].SLL_DFATransitions++,C===s.ATNSimulator.ERROR)){let O=new x.SimulatorState(this.currentState.outerContext,b,this.currentState.useContext,this.currentState.remainingOuterContext);this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,O,this._input,this._startIndex,this._input.index))}return C}computeTargetState(b,D,C,O,N,j){let I=super.computeTargetState(b,D,C,O,N,j);return N?this.decisions[this.currentDecision].LL_ATNTransitions++:this.decisions[this.currentDecision].SLL_ATNTransitions++,I}evalSemanticContextImpl(b,D,C){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let O=super.evalSemanticContextImpl(b,D,C);if(!(b instanceof g.SemanticContext.PrecedencePredicate)){let j=this._llStopIndex>=0?this._llStopIndex:this._sllStopIndex;this.decisions[this.currentDecision].predicateEvals.push(new f.PredicateEvalInfo(this.currentState,this.currentDecision,this._input,this._startIndex,j,b,O,C))}return O}reportContextSensitivity(b,D,C,O,N){if(this._input===void 0)throw new Error("Invalid state");D!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new n.ContextSensitivityInfo(this.currentDecision,C,this._input,O,N)),super.reportContextSensitivity(b,D,C,O,N)}reportAttemptingFullContext(b,D,C,O,N){D!=null?this.conflictingAltResolvedBySLL=D.nextSetBit(0):this.conflictingAltResolvedBySLL=C.s0.configs.getRepresentedAlternatives().nextSetBit(0),this.decisions[this.currentDecision].LL_Fallback++,super.reportAttemptingFullContext(b,D,C,O,N)}reportAmbiguity(b,D,C,O,N,j,I){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let M;j!=null?M=j.nextSetBit(0):M=I.getRepresentedAlternatives().nextSetBit(0),this.conflictingAltResolvedBySLL!==i.ATN.INVALID_ALT_NUMBER&&M!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new n.ContextSensitivityInfo(this.currentDecision,this.currentState,this._input,C,O)),this.decisions[this.currentDecision].ambiguities.push(new t.AmbiguityInfo(this.currentDecision,this.currentState,j,this._input,C,O)),super.reportAmbiguity(b,D,C,O,N,j,I)}getDecisionInfo(){return this.decisions}getCurrentState(){return this.currentState}}return r([l.Override,e(0,l.NotNull)],E.prototype,"adaptivePredict",null),r([l.Override],E.prototype,"getStartState",null),r([l.Override],E.prototype,"computeStartState",null),r([l.Override],E.prototype,"computeReachSet",null),r([l.Override],E.prototype,"getExistingTargetState",null),r([l.Override],E.prototype,"computeTargetState",null),r([l.Override],E.prototype,"evalSemanticContextImpl",null),r([l.Override],E.prototype,"reportContextSensitivity",null),r([l.Override],E.prototype,"reportAttemptingFullContext",null),r([l.Override,e(0,l.NotNull),e(5,l.NotNull),e(6,l.NotNull)],E.prototype,"reportAmbiguity",null),q_.ProfilingATNSimulator=E,q_}var dD;function Og(){if(dD)return S_;dD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(O,N,j,I){var M=arguments.length,R=M<3?N:I===null?I=Object.getOwnPropertyDescriptor(N,j):I,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(O,N,j,I);else for(var K=O.length-1;K>=0;K--)(L=O[K])&&(R=(M<3?L(R):M>3?L(N,j,R):L(N,j))||R);return M>3&&R&&Object.defineProperty(N,j,R),R},e=$&&$.__param||function(O,N){return function(j,I){N(j,I,O)}},t=$&&$.__awaiter||function(O,N,j,I){function M(R){return R instanceof j?R:new j(function(L){L(R)})}return new(j||(j=Promise))(function(R,L){function K(ae){try{ue(I.next(ae))}catch(Re){L(Re)}}function Q(ae){try{ue(I.throw(ae))}catch(Re){L(Re)}}function ue(ae){ae.done?R(ae.value):M(ae.value).then(K,Q)}ue((I=I.apply(O,N||[])).next())})};Object.defineProperty(S_,"__esModule",{value:!0}),S_.Parser=void 0;const i=Ei,s=dg,n=Mb(),o=jb(),a=Ff,l=ng,c=Mu(),d=Xe,f=Y1,g=Sg(),x=kg,E=Nu,P=Al,b=dr;class D{constructor(N,j){this.ruleNames=N,this.tokenStream=j}enterEveryRule(N){console.log("enter   "+this.ruleNames[N.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(N){console.log("exit    "+this.ruleNames[N.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(N){}visitTerminal(N){let j=N.parent.ruleContext,I=N.symbol;console.log("consume "+I+" rule "+this.ruleNames[j.ruleIndex])}}r([d.Override],D.prototype,"enterEveryRule",null),r([d.Override],D.prototype,"exitEveryRule",null),r([d.Override],D.prototype,"visitErrorNode",null),r([d.Override],D.prototype,"visitTerminal",null);class C extends E.Recognizer{constructor(N){super(),this._errHandler=new o.DefaultErrorStrategy,this._precedenceStack=new l.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=N}reset(N){(N===void 0||N)&&this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let j=this.interpreter;j!=null&&j.reset()}match(N){let j=this.currentToken;return j.type===N?(N===b.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(j=this._errHandler.recoverInline(this),this._buildParseTrees&&j.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,j))),j}matchWildcard(){let N=this.currentToken;return N.type>0?(this._errHandler.reportMatch(this),this.consume()):(N=this._errHandler.recoverInline(this),this._buildParseTrees&&N.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,N))),N}set buildParseTree(N){this._buildParseTrees=N}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(N){if(N==null)throw new TypeError("listener cannot be null");this._parseListeners.push(N)}removeParseListener(N){let j=this._parseListeners.findIndex(I=>I===N);j!==-1&&this._parseListeners.splice(j,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let N of this._parseListeners)N.enterEveryRule&&N.enterEveryRule(this._ctx),this._ctx.enterRule(N)}triggerExitRuleEvent(){for(let N=this._parseListeners.length-1;N>=0;N--){let j=this._parseListeners[N];this._ctx.exitRule(j),j.exitEveryRule&&j.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let N=this.serializedATN;if(N==null)throw new Error("The current parser does not support an ATN with bypass alternatives.");let j=C.bypassAltsAtnCache.get(N);if(j==null){let I=new s.ATNDeserializationOptions;I.isGenerateRuleBypassTransitions=!0,j=new n.ATNDeserializer(I).deserialize(i.toCharArray(N)),C.bypassAltsAtnCache.set(N,j)}return j}compileParseTreePattern(N,j,I){return t(this,void 0,void 0,function*(){if(!I){if(this.inputStream){let K=this.inputStream.tokenSource;K instanceof c.Lexer&&(I=K)}if(!I)throw new Error("Parser can't discover a lexer to use")}let M=I,R=yield Promise.resolve().then(()=>Vj());return new R.ParseTreePatternMatcher(M,this).compile(N,j)})}get errorHandler(){return this._errHandler}set errorHandler(N){this._errHandler=N}get inputStream(){return this._input}set inputStream(N){this.reset(!1),this._input=N}get currentToken(){return this._input.LT(1)}notifyErrorListeners(N,j,I){j===void 0?j=this.currentToken:j===null&&(j=void 0),this._syntaxErrors++;let M=-1,R=-1;j!=null&&(M=j.line,R=j.charPositionInLine);let L=this.getErrorListenerDispatch();L.syntaxError&&L.syntaxError(this,j,M,R,N,I)}consume(){let N=this.currentToken;N.type!==C.EOF&&this.inputStream.consume();let j=this._parseListeners.length!==0;if(this._buildParseTrees||j)if(this._errHandler.inErrorRecoveryMode(this)){let I=this._ctx.addErrorNode(this.createErrorNode(this._ctx,N));if(j)for(let M of this._parseListeners)M.visitErrorNode&&M.visitErrorNode(I)}else{let I=this.createTerminalNode(this._ctx,N);if(this._ctx.addChild(I),j)for(let M of this._parseListeners)M.visitTerminal&&M.visitTerminal(I)}return N}createTerminalNode(N,j){return new P.TerminalNode(j)}createErrorNode(N,j){return new a.ErrorNode(j)}addContextToParseTree(){let N=this._ctx._parent;N!=null&&N.addChild(this._ctx)}enterRule(N,j,I){this.state=j,this._ctx=N,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(N,j,I){if(this.state=j,this._buildParseTrees){let M=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),M._parent=N,N.addChild(M)}this._ctx=N,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(N,j){if(N.altNumber=j,this._buildParseTrees&&this._ctx!==N){let I=this._ctx._parent;I!=null&&(I.removeLastChild(),I.addChild(N))}this._ctx=N}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(N,j,I,M){this.state=j,this._precedenceStack.push(M),this._ctx=N,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(N,j,I){let M=this._ctx;M._parent=N,M.invokingState=j,M._stop=this._input.tryLT(-1),this._ctx=N,this._ctx._start=M._start,this._buildParseTrees&&this._ctx.addChild(M),this.triggerEnterRuleEvent()}unrollRecursionContexts(N){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let j=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==N;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=N;j._parent=N,this._buildParseTrees&&N!=null&&N.addChild(j)}getInvokingContext(N){let j=this._ctx;for(;j&&j.ruleIndex!==N;)j=j._parent;return j}get context(){return this._ctx}set context(N){this._ctx=N}precpred(N,j){return j>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new x.ProxyParserErrorListener(this.getErrorListeners())}inContext(N){return!1}isExpectedToken(N){let j=this.interpreter.atn,I=this._ctx,M=j.states[this.state],R=j.nextTokens(M);if(R.contains(N))return!0;if(!R.contains(b.Token.EPSILON))return!1;for(;I!=null&&I.invokingState>=0&&R.contains(b.Token.EPSILON);){let K=j.states[I.invokingState].transition(0);if(R=j.nextTokens(K.followState),R.contains(N))return!0;I=I._parent}return!!(R.contains(b.Token.EPSILON)&&N===b.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let N=this.interpreter.atn,j=N.states[this.state];return N.nextTokens(j)}getRuleIndex(N){let j=this.getRuleIndexMap().get(N);return j!=null?j:-1}get ruleContext(){return this._ctx}getRuleInvocationStack(N=this._ctx){let j=N,I=this.ruleNames,M=[];for(;j!=null;){let R=j.ruleIndex;R<0?M.push("n/a"):M.push(I[R]),j=j._parent}return M}getDFAStrings(){let N=[];for(let j of this._interp.atn.decisionToDFA)N.push(j.toString(this.vocabulary,this.ruleNames));return N}dumpDFA(){let N=!1;for(let j of this._interp.atn.decisionToDFA)j.isEmpty||(N&&console.log(),console.log("Decision "+j.decision+":"),process.stdout.write(j.toString(this.vocabulary,this.ruleNames)),N=!0)}get sourceName(){return this._input.sourceName}get parseInfo(){return Promise.resolve().then(()=>hD()).then(N=>{let j=this.interpreter;if(j instanceof N.ProfilingATNSimulator)return new f.ParseInfo(j)})}setProfile(N){return t(this,void 0,void 0,function*(){let j=yield Promise.resolve().then(()=>hD()),I=this.interpreter;N?I instanceof j.ProfilingATNSimulator||(this.interpreter=new j.ProfilingATNSimulator(this)):I instanceof j.ProfilingATNSimulator&&(this.interpreter=new g.ParserATNSimulator(this.atn,this)),this.interpreter.setPredictionMode(I.getPredictionMode())})}set isTrace(N){N?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new D(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return this._tracer!=null}}return C.bypassAltsAtnCache=new Map,r([d.NotNull],C.prototype,"_errHandler",void 0),r([d.NotNull],C.prototype,"match",null),r([d.NotNull],C.prototype,"matchWildcard",null),r([d.NotNull],C.prototype,"getParseListeners",null),r([e(0,d.NotNull)],C.prototype,"addParseListener",null),r([d.NotNull],C.prototype,"getATNWithBypassAlts",null),r([d.NotNull,e(0,d.NotNull)],C.prototype,"errorHandler",null),r([d.Override],C.prototype,"inputStream",null),r([d.NotNull],C.prototype,"currentToken",null),r([e(0,d.NotNull)],C.prototype,"enterRule",null),r([d.Override,e(0,d.Nullable)],C.prototype,"precpred",null),r([d.Override],C.prototype,"getErrorListenerDispatch",null),r([d.NotNull],C.prototype,"getExpectedTokens",null),r([d.NotNull],C.prototype,"getExpectedTokensWithinCurrentRule",null),r([d.Override],C.prototype,"parseInfo",null),S_.Parser=C,S_}var fD;function ev(){if(fD)return E_;fD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(n,o,a,l){var c=arguments.length,d=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(n,o,a,l);else for(var g=n.length-1;g>=0;g--)(f=n[g])&&(d=(c<3?f(d):c>3?f(o,a,d):f(o,a))||d);return c>3&&d&&Object.defineProperty(o,a,d),d};Object.defineProperty(E_,"__esModule",{value:!0}),E_.NoViableAltException=void 0;const e=Og(),t=Ra,i=Xe;class s extends t.RecognitionException{constructor(o,a,l,c,d,f){o instanceof e.Parser&&(a===void 0&&(a=o.inputStream),l===void 0&&(l=o.currentToken),c===void 0&&(c=o.currentToken),f===void 0&&(f=o.context)),super(o,a,f),this._deadEndConfigs=d,this._startToken=l,this.setOffendingToken(o,c)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}}return r([i.NotNull],s.prototype,"_startToken",void 0),E_.NoViableAltException=s,E_}var _D;function jb(){if(_D)return u_;_D=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(g,x,E,P){var b=arguments.length,D=b<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,E):P,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,x,E,P);else for(var O=g.length-1;O>=0;O--)(C=g[O])&&(D=(b<3?C(D):b>3?C(x,E,D):C(x,E))||D);return b>3&&D&&Object.defineProperty(x,E,D),D},e=$&&$.__param||function(g,x){return function(E,P){x(E,P,g)}};Object.defineProperty(u_,"__esModule",{value:!0}),u_.DefaultErrorStrategy=void 0;const t=Pa,i=ji,s=bf,n=Sh,o=Ph(),a=ev(),l=Mo(),c=dr,d=Xe;class f{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER}reset(x){this.endErrorCondition(x)}beginErrorCondition(x){this.errorRecoveryMode=!0}inErrorRecoveryMode(x){return this.errorRecoveryMode}endErrorCondition(x){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(x){this.endErrorCondition(x)}reportError(x,E){this.inErrorRecoveryMode(x)||(this.beginErrorCondition(x),E instanceof a.NoViableAltException?this.reportNoViableAlternative(x,E):E instanceof n.InputMismatchException?this.reportInputMismatch(x,E):E instanceof s.FailedPredicateException?this.reportFailedPredicate(x,E):(console.error(`unknown recognition error type: ${E}`),this.notifyErrorListeners(x,E.toString(),E)))}notifyErrorListeners(x,E,P){let b=P.getOffendingToken(x);b===void 0&&(b=null),x.notifyErrorListeners(E,b,P)}recover(x,E){this.lastErrorIndex===x.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(x.state)&&x.consume(),this.lastErrorIndex=x.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new o.IntervalSet),this.lastErrorStates.add(x.state);let P=this.getErrorRecoverySet(x);this.consumeUntil(x,P)}sync(x){let E=x.interpreter.atn.states[x.state];if(this.inErrorRecoveryMode(x))return;let b=x.inputStream.LA(1),D=x.atn.nextTokens(E);if(D.contains(b)){this.nextTokensContext=void 0,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER;return}if(D.contains(c.Token.EPSILON)){this.nextTokensContext===void 0&&(this.nextTokensContext=x.context,this.nextTokensState=x.state);return}switch(E.stateType){case i.ATNStateType.BLOCK_START:case i.ATNStateType.STAR_BLOCK_START:case i.ATNStateType.PLUS_BLOCK_START:case i.ATNStateType.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(x))return;throw new n.InputMismatchException(x);case i.ATNStateType.PLUS_LOOP_BACK:case i.ATNStateType.STAR_LOOP_BACK:this.reportUnwantedToken(x);let O=x.getExpectedTokens().or(this.getErrorRecoverySet(x));this.consumeUntil(x,O);break}}reportNoViableAlternative(x,E){let P=x.inputStream,b;P?E.startToken.type===c.Token.EOF?b="<EOF>":b=P.getTextFromRange(E.startToken,E.getOffendingToken()):b="<unknown input>";let D="no viable alternative at input "+this.escapeWSAndQuote(b);this.notifyErrorListeners(x,D,E)}reportInputMismatch(x,E){let P=E.expectedTokens,b=P?P.toStringVocabulary(x.vocabulary):"",D="mismatched input "+this.getTokenErrorDisplay(E.getOffendingToken(x))+" expecting "+b;this.notifyErrorListeners(x,D,E)}reportFailedPredicate(x,E){let b="rule "+x.ruleNames[x.context.ruleIndex]+" "+E.message;this.notifyErrorListeners(x,b,E)}reportUnwantedToken(x){if(this.inErrorRecoveryMode(x))return;this.beginErrorCondition(x);let E=x.currentToken,P=this.getTokenErrorDisplay(E),b=this.getExpectedTokens(x),D="extraneous input "+P+" expecting "+b.toStringVocabulary(x.vocabulary);x.notifyErrorListeners(D,E,void 0)}reportMissingToken(x){if(this.inErrorRecoveryMode(x))return;this.beginErrorCondition(x);let E=x.currentToken,b="missing "+this.getExpectedTokens(x).toStringVocabulary(x.vocabulary)+" at "+this.getTokenErrorDisplay(E);x.notifyErrorListeners(b,E,void 0)}recoverInline(x){let E=this.singleTokenDeletion(x);if(E)return x.consume(),E;if(this.singleTokenInsertion(x))return this.getMissingSymbol(x);throw this.nextTokensContext===void 0?new n.InputMismatchException(x):new n.InputMismatchException(x,this.nextTokensState,this.nextTokensContext)}singleTokenInsertion(x){let E=x.inputStream.LA(1),b=x.interpreter.atn.states[x.state].transition(0).target,D=x.interpreter.atn;return D.nextTokens(b,l.PredictionContext.fromRuleContext(D,x.context)).contains(E)?(this.reportMissingToken(x),!0):!1}singleTokenDeletion(x){let E=x.inputStream.LA(2);if(this.getExpectedTokens(x).contains(E)){this.reportUnwantedToken(x),x.consume();let b=x.currentToken;return this.reportMatch(x),b}}getMissingSymbol(x){let E=x.currentToken,P=this.getExpectedTokens(x),b=c.Token.INVALID_TYPE;P.isNil||(b=P.minElement);let D;b===c.Token.EOF?D="<missing EOF>":D="<missing "+x.vocabulary.getDisplayName(b)+">";let C=E,O=x.inputStream.tryLT(-1);return C.type===c.Token.EOF&&O!=null&&(C=O),this.constructToken(x.inputStream.tokenSource,b,D,C)}constructToken(x,E,P,b){let D=x.tokenFactory,C=b.tokenSource,O=C?C.inputStream:void 0;return D.create({source:x,stream:O},E,P,c.Token.DEFAULT_CHANNEL,-1,-1,b.line,b.charPositionInLine)}getExpectedTokens(x){return x.getExpectedTokens()}getTokenErrorDisplay(x){if(!x)return"<no token>";let E=this.getSymbolText(x);return E||(this.getSymbolType(x)===c.Token.EOF?E="<EOF>":E=`<${this.getSymbolType(x)}>`),this.escapeWSAndQuote(E)}getSymbolText(x){return x.text}getSymbolType(x){return x.type}escapeWSAndQuote(x){return x=x.replace(`
`,"\\n"),x=x.replace("\r","\\r"),x=x.replace("	","\\t"),"'"+x+"'"}getErrorRecoverySet(x){let E=x.interpreter.atn,P=x.context,b=new o.IntervalSet;for(;P&&P.invokingState>=0;){let C=E.states[P.invokingState].transition(0),O=E.nextTokens(C.followState);b.addAll(O),P=P._parent}return b.remove(c.Token.EPSILON),b}consumeUntil(x,E){let P=x.inputStream.LA(1);for(;P!==c.Token.EOF&&!E.contains(P);)x.consume(),P=x.inputStream.LA(1)}}return r([d.Override],f.prototype,"reset",null),r([e(0,d.NotNull)],f.prototype,"beginErrorCondition",null),r([d.Override],f.prototype,"inErrorRecoveryMode",null),r([e(0,d.NotNull)],f.prototype,"endErrorCondition",null),r([d.Override],f.prototype,"reportMatch",null),r([d.Override],f.prototype,"reportError",null),r([e(0,d.NotNull)],f.prototype,"notifyErrorListeners",null),r([d.Override],f.prototype,"recover",null),r([d.Override],f.prototype,"sync",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"reportNoViableAlternative",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"reportInputMismatch",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"reportFailedPredicate",null),r([e(0,d.NotNull)],f.prototype,"reportUnwantedToken",null),r([e(0,d.NotNull)],f.prototype,"reportMissingToken",null),r([d.Override],f.prototype,"recoverInline",null),r([e(0,d.NotNull)],f.prototype,"singleTokenInsertion",null),r([e(0,d.NotNull)],f.prototype,"singleTokenDeletion",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"getMissingSymbol",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"getExpectedTokens",null),r([e(0,d.NotNull)],f.prototype,"getSymbolText",null),r([e(0,d.NotNull)],f.prototype,"getSymbolType",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"escapeWSAndQuote",null),r([d.NotNull,e(0,d.NotNull)],f.prototype,"getErrorRecoverySet",null),r([e(0,d.NotNull),e(1,d.NotNull)],f.prototype,"consumeUntil",null),u_.DefaultErrorStrategy=f,u_}var pD;function xI(){if(pD)return l_;pD=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=$&&$.__decorate||function(o,a,l,c){var d=arguments.length,f=d<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,a,l,c);else for(var x=o.length-1;x>=0;x--)(g=o[x])&&(f=(d<3?g(f):d>3?g(a,l,f):g(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f};Object.defineProperty(l_,"__esModule",{value:!0}),l_.BailErrorStrategy=void 0;const e=jb(),t=Sh,i=Xe,s=Dg;class n extends e.DefaultErrorStrategy{recover(a,l){for(let c=a.context;c;c=c.parent)c.exception=l;throw new s.ParseCancellationException(l)}recoverInline(a){let l=new t.InputMismatchException(a);for(let c=a.context;c;c=c.parent)c.exception=l;throw new s.ParseCancellationException(l)}sync(a){}}return r([i.Override],n.prototype,"recover",null),r([i.Override],n.prototype,"recoverInline",null),r([i.Override],n.prototype,"sync",null),l_.BailErrorStrategy=n,l_}var yI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(yI,"__esModule",{value:!0});var vI={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Dependents=void 0,function(e){e[e.SELF=0]="SELF",e[e.PARENTS=1]="PARENTS",e[e.CHILDREN=2]="CHILDREN",e[e.ANCESTORS=3]="ANCESTORS",e[e.DESCENDANTS=4]="DESCENDANTS",e[e.SIBLINGS=5]="SIBLINGS",e[e.PRECEEDING_SIBLINGS=6]="PRECEEDING_SIBLINGS",e[e.FOLLOWING_SIBLINGS=7]="FOLLOWING_SIBLINGS",e[e.PRECEEDING=8]="PRECEEDING",e[e.FOLLOWING=9]="FOLLOWING"}(r.Dependents||(r.Dependents={}))})(vI);var tv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Uf=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},io=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(tv,"__esModule",{value:!0});tv.DiagnosticErrorListener=void 0;const Qj=Bo,Zi=Xe,WE=un;class Oh{constructor(e=!0){this.exactOnly=e,this.exactOnly=e}syntaxError(e,t,i,s,n,o){}reportAmbiguity(e,t,i,s,n,o,a){if(this.exactOnly&&!n)return;let l=this.getDecisionDescription(e,t),c=this.getConflictingAlts(o,a),d=e.inputStream.getText(WE.Interval.of(i,s)),f=`reportAmbiguity d=${l}: ambigAlts=${c}, input='${d}'`;e.notifyErrorListeners(f)}reportAttemptingFullContext(e,t,i,s,n,o){let a=this.getDecisionDescription(e,t),l=e.inputStream.getText(WE.Interval.of(i,s)),c=`reportAttemptingFullContext d=${a}, input='${l}'`;e.notifyErrorListeners(c)}reportContextSensitivity(e,t,i,s,n,o){let a=this.getDecisionDescription(e,t),l=e.inputStream.getText(WE.Interval.of(i,s)),c=`reportContextSensitivity d=${a}, input='${l}'`;e.notifyErrorListeners(c)}getDecisionDescription(e,t){let i=t.decision,s=t.atnStartState.ruleIndex,n=e.ruleNames;if(s<0||s>=n.length)return i.toString();let o=n[s];return o?`${i} (${o})`:i.toString()}getConflictingAlts(e,t){if(e!=null)return e;let i=new Qj.BitSet;for(let s of t)i.set(s.alt);return i}}Uf([Zi.Override],Oh.prototype,"syntaxError",null);Uf([Zi.Override,io(0,Zi.NotNull),io(1,Zi.NotNull),io(6,Zi.NotNull)],Oh.prototype,"reportAmbiguity",null);Uf([Zi.Override,io(0,Zi.NotNull),io(1,Zi.NotNull),io(5,Zi.NotNull)],Oh.prototype,"reportAttemptingFullContext",null);Uf([Zi.Override,io(0,Zi.NotNull),io(1,Zi.NotNull),io(5,Zi.NotNull)],Oh.prototype,"reportContextSensitivity",null);Uf([io(0,Zi.NotNull),io(1,Zi.NotNull)],Oh.prototype,"getDecisionDescription",null);Uf([Zi.NotNull,io(1,Zi.NotNull)],Oh.prototype,"getConflictingAlts",null);tv.DiagnosticErrorListener=Oh;var rv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Lu=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},Jj=$&&$.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(rv,"__esModule",{value:!0});rv.LexerInterpreter=void 0;const Zj=Mu(),eV=D1(),EI=Xe,Gf=Xe;let wa=class extends Zj.Lexer{constructor(e,t,i,s,n,o,a){if(super(a),o.grammarType!==0)throw new Error("IllegalArgumentException: The ATN must be a lexer ATN.");this._grammarFileName=e,this._atn=o,this._ruleNames=i.slice(0),this._channelNames=s.slice(0),this._modeNames=n.slice(0),this._vocabulary=t,this._interp=new eV.LexerATNSimulator(o,this)}get atn(){return this._atn}get grammarFileName(){return this._grammarFileName}get ruleNames(){return this._ruleNames}get channelNames(){return this._channelNames}get modeNames(){return this._modeNames}get vocabulary(){return this._vocabulary}};Lu([EI.NotNull],wa.prototype,"_vocabulary",void 0);Lu([Gf.Override],wa.prototype,"atn",null);Lu([Gf.Override],wa.prototype,"grammarFileName",null);Lu([Gf.Override],wa.prototype,"ruleNames",null);Lu([Gf.Override],wa.prototype,"channelNames",null);Lu([Gf.Override],wa.prototype,"modeNames",null);Lu([Gf.Override],wa.prototype,"vocabulary",null);wa=Lu([Jj(1,EI.NotNull)],wa);rv.LexerInterpreter=wa;var SI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(SI,"__esModule",{value:!0});var iv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var tV=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(iv,"__esModule",{value:!0});iv.RuleContextWithAltNum=void 0;const rV=Oa(),iV=Xe,nV=Uo();class wI extends nV.ParserRuleContext{constructor(e,t){t!==void 0?super(e,t):super(),this._altNumber=rV.ATN.INVALID_ALT_NUMBER}get altNumber(){return this._altNumber}set altNumber(e){this._altNumber=e}}tV([iV.Override],wI.prototype,"altNumber",null);iv.RuleContextWithAltNum=wI;var nv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(nv,"__esModule",{value:!0});nv.RuleDependency=void 0;function sV(r){return(e,t,i)=>{}}nv.RuleDependency=sV;var sv={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(sv,"__esModule",{value:!0});sv.RuleVersion=void 0;function oV(r){return(e,t,i)=>{}}sv.RuleVersion=oV;var AI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(AI,"__esModule",{value:!0});var bI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(bI,"__esModule",{value:!0});var kI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(kI,"__esModule",{value:!0});var tf={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ov=$&&$.__decorate||function(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(n=(s<3?o(n):s>3?o(e,t,n):o(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n};Object.defineProperty(tf,"__esModule",{value:!0});tf.RewriteOperation=tf.TokenStreamRewriter=void 0;const gD=un,av=Xe,TI=dr;class En{constructor(e){this.tokens=e,this.programs=new Map,this.programs.set(En.DEFAULT_PROGRAM_NAME,[]),this.lastRewriteTokenIndexes=new Map}getTokenStream(){return this.tokens}rollback(e,t=En.DEFAULT_PROGRAM_NAME){let i=this.programs.get(t);i!=null&&this.programs.set(t,i.slice(En.MIN_TOKEN_INDEX,e))}deleteProgram(e=En.DEFAULT_PROGRAM_NAME){this.rollback(En.MIN_TOKEN_INDEX,e)}insertAfter(e,t,i=En.DEFAULT_PROGRAM_NAME){let s;typeof e=="number"?s=e:s=e.tokenIndex;let n=this.getProgram(i),o=new mD(this.tokens,s,n.length,t);n.push(o)}insertBefore(e,t,i=En.DEFAULT_PROGRAM_NAME){let s;typeof e=="number"?s=e:s=e.tokenIndex;let n=this.getProgram(i),o=new cc(this.tokens,s,n.length,t);n.push(o)}replaceSingle(e,t){typeof e=="number"?this.replace(e,e,t):this.replace(e,e,t)}replace(e,t,i,s=En.DEFAULT_PROGRAM_NAME){if(typeof e!="number"&&(e=e.tokenIndex),typeof t!="number"&&(t=t.tokenIndex),e>t||e<0||t<0||t>=this.tokens.size)throw new RangeError(`replace: range invalid: ${e}..${t}(size=${this.tokens.size})`);let n=this.getProgram(s),o=new ad(this.tokens,e,t,n.length,i);n.push(o)}delete(e,t,i=En.DEFAULT_PROGRAM_NAME){t===void 0&&(t=e),typeof e=="number"?this.replace(e,t,"",i):this.replace(e,t,"",i)}getLastRewriteTokenIndex(e=En.DEFAULT_PROGRAM_NAME){let t=this.lastRewriteTokenIndexes.get(e);return t==null?-1:t}setLastRewriteTokenIndex(e,t){this.lastRewriteTokenIndexes.set(e,t)}getProgram(e){let t=this.programs.get(e);return t==null&&(t=this.initializeProgram(e)),t}initializeProgram(e){let t=[];return this.programs.set(e,t),t}getText(e,t=En.DEFAULT_PROGRAM_NAME){let i;e instanceof gD.Interval?i=e:i=gD.Interval.of(0,this.tokens.size-1),typeof e=="string"&&(t=e);let s=this.programs.get(t),n=i.a,o=i.b;if(o>this.tokens.size-1&&(o=this.tokens.size-1),n<0&&(n=0),s==null||s.length===0)return this.tokens.getText(i);let a=[],l=this.reduceToSingleOperationPerIndex(s),c=n;for(;c<=o&&c<this.tokens.size;){let d=l.get(c);l.delete(c);let f=this.tokens.get(c);d==null?(f.type!==TI.Token.EOF&&a.push(String(f.text)),c++):c=d.execute(a)}if(o===this.tokens.size-1)for(let d of l.values())d.index>=this.tokens.size-1&&a.push(d.text.toString());return a.join("")}reduceToSingleOperationPerIndex(e){for(let i=0;i<e.length;i++){let s=e[i];if(s==null||!(s instanceof ad))continue;let n=s,o=this.getKindOfOps(e,cc,i);for(let l of o)l.index===n.index?(e[l.instructionIndex]=void 0,n.text=l.text.toString()+(n.text!=null?n.text.toString():"")):l.index>n.index&&l.index<=n.lastIndex&&(e[l.instructionIndex]=void 0);let a=this.getKindOfOps(e,ad,i);for(let l of a){if(l.index>=n.index&&l.lastIndex<=n.lastIndex){e[l.instructionIndex]=void 0;continue}let c=l.lastIndex<n.index||l.index>n.lastIndex;if(l.text==null&&n.text==null&&!c)e[l.instructionIndex]=void 0,n.index=Math.min(l.index,n.index),n.lastIndex=Math.max(l.lastIndex,n.lastIndex);else if(!c)throw new Error(`replace op boundaries of ${n} overlap with previous ${l}`)}}for(let i=0;i<e.length;i++){let s=e[i];if(s==null||!(s instanceof cc))continue;let n=s,o=this.getKindOfOps(e,cc,i);for(let l of o)l.index===n.index&&(l instanceof mD?(n.text=this.catOpText(l.text,n.text),e[l.instructionIndex]=void 0):l instanceof cc&&(n.text=this.catOpText(n.text,l.text),e[l.instructionIndex]=void 0));let a=this.getKindOfOps(e,ad,i);for(let l of a){if(n.index===l.index){l.text=this.catOpText(n.text,l.text),e[i]=void 0;continue}if(n.index>=l.index&&n.index<=l.lastIndex)throw new Error(`insert op ${n} within boundaries of previous ${l}`)}}let t=new Map;for(let i of e)if(i!=null){if(t.get(i.index)!=null)throw new Error("should only be one op per index");t.set(i.index,i)}return t}catOpText(e,t){let i="",s="";return e!=null&&(i=e.toString()),t!=null&&(s=t.toString()),i+s}getKindOfOps(e,t,i){let s=[];for(let n=0;n<i&&n<e.length;n++){let o=e[n];o!=null&&o instanceof t&&s.push(o)}return s}}tf.TokenStreamRewriter=En;En.DEFAULT_PROGRAM_NAME="default";En.PROGRAM_INIT_SIZE=100;En.MIN_TOKEN_INDEX=0;class lv{constructor(e,t,i,s){this.tokens=e,this.instructionIndex=i,this.index=t,this.text=s===void 0?"":s}execute(e){return this.index}toString(){let e=this.constructor.name,t=e.indexOf("$");return e=e.substring(t+1,e.length),"<"+e+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}}ov([av.Override],lv.prototype,"toString",null);tf.RewriteOperation=lv;class cc extends lv{constructor(e,t,i,s){super(e,t,i,s)}execute(e){return e.push(this.text.toString()),this.tokens.get(this.index).type!==TI.Token.EOF&&e.push(String(this.tokens.get(this.index).text)),this.index+1}}ov([av.Override],cc.prototype,"execute",null);class mD extends cc{constructor(e,t,i,s){super(e,t+1,i,s)}}class ad extends lv{constructor(e,t,i,s,n){super(e,t,s,n),this.lastIndex=i}execute(e){return this.text!=null&&e.push(this.text.toString()),this.lastIndex+1}toString(){return this.text==null?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}}ov([av.Override],ad.prototype,"execute",null);ov([av.Override],ad.prototype,"toString",null);var PI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(PI,"__esModule",{value:!0});var RI={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(RI,"__esModule",{value:!0});(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=$&&$.__createBinding||(Object.create?function(i,s,n,o){o===void 0&&(o=n),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[n]}})}:function(i,s,n,o){o===void 0&&(o=n),i[o]=s[n]}),t=$&&$.__exportStar||function(i,s){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(s,n)&&e(s,i,n)};Object.defineProperty(r,"__esModule",{value:!0}),t(c3,r),t(h3,r),t(p1,r),t(xI(),r),t(Pg,r),t(yI,r),t(Q1,r),t(zb,r),t(Tg,r),t(Ou,r),t(w1,r),t(Bf,r),t(ag,r),t(jb(),r),t(vI,r),t(tv,r),t(bf,r),t(Sh,r),t(pI(),r),t(ml,r),t(Mu(),r),t(rv,r),t(Th,r),t(Rg,r),t(ev(),r),t(Og(),r),t(SI,r),t(gI(),r),t(Uo(),r),t(Pf,r),t(kg,r),t(Ra,r),t(Nu,r),t(sI(),r),t(iv,r),t(nv,r),t(sv,r),t(dr,r),t(AI,r),t(bI,r),t(kI,r),t(tf,r),t(PI,r),t(yl,r),t(RI,r)})(hw);class xD{constructor(){u(this,"_isValid",!0);u(this,"_errorMessage")}get isValid(){return this._isValid}get errorMessage(){return this._errorMessage}syntaxError(e,t,i,s,n,o){this._isValid=!1,this._errorMessage=`line ${i}:${s} ${n}`}}class Vb extends qn{constructor(t){super();u(this,"url_");this.url_=t}Accept(t){ze()}EQ(t){return this.url_===t.url_}GetTypeId(){return rr(Vb)}ToString(){return"url("+this.url_+")"}}function aV(r,e,t){const i=DI.get(e);if(!i)return!1;for(let s of i)r.SetPropertyValue(s,t);return!0}const DI=new Map;function uv(r,e){DI.set(r,e)}uv(T.kBorderColorProperty,[T.kBorderTopColorProperty,T.kBorderRightColorProperty,T.kBorderBottomColorProperty,T.kBorderLeftColorProperty]);uv(T.kBorderStyleProperty,[T.kBorderTopStyleProperty,T.kBorderRightStyleProperty,T.kBorderBottomStyleProperty,T.kBorderLeftStyleProperty]);uv(T.kBorderWidthProperty,[T.kBorderTopWidthProperty,T.kBorderRightWidthProperty,T.kBorderBottomWidthProperty,T.kBorderLeftWidthProperty]);uv(T.kPaddingProperty,[T.kPaddingTopProperty,T.kPaddingRightProperty,T.kPaddingBottomProperty,T.kPaddingLeftProperty]);class lV{constructor(e){u(this,"currentKey",null);u(this,"currentValue",null);u(this,"terms",[]);u(this,"args",[]);this.style=e}currentKeyIsColor(){return J(this.currentKey),this.currentKey.endsWith("color")||this.currentKey.endsWith("Color")}visitInlineStyle(e){e.children.forEach(t=>t.accept(this))}visitAny_(e){ze()}visitBadProperty(e){ze()}visitCalc(e){ze()}visitCalcProduct(e){ze()}visitCalcSum(e){ze()}visitCalcValue(e){ze()}visitDeclarationList(e){e.children.forEach(t=>t.accept(this))}visitDimension(e){const{text:t}=e;t.endsWith("px")?this.terms.push(new Qt(parseFloat(t),Ft.kPixelsUnit)):ze()}visitExpr(e){e.children.length===1?(e.children[0].accept(this),this.currentValue=this.terms[0]):ze(),this.terms.length=0}visitFunction_(e){const t=e.Function_().text;if(t==="rgb("){let i=e.expr();J(i),J(i.children),this.args.length=0,i.children.forEach(l=>l.accept(this));const[s,n,o,a]=this.args;this.args.length=0,this.terms.push(new Sr(s,n,o,255))}else if(t==="rgba("){let i=e.expr();J(i),J(i.children),this.args.length=0,i.children.forEach(l=>l.accept(this));const[s,n,o,a]=this.args;this.args.length=0,this.terms.push(new Sr(s,n,o,a*255))}else ze()}visitGeneralEnclosed(e){ze()}visitGoodOperator(e){}visitGoodProperty(e){e.ident()?this.currentKey=e.ident().text:ze()}visitHexcolor(e){this.terms.push(Sr.fromHex(e.text))}visitIdent(e){this.terms.push(_e.fromString(e.text))}visitKnownDeclaration(e){if(e.children.forEach(t=>t.accept(this)),this.currentKey&&this.currentValue){const t=a3(this.currentKey);J(t);const i=this.style.data();aV(i,t,this.currentValue)||i.SetPropertyValue(t,this.currentValue),this.currentKey=null,this.currentValue=null}else ze()}visitKnownTerm(e){e.number()?this.visitNumber(e.number()):e.percentage()?ze():e.dimension()?e.dimension().accept(this):e.String_()?this.terms.push(new _1(e.String_().text)):e.UnicodeRange()?ze():e.ident()?this.currentKeyIsColor()?this.terms.push(Sr.fromString(e.ident().text)):e.ident().accept(this):e.var_()?ze():e.Uri()?this.visitUri(e.Uri()):e.hexcolor()?this.visitHexcolor(e.hexcolor()):e.calc()?ze():e.function_()?this.visitFunction_(e.function_()):ze()}visitNumber(e){this.args.push(+e.text)}visitOperator_(e){ze()}visitPercentage(e){ze()}visitProperty_(e){ze()}visitTerm(e){ze()}visitUnknownDeclaration(e){ze()}visitUnknownDimension(e){ze()}visitUnknownTerm(e){ze()}visitUnused(e){ze()}visitValue(e){ze()}visitVar_(e){ze()}visitWs(e){}visit(e){ze()}visitChildren(e){ze()}visitErrorNode(e){ze()}visitTerminal(e){}visitUri(e){const t=e.text.match(/^url\('?(.+)'?\)$/i);t||et(),this.terms.push(new Vb(t[1]))}}var CI=Mb(),uV=Mu(),cV=D1();const Xi=class extends uV.Lexer{get vocabulary(){return Xi.VOCABULARY}constructor(e){super(e),this._interp=new cV.LexerATNSimulator(Xi._ATN,this)}get grammarFileName(){return"inline.g4"}get ruleNames(){return Xi.ruleNames}get serializedATN(){return Xi._serializedATN}get channelNames(){return Xi.channelNames}get modeNames(){return Xi.modeNames}static get _ATN(){return Xi.__ATN||(Xi.__ATN=new CI.ATNDeserializer().deserialize(bb(Xi._serializedATN))),Xi.__ATN}};let It=Xi;u(It,"T__0",1),u(It,"T__1",2),u(It,"T__2",3),u(It,"T__3",4),u(It,"T__4",5),u(It,"T__5",6),u(It,"T__6",7),u(It,"T__7",8),u(It,"T__8",9),u(It,"Comment",10),u(It,"Space",11),u(It,"Includes",12),u(It,"DashMatch",13),u(It,"Hash",14),u(It,"Important",15),u(It,"Percentage",16),u(It,"Uri",17),u(It,"UnicodeRange",18),u(It,"Dimension",19),u(It,"UnknownDimension",20),u(It,"Plus",21),u(It,"Minus",22),u(It,"Greater",23),u(It,"Comma",24),u(It,"Tilde",25),u(It,"PseudoNot",26),u(It,"Number",27),u(It,"String_",28),u(It,"PrefixMatch",29),u(It,"SuffixMatch",30),u(It,"SubstringMatch",31),u(It,"Or",32),u(It,"Calc",33),u(It,"Variable",34),u(It,"Var",35),u(It,"Ident",36),u(It,"Function_",37),u(It,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),u(It,"modeNames",["DEFAULT_MODE"]),u(It,"ruleNames",["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","Hex","NewlineOrSpace","Unicode","Escape","Nmstart","Nmchar","Comment","Name","Url","Space","Whitespace","Newline","ZeroToFourZeros","A","B","C","D","E","F","G","H","I","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","DashChar","Includes","DashMatch","Hash","Important","FontRelative","ViewportRelative","AbsLength","Angle","Time","Freq","Percentage","Uri","UnicodeRange","Resolution","Length","Dimension","UnknownDimension","Nonascii","Plus","Minus","Greater","Comma","Tilde","PseudoNot","Number","String_","PrefixMatch","SuffixMatch","SubstringMatch","Or","VendorPrefix","Calc","Variable","Var","Ident","Function_"]),u(It,"_LITERAL_NAMES",[void 0,"';'","'/'","'*'","'_'","':'","')'","'('","'['","']'",void 0,void 0,"'~='","'|='",void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'+'","'-'","'>'","','","'~'",void 0,void 0,void 0,"'^='","'$='","'*='",void 0,"'calc('",void 0,"'var('"]),u(It,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"Comment","Space","Includes","DashMatch","Hash","Important","Percentage","Uri","UnicodeRange","Dimension","UnknownDimension","Plus","Minus","Greater","Comma","Tilde","PseudoNot","Number","String_","PrefixMatch","SuffixMatch","SubstringMatch","Or","Calc","Variable","Var","Ident","Function_"]),u(It,"VOCABULARY",new Rb(Xi._LITERAL_NAMES,Xi._SYMBOLIC_NAMES,[])),u(It,"_serializedATNSegments",3),u(It,"_serializedATNSegment0",`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241'\u046E\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)*	*+	+,	,-	-.	./	/0	01	12	23	34	45	56	67	78	89	9:	:;	;<	<=	=>	>?	?@	@A	AB	BC	CD	DE	EF	FG	GH	HI	IJ	JK	KL	LM	MN	NO	OP	PQ	QR	RS	ST	TU	U\x07\x07\b\b		

\v\v\f\f\f\f\f\xC4
\f\r\r\r\r\xC9
\r\r\r\xCC
\r\r\r\xCF
\r\r\r\xD2
\r\r\r\xD5
\r\r\r\xDC
\xE1
\xE6
\x07\xEC
\f\xEF\v\xF2
\r\xF3\x07\xF8
\f\xFB\v\xFE
\r\xFF\x07\u0102
\f\u0105\v\u010A
\r\u010B\x07\u0111
\f\u0114\v\u0117
\r\u0118\u011D
\u0123
\u0126
\u0129
\u012C
\u012F
\u0138
\u013C
\u0145
\u0149
\u0152
\u0156
\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\u015F
\x1B\x1B\x1B\x1B\u0163
\x1B\u016C
\u0170
\u0179
\u017D
\u0186
\u018E
\u0197
\u019F
        \u01A8
        \u01B0
 !!!!!!!!\u01B9
!!!!!!!!\u01C1
!""""""""\u01CA
""""""""\u01D2
"########\u01DB
########\u01E3
#$$$$$$$$\u01EC
$$$$$$$$\u01F4
$%%%%%%%%\u01FD
%%%%%%%%\u0205
%&&&&&&&&\u020E
&&&&&&&&\u0216
&''''''''\u021F
''''''''\u0227
'((((((((\u0230
((((((((\u0238
())))))))\u0241
))))))))\u0249
)********\u0252
********\u025A
*++++++++\u0263
++++++++\u026B
+,,,,,,,,\u0274
,,,,,,,,\u027C
,--------\u0285
--------\u028D
-........\u0296
........\u029E
.////////\u02A7
////////\u02AF
/00000000\u02B8
00000000\u02C0
0111111111\u02CA
1222333444555\x075\u02D8
5\f55\u02DB\v55555555555666666666666666666\u02F8
6777777777777777777777\u030E
78888888888888888888888888888\u032B
899999999999999999999999\u0343
9::::::::\u034C
:;;;;;;;;;;\u0357
;<<<===================\u036E
=>>>>>>\u0375
>>>\u0378
>>>\u037B
>>>\u037E
>>>\u0381
>>>>>>\u0387
>>>\u038A
>>>\u038D
>>>\u0390
>>>\u0393
>>>>>>>\u039A
>>>\u039D
>>>\u03A0
>>>\u03A3
>>>>>>>>\u03AB
>>>\u03AE
>>>\u03B1
>>>>>>>>>\u03BA
>>>\u03BD
>>>>>>>>>>\u03C7
>>\u03C9
>??????????????????\u03DC
?@@@@\u03E1
@AAAAAA\u03E8
ABBBCCDDEEFFGGHHIIIIIIJJ\u0400
J\rJJ\u0401J\x07J\u0405
J\fJJ\u0408\vJJJJ\u040C
J\rJJ\u040DJ\u0410
JKKKKKK\x07K\u0418
K\fKK\u041B\vKKKKKKKK\x07K\u0424
K\fKK\u0427\vKKK\u042A
KLLLMMMNNNOOOPPPPPPPPPPPPPPPPPPPP\u044B
PQQQQQQRRRRR\x07R\u0458
R\fRR\u045B\vRSSSSSTT\u0463
TTT\x07T\u0467
T\fTT\u046A\vTUUUV\x07	\v\x07\r\b	
\v\x1B!\f#%'\r)+-/13579;=?ACEGIKMOQSUWY[]_acegikmoqsuwy{}\x7F\x81\x83\x85\x87\x89\x8B\x8D\x8F\x1B\x91\x93\x95\x97\x99 \x9B!\x9D"\x9F\xA1#\xA3$\xA5%\xA7&\xA9'(2;CHch\v\f""\x07\f\f2;CHchC\\aac|\x07//2;C\\aac|,,,,11##%(,\x80CCccDDddEEeeFFffGGggHHhhIIiiJJjjKKkkMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||WWww~~\x812;\f\f$$^^\f\f))^^\u04FB\x07	\v\r!'cegiwy{\x81\x83\x87\x89\x8B\x8D\x8F\x91\x93\x95\x97\x99\x9B\x9D\xA1\xA3\xA5\xA7\xA9\xAB\xAD\x07\xAF	\xB1\v\xB3\r\xB5\xB7\xB9\xBB\xBD\xC3\xC5\x1B\xDB\xE0\xE5!\xE7#\u0109%\u0112'\u0116)\u011C+\u0122-\u0125/\u013B1\u01483\u01555\u01627\u016F9\u017C;\u018D=\u019E?\u01AFA\u01C0C\u01D1E\u01E2G\u01F3I\u0204K\u0215M\u0226O\u0237Q\u0248S\u0259U\u026AW\u027BY\u028C[\u029D]\u02AE_\u02BFa\u02C9c\u02CBe\u02CEg\u02D1i\u02D4k\u02F7m\u030Do\u032Aq\u0342s\u034Bu\u0356w\u0358y\u036D{\u03C8}\u03DB\x7F\u03E0\x81\u03E7\x83\u03E9\x85\u03EC\x87\u03EE\x89\u03F0\x8B\u03F2\x8D\u03F4\x8F\u03F6\x91\u03F8\x93\u040F\x95\u0429\x97\u042B\x99\u042E\x9B\u0431\x9D\u0434\x9F\u044A\xA1\u044C\xA3\u0452\xA5\u045C\xA7\u0462\xA9\u046B\xAB\xAC\x07=\xAC\xAD\xAE\x071\xAE\xAF\xB0\x07,\xB0\b\xB1\xB2\x07a\xB2
\xB3\xB4\x07<\xB4\f\xB5\xB6\x07+\xB6\xB7\xB8\x07*\xB8\xB9\xBA\x07]\xBA\xBB\xBC\x07_\xBC\xBD\xBE	\xBE\xBF\xC0\x07\xC0\xC4\x07\f\xC1\xC4	\xC2\xC4\xC3\xBF\xC3\xC1\xC3\xC2\xC4\xC5\xC6\x07^\xC6\xC8\v\xC7\xC9\v\xC8\xC7\xC8\xC9\xC9\xCB\xCA\xCC\v\xCB\xCA\xCB\xCC\xCC\xCE\xCD\xCF\v\xCE\xCD\xCE\xCF\xCF\xD1\xD0\xD2\v\xD1\xD0\xD1\xD2\xD2\xD4\xD3\xD5\v\xD4\xD3\xD4\xD5\xD5\xD6\xD6\xD7\f\xD7\xD8\xDC\r\xD9\xDA\x07^\xDA\xDC
\xDB\xD8\xDB\xD9\xDC\xDD\xE1	\xDE\xE1\x85C\xDF\xE1\x1B\xE0\xDD\xE0\xDE\xE0\xDF\xE1\xE2\xE6	\xE3\xE6\x85C\xE4\xE6\x1B\xE5\xE2\xE5\xE3\xE5\xE4\xE6 \xE7\xE8\x071\xE8\xE9\x07,\xE9\xED\xEA\xEC
\x07\xEB\xEA\xEC\xEF\xED\xEB\xED\xEE\xEE\xF1\xEF\xED\xF0\xF2\x07,\xF1\xF0\xF2\xF3\xF3\xF1\xF3\xF4\xF4\u0103\xF5\xF9
\b\xF6\xF8
\x07\xF7\xF6\xF8\xFB\xF9\xF7\xF9\xFA\xFA\xFD\xFB\xF9\xFC\xFE\x07,\xFD\xFC\xFE\xFF\xFF\xFD\xFF\u0100\u0100\u0102\u0101\xF5\u0102\u0105\u0103\u0101\u0103\u0104\u0104\u0106\u0105\u0103\u0106\u0107\x071\u0107"\u0108\u010A\u0109\u0108\u010A\u010B\u010B\u0109\u010B\u010C\u010C$\u010D\u0111		\u010E\u0111\x85C\u010F\u0111\x1B\u0110\u010D\u0110\u010E\u0110\u010F\u0111\u0114\u0112\u0110\u0112\u0113\u0113&\u0114\u0112\u0115\u0117	\u0116\u0115\u0117\u0118\u0118\u0116\u0118\u0119\u0119(\u011A\u011D'\u011B\u011D\u011C\u011A\u011C\u011B\u011D*\u011E\u0123\x07\f\u011F\u0120\x07\u0120\u0123\x07\f\u0121\u0123\u0122\u011E\u0122\u011F\u0122\u0121\u0123,\u0124\u0126\x072\u0125\u0124\u0125\u0126\u0126\u0128\u0127\u0129\x072\u0128\u0127\u0128\u0129\u0129\u012B\u012A\u012C\x072\u012B\u012A\u012B\u012C\u012C\u012E\u012D\u012F\x072\u012E\u012D\u012E\u012F\u012F.\u0130\u013C	
\u0131\u0132\x07^\u0132\u0137-\u0133\u0134\x076\u0134\u0138\x073\u0135\u0136\x078\u0136\u0138\x073\u0137\u0133\u0137\u0135\u0138\u0139\u0139\u013A\f\u013A\u013C\u013B\u0130\u013B\u0131\u013C0\u013D\u0149	\v\u013E\u013F\x07^\u013F\u0144-\u0140\u0141\x076\u0141\u0145\x074\u0142\u0143\x078\u0143\u0145\x074\u0144\u0140\u0144\u0142\u0145\u0146\u0146\u0147\f\u0147\u0149\u0148\u013D\u0148\u013E\u01492\u014A\u0156	\f\u014B\u014C\x07^\u014C\u0151-\u014D\u014E\x076\u014E\u0152\x075\u014F\u0150\x078\u0150\u0152\x075\u0151\u014D\u0151\u014F\u0152\u0153\u0153\u0154\f\u0154\u0156\u0155\u014A\u0155\u014B\u01564\u0157\u0163	\r\u0158\u0159\x07^\u0159\u015E-\u015A\u015B\x076\u015B\u015F\x076\u015C\u015D\x078\u015D\u015F\x076\u015E\u015A\u015E\u015C\u015F\u0160\u0160\u0161\f\u0161\u0163\u0162\u0157\u0162\u0158\u01636\u0164\u0170	\u0165\u0166\x07^\u0166\u016B-\u0167\u0168`),u(It,"_serializedATNSegment1",`\x076\u0168\u016C\x077\u0169\u016A\x078\u016A\u016C\x077\u016B\u0167\u016B\u0169\u016C\u016D\u016D\u016E\f\u016E\u0170\u016F\u0164\u016F\u0165\u01708\u0171\u017D	\u0172\u0173\x07^\u0173\u0178-\u0174\u0175\x076\u0175\u0179\x078\u0176\u0177\x078\u0177\u0179\x078\u0178\u0174\u0178\u0176\u0179\u017A\u017A\u017B\f\u017B\u017D\u017C\u0171\u017C\u0172\u017D:\u017E\u018E	\u017F\u0180\x07^\u0180\u0185-\u0181\u0182\x076\u0182\u0186\x079\u0183\u0184\x078\u0184\u0186\x079\u0185\u0181\u0185\u0183\u0186\u0187\u0187\u0188\f\u0188\u018E\u0189\u018A\x07^\u018A\u018E\x07i\u018B\u018C\x07^\u018C\u018E\x07I\u018D\u017E\u018D\u017F\u018D\u0189\u018D\u018B\u018E<\u018F\u019F	\u0190\u0191\x07^\u0191\u0196-\u0192\u0193\x076\u0193\u0197\x07:\u0194\u0195\x078\u0195\u0197\x07:\u0196\u0192\u0196\u0194\u0197\u0198\u0198\u0199\f\u0199\u019F\u019A\u019B\x07^\u019B\u019F\x07j\u019C\u019D\x07^\u019D\u019F\x07J\u019E\u018F\u019E\u0190\u019E\u019A\u019E\u019C\u019F>\u01A0\u01B0	\u01A1\u01A2\x07^\u01A2\u01A7-\u01A3\u01A4\x076\u01A4\u01A8\x07;\u01A5\u01A6\x078\u01A6\u01A8\x07;\u01A7\u01A3\u01A7\u01A5\u01A8\u01A9\u01A9\u01AA\f\u01AA\u01B0\u01AB\u01AC\x07^\u01AC\u01B0\x07k\u01AD\u01AE\x07^\u01AE\u01B0\x07K\u01AF\u01A0\u01AF\u01A1\u01AF\u01AB\u01AF\u01AD\u01B0@\u01B1\u01C1	\u01B2\u01B3\x07^\u01B3\u01B8-\u01B4\u01B5\x076\u01B5\u01B9\x07d\u01B6\u01B7\x078\u01B7\u01B9\x07d\u01B8\u01B4\u01B8\u01B6\u01B9\u01BA\u01BA\u01BB\f\u01BB\u01C1\u01BC\u01BD\x07^\u01BD\u01C1\x07m\u01BE\u01BF\x07^\u01BF\u01C1\x07M\u01C0\u01B1\u01C0\u01B2\u01C0\u01BC\u01C0\u01BE\u01C1B\u01C2\u01D2	\u01C3\u01C4\x07^\u01C4\u01C9-\u01C5\u01C6\x076\u01C6\u01CA\x07e\u01C7\u01C8\x078\u01C8\u01CA\x07e\u01C9\u01C5\u01C9\u01C7\u01CA\u01CB\u01CB\u01CC\f\u01CC\u01D2\u01CD\u01CE\x07^\u01CE\u01D2\x07n\u01CF\u01D0\x07^\u01D0\u01D2\x07N\u01D1\u01C2\u01D1\u01C3\u01D1\u01CD\u01D1\u01CF\u01D2D\u01D3\u01E3	\u01D4\u01D5\x07^\u01D5\u01DA-\u01D6\u01D7\x076\u01D7\u01DB\x07f\u01D8\u01D9\x078\u01D9\u01DB\x07f\u01DA\u01D6\u01DA\u01D8\u01DB\u01DC\u01DC\u01DD\f\u01DD\u01E3\u01DE\u01DF\x07^\u01DF\u01E3\x07o\u01E0\u01E1\x07^\u01E1\u01E3\x07O\u01E2\u01D3\u01E2\u01D4\u01E2\u01DE\u01E2\u01E0\u01E3F\u01E4\u01F4	\u01E5\u01E6\x07^\u01E6\u01EB-\u01E7\u01E8\x076\u01E8\u01EC\x07g\u01E9\u01EA\x078\u01EA\u01EC\x07g\u01EB\u01E7\u01EB\u01E9\u01EC\u01ED\u01ED\u01EE\f\u01EE\u01F4\u01EF\u01F0\x07^\u01F0\u01F4\x07p\u01F1\u01F2\x07^\u01F2\u01F4\x07P\u01F3\u01E4\u01F3\u01E5\u01F3\u01EF\u01F3\u01F1\u01F4H\u01F5\u0205	\u01F6\u01F7\x07^\u01F7\u01FC-\u01F8\u01F9\x076\u01F9\u01FD\x07h\u01FA\u01FB\x078\u01FB\u01FD\x07h\u01FC\u01F8\u01FC\u01FA\u01FD\u01FE\u01FE\u01FF\f\u01FF\u0205\u0200\u0201\x07^\u0201\u0205\x07q\u0202\u0203\x07^\u0203\u0205\x07Q\u0204\u01F5\u0204\u01F6\u0204\u0200\u0204\u0202\u0205J\u0206\u0216	\u0207\u0208\x07^\u0208\u020D-\u0209\u020A\x077\u020A\u020E\x072\u020B\u020C\x079\u020C\u020E\x072\u020D\u0209\u020D\u020B\u020E\u020F\u020F\u0210\f\u0210\u0216\u0211\u0212\x07^\u0212\u0216\x07r\u0213\u0214\x07^\u0214\u0216\x07R\u0215\u0206\u0215\u0207\u0215\u0211\u0215\u0213\u0216L\u0217\u0227	\u0218\u0219\x07^\u0219\u021E-\u021A\u021B\x077\u021B\u021F\x073\u021C\u021D\x079\u021D\u021F\x073\u021E\u021A\u021E\u021C\u021F\u0220\u0220\u0221\f\u0221\u0227\u0222\u0223\x07^\u0223\u0227\x07s\u0224\u0225\x07^\u0225\u0227\x07S\u0226\u0217\u0226\u0218\u0226\u0222\u0226\u0224\u0227N\u0228\u0238	\u0229\u022A\x07^\u022A\u022F-\u022B\u022C\x077\u022C\u0230\x074\u022D\u022E\x079\u022E\u0230\x074\u022F\u022B\u022F\u022D\u0230\u0231\u0231\u0232\f\u0232\u0238\u0233\u0234\x07^\u0234\u0238\x07t\u0235\u0236\x07^\u0236\u0238\x07T\u0237\u0228\u0237\u0229\u0237\u0233\u0237\u0235\u0238P\u0239\u0249	\x1B\u023A\u023B\x07^\u023B\u0240-\u023C\u023D\x077\u023D\u0241\x075\u023E\u023F\x079\u023F\u0241\x075\u0240\u023C\u0240\u023E\u0241\u0242\u0242\u0243\f\u0243\u0249\u0244\u0245\x07^\u0245\u0249\x07u\u0246\u0247\x07^\u0247\u0249\x07U\u0248\u0239\u0248\u023A\u0248\u0244\u0248\u0246\u0249R\u024A\u025A	\u024B\u024C\x07^\u024C\u0251-\u024D\u024E\x077\u024E\u0252\x076\u024F\u0250\x079\u0250\u0252\x076\u0251\u024D\u0251\u024F\u0252\u0253\u0253\u0254\f\u0254\u025A\u0255\u0256\x07^\u0256\u025A\x07v\u0257\u0258\x07^\u0258\u025A\x07V\u0259\u024A\u0259\u024B\u0259\u0255\u0259\u0257\u025AT\u025B\u026B	\u025C\u025D\x07^\u025D\u0262-\u025E\u025F\x077\u025F\u0263\x077\u0260\u0261\x079\u0261\u0263\x077\u0262\u025E\u0262\u0260\u0263\u0264\u0264\u0265\f\u0265\u026B\u0266\u0267\x07^\u0267\u026B\x07w\u0268\u0269\x07^\u0269\u026B\x07W\u026A\u025B\u026A\u025C\u026A\u0266\u026A\u0268\u026BV\u026C\u027C	\u026D\u026E\x07^\u026E\u0273-\u026F\u0270\x077\u0270\u0274\x078\u0271\u0272\x079\u0272\u0274\x078\u0273\u026F\u0273\u0271\u0274\u0275\u0275\u0276\f\u0276\u027C\u0277\u0278\x07^\u0278\u027C\x07x\u0279\u027A\x07^\u027A\u027C\x07X\u027B\u026C\u027B\u026D\u027B\u0277\u027B\u0279\u027CX\u027D\u028D	\u027E\u027F\x07^\u027F\u0284-\u0280\u0281\x077\u0281\u0285\x079\u0282\u0283\x079\u0283\u0285\x079\u0284\u0280\u0284\u0282\u0285\u0286\u0286\u0287\f\u0287\u028D\u0288\u0289\x07^\u0289\u028D\x07y\u028A\u028B\x07^\u028B\u028D\x07Y\u028C\u027D\u028C\u027E\u028C\u0288\u028C\u028A\u028DZ\u028E\u029E	 \u028F\u0290\x07^\u0290\u0295-\u0291\u0292\x077\u0292\u0296\x07:\u0293\u0294\x079\u0294\u0296\x07:\u0295\u0291\u0295\u0293\u0296\u0297\u0297\u0298\f\u0298\u029E\u0299\u029A\x07^\u029A\u029E\x07z\u029B\u029C\x07^\u029C\u029E\x07Z\u029D\u028E\u029D\u028F\u029D\u0299\u029D\u029B\u029E\\\u029F\u02AF	!\u02A0\u02A1\x07^\u02A1\u02A6-\u02A2\u02A3\x077\u02A3\u02A7\x07;\u02A4\u02A5\x079\u02A5\u02A7\x07;\u02A6\u02A2\u02A6\u02A4\u02A7\u02A8\u02A8\u02A9\f\u02A9\u02AF\u02AA\u02AB\x07^\u02AB\u02AF\x07{\u02AC\u02AD\x07^\u02AD\u02AF\x07[\u02AE\u029F\u02AE\u02A0\u02AE\u02AA\u02AE\u02AC\u02AF^\u02B0\u02C0	"\u02B1\u02B2\x07^\u02B2\u02B7-\u02B3\u02B4\x077\u02B4\u02B8\x07c\u02B5\u02B6\x079\u02B6\u02B8\x07c\u02B7\u02B3\u02B7\u02B5\u02B8\u02B9\u02B9\u02BA\f\u02BA\u02C0\u02BB\u02BC\x07^\u02BC\u02C0\x07|\u02BD\u02BE\x07^\u02BE\u02C0\x07\\\u02BF\u02B0\u02BF\u02B1\u02BF\u02BB\u02BF\u02BD\u02C0\`\u02C1\u02CA\x07/\u02C2\u02C3\x07^\u02C3\u02C4-\u02C4\u02C5\x074\u02C5\u02C6\x07f\u02C6\u02C7\u02C7\u02C8\f\u02C8\u02CA\u02C9\u02C1\u02C9\u02C2\u02CAb\u02CB\u02CC\x07\x80\u02CC\u02CD\x07?\u02CDd\u02CE\u02CF\x07~\u02CF\u02D0\x07?\u02D0f\u02D1\u02D2\x07%\u02D2\u02D3#\u02D3h\u02D4\u02D9\x07#\u02D5\u02D8'\u02D6\u02D8!\u02D7\u02D5\u02D7\u02D6\u02D8\u02DB\u02D9\u02D7\u02D9\u02DA\u02DA\u02DC\u02DB\u02D9\u02DC\u02DD? \u02DD\u02DEE#\u02DE\u02DFK&\u02DF\u02E0I%\u02E0\u02E1O(\u02E1\u02E2S*\u02E2\u02E3/\u02E3\u02E4G$\u02E4\u02E5S*\u02E5j\u02E6\u02E7\x93J\u02E7\u02E87\u02E8\u02E9E#\u02E9\u02F8\u02EA\u02EB\x93J\u02EB\u02EC7\u02EC\u02ED[.\u02ED\u02F8\u02EE\u02EF\x93J\u02EF\u02F03\u02F0\u02F1=\u02F1\u02F8\u02F2\u02F3\x93J\u02F3\u02F4O(\u02F4\u02F57\u02F5\u02F6E#\u02F6\u02F8\u02F7\u02E6\u02F7\u02EA\u02F7\u02EE\u02F7\u02F2\u02F8l\u02F9\u02FA\x93J\u02FA\u02FBW,\u02FB\u02FCY-\u02FC\u030E\u02FD\u02FE\x93J\u02FE\u02FFW,\u02FF\u0300=\u0300\u030E\u0301\u0302\x93J\u0302\u0303W,\u0303\u0304E#\u0304\u0305? \u0305\u0306G$\u0306\u030E\u0307\u0308\x93J\u0308\u0309W,\u0309\u030AE#\u030A\u030B/\u030B\u030C[.\u030C\u030E\u030D\u02F9\u030D\u02FD\u030D\u0301\u030D\u0307\u030En\u030F\u0310\x93J\u0310\u0311K&\u0311\u0312[.\u0312\u032B\u0313\u0314\x93J\u0314\u03153\u0315\u0316E#\u0316\u032B\u0317\u0318\x93J\u0318\u0319E#\u0319\u031AE#\u031A\u032B\u031B\u031C\x93J\u031C\u031D? \u031D\u031EG$\u031E\u032B\u031F\u0320\x93J\u0320\u0321K&\u0321\u0322S*\u0322\u032B\u0323\u0324\x93J\u0324\u0325K&\u0325\u03263\u0326\u032B\u0327\u0328\x93J\u0328\u0329M'\u0329\u032B\u032A\u030F\u032A\u0313\u032A\u0317\u032A\u031B\u032A\u031F\u032A\u0323\u032A\u0327\u032Bp\u032C\u032D\x93J\u032D\u032E5\x1B\u032E\u032F7\u032F\u0330;\u0330\u0343\u0331\u0332\x93J\u0332\u0333O(\u0333\u0334/\u0334\u03355\x1B\u0335\u0343\u0336\u0337\x93J\u0337\u0338;\u0338\u0339O(\u0339\u033A/\u033A\u033B5\x1B\u033B\u0343\u033C\u033D\x93J\u033D\u033ES*\u033E\u033FU+\u033F\u0340O(\u0340\u0341G$\u0341\u0343\u0342\u032C\u0342\u0331\u0342\u0336\u0342\u033C\u0343r\u0344\u0345\x93J\u0345\u0346E#\u0346\u0347Q)\u0347\u034C\u0348\u0349\x93J\u0349\u034AQ)\u034A\u034C\u034B\u0344\u034B\u0348\u034Ct\u034D\u034E\x93J\u034E\u034F=\u034F\u0350_0\u0350\u0357\u0351\u0352\x93J\u0352\u0353A!\u0353\u0354=\u0354\u0355_0\u0355\u0357\u0356\u034D\u0356\u0351\u0357v\u0358\u0359\x93J\u0359\u035A\x07'\u035Ax\u035B\u035CU+\u035C\u035DO(\u035D\u035EC"\u035E\u035F\x07*\u035F\u0360)\u0360\u0361\x95K\u0361\u0362)\u0362\u0363\x07+\u0363\u036E\u0364\u0365U+\u0365\u0366O(\u0366\u0367C"\u0367\u0368\x07*\u0368\u0369)\u0369\u036A%\u036A\u036B)\u036B\u036C\x07+\u036C\u036E\u036D\u035B\u036D\u0364\u036Ez\u036F\u0370	#\u0370\u0371\x07-\u0371\u0372\x07A\u0372\u0374\u0373\u0375\x07A\u0374\u0373\u0374\u0375\u0375\u0377\u0376\u0378\x07A\u0377\u0376\u0377\u0378\u0378\u037A\u0379\u037B\x07A\u037A\u0379\u037A\u037B\u037B\u037D\u037C\u037E\x07A\u037D\u037C\u037D\u037E\u037E\u0380\u037F\u0381\x07A\u0380\u037F\u0380\u0381\u0381\u03C9\u0382\u0383	#\u0383\u0384\x07-\u0384\u0386\v\u0385\u0387\x07A\u0386\u0385\u0386\u0387\u0387\u0389\u0388\u038A\x07A\u0389\u0388\u0389\u038A\u038A\u038C\u038B\u038D\x07A\u038C\u038B\u038C\u038D\u038D\u038F\u038E\u0390\x07A\u038F\u038E\u038F\u0390\u0390\u0392\u0391\u0393\x07A\u0392\u0391\u0392\u0393\u0393\u03C9\u0394\u0395	#\u0395\u0396\x07-\u0396\u0397\v\u0397\u0399\v\u0398\u039A\x07A\u0399\u0398\u0399\u039A\u039A\u039C\u039B\u039D\x07A\u039C\u039B\u039C\u039D\u039D\u039F\u039E\u03A0\x07A\u039F\u039E\u039F\u03A0\u03A0\u03A2\u03A1\u03A3\x07A\u03A2\u03A1\u03A2\u03A3\u03A3\u03C9\u03A4\u03A5	#\u03A5\u03A6\x07-\u03A6\u03A7\v\u03A7\u03A8\v\u03A8\u03AA\v\u03A9\u03AB\x07A\u03AA\u03A9\u03AA\u03AB\u03AB\u03AD\u03AC\u03AE\x07A\u03AD\u03AC\u03AD\u03AE\u03AE\u03B0\u03AF\u03B1\x07A\u03B0\u03AF\u03B0\u03B1\u03B1\u03C9\u03B2\u03B3	#\u03B3\u03B4\x07-\u03B4\u03B5\v\u03B5\u03B6\v\u03B6\u03B7\v\u03B7\u03B9\v\u03B8\u03BA\x07A\u03B9\u03B8\u03B9\u03BA\u03BA\u03BC\u03BB\u03BD\x07A\u03BC\u03BB\u03BC\u03BD\u03BD\u03C9\u03BE\u03BF	#\u03BF\u03C0\x07-\u03C0\u03C1\v\u03C1\u03C2\v\u03C2\u03C3\v\u03C3\u03C4\v\u03C4\u03C6\v\u03C5\u03C7\x07A\u03C6\u03C5\u03C6\u03C7\u03C7\u03C9\u03C8\u036F\u03C8\u0382\u03C8\u0394\u03C8\u03A4\u03C8\u03B2\u03C8\u03BE\u03C9|\u03CA\u03CB\x93J\u03CB\u03CC5\x1B\u03CC\u03CDK&\u03CD\u03CE? \u03CE\u03DC\u03CF\u03D0\x93J\u03D0\u03D15\x1B\u03D1\u03D2K&\u03D2\u03D33\u03D3\u03D4E#\u03D4\u03DC\u03D5\u03D6\x93J\u03D6\u03D75\x1B\u03D7\u03D8K&\u03D8\u03D9K&\u03D9\u03DA[.\u03DA\u03DC\u03DB\u03CA\u03DB\u03CF\u03DB\u03D5\u03DC~\u03DD\u03E1o8\u03DE\u03E1k6\u03DF\u03E1m7\u03E0\u03DD\u03E0\u03DE\u03E0\u03DF\u03E1\x80\u03E2\u03E8\x7F@\u03E3\u03E8s:\u03E4\u03E8u;\u03E5\u03E8}?\u03E6\u03E8q9\u03E7\u03E2\u03E7\u03E3\u03E7\u03E4\u03E7\u03E5\u03E7\u03E6\u03E8\x82\u03E9\u03EA\x93J\u03EA\u03EB\xA7T\u03EB\x84\u03EC\u03ED
$\u03ED\x86\u03EE\u03EF\x07-\u03EF\x88\u03F0\u03F1\x07/\u03F1\x8A\u03F2\u03F3\x07@\u03F3\x8C\u03F4\u03F5\x07.\u03F5\x8E\u03F6\u03F7\x07\x80\u03F7\x90\u03F8\u03F9\x07<\u03F9\u03FAG$\u03FA\u03FBI%\u03FB\u03FCS*\u03FC\u03FD\x07*\u03FD\x92\u03FE\u0400	%\u03FF\u03FE\u0400\u0401\u0401\u03FF\u0401\u0402\u0402\u0410\u0403\u0405	%\u0404\u0403\u0405\u0408\u0406\u0404\u0406\u0407\u0407\u0409\u0408\u0406\u0409\u040B\x070\u040A\u040C	%\u040B\u040A\u040C\u040D\u040D\u040B\u040D\u040E\u040E\u0410\u040F\u03FF\u040F\u0406\u0410\x94\u0411\u0419\x07$\u0412\u0418
&\u0413\u0414\x07^\u0414\u0418+\u0415\u0418\x85C\u0416\u0418\x1B\u0417\u0412\u0417\u0413\u0417\u0415\u0417\u0416\u0418\u041B\u0419\u0417\u0419\u041A\u041A\u041C`),u(It,"_serializedATNSegment2","\u041B\u0419\u041C\u042A\x07$\u041D\u0425\x07)\u041E\u0424\n'\u041F\u0420\x07^\u0420\u0424+\u0421\u0424\x85C\u0422\u0424\x1B\u0423\u041E\u0423\u041F\u0423\u0421\u0423\u0422\u0424\u0427\u0425\u0423\u0425\u0426\u0426\u0428\u0427\u0425\u0428\u042A\x07)\u0429\u0411\u0429\u041D\u042A\x96\u042B\u042C\x07`\u042C\u042D\x07?\u042D\x98\u042E\u042F\x07&\u042F\u0430\x07?\u0430\x9A\u0431\u0432\x07,\u0432\u0433\x07?\u0433\x9C\u0434\u0435I%\u0435\u0436O(\u0436\x9E\u0437\u0438\x07/\u0438\u0439E#\u0439\u043AI%\u043A\u043B_0\u043B\u043C\x07/\u043C\u044B\u043D\u043E\x07/\u043E\u043FY-\u043F\u04407\u0440\u04411\u0441\u0442A!\u0442\u0443? \u0443\u0444S*\u0444\u0445\x07/\u0445\u044B\u0446\u0447\x07/\u0447\u0448I%\u0448\u0449\x07/\u0449\u044B\u044A\u0437\u044A\u043D\u044A\u0446\u044B\xA0\u044C\u044D\x07e\u044D\u044E\x07c\u044E\u044F\x07n\u044F\u0450\x07e\u0450\u0451\x07*\u0451\xA2\u0452\u0453\x07/\u0453\u0454\x07/\u0454\u0455\u0455\u0459\u0456\u0458\u0457\u0456\u0458\u045B\u0459\u0457\u0459\u045A\u045A\xA4\u045B\u0459\u045C\u045D\x07x\u045D\u045E\x07c\u045E\u045F\x07t\u045F\u0460\x07*\u0460\xA6\u0461\u0463\x07/\u0462\u0461\u0462\u0463\u0463\u0464\u0464\u0468\u0465\u0467\u0466\u0465\u0467\u046A\u0468\u0466\u0468\u0469\u0469\xA8\u046A\u0468\u046B\u046C\xA7T\u046C\u046D\x07*\u046D\xAA|\xC3\xC8\xCB\xCE\xD1\xD4\xDB\xE0\xE5\xED\xF3\xF9\xFF\u0103\u010B\u0110\u0112\u0118\u011C\u0122\u0125\u0128\u012B\u012E\u0137\u013B\u0144\u0148\u0151\u0155\u015E\u0162\u016B\u016F\u0178\u017C\u0185\u018D\u0196\u019E\u01A7\u01AF\u01B8\u01C0\u01C9\u01D1\u01DA\u01E2\u01EB\u01F3\u01FC\u0204\u020D\u0215\u021E\u0226\u022F\u0237\u0240\u0248\u0251\u0259\u0262\u026A\u0273\u027B\u0284\u028C\u0295\u029D\u02A6\u02AE\u02B7\u02BF\u02C9\u02D7\u02D9\u02F7\u030D\u032A\u0342\u034B\u0356\u036D\u0374\u0377\u037A\u037D\u0380\u0386\u0389\u038C\u038F\u0392\u0399\u039C\u039F\u03A2\u03AA\u03AD\u03B0\u03B9\u03BC\u03C6\u03C8\u03DB\u03E0\u03E7\u0401\u0406\u040D\u040F\u0417\u0419\u0423\u0425\u0429\u044A\u0459\u0462\u0468"),u(It,"_serializedATN",N3([Xi._serializedATNSegment0,Xi._serializedATNSegment1,Xi._serializedATNSegment2],"")),u(It,"__ATN");var np=Oa(),Vl=ev(),hV=Og(),Kr=Uo(),dV=Sg();const ce=class extends hV.Parser{get vocabulary(){return ce.VOCABULARY}get grammarFileName(){return"inline.g4"}get ruleNames(){return ce.ruleNames}get serializedATN(){return ce._serializedATN}createFailedPredicateException(e,t){return new F3(this,e,t)}constructor(e){super(e),this._interp=new dV.ParserATNSimulator(ce._ATN,this)}inlineStyle(){let e=new fV(this._ctx,this.state);this.enterRule(e,0,ce.RULE_inlineStyle);try{let t;this.enterOuterAlt(e,1);{for(this.state=48,this.ws(),this.state=55,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,1,this._ctx);t!==2&&t!==np.ATN.INVALID_ALT_NUMBER;){if(t===1)switch(this.state=53,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,0,this._ctx)){case 1:this.state=49,this.declarationList();break;case 2:this.state=50,this.any_();break;case 3:this.state=51,this.match(ce.T__0),this.state=52,this.ws();break}this.state=57,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,1,this._ctx)}this.state=58,this.ws()}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}declarationList(){let e=new vw(this._ctx,this.state);this.enterRule(e,2,ce.RULE_declarationList);let t;try{let i;this.enterOuterAlt(e,1);{for(this.state=64,this._errHandler.sync(this),t=this._input.LA(1);t===ce.T__0;)this.state=60,this.match(ce.T__0),this.state=61,this.ws(),this.state=66,this._errHandler.sync(this),t=this._input.LA(1);for(this.state=67,this.declaration(),this.state=68,this.ws(),this.state=76,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,4,this._ctx);i!==2&&i!==np.ATN.INVALID_ALT_NUMBER;){if(i===1)switch(this.state=69,this.match(ce.T__0),this.state=70,this.ws(),this.state=72,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,3,this._ctx)){case 1:this.state=71,this.declaration();break}this.state=78,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,4,this._ctx)}}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}operator_(){let e=new py(this._ctx,this.state);this.enterRule(e,4,ce.RULE_operator_);try{switch(this.state=85,this._errHandler.sync(this),this._input.LA(1)){case ce.T__1:e=new $E(e),this.enterOuterAlt(e,1),this.state=79,this.match(ce.T__1),this.state=80,this.ws();break;case ce.Comma:e=new $E(e),this.enterOuterAlt(e,2),this.state=81,this.match(ce.Comma),this.state=82,this.ws();break;case ce.Space:e=new $E(e),this.enterOuterAlt(e,3),this.state=83,this.match(ce.Space),this.state=84,this.ws();break;default:throw new Vl.NoViableAltException(this)}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}property_(){let e=new Ng(this._ctx,this.state);this.enterRule(e,6,ce.RULE_property_);try{switch(this.state=96,this._errHandler.sync(this),this._input.LA(1)){case ce.Ident:e=new yD(e),this.enterOuterAlt(e,1),this.state=87,this.ident(),this.state=88,this.ws();break;case ce.Variable:e=new yD(e),this.enterOuterAlt(e,2),this.state=90,this.match(ce.Variable),this.state=91,this.ws();break;case ce.T__2:e=new vD(e),this.enterOuterAlt(e,3),this.state=92,this.match(ce.T__2),this.state=93,this.ident();break;case ce.T__3:e=new vD(e),this.enterOuterAlt(e,4),this.state=94,this.match(ce.T__3),this.state=95,this.ident();break;default:throw new Vl.NoViableAltException(this)}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}declaration(){let e=new k0(this._ctx,this.state);this.enterRule(e,8,ce.RULE_declaration);try{switch(this.state=108,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,7,this._ctx)){case 1:e=new _V(e),this.enterOuterAlt(e,1),this.state=98,this.property_(),this.state=99,this.match(ce.T__4),this.state=100,this.ws(),this.state=101,this.expr();break;case 2:e=new pV(e),this.enterOuterAlt(e,2),this.state=103,this.property_(),this.state=104,this.match(ce.T__4),this.state=105,this.ws(),this.state=106,this.value();break}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}value(){let e=new OI(this._ctx,this.state);this.enterRule(e,10,ce.RULE_value);try{let t;this.enterOuterAlt(e,1);{this.state=111,this._errHandler.sync(this),t=1;do{switch(t){case 1:this.state=110,this.any_();break;default:throw new Vl.NoViableAltException(this)}this.state=113,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,8,this._ctx)}while(t!==2&&t!==np.ATN.INVALID_ALT_NUMBER)}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expr(){let e=new Wb(this._ctx,this.state);this.enterRule(e,12,ce.RULE_expr);let t;try{let i;for(this.enterOuterAlt(e,1),this.state=115,this.term(),this.state=122,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,10,this._ctx);i!==2&&i!==np.ATN.INVALID_ALT_NUMBER;)i===1&&(this.state=117,this._errHandler.sync(this),t=this._input.LA(1),(t&-32)===0&&(1<<t&(1<<ce.T__1|1<<ce.Space|1<<ce.Comma))!==0&&(this.state=116,this.operator_()),this.state=119,this.term()),this.state=124,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,10,this._ctx)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}term(){let e=new T0(this._ctx,this.state);this.enterRule(e,14,ce.RULE_term);try{switch(this.state=150,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,11,this._ctx)){case 1:e=new po(e),this.enterOuterAlt(e,1),this.state=125,this.number(),this.state=126,this.ws();break;case 2:e=new po(e),this.enterOuterAlt(e,2),this.state=128,this.percentage(),this.state=129,this.ws();break;case 3:e=new po(e),this.enterOuterAlt(e,3),this.state=131,this.dimension(),this.state=132,this.ws();break;case 4:e=new po(e),this.enterOuterAlt(e,4),this.state=134,this.match(ce.String_),this.state=135,this.ws();break;case 5:e=new po(e),this.enterOuterAlt(e,5),this.state=136,this.match(ce.UnicodeRange),this.state=137,this.ws();break;case 6:e=new po(e),this.enterOuterAlt(e,6),this.state=138,this.ident(),this.state=139,this.ws();break;case 7:e=new po(e),this.enterOuterAlt(e,7),this.state=141,this.var_();break;case 8:e=new po(e),this.enterOuterAlt(e,8),this.state=142,this.match(ce.Uri),this.state=143,this.ws();break;case 9:e=new po(e),this.enterOuterAlt(e,9),this.state=144,this.hexcolor();break;case 10:e=new po(e),this.enterOuterAlt(e,10),this.state=145,this.calc();break;case 11:e=new po(e),this.enterOuterAlt(e,11),this.state=146,this.function_();break;case 12:e=new gV(e),this.enterOuterAlt(e,12),this.state=147,this.unknownDimension(),this.state=148,this.ws();break}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}function_(){let e=new NI(this._ctx,this.state);this.enterRule(e,16,ce.RULE_function_);try{this.enterOuterAlt(e,1),this.state=152,this.match(ce.Function_),this.state=153,this.ws(),this.state=154,this.expr(),this.state=155,this.match(ce.T__5),this.state=156,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}hexcolor(){let e=new II(this._ctx,this.state);this.enterRule(e,18,ce.RULE_hexcolor);try{this.enterOuterAlt(e,1),this.state=158,this.match(ce.Hash),this.state=159,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}number(){let e=new rf(this._ctx,this.state);this.enterRule(e,20,ce.RULE_number);let t;try{this.enterOuterAlt(e,1),this.state=162,this._errHandler.sync(this),t=this._input.LA(1),(t===ce.Plus||t===ce.Minus)&&(this.state=161,t=this._input.LA(1),t===ce.Plus||t===ce.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=164,this.match(ce.Number)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}percentage(){let e=new cv(this._ctx,this.state);this.enterRule(e,22,ce.RULE_percentage);let t;try{this.enterOuterAlt(e,1),this.state=167,this._errHandler.sync(this),t=this._input.LA(1),(t===ce.Plus||t===ce.Minus)&&(this.state=166,t=this._input.LA(1),t===ce.Plus||t===ce.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=169,this.match(ce.Percentage)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}dimension(){let e=new hv(this._ctx,this.state);this.enterRule(e,24,ce.RULE_dimension);let t;try{this.enterOuterAlt(e,1),this.state=172,this._errHandler.sync(this),t=this._input.LA(1),(t===ce.Plus||t===ce.Minus)&&(this.state=171,t=this._input.LA(1),t===ce.Plus||t===ce.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=174,this.match(ce.Dimension)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}unknownDimension(){let e=new dv(this._ctx,this.state);this.enterRule(e,26,ce.RULE_unknownDimension);let t;try{this.enterOuterAlt(e,1),this.state=177,this._errHandler.sync(this),t=this._input.LA(1),(t===ce.Plus||t===ce.Minus)&&(this.state=176,t=this._input.LA(1),t===ce.Plus||t===ce.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=179,this.match(ce.UnknownDimension)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}any_(){let e=new Aa(this._ctx,this.state);this.enterRule(e,28,ce.RULE_any_);let t;try{switch(this.state=246,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,22,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=181,this.ident(),this.state=182,this.ws();break;case 2:this.enterOuterAlt(e,2),this.state=184,this.number(),this.state=185,this.ws();break;case 3:this.enterOuterAlt(e,3),this.state=187,this.percentage(),this.state=188,this.ws();break;case 4:this.enterOuterAlt(e,4),this.state=190,this.dimension(),this.state=191,this.ws();break;case 5:this.enterOuterAlt(e,5),this.state=193,this.unknownDimension(),this.state=194,this.ws();break;case 6:this.enterOuterAlt(e,6),this.state=196,this.match(ce.String_),this.state=197,this.ws();break;case 7:this.enterOuterAlt(e,7),this.state=198,this.match(ce.Uri),this.state=199,this.ws();break;case 8:this.enterOuterAlt(e,8),this.state=200,this.match(ce.Hash),this.state=201,this.ws();break;case 9:this.enterOuterAlt(e,9),this.state=202,this.match(ce.UnicodeRange),this.state=203,this.ws();break;case 10:this.enterOuterAlt(e,10),this.state=204,this.match(ce.Includes),this.state=205,this.ws();break;case 11:this.enterOuterAlt(e,11),this.state=206,this.match(ce.DashMatch),this.state=207,this.ws();break;case 12:this.enterOuterAlt(e,12),this.state=208,this.match(ce.T__4),this.state=209,this.ws();break;case 13:this.enterOuterAlt(e,13);{for(this.state=210,this.match(ce.Function_),this.state=211,this.ws(),this.state=216,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<ce.T__0|1<<ce.T__4|1<<ce.T__6|1<<ce.T__7|1<<ce.Includes|1<<ce.DashMatch|1<<ce.Hash|1<<ce.Percentage|1<<ce.Uri|1<<ce.UnicodeRange|1<<ce.Dimension|1<<ce.UnknownDimension|1<<ce.Plus|1<<ce.Minus|1<<ce.Number|1<<ce.String_))!==0||t===ce.Ident||t===ce.Function_;){switch(this.state=214,this._errHandler.sync(this),this._input.LA(1)){case ce.T__4:case ce.T__6:case ce.T__7:case ce.Includes:case ce.DashMatch:case ce.Hash:case ce.Percentage:case ce.Uri:case ce.UnicodeRange:case ce.Dimension:case ce.UnknownDimension:case ce.Plus:case ce.Minus:case ce.Number:case ce.String_:case ce.Ident:case ce.Function_:this.state=212,this.any_();break;case ce.T__0:this.state=213,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=218,this._errHandler.sync(this),t=this._input.LA(1)}this.state=219,this.match(ce.T__5),this.state=220,this.ws()}break;case 14:this.enterOuterAlt(e,14);{for(this.state=222,this.match(ce.T__6),this.state=223,this.ws(),this.state=228,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<ce.T__0|1<<ce.T__4|1<<ce.T__6|1<<ce.T__7|1<<ce.Includes|1<<ce.DashMatch|1<<ce.Hash|1<<ce.Percentage|1<<ce.Uri|1<<ce.UnicodeRange|1<<ce.Dimension|1<<ce.UnknownDimension|1<<ce.Plus|1<<ce.Minus|1<<ce.Number|1<<ce.String_))!==0||t===ce.Ident||t===ce.Function_;){switch(this.state=226,this._errHandler.sync(this),this._input.LA(1)){case ce.T__4:case ce.T__6:case ce.T__7:case ce.Includes:case ce.DashMatch:case ce.Hash:case ce.Percentage:case ce.Uri:case ce.UnicodeRange:case ce.Dimension:case ce.UnknownDimension:case ce.Plus:case ce.Minus:case ce.Number:case ce.String_:case ce.Ident:case ce.Function_:this.state=224,this.any_();break;case ce.T__0:this.state=225,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=230,this._errHandler.sync(this),t=this._input.LA(1)}this.state=231,this.match(ce.T__5),this.state=232,this.ws()}break;case 15:this.enterOuterAlt(e,15);{for(this.state=234,this.match(ce.T__7),this.state=235,this.ws(),this.state=240,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<ce.T__0|1<<ce.T__4|1<<ce.T__6|1<<ce.T__7|1<<ce.Includes|1<<ce.DashMatch|1<<ce.Hash|1<<ce.Percentage|1<<ce.Uri|1<<ce.UnicodeRange|1<<ce.Dimension|1<<ce.UnknownDimension|1<<ce.Plus|1<<ce.Minus|1<<ce.Number|1<<ce.String_))!==0||t===ce.Ident||t===ce.Function_;){switch(this.state=238,this._errHandler.sync(this),this._input.LA(1)){case ce.T__4:case ce.T__6:case ce.T__7:case ce.Includes:case ce.DashMatch:case ce.Hash:case ce.Percentage:case ce.Uri:case ce.UnicodeRange:case ce.Dimension:case ce.UnknownDimension:case ce.Plus:case ce.Minus:case ce.Number:case ce.String_:case ce.Ident:case ce.Function_:this.state=236,this.any_();break;case ce.T__0:this.state=237,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=242,this._errHandler.sync(this),t=this._input.LA(1)}this.state=243,this.match(ce.T__8),this.state=244,this.ws()}break}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}generalEnclosed(){let e=new mV(this._ctx,this.state);this.enterRule(e,30,ce.RULE_generalEnclosed);let t;try{this.enterOuterAlt(e,1);{for(this.state=248,t=this._input.LA(1),t===ce.T__6||t===ce.Function_?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=253,this._errHandler.sync(this),t=this._input.LA(1);(t&-32)===0&&(1<<t&(1<<ce.T__0|1<<ce.T__4|1<<ce.T__6|1<<ce.T__7|1<<ce.Includes|1<<ce.DashMatch|1<<ce.Hash|1<<ce.Percentage|1<<ce.Uri|1<<ce.UnicodeRange|1<<ce.Dimension|1<<ce.UnknownDimension|1<<ce.Plus|1<<ce.Minus|1<<ce.Number|1<<ce.String_))!==0||t===ce.Ident||t===ce.Function_;){switch(this.state=251,this._errHandler.sync(this),this._input.LA(1)){case ce.T__4:case ce.T__6:case ce.T__7:case ce.Includes:case ce.DashMatch:case ce.Hash:case ce.Percentage:case ce.Uri:case ce.UnicodeRange:case ce.Dimension:case ce.UnknownDimension:case ce.Plus:case ce.Minus:case ce.Number:case ce.String_:case ce.Ident:case ce.Function_:this.state=249,this.any_();break;case ce.T__0:this.state=250,this.unused();break;default:throw new Vl.NoViableAltException(this)}this.state=255,this._errHandler.sync(this),t=this._input.LA(1)}this.state=256,this.match(ce.T__5)}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}unused(){let e=new P0(this._ctx,this.state);this.enterRule(e,32,ce.RULE_unused);try{this.enterOuterAlt(e,1),this.state=258,this.match(ce.T__0),this.state=259,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}var_(){let e=new FI(this._ctx,this.state);this.enterRule(e,34,ce.RULE_var_);try{this.enterOuterAlt(e,1),this.state=261,this.match(ce.Var),this.state=262,this.ws(),this.state=263,this.match(ce.Variable),this.state=264,this.ws(),this.state=265,this.match(ce.T__5),this.state=266,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}calc(){let e=new MI(this._ctx,this.state);this.enterRule(e,36,ce.RULE_calc);try{this.enterOuterAlt(e,1),this.state=268,this.match(ce.Calc),this.state=269,this.ws(),this.state=270,this.calcSum(),this.state=271,this.match(ce.T__5),this.state=272,this.ws()}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}calcSum(){let e=new $b(this._ctx,this.state);this.enterRule(e,38,ce.RULE_calcSum);let t;try{for(this.enterOuterAlt(e,1),this.state=274,this.calcProduct(),this.state=285,this._errHandler.sync(this),t=this._input.LA(1);t===ce.Space;)this.state=275,this.match(ce.Space),this.state=276,this.ws(),this.state=277,t=this._input.LA(1),t===ce.Plus||t===ce.Minus?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=278,this.ws(),this.state=279,this.match(ce.Space),this.state=280,this.ws(),this.state=281,this.calcProduct(),this.state=287,this._errHandler.sync(this),t=this._input.LA(1)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}calcProduct(){let e=new Ew(this._ctx,this.state);this.enterRule(e,40,ce.RULE_calcProduct);let t;try{for(this.enterOuterAlt(e,1),this.state=288,this.calcValue(),this.state=300,this._errHandler.sync(this),t=this._input.LA(1);t===ce.T__1||t===ce.T__2;){switch(this.state=298,this._errHandler.sync(this),this._input.LA(1)){case ce.T__2:this.state=289,this.match(ce.T__2),this.state=290,this.ws(),this.state=291,this.calcValue();break;case ce.T__1:this.state=293,this.match(ce.T__1),this.state=294,this.ws(),this.state=295,this.number(),this.state=296,this.ws();break;default:throw new Vl.NoViableAltException(this)}this.state=302,this._errHandler.sync(this),t=this._input.LA(1)}}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}calcValue(){let e=new Sw(this._ctx,this.state);this.enterRule(e,42,ce.RULE_calcValue);try{switch(this.state=321,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,28,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=303,this.number(),this.state=304,this.ws();break;case 2:this.enterOuterAlt(e,2),this.state=306,this.dimension(),this.state=307,this.ws();break;case 3:this.enterOuterAlt(e,3),this.state=309,this.unknownDimension(),this.state=310,this.ws();break;case 4:this.enterOuterAlt(e,4),this.state=312,this.percentage(),this.state=313,this.ws();break;case 5:this.enterOuterAlt(e,5),this.state=315,this.match(ce.T__6),this.state=316,this.ws(),this.state=317,this.calcSum(),this.state=318,this.match(ce.T__5),this.state=319,this.ws();break}}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}ident(){let e=new Ig(this._ctx,this.state);this.enterRule(e,44,ce.RULE_ident);try{this.enterOuterAlt(e,1),this.state=323,this.match(ce.Ident)}catch(t){if(t instanceof Br)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}ws(){let e=new Cr(this._ctx,this.state);this.enterRule(e,46,ce.RULE_ws);let t;try{let i;for(this.enterOuterAlt(e,1),this.state=328,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,29,this._ctx);i!==2&&i!==np.ATN.INVALID_ALT_NUMBER;)i===1&&(this.state=325,t=this._input.LA(1),t===ce.Comment||t===ce.Space?(this._input.LA(1)===dr.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=330,this._errHandler.sync(this),i=this.interpreter.adaptivePredict(this._input,29,this._ctx)}catch(i){if(i instanceof Br)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}static get _ATN(){return ce.__ATN||(ce.__ATN=new CI.ATNDeserializer().deserialize(bb(ce._serializedATN))),ce.__ATN}};let je=ce;u(je,"T__0",1),u(je,"T__1",2),u(je,"T__2",3),u(je,"T__3",4),u(je,"T__4",5),u(je,"T__5",6),u(je,"T__6",7),u(je,"T__7",8),u(je,"T__8",9),u(je,"Comment",10),u(je,"Space",11),u(je,"Includes",12),u(je,"DashMatch",13),u(je,"Hash",14),u(je,"Important",15),u(je,"Percentage",16),u(je,"Uri",17),u(je,"UnicodeRange",18),u(je,"Dimension",19),u(je,"UnknownDimension",20),u(je,"Plus",21),u(je,"Minus",22),u(je,"Greater",23),u(je,"Comma",24),u(je,"Tilde",25),u(je,"PseudoNot",26),u(je,"Number",27),u(je,"String_",28),u(je,"PrefixMatch",29),u(je,"SuffixMatch",30),u(je,"SubstringMatch",31),u(je,"Or",32),u(je,"Calc",33),u(je,"Variable",34),u(je,"Var",35),u(je,"Ident",36),u(je,"Function_",37),u(je,"RULE_inlineStyle",0),u(je,"RULE_declarationList",1),u(je,"RULE_operator_",2),u(je,"RULE_property_",3),u(je,"RULE_declaration",4),u(je,"RULE_value",5),u(je,"RULE_expr",6),u(je,"RULE_term",7),u(je,"RULE_function_",8),u(je,"RULE_hexcolor",9),u(je,"RULE_number",10),u(je,"RULE_percentage",11),u(je,"RULE_dimension",12),u(je,"RULE_unknownDimension",13),u(je,"RULE_any_",14),u(je,"RULE_generalEnclosed",15),u(je,"RULE_unused",16),u(je,"RULE_var_",17),u(je,"RULE_calc",18),u(je,"RULE_calcSum",19),u(je,"RULE_calcProduct",20),u(je,"RULE_calcValue",21),u(je,"RULE_ident",22),u(je,"RULE_ws",23),u(je,"ruleNames",["inlineStyle","declarationList","operator_","property_","declaration","value","expr","term","function_","hexcolor","number","percentage","dimension","unknownDimension","any_","generalEnclosed","unused","var_","calc","calcSum","calcProduct","calcValue","ident","ws"]),u(je,"_LITERAL_NAMES",[void 0,"';'","'/'","'*'","'_'","':'","')'","'('","'['","']'",void 0,void 0,"'~='","'|='",void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'+'","'-'","'>'","','","'~'",void 0,void 0,void 0,"'^='","'$='","'*='",void 0,"'calc('",void 0,"'var('"]),u(je,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"Comment","Space","Includes","DashMatch","Hash","Important","Percentage","Uri","UnicodeRange","Dimension","UnknownDimension","Plus","Minus","Greater","Comma","Tilde","PseudoNot","Number","String_","PrefixMatch","SuffixMatch","SubstringMatch","Or","Calc","Variable","Var","Ident","Function_"]),u(je,"VOCABULARY",new Rb(ce._LITERAL_NAMES,ce._SYMBOLIC_NAMES,[])),u(je,"_serializedATN",`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241'\u014E					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r												\x078
\f;\v\x07A
\fD\vK
\x07M
\fP\vX
c
o
\x07\x07r
\x07\r\x07\x07s\b\b\bx
\b\b\x07\b{
\b\f\b\b~\v\b																										\x99
	





\v\v\v\f\f\xA5
\f\f\f\r\r\xAA
\r\r\r\xAF
\xB4
\x07\xD9
\f\xDC\v\x07\xE5
\f\xE8\v\x07\xF1
\f\xF4\v\xF9
\x07\xFE
\f\u0101\v\x07\u011E
\f\u0121\v\x07\u012D
\f\u0130\v\u0144
\x07\u0149
\f\u014C\v\b
\f "$&(*,.0		''\f\r\u01712BW\bb
n\fqu\x98\x9A\xA0\xA4\xA9\xAE\xB3\xF8 \xFA"\u0104$\u0107&\u010E(\u0114*\u0122,\u0143.\u01450\u014A290384856\x076807374758;979::<;9<=0=>?\x07?A0@>ADB@BCCEDBEF
FN0GH\x07HJ0IK
JIJKKMLGMPNLNOOPNQR\x07RX0ST\x07TX0UV\x07\rVX0WQWSWUX\x07YZ.Z[0[c\\]\x07$]c0^_\x07_c.\`a\x07ac.bYb\\b^b\`c	de\bef\x07\x07fg0gh\bhoij\bjk\x07\x07kl0lm\f\x07mondnio\vprqprssqstt\ru|	vxwvwxxyy{	zw{~|z|}}~|\x7F\x80\f\x80\x810\x81\x99\x82\x83\r\x83\x840\x84\x99\x85\x86\x86\x870\x87\x99\x88\x89\x07\x89\x990\x8A\x8B\x07\x8B\x990\x8C\x8D.\x8D\x8E0\x8E\x99\x8F\x99$\x90\x91\x07\x91\x990\x92\x99\v\x93\x99&\x94\x99
\x95\x96\x96\x970\x97\x99\x98\x7F\x98\x82\x98\x85\x98\x88\x98\x8A\x98\x8C\x98\x8F\x98\x90\x98\x92\x98\x93\x98\x94\x98\x95\x99\x9A\x9B\x07'\x9B\x9C0\x9C\x9D\b\x9D\x9E\x07\b\x9E\x9F0\x9F\xA0\xA1\x07\xA1\xA20\xA2\xA3\xA5	\xA4\xA3\xA4\xA5\xA5\xA6\xA6\xA7\x07\xA7\xA8\xAA	\xA9\xA8\xA9\xAA\xAA\xAB\xAB\xAC\x07\xAC\xAD\xAF	\xAE\xAD\xAE\xAF\xAF\xB0\xB0\xB1\x07\xB1\x1B\xB2\xB4	\xB3\xB2\xB3\xB4\xB4\xB5\xB5\xB6\x07\xB6\xB7\xB8.\xB8\xB90\xB9\xF9\xBA\xBB\f\xBB\xBC0\xBC\xF9\xBD\xBE\r\xBE\xBF0\xBF\xF9\xC0\xC1\xC1\xC20\xC2\xF9\xC3\xC4\xC4\xC50\xC5\xF9\xC6\xC7\x07\xC7\xF90\xC8\xC9\x07\xC9\xF90\xCA\xCB\x07\xCB\xF90\xCC\xCD\x07\xCD\xF90\xCE\xCF\x07\xCF\xF90\xD0\xD1\x07\xD1\xF90\xD2\xD3\x07\x07\xD3\xF90\xD4\xD5\x07'\xD5\xDA0\xD6\xD9\xD7\xD9"\xD8\xD6\xD8\xD7\xD9\xDC\xDA\xD8\xDA\xDB\xDB\xDD\xDC\xDA\xDD\xDE\x07\b\xDE\xDF0\xDF\xF9\xE0\xE1\x07	\xE1\xE60\xE2\xE5\xE3\xE5"\xE4\xE2\xE4\xE3\xE5\xE8\xE6\xE4\xE6\xE7\xE7\xE9\xE8\xE6\xE9\xEA\x07\b\xEA\xEB0\xEB\xF9\xEC\xED\x07
\xED\xF20\xEE\xF1\xEF\xF1"\xF0\xEE\xF0\xEF\xF1\xF4\xF2\xF0\xF2\xF3\xF3\xF5\xF4\xF2\xF5\xF6\x07\v\xF6\xF70\xF7\xF9\xF8\xB7\xF8\xBA\xF8\xBD\xF8\xC0\xF8\xC3\xF8\xC6\xF8\xC8\xF8\xCA\xF8\xCC\xF8\xCE\xF8\xD0\xF8\xD2\xF8\xD4\xF8\xE0\xF8\xEC\xF9\xFA\xFF	\xFB\xFE\xFC\xFE"\xFD\xFB\xFD\xFC\xFE\u0101\xFF\xFD\xFF\u0100\u0100\u0102\u0101\xFF\u0102\u0103\x07\b\u0103!\u0104\u0105\x07\u0105\u01060\u0106#\u0107\u0108\x07%\u0108\u01090\u0109\u010A\x07$\u010A\u010B0\u010B\u010C\x07\b\u010C\u010D0\u010D%\u010E\u010F\x07#\u010F\u01100\u0110\u0111(\u0111\u0112\x07\b\u0112\u01130\u0113'\u0114\u011F*\u0115\u0116\x07\r\u0116\u01170\u0117\u0118	\u0118\u01190\u0119\u011A\x07\r\u011A\u011B0\u011B\u011C*\u011C\u011E\u011D\u0115\u011E\u0121\u011F\u011D\u011F\u0120\u0120)\u0121\u011F\u0122\u012E,\u0123\u0124\x07\u0124\u01250\u0125\u0126,\u0126\u012D\u0127\u0128\x07\u0128\u01290\u0129\u012A\f\u012A\u012B0\u012B\u012D\u012C\u0123\u012C\u0127\u012D\u0130\u012E\u012C\u012E\u012F\u012F+\u0130\u012E\u0131\u0132\f\u0132\u01330\u0133\u0144\u0134\u0135\u0135\u01360\u0136\u0144\u0137\u0138\u0138\u01390\u0139\u0144\u013A\u013B\r\u013B\u013C0\u013C\u0144\u013D\u013E\x07	\u013E\u013F0\u013F\u0140(\u0140\u0141\x07\b\u0141\u01420\u0142\u0144\u0143\u0131\u0143\u0134\u0143\u0137\u0143\u013A\u0143\u013D\u0144-\u0145\u0146\x07&\u0146/\u0147\u0149	\u0148\u0147\u0149\u014C\u014A\u0148\u014A\u014B\u014B1\u014C\u014A 79BJNWbnsw|\x98\xA4\xA9\xAE\xB3\xD8\xDA\xE4\xE6\xF0\xF2\xF8\xFD\xFF\u011F\u012C\u012E\u0143\u014A`),u(je,"__ATN");class fV extends Kr.ParserRuleContext{ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}declarationList(e){return e===void 0?this.getRuleContexts(vw):this.getRuleContext(e,vw)}any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_inlineStyle}enterRule(e){e.enterInlineStyle&&e.enterInlineStyle(this)}exitRule(e){e.exitInlineStyle&&e.exitInlineStyle(this)}accept(e){return e.visitInlineStyle?e.visitInlineStyle(this):e.visitChildren(this)}}class vw extends Kr.ParserRuleContext{declaration(e){return e===void 0?this.getRuleContexts(k0):this.getRuleContext(e,k0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_declarationList}enterRule(e){e.enterDeclarationList&&e.enterDeclarationList(this)}exitRule(e){e.exitDeclarationList&&e.exitDeclarationList(this)}accept(e){return e.visitDeclarationList?e.visitDeclarationList(this):e.visitChildren(this)}}class py extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_operator_}copyFrom(e){super.copyFrom(e)}}class $E extends py{ws(){return this.getRuleContext(0,Cr)}Comma(){return this.tryGetToken(je.Comma,0)}Space(){return this.tryGetToken(je.Space,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGoodOperator&&e.enterGoodOperator(this)}exitRule(e){e.exitGoodOperator&&e.exitGoodOperator(this)}accept(e){return e.visitGoodOperator?e.visitGoodOperator(this):e.visitChildren(this)}}class Ng extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_property_}copyFrom(e){super.copyFrom(e)}}class yD extends Ng{ident(){return this.tryGetRuleContext(0,Ig)}ws(){return this.getRuleContext(0,Cr)}Variable(){return this.tryGetToken(je.Variable,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterGoodProperty&&e.enterGoodProperty(this)}exitRule(e){e.exitGoodProperty&&e.exitGoodProperty(this)}accept(e){return e.visitGoodProperty?e.visitGoodProperty(this):e.visitChildren(this)}}class vD extends Ng{ident(){return this.getRuleContext(0,Ig)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterBadProperty&&e.enterBadProperty(this)}exitRule(e){e.exitBadProperty&&e.exitBadProperty(this)}accept(e){return e.visitBadProperty?e.visitBadProperty(this):e.visitChildren(this)}}class k0 extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_declaration}copyFrom(e){super.copyFrom(e)}}class _V extends k0{property_(){return this.getRuleContext(0,Ng)}ws(){return this.getRuleContext(0,Cr)}expr(){return this.getRuleContext(0,Wb)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterKnownDeclaration&&e.enterKnownDeclaration(this)}exitRule(e){e.exitKnownDeclaration&&e.exitKnownDeclaration(this)}accept(e){return e.visitKnownDeclaration?e.visitKnownDeclaration(this):e.visitChildren(this)}}class pV extends k0{property_(){return this.getRuleContext(0,Ng)}ws(){return this.getRuleContext(0,Cr)}value(){return this.getRuleContext(0,OI)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnknownDeclaration&&e.enterUnknownDeclaration(this)}exitRule(e){e.exitUnknownDeclaration&&e.exitUnknownDeclaration(this)}accept(e){return e.visitUnknownDeclaration?e.visitUnknownDeclaration(this):e.visitChildren(this)}}class OI extends Kr.ParserRuleContext{any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_value}enterRule(e){e.enterValue&&e.enterValue(this)}exitRule(e){e.exitValue&&e.exitValue(this)}accept(e){return e.visitValue?e.visitValue(this):e.visitChildren(this)}}class Wb extends Kr.ParserRuleContext{term(e){return e===void 0?this.getRuleContexts(T0):this.getRuleContext(e,T0)}operator_(e){return e===void 0?this.getRuleContexts(py):this.getRuleContext(e,py)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_expr}enterRule(e){e.enterExpr&&e.enterExpr(this)}exitRule(e){e.exitExpr&&e.exitExpr(this)}accept(e){return e.visitExpr?e.visitExpr(this):e.visitChildren(this)}}class T0 extends Kr.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_term}copyFrom(e){super.copyFrom(e)}}class po extends T0{number(){return this.tryGetRuleContext(0,rf)}ws(){return this.tryGetRuleContext(0,Cr)}percentage(){return this.tryGetRuleContext(0,cv)}dimension(){return this.tryGetRuleContext(0,hv)}String_(){return this.tryGetToken(je.String_,0)}UnicodeRange(){return this.tryGetToken(je.UnicodeRange,0)}ident(){return this.tryGetRuleContext(0,Ig)}var_(){return this.tryGetRuleContext(0,FI)}Uri(){return this.tryGetToken(je.Uri,0)}hexcolor(){return this.tryGetRuleContext(0,II)}calc(){return this.tryGetRuleContext(0,MI)}function_(){return this.tryGetRuleContext(0,NI)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterKnownTerm&&e.enterKnownTerm(this)}exitRule(e){e.exitKnownTerm&&e.exitKnownTerm(this)}accept(e){return e.visitKnownTerm?e.visitKnownTerm(this):e.visitChildren(this)}}class gV extends T0{unknownDimension(){return this.getRuleContext(0,dv)}ws(){return this.getRuleContext(0,Cr)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUnknownTerm&&e.enterUnknownTerm(this)}exitRule(e){e.exitUnknownTerm&&e.exitUnknownTerm(this)}accept(e){return e.visitUnknownTerm?e.visitUnknownTerm(this):e.visitChildren(this)}}class NI extends Kr.ParserRuleContext{Function_(){return this.getToken(je.Function_,0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}expr(){return this.getRuleContext(0,Wb)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_function_}enterRule(e){e.enterFunction_&&e.enterFunction_(this)}exitRule(e){e.exitFunction_&&e.exitFunction_(this)}accept(e){return e.visitFunction_?e.visitFunction_(this):e.visitChildren(this)}}class II extends Kr.ParserRuleContext{Hash(){return this.getToken(je.Hash,0)}ws(){return this.getRuleContext(0,Cr)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_hexcolor}enterRule(e){e.enterHexcolor&&e.enterHexcolor(this)}exitRule(e){e.exitHexcolor&&e.exitHexcolor(this)}accept(e){return e.visitHexcolor?e.visitHexcolor(this):e.visitChildren(this)}}class rf extends Kr.ParserRuleContext{Number(){return this.getToken(je.Number,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_number}enterRule(e){e.enterNumber&&e.enterNumber(this)}exitRule(e){e.exitNumber&&e.exitNumber(this)}accept(e){return e.visitNumber?e.visitNumber(this):e.visitChildren(this)}}class cv extends Kr.ParserRuleContext{Percentage(){return this.getToken(je.Percentage,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_percentage}enterRule(e){e.enterPercentage&&e.enterPercentage(this)}exitRule(e){e.exitPercentage&&e.exitPercentage(this)}accept(e){return e.visitPercentage?e.visitPercentage(this):e.visitChildren(this)}}class hv extends Kr.ParserRuleContext{Dimension(){return this.getToken(je.Dimension,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_dimension}enterRule(e){e.enterDimension&&e.enterDimension(this)}exitRule(e){e.exitDimension&&e.exitDimension(this)}accept(e){return e.visitDimension?e.visitDimension(this):e.visitChildren(this)}}class dv extends Kr.ParserRuleContext{UnknownDimension(){return this.getToken(je.UnknownDimension,0)}Plus(){return this.tryGetToken(je.Plus,0)}Minus(){return this.tryGetToken(je.Minus,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_unknownDimension}enterRule(e){e.enterUnknownDimension&&e.enterUnknownDimension(this)}exitRule(e){e.exitUnknownDimension&&e.exitUnknownDimension(this)}accept(e){return e.visitUnknownDimension?e.visitUnknownDimension(this):e.visitChildren(this)}}class Aa extends Kr.ParserRuleContext{ident(){return this.tryGetRuleContext(0,Ig)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}number(){return this.tryGetRuleContext(0,rf)}percentage(){return this.tryGetRuleContext(0,cv)}dimension(){return this.tryGetRuleContext(0,hv)}unknownDimension(){return this.tryGetRuleContext(0,dv)}String_(){return this.tryGetToken(je.String_,0)}Uri(){return this.tryGetToken(je.Uri,0)}Hash(){return this.tryGetToken(je.Hash,0)}UnicodeRange(){return this.tryGetToken(je.UnicodeRange,0)}Includes(){return this.tryGetToken(je.Includes,0)}DashMatch(){return this.tryGetToken(je.DashMatch,0)}Function_(){return this.tryGetToken(je.Function_,0)}any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}unused(e){return e===void 0?this.getRuleContexts(P0):this.getRuleContext(e,P0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_any_}enterRule(e){e.enterAny_&&e.enterAny_(this)}exitRule(e){e.exitAny_&&e.exitAny_(this)}accept(e){return e.visitAny_?e.visitAny_(this):e.visitChildren(this)}}class mV extends Kr.ParserRuleContext{Function_(){return this.getToken(je.Function_,0)}any_(e){return e===void 0?this.getRuleContexts(Aa):this.getRuleContext(e,Aa)}unused(e){return e===void 0?this.getRuleContexts(P0):this.getRuleContext(e,P0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_generalEnclosed}enterRule(e){e.enterGeneralEnclosed&&e.enterGeneralEnclosed(this)}exitRule(e){e.exitGeneralEnclosed&&e.exitGeneralEnclosed(this)}accept(e){return e.visitGeneralEnclosed?e.visitGeneralEnclosed(this):e.visitChildren(this)}}class P0 extends Kr.ParserRuleContext{ws(){return this.getRuleContext(0,Cr)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_unused}enterRule(e){e.enterUnused&&e.enterUnused(this)}exitRule(e){e.exitUnused&&e.exitUnused(this)}accept(e){return e.visitUnused?e.visitUnused(this):e.visitChildren(this)}}class FI extends Kr.ParserRuleContext{Var(){return this.getToken(je.Var,0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}Variable(){return this.getToken(je.Variable,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_var_}enterRule(e){e.enterVar_&&e.enterVar_(this)}exitRule(e){e.exitVar_&&e.exitVar_(this)}accept(e){return e.visitVar_?e.visitVar_(this):e.visitChildren(this)}}class MI extends Kr.ParserRuleContext{Calc(){return this.getToken(je.Calc,0)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}calcSum(){return this.getRuleContext(0,$b)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calc}enterRule(e){e.enterCalc&&e.enterCalc(this)}exitRule(e){e.exitCalc&&e.exitCalc(this)}accept(e){return e.visitCalc?e.visitCalc(this):e.visitChildren(this)}}class $b extends Kr.ParserRuleContext{calcProduct(e){return e===void 0?this.getRuleContexts(Ew):this.getRuleContext(e,Ew)}Space(e){return e===void 0?this.getTokens(je.Space):this.getToken(je.Space,e)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}Plus(e){return e===void 0?this.getTokens(je.Plus):this.getToken(je.Plus,e)}Minus(e){return e===void 0?this.getTokens(je.Minus):this.getToken(je.Minus,e)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calcSum}enterRule(e){e.enterCalcSum&&e.enterCalcSum(this)}exitRule(e){e.exitCalcSum&&e.exitCalcSum(this)}accept(e){return e.visitCalcSum?e.visitCalcSum(this):e.visitChildren(this)}}class Ew extends Kr.ParserRuleContext{calcValue(e){return e===void 0?this.getRuleContexts(Sw):this.getRuleContext(e,Sw)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}number(e){return e===void 0?this.getRuleContexts(rf):this.getRuleContext(e,rf)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calcProduct}enterRule(e){e.enterCalcProduct&&e.enterCalcProduct(this)}exitRule(e){e.exitCalcProduct&&e.exitCalcProduct(this)}accept(e){return e.visitCalcProduct?e.visitCalcProduct(this):e.visitChildren(this)}}class Sw extends Kr.ParserRuleContext{number(){return this.tryGetRuleContext(0,rf)}ws(e){return e===void 0?this.getRuleContexts(Cr):this.getRuleContext(e,Cr)}dimension(){return this.tryGetRuleContext(0,hv)}unknownDimension(){return this.tryGetRuleContext(0,dv)}percentage(){return this.tryGetRuleContext(0,cv)}calcSum(){return this.tryGetRuleContext(0,$b)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_calcValue}enterRule(e){e.enterCalcValue&&e.enterCalcValue(this)}exitRule(e){e.exitCalcValue&&e.exitCalcValue(this)}accept(e){return e.visitCalcValue?e.visitCalcValue(this):e.visitChildren(this)}}class Ig extends Kr.ParserRuleContext{Ident(){return this.getToken(je.Ident,0)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_ident}enterRule(e){e.enterIdent&&e.enterIdent(this)}exitRule(e){e.exitIdent&&e.exitIdent(this)}accept(e){return e.visitIdent?e.visitIdent(this):e.visitChildren(this)}}class Cr extends Kr.ParserRuleContext{Comment(e){return e===void 0?this.getTokens(je.Comment):this.getToken(je.Comment,e)}Space(e){return e===void 0?this.getTokens(je.Space):this.getToken(je.Space,e)}constructor(e,t){super(e,t)}get ruleIndex(){return je.RULE_ws}enterRule(e){e.enterWs&&e.enterWs(this)}exitRule(e){e.exitWs&&e.exitWs(this)}accept(e){return e.visitWs?e.visitWs(this):e.visitChildren(this)}}class xV{apply(e,t){const i=hw.CharStreams.fromString(t),s=new It(i),n=new xD;s.addErrorListener(n);const o=new hw.CommonTokenStream(s),a=new je(o);a.buildParseTree=!0;const l=new xD;a.addErrorListener(l);const c=a.inlineStyle(),d=new lV(e);c.accept(d)}}class yV extends l3{constructor(t){super();u(this,"data_");u(this,"css_parser_");t&&t instanceof um?this.data_=t:this.data_=new um,this.css_parser_=new xV}data(){return J(this.data_),this.data_}setProperty(t,i){J(this.css_parser_),this.data_||(this.data_=new um),this.css_parser_.apply(this,`${t} : ${i};`)}GetDeclaredPropertyValueStringByKey(t){return t>T.kMaxLonghandPropertyKey?(Rr(t,T.kMaxEveryPropertyKey),ze(),_i(nn,'Unsupported property query for "',ot(t),'": Returning of property value strings is not ',"supported for shorthand properties."),""):this.data_&&t!=T.kNoneProperty?this.data_.GetPropertyValueString(t):""}AssignFrom(t){if(!t.data_){this.data_=void 0;return}this.data_||(this.data_=new um),this.data_.AssignFrom(t.data_)}RecordMutation(){ze()}toString(){var t;return(t=this.data_)==null?void 0:t.toString()}}class vV{constructor(){u(this,"declared_property_values_",new Map);u(this,"has_declared_inherited_properties_",!1);u(this,"parent_computed_style_declaration_",null);u(this,"is_inline_before_blockification_",!0);u(this,"declared_properties_inherited_from_parent_",[])}GetPropertyValueReference(e){return T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),this.declared_property_values_.has(e)?this.declared_property_values_.get(e):this.parent_computed_style_declaration_&&cw(e)===uy.kInheritedYes&&this.parent_computed_style_declaration_.HasInheritedProperties()?this.parent_computed_style_declaration_.GetInheritedPropertyValueReference(e):this.GetComputedInitialValue(e)}GetComputedInitialValue(e){switch(e){case T.kAllProperty:case T.kAlignContentProperty:case T.kAlignItemsProperty:case T.kAlignSelfProperty:case T.kBackgroundColorProperty:case T.kBackgroundImageProperty:case T.kBackgroundPositionProperty:case T.kBackgroundProperty:case T.kBackgroundRepeatProperty:case T.kBackgroundSizeProperty:case T.kBorderBottomLeftRadiusProperty:case T.kBorderBottomProperty:case T.kBorderBottomRightRadiusProperty:case T.kBorderBottomStyleProperty:case T.kBorderColorProperty:case T.kBorderLeftProperty:case T.kBorderLeftStyleProperty:case T.kBorderProperty:case T.kBorderRadiusProperty:case T.kBorderRightProperty:case T.kBorderRightStyleProperty:case T.kBorderStyleProperty:case T.kBorderTopLeftRadiusProperty:case T.kBorderTopProperty:case T.kBorderTopRightRadiusProperty:case T.kBorderTopStyleProperty:case T.kBorderWidthProperty:case T.kBottomProperty:case T.kBoxShadowProperty:case T.kColorProperty:case T.kContentProperty:case T.kDisplayProperty:case T.kFilterProperty:case T.kFlexProperty:case T.kFlexBasisProperty:case T.kFlexDirectionProperty:case T.kFlexFlowProperty:case T.kFlexGrowProperty:case T.kFlexShrinkProperty:case T.kFlexWrapProperty:case T.kFontProperty:case T.kFontFamilyProperty:case T.kFontStyleProperty:case T.kFontWeightProperty:case T.kFontSizeProperty:case T.kHeightProperty:case T.kIntersectionObserverRootMarginProperty:case T.kJustifyContentProperty:case T.kLeftProperty:case T.kLineHeightProperty:case T.kMarginBottomProperty:case T.kMarginLeftProperty:case T.kMarginProperty:case T.kMarginRightProperty:case T.kMarginTopProperty:case T.kMaxHeightProperty:case T.kMaxWidthProperty:case T.kMinHeightProperty:case T.kMinWidthProperty:case T.kNoneProperty:case T.kOpacityProperty:case T.kOrderProperty:case T.kOutlineProperty:case T.kOutlineStyleProperty:case T.kOverflowProperty:case T.kOverflowWrapProperty:case T.kPaddingBottomProperty:case T.kPaddingLeftProperty:case T.kPaddingProperty:case T.kPaddingRightProperty:case T.kPaddingTopProperty:case T.kPointerEventsProperty:case T.kPositionProperty:case T.kRightProperty:case T.kSrcProperty:case T.kTextAlignProperty:case T.kTextDecorationLineProperty:case T.kTextDecorationProperty:case T.kTextIndentProperty:case T.kTextOverflowProperty:case T.kTextShadowProperty:case T.kTextTransformProperty:case T.kTopProperty:case T.kTransformOriginProperty:case T.kTransformProperty:case T.kUnicodeRangeProperty:case T.kVerticalAlignProperty:case T.kVisibilityProperty:case T.kWhiteSpaceProperty:case T.kWidthProperty:case T.kWordWrapProperty:case T.kZIndexProperty:break}return cb(e)}get align_content(){return this.GetPropertyValueReference(T.kAlignContentProperty)}get align_items(){return this.GetPropertyValueReference(T.kAlignItemsProperty)}get background_color(){return this.GetPropertyValueReference(T.kBackgroundColorProperty)}get background_image(){return this.GetPropertyValueReference(T.kBackgroundImageProperty)}get background_position(){return this.GetPropertyValueReference(T.kBackgroundPositionProperty)}get background_repeat(){return this.GetPropertyValueReference(T.kBackgroundRepeatProperty)}get background_size(){return this.GetPropertyValueReference(T.kBackgroundSizeProperty)}get border_top_color(){return this.GetPropertyValueReference(T.kBorderTopColorProperty)}get border_right_color(){return this.GetPropertyValueReference(T.kBorderRightColorProperty)}get border_bottom_color(){return this.GetPropertyValueReference(T.kBorderBottomColorProperty)}get border_left_color(){return this.GetPropertyValueReference(T.kBorderLeftColorProperty)}get border_top_style(){return this.GetPropertyValueReference(T.kBorderTopStyleProperty)}get border_right_style(){return this.GetPropertyValueReference(T.kBorderRightStyleProperty)}get border_bottom_style(){return this.GetPropertyValueReference(T.kBorderBottomStyleProperty)}get border_left_style(){return this.GetPropertyValueReference(T.kBorderLeftStyleProperty)}get border_top_width(){return this.GetPropertyValueReference(T.kBorderTopWidthProperty)}get border_right_width(){return this.GetPropertyValueReference(T.kBorderRightWidthProperty)}get border_bottom_width(){return this.GetPropertyValueReference(T.kBorderBottomWidthProperty)}get border_left_width(){return this.GetPropertyValueReference(T.kBorderLeftWidthProperty)}get border_top_left_radius(){return this.GetPropertyValueReference(T.kBorderTopLeftRadiusProperty)}get border_top_right_radius(){return this.GetPropertyValueReference(T.kBorderTopRightRadiusProperty)}get border_bottom_right_radius(){return this.GetPropertyValueReference(T.kBorderBottomRightRadiusProperty)}get border_bottom_left_radius(){return this.GetPropertyValueReference(T.kBorderBottomLeftRadiusProperty)}get bottom(){return this.GetPropertyValueReference(T.kBottomProperty)}get box_shadow(){return this.GetPropertyValueReference(T.kBoxShadowProperty)}get color(){return this.GetPropertyValueReference(T.kColorProperty)}get content(){return this.GetPropertyValueReference(T.kContentProperty)}get display(){return this.GetPropertyValueReference(T.kDisplayProperty)}get filter(){return this.GetPropertyValueReference(T.kFilterProperty)}get flex_basis(){return this.GetPropertyValueReference(T.kFlexBasisProperty)}get flex_direction(){return this.GetPropertyValueReference(T.kFlexDirectionProperty)}get flex_grow(){return this.GetPropertyValueReference(T.kFlexGrowProperty)}get flex_shrink(){return this.GetPropertyValueReference(T.kFlexShrinkProperty)}get flex_wrap(){return this.GetPropertyValueReference(T.kFlexWrapProperty)}get font_family(){return this.GetPropertyValueReference(T.kFontFamilyProperty)}get font_size(){return this.GetPropertyValueReference(T.kFontSizeProperty)}get font_style(){return this.GetPropertyValueReference(T.kFontStyleProperty)}get font_weight(){return this.GetPropertyValueReference(T.kFontWeightProperty)}get height(){return this.GetPropertyValueReference(T.kHeightProperty)}get justify_content(){return this.GetPropertyValueReference(T.kJustifyContentProperty)}get left(){return this.GetPropertyValueReference(T.kLeftProperty)}get line_height(){return this.GetPropertyValueReference(T.kLineHeightProperty)}get margin_bottom(){return this.GetPropertyValueReference(T.kMarginBottomProperty)}get margin_left(){return this.GetPropertyValueReference(T.kMarginLeftProperty)}get margin_right(){return this.GetPropertyValueReference(T.kMarginRightProperty)}get margin_top(){return this.GetPropertyValueReference(T.kMarginTopProperty)}get max_height(){return this.GetPropertyValueReference(T.kMaxHeightProperty)}get max_width(){return this.GetPropertyValueReference(T.kMaxWidthProperty)}get min_height(){return this.GetPropertyValueReference(T.kMinHeightProperty)}get min_width(){return this.GetPropertyValueReference(T.kMinWidthProperty)}get opacity(){return this.GetPropertyValueReference(T.kOpacityProperty)}get order(){return this.GetPropertyValueReference(T.kOrderProperty)}get outline_color(){return this.GetPropertyValueReference(T.kOutlineColorProperty)}get outline_style(){return this.GetPropertyValueReference(T.kOutlineStyleProperty)}get outline_width(){return this.GetPropertyValueReference(T.kOutlineWidthProperty)}get overflow(){return this.GetPropertyValueReference(T.kOverflowProperty)}get overflow_wrap(){return this.GetPropertyValueReference(T.kOverflowWrapProperty)}get padding_bottom(){return this.GetPropertyValueReference(T.kPaddingBottomProperty)}get padding_left(){return this.GetPropertyValueReference(T.kPaddingLeftProperty)}get padding_right(){return this.GetPropertyValueReference(T.kPaddingRightProperty)}get padding_top(){return this.GetPropertyValueReference(T.kPaddingTopProperty)}get pointer_events(){return this.GetPropertyValueReference(T.kPointerEventsProperty)}get position(){return this.GetPropertyValueReference(T.kPositionProperty)}get right(){return this.GetPropertyValueReference(T.kRightProperty)}get text_align(){return this.GetPropertyValueReference(T.kTextAlignProperty)}get text_decoration_color(){return this.GetPropertyValueReference(T.kTextDecorationColorProperty)}get text_decoration_line(){return this.GetPropertyValueReference(T.kTextDecorationLineProperty)}get text_indent(){return this.GetPropertyValueReference(T.kTextIndentProperty)}get text_overflow(){return this.GetPropertyValueReference(T.kTextOverflowProperty)}get text_shadow(){return this.GetPropertyValueReference(T.kTextShadowProperty)}get text_transform(){return this.GetPropertyValueReference(T.kTextTransformProperty)}get top(){return this.GetPropertyValueReference(T.kTopProperty)}get transform(){return this.GetPropertyValueReference(T.kTransformProperty)}get transform_origin(){return this.GetPropertyValueReference(T.kTransformOriginProperty)}get vertical_align(){return this.GetPropertyValueReference(T.kVerticalAlignProperty)}get visibility(){return this.GetPropertyValueReference(T.kVisibilityProperty)}get white_space(){return this.GetPropertyValueReference(T.kWhiteSpaceProperty)}get width(){return this.GetPropertyValueReference(T.kWidthProperty)}get z_index(){return this.GetPropertyValueReference(T.kZIndexProperty)}SetPropertyValue(e,t){T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),t?(this.declared_property_values_.set(e,t),this.has_declared_inherited_properties_=this.has_declared_inherited_properties_||cw(e)==uy.kInheritedYes&&t!=_e.GetInherit()):this.declared_property_values_.has(e)&&this.declared_property_values_.delete(e)}GetPropertyValue(e){return this.GetPropertyValueReference(e)}set_is_inline_before_blockification(e){this.is_inline_before_blockification_=e}set_background_image(e){this.SetPropertyValue(T.kBackgroundImageProperty,e)}has_declared_inherited_properties(){return this.has_declared_inherited_properties_}GetParentComputedStyleDeclaration(){return this.parent_computed_style_declaration_}IsPositioned(){return this.position!=_e.GetStatic()}IsTransformed(){return this.transform!=_e.GetNone()}is_inline_before_blockification(){return this.is_inline_before_blockification_}IsContainingBlockForPositionAbsoluteElements(){return this.IsPositioned()||this.IsTransformed()}IsDeclared(e){return this.declared_property_values_.has(e)}declared_property_values(){return this.declared_property_values_}GetDeclaredPropertyValueReference(e){return T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),J(this.declared_property_values_.has(e)),this.declared_property_values_.get(e)}AddDeclaredPropertyInheritedFromParent(e){T.kNoneProperty,Rr(e,T.kMaxLonghandPropertyKey),this.declared_properties_inherited_from_parent_.push(e)}AreDeclaredPropertiesInheritedFromParentValid(){if(this.declared_properties_inherited_from_parent_.length==0)return!0;if(!this.parent_computed_style_declaration_)return!1;let e=this.parent_computed_style_declaration_.data();if(!e)return!1;J(e.AreDeclaredPropertiesInheritedFromParentValid());for(let t of this.declared_properties_inherited_from_parent_)if(this.GetPropertyValueReference(t)!==e.GetPropertyValueReference(t))return!1;return!0}AssignFrom(e){this.declared_property_values_=e.declared_property_values_,this.has_declared_inherited_properties_=e.has_declared_inherited_properties_,this.declared_properties_inherited_from_parent_=e.declared_properties_inherited_from_parent_,this.parent_computed_style_declaration_=e.parent_computed_style_declaration_,this.is_inline_before_blockification_=e.is_inline_before_blockification_}DoDeclaredPropertiesMatch(e){Kt(this.declared_property_values_.size,e.declared_property_values_.size);for(let t of this.declared_property_values_.keys())if(this.declared_property_values_.get(t)!==e.declared_property_values_.get(t))return!1;return!0}}class Fg extends vV{set_background_color(e){this.SetPropertyValue(T.kBackgroundColorProperty,e)}set_display(e){this.SetPropertyValue(T.kDisplayProperty,e)}set_width(e){this.SetPropertyValue(T.kWidthProperty,e)}set_height(e){this.SetPropertyValue(T.kHeightProperty,e)}SetPropertyValue(e,t){super.SetPropertyValue(e,t)}}class ym{constructor(e){u(this,"properties_",[]);u(this,"properties_bitset_",new Set);this.properties_=e;for(let t=0;t<this.properties_.length;++t){let i=this.properties_[t];T.kNoneProperty,Rr(i,T.kMaxLonghandPropertyKey),this.properties_bitset_.add(i)}}DoDeclaredPropertiesMatch(e,t){for(let i=0;i<this.properties_.length;++i){let s=this.properties_[i],n=e.declared_property_values_.get(s),o=t.declared_property_values_.get(s);if(Boolean(!!n)!==Boolean(o)||n&&!n.EQ(o))return!1}return!0}}class EV{constructor(e=0,t=0,i=0){u(this,"v_",[0,0,0]);$n(e,0,"Specificity field cannot be negative."),$n(t,0,"Specificity field cannot be negative."),$n(i,0,"Specificity field cannot be negative."),this.v_[0]=e,this.v_[1]=t,this.v_[2]=i}LT(e){const{v_:t}=this;return t[0]<e.v_[0]||t[0]==e.v_[0]&&(t[1]<e.v_[1]||t[1]==e.v_[1]&&t[2]<e.v_[2])}EQ(e){const{v_:t}=this;return t[0]==e.v_[0]&&t[1]==e.v_[1]&&t[2]==e.v_[2]}}var ww=(r=>(r[r.kNormalUserAgent=0]="kNormalUserAgent",r[r.kNormalAuthor=1]="kNormalAuthor",r[r.kNormalOverride=2]="kNormalOverride",r[r.kImportantMin=3]="kImportantMin",r[r.kImportantAuthor=3]="kImportantAuthor",r[r.kImportantOverride=4]="kImportantOverride",r[r.kImportantUserAgent=5]="kImportantUserAgent",r[r.kImportantMax=5]="kImportantMax",r))(ww||{});const eu=class{constructor(e=eu.kUnattached,t=eu.kUnattached){u(this,"style_sheet_index_",eu.kUnattached);u(this,"rule_index_",eu.kUnattached);this.style_sheet_index_=e,this.rule_index_=t,$n(e,eu.kUnattached,"Wrong style sheet index."),$n(t,eu.kUnattached,"Wrong rule index.")}LT(e){return this.style_sheet_index_<e.style_sheet_index_||this.style_sheet_index_==e.style_sheet_index_&&this.rule_index_<e.rule_index_}EQ(e){return this.style_sheet_index_==e.style_sheet_index_&&this.rule_index_==e.rule_index_}};let cx=eu;u(cx,"kUnattached",-1);class ED{constructor(e,t=new EV,i=new cx){u(this,"origin_");u(this,"specificity_");u(this,"appearance_");this.origin_=e,this.specificity_=t,this.appearance_=i}origin(){return this.origin_}specificity(){return this.specificity_}appearance(){return this.appearance_}SetImportant(){switch(this.origin_){case 0:{this.origin_=5;break}case 1:{this.origin_=3;break}case 2:{this.origin_=4;break}case 3:case 4:case 5:et()}}LT(e){return this.origin_<e.origin_||this.origin_==e.origin_&&(this.specificity_.LT(e.specificity_)||this.specificity_.EQ(e.specificity_)&&this.appearance_.LT(e.appearance_))}EQ(e){return this.origin_==e.origin_&&this.specificity_==e.specificity_&&this.appearance_==e.appearance_}}function SV(r){let e=new Fg,t=new Array(T.kNumLonghandProperties);if(r){const i=new ED(ww.kImportantMin),s=new ED(ww.kImportantMax);wV(r,i,s,t,e)}return e}function wV(r,e,t,i,s){let n=!1,o=r.declared_property_values();for(let[a,l]of o){T.kNoneProperty,Rr(a,T.kMaxLonghandPropertyKey);let c=r.IsDeclaredPropertyImportant(a)?t:e;(!i[a]||i[a].LT(c))&&(i[a]=c,s.SetPropertyValue(a,l),T.kBackgroundImageProperty==a&&(n=!0))}return n}class el{constructor(e,t){u(this,"width_",0);u(this,"height_",0);if(arguments.length==1){let i=e;this.width_=i.width_,this.height_=i.height_}else arguments.length===2&&(this.width_=e,this.height_=t)}IsEmpty(){return this.width_==0||this.height_==0}width(){return this.width_}height(){return this.height_}set_width(e){this.width_=e}set_height(e){this.height_=e}GetArea(){return this.width()*this.height()}Enlarge(e,t){this.set_width(this.width_+e),this.set_height(this.height_+t)}SetToMin(e){this.width_=this.width_<=e.width_?this.width_:e.width_,this.height_=this.height_<=e.height_?this.height_:e.height_}SetToMax(e){this.width_=this.width_>=e.width_?this.width_:e.width_,this.height_=this.height_>=e.height_?this.height_:e.height_}CLONE(){return new el(this)}Scale(e){this.width_*=e,this.height_*=e}}class tl extends el{GetArea(){return this.width()*this.height()}ToString(){return`${this.width()}x${this.height()}`}}class AV{}class BI extends AV{VisitFontStyle(e){this.VisitDefault(e)}VisitKeyword(e){this.VisitDefault(e)}VisitLength(e){this.VisitDefault(e)}VisitRGBAColor(e){this.VisitDefault(e)}VisitInteger(e){this.VisitDefault(e)}VisitPercentage(e){this.VisitDefault(e)}VisitNumber(e){this.VisitDefault(e)}VisitCalc(e){this.VisitDefault(e)}VisitPropertyList(e){this.VisitDefault(e)}VisitTransformPropertyValue(e){this.VisitDefault(e)}VisitString(e){this.VisitDefault(e)}VisitFontWeight(e){this.VisitDefault(e)}VisitShadow(e){this.VisitDefault(e)}VisitUnicodeRange(e){this.VisitDefault(e)}}class jr extends BI{VisitDefault(e){_i(Pp,"Unsupported property value: ",e.ToString()),et()}}var LI=(r=>(r[r.kLengthsIndexOffsetX=0]="kLengthsIndexOffsetX",r[r.kLengthsIndexOffsetY=1]="kLengthsIndexOffsetY",r[r.kLengthsIndexBlurRadius=2]="kLengthsIndexBlurRadius",r[r.kLengthsIndexSpreadRadius=3]="kLengthsIndexSpreadRadius",r[r.kMaxLengths=4]="kMaxLengths",r))(LI||{});class Kb extends qn{constructor(t,i,s){super();u(this,"lengths_");u(this,"color_");u(this,"has_inset_");Rr(t.length,4),this.lengths_=t.slice(),this.color_=i,this.has_inset_=s}Accept(t){t.VisitShadow(this)}lengths(){return this.lengths_}offset_x(){return this.lengths_[0]}offset_y(){return this.lengths_[1]}blur_radius(){return this.lengths_[2]}spread_radius(){return this.lengths_[3]}color(){return this.color_}has_inset(){return this.has_inset_}ToString(){let t="";for(let i=0;i<4;++i)this.lengths_[i]&&(t.length&&(t+=" "),t+=this.lengths_[i].ToString());return this.color_&&(t.length&&(t+=" "),t+=this.color_.ToString()),this.has_inset_&&(t.length||(t+=" "),t+=m6),t}EQ(t){for(let i=0;i<4;++i)if(!this.lengths_[i]!=!t.lengths_[i]||this.lengths_[i]&&!this.lengths_[i].EQ(t.lengths_[i]))return!1;return this.color_.EQ(t.color_)&&this.has_inset_==t.has_inset_}GetTypeId(){return rr(Kb)}}class bV extends qn{Accept(e){e.VisitTransformPropertyValue(this)}}class au{constructor(e,t){u(this,"x_",0);u(this,"y_",0);if(arguments.length==1){let i=e;this.x_=i.x_,this.y_=i.y_}else this.x_=e||0,this.y_=t||0}x(){return this.x_}y(){return this.y_}SetPoint(e,t){this.x_=e,this.y_=t}set_x(e){this.x_=e}set_y(e){this.y_=e}SetToMin(e){this.x_=this.x_<=e.x_?this.x_:e.x_,this.y_=this.y_<=e.y_?this.y_:e.y_}SetToMax(e){this.x_=this.x_>=e.x_?this.x_:e.x_,this.y_=this.y_>=e.y_?this.y_:e.y_}ADD(e){this.x_+=e.x(),this.y_+=e.y()}EQ(e){return this.x_===e.x_&&this.y_===e.y_}CLONE(){return new au(this.x_,this.y_)}Scale(e){this.x_*=e,this.y_*=e}}class zr extends au{}function gy(r){return new zr(r.x(),r.y())}const Bn=0,Ln=1,Un=2,pn=3,gn=4,mn=5,xn=6,yn=7,vn=8;class Li{constructor(){u(this,"data_",[0,0,0,0,0,0,0,0,0])}static MatrixToArrayCoords(e,t){return J(e>=0&&e<3),J(t>=0&&t<3),e*3+t}static Zeros(){let e=new Li;return e.SetMatrix(0,0,0,0,0,0,0,0,0),e}static Ones(){let e=new Li;return e.SetMatrix(1,1,1,1,1,1,1,1,1),e}static Identity(){let e=new Li;return e.SetMatrix(1,0,0,0,1,0,0,0,1),e}static FromOuterProduct(e,t){let i=new Li;return i.SetMatrix(e.x()*t.x(),e.x()*t.y(),e.x()*t.z(),e.y()*t.x(),e.y()*t.y(),e.y()*t.z(),e.z()*t.x(),e.z()*t.y(),e.z()*t.z()),i}static FromValues(e,t,i,s,n,o,a,l,c){let d=new Li;return d.SetMatrix(e,t,i,s,n,o,a,l,c),d}SetMatrix(e,t,i,s,n,o,a,l,c){const{data_:d}=this;d[0]=e,d[1]=t,d[2]=i,d[3]=s,d[4]=n,d[5]=o,d[6]=a,d[7]=l,d[8]=c}IsZeros(){return this.data_[Bn]==0&&this.data_[Ln]==0&&this.data_[Un]==0&&this.data_[pn]==0&&this.data_[gn]==0&&this.data_[mn]==0&&this.data_[xn]==0&&this.data_[yn]==0&&this.data_[vn]==0}IsIdentity(){return this.data_[Bn]==1&&this.data_[Ln]==0&&this.data_[Un]==0&&this.data_[pn]==0&&this.data_[gn]==1&&this.data_[mn]==0&&this.data_[xn]==0&&this.data_[yn]==0&&this.data_[vn]==1}EQ(e){return iO(this.data_,e.data_)}Get(e,t){return this.data_[Li.MatrixToArrayCoords(e,t)]}MUL(e){if(e instanceof Li){let t=new Li;const{data_:i}=this;return t.data_[Bn]=i[Bn]*e.data_[Bn]+i[Ln]*e.data_[pn]+i[Un]*e.data_[xn],t.data_[Ln]=i[Bn]*e.data_[Ln]+i[Ln]*e.data_[gn]+i[Un]*e.data_[yn],t.data_[Un]=i[Bn]*e.data_[Un]+i[Ln]*e.data_[mn]+i[Un]*e.data_[vn],t.data_[pn]=i[pn]*e.data_[Bn]+i[gn]*e.data_[pn]+i[mn]*e.data_[xn],t.data_[gn]=i[pn]*e.data_[Ln]+i[gn]*e.data_[gn]+i[mn]*e.data_[yn],t.data_[mn]=i[pn]*e.data_[Un]+i[gn]*e.data_[mn]+i[mn]*e.data_[vn],t.data_[xn]=i[xn]*e.data_[Bn]+i[yn]*e.data_[pn]+i[vn]*e.data_[xn],t.data_[yn]=i[xn]*e.data_[Ln]+i[yn]*e.data_[gn]+i[vn]*e.data_[yn],t.data_[vn]=i[xn]*e.data_[Un]+i[yn]*e.data_[mn]+i[vn]*e.data_[vn],t}else if(e instanceof zr){let t=e.x()*this.data_[Bn]+e.y()*this.data_[Ln]+this.data_[Un],i=e.x()*this.data_[pn]+e.y()*this.data_[gn]+this.data_[mn],s=e.x()*this.data_[xn]+e.y()*this.data_[yn]+this.data_[vn];return new zr(t/s,i/s)}else throw new Error("500")}Inverse(){let e=Li.Zeros(),t=kV(this.data_);return Number.MIN_VALUE>Math.abs(t)||e.SetMatrix((this.data_[gn]*this.data_[vn]-this.data_[mn]*this.data_[yn])/t,(this.data_[Un]*this.data_[yn]-this.data_[Ln]*this.data_[vn])/t,(this.data_[Ln]*this.data_[mn]-this.data_[Un]*this.data_[gn])/t,(this.data_[mn]*this.data_[xn]-this.data_[pn]*this.data_[vn])/t,(this.data_[Bn]*this.data_[vn]-this.data_[Un]*this.data_[xn])/t,(this.data_[Un]*this.data_[pn]-this.data_[Bn]*this.data_[mn])/t,(this.data_[pn]*this.data_[yn]-this.data_[gn]*this.data_[xn])/t,(this.data_[Ln]*this.data_[xn]-this.data_[Bn]*this.data_[yn])/t,(this.data_[Bn]*this.data_[gn]-this.data_[Ln]*this.data_[pn])/t),e}CLONE(){let e=new Li;return e.SetMatrix(...this.data_),e}}function kV(r){return r[Bn]*(r[gn]*r[vn]-r[mn]*r[yn])+r[Ln]*(r[mn]*r[xn]-r[pn]*r[vn])+r[Un]*(r[pn]*r[yn]-r[gn]*r[xn])}class TV{constructor(e){u(this,"functions_",[]);u(this,"traits_",0);e&&(this.functions_=Js(e.functions_),this.traits_=e.traits_)}[Symbol.iterator](){let e=0;return{next:()=>e<this.functions_.length?{value:this.functions_[e++],done:!1}:{done:!0}}}push(e){this.traits_|=e.Traits(),this.functions_.push(e)}get length(){return this.functions_.length}getItem(e){return this.functions_[e]}HasTrait(e){return(this.traits_&e)!=0}}class Xb extends bV{constructor(t){super();u(this,"value_");this.value_=t}ToString(){let t="";for(let i=0;i<this.value().length;++i)t.length&&(t+=" "),t+=this.value().getItem(i).ToString();return t}value(){return this.value_}ToMatrix(t){let i=Li.Identity();for(let s of this.value())i=i.MUL(s.ToMatrix(t));return i}EQ(t){if(this.value().length!=t.value().length)return!1;for(let i=0;i<this.value().length;++i)if(!this.value().getItem(i).EQ(t.value().getItem(i)))return!1;return!0}HasTrait(t){return this.value_.HasTrait(t)}GetTypeId(){return rr(Xb)}}var Yb=(r=>(r[r.kTraitIsDynamic=1]="kTraitIsDynamic",r[r.kTraitUsesRelativeUnits=2]="kTraitUsesRelativeUnits",r[r.kTraitUsesUiNavFocus=4]="kTraitUsesUiNavFocus",r))(Yb||{});class PV{}function Aw(r){let e=new Fg;return UI(e,r,r.data(),new tl),e}function UI(r,e,t,i){J(r),J(e),J(t);let s=new RV(r,e,t,i);const n=d9();for(let a of n)!r.IsDeclared(a)&&e.data().IsDeclared(a)&&r.SetPropertyValue(a,_e.GetInherit());let o=r.declared_property_values();for(let[a,l]of o)s.SetComputedStyleForProperty(a,l);s.BlockifyIfNeeded()}class RV{constructor(e,t,i,s){u(this,"cascaded_style_");u(this,"parent_computed_style_");u(this,"root_computed_style_");u(this,"viewport_size_");u(this,"computed_border_bottom_style_");u(this,"computed_border_left_style_");u(this,"computed_border_right_style_");u(this,"computed_border_top_style_");u(this,"computed_color_");u(this,"computed_font_size_");u(this,"computed_outline_style_");u(this,"computed_position_");this.cascaded_style_=e,this.parent_computed_style_=t.data(),this.root_computed_style_=i,this.viewport_size_=s}SetComputedStyleForProperty(e,t){let{result:i,value:s}=this.HandleInheritOrInitial(e,t);i||this.HandleSpecifiedValue(e,s),this.OnComputedStyleCalculated(e,s),s!==t&&this.cascaded_style_.SetPropertyValue(e,s)}BlockifyIfNeeded(){let e=this.cascaded_style_.display,t=e==_e.GetInlineFlex(),i=e==_e.GetInline()||e==_e.GetInlineBlock()||t,s=this.parent_computed_style_.display,n=s==_e.GetFlex()||s==_e.GetInlineFlex();i&&(this.IsAbsolutelyPositioned()||n)&&(t?this.cascaded_style_.set_display(_e.GetFlex()):this.cascaded_style_.set_display(_e.GetBlock())),this.cascaded_style_.set_is_inline_before_blockification(i)}ComputeValue(e){if(this.cascaded_style_.IsDeclared(e)){let t=this.cascaded_style_.GetDeclaredPropertyValueReference(e);this.SetComputedStyleForProperty(e,t)}else{let t=this.cascaded_style_.GetPropertyValueReference(e);this.OnComputedStyleCalculated(e,t)}}HandleInheritOrInitial(e,t){return t==_e.GetInherit()?(this.cascaded_style_.AddDeclaredPropertyInheritedFromParent(e),t=this.parent_computed_style_.GetPropertyValue(e),{result:!0,value:t}):t==_e.GetInitial()?(t=cb(e),{result:t!=_e.GetCurrentColor(),value:t}):{result:!1,value:t}}HandleSpecifiedValue(e,t){switch(e){case T.kBackgroundPositionProperty:{let i=new DV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i);let s=i.computed_background_position();s&&(t=s)}break;case T.kBorderBottomColorProperty:case T.kBorderLeftColorProperty:case T.kBorderRightColorProperty:case T.kBorderTopColorProperty:case T.kOutlineColorProperty:case T.kTextDecorationColorProperty:t==_e.GetCurrentColor()&&(t=this.GetColor());break;case T.kBorderBottomWidthProperty:case T.kBorderLeftWidthProperty:case T.kBorderRightWidthProperty:case T.kBorderTopWidthProperty:case T.kOutlineWidthProperty:{let i=new CV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.GetBorderOrOutlineStyleBasedOnWidth(e));t.Accept(i),t=i.computed_border_width()}break;case T.kBoxShadowProperty:case T.kTextShadowProperty:{let i=new OV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.GetColor());t.Accept(i),t=i.computed_shadow()}break;case T.kFlexBasisProperty:{let i=new NV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_value()}break;case T.kFontSizeProperty:if(!this.computed_font_size_){let i=new IV(this.parent_computed_style_.font_size,this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),i.computed_font_size()&&(t=i.computed_font_size())}break;case T.kFontWeightProperty:{let i=new FV;t.Accept(i),t=i.computed_font_weight()}break;case T.kHeightProperty:{let i=new MV(this.parent_computed_style_.height,this.parent_computed_style_.top,this.parent_computed_style_.bottom,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.IsAbsolutelyPositioned());t.Accept(i),t=i.computed_height()}break;case T.kLineHeightProperty:{let i=new BV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_line_height()}break;case T.kMarginBottomProperty:case T.kMarginLeftProperty:case T.kMarginRightProperty:case T.kMarginTopProperty:{let i=new SD(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_margin_or_padding_edge()}break;case T.kPaddingBottomProperty:case T.kPaddingLeftProperty:case T.kPaddingRightProperty:case T.kPaddingTopProperty:{let i=new SD(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_margin_or_padding_edge()}break;case T.kMaxHeightProperty:{let i=new LV(this.parent_computed_style_.height,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.IsAbsolutelyPositioned());t.Accept(i),t=i.computed_max_height()}break;case T.kMinHeightProperty:{let i=new UV(this.parent_computed_style_.height,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent(),this.IsAbsolutelyPositioned());t.Accept(i),t=i.computed_min_height()}break;case T.kMaxWidthProperty:case T.kMinWidthProperty:{let i=new GV(this.parent_computed_style_.width,this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_min_max_width()}break;case T.kWidthProperty:{let i=new zV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_value()}break;case T.kBackgroundImageProperty:ze();break;case T.kBackgroundSizeProperty:{let i=new HV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_background_size()}break;case T.kBorderBottomLeftRadiusProperty:case T.kBorderBottomRightRadiusProperty:case T.kBorderTopLeftRadiusProperty:case T.kBorderTopRightRadiusProperty:{let i=new jV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_border_radius()}break;case T.kTextIndentProperty:{let i=new VV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_text_indent()}break;case T.kTransformOriginProperty:{let i=new WV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_transform_origin()}break;case T.kTransformProperty:{let i=new $V(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_transform_list()}break;case T.kBottomProperty:case T.kLeftProperty:case T.kRightProperty:case T.kTopProperty:{let i=new KV(this.GetFontSize(),this.GetRootFontSize(),this.GetViewportSizeOnePercent());t.Accept(i),t=i.computed_position_offset()}break;case T.kAlignContentProperty:case T.kAlignItemsProperty:case T.kAlignSelfProperty:case T.kBackgroundColorProperty:case T.kBackgroundRepeatProperty:case T.kBorderBottomStyleProperty:case T.kBorderLeftStyleProperty:case T.kBorderRightStyleProperty:case T.kBorderTopStyleProperty:case T.kColorProperty:case T.kContentProperty:case T.kDisplayProperty:case T.kFilterProperty:case T.kFlexDirectionProperty:case T.kFlexGrowProperty:case T.kFlexShrinkProperty:case T.kFlexWrapProperty:case T.kFontFamilyProperty:case T.kFontStyleProperty:case T.kIntersectionObserverRootMarginProperty:case T.kJustifyContentProperty:case T.kOpacityProperty:case T.kOrderProperty:case T.kOutlineStyleProperty:case T.kOverflowProperty:case T.kOverflowWrapProperty:case T.kPointerEventsProperty:case T.kPositionProperty:case T.kTextAlignProperty:case T.kTextDecorationLineProperty:case T.kTextOverflowProperty:case T.kTextTransformProperty:case T.kVerticalAlignProperty:case T.kVisibilityProperty:case T.kWhiteSpaceProperty:case T.kWordWrapProperty:case T.kZIndexProperty:break;case T.kAllProperty:case T.kBackgroundProperty:case T.kBorderBottomProperty:case T.kBorderColorProperty:case T.kBorderLeftProperty:case T.kBorderProperty:case T.kBorderRadiusProperty:case T.kBorderRightProperty:case T.kBorderStyleProperty:case T.kBorderTopProperty:case T.kBorderWidthProperty:case T.kFlexProperty:case T.kFlexFlowProperty:case T.kFontProperty:case T.kMarginProperty:case T.kNoneProperty:case T.kOutlineProperty:case T.kPaddingProperty:case T.kSrcProperty:case T.kTextDecorationProperty:case T.kUnicodeRangeProperty:et();break}}OnComputedStyleCalculated(e,t){switch(e){case T.kFontSizeProperty:this.computed_font_size_=t;break;case T.kPositionProperty:this.computed_position_=t;break;case T.kBorderBottomStyleProperty:this.computed_border_bottom_style_=t;break;case T.kBorderLeftStyleProperty:this.computed_border_left_style_=t;break;case T.kBorderRightStyleProperty:this.computed_border_right_style_=t;break;case T.kBorderTopStyleProperty:this.computed_border_top_style_=t;break;case T.kColorProperty:this.computed_color_=t;break;case T.kOutlineStyleProperty:this.computed_outline_style_=t;break;case T.kAllProperty:case T.kAlignContentProperty:case T.kAlignItemsProperty:case T.kAlignSelfProperty:case T.kBackgroundColorProperty:case T.kBackgroundImageProperty:case T.kBackgroundPositionProperty:case T.kBackgroundProperty:case T.kBackgroundRepeatProperty:case T.kBackgroundSizeProperty:case T.kBorderBottomProperty:case T.kBorderBottomColorProperty:case T.kBorderBottomLeftRadiusProperty:case T.kBorderBottomRightRadiusProperty:case T.kBorderBottomWidthProperty:case T.kBorderColorProperty:case T.kBorderLeftProperty:case T.kBorderLeftColorProperty:case T.kBorderLeftWidthProperty:case T.kBorderRadiusProperty:case T.kBorderRightProperty:case T.kBorderRightColorProperty:case T.kBorderRightWidthProperty:case T.kBorderStyleProperty:case T.kBorderTopProperty:case T.kBorderTopColorProperty:case T.kBorderTopLeftRadiusProperty:case T.kBorderTopRightRadiusProperty:case T.kBorderTopWidthProperty:case T.kBorderProperty:case T.kBorderWidthProperty:case T.kBottomProperty:case T.kBoxShadowProperty:case T.kContentProperty:case T.kDisplayProperty:case T.kFilterProperty:case T.kFlexProperty:case T.kFlexBasisProperty:case T.kFlexDirectionProperty:case T.kFlexFlowProperty:case T.kFlexGrowProperty:case T.kFlexShrinkProperty:case T.kFlexWrapProperty:case T.kFontFamilyProperty:case T.kFontProperty:case T.kFontStyleProperty:case T.kFontWeightProperty:case T.kHeightProperty:case T.kIntersectionObserverRootMarginProperty:case T.kJustifyContentProperty:case T.kLeftProperty:case T.kLineHeightProperty:case T.kMarginBottomProperty:case T.kMarginLeftProperty:case T.kMarginProperty:case T.kMarginRightProperty:case T.kMarginTopProperty:case T.kMaxHeightProperty:case T.kMaxWidthProperty:case T.kMinHeightProperty:case T.kMinWidthProperty:case T.kNoneProperty:case T.kOpacityProperty:case T.kOrderProperty:case T.kOutlineProperty:case T.kOutlineColorProperty:case T.kOutlineWidthProperty:case T.kOverflowProperty:case T.kOverflowWrapProperty:case T.kPaddingBottomProperty:case T.kPaddingLeftProperty:case T.kPaddingProperty:case T.kPaddingRightProperty:case T.kPaddingTopProperty:case T.kPointerEventsProperty:case T.kRightProperty:case T.kSrcProperty:case T.kTextAlignProperty:case T.kTextDecorationColorProperty:case T.kTextDecorationLineProperty:case T.kTextDecorationProperty:case T.kTextIndentProperty:case T.kTextOverflowProperty:case T.kTextShadowProperty:case T.kTextTransformProperty:case T.kTopProperty:case T.kTransformOriginProperty:case T.kTransformProperty:case T.kUnicodeRangeProperty:case T.kVerticalAlignProperty:case T.kVisibilityProperty:case T.kWhiteSpaceProperty:case T.kWidthProperty:case T.kWordWrapProperty:case T.kZIndexProperty:break}}IsAbsolutelyPositioned(){return this.computed_position_||this.ComputeValue(T.kPositionProperty),J(this.computed_position_),this.computed_position_==_e.GetAbsolute()||this.computed_position_==_e.GetFixed()}GetFontSize(){return this.computed_font_size_||this.ComputeValue(T.kFontSizeProperty),J(this.computed_font_size_),this.computed_font_size_}GetRootFontSize(){return this.root_computed_style_.font_size}GetViewportSizeOnePercent(){return this.viewport_size_}GetBorderOrOutlineStyleBasedOnWidth(e){return e==T.kBorderBottomWidthProperty?this.GetBorderBottomStyle():e==T.kBorderLeftWidthProperty?this.GetBorderLeftStyle():e==T.kBorderRightWidthProperty?this.GetBorderRightStyle():e==T.kBorderTopWidthProperty?this.GetBorderTopStyle():(Kt(e,T.kOutlineWidthProperty),this.GetOutlineStyle())}GetBorderBottomStyle(){return this.computed_border_bottom_style_||this.ComputeValue(T.kBorderBottomStyleProperty),J(this.computed_border_bottom_style_),this.computed_border_bottom_style_}GetBorderLeftStyle(){return this.computed_border_left_style_||this.ComputeValue(T.kBorderLeftStyleProperty),J(this.computed_border_left_style_),this.computed_border_left_style_}GetBorderRightStyle(){return this.computed_border_right_style_||this.ComputeValue(T.kBorderRightStyleProperty),J(this.computed_border_right_style_),this.computed_border_right_style_}GetBorderTopStyle(){return this.computed_border_top_style_||this.ComputeValue(T.kBorderTopStyleProperty),J(this.computed_border_top_style_),this.computed_border_top_style_}GetOutlineStyle(){return this.computed_outline_style_||this.ComputeValue(T.kOutlineStyleProperty),J(this.computed_outline_style_),this.computed_outline_style_}GetColor(){return this.computed_color_||this.ComputeValue(T.kColorProperty),J(this.computed_color_),this.computed_color_}}class DV extends jr{constructor(t,i,s){super();u(this,"computed_font_size_");u(this,"root_computed_font_size_");u(this,"viewport_size_");u(this,"computed_background_position_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitPropertyList(t){let i=t.value().length;$n(i,1),Rr(i,4);let s=new GI(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_),n=[];s.ComputePosition(t.value(),n),this.computed_background_position_=new ko(n)}computed_background_position(){return this.computed_background_position_}}class Xh{constructor(e,t,i){this.origin_as_percentage=e,this.offset_multiplier=t,this.direction=i}}class GI{constructor(e,t,i){u(this,"computed_font_size_");u(this,"root_computed_font_size_");u(this,"viewport_size_");this.computed_font_size_=e,this.root_computed_font_size_=t,this.viewport_size_=i}ComputePosition(e,t){switch(e.length){case 1:this.ComputeOneValuePosition(e,t);break;case 2:this.ComputeTwoValuesPosition(e,t);break;case 3:case 4:this.ComputeThreeOrFourValuesPosition(e,t);break}}ComputeOneValuePosition(e,t){$n(e.length,1);let i=[];i.push(e[0]),i.push(_e.GetCenter()),this.ComputeTwoValuesPosition(i,t)}ComputeTwoValuesPosition(e,t){$n(e.length,2);for(let i=0;i<2;++i){let s=e[i];if(s.GetTypeId()==rr(ca))t[i]=s;else if(s.GetTypeId()==rr(_e))this.FillPositionBuilderFromOriginAndOffset(s,void 0,t);else{let n=new Xh(0,1,3);t[i]=this.ProvideCalcValueFromOriginAndOffset(n,s)}}}ComputeThreeOrFourValuesPosition(e,t){e.length,Rr(e.length,4);for(let i=0;i<e.length;++i){let s=i==0?void 0:e[i-1],n=e[i];n.GetTypeId()==rr(_e)?this.FillPositionBuilderFromOriginAndOffset(n,void 0,t):(J(s),J(s.GetTypeId()==rr(_e)),this.FillPositionBuilderFromOriginAndOffset(s,n,t))}}ConvertToOriginInfo(e){return J(e.GetTypeId()==rr(_e)),e==_e.GetLeft()?new Xh(0,1,0):e==_e.GetRight()?new Xh(1,-1,0):e==_e.GetTop()?new Xh(0,1,1):e==_e.GetBottom()?new Xh(1,-1,1):new Xh(.5,1,2)}ProvideCalcValueFromOriginAndOffset(e,t){if(J(e),!t)return new ca(new Zs(e.origin_as_percentage));let i,s;if(t.GetTypeId()==rr(Qt)){let n=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);return i=new Qt(e.offset_multiplier*n.value(),n.unit()),s=new Zs(e.origin_as_percentage),new ca(i,s)}else{J(t.GetTypeId()==rr(Zs));let n=t;return s=new Zs(e.origin_as_percentage+e.offset_multiplier*n.value()),new ca(s)}}FillPositionBuilderFromOriginAndOffset(e,t,i){J(e.GetTypeId()==rr(_e));let s=this.ConvertToOriginInfo(e);switch(s.direction){case 0:{i[0]=this.ProvideCalcValueFromOriginAndOffset(s,t);break}case 1:{i[1]=this.ProvideCalcValueFromOriginAndOffset(s,t);break}case 2:{i[0]||(i[0]=this.ProvideCalcValueFromOriginAndOffset(s,t)),i[1]||(i[1]=this.ProvideCalcValueFromOriginAndOffset(s,t));break}case 3:et();break}}}function Nn(r,e,t,i){switch(r.unit()){case Ft.kPixelsUnit:return r;case Ft.kFontSizesAkaEmUnit:return Kt(Ft.kPixelsUnit,e.unit()),new Qt(e.value()*r.value(),Ft.kPixelsUnit);case Ft.kRootElementFontSizesAkaRemUnit:return Kt(Ft.kPixelsUnit,t.unit()),new Qt(t.value()*r.value(),Ft.kPixelsUnit);case Ft.kViewportWidthPercentsAkaVwUnit:return new Qt(i.width()*r.value()/100,Ft.kPixelsUnit);case Ft.kViewportHeightPercentsAkaVhUnit:return new Qt(i.height()*r.value()/100,Ft.kPixelsUnit)}et()}class CV extends jr{constructor(t,i,s,n){super();u(this,"computed_border_width_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s,this.border_style_=n}VisitLength(t){this.border_style_==_e.GetNone()||this.border_style_==_e.GetHidden()?this.computed_border_width_=new Qt(0,Ft.kPixelsUnit):(Kt(this.border_style_,_e.GetSolid()),this.computed_border_width_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_))}computed_border_width(){return this.computed_border_width_}}class OV extends jr{constructor(t,i,s,n){super();u(this,"computed_shadow_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s,this.computed_color_=n}VisitKeyword(t){switch(t.value()){case _.kNone:this.computed_shadow_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitPropertyList(t){let i=new Array(t.value().length);for(let s=0;s<t.value().length;++s){let n=t.value()[s],o=[];for(let l=0;l<LI.kMaxLengths;++l){let c=n.lengths()[l];c&&(o[l]=Nn(c,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_))}let a=n.color();a||(a=new Sr(this.computed_color_.value())),i.push(new Kb(o,a,n.has_inset()))}this.computed_shadow_=new ko(i)}computed_shadow(){return this.computed_shadow_}}class zI extends jr{constructor(t,i,s){super();u(this,"computed_value_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_value_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_value_=t}computed_value(){return this.computed_value_}}class NV extends zI{VisitKeyword(e){switch(e.value()){case _.kAuto:case _.kContent:this.computed_value_=e;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}class IV extends jr{constructor(t,i,s){super();u(this,"computed_font_size_");this.parent_computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_font_size_=Nn(t,this.parent_computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_font_size_=new Qt(this.parent_computed_font_size_.value()*t.value(),Ft.kPixelsUnit)}computed_font_size(){return this.computed_font_size_}}class FV extends jr{constructor(){super();u(this,"computed_font_weight_")}VisitFontWeight(t){this.computed_font_weight_=t}computed_font_weight(){return this.computed_font_weight_}}class MV extends jr{constructor(t,i,s,n,o,a,l){super();u(this,"computed_height_");this.parent_computed_height_=t,this.parent_computed_top_=i,this.parent_computed_bottom_=s,this.computed_font_size_=n,this.root_computed_font_size_=o,this.viewport_size_=a,this.out_of_flow_=l}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_height_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=_e.GetAuto();this.parent_computed_height_==i&&(this.parent_computed_top_==i||this.parent_computed_bottom_==i)&&this.out_of_flow_}computed_height(){return this.computed_height_}}class BV extends jr{constructor(t,i,s){super();u(this,"computed_line_height_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kNormal:this.computed_line_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_line_height_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitNumber(t){this.computed_line_height_=t}VisitPercentage(t){this.computed_line_height_=new Qt(this.computed_font_size_.value()*t.value(),Ft.kPixelsUnit)}computed_line_height(){return this.computed_line_height_}}class SD extends jr{constructor(t,i,s){super();u(this,"computed_margin_or_padding_edge_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_margin_or_padding_edge_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_margin_or_padding_edge_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_margin_or_padding_edge_=t}computed_margin_or_padding_edge(){return this.computed_margin_or_padding_edge_}}class LV extends jr{constructor(t,i,s,n,o){super();u(this,"computed_max_height_");this.parent_computed_max_height_=t,this.computed_font_size_=i,this.root_computed_font_size_=s,this.viewport_size_=n,this.out_of_flow_=o}VisitKeyword(t){switch(t.value()){case _.kAuto:case _.kNone:this.computed_max_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_max_height_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=_e.GetAuto(),s=_e.GetNone();this.computed_max_height_=this.parent_computed_max_height_==i&&!this.out_of_flow_?s:t}computed_max_height(){return this.computed_max_height_}}class UV extends jr{constructor(t,i,s,n,o){super();u(this,"computed_min_height_");this.parent_computed_height_=t,this.computed_font_size_=i,this.root_computed_font_size_=s,this.viewport_size_=n,this.out_of_flow_=o}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_min_height_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_min_height_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=_e.GetAuto();this.parent_computed_height_==i&&!this.out_of_flow_?this.computed_min_height_=new Qt(0,Ft.kPixelsUnit):this.computed_min_height_=t}computed_min_height(){return this.computed_min_height_}}class GV extends jr{constructor(t,i,s,n){super();u(this,"computed_min_max_width_");this.parent_computed_width_=t,this.computed_font_size_=i,this.root_computed_font_size_=s,this.viewport_size_=n}VisitKeyword(t){switch(t.value()){case _.kAuto:case _.kNone:this.computed_min_max_width_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_min_max_width_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){let i=new XV;this.parent_computed_width_.Accept(i),i.computed_length_is_negative()?this.computed_min_max_width_=new Qt(0,Ft.kPixelsUnit):this.computed_min_max_width_=t}computed_min_max_width(){return this.computed_min_max_width_}}class zV extends zI{VisitKeyword(e){switch(e.value()){case _.kAuto:this.computed_value_=e;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}class HV extends jr{constructor(t,i,s){super();u(this,"computed_background_size_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){this.computed_background_size_=t}VisitPropertyList(t){let i=new wD(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);t.value()[0].Accept(i);let s=new wD(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);t.value()[1].Accept(s);let n=new Array(2);n.push(i.computed_background_size()),n.push(s.computed_background_size()),this.computed_background_size_=new ko(n.slice())}computed_background_size(){return this.computed_background_size_}}class jV extends jr{constructor(t,i,s){super();u(this,"computed_border_radius_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_border_radius_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_border_radius_=t}computed_border_radius(){return this.computed_border_radius_}}class VV extends jr{constructor(t,i,s){super();u(this,"computed_text_indent_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_text_indent_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}computed_text_indent(){return this.computed_text_indent_}}class WV extends jr{constructor(t,i,s){super();u(this,"computed_transform_origin_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitPropertyList(t){let i=t.value().length;$n(i,1),Rr(i,3);let s=new GI(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_),n=new Array(3);switch(i){case 1:case 2:s.ComputePosition(t.value(),n),n[2]=new Qt(0,Ft.kPixelsUnit);break;case 3:s.ComputeTwoValuesPosition(t.value(),n),n[2]=Nn(t.value()[2],this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);break}this.computed_transform_origin_=new ko(n.slice())}computed_transform_origin(){return this.computed_transform_origin_}}class $V extends jr{constructor(t,i,s){super();u(this,"computed_transform_list_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kNone:this.computed_transform_list_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitTransformPropertyValue(t){let i=t;if(!i.value().HasTrait(Yb.kTraitUsesRelativeUnits))this.computed_transform_list_=i;else{let s=new TV;for(let n of s){let o=new YV(this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_);n.Accept(o),s.push(o.PassComputedTransformFunction())}this.computed_transform_list_=new Xb(s)}}computed_transform_list(){return this.computed_transform_list_}}class KV extends jr{constructor(t,i,s){super();u(this,"computed_position_offset_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitKeyword(t){switch(t.value()){case _.kAuto:this.computed_position_offset_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitLength(t){this.computed_position_offset_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_position_offset_=t}computed_position_offset(){return this.computed_position_offset_}}class XV extends BI{constructor(){super(...arguments);u(this,"computed_length_is_negative_",!1)}VisitLength(t){switch(t.unit()){case Ft.kPixelsUnit:case Ft.kFontSizesAkaEmUnit:case Ft.kRootElementFontSizesAkaRemUnit:case Ft.kViewportWidthPercentsAkaVwUnit:case Ft.kViewportHeightPercentsAkaVhUnit:this.computed_length_is_negative_=t.value()<0;break}}VisitDefault(t){}computed_length_is_negative(){return this.computed_length_is_negative_}}class wD extends jr{constructor(t,i,s){super();u(this,"computed_background_size_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitLength(t){this.computed_background_size_=Nn(t,this.computed_font_size_,this.root_computed_font_size_,this.viewport_size_)}VisitPercentage(t){this.computed_background_size_=t}VisitKeyword(t){switch(t.value()){case _.kAuto:case _.kContain:case _.kCover:this.computed_background_size_=t;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContent:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}computed_background_size(){return this.computed_background_size_}}class YV extends PV{constructor(t,i,s){super();u(this,"computed_transform_function_");this.computed_font_size_=t,this.root_computed_font_size_=i,this.viewport_size_=s}VisitMatrix(t){this.computed_transform_function_=t}VisitRotate(t){this.computed_transform_function_=t}VisitScale(t){this.computed_transform_function_=t}VisitTranslate(t){this.computed_transform_function_=t}PassComputedTransformFunction(){return this.computed_transform_function_}}var HI=(r=>(r[r.kAncestorsAreDisplayed=0]="kAncestorsAreDisplayed",r[r.kAncestorsAreNotDisplayed=1]="kAncestorsAreNotDisplayed",r))(HI||{}),gp=(r=>(r[r.kDirAuto=0]="kDirAuto",r[r.kDirLeftToRight=1]="kDirLeftToRight",r[r.kDirRightToLeft=2]="kDirRightToLeft",r[r.kDirNotDefined=3]="kDirNotDefined",r))(gp||{});class qV{constructor(){u(this,"computed_style_invalidation_property_checker");u(this,"layout_box_invalidation_property_checker");u(this,"size_invalidation_property_checker");u(this,"cross_references_invalidation_property_checker");let e=[],t=[],i=[],s=[];for(let n=0;n<=T.kMaxLonghandPropertyKey;++n){let o=n;f9(o)==i3.kImpactsChildComputedStyleYes&&e.push(o),cw(o)==uy.kInheritedYes||_9(o)==n3.kImpactsBoxGenerationYes?t.push(o):(p9(o)==s3.kImpactsBoxSizesYes&&i.push(o),g9(o)==o3.kImpactsBoxCrossReferencesYes&&s.push(o))}this.computed_style_invalidation_property_checker=new ym(e),this.layout_box_invalidation_property_checker=new ym(t),this.size_invalidation_property_checker=new ym(i),this.cross_references_invalidation_property_checker=new ym(s)}}const fv=new qV;class Rn extends N5{constructor(t,i){var e=(...args)=>{super(...args);u(this,"computed_style_declaration_");u(this,"style_");u(this,"layout_boxes_");u(this,"computed_style_valid_",!1);u(this,"descendant_computed_styles_valid_",!1);u(this,"directionality_");u(this,"ancestors_are_displayed_",0)};uo(t)?e(Is.kCreateHTMLElement,t):e(Is.kCreateHTMLElement,t,i),this.computed_style_declaration_=new qc,this.style_=new yV,this.layout_boxes_=null,this.directionality_=null}computed_style_declaration(){return this.computed_style_declaration_}computed_style(){return this.computed_style_declaration_.data()}get style(){return this.style_}OnSetAttribute(t,i){}OnRemoveAttribute(t){}AsHTMLElement(){return this}AsHTMLBodyElement(){return null}AsHTMLBRElement(){return null}AsHTMLImageElement(){}AsFreehandElement(){}GetUsedDirState(){return 1}Duplicate(){let t=this.GetDocument();jn(t);let i=t.createElement(this.local_name_);return i.copyAttributes(this),i.style_.AssignFrom(this.style_),i}set_layout_boxes(t){this.layout_boxes_=t}layout_boxes(){return this.layout_boxes_}InvalidateLayoutBoxesOfNodeAndAncestors(){this.InvalidateLayoutBoxes(),this.InvalidateLayoutBoxesOfAncestors()}InvalidateLayoutBoxesOfNodeAndDescendants(){this.InvalidateLayoutBoxes(),this.InvalidateLayoutBoxesOfDescendants()}InvalidateLayoutBoxes(){this.layout_boxes_=null,this.directionality_=null}InvalidateComputedStylesOfNodeAndDescendants(){this.computed_style_valid_=!1,this.descendant_computed_styles_valid_=!1,this.InvalidateComputedStylesOfDescendants()}UpdateComputedStyle(t,i,s){ab(Rn,this.UpdateComputedStyle),this.tagName;let n=this.GetDocument();J(n,"Element should be attached to document in order to ","participate in layout."),J(this.computed_style()||!this.layout_boxes());let o=!this.computed_style_valid_||!this.computed_style();!o&&!this.computed_style().AreDeclaredPropertiesInheritedFromParentValid()&&(o=!0),!o&&this.ancestors_are_displayed_==1&&s==0&&(o=!0);let a=new QV;o?JV(this.style_.data(),t,i,n.viewport_size(),this.computed_style(),this.ancestors_are_displayed_,s,jI.kIsNotPseudoElement,a,this.computed_style_declaration_):this.computed_style_declaration_.UpdateInheritedData(),this.ancestors_are_displayed_=s,a.mark_descendants_as_display_none&&this.MarkNotDisplayedOnDescendants(),a.invalidate_computed_styles_of_descendants&&this.InvalidateComputedStylesOfDescendants(),a.invalidate_layout_boxes?(this.InvalidateLayoutBoxesOfNodeAndAncestors(),this.InvalidateLayoutBoxesOfDescendants()):(a.invalidate_sizes&&this.InvalidateLayoutBoxSizes(),a.invalidate_cross_references&&this.InvalidateLayoutBoxCrossReferences(),a.invalidate_render_tree_nodes&&this.InvalidateLayoutBoxRenderTreeNodes()),this.computed_style_valid_=!0}IsDisplayed(){return this.ancestors_are_displayed_==0&&this.computed_style().display!=_e.GetNone()}UpdateComputedStyleRecursively(t,i,s,n){let o=this.GetDocument().dom_max_element_depth();if(o>0&&n>=o)return;let a=s&&this.AreComputedStylesValid();if(a||this.UpdateComputedStyle(t,i,0),this.computed_style().display!=_e.GetNone()){for(let l=this.first_element_child();l;l=l.nextElementSibling){let c=l.AsHTMLElement();c&&c.UpdateComputedStyleRecursively(this.computed_style_declaration(),i,a&&this.descendant_computed_styles_valid_,n+1)}this.descendant_computed_styles_valid_=!0}}MarkNotDisplayedOnNodeAndDescendants(){this.ancestors_are_displayed_=1,this.MarkNotDisplayedOnDescendants()}InvalidateLayoutBoxSizes(){this.layout_boxes_&&this.layout_boxes_.InvalidateSizes()}InvalidateLayoutBoxCrossReferences(){this.layout_boxes_&&this.layout_boxes_.InvalidateCrossReferences()}InvalidateLayoutBoxRenderTreeNodes(){this.layout_boxes_&&this.layout_boxes_.InvalidateRenderTreeNodes()}AreComputedStylesValid(){return this.computed_style_valid_}}class QV{constructor(){u(this,"mark_descendants_as_display_none",!1);u(this,"invalidate_computed_styles_of_descendants",!1);u(this,"invalidate_layout_boxes",!1);u(this,"invalidate_sizes",!1);u(this,"invalidate_cross_references",!1);u(this,"invalidate_render_tree_nodes",!1)}}var jI=(r=>(r[r.kIsNotPseudoElement=0]="kIsNotPseudoElement",r[r.kIsPseudoElement=1]="kIsPseudoElement",r))(jI||{});function JV(r,e,t,i,s,n,o,a,l,c,d=void 0){let f=!1,g=ZV(r,e,t,i);eW(s,d||g,f,a,l),c.SetData(d||g)}function ZV(r,e,t,i){let s=SV(r);return UI(s,e,t,i.width_height()),s}function eW(r,e,t,i,s){r&&(!s.mark_descendants_as_display_none&&i==0&&tW(r,e)&&(s.mark_descendants_as_display_none=!0),!s.invalidate_computed_styles_of_descendants&&rW(r,e)?(s.invalidate_computed_styles_of_descendants=!0,s.invalidate_layout_boxes=!0):s.invalidate_layout_boxes||(iW(r,e)?s.invalidate_layout_boxes=!0:(!s.invalidate_sizes&&nW(r,e)&&(s.invalidate_sizes=!0,s.invalidate_render_tree_nodes=!0),!s.invalidate_cross_references&&sW(r,e)&&(s.invalidate_cross_references=!0,s.invalidate_render_tree_nodes=!0),s.invalidate_render_tree_nodes=s.invalidate_render_tree_nodes||t||!e.DoDeclaredPropertiesMatch(r))))}function tW(r,e){return r.display!=_e.GetNone()&&e.display==_e.GetNone()}function rW(r,e){return!fv.computed_style_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}function iW(r,e){return!fv.layout_box_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}function nW(r,e){return!fv.size_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}function sW(r,e){return!fv.cross_references_invalidation_property_checker.DoDeclaredPropertiesMatch(r,e)}const mT=class extends Rn{constructor(e){super(e,mT.kTagName)}};let no=mT;u(no,"kTagName","p");function oW(r){return{[Symbol.iterator](){let e=r;return{next(){if(e){let t=e;return e=e.nextSibling,{value:Tn(t),done:!1}}else return{done:!0}}}}}}function aW(r){return{[Symbol.iterator](){let e=r;return{next(){if(e){let t=e;return e=e.parentNode,{value:t,done:!1}}else return{value:void 0,done:!0}}}}}}class di{static FirstChild(e){return e.firstChild}static LastChild(e){return e.lastChild}static NextSibling(e){return e.nextSibling}static PreviousSibling(e){return e.previousSibling}static Parent(e){var t;return(t=e.parentNode)==null?void 0:t.AsContainerNode()}static ChildrenOf(e){return oW(di.FirstChild(e))}static AncestorsOf(e){return aW(di.Parent(e))}static CommonAncestor(e,t){if(!(!e||!t))return e.CommonAncestor(t)}static ChildAt(e,t){let i=e.firstChild;for(;i&&t--;)i=i.nextSibling;return i}}class lW{constructor(e){u(this,"_onAfterMutation",new Dt);u(this,"_pendingUpdate",!1);this.canvas=e}get onAfterMutation(){return this._onAfterMutation.event}_queueUpdate(){this._pendingUpdate||(this._pendingUpdate=!0,queueMicrotask(()=>{this._pendingUpdate=!1,this._onAfterMutation.fire()}))}updateText(e,t){J(e.IsText());const i=e.parentElement;J(i&&i.tagName===no.kTagName);const s=o_(i),{id:n,scope:o}=Qs(s);this.canvas.transform(()=>{const l=this.canvas.getScopedModel(o).getNodeById(n);J(l),J(l.get("type")===oi.Text),l.set("content",t)}),this._queueUpdate()}removeContent(e){!e.length||this.canvas.transform(()=>{e.forEach(t=>{t.nodeName!==no.kTagName&&et();const i=o_(t),{id:s,scope:n}=Qs(i),a=this.canvas.getScopedModel(n).getNodeById(s);J(a),J(a.get("type")===oi.Text),a.set("content","")})})}removeNodes(e){!e.length||(this.canvas.transform(()=>{e.forEach(t=>{const i=t.AsElement().AsHTMLElement();J(i.tagName===no.kTagName);const s=o_(i),{id:n,scope:o}=Qs(s);this.canvas.getScopedModel(o).removeNodes([n])})}),this._queueUpdate())}insertBefore(e,t,i){const s=o_(e.AsElement()),n=Qs(s),o=i?o_(i.AsElement()):void 0,a=o?Qs(o):void 0;J(t.inlineContent);const l=this.canvas.getScopedModel(n.scope).getNodeById(n.id);J(l);const c=PS(l).get("width"),d={type:oi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:c==="auto"?"nowrap":"pre-wrap"},content:t.textContent||""};return this._queueUpdate(),this.canvas.transform(()=>{const f=a?{ref:a.id,direction:Ui.forward}:{ref:n.id,direction:Ui.inward},g=this.canvas.getScopedModel(n.scope).addNode(f,d);return{id:g.get("id"),type:g.get("type"),scope:n.scope.key,parent:n.id}})}}function VI(r,e,t){for(let i=0;;i++){if(i==r.childCount||i==e.childCount)return r.childCount==e.childCount?null:t;let s=r.child(i),n=e.child(i);if(s==n){t+=s.nodeSize;continue}if(!s.sameMarkup(n))return t;if(s.isText&&s.text!=n.text){for(let o=0;s.text[o]==n.text[o];o++)t++;return t}if(s.content.size||n.content.size){let o=VI(s.content,n.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function WI(r,e,t,i){for(let s=r.childCount,n=e.childCount;;){if(s==0||n==0)return s==n?null:{a:t,b:i};let o=r.child(--s),a=e.child(--n),l=o.nodeSize;if(o==a){t-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:t,b:i};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,i--;return{a:t,b:i}}if(o.content.size||a.content.size){let c=WI(o.content,a.content,t-1,i-1);if(c)return c}t-=l,i-=l}}const Yi=class{constructor(e,t){u(this,"size");if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,s=0,n){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&i(l,s+a,n||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,t-d),i,s+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,s){let n="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(n+=a.text.slice(Math.max(e,l)-l,t-l),o=!i):a.isLeaf?(s?n+=typeof s=="function"?s(a):s:a.type.spec.leafText&&(n+=a.type.spec.leafText(a)),o=!i):!o&&a.isBlock&&(n+=i,o=!0)},0),n}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,s=this.content.slice(),n=0;for(t.isText&&t.sameMarkup(i)&&(s[s.length-1]=t.withText(t.text+i.text),n=1);n<e.content.length;n++)s.push(e.content[n]);return new Yi(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],s=0;if(t>e)for(let n=0,o=0;o<t;n++){let a=this.content[n],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),i.push(a),s+=a.nodeSize),o=l}return new Yi(i,s)}cutByIndex(e,t){return e==t?Yi.empty:e==0&&t==this.content.length?this:new Yi(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let s=this.content.slice(),n=this.size+t.nodeSize-i.nodeSize;return s[e]=t,new Yi(s,n)}addToStart(e){return new Yi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Yi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let s=this.content[t];e(s,i,t),i+=s.nodeSize}}findDiffStart(e,t=0){return VI(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return WI(this,e,t,i)}findIndex(e,t=-1){if(e==0)return vm(0,e);if(e==this.size)return vm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,s=0;;i++){let n=this.child(i),o=s+n.nodeSize;if(o>=e)return o==e||t>0?vm(i+1,o):vm(i,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Yi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Yi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Yi.empty;let t,i=0;for(let s=0;s<e.length;s++){let n=e[s];i+=n.nodeSize,s&&n.isText&&e[s-1].sameMarkup(n)?(t||(t=e.slice(0,s)),t[t.length-1]=n.withText(t[t.length-1].text+n.text)):t&&t.push(n)}return new Yi(t||e,i)}static from(e){if(!e)return Yi.empty;if(e instanceof Yi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Yi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};let Bt=Yi;u(Bt,"empty",new Yi([],0));const KE={index:0,offset:0};function vm(r,e){return KE.index=r,KE.offset=e,KE}function my(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!my(r[i],e[i]))return!1}else{for(let i in r)if(!(i in e)||!my(r[i],e[i]))return!1;for(let i in e)if(!(i in r))return!1}return!0}const Wy=class{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let s=0;s<e.length;s++){let n=e[s];if(this.eq(n))return e;if(this.type.excludes(n.type))t||(t=e.slice(0,s));else{if(n.type.excludes(this.type))return e;!i&&n.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),i=!0),t&&t.push(n)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&my(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);return i.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Wy.none;if(e instanceof Wy)return[e];let t=e.slice();return t.sort((i,s)=>i.type.rank-s.type.rank),t}};let fi=Wy;u(fi,"none",[]);class xy extends Error{}const tu=class{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=KI(this.content,e+this.openStart,t);return i&&new tu(i,this.openStart,this.openEnd)}removeBetween(e,t){return new tu($I(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return tu.empty;let i=t.openStart||0,s=t.openEnd||0;if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new tu(Bt.fromJSON(e,t.content),i,s)}static maxOpen(e,t=!0){let i=0,s=0;for(let n=e.firstChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.firstChild)i++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)s++;return new tu(e,i,s)}};let Lt=tu;u(Lt,"empty",new tu(Bt.empty,0,0));function $I(r,e,t){let{index:i,offset:s}=r.findIndex(e),n=r.maybeChild(i),{index:o,offset:a}=r.findIndex(t);if(s==e||n.isText){if(a!=t&&!r.child(o).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(i!=o)throw new RangeError("Removing non-flat range");return r.replaceChild(i,n.copy($I(n.content,e-s-1,t-s-1)))}function KI(r,e,t,i){let{index:s,offset:n}=r.findIndex(e),o=r.maybeChild(s);if(n==e||o.isText)return i&&!i.canReplace(s,s,t)?null:r.cut(0,e).append(t).append(r.cut(e));let a=KI(o.content,e-n-1,t);return a&&r.replaceChild(s,o.copy(a))}function uW(r,e,t){if(t.openStart>r.depth)throw new xy("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new xy("Inconsistent open depths");return XI(r,e,t,0)}function XI(r,e,t,i){let s=r.index(i),n=r.node(i);if(s==e.index(i)&&i<r.depth-t.openStart){let o=XI(r,e,t,i+1);return n.copy(n.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==i&&e.depth==i){let o=r.parent,a=o.content;return Rc(o,a.cut(0,r.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=cW(t,r);return Rc(n,qI(r,o,a,e,i))}else return Rc(n,yy(r,e,i))}function YI(r,e){if(!e.type.compatibleContent(r.type))throw new xy("Cannot join "+e.type.name+" onto "+r.type.name)}function bw(r,e,t){let i=r.node(t);return YI(i,e.node(t)),i}function Pc(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function Vp(r,e,t,i){let s=(e||r).node(t),n=0,o=e?e.index(t):s.childCount;r&&(n=r.index(t),r.depth>t?n++:r.textOffset&&(Pc(r.nodeAfter,i),n++));for(let a=n;a<o;a++)Pc(s.child(a),i);e&&e.depth==t&&e.textOffset&&Pc(e.nodeBefore,i)}function Rc(r,e){return r.type.checkContent(e),r.copy(e)}function qI(r,e,t,i,s){let n=r.depth>s&&bw(r,e,s+1),o=i.depth>s&&bw(t,i,s+1),a=[];return Vp(null,r,s,a),n&&o&&e.index(s)==t.index(s)?(YI(n,o),Pc(Rc(n,qI(r,e,t,i,s+1)),a)):(n&&Pc(Rc(n,yy(r,e,s+1)),a),Vp(e,t,s,a),o&&Pc(Rc(o,yy(t,i,s+1)),a)),Vp(i,null,s,a),new Bt(a)}function yy(r,e,t){let i=[];if(Vp(null,r,t,i),r.depth>t){let s=bw(r,e,t+1);Pc(Rc(s,yy(r,e,t+1)),i)}return Vp(e,null,t,i),new Bt(i)}function cW(r,e){let t=e.depth-r.openStart,s=e.node(t).copy(r.content);for(let n=t-1;n>=0;n--)s=e.node(n).copy(Bt.from(s));return{start:s.resolveNoCache(r.openStart+t),end:s.resolveNoCache(s.content.size-r.openEnd-t)}}class R0{constructor(e,t,i){u(this,"depth");this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],s=e.child(t);return i?e.child(t).cut(i):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let n=0;n<e;n++)s+=i.child(n).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return fi.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),s=e.maybeChild(t);if(!i){let a=i;i=s,s=a}let n=i.marks;for(var o=0;o<n.length;o++)n[o].type.spec.inclusive===!1&&(!s||!n[o].isInSet(s.marks))&&(n=n[o--].removeFromSet(n));return n}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,s=e.parent.maybeChild(e.index());for(var n=0;n<i.length;n++)i[n].type.spec.inclusive===!1&&(!s||!i[n].isInSet(s.marks))&&(i=i[n--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new dW(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],s=0,n=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(n),c=n-l;if(i.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;n=c-1,s+=l+1}return new R0(t,i,n)}static resolveCached(e,t){for(let s=0;s<XE.length;s++){let n=XE[s];if(n.pos==t&&n.doc==e)return n}let i=XE[YE]=R0.resolve(e,t);return YE=(YE+1)%hW,i}}let XE=[],YE=0,hW=12;class dW{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const fW=Object.create(null);class va{constructor(e,t,i,s=fi.none){u(this,"content");u(this,"text");this.type=e,this.attrs=t,this.marks=s,this.content=i||Bt.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,s=0){this.content.nodesBetween(e,t,i,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,s){return this.content.textBetween(e,t,i,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&my(this.attrs,t||e.defaultAttrs||fW)&&fi.sameSet(this.marks,i||fi.none)}copy(e=null){return e==this.content?this:new va(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new va(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return Lt.empty;let s=this.resolve(e),n=this.resolve(t),o=i?0:s.sharedDepth(t),a=s.start(o),c=s.node(o).content.cut(s.pos-a,n.pos-a);return new Lt(c,s.depth-o,n.depth-o)}replace(e,t,i){return uW(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let s=this.content.child(t-1);return{node:s,index:t-1,offset:i-s.nodeSize}}resolve(e){return R0.resolveCached(this,e)}resolveNoCache(e){return R0.resolve(this,e)}rangeHasMark(e,t,i){let s=!1;return t>e&&this.nodesBetween(e,t,n=>(i.isInSet(n.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),QI(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=Bt.empty,s=0,n=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,s,n),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<n;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,t,i,s){if(s&&!this.type.allowsMarks(s))return!1;let n=this.contentMatchAt(e).matchType(i),o=n&&n.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=fi.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!fi.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.type==="inline-text"){if(!uo(t.content))throw new RangeError("Invalid text node in JSON");return e.text(t.content,i)}if(t.type===oi.Text){const n=t.content?Bt.fromJSON(e,[{type:"inline-text",content:t.content}]):null;return e.nodeType("paragraph").create({style:{...t.style}},n,i)}t.type!==oi.Block&&ze();let s=Bt.fromJSON(e,t.children);return e.nodeType("doc").create(t.attrs,s,i)}}class vy extends va{constructor(t,i,s,n){super(t,i,null,n);u(this,"text");if(!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):QI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,i){return this.text.slice(t,i)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new vy(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new vy(this.type,this.attrs,t,this.marks)}cut(t=0,i=this.text.length){return t==0&&i==this.text.length?this:this.withText(this.text.slice(t,i))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function QI(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}function qi(r){this.content=r}qi.prototype={constructor:qi,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var i=t&&t!=r?this.remove(t):this,s=i.find(r),n=i.content.slice();return s==-1?n.push(t||r,e):(n[s+1]=e,t&&(n[s]=t)),new qi(n)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new qi(t)},addToStart:function(r,e){return new qi([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new qi(t)},addBefore:function(r,e,t){var i=this.remove(e),s=i.content.slice(),n=i.find(r);return s.splice(n==-1?s.length:n,0,e,t),new qi(s)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=qi.from(r),r.size?new qi(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=qi.from(r),r.size?new qi(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=qi.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};qi.from=function(r){if(r instanceof qi)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new qi(e)};const $y=class{constructor(e){u(this,"next",[]);u(this,"wrapCache",[]);this.validEnd=e}static parse(e,t){let i=new _W(e,t);if(i.next==null)return $y.empty;let s=JI(i);i.next&&i.err("Unexpected trailing text");let n=EW(vW(s));return SW(n,i),n}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let s=this;for(let n=t;s&&n<i;n++)s=s.matchType(e.child(n).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let s=[this];function n(o,a){let l=o.matchFragment(e,i);if(l&&(!t||l.validEnd))return Bt.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:f}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let g=n(f,a.concat(d));if(g)return g}}return null}return n(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let s=i.shift(),n=s.match;if(n.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<n.next.length;o++){let{type:a,next:l}=n.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let s=0;s<i.next.length;s++)e.indexOf(i.next[s].next)==-1&&t(i.next[s].next)}return t(this),e.map((i,s)=>{let n=s+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)n+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return n}).join(`
`)}};let vd=$y;u(vd,"empty",new $y(!0));class _W{constructor(e,t){u(this,"inline",null);u(this,"pos",0);u(this,"tokens");this.string=e,this.nodeTypes=t,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function JI(r){let e=[];do e.push(pW(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function pW(r){let e=[];do e.push(gW(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function gW(r){let e=yW(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=mW(r,e);else break;return e}function AD(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function mW(r,e){let t=AD(r),i=t;return r.eat(",")&&(r.next!="}"?i=AD(r):i=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function xW(r,e){let t=r.nodeTypes,i=t[e];if(i)return[i];let s=[];for(let n in t){let o=t[n];o.groups.indexOf(e)>-1&&s.push(o)}return s.length==0&&r.err("No node type or group '"+e+"' found"),s}function yW(r){if(r.eat("(")){let e=JI(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=xW(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vW(r){let e=[[]];return s(n(r,0),t()),e;function t(){return e.push([])-1}function i(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function n(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(n(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=n(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=t())}else if(o.type=="star"){let l=t();return i(a,l),s(n(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=t();return s(n(o.expr,a),l),s(n(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(n(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=t();s(n(o.expr,l),d),l=d}if(o.max==-1)s(n(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=t();i(l,d),s(n(o.expr,l),d),l=d}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ZI(r,e){return e-r}function bD(r,e){let t=[];return i(e),t.sort(ZI);function i(s){let n=r[s];if(n.length==1&&!n[0].term)return i(n[0].to);t.push(s);for(let o=0;o<n.length;o++){let{term:a,to:l}=n[o];!a&&t.indexOf(l)==-1&&i(l)}}}function EW(r){let e=Object.create(null);return t(bD(r,0));function t(i){let s=[];i.forEach(o=>{r[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<s.length;d++)s[d][0]==a&&(c=s[d][1]);bD(r,l).forEach(d=>{c||s.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let n=e[i.join(",")]=new vd(i.indexOf(r.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(ZI);n.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return n}}function SW(r,e){for(let t=0,i=[r];t<i.length;t++){let s=i[t],n=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),n&&!(l.isText||l.hasRequiredAttrs())&&(n=!1),i.indexOf(c)==-1&&i.push(c)}n&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function e2(r){let e=Object.create(null);for(let t in r){let i=r[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function t2(r,e){let t=Object.create(null);for(let i in r){let s=e&&e[i];if(s===void 0){let n=r[i];if(n.hasDefault)s=n.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=s}return t}function r2(r){let e=Object.create(null);if(r)for(let t in r)e[t]=new wW(r[t]);return e}class Ey{constructor(e,t,i){u(this,"groups");u(this,"attrs");u(this,"defaultAttrs");u(this,"inlineContent");u(this,"isBlock");u(this,"isText");u(this,"contentMatch");u(this,"markSet",null);this.name=e,this.schema=t,this.spec=i,this.groups=i.group?i.group.split(" "):[],this.attrs=r2(i.attrs),this.defaultAttrs=e2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==vd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:t2(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new va(this,this.computeAttrs(e),Bt.from(t),fi.setFrom(i))}createChecked(e=null,t,i){return t=Bt.from(t),this.checkContent(t),new va(this,this.computeAttrs(e),t,fi.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=Bt.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),n=s&&s.fillBefore(Bt.empty,!0);return n?new va(this,e,t.append(n),fi.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:fi.none:e}static compile(e,t){let i=Object.create(null);e.forEach((n,o)=>i[n]=new Ey(n,t,o));let s=t.spec.topNode||"doc";if(!i[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let n in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class wW{constructor(e){u(this,"hasDefault");u(this,"default");this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class _v{constructor(e,t,i,s){u(this,"attrs");u(this,"excluded");u(this,"instance");this.name=e,this.rank=t,this.schema=i,this.spec=s,this.attrs=r2(s.attrs),this.excluded=null;let n=e2(this.attrs);this.instance=n?new fi(this,n):null}create(e=null){return!e&&this.instance?this.instance:new fi(this,t2(this.attrs,e))}static compile(e,t){let i=Object.create(null),s=0;return e.forEach((n,o)=>i[n]=new _v(n,s++,t,o)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class AW{constructor(e){u(this,"spec");u(this,"nodes");u(this,"marks");u(this,"topNodeType");u(this,"cached",Object.create(null));let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=qi.from(e.nodes),t.marks=qi.from(e.marks||{}),this.nodes=Ey.compile(this.spec.nodes,this),this.marks=_v.compile(this.spec.marks,this);let i=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let n=this.nodes[s],o=n.spec.content||"",a=n.spec.marks;n.contentMatch=i[o]||(i[o]=vd.parse(o,this.nodes)),n.inlineContent=n.contentMatch.inlineContent,n.markSet=a=="_"?null:a?kD(this,a.split(" ")):a==""||!n.inlineContent?[]:null}for(let s in this.marks){let n=this.marks[s],o=n.spec.excludes;n.excluded=o==null?[n]:o==""?[]:kD(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Ey){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,s)}text(e,t){let i=this.nodes.text;return new vy(i,i.defaultAttrs,e,fi.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return va.fromJSON(this,e)}markFromJSON(e){return fi.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function kD(r,e){let t=[];for(let i=0;i<e.length;i++){let s=e[i],n=r.marks[s],o=n;if(n)t.push(n);else for(let a in r.marks){let l=r.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}const i2=65535,n2=Math.pow(2,16);function bW(r,e){return r+e*n2}function TD(r){return r&i2}function kW(r){return(r-(r&i2))/n2}const s2=1,o2=2,hx=4,a2=8;class kw{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&a2)>0}get deletedBefore(){return(this.delInfo&(s2|hx))>0}get deletedAfter(){return(this.delInfo&(o2|hx))>0}get deletedAcross(){return(this.delInfo&hx)>0}}const ru=class{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ru.empty)return ru.empty}recover(e){let t=0,i=TD(e);if(!this.inverted)for(let s=0;s<i;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[i*3]+t+kW(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let s=0,n=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+n],d=this.ranges[a+o],f=l+c;if(e<=f){let g=c?e==l?-1:e==f?1:t:t,x=l+s+(g<0?0:d);if(i)return x;let E=e==(t<0?l:f)?null:bW(a/3,e-l),P=e==l?o2:e==f?s2:hx;return(t<0?e!=l:e!=f)&&(P|=a2),new kw(x,P,E)}s+=d-c}return i?e+s:new kw(e+s,0,null)}touches(e,t){let i=0,s=TD(t),n=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+n],d=l+c;if(e<=d&&a==s*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let s=0,n=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?n:0),l=o+(this.inverted?0:n),c=this.ranges[s+t],d=this.ranges[s+i];e(a,a+c,l,l+d),n+=d-c}}invert(){return new ru(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ru.empty:new ru(e<0?[0,-e,0]:[0,0,e])}};let Dc=ru;u(Dc,"empty",new ru([]));class Wp{constructor(e=[],t,i=0,s=e.length){this.maps=e,this.mirror=t,this.from=i,this.to=s}slice(e=0,t=this.maps.length){return new Wp(this.maps,this.mirror,e,t)}copy(){return new Wp(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,i=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?i+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?i-s-1:void 0)}}invert(){let e=new Wp;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let s=0;for(let n=this.from;n<this.to;n++){let o=this.maps[n],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(n);if(l!=null&&l>n&&l<this.to){n=l,e=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return i?e:new kw(e,s,null)}}const qE=Object.create(null);class fs{getMap(){return Dc.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=qE[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in qE)throw new RangeError("Duplicate use of step JSON ID "+e);return qE[e]=t,t.prototype.jsonID=e,t}}class bi{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new bi(e,null)}static fail(e){return new bi(null,e)}static fromReplace(e,t,i,s){try{return bi.ok(e.replace(t,i,s))}catch(n){if(n instanceof xy)return bi.fail(n.message);throw n}}}function qb(r,e,t){let i=[];for(let s=0;s<r.childCount;s++){let n=r.child(s);n.content.size&&(n=n.copy(qb(n.content,e,n))),n.isInline&&(n=e(n,t,s)),i.push(n)}return Bt.fromArray(i)}class cu extends fs{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),s=i.node(i.sharedDepth(this.to)),n=new Lt(qb(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return bi.fromReplace(e,this.from,this.to,n)}invert(){return new da(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new cu(t.pos,i.pos,this.mark)}merge(e){return e instanceof cu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cu(t.from,t.to,e.markFromJSON(t.mark))}}fs.jsonID("addMark",cu);class da extends fs{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new Lt(qb(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return bi.fromReplace(e,this.from,this.to,i)}invert(){return new cu(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new da(t.pos,i.pos,this.mark)}merge(e){return e instanceof da&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new da(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new da(t.from,t.to,e.markFromJSON(t.mark))}}fs.jsonID("removeMark",da);class hu extends fs{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return bi.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return bi.fromReplace(e,this.pos,this.pos+1,new Lt(Bt.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(i))return new hu(this.pos,t.marks[s]);return new hu(this.pos,this.mark)}}return new nf(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hu(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new hu(t.pos,e.markFromJSON(t.mark))}}fs.jsonID("addNodeMark",hu);class nf extends fs{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return bi.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return bi.fromReplace(e,this.pos,this.pos+1,new Lt(Bt.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new hu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new nf(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nf(t.pos,e.markFromJSON(t.mark))}}fs.jsonID("removeNodeMark",nf);class Hn extends fs{constructor(e,t,i,s=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=s}apply(e){return this.structure&&Tw(e,this.from,this.to)?bi.fail("Structure replace would overwrite content"):bi.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Dc([this.from,this.to-this.from,this.slice.size])}invert(e){return new Hn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new Hn(t.pos,Math.max(t.pos,i.pos),this.slice)}merge(e){if(!(e instanceof Hn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Lt.empty:new Lt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Hn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Lt.empty:new Lt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Hn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Hn(t.from,t.to,Lt.fromJSON(e,t.slice),!!t.structure)}}fs.jsonID("replace",Hn);class Fs extends fs{constructor(e,t,i,s,n,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=s,this.slice=n,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Tw(e,this.from,this.gapFrom)||Tw(e,this.gapTo,this.to)))return bi.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return bi.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?bi.fromReplace(e,this.from,this.to,i):bi.fail("Content does not fit in gap")}getMap(){return new Dc([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Fs(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),s=e.map(this.gapFrom,-1),n=e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||s<t.pos||n>i.pos?null:new Fs(t.pos,i.pos,s,n,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Fs(t.from,t.to,t.gapFrom,t.gapTo,Lt.fromJSON(e,t.slice),t.insert,!!t.structure)}}fs.jsonID("replaceAround",Fs);function Tw(r,e,t){let i=r.resolve(e),s=t-e,n=i.depth;for(;s>0&&n>0&&i.indexAfter(n)==i.node(n).childCount;)n--,s--;if(s>0){let o=i.node(n).maybeChild(i.indexAfter(n));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function TW(r,e,t,i){let s=[],n=[],o,a;r.doc.nodesBetween(e,t,(l,c,d)=>{if(!l.isInline)return;let f=l.marks;if(!i.isInSet(f)&&d.type.allowsMarkType(i.type)){let g=Math.max(c,e),x=Math.min(c+l.nodeSize,t),E=i.addToSet(f);for(let P=0;P<f.length;P++)f[P].isInSet(E)||(o&&o.to==g&&o.mark.eq(f[P])?o.to=x:s.push(o=new da(g,x,f[P])));a&&a.to==g?a.to=x:n.push(a=new cu(g,x,i))}}),s.forEach(l=>r.step(l)),n.forEach(l=>r.step(l))}function PW(r,e,t,i){let s=[],n=0;r.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;n++;let l=null;if(i instanceof _v){let c=o.marks,d;for(;d=i.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let d=0;d<l.length;d++){let f=l[d],g;for(let x=0;x<s.length;x++){let E=s[x];E.step==n-1&&f.eq(s[x].style)&&(g=E)}g?(g.to=c,g.step=n):s.push({style:f,from:Math.max(a,e),to:c,step:n})}}}),s.forEach(o=>r.step(new da(o.from,o.to,o.style)))}function RW(r,e,t,i=t.contentMatch){let s=r.doc.nodeAt(e),n=[],o=e+1;for(let a=0;a<s.childCount;a++){let l=s.child(a),c=o+l.nodeSize,d=i.matchType(l.type);if(!d)n.push(new Hn(o,c,Lt.empty));else{i=d;for(let f=0;f<l.marks.length;f++)t.allowsMarkType(l.marks[f].type)||r.step(new da(o,c,l.marks[f]))}o=c}if(!i.validEnd){let a=i.fillBefore(Bt.empty,!0);r.replace(o,o,new Lt(a,0,0))}for(let a=n.length-1;a>=0;a--)r.step(n[a])}function DW(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function Qb(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let i=r.depth;;--i){let s=r.$from.node(i),n=r.$from.index(i),o=r.$to.indexAfter(i);if(i<r.depth&&s.canReplace(n,o,t))return i;if(i==0||s.type.spec.isolating||!DW(s,n,o))break}return null}function CW(r,e,t){let{$from:i,$to:s,depth:n}=e,o=i.before(n+1),a=s.after(n+1),l=o,c=a,d=Bt.empty,f=0;for(let E=n,P=!1;E>t;E--)P||i.index(E)>0?(P=!0,d=Bt.from(i.node(E).copy(d)),f++):l--;let g=Bt.empty,x=0;for(let E=n,P=!1;E>t;E--)P||s.after(E+1)<s.end(E)?(P=!0,g=Bt.from(s.node(E).copy(g)),x++):c++;r.step(new Fs(l,c,o,a,new Lt(d.append(g),f,x),d.size-f,!0))}function OW(r,e,t){let i=Bt.empty;for(let o=t.length-1;o>=0;o--){if(i.size){let a=t[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=Bt.from(t[o].type.create(t[o].attrs,i))}let s=e.start,n=e.end;r.step(new Fs(s,n,s,n,new Lt(i,0,0),t.length,!0))}function NW(r,e,t,i,s){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let n=r.steps.length;r.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(i,s)&&IW(r.doc,r.mapping.slice(n).map(a),i)){r.clearIncompatible(r.mapping.slice(n).map(a,1),i);let l=r.mapping.slice(n),c=l.map(a,1),d=l.map(a+o.nodeSize,1);return r.step(new Fs(c,d,c+1,d-1,new Lt(Bt.from(i.create(s,null,o.marks)),0,0),1,!0)),!1}})}function IW(r,e,t){let i=r.resolve(e),s=i.index();return i.parent.canReplaceWith(s,s+1,t)}function FW(r,e,t,i,s){let n=r.doc.nodeAt(e);if(!n)throw new RangeError("No node at given position");t||(t=n.type);let o=t.create(i,null,s||n.marks);if(n.isLeaf)return r.replaceWith(e,e+n.nodeSize,o);if(!t.validContent(n.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new Fs(e,e+n.nodeSize,e+1,e+n.nodeSize-1,new Lt(Bt.from(o),0,0),1,!0))}function dx(r,e,t=1,i){let s=r.resolve(e),n=s.depth-t,o=i&&i[i.length-1]||s.parent;if(n<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,d=t-2;c>n;c--,d--){let f=s.node(c),g=s.index(c);if(f.type.spec.isolating)return!1;let x=f.content.cutByIndex(g,f.childCount),E=i&&i[d]||f;if(E!=f&&(x=x.replaceChild(0,E.type.create(E.attrs))),!f.canReplace(g+1,f.childCount)||!E.type.validContent(x))return!1}let a=s.indexAfter(n),l=i&&i[0];return s.node(n).canReplaceWith(a,a,l?l.type:s.node(n+1).type)}function MW(r,e,t=1,i){let s=r.doc.resolve(e),n=Bt.empty,o=Bt.empty;for(let a=s.depth,l=s.depth-t,c=t-1;a>l;a--,c--){n=Bt.from(s.node(a).copy(n));let d=i&&i[c];o=Bt.from(d?d.type.create(d.attrs,o):s.node(a).copy(o))}r.step(new Hn(e,e,new Lt(n.append(o),t,t),!0))}function l2(r,e){let t=r.resolve(e),i=t.index();return BW(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function BW(r,e){return!!(r&&e&&!r.isLeaf&&r.canAppend(e))}function LW(r,e,t){let i=new Hn(e-t,e+t,Lt.empty,!0);r.step(i)}function UW(r,e,t){let i=r.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let s=i.depth-1;s>=0;s--){let n=i.index(s);if(i.node(s).canReplaceWith(n,n,t))return i.before(s+1);if(n>0)return null}if(i.parentOffset==i.parent.content.size)for(let s=i.depth-1;s>=0;s--){let n=i.indexAfter(s);if(i.node(s).canReplaceWith(n,n,t))return i.after(s+1);if(n<i.node(s).childCount)return null}return null}function Jb(r,e,t=e,i=Lt.empty){if(e==t&&!i.size)return null;let s=r.resolve(e),n=r.resolve(t);return u2(s,n,i)?new Hn(e,t,i):new GW(s,n,i).fit()}function u2(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class GW{constructor(e,t,i){u(this,"frontier",[]);u(this,"placed",Bt.empty);this.$from=e,this.$to=t,this.unplaced=i;for(let s=0;s<=e.depth;s++){let n=e.node(s);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Bt.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,s=this.close(e<0?this.$to:i.doc.resolve(e));if(!s)return null;let n=this.placed,o=i.depth,a=s.depth;for(;o&&a&&n.childCount==1;)n=n.firstChild.content,o--,a--;let l=new Lt(n,o,a);return e>-1?new Fs(i.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||i.pos!=this.$to.pos?new Hn(i.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,s=this.unplaced.openEnd;i<e;i++){let n=t.firstChild;if(t.childCount>1&&(s=0),n.type.spec.isolating&&s<=i){e=i;break}t=n.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let s,n=null;i?(n=QE(this.unplaced.content,i-1).firstChild,s=n.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,f=null;if(t==1&&(o?c.matchType(o.type)||(f=c.fillBefore(Bt.from(o),!1)):n&&l.compatibleContent(n.type)))return{sliceDepth:i,frontierDepth:a,parent:n,inject:f};if(t==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:n,wrap:d};if(n&&c.matchType(n.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=QE(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Lt(e,t+1,Math.max(i,s.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=QE(e,t);if(s.childCount<=1&&t>0){let n=e.size-t<=t+s.size;this.unplaced=new Lt(mp(e,t-1,1),t-1,n?t-1:i)}else this.unplaced=new Lt(mp(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:s,wrap:n}){for(;this.depth>t;)this.closeFrontierNode();if(n)for(let P=0;P<n.length;P++)this.openFrontierNode(n[P]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,c=0,d=[],{match:f,type:g}=this.frontier[t];if(s){for(let P=0;P<s.childCount;P++)d.push(s.child(P));f=f.matchFragment(s)}let x=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let P=a.child(c),b=f.matchType(P.type);if(!b)break;c++,(c>1||l==0||P.content.size)&&(f=b,d.push(c2(P.mark(g.allowedMarks(P.marks)),c==1?l:0,c==a.childCount?x:-1)))}let E=c==a.childCount;E||(x=-1),this.placed=xp(this.placed,t,Bt.from(d)),this.frontier[t].match=f,E&&x<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let P=0,b=a;P<x;P++){let D=b.lastChild;this.frontier.push({type:D.type,match:D.contentMatchAt(D.childCount)}),b=D.content}this.unplaced=E?e==0?Lt.empty:new Lt(mp(o.content,e-1,1),e-1,x<0?o.openEnd:e-1):new Lt(mp(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!JE(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,s=this.$to.after(i);for(;i>1&&s==this.$to.end(--i);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:s}=this.frontier[t],n=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=JE(e,t,s,i,n);if(!!o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=JE(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:t,fit:o,move:n?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=xp(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let s=e.node(i),n=s.type.contentMatch.fillBefore(s.content,!0,e.index(i));this.openFrontierNode(s.type,s.attrs,n)}return e}openFrontierNode(e,t=null,i){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=xp(this.placed,this.depth,Bt.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Bt.empty,!0);t.childCount&&(this.placed=xp(this.placed,this.frontier.length,t))}}function mp(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(mp(r.firstChild.content,e-1,t)))}function xp(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(xp(r.lastChild.content,e-1,t)))}function QE(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function c2(r,e,t){if(e<=0)return r;let i=r.content;return e>1&&(i=i.replaceChild(0,c2(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=r.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(r.type.contentMatch.matchFragment(i).fillBefore(Bt.empty,!0)))),r.copy(i)}function JE(r,e,t,i,s){let n=r.node(e),o=s?r.indexAfter(e):r.index(e);if(o==n.childCount&&!t.compatibleContent(n.type))return null;let a=i.fillBefore(n.content,!0,o);return a&&!zW(t,n.content,o)?a:null}function zW(r,e,t){for(let i=t;i<e.childCount;i++)if(!r.allowsMarks(e.child(i).marks))return!0;return!1}function HW(r){return r.spec.defining||r.spec.definingForContent}function jW(r,e,t,i){if(!i.size)return r.deleteRange(e,t);let s=r.doc.resolve(e),n=r.doc.resolve(t);if(u2(s,n,i))return r.step(new Hn(e,t,i));let o=d2(s,r.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let g=s.depth,x=s.pos-1;g>0;g--,x--){let E=s.node(g).type.spec;if(E.defining||E.definingAsContext||E.isolating)break;o.indexOf(g)>-1?a=g:s.before(g)==x&&o.splice(1,0,-g)}let l=o.indexOf(a),c=[],d=i.openStart;for(let g=i.content,x=0;;x++){let E=g.firstChild;if(c.push(E),x==i.openStart)break;g=E.content}for(let g=d-1;g>=0;g--){let x=c[g].type,E=HW(x);if(E&&s.node(l).type!=x)d=g;else if(E||!x.isTextblock)break}for(let g=i.openStart;g>=0;g--){let x=(g+d+1)%(i.openStart+1),E=c[x];if(!!E)for(let P=0;P<o.length;P++){let b=o[(P+l)%o.length],D=!0;b<0&&(D=!1,b=-b);let C=s.node(b-1),O=s.index(b-1);if(C.canReplaceWith(O,O,E.type,E.marks))return r.replace(s.before(b),D?n.after(b):t,new Lt(h2(i.content,0,i.openStart,x),x,i.openEnd))}}let f=r.steps.length;for(let g=o.length-1;g>=0&&(r.replace(e,t,i),!(r.steps.length>f));g--){let x=o[g];x<0||(e=s.before(x),t=n.after(x))}}function h2(r,e,t,i,s){if(e<t){let n=r.firstChild;r=r.replaceChild(0,n.copy(h2(n.content,e+1,t,i,n)))}if(e>i){let n=s.contentMatchAt(0),o=n.fillBefore(r).append(r);r=o.append(n.matchFragment(o).fillBefore(Bt.empty,!0))}return r}function VW(r,e,t,i){if(!i.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let s=UW(r.doc,e,i.type);s!=null&&(e=t=s)}r.replaceRange(e,t,new Lt(Bt.from(i),0,0))}function WW(r,e,t){let i=r.doc.resolve(e),s=r.doc.resolve(t),n=d2(i,s);for(let o=0;o<n.length;o++){let a=n[o],l=o==n.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return r.delete(i.start(a),s.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),s.indexAfter(a-1))))return r.delete(i.before(a),s.after(a))}for(let o=1;o<=i.depth&&o<=s.depth;o++)if(e-i.start(o)==i.depth-o&&t>i.end(o)&&s.end(o)-t!=s.depth-o)return r.delete(i.before(o),t);r.delete(e,t)}function d2(r,e){let t=[],i=Math.min(r.depth,e.depth);for(let s=i;s>=0;s--){let n=r.start(s);if(n<r.pos-(r.depth-s)||e.end(s)>e.pos+(e.depth-s)||r.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(n==e.start(s)||s==r.depth&&s==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==n-1)&&t.push(s)}return t}class Ed extends fs{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return bi.fail("No node at attribute step's position");let i=Object.create(null);for(let n in t.attrs)i[n]=t.attrs[n];i[this.attr]=this.value;let s=t.type.create(i,null,t.marks);return bi.fromReplace(e,this.pos,this.pos+1,new Lt(Bt.from(s),0,t.isLeaf?0:1))}getMap(){return Dc.empty}invert(e){return new Ed(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ed(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ed(t.pos,t.attr,t.value)}}fs.jsonID("attr",Ed);let sf=class extends Error{};sf=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};sf.prototype=Object.create(Error.prototype);sf.prototype.constructor=sf;sf.prototype.name="TransformError";class $W{constructor(e){u(this,"steps",[]);u(this,"docs",[]);u(this,"mapping",new Wp);this.doc=e}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new sf(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=Lt.empty){let s=Jb(this.doc,e,t,i);return s&&this.step(s),this}replaceWith(e,t,i){return this.replace(e,t,new Lt(Bt.from(i),0,0))}delete(e,t){return this.replace(e,t,Lt.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return jW(this,e,t,i),this}replaceRangeWith(e,t,i){return VW(this,e,t,i),this}deleteRange(e,t){return WW(this,e,t),this}lift(e,t){return CW(this,e,t),this}join(e,t=1){return LW(this,e,t),this}wrap(e,t){return OW(this,e,t),this}setBlockType(e,t=e,i,s=null){return NW(this,e,t,i,s),this}setNodeMarkup(e,t,i=null,s){return FW(this,e,t,i,s),this}setNodeAttribute(e,t,i){return this.step(new Ed(e,t,i)),this}addNodeMark(e,t){return this.step(new hu(e,t)),this}removeNodeMark(e,t){if(!(t instanceof fi)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t=t.isInSet(i.marks),!t)return this}return this.step(new nf(e,t)),this}split(e,t=1,i){return MW(this,e,t,i),this}addMark(e,t,i){return TW(this,e,t,i),this}removeMark(e,t,i){return PW(this,e,t,i),this}clearIncompatible(e,t,i){return RW(this,e,t,i),this}}const ZE=Object.create(null);class $r{constructor(e,t,i){u(this,"ranges");u(this,"visible",!0);this.$anchor=e,this.$head=t,this.ranges=i||[new KW(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Lt.empty){let i=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=i,i=i.lastChild;let n=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(n);e.replaceRange(d.map(l.pos),d.map(c.pos),a?Lt.empty:t),a==0&&DD(e,n,(i?i.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,s=this.ranges;for(let n=0;n<s.length;n++){let{$from:o,$to:a}=s[n],l=e.mapping.slice(i),c=l.map(o.pos),d=l.map(a.pos);n?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),DD(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let s=e.parent.inlineContent?new Os(e):td(e.node(0),e.parent,e.pos,e.index(),t,i);if(s)return s;for(let n=e.depth-1;n>=0;n--){let o=t<0?td(e.node(0),e.node(n),e.before(n+1),e.index(n),t,i):td(e.node(0),e.node(n),e.after(n+1),e.index(n)+1,t,i);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new so(e.node(0))}static atStart(e){return td(e,e,0,0,1)||new so(e)}static atEnd(e){return td(e,e,e.content.size,e.childCount,-1)||new so(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=ZE[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in ZE)throw new RangeError("Duplicate use of selection JSON ID "+e);return ZE[e]=t,t.prototype.jsonID=e,t}isNodeSelection(){return!1}isTextSelection(){return!1}AsTextSelection(){}}class KW{constructor(e,t){this.$from=e,this.$to=t}}let PD=!1;function RD(r){!PD&&!r.parent.inlineContent&&(PD=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class Os extends $r{constructor(e,t=e){RD(e),RD(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return $r.near(i);let s=e.resolve(t.map(this.anchor));return new Os(s.parent.inlineContent?s:i,i)}replace(e,t=Lt.empty){if(super.replace(e,t),t==Lt.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof Os&&e.anchor==this.anchor&&e.head==this.head}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Os(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let s=e.resolve(t);return new this(s,i==t?s:e.resolve(i))}static between(e,t,i){let s=e.pos-t.pos;if((!i||s)&&(i=s>=0?1:-1),!t.parent.inlineContent){let n=$r.findFrom(t,i,!0)||$r.findFrom(t,-i,!0);if(n)t=n.$head;else return $r.near(t,i)}return e.parent.inlineContent||(s==0?e=t:(e=($r.findFrom(e,-i,!0)||$r.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Os(e,t)}isTextSelection(){return!0}AsTextSelection(){return this}}$r.jsonID("text",Os);class ki extends $r{constructor(t){let i=t.nodeAfter,s=t.node(0).resolve(t.pos+i.nodeSize);super(t,s);u(this,"visible",!1);u(this,"node");this.node=i}map(t,i){let{deleted:s,pos:n}=i.mapResult(this.anchor),o=t.resolve(n);return s?$r.near(o):new ki(o)}content(){return new Lt(Bt.from(this.node),0,0)}eq(t){return t instanceof ki&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}static fromJSON(t,i){if(typeof i.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ki(t.resolve(i.anchor))}static create(t,i){return new ki(t.resolve(i))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}isNodeSelection(){return!0}}$r.jsonID("node",ki);class so extends $r{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Lt.empty){if(t==Lt.empty){e.delete(0,e.doc.content.size);let i=$r.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new so(e)}map(e){return new so(e)}eq(e){return e instanceof so}getBookmark(){return XW}}$r.jsonID("all",so);const XW={map(){return this},resolve(r){return new so(r)}};function td(r,e,t,i,s,n=!1){if(e.inlineContent)return Os.create(r,t);for(let o=i-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!n&&ki.isSelectable(a))return ki.create(r,t-(s<0?a.nodeSize:0))}else{let l=td(r,a,t+s,s<0?a.childCount:0,s,n);if(l)return l}t+=a.nodeSize*s}return null}function DD(r,e,t){let i=r.steps.length-1;if(i<e)return;let s=r.steps[i];if(!(s instanceof Hn||s instanceof Fs))return;let n=r.mapping.maps[i],o;n.forEach((a,l,c,d)=>{o==null&&(o=d)}),r.setSelection($r.near(r.doc.resolve(o),t))}function YW(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}const f2=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function qW(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const QW=(r,e,t)=>{let i=qW(r,t);if(!i)return!1;let s=_2(i);if(!s){let o=i.blockRange(),a=o&&Qb(o);return a==null?!1:(e&&e(r.tr.lift(o,a).scrollIntoView()),!0)}let n=s.nodeBefore;if(!n.type.spec.isolating&&g2(r,s,e))return!0;if(i.parent.content.size==0&&(of(n,"end")||ki.isSelectable(n))){let o=Jb(r.doc,i.before(),i.after(),Lt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=r.tr.step(o);a.setSelection(of(n,"end")?$r.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):ki.create(a.doc,s.pos-n.nodeSize)),e(a.scrollIntoView())}return!0}}return n.isAtom&&s.depth==i.depth-1?(e&&e(r.tr.delete(s.pos-n.nodeSize,s.pos).scrollIntoView()),!0):!1};function of(r,e,t=!1){for(let i=r;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const JW=(r,e,t)=>{let{$head:i,empty:s}=r.selection,n=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):i.parentOffset>0)return!1;n=_2(i)}let o=n&&n.nodeBefore;return!o||!ki.isSelectable(o)?!1:(e&&e(r.tr.setSelection(ki.create(r.doc,n.pos-o.nodeSize)).scrollIntoView()),!0)};function _2(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function ZW(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const e$=(r,e,t)=>{let i=ZW(r,t);if(!i)return!1;let s=p2(i);if(!s)return!1;let n=s.nodeAfter;if(g2(r,s,e))return!0;if(i.parent.content.size==0&&(of(n,"start")||ki.isSelectable(n))){let o=Jb(r.doc,i.before(),i.after(),Lt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=r.tr.step(o);a.setSelection(of(n,"start")?$r.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):ki.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return n.isAtom&&s.depth==i.depth-1?(e&&e(r.tr.delete(s.pos,s.pos+n.nodeSize).scrollIntoView()),!0):!1},t$=(r,e,t)=>{let{$head:i,empty:s}=r.selection,n=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):i.parentOffset<i.parent.content.size)return!1;n=p2(i)}let o=n&&n.nodeAfter;return!o||!ki.isSelectable(o)?!1:(e&&e(r.tr.setSelection(ki.create(r.doc,n.pos)).scrollIntoView()),!0)};function p2(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const r$=(r,e)=>{let{$head:t,$anchor:i}=r.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function Zb(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const i$=(r,e)=>{let{$head:t,$anchor:i}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let s=t.node(-1),n=t.indexAfter(-1),o=Zb(s.contentMatchAt(n));if(!o||!s.canReplaceWith(n,n,o))return!1;if(e){let a=t.after(),l=r.tr.replaceWith(a,a,o.createAndFill());l.setSelection($r.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},n$=(r,e)=>{let t=r.selection,{$from:i,$to:s}=t;if(t instanceof so||i.parent.inlineContent||s.parent.inlineContent)return!1;let n=Zb(s.parent.contentMatchAt(s.indexAfter()));if(!n||!n.isTextblock)return!1;if(e){let o=(!i.parentOffset&&s.index()<s.parent.childCount?i:s).pos,a=r.tr.insert(o,n.createAndFill());a.setSelection(Os.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},s$=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let n=t.before();if(dx(r.doc,n))return e&&e(r.tr.split(n).scrollIntoView()),!0}let i=t.blockRange(),s=i&&Qb(i);return s==null?!1:(e&&e(r.tr.lift(i,s).scrollIntoView()),!0)};function o$(r){return(e,t)=>{let{$from:i,$to:s}=e.selection;if(e.selection instanceof ki&&e.selection.node.isBlock)return!i.parentOffset||!dx(e.doc,i.pos)?!1:(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(t){let n=s.parentOffset==s.parent.content.size,o=e.tr;(e.selection instanceof Os||e.selection instanceof so)&&o.deleteSelection();let a=i.depth==0?null:Zb(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=r&&r(s.parent,n),c=(a==null?void 0:a.name)==="paragraph"?{...i.parent.attrs}:null,d=l?[l]:n&&a?[{type:a,attrs:c}]:void 0,f=dx(o.doc,o.mapping.map(i.pos),1,d);if(!d&&!f&&dx(o.doc,o.mapping.map(i.pos),1,a?[{type:a}]:void 0)&&(a&&(d=[{type:a}]),f=!0),f&&(o.split(o.mapping.map(i.pos),1,d),!n&&!i.parentOffset&&i.parent.type!=a)){let g=o.mapping.map(i.before()),x=o.doc.resolve(g);a&&i.node(-1).canReplaceWith(x.index(),x.index()+1,a)&&o.setNodeMarkup(o.mapping.map(i.before()),a)}t(o.scrollIntoView())}return!0}}const a$=o$(),l$=(r,e)=>(e&&e(r.tr.setSelection(new so(r.doc))),!0);function u$(r,e,t){let i=e.nodeBefore,s=e.nodeAfter,n=e.index();return!i||!s||!i.type.compatibleContent(s.type)?!1:!i.content.size&&e.parent.canReplace(n-1,n)?(t&&t(r.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(n,n+1)||!(s.isTextblock||l2(r.doc,e.pos))?!1:(t&&t(r.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function g2(r,e,t){let i=e.nodeBefore,s=e.nodeAfter,n,o;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(u$(r,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(n=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(n[0]||s.type).validEnd){if(t){let f=e.pos+s.nodeSize,g=Bt.empty;for(let P=n.length-1;P>=0;P--)g=Bt.from(n[P].create(null,g));g=Bt.from(i.copy(g));let x=r.tr.step(new Fs(e.pos-1,f,e.pos,f,new Lt(g,1,0),n.length,!0)),E=f+2*n.length;l2(x.doc,E)&&x.join(E),t(x.scrollIntoView())}return!0}let l=$r.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),d=c&&Qb(c);if(d!=null&&d>=e.depth)return t&&t(r.tr.lift(c,d).scrollIntoView()),!0;if(a&&of(s,"start",!0)&&of(i,"end")){let f=i,g=[];for(;g.push(f),!f.isTextblock;)f=f.lastChild;let x=s,E=1;for(;!x.isTextblock;x=x.firstChild)E++;if(f.canReplace(f.childCount,f.childCount,x.content)){if(t){let P=Bt.empty;for(let D=g.length-1;D>=0;D--)P=Bt.from(g[D].copy(P));let b=r.tr.step(new Fs(e.pos-g.length,e.pos+s.nodeSize,e.pos+E,e.pos+s.nodeSize-E,new Lt(P,g.length,0),0,!0));t(b.scrollIntoView())}return!0}}return!1}function ek(...r){return function(e,t,i){for(let s=0;s<r.length;s++)if(r[s](e,t,i))return!0;return!1}}let tk=ek(f2,QW,JW),m2=ek(f2,e$,t$);const bl=new Map;bl.set(Te.Enter,ek(r$,n$,s$,a$));bl.set(Te.Enter|ao.CtrlCmd,i$);bl.set(Te.Backspace,tk);bl.set(Te.Backspace|ao.Shift,tk);bl.set(Te.Backspace|ao.CtrlCmd,tk);bl.set(Te.Delete,m2);bl.set(Te.Delete|ao.Shift,m2);bl.set(Te.KEY_A|ao.CtrlCmd,l$);const c$=bl;const xT=class{constructor(){u(this,"_zoomLevel",0);u(this,"_zoomFactor",1);u(this,"_fullscreen",!1);u(this,"_onDidChangeFullscreen",new Dt);u(this,"onDidChangeFullscreen",this._onDidChangeFullscreen.event)}getZoomLevel(){return this._zoomLevel}setZoomLevel(e,t){this._zoomLevel!==e&&(this._zoomLevel=e)}getZoomFactor(){return this._zoomFactor}setZoomFactor(e){this._zoomFactor=e}setFullscreen(e){this._fullscreen!==e&&(this._fullscreen=e,this._onDidChangeFullscreen.fire())}isFullscreen(){return this._fullscreen}};let Ea=xT;u(Ea,"INSTANCE",new xT);class h$ extends zt{constructor(){super();u(this,"_onDidChange",this._register(new Dt));u(this,"onDidChange",this._onDidChange.event);u(this,"_listener");u(this,"_mediaQueryList");this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(t){this._mediaQueryList&&this._mediaQueryList.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class d$ extends zt{constructor(){super();u(this,"_onDidChange",this._register(new Dt));u(this,"onDidChange",this._onDidChange.event);u(this,"_value");this._value=this._getPixelRatio();const t=this._register(new h$);this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const t=document.createElement("canvas").getContext("2d"),i=window.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s}}class f${constructor(){u(this,"_pixelRatioMonitor",null)}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=IB(new d$)),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function _$(r,e){typeof r=="string"&&(r=window.matchMedia(r)),r.addEventListener("change",e)}const p$=new f$;function g$(r,e){Ea.INSTANCE.setZoomLevel(r,e)}function m$(){return Ea.INSTANCE.getZoomLevel()}function x$(){return Ea.INSTANCE.getZoomFactor()}function y$(r){Ea.INSTANCE.setZoomFactor(r)}function v$(r){Ea.INSTANCE.setFullscreen(r)}function E$(){return Ea.INSTANCE.isFullscreen()}const S$=Ea.INSTANCE.onDidChangeFullscreen,Uu=navigator.userAgent,rk=Uu.indexOf("Trident")>=0,ik=Uu.indexOf("Edge/")>=0,w$=rk||ik,Sy=Uu.indexOf("Firefox")>=0,x2=Uu.indexOf("AppleWebKit")>=0,pv=Uu.indexOf("Chrome")>=0,nk=!pv&&Uu.indexOf("Safari")>=0,A$=!pv&&!nk&&x2,b$=Uu.indexOf("Electron/")>=0,k$=Uu.indexOf("Android")>=0,T$=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,P$=Object.freeze(Object.defineProperty({__proto__:null,addMatchMediaChangeListener:_$,PixelRatio:p$,setZoomLevel:g$,getZoomLevel:m$,getZoomFactor:x$,setZoomFactor:y$,setFullscreen:v$,isFullscreen:E$,onDidChangeFullscreen:S$,isIE:rk,isEdge:ik,isEdgeOrIE:w$,isFirefox:Sy,isWebKit:x2,isChrome:pv,isSafari:nk,isWebkitWebView:A$,isElectron:b$,isAndroid:k$,isStandalone:T$},Symbol.toStringTag,{value:"Module"}));class R${constructor(e){u(this,"_maxWidth","");u(this,"_width","");u(this,"_height","");u(this,"_top","");u(this,"_left","");u(this,"_bottom","");u(this,"_right","");u(this,"_fontFamily","");u(this,"_fontWeight","");u(this,"_fontSize","");u(this,"_fontStyle","");u(this,"_fontFeatureSettings","");u(this,"_textDecoration","");u(this,"_lineHeight","");u(this,"_letterSpacing","");u(this,"_className","");u(this,"_display","");u(this,"_position","");u(this,"_visibility","");u(this,"_color","");u(this,"_backgroundColor","");u(this,"_layerHint",!1);u(this,"_contain","none");u(this,"_boxShadow","");u(this,"_transform","");this.domNode=e}setMaxWidth(e){const t=Jo(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Jo(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Jo(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Jo(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Jo(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Jo(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Jo(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Jo(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Jo(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Jo(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setTransform(e){this._transform!==e&&(this._transform=e,this.domNode.style.transform=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Jo(r){return typeof r=="number"?`${r}px`:r}function Pw(r){return new R$(r)}const n0=class{constructor(e,t,i,s,n){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=s,this.newlineCountBeforeSelection=n}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),s=e.getSelectionStart(),n=e.getSelectionEnd();let o;if(t){const a=i.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new n0(i,s,n,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new n0(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(BT(e.value,t.value),e.selectionStart,t.selectionStart),n=Math.min(LT(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-n);const o=t.value.substring(s,t.value.length-n),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,d=t.selectionEnd-s;if(c===d){const g=e.selectionStart-s;return{text:o,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const f=l-a;return{text:o,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(BT(e.value,t.value),e.selectionEnd),s=Math.min(LT(e.value,t.value),e.value.length-e.selectionEnd),n=e.value.substring(i,e.value.length-s),o=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:n.length-a,positionDelta:l-o.length}}};let ks=n0;u(ks,"EMPTY",new n0("",0,0,null,void 0));var mc;(r=>{const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},s={...e};let n=0,o;(R=>{R[R.Before=0]="Before",R[R.InProgress=1]="InProgress",R[R.Finished=2]="Finished"})(o||(o={}));const a={keydown:0,input:0,render:0};function l(){C(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),a.keydown=1,queueMicrotask(c)}r.onKeyDown=l;function c(){a.keydown===1&&(performance.mark("keydown/end"),a.keydown=2)}function d(){performance.mark("input/start"),a.input=1,D()}r.onBeforeInput=d;function f(){a.input===0&&d(),queueMicrotask(g)}r.onInput=f;function g(){a.input===1&&(performance.mark("input/end"),a.input=2)}function x(){C()}r.onKeyUp=x;function E(){C()}r.onSelectionChange=E;function P(){a.keydown===2&&a.input===2&&a.render===0&&(performance.mark("render/start"),a.render=1,queueMicrotask(b),D())}r.onRenderStart=P;function b(){a.render===1&&(performance.mark("render/end"),a.render=2)}function D(){setTimeout(C)}function C(){a.keydown===2&&a.input===2&&a.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),O("keydown",e),O("input",t),O("render",i),O("inputlatency",s),n++,N())}function O(R,L){const K=performance.getEntriesByName(R)[0].duration;L.total+=K,L.min=Math.min(L.min,K),L.max=Math.max(L.max,K)}function N(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),a.keydown=0,a.input=0,a.render=0}function j(){if(n===0)return;const R={keydown:I(e),input:I(t),render:I(i),total:I(s),sampleCount:n};return M(e),M(t),M(i),M(s),n=0,R}r.getAndClearMeasurements=j;function I(R){return{average:R.total/n,max:R.max,min:R.min}}function M(R){R.total=0,R.min=Number.MAX_VALUE,R.max=0}})(mc||(mc={}));let Cc;if(typeof wi.vscode<"u"&&typeof wi.vscode.process<"u"){const r=wi.vscode.process;Cc={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"?Cc={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Cc={get platform(){return j0?"win32":V0?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const Rw=Cc.cwd,D$=Cc.env,Hs=Cc.platform;Cc.arch;const C$=65,O$=97,N$=90,I$=122,pu=46,Mi=47,os=92,Wl=58,F$=63;class y2 extends Error{constructor(t,i,s){let n;typeof i=="string"&&i.indexOf("not ")===0?(n="must not be",i=i.replace(/^not /,"")):n="must be";const o=t.indexOf(".")!==-1?"property":"argument";let a=`The "${t}" ${o} ${n} of type ${i}`;a+=`. Received type ${typeof s}`;super(a);u(this,"code");this.code="ERR_INVALID_ARG_TYPE"}}function Jr(r,e){if(typeof r!="string")throw new y2(e,"string",r)}function Xt(r){return r===Mi||r===os}function Dw(r){return r===Mi}function $l(r){return r>=C$&&r<=N$||r>=O$&&r<=I$}function wy(r,e,t,i){let s="",n=0,o=-1,a=0,l=0;for(let c=0;c<=r.length;++c){if(c<r.length)l=r.charCodeAt(c);else{if(i(l))break;l=Mi}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==pu||s.charCodeAt(s.length-2)!==pu){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",n=0):(s=s.slice(0,d),n=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",n=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",n=2)}else s.length>0?s+=`${t}${r.slice(o+1,c)}`:s=r.slice(o+1,c),n=c-o-1;o=c,a=0}else l===pu&&a!==-1?++a:a=-1}return s}function v2(r,e){if(e===null||typeof e!="object")throw new y2("pathObject","Object",e);const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${r}${i}`:i}const pi={resolve(...r){let e="",t="",i=!1;for(let s=r.length-1;s>=-1;s--){let n;if(s>=0){if(n=r[s],Jr(n,"path"),n.length===0)continue}else e.length===0?n=Rw():(n=D$[`=${e}`]||Rw(),(n===void 0||n.slice(0,2).toLowerCase()!==e.toLowerCase()&&n.charCodeAt(2)===os)&&(n=`${e}\\`));const o=n.length;let a=0,l="",c=!1;const d=n.charCodeAt(0);if(o===1)Xt(d)&&(a=1,c=!0);else if(Xt(d))if(c=!0,Xt(n.charCodeAt(1))){let f=2,g=f;for(;f<o&&!Xt(n.charCodeAt(f));)f++;if(f<o&&f!==g){const x=n.slice(g,f);for(g=f;f<o&&Xt(n.charCodeAt(f));)f++;if(f<o&&f!==g){for(g=f;f<o&&!Xt(n.charCodeAt(f));)f++;(f===o||f!==g)&&(l=`\\\\${x}\\${n.slice(g,f)}`,a=f)}}}else a=1;else $l(d)&&n.charCodeAt(1)===Wl&&(l=n.slice(0,2),a=2,o>2&&Xt(n.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${n.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=wy(t,!i,"\\",Xt),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){Jr(r,"path");const e=r.length;if(e===0)return".";let t=0,i,s=!1;const n=r.charCodeAt(0);if(e===1)return Dw(n)?"\\":r;if(Xt(n))if(s=!0,Xt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){const c=r.slice(l,a);for(l=a;a<e&&Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Xt(r.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${r.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${r.slice(l,a)}`,t=a)}}}else t=1;else $l(n)&&r.charCodeAt(1)===Wl&&(i=r.slice(0,2),t=2,e>2&&Xt(r.charCodeAt(2))&&(s=!0,t=3));let o=t<e?wy(r.slice(t),!s,"\\",Xt):"";return o.length===0&&!s&&(o="."),o.length>0&&Xt(r.charCodeAt(e-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(r){Jr(r,"path");const e=r.length;if(e===0)return!1;const t=r.charCodeAt(0);return Xt(t)||e>2&&$l(t)&&r.charCodeAt(1)===Wl&&Xt(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let n=0;n<r.length;++n){const o=r[n];Jr(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&Xt(t.charCodeAt(0))){++s;const n=t.length;n>1&&Xt(t.charCodeAt(1))&&(++s,n>2&&(Xt(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&Xt(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return pi.normalize(e)},relative(r,e){if(Jr(r,"from"),Jr(e,"to"),r===e)return"";const t=pi.resolve(r),i=pi.resolve(e);if(t===i||(r=t.toLowerCase(),e=i.toLowerCase(),r===e))return"";let s=0;for(;s<r.length&&r.charCodeAt(s)===os;)s++;let n=r.length;for(;n-1>s&&r.charCodeAt(n-1)===os;)n--;const o=n-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===os;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===os;)l--;const c=l-a,d=o<c?o:c;let f=-1,g=0;for(;g<d;g++){const E=r.charCodeAt(s+g);if(E!==e.charCodeAt(a+g))break;E===os&&(f=g)}if(g!==d){if(f===-1)return i}else{if(c>d){if(e.charCodeAt(a+g)===os)return i.slice(a+g+1);if(g===2)return i.slice(a+g)}o>d&&(r.charCodeAt(s+g)===os?f=g:g===2&&(f=3)),f===-1&&(f=0)}let x="";for(g=s+f+1;g<=n;++g)(g===n||r.charCodeAt(g)===os)&&(x+=x.length===0?"..":"\\..");return a+=f,x.length>0?`${x}${i.slice(a,l)}`:(i.charCodeAt(a)===os&&++a,i.slice(a,l))},toNamespacedPath(r){if(typeof r!="string")return r;if(r.length===0)return"";const e=pi.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===os){if(e.charCodeAt(1)===os){const t=e.charCodeAt(2);if(t!==F$&&t!==pu)return`\\\\?\\UNC\\${e.slice(2)}`}}else if($l(e.charCodeAt(0))&&e.charCodeAt(1)===Wl&&e.charCodeAt(2)===os)return`\\\\?\\${e}`;return r},dirname(r){Jr(r,"path");const e=r.length;if(e===0)return".";let t=-1,i=0;const s=r.charCodeAt(0);if(e===1)return Xt(s)?r:".";if(Xt(s)){if(t=i=1,Xt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Xt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Xt(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=i=a+1)}}}}else $l(s)&&r.charCodeAt(1)===Wl&&(t=e>2&&Xt(r.charCodeAt(2))?3:2,i=t);let n=-1,o=!0;for(let a=e-1;a>=i;--a)if(Xt(r.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(t===-1)return".";n=t}return r.slice(0,n)},basename(r,e){e!==void 0&&Jr(e,"ext"),Jr(r,"path");let t=0,i=-1,s=!0,n;if(r.length>=2&&$l(r.charCodeAt(0))&&r.charCodeAt(1)===Wl&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(n=r.length-1;n>=t;--n){const l=r.charCodeAt(n);if(Xt(l)){if(!s){t=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(n=r.length-1;n>=t;--n)if(Xt(r.charCodeAt(n))){if(!s){t=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(t,i)},extname(r){Jr(r,"path");let e=0,t=-1,i=0,s=-1,n=!0,o=0;r.length>=2&&r.charCodeAt(1)===Wl&&$l(r.charCodeAt(0))&&(e=i=2);for(let a=r.length-1;a>=e;--a){const l=r.charCodeAt(a);if(Xt(l)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),l===pu?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===i+1?"":r.slice(t,s)},format:v2.bind(null,"\\"),parse(r){Jr(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.length;let i=0,s=r.charCodeAt(0);if(t===1)return Xt(s)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(Xt(s)){if(i=1,Xt(r.charCodeAt(1))){let f=2,g=f;for(;f<t&&!Xt(r.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&Xt(r.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&!Xt(r.charCodeAt(f));)f++;f===t?i=f:f!==g&&(i=f+1)}}}}else if($l(s)&&r.charCodeAt(1)===Wl){if(t<=2)return e.root=e.dir=r,e;if(i=2,Xt(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;i=3}}i>0&&(e.root=r.slice(0,i));let n=-1,o=i,a=-1,l=!0,c=r.length-1,d=0;for(;c>=i;--c){if(s=r.charCodeAt(c),Xt(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===pu?n===-1?n=c:d!==1&&(d=1):n!==-1&&(d=-1)}return a!==-1&&(n===-1||d===0||d===1&&n===a-1&&n===o+1?e.base=e.name=r.slice(o,a):(e.name=r.slice(o,n),e.base=r.slice(o,a),e.ext=r.slice(n,a))),o>0&&o!==i?e.dir=r.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Pi={resolve(...r){let e="",t=!1;for(let i=r.length-1;i>=-1&&!t;i--){const s=i>=0?r[i]:Rw();Jr(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===Mi)}return e=wy(e,!t,"/",Dw),t?`/${e}`:e.length>0?e:"."},normalize(r){if(Jr(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Mi,t=r.charCodeAt(r.length-1)===Mi;return r=wy(r,!e,"/",Dw),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return Jr(r,"path"),r.length>0&&r.charCodeAt(0)===Mi},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const i=r[t];Jr(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Pi.normalize(e)},relative(r,e){if(Jr(r,"from"),Jr(e,"to"),r===e||(r=Pi.resolve(r),e=Pi.resolve(e),r===e))return"";const t=1,i=r.length,s=i-t,n=1,o=e.length-n,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const f=r.charCodeAt(t+c);if(f!==e.charCodeAt(n+c))break;f===Mi&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(n+c)===Mi)return e.slice(n+c+1);if(c===0)return e.slice(n+c)}else s>a&&(r.charCodeAt(t+c)===Mi?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||r.charCodeAt(c)===Mi)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(n+l)}`},toNamespacedPath(r){return r},dirname(r){if(Jr(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Mi;let t=-1,i=!0;for(let s=r.length-1;s>=1;--s)if(r.charCodeAt(s)===Mi){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&Jr(e,"ext"),Jr(r,"path");let t=0,i=-1,s=!0,n;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(n=r.length-1;n>=0;--n){const l=r.charCodeAt(n);if(l===Mi){if(!s){t=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(n=r.length-1;n>=0;--n)if(r.charCodeAt(n)===Mi){if(!s){t=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(t,i)},extname(r){Jr(r,"path");let e=-1,t=0,i=-1,s=!0,n=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===Mi){if(!s){t=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===pu?e===-1?e=o:n!==1&&(n=1):e!==-1&&(n=-1)}return e===-1||i===-1||n===0||n===1&&e===i-1&&e===t+1?"":r.slice(e,i)},format:v2.bind(null,"/"),parse(r){Jr(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.charCodeAt(0)===Mi;let i;t?(e.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,l=r.length-1,c=0;for(;l>=i;--l){const d=r.charCodeAt(l);if(d===Mi){if(!a){n=l+1;break}continue}o===-1&&(a=!1,o=l+1),d===pu?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const d=n===0&&t?1:n;s===-1||c===0||c===1&&s===o-1&&s===n+1?e.base=e.name=r.slice(d,o):(e.name=r.slice(d,s),e.base=r.slice(d,o),e.ext=r.slice(s,o))}return n>0?e.dir=r.slice(0,n-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Pi.win32=pi.win32=pi;Pi.posix=pi.posix=Pi;Hs==="win32"?pi.normalize:Pi.normalize;Hs==="win32"?pi.isAbsolute:Pi.isAbsolute;Hs==="win32"?pi.join:Pi.join;Hs==="win32"?pi.resolve:Pi.resolve;Hs==="win32"?pi.relative:Pi.relative;Hs==="win32"?pi.dirname:Pi.dirname;Hs==="win32"?pi.basename:Pi.basename;Hs==="win32"?pi.extname:Pi.extname;Hs==="win32"?pi.format:Pi.format;Hs==="win32"?pi.parse:Pi.parse;Hs==="win32"?pi.toNamespacedPath:Pi.toNamespacedPath;Hs==="win32"?pi.sep:Pi.sep;Hs==="win32"?pi.delimiter:Pi.delimiter;const CD=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});class Es{constructor(e,t,i){u(this,"emitter");const s=n=>this.emitter.fire(n);this.emitter=new Dt({onWillAddFirstListener:()=>e.addEventListener(t,s,i),onDidRemoveLastListener:()=>e.removeEventListener(t,s,i)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}const yT=class{constructor(){u(this,"_lastState");this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};let fx=yT;u(fx,"INSTANCE",new yT);class M${constructor(){u(this,"_lastTypeTextLength");this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class B$ extends zt{constructor(t,i,s,n){super();u(this,"_onFocus",this._register(new Dt));u(this,"onFocus",this._onFocus.event);u(this,"_onBlur",this._register(new Dt));u(this,"onBlur",this._onBlur.event);u(this,"_onKeyDown",this._register(new Dt));u(this,"onKeyDown",this._onKeyDown.event);u(this,"_onKeyUp",this._register(new Dt));u(this,"onKeyUp",this._onKeyUp.event);u(this,"_onCut",this._register(new Dt));u(this,"onCut",this._onCut.event);u(this,"_onPaste",this._register(new Dt));u(this,"onPaste",this._onPaste.event);u(this,"_onType",this._register(new Dt));u(this,"onType",this._onType.event);u(this,"_onCompositionStart",this._register(new Dt));u(this,"onCompositionStart",this._onCompositionStart.event);u(this,"_onCompositionUpdate",this._register(new Dt));u(this,"onCompositionUpdate",this._onCompositionUpdate.event);u(this,"_onCompositionEnd",this._register(new Dt));u(this,"onCompositionEnd",this._onCompositionEnd.event);u(this,"_onSelectionChangeRequest",this._register(new Dt));u(this,"onSelectionChangeRequest",this._onSelectionChangeRequest.event);u(this,"_asyncTriggerCut");u(this,"_asyncFocusGainWriteScreenReaderContent");u(this,"_textAreaState");u(this,"_selectionChangeListener");u(this,"_hasFocus");u(this,"_currentComposition");this._host=t,this._textArea=i,this._OS=s,this._browser=n,this._asyncTriggerCut=this._register(new ry(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new ry(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=ks.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let o=null;this._register(this._textArea.onKeyDown(a=>{const l=new qS(a);(l.keyCode===Te.KEY_IN_COMPOSITION||this._currentComposition&&l.keyCode===Te.Backspace)&&l.stopPropagation(),l.equals(Te.Escape)&&l.preventDefault(),o=l,this._onKeyDown.fire(l)})),this._register(this._textArea.onKeyUp(a=>{const l=new qS(a);this._onKeyUp.fire(l)})),this._register(this._textArea.onCompositionStart(a=>{const l=new M$;if(this._currentComposition){this._currentComposition=l;return}if(this._currentComposition=l,this._OS===yS.Macintosh&&o&&o.equals(Te.KEY_IN_COMPOSITION)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(o.code==="ArrowRight"||o.code==="ArrowLeft")){l.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:a.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:a.data});return}this._onCompositionStart.fire({data:a.data})})),this._register(this._textArea.onCompositionUpdate(a=>{const l=this._currentComposition;if(!l)return;if(this._browser.isAndroid){const d=ks.readFromTextArea(this._textArea,this._textAreaState),f=ks.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(f),this._onCompositionUpdate.fire(a);return}const c=l.handleCompositionUpdate(a.data);this._textAreaState=ks.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(c),this._onCompositionUpdate.fire(a)})),this._register(this._textArea.onCompositionEnd(a=>{const l=this._currentComposition;if(!l)return;if(this._currentComposition=null,this._browser.isAndroid){const d=ks.readFromTextArea(this._textArea,this._textAreaState),f=ks.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(f),this._onCompositionEnd.fire();return}const c=l.handleCompositionUpdate(a.data);this._textAreaState=ks.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(c),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(a=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const l=ks.readFromTextArea(this._textArea,this._textAreaState),c=ks.deduceInput(this._textAreaState,l,this._OS===yS.Macintosh);c.replacePrevCharCnt===0&&c.text.length===1&&(wB(c.text.charCodeAt(0))||c.text.charCodeAt(0)===127)||(this._textAreaState=l,(c.text!==""||c.replacePrevCharCnt!==0||c.replaceNextCharCnt!==0||c.positionDelta!==0)&&this._onType.fire(c))})),this._register(this._textArea.onCut(a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(this._textArea.onPaste(a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),a.preventDefault(),!a.clipboardData)return;let[l,c]=L$.getTextData(a.clipboardData);!l||(c=c||fx.INSTANCE.get(l),this._onPaste.fire({text:l,metadata:c}))})),this._register(this._textArea.onFocus(()=>{const a=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}get textAreaState(){return this._textAreaState}_installSelectionChangeListener(){return Vn(document,"selectionchange",t=>{mc.onSelectionChange()})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}blurTextArea(){this._setHasFocus(!1),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(t,i){this._hasFocus||(i=i.collapseSelection()),i.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=i}writeScreenReaderContent(t){this._currentComposition||this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(t){ze()}}class L${static getTextData(e){const t=e.getData(CD.text);let i=null;const s=e.getData("vscode-editor-data");if(typeof s=="string")try{i=JSON.parse(s),i.version!==1&&(i=null)}catch{}return t.length===0&&i===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(o=>o.name).join(`
`),null]:[t,i]}static setTextData(e,t,i,s){e.setData(CD.text,t),typeof i=="string"&&e.setData("text/html",i),e.setData("vscode-editor-data",JSON.stringify(s))}}class U$ extends zt{constructor(t){super();u(this,"onKeyDown");u(this,"onKeyPress");u(this,"onKeyUp");u(this,"onCompositionStart");u(this,"onCompositionUpdate");u(this,"onCompositionEnd");u(this,"onBeforeInput");u(this,"onInput");u(this,"onCut");u(this,"onCopy");u(this,"onPaste");u(this,"onFocus");u(this,"onBlur");u(this,"_onSyntheticTap",this._register(new Dt));u(this,"onSyntheticTap",this._onSyntheticTap.event);u(this,"_ignoreSelectionChangeTime");this._actual=t,this._ignoreSelectionChangeTime=0,this.onKeyDown=this._register(new Es(this._actual,"keydown")).event,this.onKeyPress=this._register(new Es(this._actual,"keypress")).event,this.onKeyUp=this._register(new Es(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Es(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Es(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Es(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Es(this._actual,"beforeinput")).event,this.onInput=this._register(new Es(this._actual,"input")).event,this.onCut=this._register(new Es(this._actual,"cut")).event,this.onCopy=this._register(new Es(this._actual,"copy")).event,this.onPaste=this._register(new Es(this._actual,"paste")).event,this.onFocus=this._register(new Es(this._actual,"focus")).event,this.onBlur=this._register(new Es(this._actual,"blur")).event,this._register(this.onKeyDown(()=>mc.onKeyDown())),this._register(this.onBeforeInput(()=>mc.onBeforeInput())),this._register(this.onInput(()=>mc.onInput())),this._register(this.onKeyUp(()=>mc.onKeyUp()))}hasFocus(){const t=OP(this._actual);return t?t.activeElement===this._actual:s5(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(t){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(t,i){const s=this._actual;s.value!==i&&(this.setIgnoreSelectionChangeTime("setValue"),s.value=i)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(t,i,s){const n=this._actual;let o=null;const a=OP(n);a?o=a.activeElement:o=document.activeElement;const l=o===n,c=n.selectionStart,d=n.selectionEnd;if(l&&c===i&&d===s){Sy&&window.parent!==window&&n.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(i,s),Sy&&window.parent!==window&&n.focus();return}try{const f=i5(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(i,s),n5(n,f)}catch{}}}const G$=ik||Sy;class z$ extends zt{constructor(t,i){super();u(this,"_viewController");u(this,"textAreaTop",0);u(this,"textAreaLeft",0);u(this,"textAreaSize",0);u(this,"textArea");u(this,"textAreaCover");u(this,"_textAreaInput");this.view=i,this._viewController=t,this.textArea=Pw(document.createElement("textarea")),this.textArea.setClassName("inputarea"),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("tabindex","1"),this._register(sn(()=>this.textArea.domNode.remove())),this.textAreaCover=Pw(document.createElement("div")),this.textAreaCover.setPosition("absolute"),this._register(sn(()=>this.textAreaCover.domNode.remove())),this._register(i.onCursorMoved(o=>this.handleCursorMoved(o)));const s={getScreenReaderContent(){return ks.EMPTY}},n=this._register(new U$(this.textArea.domNode));this._textAreaInput=this._register(new B$(s,n,xB,P$)),this._register(this._textAreaInput.onKeyDown(o=>{this._viewController.keyDown(o)})),this._register(this._textAreaInput.onPaste(o=>{})),this._register(this._textAreaInput.onType(o=>{o.replacePrevCharCnt||o.replaceNextCharCnt||o.positionDelta?this._viewController.compositionType(o.text,o.replacePrevCharCnt,o.replaceNextCharCnt,o.positionDelta):this._viewController.type(o.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(o=>{et()})),this._register(this._textAreaInput.onCompositionStart(o=>{this._viewController.compositionStart()})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._viewController.compositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._viewController.focus()})),this._register(this._textAreaInput.onBlur(()=>{this._viewController.blur()}))}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}blurTextArea(){this._textAreaInput.blurTextArea()}handleCursorMoved(t){t?(this.textAreaLeft=t.blockStart,this.textAreaTop=t.inlineStart,this.textAreaSize=t.inlineSize):(this.textAreaTop=0,this.textAreaLeft=0),this.render()}render(){this._textAreaInput.writeScreenReaderContent("render");const t=this.textArea,i=this.textAreaCover,{textAreaTop:s,textAreaLeft:n}=this;t.setFontSize(this.textAreaSize),t.setLineHeight(this.textAreaSize),t.setTop(s),t.setLeft(n);const o=wN(this.view.mx);if(t.setTransform(o),i.setTop(s),i.setLeft(n),i.setTransform(o),G$){t.setWidth(0),t.setHeight(0),i.setWidth(0),i.setHeight(0);return}t.setWidth(1),t.setHeight(1),i.setWidth(1),i.setHeight(1)}}function E2(r,e,t){for(let i in r){let s=r[i];s instanceof Function?s=s.bind(e):i=="handleDOMEvents"&&(s=E2(s,e,{})),t[i]=s}return t}class H${constructor(e){u(this,"props",{});u(this,"key");this.spec=e,e.props&&E2(e.props,this,this.props),this.key=e.key?e.key.key:j$("plugin")}getState(e){return e[this.key]}}const eS=Object.create(null);function j$(r){return r in eS?r+"$"+ ++eS[r]:(eS[r]=0,r+"$")}function V$(r){return new H$({props:{handleKeyDown:W$(r)}})}function W$(r){return function(e,t){const i=Array.from(r.keys()).find(n=>t.equals(n));let s=i&&r.get(i);return!!(s&&s(e.state,e.dispatch,e))}}const $$=new AW({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:{style:{default:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:"pre-wrap"}}},toDOM(r){return["p",{style:{...r.attrs.style}},0]}},text:{group:"inline"}},marks:{}}),OD=1,Em=2,ND=4;class K$ extends $W{constructor(t){super(t.doc);u(this,"time");u(this,"curSelection");u(this,"curSelectionFor",0);u(this,"updated",0);u(this,"meta",Object.create(null));u(this,"storedMarks");this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|OD)&~Em,this.storedMarks=null,this}get selectionSet(){return(this.updated&OD)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Em,this}ensureMarks(t){return fi.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Em)>0}addStep(t,i){super.addStep(t,i),this.updated=this.updated&~Em,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,i=!0){let s=this.selection;return i&&(t=t.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||fi.none))),s.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,i,s){let n=this.doc.type.schema;if(i){if(s||(s=i),s=s||i,!t)return this.deleteRange(i,s);let o=this.storedMarks;if(!o){let a=this.doc.resolve(i);o=s==i?a.marks():a.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(i,s,n.text(t,o)),this.selection.empty||this.setSelection($r.near(this.selection.$to)),this}else return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection()}setMeta(t,i){return this.meta[typeof t=="string"?t:t.key]=i,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ND,this}get scrolledIntoView(){return(this.updated&ND)>0}}function ID(r,e){return!e||!r?r:r.bind(e)}class _x{constructor(e,t,i){u(this,"init");u(this,"apply");this.name=e,this.init=ID(t.init,i),this.apply=ID(t.apply,i)}}const X$=[new _x("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new _x("selection",{init(r,e){return r.selection||$r.atStart(e.doc)},apply(r){return r.selection}}),new _x("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,i){return i.selection.$cursor?r.storedMarks:null}})];class FD{constructor(e,t){u(this,"fields");u(this,"plugins",[]);u(this,"pluginsByKey",Object.create(null));this.schema=e,this.fields=X$.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new _x(i.key,i.spec.state,i))})}}class $p{constructor(e){u(this,"doc");u(this,"selection");u(this,"storedMarks");this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let s=this.config.plugins[i];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),s=null;for(;;){let n=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,d=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,i);if(d&&i.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<o?{state:i,n:t.length}:{state:this,n:0})}t.push(d),i=i.applyInner(d),n=!0}s&&(s[o]={state:i,n:t.length})}}if(!n)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new $p(this.config),i=this.config.fields;for(let s=0;s<i.length;s++){let n=i[s];t[n.name]=n.apply(e,this[n.name],this,t)}return t}get tr(){return new K$(this)}static create(e){let t=new FD(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new $p(t);for(let s=0;s<t.fields.length;s++)i[t.fields[s].name]=t.fields[s].init(e,i);return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[i],n=s.spec.state;n&&n.toJSON&&(t[i]=n.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new FD(e.schema,e.plugins),n=new $p(s);return s.fields.forEach(o=>{if(o.name=="doc")n.doc=va.fromJSON(e.schema,t.doc);else if(o.name=="selection")n.selection=$r.fromJSON(n.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(n.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){n[o.name]=c.fromJSON.call(l,e,t[a],n);return}}n[o.name]=o.init(e,n)}}),n}}function Y$(r,e){let{$anchor:t,$head:i}=r.selection,s=e===px.right?t.max(i):t.min(i),n=s.parent.inlineContent?s.depth?r.doc.resolve(e===px.right?s.after():s.before()):null:s;return n?$r.findFrom(n,e===px.right?1:-1,!0):null}function tS(r,e){return r.dispatch(r.state.tr.setSelection(e)),!0}var px=(r=>(r.left="left",r.right="right",r))(px||{});function MD(r,e){const{state:t}=r;let{selection:i}=t,{$anchor:s,$head:n}=i;const o=e==="right";let a=o?s.max(n):s.min(n);if(i.isTextSelection())if(i.empty){let l=o?a.nodeAfter:a.nodeBefore;if(!l||(l==null?void 0:l.isText)&&!l.nodeSize){let c=Y$(t,e);c&&tS(r,c);return}else{let c=t.doc.resolve(o?a.pos+1:a.pos-1),d=$r.findFrom(c,e==="right"?1:-1,!0);d?tS(r,d):et();return}}else return tS(r,new Os(a));else ze()}function q$(r,e){if(!r.state.selection.isTextSelection())return!0;let{$head:t,$anchor:i,empty:s}=r.state.selection,n=r.state.tr;if(s){J(t.sameParent(i));let o;if(t.textOffset)if((o=e==="backward"?t.nodeBefore:t.nodeAfter)&&o){const a=o.isText?1:o.nodeSize;return e==="backward"?n.delete(t.pos-a,t.pos):n.delete(t.pos,t.pos+a),r.dispatch(n)}else ze();else{if(t.parentOffset===0)return e==="backward"?n.delete(t.pos-1,t.pos):n.delete(t.pos,t.pos+1),r.dispatch(n);if(J(t.parent.inlineContent),t.parent.nodeSize===3)return e==="backward"?n.delete(t.pos-2,t.pos+1):ze(),r.dispatch(n);{let a=1;return e==="backward"?n.delete(t.pos-a,t.pos):n.delete(t.pos,t.pos+a),r.dispatch(n)}}}else r.dispatch(n.deleteSelection());ze()}function Q$(r,e){return e.keyCode===Te.Backspace||e.keyCode===Te.Delete?q$(r,"backward"):e.keyCode===Te.Enter||e.keyCode===Te.Escape?!0:e.keyCode===Te.LeftArrow?MD(r,"left"):e.keyCode===Te.RightArrow?MD(r,"right"):!1}function J$(r,e,t,i){return Os.between(e,t,i)}function Cw(r,e){e.isNodeSelection()&&ze()}function BD(r){for(r.input.composing&&(r.input.composing=!1,r.input.compositionEndedAt=Z$());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function Z$(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}const eK=function(r){return r.isCollapsed},LD=function(r,e,t,i){return r===t&&e===i?!0:t&&(UD(r,e,t,i,-1)||UD(r,e,t,i,1))},tK=/^(img|br|input|textarea|hr)$/i;function UD(r,e,t,i,s){for(;;){if(r==t&&e==i)return!0;if(e==(s<0?0:gu(r))){let n=r.parentNode;if(!n||n.nodeType!=1||rK(r)||tK.test(r.nodeName))return!1;e=hc(r)+(s<0?0:1),r=n}else if(r.nodeType==1)r=Tn(r.childNodes[e+(s<0?-1:0)]),e=s<0?gu(r):0;else return!1}}function gu(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function rK(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}function iK(r,e=null){let t=r.domSelection(),i=r.state.doc;if(!t.focusNode)return;let s=r.docView.nearestDesc(t.focusNode),n=s&&s.size==0,o=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return;let a=i.resolve(o),l,c;if(eK(t)){for(l=a;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&ki.isSelectable(d)&&s.parent&&!(d.isInline&&sK(t.focusNode,t.focusOffset,s.dom))){let f=s.posBefore;c=new ki(o==f?a:i.resolve(f))}}else{let d=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return;l=i.resolve(d)}if(!c){let d=e=="pointer"||r.state.selection.head<a.pos&&!n?1:-1;c=J$(r,l,a,d)}return c}function Ay(r,e=!1){let t=r.state.selection;Cw(r,t),r.domObserver.disconnectSelection();let{anchor:i,head:s}=t;r.docView.setSelection(i,s,r.root,e),r.domObserver.setCurSelection(),r.domObserver.connectSelection()}function nK(r){let e=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,t=iK(r,e);if(t&&!r.state.selection.eq(t)){let i=r.state.tr.setSelection(t);e=="pointer"?i.setMeta("pointer",!0):e=="key"&&ze(),r.dispatch(i)}}const hc=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e};function sK(r,e,t){for(let i=e==0,s=e==gu(r);i||s;){if(r==t)return!0;let n=hc(r);if(r=r.parentNode,!r)return!1;i=i&&n==0,s=s&&n==gu(r)}}const Sm=function(r,e,t,i){let s=r.root.createRange();return s.setEnd(e,i==null?e.nodeValue.length:i),s.setStart(e,t||0),s};class oK{constructor(e,t){this.view=e,this.onEsc=t}type(e){const{view:t}=this;/[\r\n]/.test(e)||t.dispatch(t.state.tr.insertText(e))}compositionType(e,t,i,s){J(!i),J(!s);const{view:n}=this,{state:o}=n;let{tr:a,selection:l}=o;const{head:c}=l;t&&a.delete(c-t,c),a.insertText(e),n.dispatch(a)}compositionStart(){const{view:e}=this,{state:t}=e,{selection:i}=t;if(!i.empty){let{tr:s}=t;e.dispatch(s.deleteSelection())}J(i.empty)}compositionEnd(){}keyDown(e){if(e.keyCode===Te.Escape){this.onEsc();return}const{view:t}=this;t.input.shiftKey=e.keyCode===Te.Shift||e.shiftKey,t.input.lastKeyCode=e.keyCode,t.input.lastKeyCodeTime=Date.now(),t.domObserver.forceFlush(),t.someProp("handleKeyDown",i=>i(t,e))||Q$(t,e)?e.preventDefault():aK(t,"key")}focus(){const{view:e}=this;e.input.lastFocus=Date.now(),e.focused||(e.domObserver.start(),e.focused=!0,e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&Ay(e))}blur(){const{view:e}=this;e.focused&&(e.domObserver.stop(),e.focused=!1)}}function aK(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}class lK{constructor(){u(this,"shiftKey",!1);u(this,"mouseDown",null);u(this,"lastKeyCode",null);u(this,"lastKeyCodeTime",0);u(this,"lastClick",{time:0,x:0,y:0,type:""});u(this,"lastSelectionOrigin",null);u(this,"lastSelectionTime",0);u(this,"lastIOSEnter",0);u(this,"lastIOSEnterFallbackTimeout",-1);u(this,"lastFocus",0);u(this,"lastTouch",0);u(this,"lastAndroidDelete",0);u(this,"composing",!1);u(this,"composingTimeout",-1);u(this,"compositionNodes",[]);u(this,"compositionEndedAt",-2e8)}}class uK{static matchSpec(e,t){let i=e.AsElement().AsHTMLElement(),s=t[1],n=1;if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){n=2;for(let o in s)if(s[o]!=null){o.indexOf(" ")>0&&ze();const a=s[o];o===uc&&Fd(a)||console.log("[pm]setAttribute",o,s[o],i.tagName)}}for(let o=n;o<t.length;o++)if(t[o]===0){if(o<t.length-1||o>n)throw new RangeError("Content hole must be the only child of its parent node");return{dom:i,contentDOM:i}}else ze();et()}}class sk{static renderSpec(e,t){let i=t[0];i.indexOf(" ")>0&&et();let n,o=e.createElement(i),a=t[1],l=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){l=2;for(let c in a)a[c]!=null&&(c.indexOf(" ")>0?et():c===uc?Object.assign(o.style,a[c]):o.setAttribute(c,a[c]))}for(let c=l;c<t.length;c++){let d=t[c];if(d===0){if(c<t.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}else{let{dom:f,contentDOM:g}=sk.renderSpec(e,d);if(o.appendChild(f),g){if(n)throw new RangeError("Multiple content holes");n=g}}}return{dom:o,contentDOM:n}}}const vT=class extends Rn{constructor(e){super(e,vT.kTagName)}AsHTMLBRElement(){return this}};let Oc=vT;u(Oc,"kTagName","br");const Ro=0,GD=1,ld=2,ku=3;class Mg extends zt{constructor(t,i,s,n,o){super();u(this,"dirty",Ro);u(this,"node");this.parent=t,this.children=i,this.dom=s,this.contentDOM=n,this.updater=o,s.pmViewDesc=this}dispose(){Reflect.deleteProperty(this.dom,"pmViewDesc");for(let t of this.children)t.dispose()}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,i,s){return!1}matchesHack(t){return!1}stopEvent(t){return!1}get size(){let t=0;for(let i=0;i<this.children.length;i++)t+=this.children[i].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let i=0,s=this.posAtStart;;i++){let n=this.children[i];if(n==t)return s;s+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,i,s){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(s<0){let o,a;if(t==this.contentDOM)o=Rp(t.childNodes[i-1]);else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(t==this.contentDOM)o=Rp(t.childNodes[i]);else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let n;if(t==this.dom&&this.contentDOM)n=i>hc(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(i==0)for(let o=t;;o=o.parentNode){if(o==this.dom){n=!1;break}if(o.previousSibling)break}if(n==null&&i==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){n=!0;break}if(o.nextSibling)break}}return(n==null?s>0:n)?this.posAtEnd:this.posAtStart}nearestDesc(t,i=!1){for(let s=!0,n=t;n;n=n.parentNode){let o=this.getDesc(n),a;if(o&&(!i||o.node))if(s&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))s=!1;else return o}}getDesc(t){let i=t.pmViewDesc;for(let s=i;s;s=s.parent)if(s==this)return i}posFromDOM(t,i,s){for(let n=t;n;n=n.parentNode){let o=this.getDesc(n);if(o)return o.localPosFromDOM(t,i,s)}return-1}descAt(t){for(let i=0,s=0;i<this.children.length;i++){let n=this.children[i],o=s+n.size;if(s==t&&o!=s){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(t<o)return n.descAt(t-s-n.border);s=o}}domFromPos(t,i){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let s=0,n=0;for(let o=0;s<this.children.length;s++){let a=this.children[s],l=o+a.size;if(l>t||a instanceof S2){n=t-o;break}o=l}if(n)return this.children[s].domFromPos(n-this.children[s].border,i);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof cK&&o.side>=0;s--);if(i<=0){let o,a=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,a=!1);return o&&i&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,i):{node:this.contentDOM,offset:o?hc(o.dom)+1:0}}else{let o,a=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,i):{node:this.contentDOM,offset:o?hc(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,i,s=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:i,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,o=-1;for(let a=s,l=0;;l++){let c=this.children[l],d=a+c.size;if(n==-1&&t<=d){let f=a+c.border;if(t>=f&&i<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,i,f);t=a;for(let g=l;g>0;g--){let x=this.children[g-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){n=hc(x.dom)+1;break}t-=x.size}n==-1&&(n=0)}if(n>-1&&(d>i||l==this.children.length-1)){i=d;for(let f=l+1;f<this.children.length;f++){let g=this.children[f];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=hc(g.dom);break}i+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:t,to:i,fromOffset:n,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let i=this.children[t<0?0:this.children.length-1];return i.size==0||i.emptyChildAt(t)}domAfterPos(t){let{node:i,offset:s}=this.domFromPos(t,0);if(i.nodeType!=1||s==i.childNodes.length)throw new RangeError("No node after pos "+t);return Rp(i.childNodes[s])}setSelection(t,i,s,n=!1){let o=Math.min(t,i),a=Math.max(t,i);for(let g=0,x=0;g<this.children.length;g++){let E=this.children[g],P=x+E.size;if(o>x&&a<P)return E.setSelection(t-x-E.border,i-x-E.border,s,n);x=P}let l=this.domFromPos(t,t?-1:1),c=i==t?l:this.domFromPos(i,i?-1:1),d=s.getSelection();if(!(!(n||!1)&&LD(l.node,l.offset,d.anchorNode,d.anchorOffset)&&LD(c.node,c.offset,d.focusNode,d.focusOffset))){if(t>i){let x=l;l=c,c=x}let g=s.createRange();g.setEnd(c.node,c.offset),g.setStart(l.node,l.offset),d.addRange(g)}}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,i){for(let s=0,n=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(s==a?t<=a&&i>=s:t<a&&i>s){let l=s+o.border,c=a-o.border;if(t>=l&&i<=c){this.dirty=t==s||i==a?ld:GD,t==l&&i==c&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=ku:o.markDirty(t-l,i-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?ld:ku}s=a}this.dirty=ld}markParentsDirty(){let t=1;for(let i=this.parent;i;i=i.parent,t++){let s=t==1?ld:GD;i.dirty<s&&(i.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isNodeViewDesc(){return!1}isTextViewDesc(){return!1}}class Bg extends Mg{constructor(e,t,i,s,n,o,a,l,c){super(e,[],n,o,l.updater),this.node=t,this.outerDeco=i,this.innerDeco=s,this.nodeDOM=a,this.view=l,o&&this.updateChildren(l,c)}static create(e,t,i,s,n,o,a){let l,c,d=Rp(Tn(e.contentDOM).childNodes[a]);if(t.isText){if(!l){if(d)if(d.IsText()&&d.textContent===t.text)l=d;else for(;d;)d=xK(d);l||(l=n.root.createTextNode(t.text),n.updater.updateText(e.dom,t.text),e.dom.appendChild(l))}if(l.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else if(!l){const g=t.type.spec.toDOM(t);!d||d&&(d==null?void 0:d.IsText())||d&&d.pmViewDesc?({dom:l,contentDOM:c}=sk.renderSpec(n.root,g),e.dom.insertBefore(l,d),n.updater.insertBefore(e.dom,t,d)):{dom:l,contentDOM:c}=uK.matchSpec(Tn(d),g)}!c&&!t.isText&&l.nodeName!="BR"&&et();let f=l;return l=w2(l,i,t),t.isText?new gv(e,t,i,s,l,f,n):new Bg(e,t,i,s,l,c||null,f,n,o+1)}matchesNode(e,t,i){return this.dirty==Ro&&e.eq(this.node)&&Nw(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,s=t,n=e.input.composing?this.localCompositionInfo(e,t):null,o=n&&n.pos>-1?n:null,a=n&&n.pos<0,l=new _K(this,o&&o.node,e);gK(this.node,this.innerDeco,(c,d,f)=>{et()},(c,d,f,g)=>{l.syncToMarks(c.marks,i,e);let x;l.findNodeMatch(c,d,f,g)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(x=l.findIndexWithChild(n.node))>-1&&l.updateNodeAt(c,d,f,x,e)||l.updateNextNode(c,d,f,e,g)||l.addNode(c,d,f,e,s),s+=c.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ld)&&(o&&this.protectLocalComposition(e,o),b2(this.contentDOM,this.children,e))}localCompositionInfo(e,t){let{from:i,to:s}=e.state.selection;if(!(e.state.selection instanceof Os)||i<t||s>t+this.node.content.size)return null;let n=e.domSelection(),o=yK(n.focusNode,n.focusOffset);if(!o||!this.dom.contains(Rp(o.parentNode)))return null;if(this.node.inlineContent){let a=o.nodeValue,l=vK(this.node.content,a,i-t,s-t);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:s}){if(this.getDesc(t))return;let n=t;for(;n.parentNode!=this.contentDOM;n=n.parentNode){for(;n.previousSibling;){debugger;n.parentNode.removeChild(n.previousSibling)}for(;n.nextSibling;){debugger;n.parentNode.removeChild(n.nextSibling)}n.pmViewDesc&&(n.pmViewDesc=void 0)}let o=new hK(this,n,t,s,this.view);e.input.compositionNodes.push(o),this.children=Iw(this.children,i,i+s.length,e,o)}update(e,t,i,s){return this.dirty==ku||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,s),!0)}forceUpdate(e,t,i,s){this.updateInner(e,t,i,s)}updateInner(e,t,i,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Ro}updateOuterDeco(e){if(Nw(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=A2(this.dom,this.nodeDOM,Ow(this.outerDeco,this.node,t),Ow(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1,(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.setAttribute("draggable","true")}deselectNode(){this.nodeDOM.nodeType==1,(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}isNodeViewDesc(){return!0}}class S2 extends Mg{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ro&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cK extends Mg{constructor(e,t,i,s){let n,o=t.type.toDOM;typeof o=="function"&&(o=o(i,()=>{if(!n)return s;if(n.parent)return n.parent.posBeforeChild(n)})),t.type.spec.raw||(o.nodeType!=1&&ze(),o.setAttribute("contentEditable","false")),super(e,[],o,null,i.updater),this.widget=t,this.widget=t,n=this}matchesWidget(e){return this.dirty==Ro&&e.type.eq(this.widget.type)}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class hK extends Mg{constructor(e,t,i,s,n){super(e,[],t,null,n.updater),this.textDOM=i,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class af extends Mg{constructor(e,t,i,s,n){super(e,[],i,s,n.updater),this.mark=t}static create(e,t,i,s){return ze()}matchesMark(e){return this.dirty!=ku&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Ro){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Ro}}slice(e,t,i){let s=af.create(this.parent,this.mark,!0,i),n=this.children,o=this.size;t<o&&(n=Iw(n,t,o,i)),e>0&&(n=Iw(n,0,e,i));for(let a=0;a<n.length;a++)n[a].parent=s;return s.children=n,s}}const ok=function(r){r&&(this.nodeName=r)};ok.prototype=Object.create(null);const Sd=[new ok];function dK(r,e,t,i,s){return w2(i,e,r),new Bg(void 0,r,e,t,i,i,i,s,0)}function w2(r,e,t){return A2(r,r,Sd,Ow(e,t,r.nodeType!=1))}function Ow(r,e,t){if(r.length==0)return Sd;let i=t?Sd[0]:new ok,s=[i];for(let n=0;n<r.length;n++){let o=r[n].type.attrs;if(!!o){o.nodeName&&et();for(let a in o){let l=o[a];l!=null&&(t&&s.length==1&&et(),a=="class"||a=="style"?et():a!="nodeName"&&(i[a]=l))}}}return s}function A2(r,e,t,i){if(t==Sd&&i==Sd)return e;let s=e;for(let n=0;n<i.length;n++){let o=i[n],a=t[n];if(n){let l;a&&a.nodeName===o.nodeName&&s!=r&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName?s=l:et()}fK(s,a||Sd[0],o)}return s}function fK(r,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&console.log("[pm]removeAttribute",i,r);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&console.log("[pm]setAttribute",i,t[i],r.tagName);e.class!=t.class&&ze(),e.style!=t.style&&ze()}class gv extends Bg{constructor(e,t,i,s,n,o,a){super(e,t,i,s,n,null,o,a,0)}update(e,t,i,s){return this.dirty==ku||this.dirty!=Ro&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Ro||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,this.updater.updateText(this.nodeDOM,e.text)),this.node=e,this.dirty=Ro,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let s=this.node.cut(e,t),n=i.root.createTextNode(s.text);return new gv(this.parent,s,this.outerDeco,this.innerDeco,n,n,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ku)}get domAtom(){return!1}isTextViewDesc(){return!0}}function Nw(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}class _K{constructor(e,t,i){u(this,"index",0);u(this,"stack",[]);u(this,"changed",!1);u(this,"preMatch");u(this,"top");this.lock=t,this.view=i,this.top=e,this.preMatch=pK(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let s=0,n=this.stack.length>>1,o=Math.min(n,e.length);for(;s<o&&(s==n-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<n;)this.destroyRest(),this.top.dirty=Ro,this.index=this.stack.pop(),this.top=this.stack.pop(),n--;for(;n<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[n])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=af.create(this.top,e[n],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,n++}}findNodeMatch(e,t,i,s){let n=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,i))n=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,i)&&!this.preMatch.matched.has(c)){n=a;break}}return n<0?!1:(this.destroyBetween(this.index,n),this.index++,!0)}updateNodeAt(e,t,i,s,n){let o=this.top.children[s];return o.dirty==ku&&o.dom==o.contentDOM&&(o.dirty=ld),o.update(e,t,i,n)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==i)return s}return-1}e=t}}updateNextNode(e,t,i,s,n){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a.isNodeViewDesc()){let l=this.preMatch.matched.get(a);if(l!=null&&l!=n)return!1;let c=a.dom;if(!(this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=ku&&Nw(t,a.outerDeco)))&&a.update(e,t,i,s))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,i,s,n){const o=this.index;this.top.children.splice(this.index++,0,Bg.create(this.top,e,t,i,s,n,o)),this.changed=!0}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof af;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof gv)||/\n$/.test(e.node.text))&&this.addHackNode("BR",this.top)}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=t.dom.GetDocument().createElement(e);e=="BR"?i.setAttribute(m0,d1.TrailingBreak):et();let s=new S2(this.top,[],i,null,t.updater);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function pK(r,e){let t=e,i=t.children.length,s=r.childCount,n=new Map,o=[];e:for(;s>0;){let a;for(;;)if(i){let c=t.children[i-1];if(c instanceof af)t=c,i=c.children.length;else{a=c,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(!!l){if(l!=r.child(s-1))break;--s,n.set(a,s),o.push(a)}}return{index:s,matched:n,matches:o.reverse()}}function gK(r,e,t,i){let s=e.locals(r),n=0;if(s.length==0){for(let c=0;c<r.childCount;c++){let d=r.child(c);i(d,s,e.forChild(n,d),c),n+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){if(o<s.length&&s[o].to==n){let E=s[o++],P;for(;o<s.length&&s[o].to==n;)(P||(P=[E])).push(s[o++]);if(P){P.sort(mK);for(let b=0;b<P.length;b++)t(P[b],c,!!l)}else t(E,c,!!l)}let d,f;if(l)f=-1,d=l,l=null;else if(c<r.childCount)f=c,d=r.child(c++);else break;for(let E=0;E<a.length;E++)a[E].to<=n&&a.splice(E--,1);for(;o<s.length&&s[o].from<=n&&s[o].to>n;)a.push(s[o++]);let g=n+d.nodeSize;if(d.isText){let E=g;o<s.length&&s[o].from<E&&(E=s[o].from);for(let P=0;P<a.length;P++)a[P].to<E&&(E=a[P].to);E<g&&(l=d.cut(E-n),d=d.cut(0,E-n),g=E,f=-1)}let x=d.isInline&&!d.isLeaf?a.filter(E=>!E.inline):a.slice();i(d,x,e.forChild(n,d),f),n=g}}function mK(r,e){return r.type.side-e.type.side}function b2(r,e,t){let i=r.firstChild;for(let a=0;a<e.length;a++){let l=e[a],c=l.dom;if(c.parentNode==r){const d=[];for(;c!=i;){J(i);let f=i.nextSibling;i.parentNode.removeChild(i),i=f}d.length&&t.updater.removeNodes(d),i=i.nextSibling}else r.insertBefore(c,i),c.nodeName!==Oc.kTagName&&t.updater.insertBefore(r,l.node,i);if(l instanceof af){let d=i?i.previousSibling:r.lastChild;b2(l.contentDOM,l.children,t),i=d?d.nextSibling:r.firstChild}}const s=[],n=[];let o=0;for(;i&&!Reflect.has(i,"$anchor");){if(o++,o>100)debugger;let a=i.nextSibling;i.parentNode.removeChild(i),i.IsElement()?i.getAttribute(m0)!==d1.TrailingBreak&&s.push(i):n.push(r),i=a}s.length&&t.updater.removeNodes(s),n&&t.updater.removeContent(n)}function xK(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}function yK(r,e){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0){if(r.childNodes.length>e&&r.childNodes[e].nodeType==3)return r.childNodes[e];r=r.childNodes[e-1],e=gu(r)}else if(r.nodeType==1&&e<r.childNodes.length)r=r.childNodes[e],e=0;else return null}}function vK(r,e,t,i){for(let s=0,n=0;s<r.childCount&&n<=i;){let o=r.child(s++),a=n;if(n+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<r.childCount;){let c=r.child(s++);if(n+=c.nodeSize,!c.isText)break;l+=c.text}if(n>=t){let c=a<i?l.lastIndexOf(e,i-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}function Iw(r,e,t,i,s){let n=[];for(let o=0,a=0;o<r.length;o++){let l=r[o],c=a,d=a+=l.size;c>=t||d<=e?n.push(l):(c<e&&n.push(l.slice(0,e-c,i)),s&&(n.push(s),s=void 0),d>t&&n.push(l.slice(t-c,l.size,i)))}return n}class EK{constructor(){u(this,"anchorNode",null);u(this,"anchorOffset",0);u(this,"focusNode",null);u(this,"focusOffset",0)}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class SK extends zt{constructor(t){super();u(this,"flushingSoon",-1);u(this,"listener");u(this,"currentSelection",new EK);this.view=t,this.onSelectionChange=this.onSelectionChange.bind(this)}dispose(){var t;(t=this.listener)==null||t.dispose()}start(){this.connectSelection()}stop(){this.disconnectSelection()}connectSelection(){this.listener||(this.listener=this.view.domSelection().onDidChange(this.onSelectionChange))}disconnectSelection(){var t;(t=this.listener)==null||t.dispose(),this.listener=void 0}onSelectionChange(){this.flush()}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let i=t.domSelection();nK(this.view),t.docView.dirty&&ze(),this.currentSelection.eq(i)||Ay(t),this.currentSelection.set(i)}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}setCurSelection(){this.currentSelection.set(this.view.domSelection())}}function D0(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class ak{constructor(e,t){u(this,"spec");u(this,"side");this.toDOM=e,this.spec=t||Nc,this.side=this.spec.side||0}map(e,t,i,s){let{pos:n,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new fa(n-i,n-i,this)}valid(){return!0}eq(e){return this==e||e instanceof ak&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&D0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class mu{constructor(e,t){u(this,"spec");this.attrs=e,this.spec=t||Nc}map(e,t,i,s){let n=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-i;return n>=o?null:new fa(n,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof mu&&D0(this.attrs,e.attrs)&&D0(this.spec,e.spec)}static is(e){return e.type instanceof mu}destroy(){}}class lk{constructor(e,t){u(this,"spec");this.attrs=e,this.spec=t||Nc}map(e,t,i,s){let n=e.mapResult(t.from+s,1);if(n.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=n.pos?null:new fa(n.pos-i,o.pos-i,this)}valid(e,t){let{index:i,offset:s}=e.content.findIndex(t.from),n;return s==t.from&&!(n=e.child(i)).isText&&s+n.nodeSize==t.to}eq(e){return this==e||e instanceof lk&&D0(this.attrs,e.attrs)&&D0(this.spec,e.spec)}destroy(){}}class fa{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new fa(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new fa(e,e,new ak(t,i))}static inline(e,t,i,s){return new fa(e,t,new mu(i,s))}static node(e,t,i,s){return new fa(e,t,new lk(i,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof mu}}const rd=[],Nc={},ra=class{constructor(e,t){u(this,"local");u(this,"children");this.local=e.length?e:rd,this.children=t.length?t:rd}static create(e,t){return t.length?by(t,e,0,Nc):zn}find(e,t,i){let s=[];return this.findInner(e==null?0:e,t==null?1e9:t,s,0,i),s}findInner(e,t,i,s,n){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!n||n(a.spec))&&i.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,i,s+a,n)}}map(e,t,i){return this==zn||e.maps.length==0?this:this.mapInner(e,t,0,0,i||Nc)}mapInner(e,t,i,s,n){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,s);l&&l.type.valid(t,l)?(o||(o=[])).push(l):n.onRemove&&n.onRemove(this.local[a].spec)}return this.children.length?wK(this.children,o||[],e,t,i,s,n):o?new ra(o.sort(Ic),rd):zn}add(e,t){return t.length?this==zn?ra.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let s,n=0;e.forEach((a,l)=>{let c=l+i,d;if(!!(d=T2(t,a,c))){for(s||(s=this.children.slice());n<s.length&&s[n]<l;)n+=3;s[n]==l?s[n+2]=s[n+2].addInner(a,d,c+1):s.splice(n,0,l,l+a.nodeSize,by(d,a,c+1,Nc)),n+=3}});let o=k2(n?P2(t):t,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new ra(o.length?this.local.concat(o).sort(Ic):this.local,s||this.children)}remove(e){return e.length==0||this==zn?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,s=this.local;for(let n=0;n<i.length;n+=3){let o,a=i[n]+t,l=i[n+1]+t;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>a&&f.to<l&&(e[d]=null,(o||(o=[])).push(f));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[n+2].removeInner(o,a+1);c!=zn?i[n+2]=c:(i.splice(n,3),n-=3)}if(s.length){for(let n=0,o;n<e.length;n++)if(o=e[n])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return i==this.children&&s==this.local?this:s.length||i.length?new ra(s,i):zn}forChild(e,t){if(this==zn)return this;if(t.isLeaf)return ra.empty;let i,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let n=e+1,o=n+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>n&&l.type instanceof mu){let c=Math.max(n,l.from)-n,d=Math.min(o,l.to)-n;c<d&&(s||(s=[])).push(l.copy(c,d))}}if(s){let a=new ra(s.sort(Ic),rd);return i?new lu([a,i]):a}return i||zn}eq(e){if(this==e)return!0;if(!(e instanceof ra)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Fw(this.localsInner(e))}localsInner(e){if(this==zn)return rd;if(e.inlineContent||!this.local.some(mu.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof mu||t.push(this.local[i]);return t}};let _a=ra;u(_a,"empty",new ra([],[])),u(_a,"removeOverlap",Fw);const zn=_a.empty;class lu{constructor(e){this.members=e}map(e,t){const i=this.members.map(s=>s.map(e,t,Nc));return lu.from(i)}forChild(e,t){if(t.isLeaf)return _a.empty;let i=[];for(let s=0;s<this.members.length;s++){let n=this.members[s].forChild(e,t);n!=zn&&(n instanceof lu?i=i.concat(n.members):i.push(n))}return lu.from(i)}eq(e){if(!(e instanceof lu)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let s=0;s<this.members.length;s++){let n=this.members[s].localsInner(e);if(!!n.length)if(!t)t=n;else{i&&(t=t.slice(),i=!1);for(let o=0;o<n.length;o++)t.push(n[o])}}return t?Fw(i?t:t.sort(Ic)):rd}static from(e){switch(e.length){case 0:return zn;case 1:return e[0];default:return new lu(e.every(t=>t instanceof _a)?e:e.reduce((t,i)=>t.concat(i instanceof _a?i:i.members),[]))}}}function wK(r,e,t,i,s,n,o){let a=r.slice();for(let c=0,d=n;c<t.maps.length;c++){let f=0;t.maps[c].forEach((g,x,E,P)=>{let b=P-E-(x-g);for(let D=0;D<a.length;D+=3){let C=a[D+1];if(C<0||g>C+d-f)continue;let O=a[D]+d-f;x>=O?a[D+1]=g<=O?-2:-1:E>=s&&b&&(a[D]+=b,a[D+1]+=b)}f+=b}),d=t.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=t.map(r[c]+n),f=d-s;if(f<0||f>=i.content.size){l=!0;continue}let g=t.map(r[c+1]+n,-1),x=g-s,{index:E,offset:P}=i.content.findIndex(f),b=i.maybeChild(E);if(b&&P==f&&P+b.nodeSize==x){let D=a[c+2].mapInner(t,b,d+1,r[c]+n+1,o);D!=zn?(a[c]=f,a[c+1]=x,a[c+2]=D):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=AK(a,r,e,t,s,n,o),d=by(c,i,0,o);e=d.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,g=0;f<d.children.length;f+=3){let x=d.children[f];for(;g<a.length&&a[g]<x;)g+=3;a.splice(g,0,d.children[f],d.children[f+1],d.children[f+2])}}return new _a(e.sort(Ic),a)}function k2(r,e){if(!e||!r.length)return r;let t=[];for(let i=0;i<r.length;i++){let s=r[i];t.push(new fa(s.from+e,s.to+e,s.type))}return t}function AK(r,e,t,i,s,n,o){function a(l,c){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(i,s,c);f?t.push(f):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<r.length;l+=3)r[l+1]==-1&&a(r[l+2],e[l]+n+1);return t}function T2(r,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,s=null;for(let n=0,o;n<r.length;n++)(o=r[n])&&o.from>t&&o.to<i&&((s||(s=[])).push(o),r[n]=null);return s}function P2(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function by(r,e,t,i){let s=[],n=!1;e.forEach((a,l)=>{let c=T2(r,a,l+t);if(c){n=!0;let d=by(c,a,t+l+1,i);d!=zn&&s.push(l,l+a.nodeSize,d)}});let o=k2(n?P2(r):r,-t).sort(Ic);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new _a(o,s):zn}function Ic(r,e){return r.from-e.from||r.to-e.to}function Fw(r){let e=r;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let s=t+1;s<e.length;s++){let n=e[s];if(n.from==i.from){n.to!=i.to&&(e==r&&(e=r.slice()),e[s]=n.copy(n.from,i.to),zD(e,s+1,n.copy(i.to,n.to)));continue}else{n.from<i.to&&(e==r&&(e=r.slice()),e[t]=i.copy(i.from,n.from),zD(e,s,i.copy(n.from,i.to)));break}}}return e}function zD(r,e,t){for(;e<r.length&&Ic(t,r[e])>0;)e++;r.splice(e,0,t)}function HD(r){let e=[];return lu.from(e)}function bK(r,e){r.root,ze()}function wm(r,e){ze()}function rS(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}const kK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function TK(r,e,t){let{node:i,offset:s,atom:n}=r.docView.domFromPos(e,t<0?-1:1);if(i.nodeType==3){if(kK.test(i.nodeValue)||(t<0?!s:s==i.nodeValue.length))return wm(Sm(r,i.AsText(),s,s));{let a=s,l=s,c=t<0?1:-1;return t<0&&!s?(l++,c=-1):t>=0&&s==i.nodeValue.length?(a--,c=1):t<0?a--:l++,rS(wm(Sm(r,i.AsText(),a,l)),c<0)}}if(r.state.doc.resolve(e-(n||0)).parent.inlineContent||et(),n==null&&s&&(t<0||s==gu(i))){let a=i.childNodes[s-1];if(J(a),a.nodeType==3?Sm(r,a.AsText(),gu(a)-0):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null)return rS(wm(),!1)}if(n==null&&s<gu(i)){let a=i.childNodes[s];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;if(a?a.nodeType==3?Sm(r,a.AsText(),0,0):a.nodeType==1?a:null:null)return rS(wm(),!0)}et()}function R2(r,e,t){let i=r.state;i!=e&&r.updateState(e);try{return t()}finally{i!=e&&r.updateState(i)}}function PK(r,e,t){let i=e.selection,s=t=="up"?i.$from:i.$to;return R2(r,e,()=>{let{node:n}=r.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=r.docView.nearestDesc(n,!0);if(!a)break;if(a.node.isBlock){n=a.contentDOM||a.dom;break}n=a.dom.parentNode}let o=TK(r,s.pos,1);for(let a=n.firstChild;a;a=a.nextSibling)et();return!0})}const RK=/[\u0590-\u08ac]/;function DK(r,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let s=i.parentOffset,n=!s,o=s==i.parent.content.size,a=r.domSelection();return!RK.test(i.parent.textContent)||!a.modify?t=="left"||t=="backward"?n:o:R2(r,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:f}=r.domSelection(),g=a.caretBidiLevel;a.modify("move",t,"character");let x=i.depth?r.docView.domAfterPos(i.before()):r.dom,{focusNode:E,focusOffset:P}=r.domSelection();J(x);let b=E&&!x.contains(E.nodeType==1?E:E.parentNode)||l==E&&c==P;try{J(d),a.collapse(d,f),l&&(l!=d||c!=f)&&a.extend&&a.extend(l,c)}catch{}return g!=null&&(a.caretBidiLevel=g),b})}let jD=null,VD=null,WD=!1;function CK(r,e,t){return jD==e&&VD==t?WD:(jD=e,VD=t,WD=t=="up"||t=="down"?PK(r,e,t):DK(r,e,t))}class OK extends zt{constructor(t,i,s,n,o){super();u(this,"focused",!1);u(this,"input",new lK);u(this,"state");u(this,"domObserver");u(this,"nodeViews",Object.create(null));u(this,"docView");u(this,"_props");u(this,"directPlugins");this.dom=t,this.root=i,this.domState=s,this.updater=n,this._props=o,this.directPlugins=o.plugins||[],this.state=o.state,this.dispatch=this.dispatch.bind(this),this.docView=this._register(dK(this.state.doc,$D(this),HD(),this.dom,this)),this.domObserver=this._register(new SK(this)),this.domObserver.start(),this._register(this.updater.onAfterMutation(()=>{this.updateStateAfterMutation()}))}get composing(){return this.input.composing}hasFocus(){return this.domState.hasFocus()}domSelection(){return this.root.getSelection()}dispatch(t){this.updateState(this.state.apply(t))}someProp(t,i){let s=this._props&&this._props[t],n;if(s!=null&&(n=i?i(s):s))return n;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[t];if(l!=null&&(n=i?i(l):l))return n}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let l=o[a].props[t];if(l!=null&&(n=i?i(l):l))return n}}updateStateAfterMutation(){let t=this.state;t.storedMarks&&this.composing&&BD(this),this.input.mouseDown?(Cw(this,t.selection),this.domObserver.setCurSelection()):Ay(this,!0),this.domObserver.start()}updateState(t){let i=this.state,s=!1;t.storedMarks&&this.composing&&(BD(this),s=!0),this.state=t;let n=HD(),o=$D(this),a=!this.docView.matchesNode(t.doc,o,n);if((a||!t.selection.eq(i.selection))&&(s=!0),a&&(this.docView.update(t.doc,o,n,this)||et()),s){this.domObserver.stop();let l=a&&(rk||pv)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&YW(i.selection,t.selection);l||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection()))?Ay(this,l):(Cw(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}}posAtCoords(t){return bK(this)}endOfTextblock(t,i){return CK(this,i||this.state,t)}}function $D(r){return[fa.node(0,r.state.doc.content.size,{})]}function D2(r){return!!r.IsText()}function C2(r){return r.IsElement()&&r.firstChild&&D2(r.firstChild)}function NK(r){return r.IsElement()&&r.firstChild&&C2(r.firstChild)}function IK(r){return J(r.IsText()),r.parentNode.parentNode}class FK extends h1{constructor(){super(...arguments);u(this,"_editorView");u(this,"anchorY");u(this,"anchorX");u(this,"_textAreaHandler");u(this,"_paragraphContainerId");u(this,"_paragraphId")}get id(){return Fc}activate(){this.canvas.view.setHitTestLevel(Bd.InlineBox)}deactivate(){this.canvas.view.setHitTestLevel(Bd.BlockBox),this._disposeEditor(),this.canvas.view.focus()}processEvent(t){const i=t.asMouseInputEvent(),{type:s}=t;s===Jt.MOUSE_ENTER&&(jn(i),this.handleMouseEnter(i),t.accept()),s===Jt.MOUSE_DOWN&&(jn(i),this.handleMouseDown(i),t.accept()),s===Jt.DBLCLICK&&(J(i),this.handleDBClick(i),t.accept()),s===Jt.DRAG&&(jn(i),this.handleDrag(i),t.accept()),s===Jt.DROP&&(jn(i),this.handleDrop(i),t.accept())}handleDBClick(t){this._handleClick(t,{startOnEmpty:!0})}handleMouseEnter(t){const{node:i}=Qs(t.targetPath);jn(i),D2(i)||C2(i)?this.useCursor(Gi.text):this.useCursor(Gi.arrow)}handleMouseDown(t){this._handleClick(t,{exitOnEmpty:!0})}handleDrag(t){this._updateSelection(t)}handleDrop(t){}_handleClick(t,i){var o,a;this.anchorX=t.clientX,this.anchorY=t.clientY;let s=this.canvas.view.document.getSelection().anchorNode;(o=this._editorView)==null||o.domObserver.stop(),this._updateSelection(t),(a=this._editorView)==null||a.domObserver.start();let n=this.canvas.view.document.getSelection().anchorNode;if(!s&&!n){i.startOnEmpty&&this._addTextBlock(t);return}if(s&&!n){J(this._editorView),this._disposeEditor(),i.exitOnEmpty&&this.canvas.invokeWithinContext(l=>{l.get(wu).switchDefault()});return}if(!s&&n){J(!this._editorView),this._initEditor(n);return}if(s&&n){if(J(this._editorView),s===n){this._editorView.domObserver.flush();return}const l=di.CommonAncestor(s,n);if(J(l),l===s){this._editorView.domObserver.flush();return}if(NK(l)){this._editorView.domObserver.flush();return}this._disposeEditor(),this._initEditor(n);return}et()}_disposeEditor(){if(this._editorView&&(this._editorView.dispose(),this._editorView=void 0),this._textAreaHandler&&(this._textAreaHandler.dispose(),this._textAreaHandler=void 0),this._paragraphId){const t=this.canvas.model.getNodeById(this._paragraphId);J(t),TS(t)||this.canvas.transform(s=>{s.removeNode({ref:this._paragraphContainerId,direction:Ui.self})})}this._paragraphId=void 0,this._paragraphContainerId=void 0}_triggerEndEditing(){this._disposeEditor(),this.canvas.view.document.getSelection().removeAllRanges(),this.canvas.invokeWithinContext(t=>{t.get(wu).switchDefault()})}_updateSelection(t){const i=this.anchorX,s=this.anchorY,{clientX:n,clientY:o}=t;if(i===n&&s===o)return this._updateCollapsedSelect(t);const a=s<=o,l=a?i:n,c=a?s:o,d=a?n:i,f=a?o:s,g=this.canvas.view.document.getSelection(),x=this.canvas.view.layoutManager.hitTestRTree(i,s,i,s);if(!x.length){g.removeAllRanges();return}const P=x[0].box.node,b=IK(P),C=Array.from(b.childNodes).filter(R=>R==null?void 0:R.IsElement()).map(R=>{const L=this.canvas.view.layoutManager.getParagraphOfNode(R.firstChild);return this.canvas.view.layoutManager.getRTreeItemsByParagraph(L)}).flat().sort((R,L)=>R.minY<L.minY?-1:1);let O,N;for(let R of C)R.minY<=c&&R.maxY>=c&&(O=R),R.minY<=f&&(N=R);O||(O=C[0]),J(O),J(N);let j;if(c<=O.minY)j=O.box.GetTextStartPosition();else{const R=O.minX,L=O.maxX;l>=L?j=O.box.GetTextEndPosition():l<=R?j=O.box.GetTextStartPosition():j=O.box.GetTextPositionAtVisualLocation(l-R)}let I;if(f>=N.maxY)I=N.box.GetTextEndPosition();else{const R=N.maxX,L=N.minX;d>=R?I=N.box.GetTextEndPosition():d<L?I=N.box.GetTextStartPosition():I=N.box.GetTextPositionAtVisualLocation(d-L)}const M=this.canvas.view.document.createRange();a?(M.setStart(O.box.node,j),M.setEnd(N.box.node,I)):(M.setStart(N.box.node,I),M.setEnd(O.box.node,j)),g.addRange(M),g.anchorOffset<0&&et(),g.focusOffset<0&&et()}_updateCollapsedSelect(t){const{clientX:i,clientY:s}=t,{targetPath:n}=t,a=Qs(n).node;let l=i,c=i;if(a.IsElement()){const O=a.AsElement();if(O.tagName===no.kTagName){const N=O.getBoundingClientRects();l=Math.min(N.left,i),c=Math.max(N.right,i)}}const d=this.canvas.view.document.getSelection(),f=this.canvas.view.layoutManager.hitTestRTree(l,s,c,s);if(!f.length){d.removeAllRanges();return}const g=f[0],x=g.minX,E=g.maxX,P=i-x;let b;P<=0?b=g.box.GetTextStartPosition():i>=E?b=g.box.GetTextEndPosition():b=g.box.GetTextPositionAtVisualLocation(P);const D=g.box.node,C=this.canvas.view.document.createRange();C.setStart(D,b),C.setEnd(D,b),d.addRange(C)}_initEditor(t){J(t.IsText());const i=t.parentElement.parentElement,s=i.getAttribute(Ac),n=TN(i);J(s);const o=this.canvas.viewModel.getViewModelNodeById(nx.create(s,n));J(o);const a=this.canvas.view.document,l=Array.from(a.body().childNodes).find(c=>c&&c.IsElement()&&c.getAttribute(Ac)===s);J(l),this._editorView=new OK(l.AsElement().AsHTMLElement(),a,{hasFocus:()=>this._textAreaHandler.isFocused()},new lW(this.canvas),{state:$p.create({doc:va.fromJSON($$,o)}),plugins:[V$(c$)]}),this._editorView.domObserver.flush(),Reflect.set(window,"pm",this._editorView),this._textAreaHandler=new z$(new oK(this._editorView,this._triggerEndEditing.bind(this)),this.canvas.view),document.body.append(this._textAreaHandler.textArea.domNode,this._textAreaHandler.textAreaCover.domNode),this._textAreaHandler.focusTextArea()}async _addTextBlock(t){const{clientX:i,clientY:s}=t;let n="",o="";this.canvas.transform(()=>{let g=Js(MK);Object.assign(g.style,{borderColor:w5(),marginTop:sy(s-10-10),marginLeft:sy(i-10)});const x=this.canvas.model.addNode({ref:nd,direction:Ui.inward},g);this._paragraphContainerId=mo(x),n=this._paragraphContainerId;const E=this.canvas.model.addNode({ref:this._paragraphContainerId,direction:Ui.inward},Js(BK));o=mo(E),this._paragraphId=o}),await this.canvas.mvvm.maybeWaitForReLayout(),J(this._paragraphContainerId===n);const{document:a}=this.canvas.view,l=a.getElementById(o),c=a.getSelection();J(l);const d=l.firstChild;J(d);const f=a.createRange();f.setStart(d,0),f.setEnd(d,0),c.addRange(f),J(!this._editorView),this._initEditor(d)}}const MK={type:oi.Block,style:{display:"block",width:"auto",height:"auto",marginLeft:"50px",marginTop:"100px",position:"absolute",backgroundColor:"white",padding:"10px",borderStyle:"solid",borderWidth:"1px"}},BK={type:oi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:"nowrap"},content:""},Fc="tool.text";class LK extends TA{isDoubleClickShortcut(){return!0}}class UK{constructor(){u(this,"id",Fc);u(this,"shortcut",new LK)}createTool(e){return new FK(e,Gi.text)}}class uk{constructor(...e){u(this,"_entries",new Map);for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}dispose(){for(const[e,t]of this._entries){if(e!==pl&&!(t instanceof Md)){const i=Reflect.get(t,"dispose");AA(i)&&i.call(t)}this._entries.delete(e)}}}class GK{static negate(e){return{x:-e.x,y:-e.y}}}class ky{static parse(e){let t,i=parseFloat;if(t=/matrix\s*\((.+)\)/i.exec(e)){let n=t[1].split(",");return n.length!=6&&(n=t[1].split(" ")),{a:i(n[0]),b:i(n[1]),c:i(n[2]),d:i(n[3]),tx:i(n[4]),ty:i(n[5])}}throw new Error("500")}static get Identity(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}}static translate(e,t){let i=e.tx+t.x,s=e.ty+t.y;return{...e,tx:i,ty:s}}static scale(e,t,i){let s=i?ky.translate(e,i):{a:e.a,b:e.b,c:e.c,d:e.d,tx:e.tx,ty:e.ty};return s.a*=t.x,s.b*=t.x,s.c*=t.y,s.d*=t.y,i&&(s=ky.translate(s,GK.negate(i))),s}}class zK{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.width=i,this.height=s}}Wc.some;var Kp=(r=>(r[r.Unknown=0]="Unknown",r[r.Canvas=1]="Canvas",r))(Kp||{});class HK{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}}class jK{constructor(e,t){this.x=e,this.y=t}}class VK{constructor(e,t){this.x=e,this.y=t}}class O2 extends hO{constructor(t,i,s,n){super(t);u(this,"isFromPointerCapture");u(this,"pos");u(this,"editorPos");u(this,"relativePos");this.isFromPointerCapture=i,this.pos=new jK(this.posx,this.posy),this.editorPos=$K(s),this.relativePos=KK(n,this.editorPos,this.pos)}}class WK{constructor(e){this.viewHelper=e}_create(e){return new O2(e,!1,this.viewHelper.viewDomNode,this.viewHelper.getTransform())}onContextMenu(e,t){return Vn(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return Vn(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return Vn(e,Cs.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return Vn(e,Cs.POINTER_DOWN,i=>{t(this._create(i),i.pointerType,i.pointerId)})}onMouseLeave(e,t){return Q8(e,i=>{t(this._create(i))})}onMouseMove(e,t){return Vn(e,Cs.MOUSE_MOVE,i=>{t(this._create(i))})}}function $K(r){const e=r5(r);return new HK(e.left,e.top,e.width,e.height)}function KK(r,e,t){const i=r.a,s=r.d,n=(t.x-e.x)/i-r.tx,o=(t.y-e.y)/s-r.ty;return new VK(n,o)}class XK{constructor(){u(this,"_hooks",new pa);u(this,"_pointerMoveEventMerger",null);u(this,"_pointerMoveCallback",null);u(this,"_onStopCallback",null)}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveEventMerger=null,this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveEventMerger}startMonitoring(e,t,i,s,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveEventMerger=s,this._pointerMoveCallback=n,this._onStopCallback=o;try{e.setPointerCapture(t),this._hooks.add(sn(()=>{e.releasePointerCapture(t)}))}catch{}this._hooks.add(q8(e,Cs.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}this._pointerMoveCallback(a)},(a,l)=>this._pointerMoveEventMerger(a,l))),this._hooks.add(Vn(e,Cs.POINTER_UP,a=>this.stopMonitoring(!0,a)))}}class YK extends zt{constructor(t){super();u(this,"_globalPointerMoveMonitor");u(this,"_keydownListener");this.viewHelper=t,this._globalPointerMoveMonitor=this._register(new XK),this._keydownListener=null}get _editorViewDomNode(){return this.viewHelper.viewDomNode}startMonitoring(t,i,s,n,o,a){this._keydownListener=QS(document,"keydown",c=>{c.toKeybinding().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,c.browserEvent)},!0);const l=(c,d)=>n(c,new O2(d,!0,this._editorViewDomNode,this.viewHelper.getTransform()));this._globalPointerMoveMonitor.startMonitoring(t,i,s,l,o,c=>{this._keydownListener.dispose(),a(c)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class qK{constructor(e,t=[]){u(this,"type");u(this,"targetPath");this.type=e,this.targetPath=t}}class QK{constructor(e){u(this,"_viewHelper");this._viewHelper=e}}class ck{constructor(e,t,i){u(this,"_ctx");u(this,"result");u(this,"target");u(this,"targetPath",[]);u(this,"pos");this.pos=t,this._ctx=e,this.target=i}fulfill(e){let t=this.targetPath.splice(0);return this.result&&t.push(...this.result.map(i=>NA.fromVirtualDOMNode(i.node))),new qK(e,t)}withResult(e){let t=new ck(this._ctx,this.pos,this.target);return t.result=e,t}}class JK{constructor(e){u(this,"_viewHelper");this._viewHelper=e}createMouseTarget(e,t,i){const s=new QK(this._viewHelper),n=new ck(s,e,t);return this._createMouseTarget(s,n,!1,i)}_createMouseTarget(e,t,i,s){t.target||ze();const n=t;let o=null;return o=o||this._hitTestCanvas(n,s),Ti(o)&&(o=t.fulfill(Kp.Unknown)),o}_hitTestCanvas(e,t){const i=this._viewHelper.hitTest(e.pos.x,e.pos.y,t);return i.length>0?e.withResult(i).fulfill(Kp.Canvas):e.fulfill(Kp.Canvas)}}function ZK(){return function(r,e){return e.preventDefault(),e}}const ET=class extends zt{constructor(t,i){super();u(this,"viewController");u(this,"viewHelper");u(this,"mouseTargetFactory");u(this,"_mouseDownOperation");u(this,"lastMouseLeaveTime");u(this,"mousePressed",!1);u(this,"multiClickCount",0);u(this,"lastClickTimeStamp",0);u(this,"lastClickPosX");u(this,"lastClickPosY");u(this,"lastMouseMoveTarget");u(this,"lastEmittedMouseEnter");u(this,"enterLeaveCounter",0);u(this,"lastEmittedMouseDownButtons",0);this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new JK(i),this._mouseDownOperation=this._register(new eX(this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,{hitTestLevel:i.getHitTestLevel(Jt.DRAG)}),()=>this.mousePressed=!1)),this.lastMouseLeaveTime=-1;const s=new WK(this.viewHelper);this._register(s.onMouseMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o)));let n=0;this._register(Vn(this.viewHelper.viewDomNode,Cs.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,n))),this._register(QS(this.viewHelper.viewDomNode,Cs.KEY_DOWN,this._onKeyDown.bind(this))),this._register(QS(this.viewHelper.viewDomNode,Cs.KEY_UP,this._onKeyUp.bind(this))),this._register(Vn(this.viewHelper.viewDomNode,Cs.WHEEL,this._onMouseWheel.bind(this),{capture:!0,passive:!1}))}_createMouseTarget(t,i){return this.mouseTargetFactory.createMouseTarget(t.pos,t.target,i)}_onContextMenu(t,i){ze()}_onMouseMove(t){if(this._mouseDownOperation.isActive())return;const i=this._createMouseTarget(t,{hitTestLevel:this.viewHelper.getHitTestLevel(Jt.MOUSE_MOVE)});if(i.type!==Kp.Unknown){if(this.lastEmittedMouseEnter){const s=i.targetPath,n=this.lastEmittedMouseEnter.targetPath,o=Qs(s).node,a=Qs(n).node;o&&o!==a&&(this.viewController.emitMouseLeave(us(Jt.MOUSE_LEAVE,t,this.lastEmittedMouseEnter)),this.enterLeaveCounter--,this.viewController.emitMouseEnter(us(Jt.MOUSE_ENTER,t,i)),this.enterLeaveCounter++,this.lastEmittedMouseEnter=i)}else this.viewController.emitMouseEnter(us(Jt.MOUSE_ENTER,t,i)),this.enterLeaveCounter++,this.lastEmittedMouseEnter=i;this.enterLeaveCounter>1&&et(),this.viewController.emitMouseMove(us(Jt.MOUSE_MOVE,t,i)),this.lastMouseMoveTarget=i}else this._handleMouseLeave(t)}_handleMouseLeave(t){this.lastEmittedMouseEnter&&(this.viewController.emitMouseLeave(us(Jt.MOUSE_LEAVE,t,this.lastEmittedMouseEnter)),this.enterLeaveCounter--,this.lastMouseMoveTarget=void 0,this.lastEmittedMouseEnter=void 0)}_onMouseUp(t){let i=this._createMouseTarget(t,{hitTestLevel:this.viewHelper.getHitTestLevel(Jt.MOUSE_UP)});this.mousePressed=!1;const s=t.browserEvent.pageX,n=t.browserEvent.pageY;switch(Bx(this.lastClickPosX)&&Bx(this.lastClickPosY)&&((Math.abs(s-this.lastClickPosX)>5||Math.abs(n-this.lastClickPosY)>5)&&(this.multiClickCount=0),this.lastClickPosX=s,this.lastClickPosY=n),this.multiClickCount&&t.timestamp-this.lastClickTimeStamp<ET.DoubleClickInterval?this.multiClickCount++:(this.lastClickTimeStamp=t.timestamp,this.multiClickCount=1),this.multiClickCount){case 1:this.viewController.emitMouseUp(us(Jt.MOUSE_UP,t,i,this.lastEmittedMouseDownButtons));break;case 2:this.viewController.emitMouseUp(us(Jt.MOUSE_UP,t,i,this.lastEmittedMouseDownButtons)),this.viewController.emitDbClick(us(Jt.DBLCLICK,t,i,this.lastEmittedMouseDownButtons));break;default:this.multiClickCount=0;break}}createKeyboardEvent(t,i){return new eL(t,i)}_onMouseDown(t,i){this.mousePressed&&_i();const s=this._createMouseTarget(t,{hitTestLevel:this.viewHelper.getHitTestLevel(Jt.MOUSE_DOWN)});this.viewController.emitMouseDown(us(Jt.MOUSE_DOWN,t,s)),t.preventDefault(),this._mouseDownOperation.start(s.type,t,i),this.mousePressed=!0,this.lastEmittedMouseDownButtons=t.buttons}_onMouseWheel(t){this.viewController.emitMouseWheel(new ZB(t))}_onKeyDown(t){this.viewController.emitKeyDown(this.createKeyboardEvent(Jt.KEY_DOWN,t))}_onKeyUp(t){this.viewController.emitKeyUp(this.createKeyboardEvent(Jt.KEY_UP,t))}};let yp=ET;u(yp,"MOUSE_MOVE_MINIMUM_TIME",100),u(yp,"DoubleClickInterval",400);class eX extends zt{constructor(t,i,s,n){super();u(this,"_viewController");u(this,"_viewHelper");u(this,"_createMouseTarget");u(this,"_mouseMoveMonitor");u(this,"_mouseState");u(this,"_isActive");u(this,"_lastMouseEvent");u(this,"_lastMouseTarget");this._onCancelled=n,this._viewController=t,this._viewHelper=i,this._createMouseTarget=s,this._mouseMoveMonitor=this._register(new YK(this._viewHelper)),this._mouseState=new gx,this._isActive=!1,this._lastMouseEvent=null}isActive(){return this._isActive}_onMouseDownThenMove(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t),this._mouseState.isDragAndDrop?(this._lastMouseTarget=this._createMouseTarget(t,!0),this._viewController.emitMouseDrag(us(Jt.DRAG,t,this._lastMouseTarget)),this._viewController.emitMouseMove(us(Jt.MOUSE_MOVE,t,this._lastMouseTarget))):et()}start(t,i,s){this._lastMouseEvent=i,this._mouseState.setModifiers(i),this._mouseState.trySetCount(i.detail,{x:i.pos.x,y:i.pos.y}),i.detail=this._mouseState.count,!this._mouseState.altKey&&i.detail<2&&!this._isActive&&(this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._lastMouseTarget=this._createMouseTarget(i,!0),this._viewController.emitMouseDragStart(us(Jt.DRAG_START,i,this._lastMouseTarget)),this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewDomNode,s,i.buttons,ZK(),n=>this._onMouseDownThenMove(n),n=>{!n||n&&n instanceof KeyboardEvent?(this._viewController.emitMouseDropCanceled(us(Jt.DRAG_END,this._lastMouseEvent,this._lastMouseTarget,i.buttons)),this._onCancelled()):this._viewController.emitMouseDrop(us(Jt.DROP,this._lastMouseEvent,this._lastMouseTarget)),this._stop(),this._lastMouseTarget=void 0}))}_stop(){this._isActive=!1}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}}const ST=class{constructor(){u(this,"_altKey");u(this,"_ctrlKey");u(this,"_metaKey");u(this,"_shiftKey");u(this,"_leftButton");u(this,"_middleButton");u(this,"_lastMouseDownPosition");u(this,"_lastMouseDownPositionEqualCount");u(this,"_lastMouseDownCount");u(this,"_lastSetMouseDownCountTime");u(this,"isDragAndDrop");this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>ST.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition===t?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};let gx=ST;u(gx,"CLEAR_MOUSE_DOWN_COUNT_TIME",400);class tX{constructor(e,t){u(this,"handler");this.viewController=e,this.viewHelper=t,this.handler=new yp(e,t)}dispose(){this.handler&&this.handler.dispose()}}const Ky=class extends Rn{constructor(e){e?super(e,Ky.kTagName):super(Ky.kTagName)}};let wd=Ky;u(wd,"kTagName","div");class rX extends zt{constructor(e,t){super(),this.view=e,this.mvvm=t;const i=e.document.getSelection();this._register(i.onDidChange(async()=>{await this.mvvm.maybeWaitForReLayout(),this._updateSelectionDisplay()}))}_updateSelectionDisplay(){const e=this.view.document.getSelection();if(e.ranges.length){this.view.setCursor(Gi.text);const t=e.getRangeAt(0);t||et();const i=t.endContainer(),s=t.endOffset();if(i.IsElement())if(i.tagName===no.kTagName){J(s===0||s===1);const n=i.GetLayoutObject(),{box:o}=n,a=o.GetBorderBoxFromRoot(!1);this.view.drawCursor({blockStart:a.x().toFloat(),inlineSize:a.height().toFloat(),inlineStart:a.y().toFloat()})}else if(i.tagName===wd.kTagName){const n=i.childNodes[s-1];if(n||et(),J(n==null?void 0:n.IsElement()),n.firstChild&&n.firstChild.IsText()){const o=n.firstChild,a=this.view.layoutManager.getParagraphOfNode(o);a||et();const l=this.view.layoutManager.getRTreeItemsByParagraph(a),d=Qs(l).box,f=d.GetTextEndPosition(),g=d.RectOfSlice(f,f);this.view.drawCursor({blockStart:g.x,inlineSize:g.height,inlineStart:g.y})}else{const o=n.GetLayoutObject(),{box:a}=o,l=a.GetBorderBoxFromRoot(!1);this.view.drawCursor({blockStart:l.x().toFloat(),inlineSize:l.height().toFloat(),inlineStart:l.y().toFloat()})}}else ze();else if(i.IsText()){const n=this.view.layoutManager.getParagraphOfNode(i);n||et();const o=this.view.layoutManager.getRTreeItemsByParagraph(n);for(let a of o){const l=a.box,c=l.GetTextStartPosition(),d=l.GetTextEndPosition();if(c>s||d<s)continue;const f=l.RectOfSlice(s,s);this.view.drawCursor({blockStart:f.x,inlineSize:f.height,inlineStart:f.y});break}}else ze()}else this.view.setCursor(Gi.arrow),this.view.drawCursor(void 0)}}const ws=window.devicePixelRatio||1;class iX{constructor(e){u(this,"size_");u(this,"surface_");this.size_=new tl(e.width,e.height),this.surface_=gr.MakeCanvasSurface(e)}get surface(){return this.surface_}GetSize(){return this.size_}}class nX{}class sX{}class Mw{constructor(e=0,t=0,i=0,s=0){u(this,"ascent_");u(this,"descent_");u(this,"leading_");u(this,"x_height_");this.ascent_=e,this.descent_=t,this.leading_=i,this.x_height_=s}ascent(){return this.ascent_}descent(){return this.descent_}leading(){return this.leading_}x_height(){return this.x_height_}em_box_height(){return this.ascent_+this.descent_+this.leading_}baseline_offset_from_top(){return this.ascent_+this.leading_/2}}var go=(r=>(r[r.kThinWeight=100]="kThinWeight",r[r.kExtraLightWeight=200]="kExtraLightWeight",r[r.kLightWeight=300]="kLightWeight",r[r.kNormalWeight=400]="kNormalWeight",r[r.kMediumWeight=500]="kMediumWeight",r[r.kSemiBoldWeight=600]="kSemiBoldWeight",r[r.kBoldWeight=700]="kBoldWeight",r[r.kExtraBoldWeight=800]="kExtraBoldWeight",r[r.kBlackWeight=900]="kBlackWeight",r))(go||{}),Bw=(r=>(r[r.kUprightSlant=0]="kUprightSlant",r[r.kItalicSlant=1]="kItalicSlant",r))(Bw||{});class N2{constructor(e=400,t=0){u(this,"weight");u(this,"slant");this.weight=e,this.slant=t}}class oX{}class rn{constructor(e=0,t=0){u(this,"x_");u(this,"y_");this.x_=e,this.y_=t}SetVector(e,t){this.x_=e,this.y_=t}x(){return this.x_}set_x(e){this.x_=e}y(){return this.y_}set_y(e){this.y_=e}IsZero(){return this.x_==0&&this.y_==0}Add(e){return this.x_+=e.x_,this.y_+=e.y_,this}Subtract(e){this.x_-=e.x_,this.y_-=e.y_}get 0(){return this.x_}get 1(){return this.y_}SetToMin(e){this.x_=this.x_<=e.x_?this.x_:e.x_,this.y_=this.y_<=e.y_?this.y_:e.y_}SetToMax(e){this.x_=this.x_>=e.x_?this.x_:e.x_,this.y_=this.y_>=e.y_?this.y_:e.y_}LengthSquared(){return this.x_*this.x_+this.y_*this.y_}Length(){return Math.sqrt(this.LengthSquared())}Scale(e,t){if(Ti(t))return this.Scale(e,e);this.x_*=e,this.y_*=t}SUB_ASSIGN(e){this.Subtract(e)}ADD_ASSIGN(e){this.Add(e)}CLONE(){return new rn(this.x(),this.y())}}class Ty{constructor(e,t,i,s){u(this,"size_");u(this,"origin_");if(arguments.length===0)this.size_=new el,this.origin_=new au;else if(arguments.length===1)if(e instanceof au)this.origin_=e.CLONE(),this.size_=new el;else if(e instanceof Ty){let n=e.CLONE();this.origin_=new au(n.origin_),this.size_=new el(n.size_)}else this.origin_=new au,this.size_=e.CLONE();else arguments.length==2?(this.origin_=e.CLONE(),this.size_=t.CLONE()):(this.origin_=new au(e,t),this.size_=new el(i,s))}x(){return this.origin_.x()}set_x(e){this.origin_.set_x(e)}y(){return this.origin_.y()}set_y(e){this.origin_.set_y(e)}width(){return this.size_.width()}set_width(e){this.size_.set_width(e)}height(){return this.size_.height()}set_height(e){this.size_.set_height(e)}origin(){return this.origin_}set_origin(e){this.origin_=e}size(){return this.size_}set_size(e){this.size_=e}right(){return this.x()+this.width()}bottom(){return this.y()+this.height()}IsEmpty(){return this.size_.IsEmpty()}Union(e){if(this.IsEmpty()){this.size_=e.size_.CLONE(),this.origin_=e.origin_.CLONE();return}if(e.IsEmpty())return;let t=Math.min(this.x(),e.x()),i=Math.min(this.y(),e.y()),s=Math.max(this.right(),e.right()),n=Math.max(this.bottom(),e.bottom());this.SetRect(t,i,s-t,n-i)}SetRect(e,t,i,s){this.origin_.SetPoint(e,t),this.set_width(i),this.set_height(s)}Offset(e){this.origin_.ADD(e)}Inset(e,t,i,s){let n,o,a,l;arguments.length===4?(n=e,a=t,o=i,l=s):(n=o=e,a=l=t),this.origin_.ADD(new rn(n,a)),this.set_width(Math.max(this.width()-n-o,0)),this.set_height(Math.max(this.height()-a-l,0))}Outset(e,t){this.Inset(-e,-t)}CLONE(){return new Ty(this.origin_.CLONE(),this.size_.CLONE())}Scale(e){this.origin().Scale(e),this.size().Scale(e)}}class lr extends Ty{static fromRectLayoutUnit(e){const t=e.origin(),i=e.size();return new lr(t.x().toFloat(),t.y().toFloat(),i.width().toFloat(),i.height().toFloat())}}const aX=.56;class I2 extends oX{constructor(t,i){super();u(this,"sk_font_");this.typeface_=t,this.size_=i}GetTypefaceId(){return this.typeface_.GetId()}GetFontMetrics(){let i=this.GetSkFont().getMetrics(),s;return s=i.ascent*aX,new Mw(-i.ascent,i.descent,i.leading,s)}GetGlyphForCharacter(t){return this.typeface_.GetGlyphForCharacter(t)}GetGlyphBounds(t){let s=this.GetSkFont().getGlyphBounds([t],null),n=s[0],o=s[1],a=s[2],l=s[3],c=a-n,d=l-o;return new lr(0,-o,c,d)}GetGlyphWidth(t){return this.GetSkFont().getGlyphWidths([t],null)[0]}GetSkFont(){if(!this.sk_font_){const t=new gr.Font(this.typeface_.GetSkTypeface(),this.size_);t.setSubpixel(!0),t.setLinearMetrics(!0),this.sk_font_=t}return this.sk_font_}}u(I2,"kPrimaryPageSize",256);class F2 extends sX{constructor(e){super(),this.typeface_=e}CreateFontWithSize(e){return new I2(this,e)}GetGlyphForCharacter(e){return this.typeface_.getGlyphIDs(String.fromCodePoint(e))[0]}GetSkTypeface(){return this.typeface_}GetId(){return 255}GetEstimatedSizeInBytes(){ze()}}u(F2,"kPrimaryPageSize",256);class lX extends zt{constructor(t){super();u(this,"bounds_");this.bounds_=t}GetBounds(){return this.bounds_}}class uX extends lX{constructor(t,i,s){super(t);u(this,"text_blob_");this.chars_=i,this.text_blob_=s}GetTextBlob(){return this.text_blob_}dispose(){}}const cX=8301,hX=8299,dX=1564,fX=13,_X=8296,pX=12,gX=9,mX=8300,xX=8298,yX=8234,Lw=8294,vX=8206,EX=8302,SX=8303,M2=10,B2=160,L2=65532,wX=8236,mx=8297,U2=8295,AX=8207,bX=8238,kX=173,C0=32,TX=8205,PX=65279,RX=8204,hk=8203;function DX(r){return r==C0||r==gX||r==M2||r==pX||r==fX||r==B2}function CX(r){if(OX(r))return!0;switch(r){case cX:case hX:case dX:case _X:case mX:case xX:case Lw:case EX:case SX:case wX:case mx:case U2:case kX:case RX:case TX:return!0}return!1}function OX(r){return r<32||r>=127&&r<160||r==hk||r>=vX&&r<=AX||r>=yX&&r<=bX||r==PX||r==L2||NX(r)}function NX(r){return r>=127995&&r<=127999}function IX(r){return DX(r)?C0:CX(r)?hk:r}const Uw=0;class FX{constructor(){u(this,"min_y_",Number.MAX_SAFE_INTEGER);u(this,"max_y_",Number.MIN_SAFE_INTEGER)}IncludeRange(e,t){this.min_y_=Math.min(this.min_y_,e),this.max_y_=Math.max(this.max_y_,t)}GetY(){return this.IsValid()?this.min_y_:0}GetHeight(){return this.IsValid()?this.max_y_-this.min_y_:0}IsValid(){return this.max_y_>=this.min_y_}}class MX{constructor(){u(this,"skia");u(this,"local_text_buffer_size_",0);u(this,"local_text_buffer_",0);this.skia=gr}CreateGlyphBuffer(e,t,i,s,n,o){let{maybe_bounds:a,text_blob:l,chars:c}=this.ShapeText(e,t,i,s,n,o,[]);return new uX(a,c,l)}GetTextWidth(e,t,i,s,n,o,a=[]){let{maybe_bounds:l}=this.ShapeText(e,t,i,s,n,o,a,!1);return l.width()}ShapeText(e,t,i,s,n,o,a=[],l=!0){let{text_blob:c,chars:d,maybe_vertical_bounds:f,current_width:g}=this.ShapeSimpleRunWithDirection(e,t,i,n,o,a,l),x=new lr(0,f.GetY(),g,f.GetHeight());return{text_blob:c,chars:d,maybe_bounds:x}}ShapeSimpleRunWithDirection(e,t,i,s,n,o=[],a=!0){if(s)ze(),this.EnsureLocalTextBufferHasSize(i);else{let l=[],c=new FX,{text_blob:d,chars:f,current_width:g}=this.ShapeSimpleRun(e,t,i,n,c,l,0,a);return{text_blob:d,chars:f,current_width:g,maybe_vertical_bounds:c}}}ShapeSimpleRun(e,t,i,s,n,o,a=0,l=!0){let c,d=[],f="";for(let x=0;x<i;x++){const E=e.charAt(x+t);let P=IX(E),b=Uw;if(P==hk)continue;let{font:D,glyph_index:C}=s.GetCharacterFont(P),O=D;b=C,d.length>0&&c!=O&&et(),f+=String.fromCodePoint(P);let N=O.GetGlyphBounds(b),j=O.GetGlyphWidth(b);a+=j,n&&n.IncludeRange(N.y(),N.bottom()),c=O,d.push(b)}let g;return d.length>0&&(J(c),o&&BX(c,o),l&&(g=this.MakeTextBlob(d,c))),{text_blob:g,chars:f,current_width:a}}MakeTextBlob(e,t){return this.skia.TextBlob.MakeFromGlyphs(e,t.GetSkFont())}EnsureLocalTextBufferHasSize(e){this.local_text_buffer_size_<e&&(this.local_text_buffer_size_=e,this.local_text_buffer_=0)}}function BX(r,e){!e||!r||e.includes(r)||e.push(r)}var lf=(r=>(r[r.kPixelFormatRGBA8=0]="kPixelFormatRGBA8",r[r.kPixelFormatBGRA8=1]="kPixelFormatBGRA8",r[r.kPixelFormatUYVY=2]="kPixelFormatUYVY",r[r.kPixelFormatY8=3]="kPixelFormatY8",r[r.kPixelFormatU8=4]="kPixelFormatU8",r[r.kPixelFormatV8=5]="kPixelFormatV8",r[r.kPixelFormatUV8=6]="kPixelFormatUV8",r[r.kPixelFormatInvalid=7]="kPixelFormatInvalid",r))(lf||{});function G2(r){switch(r){case 0:return 4;case 1:return 4;case 3:return 1;case 4:return 1;case 5:return 1;case 6:return 2;case 2:case 7:et()}return-1}var du=(r=>(r[r.kAlphaFormatPremultiplied=0]="kAlphaFormatPremultiplied",r[r.kAlphaFormatUnpremultiplied=1]="kAlphaFormatUnpremultiplied",r[r.kAlphaFormatOpaque=2]="kAlphaFormatOpaque",r))(du||{});class LX{constructor(e,t,i,s){this.size=e,this.pixel_format=t,this.alpha_format=i,this.pitch_in_bytes=s}}class UX{}class GX{GetEstimatedSizeInBytes(){return this.GetSize().width()*this.GetSize().height()*G2(0)}IsOpaque(){return!1}EnsureInitialized(){return!1}CanRenderInSkia(){return!0}}class z2 extends GX{static DCheckForPremultipliedAlpha(e,t,i,s){ze()}CanRenderInSkia(){return!0}}class mv extends z2{GetTypeId(){return rr(mv)}}class dk extends z2{GetTypeId(){return rr(dk)}IsOpaque(){return!0}}class H2 extends UX{constructor(t,i,s){super();u(this,"descriptor_");u(this,"pixel_data_",new Uint8Array);this.descriptor_=new LX(t,i,s,t.width()*G2(i))}GetDescriptor(){return this.descriptor_}GetMemory(){return this.pixel_data_}SetMemory(t){this.pixel_data_=t}}class zX extends mv{constructor(t,i){super();u(this,"owned_pixel_data_");u(this,"image_");u(this,"size_");u(this,"is_opaque_");t instanceof H2?(this.owned_pixel_data_=t.GetMemory().slice(),this.Initialize(this.owned_pixel_data_,t.GetDescriptor())):this.Initialize(t,i)}GetSize(){return this.size_}GetImage(){return this.image_}EnsureInitialized(){return!1}IsOpaque(){return this.is_opaque_}Initialize(t,i){this.is_opaque_=i.alpha_format==du.kAlphaFormatOpaque,this.size_=i.size,i.pixel_format==lf.kPixelFormatUV8?ze():this.image_=gr.MakeImageFromEncoded(t)}}const HX=""+new URL("Roboto-Regular.79e85140.ttf",import.meta.url).href,jX=""+new URL("SourceHanSansCN-Normal.cd1c5b9c.ttf",import.meta.url).href,j2="Roboto";class VX extends nX{constructor(){super();u(this,"init",new ty);u(this,"fontReady",new ty);u(this,"fontDatas",new Map);u(this,"text_shaper_");u(this,"typeface_map_",new Map);this.text_shaper_=new MX,this.LoadFont()}async LoadFont(){let i=await(await fetch(HX)).arrayBuffer();this.fontDatas.set("Roboto",i);let n=await(await fetch(jX)).arrayBuffer();this.fontDatas.set('"source han sans"',n),this.fontReady.open()}CreateGlyphBuffer(t,i,s,n,o,a){return this.text_shaper_.CreateGlyphBuffer(t,i,s,n,o,a)}GetCharacterFallbackTypeface(t,i,s){return this.GetDefaultTypeface()}GetTypeface(t=j2){if(!this.typeface_map_.has(t)){const i=this.fontDatas.get(t);let n=gr.FontMgr.RefDefault().MakeTypefaceFromData(i);const o=new F2(n);this.typeface_map_.set(t,o)}return this.typeface_map_.get(t)}GetLocalTypeface(t,i){return this.HasLocalFontFamily(t)||et(),this.GetTypeface(t)}GetDefaultTypeface(){return this.GetTypeface()}GetTextWidth(t,i,s,n,o,a,l=[]){return this.text_shaper_.GetTextWidth(t,i,s,n,o,a,l)}HasLocalFontFamily(t){return this.fontDatas.has(t)}DrawOffscreenImage(t){ze()}PixelFormatSupported(t){return t==lf.kPixelFormatRGBA8||t==lf.kPixelFormatUYVY}AllocateImageData(t,i,s){return J(this.PixelFormatSupported(i)),J(this.AlphaFormatSupported(s)),new H2(t,i,s)}AlphaFormatSupported(t){return t==du.kAlphaFormatPremultiplied||t==du.kAlphaFormatOpaque}CreateImage(t){let i=t;return new zX(i)}}function Gw(r){return r.type===oi.Block}function KD(r){return r.type===oi.Root}function WX(r){return r.type===oi.Text}function $X(r,e){const t=Object.create(null),i=r.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const KX=Object.assign,XX=Object.prototype.hasOwnProperty,xv=(r,e)=>XX.call(r,e),xu=Array.isArray,xx=r=>V2(r)==="[object Map]",YX=r=>typeof r=="string",fk=r=>typeof r=="symbol",yv=r=>r!==null&&typeof r=="object",qX=Object.prototype.toString,V2=r=>qX.call(r),QX=r=>V2(r).slice(8,-1),_k=r=>YX(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,W2=(r,e)=>!Object.is(r,e);let JX;function $2(r,e=JX){e&&e.active&&e.effects.push(r)}const K2=r=>{const e=new Set(r);return e.w=0,e.n=0,e},X2=r=>(r.w&Tu)>0,Y2=r=>(r.n&Tu)>0,ZX=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Tu},eY=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];X2(s)&&!Y2(s)?s.delete(r):e[t++]=s,s.w&=~Tu,s.n&=~Tu}e.length=t}},zw=new WeakMap;let vp=0,Tu=1;const Hw=30;let oa;const Mc=Symbol(""),jw=Symbol("");class tY{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,$2(this,i)}run(){if(!this.active)return this.fn();let e=oa,t=Bc;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=oa,oa=this,Bc=!0,Tu=1<<++vp,vp<=Hw?ZX(this):XD(this),this.fn()}finally{vp<=Hw&&eY(this),Tu=1<<--vp,oa=this.parent,Bc=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){oa===this?this.deferStop=!0:this.active&&(XD(this),this.onStop&&this.onStop(),this.active=!1)}}function XD(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}function rY(r,e){r.effect&&(r=r.effect.fn);const t=new tY(r);e&&(KX(t,e),e.scope&&$2(t,e.scope)),(!e||!e.lazy)&&t.run();const i=t.run.bind(t);return i.effect=t,i}function iY(r){r.effect.stop()}let Bc=!0;const q2=[];function nY(){q2.push(Bc),Bc=!1}function sY(){const r=q2.pop();Bc=r===void 0?!0:r}function lo(r,e,t){if(Bc&&oa){let i=zw.get(r);i||zw.set(r,i=new Map);let s=i.get(t);s||i.set(t,s=K2()),oY(s)}}function oY(r,e){let t=!1;vp<=Hw?Y2(r)||(r.n|=Tu,t=!X2(r)):t=!r.has(oa),t&&(r.add(oa),oa.deps.push(r))}function Pu(r,e,t,i,s,n){const o=zw.get(r);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&xu(r)){const l=Number(i);o.forEach((c,d)=>{(d==="length"||d>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":xu(r)?_k(t)&&a.push(o.get("length")):(a.push(o.get(Mc)),xx(r)&&a.push(o.get(jw)));break;case"delete":xu(r)||(a.push(o.get(Mc)),xx(r)&&a.push(o.get(jw)));break;case"set":xx(r)&&a.push(o.get(Mc));break}if(a.length===1)a[0]&&YD(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);YD(K2(l))}}function YD(r,e){const t=xu(r)?r:[...r];for(const i of t)i.computed&&qD(i);for(const i of t)i.computed||qD(i)}function qD(r,e){(r!==oa||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const aY=$X("__proto__,__v_isRef,__isVue"),Q2=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(fk)),lY=J2(),uY=J2(!0),QD=cY();function cY(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=qr(this);for(let n=0,o=this.length;n<o;n++)lo(i,"get",n+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(qr)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){nY();const i=qr(this)[e].apply(this,t);return sY(),i}}),r}function hY(r){const e=qr(this);return lo(e,"has",r),e.hasOwnProperty(r)}function J2(r=!1,e=!1){return function(i,s,n){if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&n===(r?e?TY:tF:e?kY:eF).get(i))return i;const o=xu(i);if(!r){if(o&&xv(QD,s))return Reflect.get(QD,s,n);if(s==="hasOwnProperty")return hY}const a=Reflect.get(i,s,n);return(fk(s)?Q2.has(s):aY(s))||(r||lo(i,"get",s),e)?a:Ep(a)?o&&_k(s)?a:a.value:yv(a)?r?rF(a):al(a):a}}const dY=fY();function fY(r=!1){return function(t,i,s,n){let o=t[i];if(Vw(o)&&Ep(o)&&!Ep(s))return!1;if(!r&&(!DY(s)&&!Vw(s)&&(o=qr(o),s=qr(s)),!xu(t)&&Ep(o)&&!Ep(s)))return o.value=s,!0;const a=xu(t)&&_k(i)?Number(i)<t.length:xv(t,i),l=Reflect.set(t,i,s,n);return t===qr(n)&&(a?W2(s,o)&&Pu(t,"set",i,s):Pu(t,"add",i,s)),l}}function _Y(r,e){const t=xv(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&Pu(r,"delete",e,void 0),i}function pY(r,e){const t=Reflect.has(r,e);return(!fk(e)||!Q2.has(e))&&lo(r,"has",e),t}function gY(r){return lo(r,"iterate",xu(r)?"length":Mc),Reflect.ownKeys(r)}const mY={get:lY,set:dY,deleteProperty:_Y,has:pY,ownKeys:gY},xY={get:uY,set(r,e){return!0},deleteProperty(r,e){return!0}},pk=r=>r,vv=r=>Reflect.getPrototypeOf(r);function Am(r,e,t=!1,i=!1){r=r.__v_raw;const s=qr(r),n=qr(e);t||(e!==n&&lo(s,"get",e),lo(s,"get",n));const{has:o}=vv(s),a=i?pk:t?mk:gk;if(o.call(s,e))return a(r.get(e));if(o.call(s,n))return a(r.get(n));r!==s&&r.get(e)}function bm(r,e=!1){const t=this.__v_raw,i=qr(t),s=qr(r);return e||(r!==s&&lo(i,"has",r),lo(i,"has",s)),r===s?t.has(r):t.has(r)||t.has(s)}function km(r,e=!1){return r=r.__v_raw,!e&&lo(qr(r),"iterate",Mc),Reflect.get(r,"size",r)}function JD(r){r=qr(r);const e=qr(this);return vv(e).has.call(e,r)||(e.add(r),Pu(e,"add",r,r)),this}function ZD(r,e){e=qr(e);const t=qr(this),{has:i,get:s}=vv(t);let n=i.call(t,r);n||(r=qr(r),n=i.call(t,r));const o=s.call(t,r);return t.set(r,e),n?W2(e,o)&&Pu(t,"set",r,e):Pu(t,"add",r,e),this}function eC(r){const e=qr(this),{has:t,get:i}=vv(e);let s=t.call(e,r);s||(r=qr(r),s=t.call(e,r)),i&&i.call(e,r);const n=e.delete(r);return s&&Pu(e,"delete",r,void 0),n}function tC(){const r=qr(this),e=r.size!==0,t=r.clear();return e&&Pu(r,"clear",void 0,void 0),t}function Tm(r,e){return function(i,s){const n=this,o=n.__v_raw,a=qr(o),l=e?pk:r?mk:gk;return!r&&lo(a,"iterate",Mc),o.forEach((c,d)=>i.call(s,l(c),l(d),n))}}function Pm(r,e,t){return function(...i){const s=this.__v_raw,n=qr(s),o=xx(n),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,c=s[r](...i),d=t?pk:e?mk:gk;return!e&&lo(n,"iterate",l?jw:Mc),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:a?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function Kl(r){return function(...e){return r==="delete"?!1:this}}function yY(){const r={get(n){return Am(this,n)},get size(){return km(this)},has:bm,add:JD,set:ZD,delete:eC,clear:tC,forEach:Tm(!1,!1)},e={get(n){return Am(this,n,!1,!0)},get size(){return km(this)},has:bm,add:JD,set:ZD,delete:eC,clear:tC,forEach:Tm(!1,!0)},t={get(n){return Am(this,n,!0)},get size(){return km(this,!0)},has(n){return bm.call(this,n,!0)},add:Kl("add"),set:Kl("set"),delete:Kl("delete"),clear:Kl("clear"),forEach:Tm(!0,!1)},i={get(n){return Am(this,n,!0,!0)},get size(){return km(this,!0)},has(n){return bm.call(this,n,!0)},add:Kl("add"),set:Kl("set"),delete:Kl("delete"),clear:Kl("clear"),forEach:Tm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=Pm(n,!1,!1),t[n]=Pm(n,!0,!1),e[n]=Pm(n,!1,!0),i[n]=Pm(n,!0,!0)}),[r,t,e,i]}const[vY,EY,SY,wY]=yY();function Z2(r,e){const t=e?r?wY:SY:r?EY:vY;return(i,s,n)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?i:Reflect.get(xv(t,s)&&s in i?t:i,s,n)}const AY={get:Z2(!1,!1)},bY={get:Z2(!0,!1)},eF=new WeakMap,kY=new WeakMap,tF=new WeakMap,TY=new WeakMap;function PY(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RY(r){return r.__v_skip||!Object.isExtensible(r)?0:PY(QX(r))}function al(r){return Vw(r)?r:iF(r,!1,mY,AY,eF)}function rF(r){return iF(r,!0,xY,bY,tF)}function iF(r,e,t,i,s){if(!yv(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const n=s.get(r);if(n)return n;const o=RY(r);if(o===0)return r;const a=new Proxy(r,o===2?i:t);return s.set(r,a),a}function Vw(r){return!!(r&&r.__v_isReadonly)}function DY(r){return!!(r&&r.__v_isShallow)}function qr(r){const e=r&&r.__v_raw;return e?qr(e):r}const gk=r=>yv(r)?al(r):r,mk=r=>yv(r)?rF(r):r;function Ep(r){return!!(r&&r.__v_isRef===!0)}function nF(r){if(Ev(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],s=O0(i)?IY(i):nF(i);if(s)for(const n in s)e[n]=s[n]}return e}else{if(O0(r))return r;if(Sv(r))return r}}const CY=/;(?![^(]*\))/g,OY=/:([^]+)/,NY=/\/\*.*?\*\//gs;function IY(r){const e={};return r.replace(NY,"").split(CY).forEach(t=>{if(t){const i=t.split(OY);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function sF(r){let e="";if(O0(r))e=r;else if(Ev(r))for(let t=0;t<r.length;t++){const i=sF(r[t]);i&&(e+=i+" ")}else if(Sv(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const FY=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},MY=Object.prototype.hasOwnProperty,BY=(r,e)=>MY.call(r,e),Ev=Array.isArray,O0=r=>typeof r=="string",Sv=r=>r!==null&&typeof r=="object",LY=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},UY=/-(\w)/g,GY=LY(r=>r.replace(UY,(e,t)=>t?t.toUpperCase():""));let Ww=!1;const Py=[],zY=Promise.resolve(),xk=r=>zY.then(r),HY=r=>{Py.includes(r)||Py.push(r),Ww||(Ww=!0,xk(jY))},jY=()=>{for(const r of Py)r();Py.length=0,Ww=!1},VY=/^(spellcheck|draggable|form|list|type)$/,$w=({el:r,get:e,effect:t,arg:i,modifiers:s})=>{let n;i==="class"&&(r._class=r.className),t(()=>{let o=e();if(i)s!=null&&s.camel&&(i=GY(i)),iS(r,i,o,n);else{for(const a in o)iS(r,a,o[a],n&&n[a]);for(const a in n)(!o||!(a in o))&&iS(r,a,null)}n=o})},iS=(r,e,t,i)=>{if(e==="class")r.setAttribute("class",sF(r._class?[r._class,t]:t)||"");else if(e==="style"){t=nF(t);const{style:s}=r;if(!t)r.removeAttribute("style");else if(O0(t))ze();else{for(const n in t)Kw(s,n,t[n]);if(i&&!O0(i))for(const n in i)t[n]==null&&Kw(s,n,"")}}else!(r instanceof SVGElement)&&e in r&&!VY.test(e)?(r[e]=t,e==="value"&&(r._value=t)):e==="true-value"?r._trueValue=t:e==="false-value"?r._falseValue=t:t!=null?r.setAttribute(e,t):r.removeAttribute(e)},WY=/\s*!important$/,Kw=(r,e,t)=>{Ev(t)?t.forEach(i=>Kw(r,e,i)):e.startsWith("--")?r.setProperty(e,t):WY.test(t)?ze():Reflect.set(r,e,t)},$Y=({el:r,get:e,effect:t})=>{const i=r.style.display;t(()=>{r.style.display=e()?i:"none"})},oF=({el:r,get:e,effect:t})=>{t(()=>{const i=aF(e());if(i)r.textContent=i;else{const s=r.AsElement().AsHTMLElement();s||ze();const{firstChild:n}=s;if(!(n&&n.nodeValue===Oc.kTagName)){r.textContent="";const o=r.GetDocument().createElement(Oc.kTagName);o.setAttribute(m0,d1.TrailingBreak),s.appendChild(o)}}})},aF=r=>r==null?"":Sv(r)?JSON.stringify(r,null,2):String(r),KY=({el:r,get:e,effect:t})=>{t(()=>{ze()})},XY=({el:r,exp:e,get:t,effect:i,modifiers:s})=>{r.type,t(`(val) => { ${e} = val }`)},rC=Object.create(null),Ad=(r,e,t)=>lF(r,`return(${e})`,t),lF=(r,e,t)=>{const i=rC[e]||(rC[e]=YY(e));try{return i(r,t)}catch(s){_i(nn,`Error when evaluating expression "${e}":`),console.error(s)}},YY=r=>{try{return new Function("$data","$el",`with($data){${r}}`)}catch(e){return console.error(`${e.message} in expression: ${r}`),()=>{}}},qY=({el:r,ctx:e,exp:t,effect:i})=>{xk(()=>i(()=>lF(e.scope,t,r)))},QY={bind:$w,show:$Y,text:oF,html:KY,model:XY,effect:qY};class uF extends DN{constructor(t,i,s){var e=(...args)=>{super(...args);u(this,"data_")};J(t==Is.kCreateOther||t==Is.kCreateText||t==Is.kCreateEditingText),uo(i)?(e(t),this.data_=i):(e(t,i),this.data_=s)}get nodeValue(){return this.data_}set nodeValue(t){t?this.set_data(t):this.set_data("")}text_content(){return this.data_}set_text_content(t){t?this.set_data(t):this.set_data("")}get data(){return this.data_}set_data(t){var i;this.data_=t,this.InvalidateLayoutBoxesOfNodeAndAncestors(),(i=this.GetDocument())==null||i.OnDOMMutation()}text(){return this.data_}AsCharacterData(){return this}length(){return this.data_.length}}class wv extends uF{constructor(e,t){uo(e)?super(Is.kCreateText,e):super(Is.kCreateText,e,t)}get nodeName(){return"#text"}getNodeType(){return bo.kTextNode}AsText(){return this}Accept(e){e.VisitText(this)}Duplicate(){let e=new wv(this.data);return e.node_document_=this.node_document_,e}}const JY=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,iC=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ZY=/^\(|\)$/g,eq=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,tq=(r,e,t)=>{const i=e.match(JY);if(!i){_i(nn,`invalid v-for expression: ${e}`);return}const s=r.nextSibling,n=r.parentElement,o=new wv("");Reflect.set(o,"$anchor",!0),n.insertBefore(o,r),n.removeChild(r);const a=i[2].trim();let l=i[1].trim().replace(ZY,"").trim(),c,d=!1,f,g,x="key",E=r.getAttribute(x)||r.getAttribute(x=":key")||r.getAttribute(x="v-bind:key");E&&(r.removeAttribute(x),x==="key"&&(E=JSON.stringify(E)));let P;(P=l.match(iC))&&(l=l.replace(iC,"").trim(),f=P[1].trim(),P[2]&&(g=P[2].trim())),(P=l.match(eq))&&(c=P[1].split(",").map(M=>M.trim()),d=l[0]==="[");let b=!1,D,C,O;const N=M=>{const R=new Map,L=[];if(Ev(M))for(let K=0;K<M.length;K++)L.push(j(R,M[K],K));else if(typeof M=="number")for(let K=0;K<M;K++)L.push(j(R,K+1,K));else if(Sv(M)){let K=0;for(const Q in M)L.push(j(R,M[Q],K++,Q))}return[L,R]},j=(M,R,L,K)=>{const Q={};c?c.forEach((Re,Ue)=>Q[Re]=R[d?Ue:Re]):Q[l]=R,K?(f&&(Q[f]=K),g&&(Q[g]=L)):f&&(Q[f]=L);const ue=Xw(t,Q),ae=E?Ad(ue.scope,E):L;return M.set(ae,L),ue.key=ae,ue},I=(M,R)=>{let L=r.getAttribute("v-scope"),K;const Q=R==null?void 0:R.previousSibling,ae=Q&&Q.IsElement()&&Q.parentNode===n&&Reflect.get(Q,"pmViewDesc")&&Q;if(L||r.hasAttribute("v-scope")){const Ue=L?Ad(M.scope,L):{};M=Xw(M,Ue),Ue.$template&&(K=Ue.$template(ae).AsElement())}const Re=new vk(K||r,M);return Re.key=M.key,!ae&&Re.insert(n,R),Re};return t.effect(()=>{const M=Ad(t.scope,a),R=O;if([C,O]=N(M),!b)D=C.map(L=>I(L,o)),b=!0;else{for(let ae=0;ae<D.length;ae++)O.has(D[ae].key)||D[ae].remove();const L=[];let K=C.length,Q,ue;for(;K--;){const ae=C[K],Re=R.get(ae.key);let Ue;Re==null?Ue=I(ae,Q?Q.el:o):(Ue=D[Re],Object.assign(Ue.ctx.scope,ae.scope),Re!==K&&(D[Re+1]!==Q||ue===Q)&&(ue=Ue,Ue.insert(n,Q?Q.el:o))),L.unshift(Q=Ue)}D=L}}),s},Xp=(r,e)=>{const t=r.getAttribute(e);return t!=null&&r.removeAttribute(e),t};class yk extends uF{constructor(e,t){uo(e)?super(Is.kCreateOther,e):super(Is.kCreateOther,e,t)}get nodeName(){return"#comment"}getNodeType(){return bo.kCommentNode}AsComment(){return this}Accept(e){e.VisitComment(this)}Duplicate(){let e=new yk(this.data);return e.node_document_=this.node_document_,e}}const rq=(r,e,t)=>{_i(nn,"v-if expression cannot be empty.");const i=r.parentElement,s=new yk("v-if");i.insertBefore(s,r);const n=[{exp:e,el:r}];let o,a;for(;(o=r.nextElementSibling)&&(a=null,Xp(o,"v-else")===""||(a=Xp(o,"v-else-if")));)i.removeChild(o),n.push({exp:a,el:o});const l=r.nextSibling;i.removeChild(r);let c,d=-1;const f=()=>{c&&(i.insertBefore(s,c.el),c.remove(),c=void 0)};return t.effect(()=>{for(let g=0;g<n.length;g++){const{exp:x,el:E}=n[g];if(!x||Ad(t.scope,x)){g!==d&&(f(),c=new vk(E,t),c.insert(i,s),i.removeChild(s),d=g);return}}d=-1,f()}),l},iq=({el:r,ctx:{scope:{$refs:e}},get:t,effect:i})=>{let s;return i(()=>{const n=t();e[n]=r,s&&n!==s&&delete e[s],s=n}),()=>{s&&delete e[s]}},nq=/^(?:v-|:|@)/,sq=/\.([\w-]+)/g,cF=(r,e)=>{const t=r.nodeType;if(t===bo.kElementNode){let i,s=r;if(i=Xp(s,"v-if"))return rq(s,i,e);if(i=Xp(s,"v-for"))return tq(s,i,e);if((i=Xp(s,"v-scope"))||i===""){const o=i?Ad(e.scope,i):{};e=Xw(e,o),o.$template&&s.appendChild(o.$template())}oq(s,e);const n=[];for(const[o,a]of[...s.attributes])nq.test(o)&&o!=="v-cloak"&&(o==="v-model"?n.unshift([o,a]):o[0]==="@"||/^v-on\b/.test(o)?n.push([o,a]):nC(s,o,a,e));for(const[o,a]of n)nC(s,o,a,e)}else if(t===bo.kTextNode){const i=r.data;if(i.includes(e.delimiters[0])){let s=[],n=0,o;for(;o=e.delimitersRE.exec(i);){const a=i.slice(n,o.index);a&&s.push(JSON.stringify(a)),s.push(`$s(${o[1]})`),n=o.index+o[0].length}n<i.length&&s.push(JSON.stringify(i.slice(n))),hF(r,oF,s.join("+"),e)}}},oq=(r,e)=>{let t=r.firstChild;for(;t;)t=cF(t,e)||t.nextSibling},nC=(r,e,t,i)=>{let s,n,o;if(e=e.replace(sq,(a,l)=>((o||(o={}))[l]=!0,"")),e[0]===":")s=$w,n=e.slice(1);else{const a=e.indexOf(":"),l=a>0?e.slice(2,a):e.slice(2);s=QY[l]||i.dirs[l],n=a>0?e.slice(a+1):void 0}s?(s===$w&&n==="ref"&&(s=iq),hF(r,s,t,i,n,o),r.removeAttribute(e)):_i(Pp,`unknown custom directive ${e}.`)},hF=(r,e,t,i,s,n)=>{const a=e({el:r,get:(l=t)=>Ad(i.scope,l,r),effect:i.effect,ctx:i,exp:t,arg:s,modifiers:n});a&&i.cleanups.push(a)},dF=r=>{const e={...r,scope:r?r.scope:al({}),dirs:r?r.dirs:{},effects:[],blocks:[],cleanups:[],delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g,effect:t=>{const i=rY(t,{scheduler:()=>HY(i)});return e.effects.push(i),i}};return e},Xw=(r,e={})=>{const t=r.scope,i=Object.create(t);Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),i.$refs=Object.create(t.$refs);const s=al(new Proxy(i,{set(n,o,a,l){return l===s&&!BY(n,o)?Reflect.set(t,o,a):Reflect.set(n,o,a,l)}}));return{...r,scope:s}};class vk{constructor(e,t,i=!1){u(this,"template");u(this,"ctx");u(this,"key");u(this,"parentCtx");u(this,"start");u(this,"end");this.template=e,i?this.ctx=t:(this.parentCtx=t,t.blocks.push(this),this.ctx=dF(t)),cF(this.template,this.ctx)}get el(){return this.start||this.template}insert(e,t){e.insertBefore(this.template,t)}remove(){var e;if(this.parentCtx&&FY(this.parentCtx.blocks,this),this.start){const t=this.start.parentNode;let i=this.start,s;for(;i&&(s=i.nextSibling,t.removeChild(i),i!==this.end);)i=s}else!this.template.parentNode&&Reflect.has(this.template,"pmViewDesc")||(e=this.template.parentNode)==null||e.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach(e=>{e.teardown()}),this.ctx.effects.forEach(iY),this.ctx.cleanups.forEach(e=>e())}}const aq=r=>{const e=dF();r&&(e.scope=al(r)),e.scope.$s=aF,e.scope.$nextTick=xk,e.scope.$refs=Object.create(null);let t;return{directive(i,s){return s?(e.dirs[i]=s,this):e.dirs[i]},mount(i){return t=[i].map(n=>new vk(n,e,!0)),this},unmount(){t.forEach(i=>i.teardown())}}};function lq(r,e){var c;const t=e.createElement("body");Object.assign(t.style,{display:"block",position:"relative"});const i=e.createElement("div");i.setAttribute("v-for","child in vm.children"),i.setAttribute("v-scope","getComponent(child)"),i.setAttribute("v-bind:key","child.id"),t.appendChild(i),t.setAttribute(Ac,r.root.value.id),(c=e.html())==null||c.appendChild(t),Reflect.set(window,"test",()=>{var d;console.log((d=e.html())==null?void 0:d.inner_html())});const s=(d,f="")=>{if(Gw(d))return o(d,f);if(WX(d))return a(d,f);ze()},n=d=>({vm:d,getComponent:s}),o=(d,f="")=>{const g=d.isFragmentPlaceholder?`${f}/${d.id}`:f;return{vm:d,scope:f,scopeOfChild:g,$template:()=>{const x=e.createElement("div");x.setAttribute(`v-bind:${Ac}`,"vm.id"),x.setAttribute(`v-bind:${m0}`,"vm.type"),x.setAttribute(`v-bind:${sw}`,"scope"),x.setAttribute(`v-bind:${AN}`,'vm.fragment ? vm.fragment.id : ""'),x.setAttribute("v-bind:style","vm.style");const E=e.createElement("div");return E.setAttribute("v-for","child in vm.children"),E.setAttribute("v-scope","getComponent(child, scopeOfChild)"),E.setAttribute("v-bind:key","child.id"),x.appendChild(E),x},getComponent:s}},a=(d,f="")=>({vm:d,scope:f,nodeType:oi.Text,$template:g=>{g&&Kt(g.tagName,no.kTagName);const x=g||e.createElement(no.kTagName);return x.setAttribute(`v-bind:${Ac}`,"vm.id"),x.setAttribute(`v-bind:${m0}`,"nodeType"),x.setAttribute(`v-bind:${sw}`,"scope"),x.setAttribute("v-bind:style","vm.style"),x.setAttribute("v-text","vm.content"),x}});let l=aq(n(r.root.value)).mount(e.body());return sn(()=>l.unmount())}const Xy=class extends Rn{constructor(e){e?super(e,Xy.kTagName):super(Xy.kTagName)}};let yx=Xy;u(yx,"kTagName","span");const wT=class extends Rn{constructor(e){super(e,wT.kTagName)}};let vx=wT;u(vx,"kTagName","em");const AT=class extends Rn{constructor(e){super(e,AT.kTagName)}};let Ex=AT;u(Ex,"kTagName","strong");const bT=class extends Rn{constructor(e){super(e,bT.kTagName)}};let Sx=bT;u(Sx,"kTagName","html");const kT=class extends Rn{constructor(e){super(e,kT.kTagName)}AsHTMLBodyElement(){return this}};let wx=kT;u(wx,"kTagName","body");class fF extends Rn{}u(fF,"kTagNames",["h1","h2","h3","h4","h5","h6"]);const TT=class extends Rn{constructor(e){super(e,TT.kTagName)}};let Ax=TT;u(Ax,"kTagName","a");function Lg(r,e){return r*e}function uq(r,e){return r-e}function cq(r,e){return r+e}class pr{constructor(e=0){u(this,"delta_",0);this.delta_=bs(e)}static FromDays(e){return hq(e)}static FromHours(e){return dq(e)}static FromMinutes(e){return fq(e)}static FromSeconds(e){return _q(e)}static FromMilliseconds(e){return pq(e)}static FromMicroseconds(e){return Yw(e)}static Max(){return new pr(Number.MAX_SAFE_INTEGER)}static Min(){return new pr(Number.MIN_SAFE_INTEGER)}static FromInternalValue(e){return new pr(e)}is_max(){return this.EQ(pr.Max())}is_min(){return this.EQ(pr.Min())}is_inf(){return this.is_min()||this.is_max()}DivideOrMax(e){return this.is_max()?Number.MAX_VALUE:this.delta_/e}InMicroseconds(){return this.delta_}InMilliseconds(){return this.is_inf()?this.delta_<0?Number.MIN_VALUE:Number.MAX_VALUE:this.delta_/_F.kMicrosecondsPerMillisecond}InSeconds(){return this.DivideOrMax(Wr.kMicrosecondsPerSecond)}SUB(e){return e.is_inf()?(this.delta_,e.delta_,e.delta_<0?pr.Max():pr.Min()):new pr(uq(this.delta_,e.delta_))}ADD(e){return e.is_inf()?(!this.is_inf()||this.delta_==e.delta_,e):new pr(cq(this.delta_,e.delta_))}EQ(e){return this.delta_==e.delta_}LT(e){return this.delta_<e.delta_}GT(e){return this.delta_>e.delta_}GE(e){return this.delta_>=e.delta_}}function hq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerDay))}function dq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerHour))}function fq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerMinute))}function _q(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerSecond))}function pq(r){return pr.FromInternalValue(Lg(r,Wr.kMicrosecondsPerMillisecond))}function Yw(r){return pr.FromInternalValue(r)}const Ur=class{constructor(e=0){u(this,"us_");this.us_=e}is_null(){return this.us_==0}is_max(){return this.EQ(Ur.Max())}is_min(){return this.EQ(Ur.Min())}is_inf(){return this.is_min()||this.is_max()}static Max(){return new Ur(Number.MAX_VALUE)}static Min(){return new Ur(Number.MIN_VALUE)}ToInternalValue(){return this.us_}ASSIGN(e){return this.us_=e.us_,this}ADD(e){return new Ur(this.us_+e.InMicroseconds())}SUB(e){if(e instanceof Ur)return Yw(this.us_-e.us_);if(e instanceof pr)return new Ur(Yw(this.us_).ADD(e).InMicroseconds());et()}ADD_ASSIGN(e){return this.ASSIGN(this.ADD(e))}SUB_ASSIGN(e){return this.ASSIGN(this.SUB(e))}EQ(e){return this.us_==e.us_}NE(e){return this.us_!=e.us_}LT(e){return this.us_<e.us_}LE(e){return this.us_<=e.us_}GT(e){return this.us_>e.us_}GE(e){return this.us_>=e.us_}};let Wr=Ur;u(Wr,"kHoursPerDay",24),u(Wr,"kSecondsPerMinute",60),u(Wr,"kMinutesPerHour",60),u(Wr,"kSecondsPerHour",Ur.kSecondsPerMinute*Ur.kMinutesPerHour),u(Wr,"kMillisecondsPerSecond",1e3),u(Wr,"kMillisecondsPerDay",Ur.kMillisecondsPerSecond*Ur.kSecondsPerHour*Ur.kHoursPerDay),u(Wr,"kMicrosecondsPerMillisecond",1e3),u(Wr,"kMicrosecondsPerSecond",Ur.kMicrosecondsPerMillisecond*Ur.kMillisecondsPerSecond),u(Wr,"kMicrosecondsPerMinute",Ur.kMicrosecondsPerSecond*Ur.kSecondsPerMinute),u(Wr,"kMicrosecondsPerHour",Ur.kMicrosecondsPerMinute*Ur.kMinutesPerHour),u(Wr,"kMicrosecondsPerDay",Ur.kMicrosecondsPerHour*Ur.kHoursPerDay),u(Wr,"kMicrosecondsPerWeek",Ur.kMicrosecondsPerDay*7),u(Wr,"kNanosecondsPerMicrosecond",1e3),u(Wr,"kNanosecondsPerSecond",Ur.kNanosecondsPerMicrosecond*Ur.kMicrosecondsPerSecond);class _F extends Wr{}class Si extends Wr{static Now(){return new Si(Date.now())}}class gq{constructor(e){this.toDispose=e}dispose(){this.toDispose.dispose()}}function mq(r){xq.register(r,new gq(r))}const xq=new FinalizationRegistry(r=>{r.dispose()});class yq{constructor(e){u(this,"timer_");mq(this),this.timer_=e}dispose(){this.timer_&&this.timer_.AbandonAndStop()}Run(){if(!this.timer_)return;this.timer_.scheduled_task_=void 0;let e=this.timer_;this.timer_=void 0,e.RunScheduledTask()}Abandon(){this.timer_=void 0}}class pF{constructor(e){u(this,"delay_");u(this,"desired_run_time_");u(this,"scheduled_task_");u(this,"is_running_",!1);u(this,"scheduled_run_time_");this.delay_=e}Stop(){this.is_running_=!1,this.OnStop()}IsRunning(){return this.is_running_}StartInternal(e){this.delay_=e,this.Reset()}AbandonAndStop(){this.AbandonScheduledTask(),this.Stop()}AbandonScheduledTask(){this.scheduled_task_&&(this.scheduled_task_.Abandon(),this.scheduled_task_=void 0)}RunScheduledTask(){if(!!this.is_running_){if(J(this.desired_run_time_),this.desired_run_time_.GT(this.scheduled_run_time_)){let e=Si.Now();if(this.desired_run_time_.GT(e)){this.PostNewScheduledTask(this.desired_run_time_.SUB(e));return}}this.RunUserTask()}}PostNewScheduledTask(e){J(!this.scheduled_task_),this.is_running_=!0,this.scheduled_task_=new yq(this),e.GT(pr.FromMilliseconds(0))?(setTimeout(()=>this.scheduled_task_.Run(),e.InMilliseconds()),this.scheduled_run_time_=this.desired_run_time_=Si.Now().ADD(e)):(setTimeout(()=>this.scheduled_task_.Run(),0),this.scheduled_run_time_=this.desired_run_time_=new Si)}Reset(){if(J(this.delay_),!this.scheduled_task_){this.PostNewScheduledTask(this.delay_);return}if(this.delay_.GT(pr.FromMicroseconds(0))?this.desired_run_time_=Si.Now().ADD(this.delay_):this.desired_run_time_=new Si,this.desired_run_time_.GE(this.scheduled_run_time_)){this.is_running_=!0;return}this.AbandonScheduledTask(),this.PostNewScheduledTask(this.delay_)}GetCurrentDelay(){return this.delay_}}class vq extends pF{constructor(t,i){super(t);u(this,"user_task_");this.user_task_=i,t&&i&&i()}Start(t,i){i()}RunUserTask(){let t=this.user_task_;this.PostNewScheduledTask(this.GetCurrentDelay()),t&&t()}OnStop(){}}class gF extends pF{constructor(){super();u(this,"user_task_")}Start(t,i){this.user_task_=i,this.StartInternal(t)}FireNow(){J(this.IsRunning()),this.RunUserTask()}OnStop(){this.user_task_=void 0}RunUserTask(){let t=this.user_task_;this.Stop(),J(t),t()}}class mF{constructor(e,t,i){u(this,"cached_resource_");u(this,"success_callback_");u(this,"error_callback_");this.cached_resource_=e,this.success_callback_=t,this.error_callback_=i,J(this.cached_resource_),this.success_callback_&&(this.cached_resource_.AddCallback(0,this.success_callback_),this.cached_resource_.HasResource()&&this.success_callback_()),this.error_callback_&&this.cached_resource_.AddCallback(1,this.error_callback_)}dispose(){this.success_callback_&&this.cached_resource_.RemoveCallback(0,this.success_callback_),this.error_callback_&&this.cached_resource_.RemoveCallback(1,this.error_callback_)}GetCachedResource(){return this.cached_resource_}}class Eq{constructor(e,t,i,s,n,o,a,l){u(this,"owner_");u(this,"url_");u(this,"start_loading_func_");u(this,"on_retry_loading_");u(this,"are_loading_retries_enabled_func_");u(this,"on_resource_loaded_");u(this,"loader_");u(this,"callback_lists_",[[],[]]);u(this,"are_completion_callbacks_enabled_",!1);u(this,"completion_callback_");u(this,"is_resource_timing_created_flag_");u(this,"resource_");this.owner_=e,this.url_=t,this.start_loading_func_=s.bind(null,this),this.on_retry_loading_=n.bind(null,this),this.are_loading_retries_enabled_func_=a,this.on_resource_loaded_=l.bind(null,this),this.is_resource_timing_created_flag_=!1,this.resource_=i,i||this.StartLoading()}url(){return this.url_}IsLoadingComplete(){return!this.loader_}get_resource_timing_created_flag(){return this.is_resource_timing_created_flag_}set_resource_timing_created_flag(e){this.is_resource_timing_created_flag_=e}AddCallback(e,t){this.callback_lists_[e].push(t)}RemoveCallback(e,t){let i=this.callback_lists_[e],s=i.indexOf(t);J(s!==-1),i.splice(s,1)}RunCallbacks(e){let t=this.callback_lists_[e];for(let i of t)i()}EnableCompletionCallbacks(){this.are_completion_callbacks_enabled_=!0,this.completion_callback_&&this.completion_callback_()}StartLoading(){J(!this.loader_),this.loader_=this.start_loading_func_()}ScheduleLoadingRetry(){ze()}OnLoadingComplete(e){e?(Ec(nn," Error while loading '",this.url_,"': ",e),this.HasResource()&&(Ec(nn,"A resource was produced but there was still an error."),this.ResetResource()),this.loader_=void 0,this.completion_callback_=this.on_resource_loaded_.bind(null,1),this.are_completion_callbacks_enabled_&&this.completion_callback_()):(this.loader_=void 0,this.completion_callback_=this.on_resource_loaded_.bind(null,0),this.are_completion_callbacks_enabled_&&this.completion_callback_())}TryGetResource(){return this.resource_}OnContentProduced(e){J(!this.resource_),this.resource_=e}HasResource(){return!!this.resource_}ResetResource(){this.resource_=void 0}}class Sq{constructor(e,t,i){u(this,"cached_resource_loaded_callback_handler_");this.cached_resource_loaded_callback_handler_=new mF(e,t,i)}GetCachedResource(){return this.cached_resource_loaded_callback_handler_.GetCachedResource()}}class wq{constructor(e,t){this.cached_resource=e,this.callback_type=t}}class xF{constructor(e,t,i,s,n){u(this,"name_");u(this,"are_loading_retries_enabled_");u(this,"cache_capacity_");u(this,"callback_blocking_loading_resource_set_",new Set);u(this,"non_callback_blocking_loading_resource_set_",new Set);u(this,"pending_callback_map_",new Map);u(this,"process_pending_callback_timer_",new gF);u(this,"is_processing_pending_callbacks_",!1);u(this,"are_callbacks_disabled_",!1);u(this,"memory_size_in_bytes_");u(this,"memory_capacity_in_bytes_");u(this,"memory_resources_loaded_in_bytes_");u(this,"count_resources_requested_");u(this,"count_resources_loading_");u(this,"count_resources_loaded_");u(this,"count_resources_cached_");u(this,"count_pending_callbacks_");u(this,"create_loader_function_");u(this,"notify_resource_requested_function_");u(this,"cached_resource_map_",new Map);u(this,"unreferenced_cached_resource_map_",new Map);this.name_=e,this.are_loading_retries_enabled_=i,this.cache_capacity_=t,this.memory_size_in_bytes_=0,this.memory_capacity_in_bytes_=this.cache_capacity_,this.memory_resources_loaded_in_bytes_=0,this.count_resources_requested_=0,this.count_resources_loading_=0,this.count_resources_loaded_=0,this.count_resources_cached_=0,this.count_pending_callbacks_=0,this.create_loader_function_=s,this.notify_resource_requested_function_=n,J(this.create_loader_function_)}NotifyResourceLoadingRetryScheduled(e){ze()}ReclaimMemoryAndMaybeProcessPendingCallbacks(e){this.ReclaimMemory(e,!1),this.memory_size_in_bytes_>e&&(this.ProcessPendingCallbacks(),this.ReclaimMemory(e,!0))}ProcessPendingCallbacksIfUnblocked(){if(this.callback_blocking_loading_resource_set_.size===0){if(this.ProcessPendingCallbacks(),this.non_callback_blocking_loading_resource_set_.size){let e=this.callback_blocking_loading_resource_set_;this.callback_blocking_loading_resource_set_=this.non_callback_blocking_loading_resource_set_,this.non_callback_blocking_loading_resource_set_=e}}else this.pending_callback_map_.size&&this.process_pending_callback_timer_.Start(pr.FromMilliseconds(500),this.ProcessPendingCallbacks.bind(this))}are_loading_retries_enabled(){return this.are_loading_retries_enabled_}capacity(){return this.cache_capacity_}SetCapacity(e){this.cache_capacity_=e,this.memory_capacity_in_bytes_=e,this.ReclaimMemoryAndMaybeProcessPendingCallbacks(this.cache_capacity_)}Purge(){this.ProcessPendingCallbacks(),this.ReclaimMemoryAndMaybeProcessPendingCallbacks(0)}ProcessPendingCallbacks(){if(!this.are_callbacks_disabled_){this.is_processing_pending_callbacks_=!0;for(let[e,t]of this.pending_callback_map_)t.cached_resource.RunCallbacks(t.callback_type),this.pending_callback_map_.delete(e);this.is_processing_pending_callbacks_=!1,this.count_pending_callbacks_=0}}DisableCallbacks(){this.are_callbacks_disabled_=!0}GetOrCreateCachedResource(e){J(e),this.notify_resource_requested_function_&&this.notify_resource_requested_function_(e);for(let[i,s]of this.cached_resource_map_)if(i===e)return s;++this.count_resources_requested_;let t=new Eq(this,e,void 0,this.StartLoadingResource.bind(this),this.NotifyResourceLoadingRetryScheduled.bind(this),this.NotifyResourceDestroyed.bind(this),this.are_loading_retries_enabled.bind(this),this.NotifyResourceLoadingComplete.bind(this));return this.cached_resource_map_.set(e,t),t.EnableCompletionCallbacks(),t}StartLoadingResource(e){let t=e.url();return this.pending_callback_map_.size===0?this.callback_blocking_loading_resource_set_.add(t):this.non_callback_blocking_loading_resource_set_.add(t),++this.count_resources_loading_,this.create_loader_function_(e.url(),e.OnContentProduced.bind(e),e.OnLoadingComplete.bind(e))}NotifyResourceLoadingComplete(e,t){const i=e.url();if(e.TryGetResource()){let n=e.TryGetResource().GetEstimatedSizeInBytes();this.memory_size_in_bytes_+=n,this.memory_resources_loaded_in_bytes_+=n,++this.count_resources_loaded_,++this.count_resources_cached_}this.callback_blocking_loading_resource_set_.has(i)?(this.callback_blocking_loading_resource_set_.delete(i),J(!this.non_callback_blocking_loading_resource_set_.has(i))):this.non_callback_blocking_loading_resource_set_.has(i)?this.non_callback_blocking_loading_resource_set_.delete(i):J(!1),this.pending_callback_map_.set(i,new wq(e,t)),++this.count_pending_callbacks_,--this.count_resources_loading_,this.ProcessPendingCallbacksIfUnblocked(),this.ReclaimMemoryAndMaybeProcessPendingCallbacks(this.cache_capacity_)}NotifyResourceDestroyed(e){ze()}NotifyWeakResourceDestroyed(e){ze()}ReclaimMemory(e,t){let i=[this.unreferenced_cached_resource_map_];for(let s=0;s<i.length;++s)for(;this.memory_size_in_bytes_>e&&i[s].size;){let o=Array.from(i[s].keys())[0],l=i[s].get(o).GetEstimatedSizeInBytes();i[s].delete(o),this.memory_size_in_bytes_-=l,--this.count_resources_cached_}t&&oB(nn,this.memory_size_in_bytes_>e,"cached size: ",this.memory_size_in_bytes_,", target size: ",e)}}const PT=class extends Rn{constructor(t){super(t,PT.kTagName);u(this,"cached_image_");u(this,"cached_image_loaded_callback_handler_")}src(){return this.getAttribute("src")||""}set_src(t){this.setAttribute("src",t)}AsHTMLImageElement(){return this}PurgeCachedBackgroundImagesOfNodeAndDescendants(){!this.cached_image_loaded_callback_handler_||this.OnLoadingError()}OnSetAttribute(t,i){t=="src"?this.UpdateImageData():Rn.prototype.OnSetAttribute.call(this,t,i)}OnRemoveAttribute(t){t=="src"?this.UpdateImageData():Rn.prototype.OnRemoveAttribute.call(this,t)}UpdateImageData(){J(this.GetDocument()),this.cached_image_loaded_callback_handler_&&(this.cached_image_loaded_callback_handler_=void 0,this.GetDocument().DecreaseLoadingCounter());let i=this.getAttribute("src")||"",s;if(i){let n=i;if(s=this.GetDocument().html_element_context().image_cache().GetOrCreateCachedResource(n),J(s),this.cached_image_=s,s.TryGetResource())return}else return;this.GetDocument().IncreaseLoadingCounter(),this.cached_image_loaded_callback_handler_=new mF(s,this.OnLoadingSuccess.bind(this),this.OnLoadingError.bind(this))}OnLoadingSuccess(){this.GetDocument()&&this.GetDocument().DecreaseLoadingCounterAndMaybeDispatchLoadEvent(),this.cached_image_loaded_callback_handler_=void 0}OnLoadingError(){this.GetDocument()&&this.GetDocument().DecreaseLoadingCounterAndMaybeDispatchLoadEvent(),this.cached_image_loaded_callback_handler_=void 0}GetResource(){var t;return(t=this.cached_image_)==null?void 0:t.TryGetResource()}};let bx=PT;u(bx,"kTagName","img");class Aq{constructor(e,t,i){this.d=e,this.fill=t,this.stroke=i}}function Xl(r){Rr(0,r),$n(1,r)}class hh{constructor(e=0,t=0,i=0,s=0){u(this,"r_");u(this,"g_");u(this,"b_");u(this,"a_");if(arguments.length===1){let n=e;this.a_=(n&255)/255,n>>=8,this.b_=(n&255)/255,n>>=8,this.g_=(n&255)/255,n>>=8,this.r_=(n&255)/255}else Xl(e),this.r_=e,Xl(t),this.g_=t,Xl(i),this.b_=i,Xl(s),this.a_=s}HasAlpha(){return this.a_<1}set_r(e){Xl(e),this.r_=e}set_g(e){Xl(e),this.g_=e}set_b(e){Xl(e),this.b_=e}set_a(e){Xl(e),this.a_=e}r(){return am(this.r_,0,1)}g(){return am(this.g_,0,1)}b(){return am(this.b_,0,1)}a(){return am(this.a_,0,1)}rgb8_r(){return Math.round(this.r()*255)}rgb8_g(){return Math.round(this.g()*255)}rgb8_b(){return Math.round(this.b()*255)}rgb8_a(){return Math.round(this.a()*255)}EQ(e){let t=this;return t.r()==e.r()&&t.g()==e.g()&&t.b()==e.b()&&t.a()==e.a()}CLONE(){return new hh(this.r(),this.g(),this.b(),this.a())}}const Yy=class extends Rn{constructor(e){e?super(e,Yy.kTagName):super(Yy.kTagName)}AsFreehandElement(){return this}Accept(e){e.VisitElement(this)}GetPath(){var o;const e=(o=this.getAttribute("d"))!=null?o:"",t=this.getAttribute("fill"),i=this.getAttribute("stroke");let s,n;if(t){const a=Sn.fromHex(t);if(a){const l=a.rgba;s=new hh(l.r,l.g,l.b,l.a)}}if(i){const a=Sn.fromHex(i);if(a){const l=a.rgba;n=new hh(l.r,l.g,l.b,l.a)}}return new Aq(e,s,n)}};let Yp=Yy;u(Yp,"kTagName","x-freehand");class bq{constructor(){u(this,"tag_name_to_create_html_element_t_callback_map_",new Map);this.RegisterHTMLElementWithSingleTagName(Ax),this.RegisterHTMLElementWithSingleTagName(wd),this.RegisterHTMLElementWithSingleTagName(no),this.RegisterHTMLElementWithSingleTagName(yx),this.RegisterHTMLElementWithSingleTagName(vx),this.RegisterHTMLElementWithSingleTagName(Ex),this.RegisterHTMLElementWithSingleTagName(Sx),this.RegisterHTMLElementWithSingleTagName(wx),this.RegisterHTMLElementWithSingleTagName(bx),this.RegisterHTMLElementWithSingleTagName(Oc),this.RegisterHTMLElementWithSingleTagName(Yp),this.RegisterHTMLElementWithMultipleTagName(fF)}CreateElement(e,t){let i=this.tag_name_to_create_html_element_t_callback_map_.get(t);if(i)return i(e);ze()}RegisterHTMLElementWithSingleTagName(e){this.tag_name_to_create_html_element_t_callback_map_.set(e.kTagName,kq.bind(null,e))}RegisterHTMLElementWithMultipleTagName(e){for(let t of e.kTagNames)this.tag_name_to_create_html_element_t_callback_map_.set(t,Tq.bind(null,e,t))}}function kq(r,e){return new r(e)}function Tq(r,e,t){return new r(t,e)}function Pq(r){let e=new Fg;return e.set_background_color(new Sr(0)),e.set_display(_e.GetBlock()),e.set_is_inline_before_blockification(!1),e.set_width(new Qt(r.width(),Ft.kPixelsUnit)),e.set_height(new Qt(r.height(),Ft.kPixelsUnit)),e}class yF{}class vF extends yF{constructor(){super();u(this,"origin_");this.origin_=Si.Now()}Now(){return Si.Now().SUB(this.origin_)}}class EF extends yF{constructor(t,i){super();u(this,"parent_");u(this,"origin_");J(t),this.parent_=t,this.origin_=i}Now(){return this.parent_.Now().SUB(this.origin_)}origin(){return this.origin_}}class Rq{}var Jl=(r=>(r[r.kUnrequestedState=0]="kUnrequestedState",r[r.kLoadingWithTimerActiveState=1]="kLoadingWithTimerActiveState",r[r.kLoadingWithTimerExpiredState=2]="kLoadingWithTimerExpiredState",r[r.kLoadedState=3]="kLoadedState",r[r.kUnavailableState=4]="kUnavailableState",r[r.kDuplicateState=5]="kDuplicateState",r))(Jl||{});class qw{constructor(){u(this,"state",0);u(this,"entry");u(this,"font")}}class sC{constructor(e){u(this,"family_name");u(this,"faces",[]);this.family_name=e}}class Dq{constructor(){u(this,"family_names",[]);u(this,"style",new N2);u(this,"size");this.size=0}LT(e){return this.size<e.size?!0:e.size<this.size?!1:this.style.weight<e.style.weight?!0:e.style.weight<this.style.weight?!1:this.style.slant<e.style.slant?!0:e.style.slant<this.style.slant?!1:this.family_names.length<e.family_names.length}}const Cq=8230;class Oq extends Rq{constructor(t,i){super();u(this,"fallback_typeface_to_font_map_",new Map);u(this,"font_cache_");u(this,"fonts_",[]);u(this,"style_");u(this,"size_");u(this,"primary_font_");u(this,"is_font_metrics_set_");u(this,"font_metrics_");u(this,"is_space_width_set_");u(this,"space_width_");u(this,"is_ellipsis_info_set_");u(this,"ellipsis_font_");u(this,"ellipsis_width_");u(this,"character_fallback_typeface_map_");this.font_cache_=t,this.style_=i.style,this.size_=i.size,this.is_font_metrics_set_=!1,this.font_metrics_=new Mw(0,0,0,0),this.is_space_width_set_=!1,this.space_width_=0,this.is_ellipsis_info_set_=!1,this.ellipsis_width_=0,this.character_fallback_typeface_map_=this.font_cache_.GetCharacterFallbackTypefaceMap(this.style_);for(let o=0;o<i.family_names.length;++o){let a=new sC(i.family_names[o]);a.faces=this.font_cache_.GetFacesForFamilyAndStyle(a.family_name,this.style_),this.fonts_.push(a)}const s=new sC(j2),n=new qw;s.faces=[n],this.fonts_.push(s)}dispose(){for(let t=0;t<this.fonts_.length;++t){let i=this.fonts_[t];for(let s of i.faces)s.state=0,s.font=void 0}this.primary_font_=void 0,this.is_font_metrics_set_=!1,this.is_space_width_set_=!1,this.is_ellipsis_info_set_=!1,this.ellipsis_font_=void 0,this.fallback_typeface_to_font_map_.clear()}ResetLoadingFonts(){let t=!1;for(let i=0;i<this.fonts_.length;++i){let s=this.fonts_[i];for(let n of s.faces)n.state==1||n.state==2?(n.state=0,t||(this.primary_font_=void 0,this.is_font_metrics_set_=!1,this.is_space_width_set_=!1,this.is_ellipsis_info_set_=!1,this.ellipsis_font_=void 0)):n.state==3&&(t=!0)}}IsVisible(){for(let t=0;t<this.fonts_.length;++t)for(let i of this.fonts_[t].faces)if(i.state==1)return!1;return!0}CreateGlyphBuffer(t,i,s,n){return this.font_cache_.CreateGlyphBuffer(t,i,s,n,this)}GetTextWidth(t,i,s,n,o){return this.font_cache_.GetTextWidth(t,i,s,n,this,o)}GetFontMetrics(t){if(!t)return this.is_font_metrics_set_||(this.is_font_metrics_set_=!0,this.font_metrics_=this.GetPrimaryFont().GetFontMetrics()),this.font_metrics_;let i=this.GetPrimaryFont().GetTypefaceId(),s=this.GetFontMetrics(),n=s.ascent(),o=s.descent(),a=s.leading(),l=s.x_height();for(let c=0;c<t.length;++c){if(t[c].GetTypefaceId()==i)continue;let d=t[c].GetFontMetrics();d.ascent()>n&&(n=d.ascent()),d.descent()>o&&(o=d.descent()),d.leading()>a&&(a=d.leading()),d.x_height()>l&&(l=d.x_height())}return new Mw(n,o,a,l)}GetEllipsisValue(){return Cq}GetEllipsisFont(){return this.GenerateEllipsisInfo(),this.ellipsis_font_}GetEllipsisWidth(){return this.GenerateEllipsisInfo(),this.ellipsis_width_}GetSpaceWidth(){return this.GenerateSpaceWidth(),this.space_width_}style(){return this.style_}size(){return this.size_}GetCharacterFont(t){for(let i=0;i<this.fonts_.length;++i){let s=this.fonts_[i];for(let n of s.faces){const o=n.entry;if(!(o&&!oC(o.unicode_range,t))&&(n.state==0&&this.RequestFont(s.family_name,n),n.state==3)){let a=n.font.GetGlyphForCharacter(t);if(a!=Uw)return{font:n.font,glyph_index:a}}}}return this.GetFallbackCharacterFont(t)}GetFallbackCharacterFont(t){let i=this.character_fallback_typeface_map_.get(t);i||(i=this.font_cache_.GetCharacterFallbackTypeface(t,this.style_));let s=i.GetGlyphForCharacter(t),n=this.fallback_typeface_to_font_map_.get(i.GetId());if(!n){let o=this.font_cache_.GetFontFromTypefaceAndSize(i,this.size_);this.fallback_typeface_to_font_map_.set(i.GetId(),o),n=o}return{font:n,glyph_index:s}}GetPrimaryFont(){if(!this.primary_font_)for(let t of this.fonts_)for(let i of t.faces){let s=i.entry;if(!(s&&!oC(s.unicode_range,C0))&&(i.state==0&&this.RequestFont(t.family_name,i),i.state==3))return this.primary_font_=i.font,J(this.primary_font_),this.primary_font_}return J(this.primary_font_),this.primary_font_}RequestFont(t,i){let{font:s,state:n}=this.font_cache_.TryGetFont(t,this.style_,this.size_,i.entry);n=n||0,n==3&&(J(s),i.font=s),i.state=n}GenerateEllipsisInfo(){if(!this.is_ellipsis_info_set_){let{font:t,glyph_index:i}=this.GetCharacterFont(this.GetEllipsisValue());this.ellipsis_font_=t;let s=i||Uw;this.ellipsis_width_=this.ellipsis_font_.GetGlyphWidth(s),this.is_ellipsis_info_set_=!0}}GenerateSpaceWidth(){if(!this.is_space_width_set_){let t=this.GetPrimaryFont(),i=t.GetGlyphForCharacter(C0);t.GetGlyphWidth(i)==0&&_i(nn,"Font being used with space width of 0!"),this.is_space_width_set_=!0}}}function oC(r,e){if(!r.size)return!0;for(let t of r.values()){if(t.start>e)break;if(t.start<=e&&e<=t.end)return!0}return!1}const nS=new WeakMap;class Ek{constructor(e){u(this,"style");this.style=e}static create(e){if(!nS.has(e)){let t=new Ek(e);nS.set(e,t)}return nS.get(e)}LT(e){return this.style.weight!=e.style.weight?this.style.weight<e.style.weight:this.style.slant<e.style.slant}}const RT=class{constructor(e,t){u(this,"cached_remote_typeface_reference_");u(this,"request_timer_");this.cached_remote_typeface_reference_=new Sq(e,t,t),this.request_timer_=new gF,this.request_timer_.Start(pr.FromMilliseconds(RT.kRequestTimerDelay),t)}HasActiveRequestTimer(){return!!this.request_timer_}ClearRequestTimer(){this.request_timer_=void 0}};let kx=RT;u(kx,"kRequestTimerDelay",3e3);class Nq{constructor(e,t,i,s){u(this,"resource_provider_");u(this,"remote_typeface_cache_");u(this,"external_typeface_load_event_callback_");u(this,"language_script_");u(this,"font_face_map_",new Map);u(this,"requested_remote_typeface_cache_",new Map);u(this,"font_list_map_",new Map);u(this,"local_typeface_map_",new Map);u(this,"character_fallback_typeface_maps_",new Map);this.remote_typeface_cache_=t,this.external_typeface_load_event_callback_=i,this.resource_provider_=e,this.language_script_=s}GetFontList(e){return new Oq(this,e)}GetFontFromTypefaceAndSize(e,t){return e.CreateFontWithSize(t)}GetFacesForFamilyAndStyle(e,t){let i=[],s=this.font_face_map_.get(e);if(s){let n=s.GetEntriesThatMatchStyle(t);for(let o of n){let a=new qw;a.entry=o,i.push(a)}}else{let n=new qw;i.push(n)}return i}TryGetFont(e,t,i,s){if(s){for(let n=0;n<s.sources.length;n++){const o=s.sources[n];let{font:a,state:l}=this.TryGetRemoteFont(o.GetName(),i);return{font:a,state:l}}return{state:Jl.kUnavailableState}}else{let{font:n,state:o}=this.TryGetLocalFont(e,t,i);return{font:n,state:o}}}GetCharacterFallbackTypefaceMap(e){let t=Ek.create(e);return this.character_fallback_typeface_maps_.has(t)||this.character_fallback_typeface_maps_.set(t,new Map),this.character_fallback_typeface_maps_.get(t)}GetCharacterFallbackTypeface(e,t){return J(this.resource_provider()),this.GetCachedLocalTypeface(this.resource_provider().GetCharacterFallbackTypeface(e,t,this.language_script_))}CreateGlyphBuffer(e,t,i,s,n){return J(this.resource_provider()),this.resource_provider().CreateGlyphBuffer(e,t,i,this.language_script_,s,n)}GetTextWidth(e,t,i,s,n,o){return J(this.resource_provider()),this.resource_provider().GetTextWidth(e,t,i,this.language_script_,s,n,o)}resource_provider(){return this.resource_provider_}GetCachedLocalTypeface(e){J(e);let t=this.local_typeface_map_.get(e.GetId());return t||(t=e),t}TryGetRemoteFont(e,t){let i=this.remote_typeface_cache_.GetOrCreateCachedResource(e),s=this.requested_remote_typeface_cache_.get(e);if(!s){_i(Tp,"Requested remote font from ",e);let a=this.OnRemoteTypefaceLoadEvent.bind(this,e);s=new kx(i,a),this.requested_remote_typeface_cache_.set(e,s)}let n=i.TryGetResource(),o;return n?{font:this.GetFontFromTypefaceAndSize(n,t),state:Jl.kLoadedState}:(i.IsLoadingComplete()?o=Jl.kUnavailableState:s.HasActiveRequestTimer()?o=Jl.kLoadingWithTimerActiveState:o=Jl.kLoadingWithTimerExpiredState,{state:o})}TryGetLocalFont(e,t,i){return J(this.resource_provider()),e&&!this.resource_provider().HasLocalFontFamily(e)?{state:Jl.kUnavailableState}:{font:this.GetFontFromTypefaceAndSize(this.GetCachedLocalTypeface(this.resource_provider().GetLocalTypeface(e,t)),i),state:Jl.kLoadedState}}OnRemoteTypefaceLoadEvent(e){let t=this.requested_remote_typeface_cache_.get(e);if(t){for(let i of this.font_list_map_.values())i.font_list.ResetLoadingFonts();t.ClearRequestTimer(),this.external_typeface_load_event_callback_()}}}class Iq{constructor(e){u(this,"clock_");u(this,"sampled_clock_time_");this.clock_=e}current_time(){if(this.sampled_clock_time_)return this.sampled_clock_time_.InMilliseconds()}Sample(){this.clock_?this.sampled_clock_time_=this.clock_.Now():this.sampled_clock_time_=void 0,this.UpdateNextEventTimer()}UpdateNextEventTimer(){}}class Fq extends Iq{constructor(t,i){super(Mq(t,i));u(this,"document_");this.document_=t}}function Mq(r,e){return new EF(r.navigation_start_clock(),pr.FromMilliseconds(e))}class Rm{static CompositeAfterPaintEnabled(){return!0}}class Bq{constructor(){u(this,"state_",0);u(this,"detach_count_",0);u(this,"disallow_transition_count_",0);u(this,"life_cycle_postponed_",!1);u(this,"check_no_transition_",!1)}IsActive(){return this.state_>1&&this.state_<18}GetState(){return this.state_}StateAllowsTreeMutations(){const{state_:e}=this;return e!=3&&e!=5&&e!=14&&e!=10&&e!=12&&e!=16}StateAllowsLayoutTreeMutations(){return!!this.detach_count_||this.state_==3}StateAllowsDetach(){const{state_:e}=this;return e==2||e==3||e==4||e==7||e==11||e==15||e==13||e==17||e==18||e==1}AdvanceTo(e){if(this.StateTransitionDisallowed())return!1;if(e==18)return!0;switch(this.state_){case 0:return e==1;case 1:if(e==4)return!0;break;case 2:if(e==3||e==5||e==10||e==14)return!0;break;case 3:return e==4;case 4:if(e==3||e==5||e==4||e==7||e==11)return!0;break;case 5:return e==6;case 6:if(e==5||e==7)return!0;break;case 7:if(e==3||e==5||e==7||e==4||e==8||e==11||e==12)return!0;break;case 8:if(e==9)return!0;break;case 9:if(e==11||e==12)return!0;break;case 10:return J(!Rm.CompositeAfterPaintEnabled()),e==11;case 14:return J(!Rm.CompositeAfterPaintEnabled()),e==15;case 11:if(e==3||e==10||e==14||e==15||e==12||e==8||e==15)return!0;break;case 15:if(e==3||e==10||e==14||e==8||e==12||e==16||e==11)return!0;break;case 12:if(e==13)return!0;break;case 13:if(e==16||e==3||e==15||e==12||e==8)return!0;break;case 16:if(e==17)return!0;break;case 17:if(e==3||e==11||e==12||e==16||e==8)return!0;break;case 18:return e==19;case 19:return!1}return!1}EnsureStateAtMost(e){J(e==2||e==4||e==7),!(this.state_<=e)&&(J(this.CanRewindTo(e),"Cannot rewind document lifecycle from ",this.state_," to ",e,"."),this.state_==e||this.check_no_transition_,this.state_=e)}StateTransitionDisallowed(){return this.disallow_transition_count_}IncrementNoTransitionCount(){this.disallow_transition_count_++}DecrementNoTransitionCount(){this.disallow_transition_count_,this.disallow_transition_count_--}InDetach(){return!!this.detach_count_}IncrementDetachCount(){this.detach_count_++}DecrementDetachCount(){this.detach_count_,this.detach_count_--}LifecyclePostponed(){return this.life_cycle_postponed_}CanAdvanceTo(e){if(this.StateTransitionDisallowed())return!1;if(e==18)return!0;switch(this.state_){case 0:return e==1;case 1:if(e==4)return!0;break;case 2:if(e==3||e==5||e==10||e==14)return!0;break;case 3:return e==4;case 4:if(e==3||e==5||e==4||e==7||e==11)return!0;break;case 5:return e==6;case 6:if(e==5||e==7)return!0;break;case 7:if(e==3||e==5||e==7||e==4||e==8||e==11||e==12)return!0;break;case 8:if(e==9)return!0;break;case 9:if(e==11||e==12)return!0;break;case 10:return J(!Rm.CompositeAfterPaintEnabled()),e==11;case 14:return J(!Rm.CompositeAfterPaintEnabled()),e==15;case 11:if(e==3||e==10||e==14||e==15||e==12||e==8||e==15)return!0;break;case 15:if(e==3||e==10||e==14||e==8||e==12||e==16||e==11)return!0;break;case 12:if(e==13)return!0;break;case 13:if(e==16||e==3||e==15||e==12||e==8)return!0;break;case 16:if(e==17)return!0;break;case 17:if(e==3||e==11||e==12||e==16||e==8)return!0;break;case 18:return e==19;case 19:return!1}return!1}CanRewindTo(e){if(this.StateTransitionDisallowed())return!1;const{state_:t}=this;return t==4||t==6||t==7||t==9||t==11||t==15||t==13||t==17}SetLifecyclePostponed(){this.life_cycle_postponed_=!0}ResetLifecyclePostponed(){this.life_cycle_postponed_=!1}}function Lq(r,e,t,i){return Uq(r,e,t,i)}const wo=-1,Av=0,qa=1;function Uq(r,e,t,i){if(J(r),J(t),!r)return wo;if(!t)return qa;if(r==t)return Gq(e,i);{let c=Dm(t,r);if(c)return aC(e,di.PreviousSibling(c),wo)}{let c=Dm(r,t);if(c)return-aC(i,di.PreviousSibling(c),wo)}let s=di.CommonAncestor(r,t);if(!s)return Av;const n=Dm(r,s),o=n||di.LastChild(s),a=Dm(t,s),l=a||di.LastChild(s);return zq(o,l)}function Gq(r,e,t=Av){return r==e?t:r<e?wo:qa}function aC(r,e,t=Av){if(!e)return r?qa:t;if(!r)return wo;let i=e,s=1;for(let n of di.ChildrenOf(Tn(di.Parent(i)))){if(r==s)return n==i?t:wo;if(n==i)return qa;++s}return et(),t}function zq(r,e,t=Av){if(r==e)return t;if(!r)return wo;if(!e)return qa;Kt(di.Parent(r),di.Parent(e));let i=r,s=r,n=e,o=e;for(;;){if(i=di.PreviousSibling(i),!i)return wo;if(i==o||(s=di.NextSibling(s),!s))return qa;if(s==n)return wo;if(n=di.PreviousSibling(n),!n)return qa;if(s==n||(o=di.NextSibling(o),!o))return wo;if(i==o)return qa}return et(),t}function Dm(r,e){let t=r;for(let i of di.AncestorsOf(r)){if(i==e)return t;t=i}}class Hq{}var Tx=(r=>(r[r.kNoError=0]="kNoError",r[r.kLegacyErrorCodeMin=1]="kLegacyErrorCodeMin",r[r.kIndexSizeError=1]="kIndexSizeError",r[r.kHierarchyRequestError=3]="kHierarchyRequestError",r[r.kWrongDocumentError=4]="kWrongDocumentError",r[r.kInvalidCharacterError=5]="kInvalidCharacterError",r[r.kNoModificationAllowedError=7]="kNoModificationAllowedError",r[r.kNotFoundError=8]="kNotFoundError",r[r.kNotSupportedError=9]="kNotSupportedError",r[r.kInUseAttributeError=10]="kInUseAttributeError",r[r.kInvalidStateError=11]="kInvalidStateError",r[r.kSyntaxError=12]="kSyntaxError",r[r.kInvalidModificationError=13]="kInvalidModificationError",r[r.kNamespaceError=14]="kNamespaceError",r[r.kInvalidAccessError=15]="kInvalidAccessError",r[r.kTypeMismatchError=17]="kTypeMismatchError",r[r.kSecurityError=18]="kSecurityError",r[r.kNetworkError=19]="kNetworkError",r[r.kAbortError=20]="kAbortError",r[r.kURLMismatchError=21]="kURLMismatchError",r[r.kQuotaExceededError=22]="kQuotaExceededError",r[r.kTimeoutError=23]="kTimeoutError",r[r.kInvalidNodeTypeError=24]="kInvalidNodeTypeError",r[r.kDataCloneError=25]="kDataCloneError",r[r.kLegacyErrorCodeMax=25]="kLegacyErrorCodeMax",r[r.kEncodingError=26]="kEncodingError",r[r.kNotReadableError=27]="kNotReadableError",r[r.kUnknownError=28]="kUnknownError",r[r.kConstraintError=29]="kConstraintError",r[r.kDataError=30]="kDataError",r[r.kTransactionInactiveError=31]="kTransactionInactiveError",r[r.kReadOnlyError=32]="kReadOnlyError",r[r.kVersionError=33]="kVersionError",r[r.kOperationError=34]="kOperationError",r[r.kNotAllowedError=35]="kNotAllowedError",r[r.kPathExistsError=36]="kPathExistsError",r[r.kPermissionDeniedError=37]="kPermissionDeniedError",r[r.kBreakError=38]="kBreakError",r[r.kBufferOverrunError=39]="kBufferOverrunError",r[r.kFramingError=40]="kFramingError",r[r.kParityError=41]="kParityError",r[r.kWebTransportError=42]="kWebTransportError",r[r.kNumOfCodes=43]="kNumOfCodes",r))(Tx||{});class Ry{constructor(e){u(this,"container_node_");u(this,"child_before_boundary_");u(this,"offset_in_container_");this.container_node_=e,this.offset_in_container_=0}Container(){return this.container_node_}Offset(){return this.offset_in_container_}ChildBefore(){return this.child_before_boundary_}Set(e,t,i){$n(t,0),this.container_node_=e,this.offset_in_container_=t,this.child_before_boundary_=i}SetOffset(e){J(this.container_node_),$n(this.offset_in_container_,0),J(!this.child_before_boundary_),this.offset_in_container_=e}EQ(e){return this.child_before_boundary_===e.child_before_boundary_&&this.container_node_===e.container_node_&&this.offset_in_container_===e.offset_in_container_}CLONE(){let e=new Ry(this.container_node_);return e.child_before_boundary_=this.child_before_boundary_,e.offset_in_container_=this.offset_in_container_,e}}class N0 extends Hq{constructor(t,i,s,n,o){super();u(this,"start_");u(this,"end_");this.start_=new Ry(t),this.end_=new Ry(t),this.setStart(i,s),this.setEnd(n,o)}static createFromDoc(t){return new N0(t,t,0,t,0)}collapsed(){return this.start_.EQ(this.end_)}endContainer(){return this.end_.Container()}endOffset(){return this.end_.Offset()}startContainer(){return this.start_.Container()}startOffset(){return this.start_.Offset()}setStart(t,i){J(t);let s=this.CheckNodeWOffset(t,i);this.start_.Set(t,i,s)}setEnd(t,i){let s=this.CheckNodeWOffset(t,i);this.end_.Set(t,i,s)}collapse(t){t?this.end_=this.start_.CLONE():this.start_=this.end_.CLONE()}CheckNodeWOffset(t,i){switch(t.getNodeType()){case bo.kCommentNode:case bo.kTextNode:if(i>Tn(t.AsCharacterData()).length()){debugger;throw new ax("The offset "+i+" is larger than the node's length ("+Tn(t.AsCharacterData()).length()+").",Tx.kIndexSizeError)}else if(i>Number.MAX_SAFE_INTEGER)throw new ax("The offset "+i+" is invalid.",Tx.kIndexSizeError);return;case bo.kDocumentNode:case bo.kElementNode:{if(!i)return;if(i>Number.MAX_SAFE_INTEGER)throw new ax("The offset "+i+" is invalid.",Tx.kIndexSizeError);let s=di.ChildAt(t,i-1);return s||et(),s}}et()}compareBoundaryPointInstances(t,i){return this.compareBoundaryPointsValues(t.Container(),t.Offset(),i.Container(),i.Offset())}compareBoundaryPointsValues(t,i,s,n){return Lq(t,i,s,n)}}var Px=(r=>(r.None="None",r.Caret="Caret",r.Range="Range",r))(Px||{});class jq extends zt{constructor(t){super();u(this,"_onDidChange",this._register(new Dt));u(this,"_doc");u(this,"ranges",[]);this._doc=t}get onDidChange(){return this._onDidChange.event}get anchorNode(){return this.ranges.length?this.ranges[0].startContainer():null}get anchorOffset(){return this.ranges.length?this.ranges[0].startOffset():0}get focusNode(){return this.ranges.length?this.ranges[0].endContainer():null}get focusOffset(){return this.ranges.length?this.ranges[0].endOffset():0}get type(){return this.ranges.length?this.ranges[0].collapsed()?"Caret":"Range":"None"}get isCollapsed(){return this.ranges.length?this.ranges[0].collapsed():!1}get rangeCount(){return this.ranges.length}addRange(t){this.ranges.length=0,this.ranges.push(t),this._onDidChange.fire()}getRangeAt(t=0){return this.ranges.length?this.ranges[0]:null}removeAllRanges(){this.ranges.length=0,this._onDidChange.fire()}extend(t,i=0){return ze()}collapse(t,i=0){if(!t){this.removeAllRanges();return}if(N0.prototype.CheckNodeWOffset(t,i),!this.IsValidForPosition(t))return;let s=N0.createFromDoc(this._doc);s.setStart(t,i),s.setEnd(t,i),this.addRange(s)}IsValidForPosition(t){return t?t.GetDocument()===this._doc&&t.isConnected():!0}}class Vq{constructor(e,t,i,s){this.window=e,this.navigation_start_clock=t,this.viewport_size=i,this.dom_max_element_depth=s}}class Wq extends ON{constructor(t,i){super(Is.kCreateDocument);u(this,"html_element_factory_",new bq);u(this,"observers_",[]);u(this,"html_element_context_");u(this,"window_");u(this,"viewport_size_");u(this,"font_cache_");u(this,"is_computed_style_dirty_",!0);u(this,"initial_computed_style_declaration_",new qc);u(this,"initial_computed_style_data_",null);u(this,"dom_max_element_depth_");u(this,"default_timeline_");u(this,"navigation_start_clock_");u(this,"loading_counter_",0);u(this,"should_dispatch_load_event_",!0);u(this,"finishedFirstLoad",!1);u(this,"synchronous_layout_callback_");u(this,"synchronous_layout_and_produce_render_tree_callback_");u(this,"lifecycle_",new Bq);u(this,"elements_by_id",new Map);u(this,"_selection");J(t),this.html_element_context_=t,this.window_=i.window,this.dom_max_element_depth_=i.dom_max_element_depth,this.node_document_=this,i.viewport_size&&this.SetViewport(i.viewport_size),this.font_cache_=new Nq(t.resource_provider(),t.remote_typeface_cache(),this.OnTypefaceLoadEvent.bind(this),t.font_language_script()),this.navigation_start_clock_=i.navigation_start_clock||new vF,this.default_timeline_=new Fq(this,0),this.OnInsertedIntoDocument()}Accept(t){t.VisitDocument(this)}getNodeType(){return bo.kDocumentNode}get nodeName(){return"#document"}Lifecycle(){return this.lifecycle_}OnDOMMutation(){this.is_computed_style_dirty_=!0,this.RecordMutation(),this.finishedFirstLoad&&this.DispatchOnLoadEvent()}OnTypefaceLoadEvent(){let t=this.html();t&&t.InvalidateLayoutBoxesOfNodeAndDescendants(),this.RecordMutation()}createElement(t){let i=t.toLocaleLowerCase();return this.html_element_factory_.CreateElement(this,i)}createTextNode(t){return new wv(this,t)}documentElement(){return this.first_element_child()}getSelection(){return this._selection||(this._selection=new jq(this)),this._selection}createRange(){return new N0(this,this,0,this,0)}html(){return this.documentElement()||null}body(){let t=this.html();if(!t)return null;for(let i=t.first_element_child();i;i=i.nextElementSibling){let s=i.AsHTMLElement();if(s){let n=s.AsHTMLBodyElement();if(n)return n}}return null}font_cache(){return this.font_cache_}IsXMLDocument(){return!1}SetViewport(t){if(this.viewport_size_&&this.viewport_size_==t)return;this.viewport_size_=t,this.initial_computed_style_data_=Pq(this.viewport_size_.width_height()),this.initial_computed_style_declaration_.SetData(this.initial_computed_style_data_),this.is_computed_style_dirty_=!0;let i=this.html();i&&i.InvalidateComputedStylesOfNodeAndDescendants(),this.RecordMutation()}navigation_start_clock(){return this.navigation_start_clock_}initial_computed_style_data(){return this.initial_computed_style_data_}dom_max_element_depth(){return this.dom_max_element_depth_}html_element_context(){return this.html_element_context_}IncreaseLoadingCounter(){++this.loading_counter_}DecreaseLoadingCounter(){--this.loading_counter_}DecreaseLoadingCounterAndMaybeDispatchLoadEvent(){this.loading_counter_,this.loading_counter_--,this.loading_counter_==0&&this.should_dispatch_load_event_&&(this.should_dispatch_load_event_=!1,this.DispatchOnLoadEvent())}AddObserver(t){this.observers_.push(t)}RecordMutation(){this.observers_.forEach(t=>t.OnMutation())}SetSynchronousLayoutCallback(t){this.synchronous_layout_callback_=t}SetSynchronousLayoutAndProduceRenderTreeCallback(t){this.synchronous_layout_and_produce_render_tree_callback_=t}UpdateComputedStyles(){if(this.is_computed_style_dirty_){let t=this.html();t&&(Kt(this,t.parentNode),t.UpdateComputedStyle(this.initial_computed_style_declaration_,this.initial_computed_style_data_,HI.kAncestorsAreDisplayed),t.UpdateComputedStyleRecursively(t.computed_style_declaration(),t.computed_style(),!0,0)),this.is_computed_style_dirty_=!1}}viewport_size(){return this.viewport_size_}SampleTimelineTime(){this.default_timeline_.Sample()}timeline(){return this.default_timeline_}DispatchOnLoadEvent(){this.SignalOnLoadToObservers()}onCreated(t){t(),this.finishedFirstLoad=!0,this.DispatchOnLoadEvent()}SignalOnLoadToObservers(){this.observers_.forEach(t=>t.OnLoad())}Duplicate(){et()}onNodeInserted(t){if(t.IsElement()){const i=t.id;if(!i)return;J(!this.elements_by_id.has(i)),this.elements_by_id.set(i,t)}}onNodeRemoved(t){if(t.IsElement()){const i=t.id;if(!i)return;const s=this.elements_by_id.get(i);J(s),this.elements_by_id.delete(i)}}getElementById(t){return this.elements_by_id.get(t)}}class $q{constructor(e,t,i,s){u(this,"resource_provider_");u(this,"image_cache_");u(this,"font_language_script_");u(this,"remote_typeface_cache_");this.resource_provider_=e,this.image_cache_=t,this.remote_typeface_cache_=i,this.font_language_script_=s}font_language_script(){return this.font_language_script_}resource_provider(){return this.resource_provider_}image_cache(){return this.image_cache_}remote_typeface_cache(){return this.remote_typeface_cache_}}class Kq{constructor(e,t){u(this,"navigation_start_");u(this,"navigation_start_clock_");this.navigation_start_=t,this.navigation_start_clock_=new EF(e,e.Now())}navigation_start(){return this.navigation_start_.ToInternalValue()}GetNavigationStartClock(){return this.navigation_start_clock_}}class Qw{constructor(e){u(this,"time_origin_");u(this,"timing_");this.time_origin_=Si.Now(),this.timing_=new Kq(e,this.time_origin_)}timing(){return this.timing_}SetApplicationStartOrPreloadTimestamp(e,t){}}u(Qw,"kPerformanceTimerMinResolutionInMicroseconds",20),u(Qw,"kMaxResourceTimingBufferSize",250);class Xq{constructor(e,t,i,s,n,o){u(this,"document_");u(this,"html_element_context_");u(this,"performance_");this.html_element_context_=new $q(t,i,s,n),this.performance_=new Qw(Yq()),this.document_=new Wq(this.html_element_context_,new Vq(this,this.performance_.timing().GetNavigationStartClock(),e,o))}document(){return this.document_}performance(){return this.performance_}html_element_context(){return this.html_element_context_}}function Yq(){return new vF}function qq(){return"en-US"}class SF{}class wF{}class Qq extends SF{constructor(){super(...arguments);u(this,"result_","");u(this,"indent_",0)}VisitClearRectNode(t){this.AddNamedNodeString(t,"ClearRectNode"),this.result_+=`
`}VisitCompositionNode(t){this.AddNamedNodeString(t,"CompositionNode"),this.result_+=`
`,this.indent_++;let i=t.data().children();for(let s of i)s.Accept(this);this.indent_--}VisitMatrixTransformNode(t){this.AddNamedNodeString(t,"MatrixTransformNode"),this.result_+=`
`,this.indent_++,t.data().source.Accept(this),this.indent_--}VisitRectNode(t){if(this.AddNamedNodeString(t,"RectNode "),t.data().background_brush){let i=new Jq;t.data().background_brush.Accept(i),this.result_+=i.brush_type()}this.result_+=`
`}VisitTextNode(t){this.AddNamedNodeString(t,"TextNode"),this.result_+=`
`}VisitFreehandNode(t){this.AddNamedNodeString(t,"FreehandNode"),this.result_+=`
`}Result(){return this.result_}AddNamedNodeString(t,i){this.AddIndentString(),this.result_+=i,this.result_+=" ",this.AddNodeInfoString(t)}AddIndentString(){this.result_+=new Array(this.indent_*2).fill(" ").join("")}AddNodeInfoString(t){let i=t.GetBounds();this.result_+="{ Bounds: (",this.result_+=i.x(),this.result_+=", ",this.result_+=i.y(),this.result_+=", ",this.result_+=i.width(),this.result_+=", ",this.result_+=i.height(),this.result_+=") }"}VisitImageNode(t){this.AddNamedNodeString(t,"ImageNode"),this.result_+=`
`}}class Jq extends wF{constructor(){super(...arguments);u(this,"brush_type_","")}brush_type(){return this.brush_type_}visitLinearGradientBrush(t){this.brush_type_="(LinearGradientBrush)"}visitRadialGradientBrush(t){this.brush_type_="(RadialGradientBrush)"}visitSolidColorBrush(t){this.brush_type_="(SolidColorBrush)"}}function lC(r){let e=new Qq;return r.Accept(e),e.Result()}function uC(r,e){const t=r.GetTextStartPosition(),i=r.GetTextEndPosition();return t<=e&&i>=e}class Zq{constructor(e){u(this,"selected",new Set);this.layoutManager=e}update(e){switch(this.clearSelectionBackground(),e.type){case Px.None:case Px.Caret:break;case Px.Range:this.doUpdateSelection(e);break}}clearSelectionBackground(){for(let e of this.selected)e.unsetSelection()}doUpdateSelection(e){const{anchorNode:t,focusNode:i,anchorOffset:s,focusOffset:n}=e;return J(t),J(i),J(s),J(n),t.IsText()?this.doUpdateSelectionInsideText(e):this.doUpdateSelectionInsideElement(e)}doUpdateSelectionInsideText(e){const{anchorNode:t,focusNode:i,anchorOffset:s,focusOffset:n}=e;J(t),J(i),J(s),J(n);let o=t.AsText(),a=i.AsText();return o.parentNode!==a.parentNode?this.updateMultiParagraphSelection(o,a,s,n):this.updateSingleParagraphSelection(o,a,s,n)}doUpdateSelectionInsideElement(e){const{anchorNode:t,focusNode:i,anchorOffset:s,focusOffset:n}=e;J(t),J(i),J(s),J(n);const o=t.AsElement(),a=i.AsElement();J(o===a);let l=[];if(o.nodeName===wd.kTagName)for(let c=s;c<n;c++){const d=o.childNodes[c];J(d==null?void 0:d.IsElement()),l.push(d.AsHTMLElement())}else o.nodeName===no.kTagName?l.push(o.AsHTMLElement()):et();this.updateSelectionOfP(l)}updateSelectionOfP(e){J(e.length);const t=Array.from(e).map(i=>this.layoutManager.getParagraphOfNode(i.firstChild));for(let i of t){const s=this.layoutManager.getRTreeItemsByParagraph(i);for(let n of s){const o=n.box,a=o.GetTextStartPosition(),l=o.GetTextEndPosition();o.setSelection(a,l),this.selected.add(o)}}}updateMultiParagraphSelection(e,t,i,s){const n=di.CommonAncestor(e,t);J(n),Kt(n,n.parentNode.parentNode);const o=Array.from(n.childNodes).filter(P=>P==null?void 0:P.IsElement()).map(P=>this.layoutManager.getParagraphOfNode(P.firstChild)),a=this.layoutManager.getParagraphOfNode(e);J(a);const l=this.layoutManager.getParagraphOfNode(t);J(l);const c=o.indexOf(a),d=o.indexOf(l),f=Math.min(c,d),g=Math.max(c,d),x=f===c?i:s,E=f===c?s:i;for(let P=f;P<=g;P++){const b=this.layoutManager.getRTreeItemsByParagraph(o[P]);if(P===f)for(let D of b){const C=D.box,O=C.GetTextStartPosition(),N=C.GetTextEndPosition();N>x&&(C.setSelection(Math.max(O,x),N),this.selected.add(C))}else if(P===g)for(let D of b){const C=D.box,O=C.GetTextStartPosition(),N=C.GetTextEndPosition();O<E&&(C.setSelection(O,Math.min(N,E)),this.selected.add(C))}else for(let D of b){const C=D.box,O=C.GetTextStartPosition(),N=C.GetTextEndPosition();C.setSelection(O,N),this.selected.add(C)}}}updateSingleParagraphSelection(e,t,i,s){const n=this.layoutManager.getParagraphOfNode(e);if(e!==t){const c=this.layoutManager.getParagraphOfNode(t);n!==c&&et()}J(n);const o=this.layoutManager.getRTreeItemsByParagraph(n),a=Math.min(i,s),l=Math.max(i,s);for(let c of o){const d=c.box,f=d.GetTextStartPosition(),g=d.GetTextEndPosition();let x=uC(d,a),E=uC(d,l);x&&!E?(d.setSelection(a,g),this.selected.add(d)):x&&E?(d.setSelection(a,l),this.selected.add(d)):!x&&E?(d.setSelection(f,l),this.selected.add(d)):a<=f&&l>=g&&(d.setSelection(f,g),this.selected.add(d))}}}const Dy=1e-4;class Nr{constructor(e=0,t=0){u(this,"horizontal");u(this,"vertical");this.horizontal=e,this.vertical=t}IsSquare(){return this.horizontal<=Dy||this.vertical<=Dy}Inset(e,t){return new Nr(Math.max(0,this.horizontal-e),Math.max(0,this.vertical-t))}COPY(){return new Nr(this.horizontal,this.vertical)}EQ(e){return this.horizontal==e.horizontal&&this.vertical==e.vertical}GE(e){return this.horizontal>=e.horizontal&&this.vertical>=e.vertical}}class Lc{constructor(e,t,i,s){u(this,"top_left",new Nr);u(this,"top_right",new Nr);u(this,"bottom_right",new Nr);u(this,"bottom_left",new Nr);if(!!arguments.length)if(arguments.length==1)if(e instanceof Nr)this.top_left=e.COPY(),this.top_right=e.COPY(),this.bottom_right=e.COPY(),this.bottom_left=e.COPY();else if(e instanceof Lc)this.top_left=e.top_left.COPY(),this.top_right=e.top_right.COPY(),this.bottom_right=e.bottom_right.COPY(),this.bottom_left=e.bottom_left.COPY();else throw new Error("400");else arguments.length==2?(this.top_left=new Nr(e,t),this.top_right=new Nr(e,t),this.bottom_right=new Nr(e,t),this.bottom_left=new Nr(e,t)):(this.top_left=e,this.top_right=t,this.bottom_right=i,this.bottom_left=s)}EQ(e){return this.top_left.EQ(e.top_left)&&this.top_right.EQ(e.top_right)&&this.bottom_right.EQ(e.bottom_right)&&this.bottom_left.EQ(e.bottom_left)}Inset(e,t,i,s){let n,o,a,l;if(arguments.length===4)l=e,n=t,o=i,a=s;else{let c=e;l=c.left(),n=c.top(),o=c.right(),a=c.bottom()}return new Lc(this.top_left.Inset(l,n),this.top_right.Inset(o,n),this.bottom_right.Inset(o,a),this.bottom_left.Inset(l,a))}Scale(e,t){return new Lc(new Nr(this.top_left.horizontal*e,this.top_left.vertical*t),new Nr(this.top_right.horizontal*e,this.top_right.vertical*t),new Nr(this.bottom_right.horizontal*e,this.bottom_right.vertical*t),new Nr(this.bottom_left.horizontal*e,this.bottom_left.vertical*t))}Normalize(e){let t=1,i;return i=this.top_left.horizontal+Math.max(this.top_right.horizontal,this.bottom_right.horizontal),i>e.width()&&(t=e.width()/i),i=this.bottom_left.horizontal+Math.max(this.bottom_right.horizontal,this.top_right.horizontal),i>e.width()&&(t=Math.min(e.width()/i,t)),i=this.top_left.vertical+Math.max(this.bottom_left.vertical,this.bottom_right.vertical),i>e.height()&&(t=Math.min(e.height()/i,t)),i=this.top_right.vertical+Math.max(this.bottom_right.vertical,this.bottom_left.vertical),i>e.height()&&(t=Math.min(e.height()/i,t)),t=Math.max(t,0),this.Scale(t,t)}IsNormalized(e){const t=e.width()+Dy,i=e.height()+Dy;return this.top_left.horizontal+this.top_right.horizontal<=t&&this.bottom_left.horizontal+this.bottom_right.horizontal<=t&&this.top_left.vertical+this.bottom_left.vertical<=i&&this.top_right.vertical+this.bottom_right.vertical<=i&&this.top_left.horizontal+this.bottom_right.horizontal<=t&&this.bottom_left.horizontal+this.top_right.horizontal<=t&&this.top_left.vertical+this.bottom_right.vertical<=i&&this.top_right.vertical+this.bottom_left.vertical<=i}AreSquares(){return this.top_left.IsSquare()&&this.top_right.IsSquare()&&this.bottom_right.IsSquare()&&this.bottom_left.IsSquare()}AllCornersEqual(e){return this.top_left.EQ(e)&&this.top_right.EQ(e)&&this.bottom_right.EQ(e)&&this.bottom_left.EQ(e)}AllCornersGE(e){return this.top_left.GE(e)&&this.top_right.GE(e)&&this.bottom_right.GE(e)&&this.bottom_left.GE(e)}}const ia=class{constructor(e){u(this,"value_",0);if(!arguments.length)return;let t;e instanceof ia?this.value_=e.value_:Bx(e)?(t=e,this.value_=t*ia.kFixedPointRatio):ze()}static Max(e,...t){let i=e;for(let s of t)s.GT(i)&&(i=s);return i}static MaxValue(){return new ia(Number.POSITIVE_INFINITY)}static Min(e,...t){let i=e;for(let s of t)s.LT(i)&&(i=s);return i}toFloat(){return this.value_/ia.kFixedPointRatio}LT(e){return this.value_<e.value_}LE(e){return this.value_<=e.value_}GT(e){return this.value_>e.value_}GE(e){return this.value_>=e.value_}EQ(e){return this.value_==e.value_}NE(e){return this.value_!==e.value_}EqualOrNaN(e){return Number.isNaN(this.value_)||Number.isNaN(e.value_)||this.EQ(e)}POS(){return new ia(this.value_)}NEG(){return new ia(-this.value_)}ADD_ASSIGN(e){return this.value_+=e.value_,this}ADD(e){return this.CLONE().ADD_ASSIGN(e)}SUB_ASSIGN(e){return this.value_-=e.value_,this}SUB(e){return this.CLONE().SUB_ASSIGN(e)}CLONE(){let e=new ia;return e.value_=this.value_,e}MUL_ASSIGN(e){return this.value_=bs(this.value_*e),this}DIV_ASSIGN(e){return this.value_=bs(this.value_/e),this}MUL(e){return this.CLONE().MUL_ASSIGN(e)}DIV(e){return this.CLONE().DIV_ASSIGN(e)}toString(){return this.toFloat().toString()}};let me=ia;u(me,"kFixedPointRatio",64),u(me,"zero",new ia(0));class eQ{constructor(e,t){u(this,"font_cache_");u(this,"font_list_key_",new Dq);u(this,"last_font_family_refptr_");u(this,"last_font_style_refptr_");u(this,"last_font_weight_refptr_");u(this,"last_font_list_");this.font_cache_=t}GetUsedFontList(e,t,i,s){let n=AF(t);if(this.last_font_list_&&this.last_font_list_.size()==n&&this.last_font_family_refptr_==e&&this.last_font_style_refptr_==i&&this.last_font_weight_refptr_==s)return this.last_font_list_;this.font_list_key_.family_names.length=0;let o=new rQ(this.font_list_key_.family_names);e.Accept(o);let a=i,l=s;return this.font_list_key_.style=nQ(a.value(),l.value()),this.font_list_key_.size=n,this.last_font_family_refptr_=e,this.last_font_style_refptr_=i,this.last_font_weight_refptr_=s,this.last_font_list_=this.font_cache_.GetFontList(this.font_list_key_),this.last_font_list_}CleanupAfterLayout(){this.last_font_family_refptr_=void 0,this.last_font_style_refptr_=void 0,this.last_font_weight_refptr_=void 0,this.last_font_list_=void 0}}function AF(r){let e=r;return Kt(Ft.kPixelsUnit,e.unit()),e.value()}class tQ extends jr{constructor(t){super();u(this,"frame_size_");u(this,"rounded_corner_");this.frame_size_=t}VisitLength(t){t.value()>0?this.rounded_corner_=new Nr(t.value(),t.value()):this.rounded_corner_=void 0}VisitPercentage(t){t.value()>0?this.rounded_corner_=new Nr(t.value()*this.frame_size_.width(),t.value()*this.frame_size_.height()):this.rounded_corner_=void 0}rounded_corner(){return this.rounded_corner_}}class rQ extends jr{constructor(t){super();u(this,"family_names_");this.family_names_=t}VisitKeyword(t){switch(t.value()){case _.kCurrentColor:case _.kCursive:case _.kFantasy:case _.kMonospace:case _.kSansSerif:case _.kSerif:this.family_names_.push(t.ToString());break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kScroll:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}VisitPropertyList(t){let i=t.value().length;for(let s=0;s<i;++s)t.value()[s].Accept(this)}VisitString(t){this.family_names_.push(t.value())}}class Sk extends jr{constructor(t,i=!1){super();u(this,"percentage_base_");u(this,"calc_permitted_");u(this,"used_length_");u(this,"depends_on_containing_block_",!1);this.percentage_base_=t,this.calc_permitted_=i}VisitLength(t){this.depends_on_containing_block_=!1,Kt(Ft.kPixelsUnit,t.unit()),this.used_length_=new me(t.value())}VisitPercentage(t){this.depends_on_containing_block_=!0,this.used_length_=this.percentage_base_.MUL(t.value())}depends_on_containing_block(){return this.depends_on_containing_block_}used_length(){return this.used_length_}}class _s extends Sk{VisitKeyword(e){switch(e.value()){case _.kAuto:this.depends_on_containing_block_=!0;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}function wk(r,e){let t=new _s(e.width());return r.left.Accept(t),t.used_length()}function bF(r,e){let t=new _s(e.width());return r.right.Accept(t),t.used_length()}function Ak(r,e){let t=new _s(e.height());return r.top.Accept(t),t.used_length()}function kF(r,e){let t=new _s(e.height());return r.bottom.Accept(t),t.used_length()}function TF(r){return new me(ud(r.border_left_width))}function PF(r){return new me(r.border_top_width.value())}function RF(r){return new me(r.border_right_width.value())}function DF(r){return new me(r.border_bottom_width.value())}function CF(r,e){let t=new _s(e.width());return r.padding_left.Accept(t),t.used_length()}function OF(r,e){let t=new _s(e.width());return r.padding_top.Accept(t),t.used_length()}function NF(r,e){let t=new _s(e.width());return r.padding_right.Accept(t),t.used_length()}function IF(r,e){let t=new _s(e.width());return r.padding_bottom.Accept(t),t.used_length()}function en(r){let e=r;return new hh(e.value())}function iQ(r,e){let t=e;Kt(t.value().length);let i=t.value()[0],s=i.percentage_value().value()*r.width()+i.length_value().value(),n=t.value()[1],o=n.percentage_value().value()*r.height()+n.length_value().value();return new rn(r.x()+s,r.y()+o)}function ud(r){let e=r;Kt(e.unit(),Ft.kPixelsUnit);let t=new me(e.value());return t.LT(new me)&&(_i(nn,"Invalid non-negative layout length ",t.toFloat(),", original length was ",e.value()),t=new me),t}function bk(r,e,t=void 0){let i=new _s(e.height());return r.height.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}function kk(r,e){let t=new _s(e.width());return r.margin_top.Accept(t),t.used_length()}function Tk(r,e){let t=new _s(e.width());return r.margin_bottom.Accept(t),t.used_length()}function FF(r,e,t=void 0){let i=new _s(e.width());return r.width.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}function bv(r,e){let t=new _s(e.width());return r.margin_left.Accept(t),t.used_length()}function kv(r,e){let t=new _s(e.width());return r.margin_right.Accept(t),t.used_length()}class MF extends Sk{constructor(e){super(e)}VisitKeyword(e){switch(e.value()){case _.kNone:this.depends_on_containing_block_=!0;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}function BF(r,e,t=void 0){let i=new MF(e.width());return r.max_width.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}class LF extends Sk{constructor(e){super(e)}VisitKeyword(e){switch(e.value()){case _.kAuto:this.depends_on_containing_block_=!1;break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kBackwards:case _.kBaseline:case _.kBlock:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlex:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kInline:case _.kInlineBlock:case _.kInlineFlex:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNone:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et()}}}function UF(r,e,t=void 0){let i=new LF(e.width());return r.min_width.Accept(i),t&&(t.depends_on_containing_block=i.depends_on_containing_block()),i.used_length()}function GF(r,e){let t=new MF(e.height());return r.max_height.Accept(t),t.used_length()}function zF(r,e){let t=new LF(e.height());return r.min_height.Accept(t),t.used_length()}function HF(r){let e=r;return Kt(e.unit(),Ft.kPixelsUnit),new me(e.value())}function nQ(r,e){let t=go.kNormalWeight;switch(e){case ea.kThinAka100:t=go.kThinWeight;break;case ea.kExtraLightAka200:t=go.kExtraLightWeight;break;case ea.kLightAka300:t=go.kLightWeight;break;case ea.kNormalAka400:t=go.kNormalWeight;break;case ea.kMediumAka500:t=go.kMediumWeight;break;case ea.kSemiBoldAka600:t=go.kSemiBoldWeight;break;case ea.kBoldAka700:t=go.kBoldWeight;break;case ea.kExtraBoldAka800:t=go.kExtraBoldWeight;break;case ea.kBlackAka900:t=go.kBlackWeight;break}let i=r==r3.kItalic?Bw.kItalicSlant:Bw.kUprightSlant;return new N2(t,i)}class jF extends jr{constructor(t,i){super();u(this,"font_metrics_");u(this,"font_size_");u(this,"used_line_height_",new me);u(this,"half_leading_",new me);this.font_metrics_=t,this.font_size_=i}VisitKeyword(t){Kt(_.kNormal,t.value()),this.used_line_height_=new me(this.font_metrics_.em_box_height()),this.UpdateHalfLeading()}VisitLength(t){Kt(Ft.kPixelsUnit,t.unit()),this.used_line_height_=new me(t.value()),this.UpdateHalfLeading()}VisitNumber(t){let i=AF(this.font_size_);this.used_line_height_=new me(t.value()*i),this.UpdateHalfLeading()}used_line_height(){return this.used_line_height_}half_leading(){return this.half_leading_}baseline_offset_from_top(){return new me(this.font_metrics_.ascent()).ADD(this.half_leading_)}baseline_offset_from_bottom(){return new me(this.font_metrics_.descent()).ADD(this.half_leading_)}UpdateHalfLeading(){this.half_leading_=this.used_line_height_.SUB(new me(this.font_metrics_.ascent()+this.font_metrics_.descent())).DIV(2)}}function sQ(r){const e=r.GetClientRect();return{minX:e.left().toFloat(),minY:e.top().toFloat(),maxX:e.right().toFloat(),maxY:e.bottom().toFloat(),box:r}}class ci{constructor(e,t){u(this,"x_");u(this,"y_");arguments.length?arguments.length===1&&e instanceof ci?(this.x_=e.x_,this.y_=e.y_):(this.x_=e,this.y_=t):(this.x_=new me,this.y_=new me)}SetVector(e,t){this.x_=e,this.y_=t}x(){return this.x_}set_x(e){this.x_=e}y(){return this.y_}set_y(e){this.y_=e}IsZero(){return this.x_.EQ(new me)&&this.y_.EQ(new me)}ADD(e){return this.x_.ADD_ASSIGN(e.x_),this.y_.ADD_ASSIGN(e.y_),this}SUB(e){return this.x_.SUB_ASSIGN(e.x_),this.y_.SUB_ASSIGN(e.y_),this}ADD_ASSIGN(e){return this.ADD(e)}SUB_ASSIGN(e){return this.SUB(e)}get 0(){return this.x_}get 1(){return this.y_}SetToMin(e){this.x_=this.x_.LE(e.x_)?this.x_:e.x_,this.y_=this.y_.LE(e.y_)?this.y_:e.y_}SetToMax(e){this.x_=this.x_.GE(e.x_)?this.x_:e.x_,this.y_=this.y_.GE(e.y_)?this.y_:e.y_}toString(){return`[${this.x_} ${this.y_}]`}toVector2dF(){return new rn(this.x_.toFloat(),this.y_.toFloat())}EQ(e){return this.x()==e.x()&&this.y()==e.y()}NE(e){return!this.EQ(e)}NEG(){return new ci(new me(-this.x()),new me(-this.y()))}}class wn{constructor(e=new me,t=new me,i=new me,s=new me){u(this,"left_");u(this,"top_");u(this,"right_");u(this,"bottom_");this.left_=e,this.top_=t,this.right_=i,this.bottom_=s}left(){return this.left_}set_left(e){this.left_=e.CLONE()}top(){return this.top_}set_top(e){this.top_=e.CLONE()}right(){return this.right_}set_right(e){this.right_=e.CLONE()}bottom(){return this.bottom_}set_bottom(e){this.bottom_=e.CLONE()}SetInsets(e,t,i,s){this.left_=e.CLONE(),this.top_=t.CLONE(),this.right_=i.CLONE(),this.bottom_=s.CLONE()}EQ(e){return this.left_.EQ(e.left_)&&this.top_.EQ(e.top_)&&this.right_.EQ(e.right_)&&this.bottom_.EQ(e.bottom_)}NE(e){return!this.EQ(e)}ASS_ASSIGN(e){this.left_.ADD_ASSIGN(e.left_),this.top_.ADD_ASSIGN(e.top_),this.right_.ADD_ASSIGN(e.right_),this.bottom_.ADD_ASSIGN(e.bottom_)}ADD(e){return new wn(this.left_.ADD(e.left_),this.top_.ADD(e.top_),this.right_.ADD(e.right_),this.bottom_.ADD(e.bottom_))}toString(){return`${this.left_},${this.top_},${this.right_},${this.bottom_}`}zero(){return this.left_.EQ(new me)&&this.top_.EQ(new me)&&this.right_.EQ(new me)&&this.bottom_.EQ(new me)}NEG(){return new wn(this.left_.NEG(),this.top_.NEG(),this.right_.NEG(),this.bottom_.NEG())}}class Jw extends el{}class An{constructor(e,t){u(this,"width_",new me);u(this,"height_",new me);if(arguments.length==1)if(e instanceof An){let i=e;this.width_=i.width_.CLONE(),this.height_=i.height_.CLONE()}else e instanceof el?(this.width_=new me(e.width()),this.height_=new me(e.height())):ze();else arguments.length==2&&(this.width_=e.CLONE(),this.height_=t.CLONE())}IsEmpty(){throw new Error("")}width(){return this.width_}height(){return this.height_}set_width(e){this.width_=e.CLONE()}set_height(e){this.height_=e.CLONE()}SetSize(e,t){this.set_width(e),this.set_height(t)}Enlarge(e,t){this.set_width(this.width_.ADD(e)),this.set_height(this.height_.ADD(t))}SetToMin(e){this.width_=this.width_.LE(e.width_)?this.width_:e.width_,this.height_=this.height_.LE(e.height_)?this.height_:e.height_}SetToMax(e){this.width_=this.width_.GE(e.width_)?this.width_:e.width_.CLONE(),this.height_=this.height_.GE(e.height_)?this.height_:e.height_.CLONE()}toSizeF(){return new Jw(this.width().toFloat(),this.height().toFloat())}Scale(e,t=e){this.SetSize(this.width().MUL(e),this.height().MUL(t))}EQ(e){return this.width_.EQ(e.width_)&&this.height_.EQ(e.height_)}NE(e){return!this.EQ(e)}toString(){return JSON.stringify({width:this.width_.toFloat(),height:this.height_.toFloat()})}CLONE(){return new An(this.width_,this.height_)}}var tr=(r=>(r[r.kRightToLeftBaseDirection=0]="kRightToLeftBaseDirection",r[r.kLeftToRightBaseDirection=1]="kLeftToRightBaseDirection",r))(tr||{});class Ts{constructor(e,t){u(this,"x_",new me);u(this,"y_",new me);if(arguments.length==1){let i=e;this.x_=i.x_.CLONE(),this.y_=i.y_.CLONE()}else this.x_=e.CLONE(),this.y_=t.CLONE()}x(){return this.x_}y(){return this.y_}SetPoint(e,t){this.x_=e.CLONE(),this.y_=t.CLONE()}set_x(e){this.x_=e.CLONE()}set_y(e){this.y_=e.CLONE()}ADD_ASSIGN(e){return this.x_.ADD_ASSIGN(e.x()),this.y_.ADD_ASSIGN(e.y()),this}SUB_ASSIGN(e){return this.x_.SUB_ASSIGN(e.x()),this.y_.SUB_ASSIGN(e.y()),this}CLONE(){return new Ts(this.x_,this.y_)}EQ(e){return this.x()==e.x()&&this.y()==e.y()}LT(e){return this.y_==e.y_?this.x_<e.x_:this.y_<e.y_}toString(){return JSON.stringify({x:this.x_.toString(),y:this.y_.toString()})}}class Ds{constructor(e,t,i,s){u(this,"origin_");u(this,"size_");arguments.length===1?e instanceof Ts?(this.origin_=e.CLONE(),this.size_=new An):e instanceof An?(this.size_=e.CLONE(),this.origin_=new Ts):ze():arguments.length===2?e instanceof Ts?(this.origin_=e.CLONE(),this.size_=t.CLONE()):(this.size_=new An(e,t),this.origin_=new Ts):arguments.length===4?(this.origin_=new Ts(e,t),this.size_=new An(i,s)):et()}x(){return this.origin_.x()}left(){return this.x()}set_x(e){this.origin_.set_x(e)}y(){return this.origin_.y()}top(){return this.y()}set_y(e){this.origin_.set_y(e)}width(){return this.size_.width()}set_width(e){this.size_.set_width(e)}height(){return this.size_.height()}set_height(e){this.size_.set_height(e)}origin(){return this.origin_}set_origin(e){this.origin_=e.CLONE()}size(){return this.size_}set_size(e){this.size_=e.CLONE()}right(){return this.x().ADD(this.width())}bottom(){return this.y().ADD(this.height())}top_right(){return new Ts(this.right(),this.y())}bottom_left(){return new Ts(this.x(),this.bottom())}bottom_right(){return new Ts(this.right(),this.bottom())}OffsetFromOrigin(){return new ci(this.x(),this.y())}SetRect(e,t,i,s){this.origin_.SetPoint(e,t),this.set_width(i),this.set_height(s)}Inset(e,t,i,s){let n,o,a,l;if(arguments.length===1){let c=e;n=c.left(),o=c.top(),a=c.right(),l=c.bottom()}else if(arguments.length===2){let c=e,d=t;n=a=c,o=l=d}else n=e,o=t,a=i,l=s;this.origin_.ADD_ASSIGN(new ci(n,o)),this.set_width(me.Max(this.width().SUB(n).SUB(a),new me)),this.set_height(me.Max(this.height().SUB(o).SUB(l),new me))}Outset(e,t,i,s){arguments.length===1?this.Inset(e.NEG()):arguments.length==2?this.Inset(e.NEG(),t.NEG()):this.Inset(e.NEG(),t.NEG(),i.NEG(),s.NEG())}Offset(e,t){arguments.length==1?this.origin_.ADD_ASSIGN(e):this.origin_.ADD_ASSIGN(new ci(e,t))}ASS_ASSIGN(e){return this.origin_.ADD_ASSIGN(e)}SUB_ASSIGN(e){return this.origin_.SUB_ASSIGN(e)}InsetsFrom(e){return new wn(e.x().SUB(this.x()),e.y().SUB(this.y()),this.right().SUB(e.right()),this.bottom().SUB(e.bottom()))}IsEmpty(){return this.size_.IsEmpty()}LT(e){return this.origin_.EQ(e.origin())?this.width().EQ(e.width())?this.height().LT(e.height()):this.width().GT(e.width()):this.origin_.LT(e.origin())}Contains(e,t){if(arguments.length===1){if(e instanceof Ds)return e.x().GE(this.x())&&e.right().LE(this.right())&&e.y().GE(this.y())&&e.bottom().LE(this.bottom());{let i=e;return i.x()>=this.x()&&i.x()<this.right()&&i.y()>=this.y()&&i.y()<this.bottom()}}else{let i=e,s=t;return i>=this.x()&&i<this.right()&&s>=this.y()&&s<this.bottom()}}Intersects(e){return!(this.IsEmpty()||e.IsEmpty()||e.x().GE(this.right())||e.right().LE(this.x())||e.y().GE(this.bottom())||e.bottom().LE(this.y()))}Intersect(e){if(this.IsEmpty()||e.IsEmpty()){this.SetRect(new me,new me,new me,new me);return}let t=me.Max(this.x(),e.x()),i=me.Max(this.y(),e.y()),s=me.Min(this.right(),e.right()),n=me.Min(this.bottom(),e.bottom());(t.GE(s)||i.GE(n))&&(t=i=s=n=new me),this.SetRect(t,i,s.SUB(t),n.SUB(i))}Union(e){if(e.IsEmpty())return;let t=me.Min(this.x(),e.x()),i=me.Min(this.y(),e.y()),s=me.Max(this.right(),e.right()),n=me.Max(this.bottom(),e.bottom());this.SetRect(t,i,s.SUB(t),n.SUB(i))}Subtract(e){if(!this.Intersects(e))return;if(e.Contains(this)){this.SetRect(new me,new me,new me,new me);return}let t=this.x(),i=this.y(),s=this.right(),n=this.bottom();e.y().LE(this.y())&&e.bottom().GT(this.bottom())?e.x().LE(this.x())?t=e.right():e.right().GE(this.right())&&(s=e.x()):e.x().LE(this.x())&&e.right().GE(this.right())&&(e.y().LE(this.y())?i=e.bottom():e.bottom().GE(this.bottom())&&(n=e.y())),this.SetRect(t,i,s.SUB(t),n.SUB(i))}CenterPoint(){return new Ts(this.x().ADD(this.width().DIV(2)),this.y().ADD(this.height().DIV(2)))}ClampToCenteredSize(e){}SplitVertically(e,t){}ManhattanDistanceToPoint(e){}ManhattanInternalDistance(e){}static EQ(e,t){return e.origin().EQ(t.origin())&&e.size().EQ(t.size())}EQ(e){return Ds.EQ(this,e)}NE(e){return!this.EQ(e)}static ADD(e,t){return new Ds(e.x().ADD(t.x()),e.y().ADD(t.y()),e.width(),e.height())}static SUB(e,t){return new Ds(e.x().SUB(t.x()),e.y().SUB(t.y()),e.width(),e.height())}ADD(e){return Ds.ADD(this,e)}toString(){return JSON.stringify({origin:this.origin_.toString(),size:this.size_.toString()})}}function cd(r,e){let t,i;if(arguments.length===1){let s=r;t=s.x(),i=s.y()}else t=r,i=e;return Li.FromValues(1,0,t,0,1,i,0,0,1)}function oQ(r){return Math.abs(r.Get(0,1))<1e-4&&Math.abs(r.Get(1,0))<1e-4&&Math.abs(r.Get(2,0))<1e-4&&Math.abs(r.Get(2,1))<1e-4&&Math.abs(r.Get(2,2)-1)<1e-4}let aQ=0;class Nh extends zt{constructor(){super();u(this,"node_id_");this.node_id_=aQ++}GetId(){return this.node_id_}}class dh{constructor(e,t){u(this,"offset_");u(this,"children_",[]);if(!arguments.length)this.offset_=new rn;else if(arguments.length===1)if(e instanceof rn)this.offset_=e;else throw new Error("500");else if(arguments.length===2)this.children_.push(e),this.offset_=t;else throw new Error("500")}AddChild(e){this.children_.push(e)}GetChild(e){return $n(e,0),this.children_.length,this.children_[e]}children(){return this.children_}offset(){return this.offset_}set_offset(e){this.offset_=e}}class fh extends Nh{constructor(t,i){super();u(this,"data_");u(this,"cached_bounds_");u(this,"disposed",!1);t instanceof dh?this.data_=t:this.data_=new dh(t,i),this.cached_bounds_=this.ComputeBounds()}dispose(){super.dispose();for(let t of this.data_.children())t.dispose();this.disposed=!0}GetTypeId(){return rr(fh)}data(){return this.data_}GetBounds(){return this.cached_bounds_}Accept(t){t.VisitCompositionNode(this)}ComputeBounds(){let t=new lr;for(let i of this.data_.children())t.Union(i.GetBounds());return t.Offset(this.data_.offset()),t}}class Pk{constructor(e=0,t=0,i=0,s=0){u(this,"left_");u(this,"top_");u(this,"right_");u(this,"bottom_");this.left_=e,this.top_=t,this.right_=i,this.bottom_=s}left(){return this.left_}set_left(e){this.left_=e}top(){return this.top_}set_top(e){this.top_=e}right(){return this.right_}set_right(e){this.right_=e}bottom(){return this.bottom_}set_bottom(e){this.bottom_=e}SetInsets(e,t,i,s){this.left_=e,this.top_=t,this.right_=i,this.bottom_=s}zero(){return this.left_==0&&this.top_==0&&this.right_==0&&this.bottom_==0}EQ(e){return this.left_==e.left_&&this.top_==e.top_&&this.right_==e.right_&&this.bottom_==e.bottom_}NE(e){return!this.EQ(e)}ADD_ASSIGN(e){this.left_+=e.left_,this.top_+=e.top_,this.right_+=e.right_,this.bottom_+=e.bottom_}NEG(){return new Pk(-this.left_,-this.top_,-this.right_,-this.bottom_)}}class lQ extends Pk{}class yu{constructor(e,t,i,s){u(this,"rect");u(this,"background_brush");u(this,"border");u(this,"rounded_corners");e instanceof yu?(this.rect=e.rect.CLONE(),this.background_brush=e.background_brush,this.border=e.border,this.rounded_corners=e.rounded_corners):(this.rect=e.CLONE(),this.background_brush=t,this.border=i,this.rounded_corners=s)}EQ(e){throw new Error("500")}}class bd extends Nh{constructor(t,i,s,n){super();u(this,"data_");t instanceof yu?this.data_=new yu(t):this.data_=new yu(t,i,s,n)}Accept(t){t.VisitRectNode(this)}GetBounds(){return this.data_.rect}GetTypeId(){return rr(bd)}data(){return this.data_}}class uQ{constructor(e,t){u(this,"rect");u(this,"color");this.rect=e,this.color=t}}class Rk extends Nh{constructor(t,i){super();u(this,"data_");this.data_=new uQ(t,i)}Accept(t){t.VisitClearRectNode(this)}GetBounds(){return this.data_.rect}GetTypeId(){return rr(Rk)}data(){return this.data_}}class cQ{}class Uc extends cQ{constructor(t){super();u(this,"color_");this.color_=t}EQ(t){return this.color_==t.color_}Accept(t){t.visitSolidColorBrush(this)}static GetTypeId(){return rr(Uc)}GetTypeId(){return rr(Uc)}color(){return this.color_}CLONE(){return new Uc(this.color_.CLONE())}}var rl=(r=>(r[r.kBorderStyleNone=0]="kBorderStyleNone",r[r.kBorderStyleSolid=1]="kBorderStyleSolid",r))(rl||{});class xc{constructor(e,t,i){u(this,"width");u(this,"style");u(this,"color");e instanceof xc?(this.width=e.width,this.style=e.style,this.color=e.color.CLONE()):(this.width=e,this.style=t,this.color=i)}EQ(e){return this.style==e.style&&this.color.EQ(e.color)&&this.width==e.width}NE(e){return!this.EQ(e)}}class VF{constructor(e,t,i,s){u(this,"left");u(this,"right");u(this,"top");u(this,"bottom");arguments.length===1?(this.left=e,this.right=e,this.top=e,this.bottom=e):(this.left=e,this.right=t,this.top=i,this.bottom=s)}EQ(e){return this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom}}function I0(r){return r.overflow==_e.GetAuto()||r.overflow==_e.GetHidden()||r.overflow==_e.GetScroll()}class vu{constructor(e,t,i,s){u(this,"p1_");u(this,"p2_");u(this,"p3_");u(this,"p4_");this.p1_=e,this.p2_=t,this.p3_=i,this.p4_=s}static fromRectF(e){return new vu(new zr(e.x(),e.y()),new zr(e.right(),e.y()),new zr(e.right(),e.bottom()),new zr(e.x(),e.bottom()))}static FromMatrix3FAndRectF(e,t){return new vu(e.MUL(new zr(t.x(),t.y())),e.MUL(new zr(t.right(),t.y())),e.MUL(new zr(t.right(),t.bottom())),e.MUL(new zr(t.x(),t.bottom())))}static FromRectF(e){return new vu(new zr(e.x(),e.y()),new zr(e.right(),e.y()),new zr(e.right(),e.bottom()),new zr(e.x(),e.bottom()))}BoundingBox(){const{p1_:e,p2_:t,p3_:i,p4_:s}=this;let n=Math.min(Math.min(e.x(),t.x()),Math.min(i.x(),s.x())),o=Math.max(Math.max(e.x(),t.x()),Math.max(i.x(),s.x())),a=Math.min(Math.min(e.y(),t.y()),Math.min(i.y(),s.y())),l=Math.max(Math.max(e.y(),t.y()),Math.max(i.y(),s.y()));return new lr(n,a,o-n,l-a)}}class hQ{constructor(e,t){u(this,"source");u(this,"transform");this.source=e,this.transform=t.CLONE()}EQ(e){return this.source==e.source&&this.transform.EQ(e.transform)}}class Cy extends Nh{constructor(t,i){super();u(this,"data_");this.data_=new hQ(t,i)}Accept(t){t.VisitMatrixTransformNode(this)}GetBounds(){return vu.FromMatrix3FAndRectF(this.data_.transform,this.data_.source.GetBounds()).BoundingBox()}GetTypeId(){return rr(Cy)}data(){return this.data_}}class WF{constructor(e,t){this.node=e,this.box=t}AsLayoutTexes(){}}var Tr=(r=>(r[r.kBlockLevel=0]="kBlockLevel",r[r.kInlineLevel=1]="kInlineLevel",r))(Tr||{}),kd=(r=>(r[r.kCollapseMargins=0]="kCollapseMargins",r[r.kIgnore=1]="kIgnore",r[r.kSeparateAdjoiningMargins=2]="kSeparateAdjoiningMargins",r))(kd||{}),Gr=(r=>(r[r.kIsBoxAncestor=0]="kIsBoxAncestor",r[r.kIsBox=1]="kIsBox",r[r.kIsBoxDescendant=2]="kIsBoxDescendant",r))(Gr||{});class dQ{constructor(e,t,i,s){u(this,"is_usable_as_child_container");this.container_box=e,this.is_absolute_containing_block=t,this.has_absolute_position=i,this.has_overflow_hidden=s,this.is_usable_as_child_container=t}}class fQ{constructor(e){u(this,"node_");this.offset_=e}}class Td{constructor(){u(this,"shrink_to_fit_width_forced",!1);u(this,"freeze_width",!1);u(this,"freeze_height",!1);u(this,"containing_block_size",new An);u(this,"containing_block_direction",tr.kLeftToRightBaseDirection);u(this,"maybe_margin_top");u(this,"maybe_margin_bottom");u(this,"maybe_height")}EQ(e){return this.shrink_to_fit_width_forced===e.shrink_to_fit_width_forced&&this.freeze_height==e.freeze_height&&this.freeze_width==e.freeze_width&&this.containing_block_size.EQ(e.containing_block_size)&&this.containing_block_direction===e.containing_block_direction}}class yc extends zt{constructor(t,i){super();u(this,"css_computed_style_declaration_");u(this,"used_style_provider_");u(this,"parent_");u(this,"margin_box_offset_from_containing_block_",new ci);u(this,"static_position_offset_from_parent_",new wn);u(this,"static_position_offset_from_containing_block_to_parent_",new wn);u(this,"margin_insets_",new wn);u(this,"border_insets_",new wn);u(this,"padding_insets_",new wn);u(this,"content_size_",new An);u(this,"last_update_size_params_");u(this,"cached_render_tree_node_info_");u(this,"draw_order_position_in_stacking_context_");u(this,"blend_background_color_",!0);u(this,"collapsed_margin_top_");u(this,"collapsed_margin_bottom_");u(this,"collapsed_empty_margin_");u(this,"generating_html_","");u(this,"node");this.css_computed_style_declaration_=t,this.used_style_provider_=i,this.draw_order_position_in_stacking_context_=0}css_computed_style_declaration(){return this.css_computed_style_declaration_}computed_style(){return J(this.css_computed_style_declaration_.data()),this.css_computed_style_declaration_.data()}AsAnonymousBlockBox(){}AsBlockContainerBox(){}AsContainerBox(){}isTextBox(){return!1}AsTextBox(){}AsInlineContainerBox(){}GetMarginCollapsingStatus(){return 0}IsPositioned(){return this.computed_style().IsPositioned()}IsTransformed(){return this.computed_style().IsTransformed()}IsAbsolutelyPositioned(){return this.computed_style().position==_e.GetAbsolute()||this.computed_style().position==_e.GetFixed()}IsHiddenByEllipsis(){return!1}IsStackingContext(){return!1}UpdateSize(t){this.ValidateUpdateSizeInputs(t)||(this.UpdateBorders(),this.UpdatePaddings(t),this.UpdateContentSizeAndMargins(t),this.InvalidateRenderTreeNodesOfBoxAndAncestors())}GetContainingBlockOffsetFromRoot(t){if(!this.parent_)return new ci;let i=this.GetContainingBlock();return i.GetContentBoxOffsetFromRoot(t).ADD(this.GetContainingBlockOffsetFromItsContentBox(i))}GetContainingBlockOffsetFromItsContentBox(t){return J(t==this.GetContainingBlock()),this.IsAbsolutelyPositioned()?t.GetContentBoxOffsetFromPaddingBox().NEG():new ci}GetContainingBlockInsetFromItsContentBox(t){return J(t==this.GetContainingBlock()),this.IsAbsolutelyPositioned()?new wn(t.padding_left().NEG(),t.padding_top().NEG(),t.padding_right().NEG(),new me):new wn}GetTransformedBoxFromRoot(t){return this.GetTransformedBoxFromContainingBlock(void 0,t)}GetTransformedBoxFromContainingBlock(t,i){return _Q(this.GetMarginBoxTransformFromContainingBlock(t),i)}GetTransformedBoxFromContainingBlockContentBox(t,i){return this.GetTransformedBoxFromContainingBlock(t,i).ADD(this.GetContainingBlockOffsetFromItsContentBox(t))}set_left(t){this.margin_box_offset_from_containing_block_.set_x(t)}left(){return this.margin_box_offset_from_containing_block_.x()}set_top(t){this.margin_box_offset_from_containing_block_.set_y(t)}top(){return this.margin_box_offset_from_containing_block_.y()}SetStaticPositionLeftFromParent(t){t.NE(this.static_position_offset_from_parent_.left())&&(this.static_position_offset_from_parent_.set_left(t),this.InvalidateUpdateSizeInputsOfBox())}SetStaticPositionLeftFromContainingBlockToParent(t){t.NE(this.static_position_offset_from_containing_block_to_parent_.left())&&(this.static_position_offset_from_containing_block_to_parent_.set_left(t),this.InvalidateUpdateSizeInputsOfBox())}GetStaticPositionLeft(){return J(this.IsAbsolutelyPositioned()),this.static_position_offset_from_parent_.left().ADD(this.static_position_offset_from_containing_block_to_parent_.left())}SetStaticPositionRightFromParent(t){t.NE(this.static_position_offset_from_parent_.right())&&(this.static_position_offset_from_parent_.set_right(t),this.InvalidateUpdateSizeInputsOfBox())}SetStaticPositionRightFromContainingBlockToParent(t){t.NE(this.static_position_offset_from_containing_block_to_parent_.right())&&(this.static_position_offset_from_containing_block_to_parent_.set_right(t),this.InvalidateUpdateSizeInputsOfBox())}GetStaticPositionRight(){return J(this.IsAbsolutelyPositioned()),this.static_position_offset_from_parent_.right().ADD(this.static_position_offset_from_containing_block_to_parent_.right())}SetStaticPositionTopFromParent(t){t.NE(this.static_position_offset_from_parent_.top())&&(this.static_position_offset_from_parent_.set_top(t),this.InvalidateUpdateSizeInputsOfBox())}SetStaticPositionTopFromContainingBlockToParent(t){t.NE(this.static_position_offset_from_containing_block_to_parent_.top())&&(this.static_position_offset_from_containing_block_to_parent_.set_top(t),this.InvalidateUpdateSizeInputsOfBox())}GetStaticPositionTop(){return J(this.IsAbsolutelyPositioned()),this.static_position_offset_from_parent_.top().ADD(this.static_position_offset_from_containing_block_to_parent_.top())}margin_left(){return this.margin_insets_.left()}margin_top(){return this.margin_insets_.top()}margin_right(){return this.margin_insets_.right()}margin_bottom(){return this.margin_insets_.bottom()}GetMarginBoxWidth(){return this.margin_left().ADD(this.GetBorderBoxWidth()).ADD(this.margin_right())}GetMarginBoxHeight(){return this.margin_top().ADD(this.GetBorderBoxHeight()).ADD(this.margin_bottom())}set_margin_left(t){this.margin_insets_.set_left(t)}set_margin_top(t){this.margin_insets_.set_top(t)}set_margin_right(t){this.margin_insets_.set_right(t)}set_margin_bottom(t){this.margin_insets_.set_bottom(t)}GetMarginBoxTransformFromContainingBlock(t){let i=Li.Identity();if(this==t)return i;for(let s=this;;){if(i=cd(s.margin_box_offset_from_containing_block().x().toFloat(),s.margin_box_offset_from_containing_block().y().toFloat()).MUL(i),s.IsTransformed()){let a=s.margin_box_offset_from_containing_block().ADD(s.GetBorderBoxOffsetFromMarginBox());i=Cm(s.computed_style().transform,s.computed_style().transform_origin,new lr(a.x().toFloat(),a.y().toFloat(),s.GetBorderBoxWidth().toFloat(),s.GetBorderBoxHeight().toFloat())).MUL(i)}let n=s.GetContainingBlock();if(n==t||!n)break;let o=s.GetContainingBlockOffsetFromItsContentBox(n).ADD(n.GetContentBoxOffsetFromMarginBox());i=cd(o.x().toFloat(),o.y().toFloat()).MUL(i),s=n}return i}GetMarginBoxOffsetFromRoot(t){return(!t||!this.IsTransformed()?this.GetContainingBlockOffsetFromRoot(t):new ci).ADD(this.margin_box_offset_from_containing_block())}margin_box_offset_from_containing_block(){return this.margin_box_offset_from_containing_block_}GetMarginBoxRightEdgeOffsetFromContainingBlock(){return this.left().ADD(this.GetMarginBoxWidth())}GetMarginBoxBottomEdgeOffsetFromContainingBlock(){return this.top().ADD(this.GetMarginBoxHeight())}GetMarginBoxStartEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.GetMarginBoxRightEdgeOffsetFromContainingBlock():this.left()}GetMarginBoxEndEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.left():this.GetMarginBoxRightEdgeOffsetFromContainingBlock()}border_left_width(){return this.border_insets_.left()}border_top_width(){return this.border_insets_.top()}border_right_width(){return this.border_insets_.right()}border_bottom_width(){return this.border_insets_.bottom()}GetBorderBoxFromRoot(t){let i=this.GetBorderBoxOffsetFromRoot(t);return new Ds(i.x(),i.y(),this.GetBorderBoxWidth(),this.GetBorderBoxHeight())}GetClientRect(){return this.GetBorderBoxFromRoot(!1)}BorderBoxRect(){return new Ds(new Ts,this.content_size_)}GetBorderBoxWidth(){return this.border_left_width().ADD(this.GetPaddingBoxWidth()).ADD(this.border_right_width())}GetBorderBoxHeight(){return this.border_top_width().ADD(this.GetPaddingBoxHeight()).ADD(this.border_bottom_width())}GetClampedBorderBoxSize(){return new An(me.Max(new me,this.GetBorderBoxWidth()),me.Max(new me,this.GetBorderBoxHeight()))}GetBorderBoxFromMarginBox(){return new Ds(this.margin_left(),this.margin_top(),this.GetBorderBoxWidth(),this.GetBorderBoxHeight())}GetBorderBoxOffsetFromRoot(t){return this.GetMarginBoxOffsetFromRoot(t).ADD(this.GetBorderBoxOffsetFromMarginBox())}GetBorderBoxOffsetFromMarginBox(){return new ci(this.margin_left(),this.margin_top())}padding_left(){return this.padding_insets_.left()}padding_top(){return this.padding_insets_.top()}padding_right(){return this.padding_insets_.right()}padding_bottom(){return this.padding_insets_.bottom()}GetPaddingBoxWidth(){return this.padding_left().ADD(this.width()).ADD(this.padding_right())}GetPaddingBoxHeight(){return this.padding_top().ADD(this.height()).ADD(this.padding_bottom())}GetClampedPaddingBoxSize(){return new An(me.Max(new me,this.GetPaddingBoxWidth()),me.Max(new me,this.GetPaddingBoxHeight()))}GetPaddingBoxFromMarginBox(){return new Ds(this.GetPaddingBoxLeftEdgeOffsetFromMarginBox(),this.GetPaddingBoxTopEdgeOffsetFromMarginBox(),this.GetPaddingBoxWidth(),this.GetPaddingBoxHeight())}GetPaddingBoxOffsetFromRoot(t){return this.GetBorderBoxOffsetFromRoot(t).ADD(this.GetPaddingBoxOffsetFromBorderBox())}GetPaddingBoxOffsetFromBorderBox(){return new ci(this.border_left_width(),this.border_top_width())}GetPaddingBoxLeftEdgeOffsetFromMarginBox(){return this.margin_left().ADD(this.border_left_width())}GetPaddingBoxTopEdgeOffsetFromMarginBox(){return this.margin_top().ADD(this.border_top_width())}SetPaddingInsets(t,i,s,n){this.padding_insets_.SetInsets(t,i,s,n)}width(){return this.content_size_.width()}height(){return this.content_size_.height()}content_box_size(){return this.content_size_}paddingBoxSize(){return new An(this.content_box_size().width().ADD(this.padding_left()).ADD(this.padding_right()),this.content_box_size().height().ADD(this.padding_top()).ADD(this.padding_bottom()))}borderBoxSize(){return new An(this.paddingBoxSize().width().ADD(this.border_left_width()).ADD(this.border_right_width()),this.paddingBoxSize().height().ADD(this.border_top_width()).ADD(this.border_bottom_width()))}marginBoxSize(){return new An(this.borderBoxSize().width().ADD(this.margin_left()).ADD(this.margin_right()),this.borderBoxSize().height().ADD(this.margin_top()).ADD(this.margin_bottom()))}GetContentBoxFromMarginBox(){return new Ds(this.GetContentBoxLeftEdgeOffsetFromMarginBox(),this.GetContentBoxTopEdgeOffsetFromMarginBox(),this.width(),this.height())}GetContentBoxOffsetFromRoot(t){return this.GetMarginBoxOffsetFromRoot(t).ADD(this.GetContentBoxOffsetFromMarginBox())}GetContentBoxOffsetFromMarginBox(){return new ci(this.GetContentBoxLeftEdgeOffsetFromMarginBox(),this.GetContentBoxTopEdgeOffsetFromMarginBox())}GetContentBoxOffsetFromBorderBox(){return new ci(this.border_left_width().ADD(this.padding_left()),this.border_top_width().ADD(this.padding_top()))}GetContentBoxOffsetFromPaddingBox(){return new ci(this.padding_left(),this.padding_top())}GetContentBoxLeftEdgeOffsetFromMarginBox(){return this.margin_left().ADD(this.border_left_width()).ADD(this.padding_left())}GetContentBoxTopEdgeOffsetFromMarginBox(){return this.margin_top().ADD(this.border_top_width()).ADD(this.padding_top())}GetContentBoxOffsetFromContainingBlockContentBox(t){return this.GetContainingBlockOffsetFromItsContentBox(t).ADD(this.GetContentBoxOffsetFromContainingBlock())}GetContentBoxInsetFromContainingBlockContentBox(t){return this.GetContainingBlockInsetFromItsContentBox(t).ADD(this.GetContentBoxInsetFromContainingBlock(t))}GetContentBoxOffsetFromContainingBlock(){return new ci(this.GetContentBoxLeftEdgeOffsetFromContainingBlock(),this.GetContentBoxTopEdgeOffsetFromContainingBlock())}GetContentBoxInsetFromContainingBlock(t){let i=this.left().ADD(this.margin_right()).ADD(this.border_left_width()).ADD(this.padding_left());return new wn(i,this.top().ADD(this.margin_top()).ADD(this.border_top_width()).ADD(this.padding_top()),t.width().SUB(i).SUB(this.width()),new me)}GetContentBoxLeftEdgeOffsetFromContainingBlock(){return this.left().ADD(this.GetContentBoxLeftEdgeOffsetFromMarginBox())}GetContentBoxTopEdgeOffsetFromContainingBlock(){return this.top().ADD(this.GetContentBoxTopEdgeOffsetFromMarginBox())}GetContentBoxStartEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.GetContentBoxLeftEdgeOffsetFromContainingBlock().ADD(this.width()):this.GetContentBoxLeftEdgeOffsetFromContainingBlock()}GetContentBoxEndEdgeOffsetFromContainingBlock(t){return t==tr.kRightToLeftBaseDirection?this.GetContentBoxLeftEdgeOffsetFromContainingBlock():this.GetContentBoxLeftEdgeOffsetFromContainingBlock().ADD(this.width())}GetContentToMarginHorizontal(){return this.margin_left().ADD(this.border_left_width()).ADD(this.padding_left()).ADD(this.padding_right()).ADD(this.border_right_width()).ADD(this.margin_right())}GetContentToMarginVertical(){return this.margin_top().ADD(this.border_top_width()).ADD(this.padding_top()).ADD(this.padding_bottom()).ADD(this.border_bottom_width()).ADD(this.margin_bottom())}GetInlineLevelBoxHeight(){return this.GetMarginBoxHeight()}GetInlineLevelTopMargin(){return new me}is_inline_before_blockification(){return this.css_computed_style_declaration_.data().is_inline_before_blockification()}GetSplitSibling(){}TryPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){J(this.GetLevel()==1);let a=s||this.DoesFulfillEllipsisPlacementRequirement(),l;if(n)l=!0;else if(a){let c=this.GetMarginBoxEndEdgeOffsetFromContainingBlock(t);l=t==tr.kRightToLeftBaseDirection?i.GE(c):i.LE(c)}else l=!1;if(l){let{is_placed:c,is_placement_requirement_met:d,placed_offset:f}=this.DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o);n=c,s=d,o=f}return s=a,{is_placed:n,is_placement_requirement_met:s,placed_offset:o}}DoesFulfillEllipsisPlacementRequirement(){return!1}DoPreEllipsisPlacementProcessing(){}DoPostEllipsisPlacementProcessing(){}HasTrailingLineBreak(){return!1}ValidateUpdateSizeInputs(t){return this.last_update_size_params_&&t==this.last_update_size_params_?!0:(this.last_update_size_params_=t,!1)}InvalidateUpdateSizeInputsOfBox(){this.last_update_size_params_=void 0}InvalidateUpdateSizeInputsOfBoxAndAncestors(){this.InvalidateUpdateSizeInputsOfBox(),this.parent_&&this.parent_.InvalidateUpdateSizeInputsOfBoxAndAncestors()}InvalidateCrossReferencesOfBoxAndAncestors(){this.parent_&&this.parent_.InvalidateCrossReferencesOfBoxAndAncestors()}InvalidateRenderTreeNodesOfBoxAndAncestors(){this.cached_render_tree_node_info_=void 0,this.parent_&&this.parent_.InvalidateRenderTreeNodesOfBoxAndAncestors()}RenderAndAnimate(t,i,s){J(s);let n=new rn(this.left().toFloat()+this.margin_left().toFloat(),this.top().toFloat()+this.margin_top().toFloat());if(n.ADD_ASSIGN(i),this.cached_render_tree_node_info_&&this.cached_render_tree_node_info_.offset_==n){this.cached_render_tree_node_info_.node_&&t.AddChild(this.cached_render_tree_node_info_.node_),this.AddBoxAndDescendantsToDrawOrderInStackingContext(s);return}this.draw_order_position_in_stacking_context_=s.AddToDrawOrderInThisStackingContext(),this.cached_render_tree_node_info_=new fQ(n);let o=this.computed_style().opacity.value(),a=!1;if(o<=0&&!a||this.IsHiddenByEllipsis())return;let l=new dh(n),c=this.ComputeRoundedCorners(),d=this.ComputePaddingRoundedCorners(c),f=this.computed_style().visibility==_e.GetVisible();if(f){let P=this.RenderAndAnimateBackgroundImage(d);P.is_opaque||this.RenderAndAnimateBackgroundColor(d,l),P.node&&l.AddChild(P.node),this.RenderAndAnimateBorder(c,l),this.RenderAndAnimateBoxShadow(c,d,l)}let g=I0(this.computed_style()),x=g,E=f&&this.computed_style().outline_style!=_e.GetNone()&&this.computed_style().outline_style!=_e.GetHidden()&&en(this.computed_style().outline_color).a()!=0;if(!g||!E&&this.computed_style().box_shadow==_e.GetNone()&&this.border_insets_.zero())this.RenderAndAnimateContent(l,s);else{let P=new dh;if(this.RenderAndAnimateContent(P,s),P.children().length>0){let{rounded_corners:b,overflow_node:D}=this.RenderAndAnimateOverflow(d,new fh(P),new rn(0,0));d=b,l.AddChild(D)}x=!1}if(E&&this.RenderAndAnimateOutline(l),l.children().length>0){let P=new fh(l);if(x){let{overflow_node:b,rounded_corners:D}=this.RenderAndAnimateOverflow(d,P,n);d=D,P=b}P=this.RenderAndAnimateTransform(P,n),P=this.RenderAndAnimateOpacity(P,o,a),J(this.cached_render_tree_node_info_),this.cached_render_tree_node_info_.node_=P,t.AddChild(this.cached_render_tree_node_info_.node_)}}parent(){return this.parent_||void 0}GetAbsoluteContainingBlock(){if(!this.parent_)return this;let t=this.parent_;for(;t&&!t.IsContainingBlockForPositionAbsoluteElements();)t=t.parent_;return t}GetFixedContainingBlock(){if(!this.parent_)return this;let t=this.parent_;for(;t&&!t.IsContainingBlockForPositionFixedElements();)t=t.parent_;return t}GetContainingBlock(){return this.computed_style().position==_e.GetAbsolute()?this.GetAbsoluteContainingBlock():this.computed_style().position==_e.GetFixed()?this.GetFixedContainingBlock():this.parent_}GetStackingContext(){if(!this.parent_)return this;if(!this.IsPositioned()&&!this.IsStackingContext())return this.parent_;let t=this.parent_;for(;!t.IsStackingContext();)t=t.parent_;return t}GetZIndex(){return this.computed_style().z_index==_e.GetAuto()?0:this.computed_style().z_index.value()}GetOrder(){return this.computed_style().order.value()}InvalidateParent(){this.parent_=void 0}IsUnderCoordinate(t){let i=this.GetBorderBoxFromRoot(!0);return t.x().GE(i.x())&&t.x().LE(i.x().ADD(i.width()))&&t.y().GE(i.y())&&t.y().LE(i.y().ADD(i.height()))}GetRenderSequence(){let t=[],i=this,s;for(;i&&s!=i;)s=i,s.cached_render_tree_node_info_&&(t.push(s.draw_order_position_in_stacking_context_),i=s.GetStackingContext());return t}static IsRenderedLater(t,i){for(let s=1;s<=t.length;++s){if(i.length<s)return!0;let n=t.length-s,o=i.length-s;if(t[n]!=i[o])return t[n]>i[o]}return!1}ApplyTransformActionToCoordinate(t,i){let s=[];return s.push(i),this.ApplyTransformActionToCoordinates(t,s)}ApplyTransformActionToCoordinates(t,i){let s=this.computed_style().transform;if(s==_e.GetNone())return!0;let n=this.GetContainingBlockOffsetFromRoot(!0),o=this.margin_box_offset_from_containing_block().ADD(this.GetBorderBoxOffsetFromMarginBox());t==0&&o.ADD_ASSIGN(n);let a=Cm(s,this.computed_style().transform_origin,new lr(o.x().toFloat(),o.y().toFloat(),this.GetBorderBoxWidth().toFloat(),this.GetBorderBoxHeight().toFloat()));if(!a.IsIdentity()){if(t==0&&(a=a.Inverse(),a.IsZeros()))return!1;for(let c of i){let d=a.MUL(new zr(c.x(),c.y()));c.set_x(d.x()),c.set_y(d.y())}}let l=new rn(n.x().toFloat(),n.y().toFloat());for(let c of i)t==0?c.SUB_ASSIGN(l):c.ADD_ASSIGN(l);return!0}set_blend_background_color(t){this.blend_background_color_=t}used_style_provider(){return this.used_style_provider_}set_width(t){this.content_size_.set_width(t)}set_height(t){this.content_size_.set_height(t)}HasNonZeroMarginOrBorderOrPadding(){return this.width().NE(this.GetMarginBoxWidth())||this.height().NE(this.GetMarginBoxHeight())}AddBoxAndDescendantsToDrawOrderInStackingContext(t){J(t==this.GetStackingContext()),this.draw_order_position_in_stacking_context_=t.AddToDrawOrderInThisStackingContext()}UpdateCrossReferencesOfContainerBox(t,i,s,n,o,a){let l=this.computed_style().position,c=l!=_e.GetStatic(),d=i;if(c&&(l==_e.GetFixed()?d=n:l==_e.GetAbsolute()&&(d=s),d==1&&t.AddContainingBlockChild(this)),o==1&&(c||this.IsStackingContext())){J(d!=2||l!=_e.GetFixed());let f=t,g=d,x=[],E=this.GetZIndex();if(l==_e.GetFixed()&&E==0)for(let P of a)P.is_usable_as_child_container=!1;else if(d==2){let P=!1,b=l==_e.GetAbsolute();for(let D of a){if(E==0&&D.is_usable_as_child_container){J(D.is_absolute_containing_block),f=D.container_box,g=P?2:1;break}(D.is_absolute_containing_block||!b)&&(P=!0,b=D.has_absolute_position,D.has_overflow_hidden&&x.push(D.container_box))}x.reverse()}f.AddStackingContextChild(this,E,g,x)}}UpdateHorizontalMarginsAssumingBlockLevelInFlowBox(t,i,s,n,o){let a=n,l=o;if((a||new me).ADD(s).ADD(l||new me).GT(i)&&(a=a||new me,l=l||new me),a&&(!l||t==tr.kLeftToRightBaseDirection))this.set_margin_left(a),this.set_margin_right(i.SUB(a).SUB(s));else if(l)this.set_margin_left(i.SUB(s).SUB(l)),this.set_margin_right(l);else{let c=i.SUB(s).DIV(2);this.set_margin_left(c),this.set_margin_right(c)}}SetBorderInsets(t,i,s,n){this.border_insets_.SetInsets(t,i,s,n)}IsBorderStyleNoneOrHidden(t){return t==_e.GetNone()||t==_e.GetHidden()}ResetBorderInsets(){this.border_insets_=new wn}UpdateBorders(){if(Sp(this.computed_style().border_left_style)&&Sp(this.computed_style().border_top_style)&&Sp(this.computed_style().border_right_style)&&Sp(this.computed_style().border_bottom_style)){this.border_insets_=new wn;return}this.border_insets_.SetInsets(TF(this.computed_style()),PF(this.computed_style()),RF(this.computed_style()),DF(this.computed_style()))}UpdatePaddings(t){this.padding_insets_.SetInsets(CF(this.computed_style(),t.containing_block_size),OF(this.computed_style(),t.containing_block_size),NF(this.computed_style(),t.containing_block_size),IF(this.computed_style(),t.containing_block_size))}ComputeRoundedCorners(){let t=new tQ(this.GetClampedBorderBoxSize().toSizeF()),i=new Nr,s=new Nr,n=new Nr,o=new Nr;this.computed_style().border_top_left_radius.Accept(t),t.rounded_corner()&&(i=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical)),this.computed_style().border_top_right_radius.Accept(t),t.rounded_corner()&&(s=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical)),this.computed_style().border_bottom_right_radius.Accept(t),t.rounded_corner()&&(n=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical)),this.computed_style().border_bottom_left_radius.Accept(t),t.rounded_corner()&&(o=new Nr(t.rounded_corner().horizontal,t.rounded_corner().vertical));let a;return(!i.IsSquare()||!s.IsSquare()||!n.IsSquare()||!o.IsSquare())&&(a=new Lc(i,s,n,o),a=a.Normalize(new lr(this.GetClampedBorderBoxSize().toSizeF()))),a}ComputePaddingRoundedCorners(t){let i;t&&!this.border_insets_.zero()&&(i=t.Inset(new lQ(this.border_insets_.left().toFloat(),this.border_insets_.top().toFloat(),this.border_insets_.right().toFloat(),this.border_insets_.bottom().toFloat())));let s=i||t;return s&&s.Normalize(new lr(this.GetClampedPaddingBoxSize().toSizeF()))}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){throw new Error("umimplemented")}GetBackgroundRect(){return new lr(new zr(this.border_left_width().toFloat(),this.border_top_width().toFloat()),this.GetClampedPaddingBoxSize().toSizeF())}GetMarginBoxTransformFromContainingBlockInternal(t,i){let s=Li.Identity();if(this==t)return s;for(let n=this;;){if(s=cd(n.margin_box_offset_from_containing_block().x().toFloat(),n.margin_box_offset_from_containing_block().y().toFloat()).MUL(s),n.IsTransformed()){let l=n.margin_box_offset_from_containing_block().ADD(n.GetBorderBoxOffsetFromMarginBox());s=Cm(n.computed_style().transform,n.computed_style().transform_origin,new lr(l.x().toFloat(),l.y().toFloat(),n.GetBorderBoxWidth().toFloat(),n.GetBorderBoxHeight().toFloat())).MUL(s)}const o=n.GetContainingBlock();if(o==t||!o)break;let a=n.GetContainingBlockOffsetFromItsContentBox(o).ADD(o.GetContentBoxOffsetFromMarginBox());s=cd(a.x().toFloat(),a.y().toFloat()).MUL(s),n=o}return s}RenderAndAnimateBorder(t,i){if(this.border_insets_.zero()||pQ(this.computed_style()))return;let s=new lr(this.GetClampedBorderBoxSize().toSizeF()),n=new yu(s);gQ(t,this.computed_style(),n);let o=new bd(n);i.AddChild(o)}RenderAndAnimateOutline(t){let i=new lr(this.GetClampedBorderBoxSize().toSizeF()),s=new yu(i);mQ(i,this.computed_style(),s);let n=new bd(s);t.AddChild(n)}RenderAndAnimateBackgroundColor(t,i){let s=!1;if(!this.blend_background_color_){J(!t),J(!s),i.AddChild(new Rk(this.GetBackgroundRect(),en(this.computed_style().background_color)));return}if(!(en(this.computed_style().background_color).a()==0)||s){let o=new yu(this.GetBackgroundRect());if(xQ(t,this.computed_style(),o),!o.rect.IsEmpty()){let a=new bd(o);i.AddChild(a)}}}RenderAndAnimateBackgroundImage(t){let i=Object.create(null);return i.is_opaque=!1,i}RenderAndAnimateBoxShadow(t,i,s){this.computed_style().box_shadow!=_e.GetNone()&&ze()}RenderAndAnimateOpacity(t,i,s){return t}RenderAndAnimateOverflow(t,i,s){t=this.ComputeRoundedCorners();let n=this.ComputePaddingRoundedCorners(t),{overflow_node:o,rounded_corners:a}=this.RenderAndAnimateOverflow(n,i,s);return t=a,{overflow_node:o,rounded_corners:t}}RenderAndAnimateTransform(t,i){let s=!1;{let o=this.computed_style().transform;o!=_e.GetNone()&&(s=o.HasTrait(Yb.kTraitIsDynamic))}let n=new lr(gy(i),this.GetClampedBorderBoxSize().toSizeF());if(s)return new Cy(t,Li.Identity());if(this.IsTransformed()){let o=Cm(this.computed_style().transform,this.computed_style().transform_origin,n);return o.IsIdentity()?t:new Cy(t,o)}return t}SetGeneratingNode(t){this.node=t,t.SetLayoutObject(new WF(t,this));let i=new CN;i.SerializeSelfOnly(t),this.generating_html_=i.toString()}DumpWithIndent(t="",i=2){return this.generating_html_.length&&(t=this.DumpIndent(t,i),t+="# ",t+=this.generating_html_,t+=`
`),t=this.DumpIndent(t,i),t=this.DumpClassName(t),t=this.DumpProperties(t),t+=`
`,this.DumpChildrenWithIndent(t,i+2)}DumpIndent(t,i){for(;i--;)t+=" ";return t}DumpProperties(t){return t+="left=",t+=this.left(),t+=" ",t+="top=",t+=this.top(),t+=" ",t+="width=",t+=this.width(),t+=" ",t+="height=",t+=this.height(),t+=" ",t+="margin=",t+=this.margin_insets_.toString(),t+=" ",t+="border_width=",t+=this.border_insets_.toString(),t+=" ",t+="padding=",t+=this.padding_insets_.toString(),t+=" ",t+="baseline=",t+=this.GetBaselineOffsetFromTopMarginEdge(),t+=" ",this.css_computed_style_declaration_&&this.css_computed_style_declaration_.data()&&(t+="is_inline_before_blockification=",t+=this.is_inline_before_blockification(),t+=" "),t}DumpChildrenWithIndent(t,i){return t}LocalRectToAbsoluteQuad(t,i){return this.LocalRectToAncestorQuad(t,void 0,i)}LocalRectToAncestorQuad(t,i,s){return this.LocalToAncestorQuad(vu.fromRectF(lr.fromRectLayoutUnit(t)),i,s)}LocalToAncestorQuad(t,i,s){ze()}}function Sp(r){return r==_e.GetNone()||r==_e.GetHidden()}function _Q(r,e){let t=4,i=[new zr(e.x().toFloat(),e.y().toFloat()),new zr(e.right().toFloat(),e.y().toFloat()),new zr(e.x().toFloat(),e.bottom().toFloat()),new zr(e.right().toFloat(),e.bottom().toFloat())];for(let o=0;o<t;++o)i[o]=r.MUL(i[o]);let s=i[0],n=i[0];for(let o=1;o<t;++o)s.SetToMin(i[o]),n.SetToMax(i[o]);return new Ds(new me(s.x()),new me(s.y()),new me(n.x()-s.x()),new me(n.y()-s.y()))}function Cm(r,e,t){if(r==_e.GetNone())return Li.Identity();let s=r.ToMatrix(t.size()),n=iQ(t,e);return cd(n.x(),n.y()).MUL(s).MUL(cd(-n.x(),-n.y()))}function pQ(r){return en(r.border_left_color).a()==0&&en(r.border_right_color).a()==0&&en(r.border_top_color).a()==0&&en(r.border_bottom_color).a()==0}function gQ(r,e,t){t.border=yQ(e),r&&(t.rounded_corners=new Lc(r))}function mQ(r,e,t){vQ(r,e,t,ud(e.outline_width).toFloat())}function xQ(r,e,t){t.background_brush=new Uc(en(e.background_color)),r&&(t.rounded_corners=new Lc(r))}function yQ(r){let e=new xc(ud(r.border_left_width).toFloat(),wp(r.border_left_style),en(r.border_left_color)),t=new xc(ud(r.border_right_width).toFloat(),wp(r.border_right_style),en(r.border_right_color)),i=new xc(ud(r.border_top_width).toFloat(),wp(r.border_top_style),en(r.border_top_color)),s=new xc(ud(r.border_bottom_width).toFloat(),wp(r.border_bottom_style),en(r.border_bottom_color));return new VF(e,t,i,s)}function wp(r){let e=rl.kBorderStyleNone;return Sp(r)||(Kt(r,_e.GetSolid()),e=rl.kBorderStyleSolid),e}function vQ(r,e,t,i){t.rect=r,t.rect.Outset(i,i),i!=0&&(t.border=new VF(new xc(i,wp(e.outline_style),en(e.outline_color))))}class EQ{constructor(e,t,i,s){u(this,"box");u(this,"z_index");u(this,"containing_block_relationship");u(this,"overflow_hidden_to_apply");this.box=e,this.z_index=t,this.containing_block_relationship=i,this.overflow_hidden_to_apply=s}}class SQ{EXEC(e,t){return e.z_index<t.z_index}}class Dk extends yc{constructor(){super(...arguments);u(this,"child_boxes_",[]);u(this,"positioned_child_boxes_",[]);u(this,"negative_z_index_stacking_context_children_",new Map);u(this,"non_negative_z_index_stacking_context_children_",new Map);u(this,"update_size_results_valid_",!1);u(this,"are_cross_references_valid_",!1);u(this,"are_bidi_levels_runs_split_",!1);u(this,"next_draw_order_position_",0)}SplitBidiLevelRuns(){if(!this.are_bidi_levels_runs_split_){this.are_bidi_levels_runs_split_=!0;for(let t of this.child_boxes_)t.SplitBidiLevelRuns()}}InvalidateCrossReferencesOfBoxAndAncestors(){this.are_cross_references_valid_=!1,super.InvalidateCrossReferencesOfBoxAndAncestors()}RenderAndAnimateContent(t,i){let s=this;s.next_draw_order_position_=0,this.IsStackingContext()&&(i=s,i.UpdateCrossReferences());let n=new ci(this.GetContentBoxOffsetFromBorderBox());this.RenderAndAnimateStackingContextChildren(this.negative_z_index_stacking_context_children_,t,n,i);for(let o of this.child_boxes_)!o.IsPositioned()&&!o.IsStackingContext()&&o.RenderAndAnimate(t,n.toVector2dF(),s);this.RenderAndAnimateStackingContextChildren(this.non_negative_z_index_stacking_context_children_,t,n,i)}IsContainingBlockForPositionAbsoluteElements(){return!this.parent()||this.computed_style().IsContainingBlockForPositionAbsoluteElements()}IsContainingBlockForPositionFixedElements(){return!this.parent()||this.IsTransformed()}IsStackingContext(){return!this.parent()||this.computed_style().opacity.value()<1||this.IsTransformed()||this.IsPositioned()&&this.computed_style().z_index!=_e.GetAuto()||this.computed_style().position==_e.GetFixed()}UpdateRectOfPositionedChildBoxes(t,i){this.UpdateCrossReferences();for(let s of this.child_boxes_){Kt(this,s.GetContainingBlock());let n=s.computed_style().position;n==_e.GetAbsolute()?this.UpdateRectOfAbsolutelyPositionedChildBox(s,i):n==_e.GetFixed()?this.UpdateRectOfAbsolutelyPositionedChildBox(s,t):n==_e.GetStatic()||(J(n==_e.GetRelative()),this.UpdateOffsetOfRelativelyPositionedChildBox(s,t)),this.positioned_child_boxes_.length}}PushBackDirectChild(t){J(!t.parent()),J(!this.update_size_results_valid_),J(!this.are_cross_references_valid_),t.parent_=this,this.child_boxes_.push(t)}InsertSplitSiblingOfDirectChild(t){let s=this.child_boxes_[t].GetSplitSibling();J(s),J(!s.parent()),s.parent_=this,this.child_boxes_.splice(t+1,0,s),this.update_size_results_valid_=!1;let n=s.IsPositioned();return n&&(s.GetContainingBlock().are_cross_references_valid_=!1),(n||s.IsStackingContext())&&(s.GetStackingContext().are_cross_references_valid_=!1),this.InvalidateRenderTreeNodesOfBoxAndAncestors(),t+1}MoveDirectChildrenToSplitSibling(t){J(t!=this.child_boxes_.length);let i=this.GetSplitSibling();J(i),J(!i.parent()),J(!i.update_size_results_valid_),J(!i.are_cross_references_valid_);for(let s=t;s<this.child_boxes_.length;s++){let n=this.child_boxes_[s];n.parent_=i,i.child_boxes_.push(n)}if(this.child_boxes_.length=t,this.update_size_results_valid_=!1,this.positioned_child_boxes_.length&&(this.are_cross_references_valid_=!1),this.HasStackingContextChildren()||I0(this.computed_style())){let s=this;for(;!s.IsStackingContext();)s=s.parent();s.HasStackingContextChildren()&&(s.are_cross_references_valid_=!1)}this.InvalidateRenderTreeNodesOfBoxAndAncestors()}child_boxes(){return this.child_boxes_}UpdateCrossReferencesOfContainerBox(t,i,s,n,o,a){super.UpdateCrossReferencesOfContainerBox(t,i,s,n,o,a);const l=Gr.kIsBoxDescendant;let c=s!=Gr.kIsBoxDescendant&&this.IsContainingBlockForPositionAbsoluteElements()?Gr.kIsBoxDescendant:s,d=n!=Gr.kIsBoxDescendant&&this.IsContainingBlockForPositionFixedElements()?Gr.kIsBoxDescendant:n,f=o!=Gr.kIsBoxDescendant&&this.IsStackingContext()?Gr.kIsBoxDescendant:o;if(f==Gr.kIsBox){this.negative_z_index_stacking_context_children_.clear(),this.non_negative_z_index_stacking_context_children_.clear();let g=this.computed_style().position==_e.GetAbsolute(),x=I0(this.computed_style());a.push(new dQ(this,this.IsContainingBlockForPositionAbsoluteElements(),g,x))}if(c==Gr.kIsBox||d==Gr.kIsBox||f==Gr.kIsBox)for(let g of this.child_boxes_)g.UpdateCrossReferencesOfContainerBox(t,l,c,d,f,a);f==Gr.kIsBox&&a.pop()}ValidateUpdateSizeInputs(t){return super.ValidateUpdateSizeInputs(t)&&this.update_size_results_valid_?!0:(this.update_size_results_valid_=!0,!1)}InvalidateUpdateSizeInputs(){this.update_size_results_valid_=!1}AddBoxAndDescendantsToDrawOrderInStackingContext(t){if(super.AddBoxAndDescendantsToDrawOrderInStackingContext(t),!this.IsStackingContext()){J(this.negative_z_index_stacking_context_children_.size);for(let[i,s]of this.non_negative_z_index_stacking_context_children_)i.box.AddBoxAndDescendantsToDrawOrderInStackingContext(t)}}AddToDrawOrderInThisStackingContext(){return this.next_draw_order_position_++}UpdateCrossReferences(){if(!this.are_cross_references_valid_){let t=this.IsStackingContext();this.positioned_child_boxes_.length=0,t&&(this.negative_z_index_stacking_context_children_.clear(),this.non_negative_z_index_stacking_context_children_.clear());let i=[];const s=Gr.kIsBox;let n=this.IsContainingBlockForPositionAbsoluteElements()?Gr.kIsBox:Gr.kIsBoxAncestor,o=this.IsContainingBlockForPositionFixedElements()?Gr.kIsBox:Gr.kIsBoxAncestor,a=t?Gr.kIsBox:Gr.kIsBoxAncestor;for(let l of this.child_boxes_)l.UpdateCrossReferencesOfContainerBox(this,s,n,o,a,i);this.are_cross_references_valid_=!0}}AddContainingBlockChild(t){Kt(this,t.GetContainingBlock()),this.positioned_child_boxes_.push(t)}AddStackingContextChild(t,i,s,n){Kt(i,t.GetZIndex()),J(this.IsStackingContext()?this==t.GetStackingContext():this.GetStackingContext()==t.GetStackingContext()&&i==0),(i<0?this.negative_z_index_stacking_context_children_:this.non_negative_z_index_stacking_context_children_).set(new EQ(t,i,s,n),new SQ)}HasStackingContextChildren(){return this.negative_z_index_stacking_context_children_.size>0||this.non_negative_z_index_stacking_context_children_.size>0}UpdateOffsetOfRelativelyPositionedChildBox(t,i){Kt(t.computed_style().position,_e.GetRelative());let s=wk(t.computed_style(),i.containing_block_size),n=bF(t.computed_style(),i.containing_block_size),o=Ak(t.computed_style(),i.containing_block_size),a=kF(t.computed_style(),i.containing_block_size),l=new ci;!s&&!n?l.set_x(new me):s&&!n?l.set_x(s):!s&&n?l.set_x(n.NEG()):i.containing_block_direction==tr.kLeftToRightBaseDirection?l.set_x(s):l.set_x(n.NEG()),!o&&!a?l.set_y(new me):o&&!a?l.set_y(o):!o&&a?l.set_y(a.NEG()):l.set_y(o),t.set_left(t.left().ADD(l.x())),t.set_top(t.top().ADD(l.y()))}UpdateRectOfAbsolutelyPositionedChildBox(t,i){let s=wQ(this,t);t.SetStaticPositionLeftFromContainingBlockToParent(s.left()),t.SetStaticPositionRightFromContainingBlockToParent(s.right()),t.SetStaticPositionTopFromContainingBlockToParent(s.top()),t.UpdateSize(i)}RenderAndAnimateStackingContextChildren(t,i,s,n){let o=new bQ(n,this,s,i);for(let[a,l]of t)J(this.IsStackingContext()?this==a.box.GetStackingContext():this.GetStackingContext()==a.box.GetStackingContext()&&a.z_index==0),o.RenderAndAnimateChild(a)}DumpChildrenWithIndent(t,i){t=super.DumpChildrenWithIndent(t,i);for(let s of this.child_boxes())t=s.DumpWithIndent(t,i);return t}AsContainerBox(){return this}AbsoluteQuads(t,i=0){this.QuadsInternal(t,i,!0)}QuadsInternal(t,i,s){s?this.AbsoluteQuadsForSelf(t,i):ze()}dispose(){super.dispose();for(let t of this.child_boxes_)t.dispose();this.child_boxes_.length=0}}function wQ(r,e){J(e.IsAbsolutelyPositioned()),Kt(e.GetContainingBlock());let t=new wn,i=e.parent();if(!i)throw new Error("500");for(;i!=r;){J(i.parent()),J(!i.IsTransformed());const s=i.GetContainingBlock();t.ASS_ASSIGN(i.GetContentBoxInsetFromContainingBlockContentBox(s)),i=s}return t.ASS_ASSIGN(new wn(r.padding_left(),r.padding_top(),r.padding_right(),new me)),t}class AQ{constructor(e){u(this,"node_builder");u(this,"containing_block");this.node_builder=new dh(new rn),this.containing_block=e}}class bQ{constructor(e,t,i,s){u(this,"stacking_context_");u(this,"child_container_");u(this,"child_container_offset_from_parent_node_");u(this,"base_node_builder_");u(this,"overflow_hidden_stack_",[]);this.stacking_context_=e,this.child_container_=t,this.child_container_offset_from_parent_node_=i,this.base_node_builder_=s}RenderAndAnimateChild(e){this.ApplyOverflowHiddenForChild(e.overflow_hidden_to_apply);const t=e.box.GetContainingBlock();let i=this.child_container_offset_from_parent_node_.ADD(this.GetOffsetFromChildContainerToContainingBlockContentBox(t,e.containing_block_relationship)).ADD(e.box.GetContainingBlockOffsetFromItsContentBox(t));e.box.RenderAndAnimate(this.GetActiveNodeBuilder(),i.toVector2dF(),this.stacking_context_)}ApplyOverflowHiddenForChild(e){let t=0;for(;t<e.length&&t<this.overflow_hidden_stack_.length&&e[t]==this.overflow_hidden_stack_[t].containing_block;++t);for(;t<this.overflow_hidden_stack_.length;)this.PopOverflowHiddenEntryFromStack();for(;t<e.length;++t)this.overflow_hidden_stack_.push(new AQ(e[t]))}PopOverflowHiddenEntryFromStack(){J(this.overflow_hidden_stack_.length);let e=this.overflow_hidden_stack_[this.overflow_hidden_stack_.length-1],t=e.containing_block;J(I0(t.computed_style()));let i=this.GetOffsetFromChildContainerToContainingBlockContentBox(t,Gr.kIsBoxAncestor).SUB(t.GetContentBoxOffsetFromBorderBox()),{rounded_corners:s,overflow_node:n}=t.RenderAndAnimateOverflow(void 0,new fh(e.node_builder),new rn(i.x().toFloat(),i.y().toFloat())),o=n;this.overflow_hidden_stack_.pop(),this.GetActiveNodeBuilder().AddChild(o)}GetActiveNodeBuilder(){return this.overflow_hidden_stack_.length===0?this.base_node_builder_:this.overflow_hidden_stack_[this.overflow_hidden_stack_.length-1].node_builder}GetOffsetFromChildContainerToContainingBlockContentBox(e,t){if(t==Gr.kIsBox)return Kt(this.child_container_),new ci;let i=new ci,s=t==Gr.kIsBoxAncestor?this.child_container_:e,n=t==Gr.kIsBoxAncestor?e:this.child_container_;for(;s!=n&&s.parent()&&!s.IsTransformed();){const a=s.GetContainingBlock();i.ADD_ASSIGN(s.GetContentBoxOffsetFromContainingBlockContentBox(a)),s=a}let o=s;for(s=n,n=o;s!=n;){J(s.parent()),J(!s.IsTransformed());const a=s.GetContainingBlock();i.SUB_ASSIGN(s.GetContentBoxOffsetFromContainingBlockContentBox(a)),s=a}return t==Gr.kIsBoxAncestor&&(i=i.NEG()),i}}var Qi=(r=>(r[r.kWrapAtPolicyBefore=0]="kWrapAtPolicyBefore",r[r.kWrapAtPolicyLastOpportunityWithinWidth=1]="kWrapAtPolicyLastOpportunityWithinWidth",r[r.kWrapAtPolicyLastOpportunity=2]="kWrapAtPolicyLastOpportunity",r[r.kWrapAtPolicyFirstOpportunity=3]="kWrapAtPolicyFirstOpportunity",r))(Qi||{}),Qa=(r=>(r[r.kWrapOpportunityPolicyNormal=0]="kWrapOpportunityPolicyNormal",r[r.kWrapOpportunityPolicyBreakWord=1]="kWrapOpportunityPolicyBreakWord",r[r.kWrapOpportunityPolicyBreakWordOrNormal=2]="kWrapOpportunityPolicyBreakWordOrNormal",r))(Qa||{}),ar=(r=>(r[r.kWrapResultNoWrap=0]="kWrapResultNoWrap",r[r.kWrapResultWrapBefore=1]="kWrapResultWrapBefore",r[r.kWrapResultSplitWrap=2]="kWrapResultSplitWrap",r))(ar||{});function $F(r,e){return e?r!==0:r!==2}class KF extends Dk{constructor(t,i,s){super(t,s);u(this,"maybe_baseline_offset_from_top_margin_edge_");u(this,"base_direction_");this.base_direction_=i}AsBlockContainerBox(){return this}UpdateContentSizeAndMargins(t){let i=bk(this.computed_style(),t.containing_block_size),s=Object.create(null),n=Ak(this.computed_style(),t.containing_block_size),o=kF(this.computed_style(),t.containing_block_size),a=kk(this.computed_style(),t.containing_block_size),l=Tk(this.computed_style(),t.containing_block_size);if(t.freeze_height&&(i=this.height()),!t.freeze_width){let f=FF(this.computed_style(),t.containing_block_size,s),g=bv(this.computed_style(),t.containing_block_size),x=kv(this.computed_style(),t.containing_block_size),E=wk(this.computed_style(),t.containing_block_size),P=bF(this.computed_style(),t.containing_block_size);this.UpdateContentWidthAndMargins(t.containing_block_direction,t.containing_block_size.width(),t.shrink_to_fit_width_forced,s.depends_on_containing_block,E,P,g,x,f,i);let b=Object.create(null),D=BF(this.computed_style(),t.containing_block_size,b);D&&this.width().GT(D)&&this.UpdateContentWidthAndMargins(t.containing_block_direction,t.containing_block_size.width(),t.shrink_to_fit_width_forced,b.depends_on_containing_block,E,P,g,x,D,i);let C=Object.create(null),O=UF(this.computed_style(),t.containing_block_size,C);O&&this.width().LT(O||new me)&&this.UpdateContentWidthAndMargins(t.containing_block_direction,t.containing_block_size.width(),t.shrink_to_fit_width_forced,C.depends_on_containing_block,E,P,g,x,O,i)}this.UpdateContentHeightAndMargins(t.containing_block_size,n,o,a,l,i);let c=GF(this.computed_style(),t.containing_block_size);c&&this.height().GT(c)&&this.UpdateContentHeightAndMargins(t.containing_block_size,n,o,a,l,c);let d=zF(this.computed_style(),t.containing_block_size);d&&this.height().LT(d)&&this.UpdateContentHeightAndMargins(t.containing_block_size,n,o,a,l,d)}TryWrapAt(t,i,s,n,o){return J(!this.IsAbsolutelyPositioned()),Kt(Tr.kInlineLevel,this.GetLevel()),ar.kWrapResultNoWrap}TrySplitAtSecondBidiLevelRun(){return!1}GetBidiLevel(){}SetShouldCollapseLeadingWhiteSpace(t){Kt(Tr.kInlineLevel,this.GetLevel())}SetShouldCollapseTrailingWhiteSpace(t){Kt(Tr.kInlineLevel,this.GetLevel())}HasLeadingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),!1}HasTrailingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),!1}IsCollapsed(){return Kt(Tr.kInlineLevel,this.GetLevel()),!1}JustifiesLineExistence(){return Kt(Tr.kInlineLevel,this.GetLevel()),!0}AffectsBaselineInBlockFormattingContext(){return!!this.maybe_baseline_offset_from_top_margin_edge_}GetBaselineOffsetFromTopMarginEdge(){return this.maybe_baseline_offset_from_top_margin_edge_||this.GetMarginBoxHeight()}TrySplitAtEnd(){}base_direction(){return this.base_direction_}GetShrinkToFitWidth(t,i){let s=new Td;return s.containing_block_direction=this.base_direction_,s.containing_block_size.set_width(t.SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right())),s.containing_block_size.set_height(i||new me),s.shrink_to_fit_width_forced=!0,this.UpdateRectOfInFlowChildBoxes(s).shrink_to_fit_width()}IsTransformable(){return!0}UpdateContentWidthAndMargins(t,i,s,n,o,a,l,c,d,f){if(this.IsAbsolutelyPositioned())this.UpdateWidthAssumingAbsolutelyPositionedBox(t,i,o,a,d,l,c,f);else{let g=d,x=this.GetLevel();switch(s&&(x=Tr.kInlineLevel,n&&(g=void 0)),x){case Tr.kBlockLevel:this.UpdateWidthAssumingBlockLevelInFlowBox(t,i,g,l,c);break;case Tr.kInlineLevel:this.UpdateWidthAssumingInlineLevelInFlowBox(i,g,l,c,f);break}}}UpdateContentHeightAndMargins(t,i,s,n,o,a){let l=new Td,c=new Td;l.containing_block_direction=this.base_direction_,c.containing_block_direction=this.base_direction_,this.AsAnonymousBlockBox()?l.containing_block_size=t:(l.containing_block_size.set_width(this.width()),c.containing_block_size.set_width(this.GetPaddingBoxWidth()),a?l.containing_block_size.set_height(a):i&&s?l.containing_block_size.set_height(t.height().SUB(i).SUB(s)):l.containing_block_size.set_height(new me)),l.maybe_margin_top=n,l.maybe_margin_bottom=o,l.maybe_height=a;let d=this.UpdateRectOfInFlowChildBoxes(l);this.IsAbsolutelyPositioned()?this.UpdateHeightAssumingAbsolutelyPositionedBox(t.height(),i,s,a,n,o,d):this.UpdateHeightAssumingInFlowBox(a,n,o,d),l.containing_block_size.set_height(this.height()),c.containing_block_size.set_height(this.GetPaddingBoxHeight()),this.UpdateRectOfPositionedChildBoxes(l,c),d.maybe_baseline_offset_from_top_content_edge()?this.maybe_baseline_offset_from_top_margin_edge_=this.margin_top().ADD(this.border_top_width()).ADD(this.padding_top()).ADD(d.maybe_baseline_offset_from_top_content_edge()):this.maybe_baseline_offset_from_top_margin_edge_=void 0}UpdateWidthAssumingAbsolutelyPositionedBox(t,i,s,n,o,a,l,c){if(!s&&!o&&!n){this.set_margin_left(a||new me),this.set_margin_right(l||new me),t==tr.kLeftToRightBaseDirection?(this.set_left(this.GetStaticPositionLeft()),this.set_width(this.GetShrinkToFitWidth(i,c))):(this.set_width(this.GetShrinkToFitWidth(i,c)),this.set_left(i.SUB(this.GetStaticPositionRight()).SUB(this.GetMarginBoxWidth())));return}if(s&&o&&n){this.set_left(s),this.set_width(o);let d=i.SUB(s).SUB(this.GetBorderBoxWidth()).SUB(n);if(!a&&!l){let f=d.DIV(2);f.LT(new me)?t==tr.kLeftToRightBaseDirection?(this.set_margin_left(new me),this.set_margin_right(d)):(this.set_margin_left(d),this.set_margin_right(new me)):(this.set_margin_left(f),this.set_margin_right(f))}else a?l?(this.set_margin_left(a),this.set_margin_right(l),t==tr.kRightToLeftBaseDirection&&this.set_left(i.SUB(this.GetMarginBoxWidth()).SUB(n))):(this.set_margin_left(a),this.set_margin_right(d.SUB(a))):(this.set_margin_left(d.SUB(l)),this.set_margin_right(l));return}if(this.set_margin_left(a||new me),this.set_margin_right(l||new me),!s&&!o&&n){this.set_width(this.GetShrinkToFitWidth(i,c)),this.set_left(i.SUB(this.GetMarginBoxWidth()).SUB(n));return}if(!s&&!n&&o){this.set_width(o),t==tr.kLeftToRightBaseDirection?this.set_left(this.GetStaticPositionLeft()):this.set_left(i.SUB(this.GetStaticPositionRight()).SUB(this.GetMarginBoxWidth()));return}if(!o&&!n&&s){this.set_left(s),this.set_width(this.GetShrinkToFitWidth(i,c));return}if(!s&&o&&n){this.set_width(o),this.set_left(i.SUB(this.GetMarginBoxWidth()).SUB(n));return}if(!o&&s&&n){this.set_left(s),this.set_width(i.SUB(s).SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right()).SUB(n));return}if(!n&&s&&o){this.set_left(s),this.set_width(o);return}}UpdateHeightAssumingAbsolutelyPositionedBox(t,i,s,n,o,a,l){if(!i&&!n&&!s){this.set_margin_top(o||new me),this.set_margin_bottom(a||new me),this.set_top(this.GetStaticPositionTop()),this.set_height(l.auto_height());return}if(i&&n&&s){this.set_top(i),this.set_height(n);let c=t.SUB(i).SUB(this.GetBorderBoxHeight()).SUB(s);if(!o&&!a){let d=c.DIV(2);this.set_margin_top(d),this.set_margin_bottom(d)}else o?a?(this.set_margin_top(o),this.set_margin_bottom(a)):(this.set_margin_top(o),this.set_margin_bottom(c.SUB(o))):(J(a),this.set_margin_top(c.SUB(a)),this.set_margin_bottom(a));return}if(this.set_margin_top(o||new me),this.set_margin_bottom(a||new me),!i&&!n&&s){this.set_height(l.auto_height()),this.set_top(t.SUB(this.GetMarginBoxHeight()).SUB(s));return}if(!i&&!s&&n){this.set_height(n),this.set_top(this.GetStaticPositionTop());return}if(!n&&!s&&i){this.set_top(i),this.set_height(l.auto_height());return}if(!i&&n&&s){this.set_height(n),this.set_top(t.SUB(this.GetMarginBoxHeight()).SUB(s));return}if(!n&&i&&s){this.set_top(i),this.set_height(t.SUB(i).SUB(this.margin_top()).SUB(this.border_top_width()).SUB(this.padding_top()).SUB(this.padding_bottom()).SUB(this.border_bottom_width()).SUB(this.margin_bottom()).SUB(s));return}if(!s&&i&&n){this.set_top(i),this.set_height(n);return}}UpdateWidthAssumingBlockLevelInFlowBox(t,i,s,n,o){let a=n,l=o;s?(this.set_width(s),this.UpdateHorizontalMarginsAssumingBlockLevelInFlowBox(t,i,this.GetBorderBoxWidth(),a,l)):(this.set_margin_left(a||new me),this.set_margin_right(l||new me),i.SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right()),this.set_width(i.SUB(this.margin_left()).SUB(this.border_left_width()).SUB(this.padding_left()).SUB(this.padding_right()).SUB(this.border_right_width()).SUB(this.margin_right())))}UpdateWidthAssumingInlineLevelInFlowBox(t,i,s,n,o){this.set_margin_left(s||new me),this.set_margin_right(n||new me),i?this.set_width(i):this.set_width(this.GetShrinkToFitWidth(t,o))}UpdateHeightAssumingInFlowBox(t,i,s,n){if(this.collapsed_empty_margin_)this.set_margin_top(this.collapsed_empty_margin_),this.set_margin_bottom(new me);else{let o=this.collapsed_margin_top_||i||new me,a=this.collapsed_margin_bottom_||s||new me;this.set_margin_top(o),this.set_margin_bottom(a)}this.set_height(t||n.auto_height())}DumpProperties(t){return t=super.DumpProperties(t),t+="affects_baseline_in_block_formatting_context=",t+=this.AffectsBaselineInBlockFormattingContext(),t+=" ",t}AbsoluteQuadsForSelf(t,i){this.QuadsForSelfInternal(t,i,!0)}QuadsForSelfInternal(t,i,s){if(this.BorderBoxRect(),s){const n=this.GetBorderBoxFromRoot(!1);t.push(vu.fromRectF(lr.fromRectLayoutUnit(n)))}else{const n=this.BorderBoxRect();t.push(vu.fromRectF(lr.fromRectLayoutUnit(n)))}}}class Zw{constructor(e,t,i,s){u(this,"offset");u(this,"glyph_buffer");u(this,"color");u(this,"shadows",[]);u(this,"background");this.offset=e,this.glyph_buffer=t,this.color=i,this.background=s}}const qy=class extends Nh{constructor(t,i,s){super();u(this,"data_");u(this,"id",qy.ID++);t instanceof Zw?this.data_=t:this.data_=new Zw(t,i,s)}dispose(){super.dispose(),this.data_.glyph_buffer.dispose()}Accept(t){t.VisitTextNode(this)}GetBounds(){let t=this.data_.glyph_buffer.GetBounds();if(this.data_.shadows)for(let i=0;i<this.data_.shadows.length;++i)t.Union(this.data_.shadows[i].ToShadowBounds(this.data_.glyph_buffer.GetBounds()));return t.Offset(this.data_.offset),t}GetTypeId(){return rr(qy)}data(){return this.data_}};let qp=qy;u(qp,"ID",1);class XF{constructor(){u(this,"shrink_to_fit_width_",new me);u(this,"auto_height_",new me);u(this,"maybe_baseline_offset_from_top_content_edge_")}shrink_to_fit_width(){return this.shrink_to_fit_width_}auto_height(){return this.auto_height_}maybe_baseline_offset_from_top_content_edge(){return this.maybe_baseline_offset_from_top_content_edge_}set_shrink_to_fit_width(e){this.shrink_to_fit_width_=e}set_auto_height(e){this.auto_height_=e}set_baseline_offset_from_top_content_edge(e){this.maybe_baseline_offset_from_top_content_edge_=e}}class YF{constructor(e,t,i,s,n,o,a,l,c,d,f,g){u(this,"top_");u(this,"position_children_relative_to_baseline_");u(this,"line_height_");u(this,"font_metrics_");u(this,"should_collapse_leading_white_space_");u(this,"should_collapse_trailing_white_space_");u(this,"layout_params_");u(this,"base_direction_");u(this,"text_align_");u(this,"font_size_");u(this,"indent_offset_");u(this,"ellipsis_width_");u(this,"has_overflowed_");u(this,"at_end_");u(this,"child_boxes_",[]);u(this,"num_absolutely_positioned_boxes_before_first_box_justifying_line_");u(this,"first_box_justifying_line_existence_index_");u(this,"first_non_collapsed_child_box_index_");u(this,"last_non_collapsed_child_box_index_");u(this,"has_leading_white_space_",!1);u(this,"has_trailing_white_space_",!1);u(this,"shrink_to_fit_width_");u(this,"height_");u(this,"baseline_offset_from_top_");u(this,"is_ellipsis_placed_");u(this,"placed_ellipsis_offset_");this.top_=e,this.position_children_relative_to_baseline_=t,this.line_height_=i,this.font_metrics_=s,this.should_collapse_leading_white_space_=n,this.should_collapse_trailing_white_space_=o,this.layout_params_=a,this.base_direction_=l,this.text_align_=c,this.font_size_=d,this.indent_offset_=f,this.ellipsis_width_=g,this.has_overflowed_=!1,this.at_end_=!1,this.num_absolutely_positioned_boxes_before_first_box_justifying_line_=0,this.shrink_to_fit_width_=this.indent_offset_.CLONE(),this.height_=new me,this.baseline_offset_from_top_=new me,this.is_ellipsis_placed_=!1,this.placed_ellipsis_offset_=new me}top(){return this.top_}TryAddChildAndMaybeWrap(e){if(J(!this.at_end_),e.IsAbsolutelyPositioned()){this.BeginEstimateStaticPositionForAbsolutelyPositionedChild(e);return}return this.UpdateSizePreservingTrailingWhiteSpace(e),!this.has_overflowed_&&!this.TryAddChildWithinAvailableWidth(e)&&(this.TryWrapOverflowingBoxAndMaybeAddSplitChild(Qi.kWrapAtPolicyLastOpportunityWithinWidth,Qa.kWrapOpportunityPolicyNormal,e)||this.TryWrapChildrenAtLastOpportunity(Qa.kWrapOpportunityPolicyNormal)||this.TryWrapOverflowingBoxAndMaybeAddSplitChild(Qi.kWrapAtPolicyLastOpportunityWithinWidth,Qa.kWrapOpportunityPolicyBreakWord,e)||this.TryWrapChildrenAtLastOpportunity(Qa.kWrapOpportunityPolicyBreakWord)?this.at_end_=!0:this.has_overflowed_=!0),this.has_overflowed_&&(this.TryWrapOverflowingBoxAndMaybeAddSplitChild(Qi.kWrapAtPolicyFirstOpportunity,Qa.kWrapOpportunityPolicyBreakWordOrNormal,e)?this.at_end_=!0:this.BeginAddChildInternal(e)),J(this.child_boxes_.length),this.at_end_?this.child_boxes_[this.child_boxes_.length-1]:void 0}BeginAddChildAndMaybeOverflow(e){if(e.IsAbsolutelyPositioned()){this.BeginEstimateStaticPositionForAbsolutelyPositionedChild(e);return}this.UpdateSizePreservingTrailingWhiteSpace(e),this.BeginAddChildInternal(e)}EndUpdates(){this.at_end_=!0,this.should_collapse_trailing_white_space_&&this.CollapseTrailingWhiteSpace(),this.has_leading_white_space_=this.HasLeadingWhiteSpace(),this.has_trailing_white_space_=this.HasTrailingWhiteSpace(),this.ReverseChildBoxesByBidiLevels(),this.UpdateChildBoxLeftPositions(),this.SetLineBoxHeightFromChildBoxes(),this.UpdateChildBoxTopPositions(),this.MaybePlaceEllipsis()}HasLeadingWhiteSpace(){return J(this.at_end_||!this.has_leading_white_space_),this.has_leading_white_space_?!!this.has_leading_white_space_:!!this.first_non_collapsed_child_box_index_&&this.child_boxes_[this.first_non_collapsed_child_box_index_].HasLeadingWhiteSpace()}HasTrailingWhiteSpace(){return J(this.at_end_||!this.has_trailing_white_space_),this.has_trailing_white_space_?!!this.has_trailing_white_space_:!!this.last_non_collapsed_child_box_index_&&this.child_boxes_[this.last_non_collapsed_child_box_index_].HasTrailingWhiteSpace()}IsCollapsed(){return!this.first_non_collapsed_child_box_index_}LineExists(){return!Ti(this.first_box_justifying_line_existence_index_)}GetFirstBoxJustifyingLineExistenceIndex(){return(Ti(this.first_box_justifying_line_existence_index_)?this.child_boxes_.length:this.first_box_justifying_line_existence_index_)+this.num_absolutely_positioned_boxes_before_first_box_justifying_line_}IsEllipsisPlaced(){return this.is_ellipsis_placed_}GetEllipsisCoordinates(){return new rn(this.placed_ellipsis_offset_.toFloat(),this.top_.ADD(this.baseline_offset_from_top_).toFloat())}shrink_to_fit_width(){return this.shrink_to_fit_width_}height(){return this.height_}baseline_offset_from_top(){return this.baseline_offset_from_top_}GetAvailableWidth(){return this.layout_params_.containing_block_size.width().SUB(this.shrink_to_fit_width_)}UpdateSizePreservingTrailingWhiteSpace(e){e.SetShouldCollapseLeadingWhiteSpace(this.ShouldCollapseLeadingWhiteSpaceInNextChildBox()),e.SetShouldCollapseTrailingWhiteSpace(!1),e.UpdateSize(this.layout_params_)}ShouldCollapseLeadingWhiteSpaceInNextChildBox(){return this.last_non_collapsed_child_box_index_?this.child_boxes_[this.last_non_collapsed_child_box_index_].HasTrailingWhiteSpace():this.should_collapse_leading_white_space_}CollapseTrailingWhiteSpace(){if(!this.HasTrailingWhiteSpace())return;Ti(this.last_non_collapsed_child_box_index_)&&et();let e=this.child_boxes_[this.last_non_collapsed_child_box_index_],t=e.width();e.SetShouldCollapseTrailingWhiteSpace(!0),e.UpdateSize(this.layout_params_);let i=t.SUB(e.width());this.shrink_to_fit_width_.SUB_ASSIGN(i)}RestoreTrailingWhiteSpace(){if(!this.last_non_collapsed_child_box_index_)return;let e=this.child_boxes_[this.last_non_collapsed_child_box_index_],t=e.width();e.SetShouldCollapseTrailingWhiteSpace(!1),e.UpdateSize(this.layout_params_);let i=e.width().SUB(t);this.shrink_to_fit_width_.ADD_ASSIGN(i)}TryAddChildWithinAvailableWidth(e){if(e.GetMarginBoxWidth().LE(this.GetAvailableWidth()))return this.BeginAddChildInternal(e),!0;if(this.should_collapse_trailing_white_space_&&(e.HasTrailingWhiteSpace()||e.IsCollapsed()&&this.HasTrailingWhiteSpace())){let t=e.HasTrailingWhiteSpace(),i=!1;if(t?(e.SetShouldCollapseTrailingWhiteSpace(!0),e.UpdateSize(this.layout_params_)):this.CollapseTrailingWhiteSpace(),e.GetMarginBoxWidth().LE(this.GetAvailableWidth())&&(i=!0),t?(e.SetShouldCollapseTrailingWhiteSpace(!1),e.UpdateSize(this.layout_params_)):this.RestoreTrailingWhiteSpace(),i)return this.BeginAddChildInternal(e),!0}return!1}TryWrapOverflowingBoxAndMaybeAddSplitChild(e,t,i){if(!this.first_box_justifying_line_existence_index_&&!i.JustifiesLineExistence())return!1;let s=i.TryWrapAt(e,t,this.LineExists(),this.GetAvailableWidth(),this.should_collapse_trailing_white_space_);return s==ar.kWrapResultWrapBefore?!0:s==ar.kWrapResultSplitWrap?(this.UpdateSizePreservingTrailingWhiteSpace(i),this.BeginAddChildInternal(i),!0):!1}TryWrapChildrenAtLastOpportunity(e){if(!this.first_box_justifying_line_existence_index_)return!1;let t=new me,i=this.child_boxes_.length,s=this.first_box_justifying_line_existence_index_;for(;i>s;){--i;let n=this.child_boxes_[i];t.ADD_ASSIGN(n.GetMarginBoxWidth());let o=i!=s,a=n.TryWrapAt(Qi.kWrapAtPolicyLastOpportunity,e,o,new me,!1);if(a!=ar.kWrapResultNoWrap){if(this.child_boxes_.length=i,this.shrink_to_fit_width_.SUB_ASSIGN(t),this.first_non_collapsed_child_box_index_){if(this.first_non_collapsed_child_box_index_>=i)this.first_non_collapsed_child_box_index_=void 0,this.last_non_collapsed_child_box_index_=void 0;else if(this.last_non_collapsed_child_box_index_>=i){this.last_non_collapsed_child_box_index_=this.first_non_collapsed_child_box_index_;let l=i,c=this.last_non_collapsed_child_box_index_+1;for(;l>c;)if(--l,this.child_boxes_[l].IsCollapsed()){this.last_non_collapsed_child_box_index_=l;break}}}return a==ar.kWrapResultSplitWrap&&(this.UpdateSizePreservingTrailingWhiteSpace(n),this.BeginAddChildInternal(n)),!0}}return!1}BeginEstimateStaticPositionForAbsolutelyPositionedChild(e){this.first_box_justifying_line_existence_index_||++this.num_absolutely_positioned_boxes_before_first_box_justifying_line_,e.is_inline_before_blockification()?(this.CollapseTrailingWhiteSpace(),e.SetStaticPositionLeftFromParent(this.shrink_to_fit_width_),this.RestoreTrailingWhiteSpace()):e.SetStaticPositionLeftFromParent(new me),e.SetStaticPositionRightFromParent(new me),e.SetStaticPositionTopFromParent(new me)}BeginAddChildInternal(e){!this.first_box_justifying_line_existence_index_&&e.JustifiesLineExistence()&&(this.first_box_justifying_line_existence_index_=this.child_boxes_.length),e.IsCollapsed()||(this.first_non_collapsed_child_box_index_||(this.first_non_collapsed_child_box_index_=this.child_boxes_.length),this.last_non_collapsed_child_box_index_=this.child_boxes_.length),e.HasTrailingLineBreak()&&(this.at_end_=!0),this.shrink_to_fit_width_.ADD_ASSIGN(e.GetMarginBoxWidth()),this.child_boxes_.push(e)}ReverseChildBoxesByBidiLevels(){let e=-1,t=0,i=Number.MAX_SAFE_INTEGER;for(let s of this.child_boxes_){let n=s.GetBidiLevel()||e;n!=e&&(n>t&&(t=n),n<i&&(i=n))}i%2==0&&(i+=1);for(let s=t;s>=i;--s)this.ReverseChildBoxesMeetingBidiLevelThreshold(s)}ReverseChildBoxesMeetingBidiLevelThreshold(e){let t=0,i,s=0;for(let n=0;n!=this.child_boxes_.length-1-1;){let o=n++;if(s=this.child_boxes_[o].GetBidiLevel()||s,s>=e)t==0&&(i=this.child_boxes_[o]),++t;else{if(t>1){let l=i;i=this.child_boxes_[o],this.child_boxes_[o]=l}t=0}}if(t>1){let n=i;i=this.child_boxes_[this.child_boxes_.length-1],this.child_boxes_[this.child_boxes_.length-1]=n}}UpdateChildBoxLeftPositions(){let e=new me;switch(this.ComputeHorizontalAlignment()){case 0:break;case 1:e=this.GetAvailableWidth().DIV(2);break;case 2:e=this.GetAvailableWidth();break}this.base_direction_!=tr.kRightToLeftBaseDirection&&e.ADD_ASSIGN(this.indent_offset_);let i=new me(e);for(let s of this.child_boxes_)s.set_left(i),i=s.GetMarginBoxRightEdgeOffsetFromContainingBlock()}SetLineBoxHeightFromChildBoxes(){let e=new jF(this.font_metrics_,this.font_size_);this.line_height_.Accept(e),this.baseline_offset_from_top_=e.baseline_offset_from_top();let t=e.baseline_offset_from_bottom(),i=new me,s=new me;for(let n of this.child_boxes_){let o=n.computed_style().vertical_align,a=new me,l=!1;if(o==_e.GetMiddle())a=this.GetHeightAboveMiddleAlignmentPoint(n),l=!0;else if(o==_e.GetTop()){let c=n.GetInlineLevelBoxHeight();c>s&&(i=me.Max(i,c))}else if(o==_e.GetBottom()){let c=n.GetInlineLevelBoxHeight();c>i&&(s=me.Max(s,c))}else o==_e.GetBaseline()?(a=n.GetBaselineOffsetFromTopMarginEdge(),l=!0):et('Unknown value of "vertical-align".');if(l){this.baseline_offset_from_top_=me.Max(this.baseline_offset_from_top_,a);let c=n.GetInlineLevelBoxHeight().SUB(a);t=me.Max(t,c)}}this.height_=this.baseline_offset_from_top_.ADD(t),i<s?(i.GT(this.height_)&&(t=i.SUB(this.baseline_offset_from_top_)),s.GT(this.height_)&&(this.height_=s,this.baseline_offset_from_top_=this.height_.SUB(t))):(s.GT(this.height_)&&(this.baseline_offset_from_top_=s.SUB(t)),i.GT(this.height_)&&(this.height_=i,t=this.height_.SUB(this.baseline_offset_from_top_)))}UpdateChildBoxTopPositions(){let e=new me(this.top_);this.position_children_relative_to_baseline_&&e.SUB_ASSIGN(this.baseline_offset_from_top_);for(let t of this.child_boxes_){let i=t.computed_style().vertical_align,s=new me;i==_e.GetMiddle()?s=this.baseline_offset_from_top_.SUB(this.GetHeightAboveMiddleAlignmentPoint(t)):i==_e.GetTop()||(i==_e.GetBottom()?s=this.height_.SUB(t.GetInlineLevelBoxHeight()):i==_e.GetBaseline()?s=this.baseline_offset_from_top_.SUB(t.GetBaselineOffsetFromTopMarginEdge()):et("Unsupported vertical_align property value")),t.set_top(e.ADD(s).ADD(t.GetInlineLevelTopMargin()))}}MaybePlaceEllipsis(){if(this.ellipsis_width_.LE(new me)||this.shrink_to_fit_width_.LE(this.layout_params_.containing_block_size.width()))return;let e=new me;this.ellipsis_width_.LE(this.layout_params_.containing_block_size.width())?e=this.base_direction_==tr.kRightToLeftBaseDirection?this.ellipsis_width_:this.layout_params_.containing_block_size.width().SUB(this.ellipsis_width_):e=this.base_direction_==tr.kRightToLeftBaseDirection?this.layout_params_.containing_block_size.width():new me;let t=!1,i=new me;if(this.base_direction_==tr.kRightToLeftBaseDirection)for(let s=this.child_boxes_.length-1;s>-1;s--){let n=this.child_boxes_[s],{is_placement_requirement_met:o,is_placed:a,placed_offset:l}=n.TryPlaceEllipsisOrProcessPlacedEllipsis(this.base_direction_,e,t,this.is_ellipsis_placed_,i);t=o,this.is_ellipsis_placed_=a,i=l}else for(let s of this.child_boxes_){let{is_placed:n,is_placement_requirement_met:o,placed_offset:a}=s.TryPlaceEllipsisOrProcessPlacedEllipsis(this.base_direction_,e,t,this.is_ellipsis_placed_,i);t=o,this.is_ellipsis_placed_=n,i=a}this.placed_ellipsis_offset_=this.base_direction_==tr.kRightToLeftBaseDirection?i.SUB(this.ellipsis_width_):i}GetHeightAboveMiddleAlignmentPoint(e){return e.GetInlineLevelBoxHeight().ADD(new me(this.font_metrics_.x_height())).DIV(2)}ComputeHorizontalAlignment(){let e;return this.layout_params_.containing_block_size.width().LT(this.shrink_to_fit_width_)?e=this.base_direction_==tr.kRightToLeftBaseDirection?2:0:this.text_align_==_e.GetStart()?e=this.base_direction_==tr.kRightToLeftBaseDirection?2:0:this.text_align_==_e.GetEnd()?e=this.base_direction_==tr.kRightToLeftBaseDirection?0:2:this.text_align_==_e.GetLeft()?e=0:this.text_align_==_e.GetRight()?e=2:this.text_align_==_e.GetCenter()?e=1:(et('Unknown value of "text-align".'),e=0),e}}class kQ extends XF{constructor(t,i,s,n,o,a,l,c){super();u(this,"line_height_");u(this,"font_metrics_");u(this,"layout_params_");u(this,"base_direction_");u(this,"text_align_");u(this,"font_size_");u(this,"text_indent_offset_");u(this,"ellipsis_width_");u(this,"line_box_");u(this,"line_count_");u(this,"preferred_min_width_",new me);u(this,"ellipses_coordinates_",[]);this.line_height_=t,this.font_metrics_=i,this.layout_params_=s,this.base_direction_=n,this.text_align_=o,this.font_size_=a,this.text_indent_offset_=l,this.ellipsis_width_=c,this.line_count_=0,this.CreateLineBox()}TryAddChildAndMaybeWrap(t){J(this.line_box_);let i=this.line_box_.TryAddChildAndMaybeWrap(t);return i&&this.CreateLineBox(),i}EndUpdates(){this.DestroyLineBox(),this.set_shrink_to_fit_width(me.Max(this.preferred_min_width_,this.line_count_>1?this.layout_params_.containing_block_size.width():new me))}GetEllipsesCoordinates(){return this.ellipses_coordinates_}CreateLineBox(){this.line_box_&&this.DestroyLineBox();let t=this.line_count_==0?this.text_indent_offset_:new me;this.line_box_=new YF(this.auto_height(),!1,this.line_height_,this.font_metrics_,!0,!0,this.layout_params_,this.base_direction_,this.text_align_,this.font_size_,t.CLONE(),this.ellipsis_width_)}DestroyLineBox(){this.line_box_||et(),this.line_box_.EndUpdates(),this.line_box_.LineExists()&&(++this.line_count_,this.preferred_min_width_=me.Max(this.preferred_min_width_,this.line_box_.shrink_to_fit_width()),this.set_auto_height(this.line_box_.top().ADD(this.line_box_.height())),this.set_baseline_offset_from_top_content_edge(this.line_box_.top().ADD(this.line_box_.baseline_offset_from_top())),this.line_box_.IsEllipsisPlaced()&&this.ellipses_coordinates_.push(this.line_box_.GetEllipsisCoordinates())),this.line_box_=void 0}}class TQ extends KF{constructor(t,i,s){super(t,i,s);u(this,"used_font_");u(this,"ellipses_coordinates_",[]);this.used_font_=s.GetUsedFontList(t.data().font_family,t.data().font_size,t.data().font_style,t.data().font_weight)}AreEllipsesEnabled(){return this.parent().computed_style().overflow==_e.GetHidden()&&this.parent().computed_style().text_overflow==_e.GetEllipsis()}GetLevel(){return Tr.kBlockLevel}GetMarginCollapsingStatus(){return this.child_boxes().every(t=>t.IsAbsolutelyPositioned())?kd.kIgnore:kd.kSeparateAdjoiningMargins}AsAnonymousBlockBox(){return this}SplitBidiLevelRuns(){super.SplitBidiLevelRuns();for(let t=0;t<this.child_boxes().length;)this.child_boxes()[t].TrySplitAtSecondBidiLevelRun()?t=this.InsertSplitSiblingOfDirectChild(t):++t}HasTrailingLineBreak(){return this.child_boxes().length>0&&this.child_boxes()[this.child_boxes().length-1].HasTrailingLineBreak()}RenderAndAnimateContent(t,i){if(Dk.prototype.RenderAndAnimateContent.call(this,t,i),this.computed_style().visibility==_e.GetVisible()&&this.ellipses_coordinates_.length&&this.used_font_.IsVisible()){let s=en(this.computed_style().color);if(s.a()>0){let n=this.used_font_.GetEllipsisValue();const{object:{ptr:o,view:a},dispose:l}=c1(String.fromCodePoint(n),!0),c=new ob(o,a.length),d=ny.fromUTF8(c);let f=this.used_font_.CreateGlyphBuffer(d,0,1,!1);c.delete(),d.delete();for(let g of this.ellipses_coordinates_)t.AddChild(new qp(g,f,s));l()}}}TryAddChild(t){return et(),!1}AddInlineLevelChild(t){J(t.GetLevel()==Tr.kInlineLevel||t.IsAbsolutelyPositioned()),this.PushBackDirectChild(t)}UpdateRectOfInFlowChildBoxes(t){for(let o of this.child_boxes())o.DoPreEllipsisPlacementProcessing();let i=this.AreEllipsesEnabled()?this.used_font_.GetEllipsisWidth():0,s=new kQ(this.computed_style().line_height,this.used_font_.GetFontMetrics(),t,this.base_direction(),this.computed_style().text_align,this.computed_style().font_size,HF(this.computed_style().text_indent),new me(i)),n=0;for(;n!==this.child_boxes().length;){let o=this.child_boxes()[n],a=s.TryAddChildAndMaybeWrap(o);if(a){for(;o!=a;)--n,o=this.child_boxes()[n];let l=a.GetSplitSibling(),c=n+1;if(l&&(c==this.child_boxes().length-1||this.child_boxes()[c]!=l)){n=this.InsertSplitSiblingOfDirectChild(n);continue}}++n}s.EndUpdates(),this.ellipses_coordinates_=s.GetEllipsesCoordinates();for(let o of this.child_boxes())o.DoPostEllipsisPlacementProcessing();return s}DumpClassName(t){return t+="AnonymousBlockBox ",t}}class PQ{constructor(e){u(this,"collapsing_margin",new me);u(this,"context_margin_top");u(this,"should_collapse_own_margins_together",!0);u(this,"should_collapse_margin_bottom",!0);u(this,"should_collapse_margin_top");this.should_collapse_margin_top=e}}class RQ extends XF{constructor(t,i){super();u(this,"layout_params_");u(this,"margin_collapsing_params_");this.layout_params_=t,this.margin_collapsing_params_=new PQ(i)}CollapseContainingMargins(t){let i=t.padding_top()!=new me,s=t.border_top_width()!=new me,n=t.padding_bottom()!=new me,o=t.border_bottom_width()!=new me,a=this.layout_params_.maybe_margin_top||new me,l=this.layout_params_.maybe_margin_bottom||new me;if(!this.margin_collapsing_params_.context_margin_top){if(!i&&!s&&!n&&!o&&this.layout_params_.containing_block_size.height()==new me&&this.margin_collapsing_params_.should_collapse_own_margins_together){t.collapsed_empty_margin_=this.CollapseMargins(a,l);return}t.collapsed_empty_margin_=void 0;return}if(!i&&!s&&this.margin_collapsing_params_.should_collapse_margin_top){let c=this.CollapseMargins(a,this.margin_collapsing_params_.context_margin_top||new me);t.collapsed_margin_top_=c}if(!this.layout_params_.maybe_height&&!n&&!o&&this.margin_collapsing_params_.should_collapse_margin_bottom){let c=this.CollapseMargins(l,this.margin_collapsing_params_.collapsing_margin);t.collapsed_margin_bottom_=c,this.set_auto_height(this.auto_height().SUB(this.margin_collapsing_params_.collapsing_margin))}}UpdateRect(t){J(!t.IsAbsolutelyPositioned()),t.UpdateSize(this.layout_params_),t.set_left(new me),this.UpdatePosition(t),this.set_shrink_to_fit_width(me.Max(this.shrink_to_fit_width(),t.GetMarginBoxRightEdgeOffsetFromContainingBlock())),this.set_auto_height(t.GetMarginBoxBottomEdgeOffsetFromContainingBlock()),t.AffectsBaselineInBlockFormattingContext()&&this.set_baseline_offset_from_top_content_edge(t.top().ADD(t.GetBaselineOffsetFromTopMarginEdge()))}UpdatePosition(t){switch(Kt(Tr.kBlockLevel,t.GetLevel()),t.GetMarginCollapsingStatus()){case kd.kIgnore:t.set_top(this.auto_height());break;case kd.kSeparateAdjoiningMargins:t.set_top(this.auto_height()),this.margin_collapsing_params_.collapsing_margin=new me,this.margin_collapsing_params_.should_collapse_margin_bottom=!1,this.margin_collapsing_params_.context_margin_top||(this.margin_collapsing_params_.should_collapse_margin_top=!1),this.margin_collapsing_params_.should_collapse_own_margins_together=!1;break;case kd.kCollapseMargins:if(this.margin_collapsing_params_.should_collapse_margin_bottom=!0,!this.margin_collapsing_params_.context_margin_top&&this.margin_collapsing_params_.should_collapse_margin_top)t.set_top(this.auto_height().SUB(t.margin_top())),t.collapsed_empty_margin_&&(this.margin_collapsing_params_.should_collapse_margin_bottom=!1);else{let i=this.CollapseMargins(t.margin_top(),this.margin_collapsing_params_.collapsing_margin),n=this.margin_collapsing_params_.collapsing_margin.ADD(t.margin_top()).SUB(i);t.set_top(this.auto_height().SUB(n))}this.margin_collapsing_params_.collapsing_margin=t.collapsed_empty_margin_||t.margin_bottom(),this.margin_collapsing_params_.context_margin_top||(this.margin_collapsing_params_.context_margin_top=t.margin_top());break}}CollapseMargins(t,i){let s=new me;return t.GE(new me)&&i.GE(new me)?s=me.Max(t,i):t.LT(new me)&&i.LT(new me)?s=new me().ADD(me.Min(t,i)):(J(i.GE(new me)||t.GE(new me)),s=i.ADD(t)),s}}class DQ extends KF{TryAddChild(e){return this.AddChild(e),!0}AddChild(e){switch(e.GetLevel()){case Tr.kBlockLevel:if(!e.IsAbsolutelyPositioned()){this.PushBackDirectChild(e);break}case Tr.kInlineLevel:this.GetOrAddAnonymousBlockBox().AddInlineLevelChild(e);break}}UpdateRectOfInFlowChildBoxes(e){let t=!this.IsAbsolutelyPositioned()&&this.GetLevel()==Tr.kBlockLevel&&this.parent()&&this.parent().parent()&&!I0(this.computed_style()),i=t&&this.padding_top().EQ(new me)&&this.border_top_width().EQ(new me),s=new RQ(e,!!i);for(let n of this.child_boxes())s.UpdateRect(n);return t&&s.CollapseContainingMargins(this),s}GetLastChildAsAnonymousBlockBox(){return this.child_boxes().length===0?void 0:this.child_boxes()[this.child_boxes().length-1].AsAnonymousBlockBox()}GetOrAddAnonymousBlockBox(){let e=this.GetLastChildAsAnonymousBlockBox();if(Ti(e)||e&&e.HasTrailingLineBreak()){let t=new qc;t.SetData(Aw(this.css_computed_style_declaration()));let i=new TQ(t,this.base_direction(),this.used_style_provider());e=i,this.PushBackDirectChild(i)}return e}}class qF extends DQ{GetLevel(){return Tr.kBlockLevel}DumpClassName(e){return e+="BlockLevelBlockContainerBox ",e}}function CQ(r,e,t){let i=Object.create(null),s=new Fg;s.AssignFrom(r),cC(e.html(),s)?i.background_style_source=e.html():cC(e.body(),s)&&(i.background_style_source=e.body());let n=new qc;n.SetData(s);let o=tr.kLeftToRightBaseDirection;return e.html(),i.box=new qF(n,o,t),i}function cC(r,e){if(!r||!r.computed_style()||r.computed_style().display==_e.GetNone())return!1;let t=r.computed_style(),i=en(t.background_color).a()==0,s=t.background_image;s.value().length;let n=s.value().length==1&&s.value()[0]==_e.GetNone();return!i||!n?(i||e.set_background_color(t.background_color),n||e.set_background_image(t.background_image),!0):!1}var QF=(r=>(r[r.kBreakPolicyNormal=0]="kBreakPolicyNormal",r[r.kBreakPolicyBreakWord=1]="kBreakPolicyBreakWord",r))(QF||{}),aa=(r=>(r[r.kLeftToRightIsolateCodePoint=0]="kLeftToRightIsolateCodePoint",r[r.kLineFeedCodePoint=1]="kLineFeedCodePoint",r[r.kNoBreakSpaceCodePoint=2]="kNoBreakSpaceCodePoint",r[r.kObjectReplacementCharacterCodePoint=3]="kObjectReplacementCharacterCodePoint",r[r.kPopDirectionalIsolateCodePoint=4]="kPopDirectionalIsolateCodePoint",r[r.kRightToLeftIsolateCodePoint=5]="kRightToLeftIsolateCodePoint",r))(aa||{}),eA=(r=>(r[r.kLogicalTextOrder=0]="kLogicalTextOrder",r[r.kVisualTextOrder=1]="kVisualTextOrder",r))(eA||{}),tA=(r=>(r[r.kNoTextTransform=0]="kNoTextTransform",r[r.kUppercaseTextTransform=1]="kUppercaseTextTransform",r))(tA||{});class hC{constructor(e,t){this.start_position_=e,this.level_=t}}const DT=class{constructor(e,t,i,s,n){u(this,"id",DT.ID++);u(this,"unicode_text_");u(this,"locale_");u(this,"base_direction_");u(this,"directional_formatting_stack_");u(this,"line_break_iterator_");u(this,"character_break_iterator_");u(this,"is_closed_");u(this,"level_runs_",[]);u(this,"last_retrieved_run_index_");this.locale_=e,this.base_direction_=t,this.directional_formatting_stack_=i,this.line_break_iterator_=s,this.character_break_iterator_=n,this.is_closed_=!1,this.last_retrieved_run_index_=0,this.level_runs_.push(new hC(0,dC(t))),this.unicode_text_=new ny,J(this.unicode_text_.length()===0);for(let o=0;o<this.directional_formatting_stack_.length;++o)this.directional_formatting_stack_[o]==1?this.unicode_text_.appendChar16(U2):this.unicode_text_.appendChar16(Lw)}dispose(){this.unicode_text_.delete()}AppendUtf8String(e,t=0){let i=this.GetTextEndPosition();if(J(!this.is_closed_),!this.is_closed_){const{object:{ptr:s,view:n},dispose:o}=c1(e,!0),a=new ob(s,n.length);let l=ny.fromUTF8(a);t==1&&ze(),this.unicode_text_.appendUnicodeString(l),a.delete(),l.delete(),o()}return i}AppendCodePoint(e){let t=this.GetTextEndPosition();if(J(!this.is_closed_),!this.is_closed_)switch(e){case 0:this.directional_formatting_stack_.push(0),this.unicode_text_.appendChar16(Lw);break;case 1:this.unicode_text_.appendChar16(M2);break;case 2:this.unicode_text_.appendChar16(B2);break;case 3:this.unicode_text_.appendChar16(L2);break;case 4:this.directional_formatting_stack_.pop(),this.unicode_text_.appendChar16(mx);break;case 5:this.directional_formatting_stack_.push(1),this.unicode_text_.appendChar16(mx);break}return t}FindBreakPosition(e,t,i,s,n,o,a,l,c){J(this.is_closed_);let d;J(e==this.base_direction_),this.AreInlineAndScriptDirectionsTheSame(e,s)||t?d=s:d=n;let f=new me;if(!l&&o.LE(new me))return{result:!1,break_position:d,break_width:f};if(c==0||o.GT(new me)){let g=l&&c==0,{break_position:x,break_width:E}=this.FindIteratorBreakPosition(e,t,i,this.line_break_iterator_,s,n,o,a,g,d,f);d=x,f=E}if(c==1)if(this.AreInlineAndScriptDirectionsTheSame(e,s)||t?l=l&&d==s:l=l&&d==n,this.AreInlineAndScriptDirectionsTheSame(e,s)||t){let{break_position:g,break_width:x}=this.FindIteratorBreakPosition(e,t,i,this.character_break_iterator_,d,n,o,!1,l,d,f);d=g,f=x}else{let{break_position:g,break_width:x}=this.FindIteratorBreakPosition(e,t,i,this.character_break_iterator_,s,d,o,!1,l,d,f);d=g,f=x}return this.AreInlineAndScriptDirectionsTheSame(e,s)||t?{result:d>s,break_width:f,break_position:d}:{result:d<n,break_position:d,break_width:f}}GetNextBreakPosition(e,t){let i=this.GetBreakIterator(t);return i.setText(this.unicode_text_),i.following(e)}GetPreviousBreakPosition(e,t){let i=this.GetBreakIterator(t);return i.setText(this.unicode_text_),i.preceding(e)}IsBreakPosition(e,t){let i=this.GetBreakIterator(t);return i.setText(this.unicode_text_),Boolean(i.isBoundary(e))}RetrieveUtf8SubString(e,t,i=0){if(e<t){let s=this.unicode_text_.tempSubStringBetween(e,t);i==1&&this.IsRTL(e)&&s.reverse();let n=s.toUTF8String();return s.delete(),n}return""}GetTextBuffer(){return this.unicode_text_.getBuffer()}GetText(){return this.unicode_text_}GetLocale(){return this.locale_}base_direction(){return this.base_direction_}GetDirectionalFormattingStackDirection(){let e=this.directional_formatting_stack_.length;return e>0?this.directional_formatting_stack_[e-1]==1?tr.kRightToLeftBaseDirection:tr.kLeftToRightBaseDirection:this.base_direction_}GetBidiLevel(e){return this.level_runs_[this.GetRunIndex(e)].level_}IsRTL(e){return this.GetBidiLevel(e)%2==1}AreInlineAndScriptDirectionsTheSame(e,t){return e==tr.kLeftToRightBaseDirection&&!this.IsRTL(t)||e==tr.kRightToLeftBaseDirection&&this.IsRTL(t)}IsCollapsibleWhiteSpace(e){return this.unicode_text_.charAt(e)===C0}GetNextRunPosition(e){let t=this.GetRunIndex(e)+1;return t>=this.level_runs_.length?{result:!1}:{next_run_position:this.level_runs_[t].start_position_,result:!0}}GetTextEndPosition(){return this.unicode_text_.length()}GetTextPositionAtVisualLocation(e,t,i,s,n){let o=1,a=0,l=-1;for(;o+i<=s;o++){const c=t.GetTextWidth(this.unicode_text_,i,o,this.IsRTL(i));if(c>=n){let d=Math.abs(c-n)<Math.abs(a-n);a=d?c:a,l=d?i+o:i+o-1;break}a=c}return l}GetSubstrWidth(e,t,i,s){return t.GetTextWidth(this.unicode_text_,i,s,this.IsRTL(i))}GetDirectionalFormattingStack(){return this.directional_formatting_stack_}Close(){if(J(!this.is_closed_),!this.is_closed_){for(let e=this.directional_formatting_stack_.length;e>0;--e)this.unicode_text_.appendChar16(mx);this.is_closed_=!0,this.GenerateBidiLevelRuns()}}IsClosed(){return this.is_closed_}GetBreakIterator(e){return e==0?this.line_break_iterator_:this.character_break_iterator_}FindIteratorBreakPosition(e,t,i,s,n,o,a,l,c,d,f){if(s.setText(this.unicode_text_),this.AreInlineAndScriptDirectionsTheSame(e,n)||t)for(let g=s.following(n);g!=MP&&g<o;g=s.next()){let{result:x,break_position:E}=this.TryIncludeSegmentWithinAvailableWidth(e,t,i,d,g,a,l,c,d,f);if(d=E,!x)break}else for(let g=s.preceding(o);g!=MP&&g>n;g=s.previous()){let{result:x,break_position:E}=this.TryIncludeSegmentWithinAvailableWidth(e,t,i,g,d,a,l,c,d,f);if(d=E,!x)break}return{break_width:f,break_position:d}}TryIncludeSegmentWithinAvailableWidth(e,t,i,s,n,o,a,l,c,d){let f=new me(i.GetTextWidth(this.unicode_text_,s,n-s,this.IsRTL(s))),g=new me(a&&this.IsCollapsibleWhiteSpace(n-1)?i.GetSpaceWidth():0);return!l&&d.ADD(f).SUB(g).GT(o)?{result:!1,allow_overflow:l,break_position:c}:(this.AreInlineAndScriptDirectionsTheSame(e,s)||t?c=n:c=s,d.ADD_ASSIGN(f),l&&(l=!1,d.GE(o))?{result:!1,allow_overflow:l,break_position:c}:{result:!0,allow_overflow:l,break_position:c})}GenerateBidiLevelRuns(){J(this.is_closed_);const e=this.unicode_text_.length();if(e===0)return;const t=mN(e,0);try{if(!t)return;const i=yN(t,this.unicode_text_,dC(this.base_direction_));if(g5(i))return;let s=vN(t);if(J(s),s===-1)return;this.level_runs_.length=0;let n=0,o=rw(4),a=rw(4),l=this.GetTextEndPosition();for(;n<l;){EN(t,n,o,a);let c=iw(a,"i32"),d=iw(o,"i32");c<0&&d===l&&(c=0),this.level_runs_.push(new hC(n,c)),n=d}tw(o),tw(a)}finally{xN(t)}}GetRunIndex(e){for(J(this.is_closed_);this.last_retrieved_run_index_<this.level_runs_.length-1&&this.level_runs_[this.last_retrieved_run_index_].start_position_<e;)++this.last_retrieved_run_index_;for(;this.level_runs_[this.last_retrieved_run_index_].start_position_>e;)--this.last_retrieved_run_index_;return this.last_retrieved_run_index_}};let Gc=DT;u(Gc,"ID",1);function dC(r){return r==tr.kRightToLeftBaseDirection?1:0}function JF(r,e){let t=0;switch(r){case Qa.kWrapOpportunityPolicyNormal:t=0;break;case Qa.kWrapOpportunityPolicyBreakWord:t=1;break;case Qa.kWrapOpportunityPolicyBreakWordOrNormal:t=e?1:0;break}return t}class OQ extends LB{createReferencedObject(e,...t){return new Gc(...t)}destroyReferencedObject(e,t){t.dispose()}}function ZF(r){return r.codePointAt(0)<=" ".codePointAt(0)&&(r==" "||r==`
`||r=="	"||r=="\r"||r=="\f")}function NQ(r){return r!=_e.GetPre()&&r!=_e.GetPreLine()&&r!=_e.GetPreWrap()}function rA(r){return r!=_e.GetPre()&&r!=_e.GetPreWrap()}function Ck(r){return r!=_e.GetPre()&&r!=_e.GetNowrap()}function IQ(r){let e=0,t=r.length-1,i=[],{result:s,input_iterator:n}=fC(r,e,t);for(e=n,s&&i.push(" ");;){let{result:o,input_iterator:a}=FQ(r,e,t,i);if(e=a,!o)break;let{result:l,input_iterator:c}=fC(r,e,t);if(e=c,!l)break;i.push(" ")}return i.join("")}function fC(r,e,t){let i=!1;for(;e<=t&&ZF(r[e]);++e)i=!0;return{result:i,input_iterator:e}}function FQ(r,e,t,i){let s=!1;for(;e<=t;++e){let n=r[e];if(ZF(n))break;s=!0,i.push(n)}return{result:s,input_iterator:e}}function MQ(r,e){let t=r.length,i=0;for(;e<r.length;++e){let s=r[e];if(s=="\r"){t=e++,e<r.length&&r[e]==`
`?i=2:i=1;break}else if(s==`
`){t=e,i=1;break}}return{result:i>0,sequence_length:i,sequence_start:t}}class BQ{constructor(e,t){this.colorBrush=e,this.rect=t}}class LQ{constructor(e,t,i){u(this,"offset");u(this,"blur_sigma");u(this,"color");this.offset=e,this.blur_sigma=t,this.color=i}BlurExtent(){return new rn(this.blur_sigma*3,this.blur_sigma*3)}ToShadowBounds(e){let t=new lr(e);t.Offset(this.offset);let i=this.BlurExtent();return t.Outset(i.x(),i.y()),t}}class Oy extends yc{constructor(t,i,s,n,o,a,l,c){super(t,l);u(this,"_selectionStartPosition",-1);u(this,"_selectionEndPosition",-1);u(this,"paragraph_ref_");u(this,"text_start_position_");u(this,"text_end_position_");u(this,"truncated_text_start_position_");u(this,"truncated_text_end_position_");u(this,"previous_truncated_text_start_position_");u(this,"previous_truncated_text_end_position_");u(this,"truncated_text_offset_from_left_");u(this,"used_font_");u(this,"text_has_leading_white_space_");u(this,"text_has_trailing_white_space_");u(this,"should_collapse_leading_white_space_");u(this,"should_collapse_trailing_white_space_");u(this,"has_trailing_line_break_");u(this,"baseline_offset_from_top_");u(this,"is_product_of_split_");u(this,"split_sibling_");u(this,"update_size_results_valid_");u(this,"line_height_");u(this,"inline_top_margin_");u(this,"ascent_");u(this,"non_collapsible_text_width_");this.ctx=c,this._register(this.paragraph_ref_=i),this.text_start_position_=s,this.text_end_position_=n,this.truncated_text_start_position_=s,this.truncated_text_end_position_=n,this.previous_truncated_text_start_position_=s,this.previous_truncated_text_end_position_=n,this.truncated_text_offset_from_left_=0,this.used_font_=l.GetUsedFontList(t.data().font_family,t.data().font_size,t.data().font_style,t.data().font_weight),this.text_has_leading_white_space_=!1,this.text_has_trailing_white_space_=!1,this.should_collapse_leading_white_space_=!1,this.should_collapse_trailing_white_space_=!1,this.has_trailing_line_break_=o,this.is_product_of_split_=a,this.update_size_results_valid_=!1,this.ascent_=0,J(this.text_start_position_<=this.text_end_position_),this.UpdateTextHasLeadingWhiteSpace(),this.UpdateTextHasTrailingWhiteSpace()}GetLevel(){return Tr.kInlineLevel}AsTextBox(){return this}isTextBox(){return!0}GetTextStartPosition(){return this.text_start_position_}GetTextEndPosition(){return this.text_end_position_}GetClientRect(){const t=this.GetBorderBoxFromRoot(!1),i=t.x(),s=t.y().SUB(this.GetInlineLevelTopMargin());return new Ds(new Ts(i,s),new An(t.width(),this.GetInlineLevelBoxHeight()))}getSelectionStartPosition(){return this._selectionStartPosition}getSelectionEndPosition(){return this._selectionEndPosition}setSelection(t=-1,i=-1){J(t<=i),t!==-1&&J(t>=this.text_start_position_),i!==-1&&J(i<=this.text_end_position_),this._selectionStartPosition=t,this._selectionEndPosition=i}hasSelection(){return this._selectionStartPosition!==-1}unsetSelection(){this.setSelection()}UpdateContentSizeAndMargins(t){if(J(bv(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),J(kk(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),J(kv(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),J(Tk(this.computed_style(),t.containing_block_size).EqualOrNaN(new me)),!this.non_collapsible_text_width_){let i=this.computed_style().line_height,s=i==_e.GetNormal(),n=[],o=this.GetNonCollapsibleTextStartPosition();if(this.non_collapsible_text_width_=this.HasNonCollapsibleText()?new me(this.used_font_.GetTextWidth(this.paragraph.GetText(),o,this.GetNonCollapsibleTextLength(),this.paragraph.IsRTL(o),s?n:void 0)):new me,!this.baseline_offset_from_top_||s){this.set_margin_left(new me),this.set_margin_top(new me),this.set_margin_right(new me),this.set_margin_bottom(new me);let a=this.used_font_.GetFontMetrics(n),l=new jF(a,this.computed_style().font_size);i.Accept(l),this.set_height(new me(a.em_box_height())),this.baseline_offset_from_top_=l.baseline_offset_from_top(),this.line_height_=l.used_line_height(),this.inline_top_margin_=l.half_leading(),this.ascent_=a.ascent()}}this.set_width(this.GetLeadingWhiteSpaceWidth().ADD(this.non_collapsible_text_width_).ADD(this.GetTrailingWhiteSpaceWidth()))}TryWrapAt(t,i,s,n,o){J(!this.IsAbsolutelyPositioned());let a=this.computed_style().overflow_wrap==_e.GetBreakWord();if(!$F(i,a))return ar.kWrapResultNoWrap;if(!Ck(this.computed_style().white_space))return!this.is_product_of_split_&&s&&this.text_start_position_>0&&this.paragraph.IsCollapsibleWhiteSpace(this.text_start_position_-1)?ar.kWrapResultWrapBefore:ar.kWrapResultNoWrap;let l=s?this.text_start_position_:this.GetNonCollapsibleTextStartPosition(),c=this.GetWrapPosition(t,i,s,n,o,a,l),d;return c==this.text_start_position_&&s?d=ar.kWrapResultWrapBefore:c>l&&c<this.text_end_position_?(this.SplitAtPosition(c),d=ar.kWrapResultSplitWrap):d=ar.kWrapResultNoWrap,d}GetTextPositionAtVisualLocation(t){return this.paragraph.GetTextPositionAtVisualLocation(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,this.text_end_position_,t)}GetSplitSibling(){return this.split_sibling_}DoesFulfillEllipsisPlacementRequirement(){return this.GetNonCollapsedTextStartPosition()<this.GetNonCollapsedTextEndPosition()}DoPreEllipsisPlacementProcessing(){this.previous_truncated_text_start_position_=this.truncated_text_start_position_,this.previous_truncated_text_end_position_=this.truncated_text_end_position_,this.truncated_text_start_position_=this.text_start_position_,this.truncated_text_end_position_=this.text_end_position_}DoPostEllipsisPlacementProcessing(){(this.previous_truncated_text_start_position_!=this.truncated_text_start_position_||this.previous_truncated_text_end_position_!=this.truncated_text_end_position_)&&this.InvalidateRenderTreeNodesOfBoxAndAncestors()}SplitBidiLevelRuns(){}TrySplitAtSecondBidiLevelRun(){let{next_run_position:t,result:i}=this.paragraph.GetNextRunPosition(this.text_start_position_);if(i){if(J(!Ti(t)),t<this.text_end_position_)return this.SplitAtPosition(t),!0;et()}else return!1}GetBidiLevel(){return this.paragraph.GetBidiLevel(this.text_start_position_)}SetShouldCollapseLeadingWhiteSpace(t){this.should_collapse_leading_white_space_!=t&&(this.should_collapse_leading_white_space_=t,this.update_size_results_valid_=!1)}SetShouldCollapseTrailingWhiteSpace(t){this.should_collapse_trailing_white_space_!=t&&(this.should_collapse_trailing_white_space_=t,this.update_size_results_valid_=!1)}HasLeadingWhiteSpace(){return this.text_has_leading_white_space_&&!this.should_collapse_leading_white_space_&&(this.HasNonCollapsibleText()||!this.should_collapse_trailing_white_space_)}HasTrailingWhiteSpace(){return this.text_has_trailing_white_space_&&!this.should_collapse_trailing_white_space_&&(this.HasNonCollapsibleText()||!this.should_collapse_leading_white_space_)}IsCollapsed(){return!this.HasLeadingWhiteSpace()&&!this.HasTrailingWhiteSpace()&&!this.HasNonCollapsibleText()}JustifiesLineExistence(){return this.HasNonCollapsibleText()||this.has_trailing_line_break_}HasTrailingLineBreak(){return this.has_trailing_line_break_}AffectsBaselineInBlockFormattingContext(){et("Should only be called in a block formatting context.")}GetBaselineOffsetFromTopMarginEdge(){return this.baseline_offset_from_top_||new me}GetInlineLevelBoxHeight(){return this.line_height_}GetInlineLevelTopMargin(){return this.inline_top_margin_}ValidateUpdateSizeInputs(t){return yc.prototype.ValidateUpdateSizeInputs.call(this,t)&&this.update_size_results_valid_?!0:(this.update_size_results_valid_=!0,!1)}HasNonCollapsibleText(){return this.GetNonCollapsibleTextLength()>0}RenderAndAnimateContent(t,i){var s;if(this.computed_style().visibility==_e.GetVisible()&&(J(this.border_left_width().ADD(this.padding_left()).EqualOrNaN(new me)),J(this.border_top_width().ADD(this.padding_top()).EqualOrNaN(new me)),this.HasNonCollapsibleText()&&this.HasVisibleText()&&this.used_font_.IsVisible())){let n=en(this.computed_style().color),o=this.computed_style().text_shadow;if(n.a()>0||o!=_e.GetNone()){let a=this.GetVisibleTextStartPosition(),l=this.GetVisibleTextLength(),c=this.used_font_.CreateGlyphBuffer(this.paragraph.GetText(),a,l,this.paragraph.IsRTL(a)),d=new Zw(new rn(this.truncated_text_offset_from_left_,this.ascent_),c,n);if(this.hasSelection()){const x=this._selectionStartPosition,E=this._selectionEndPosition,P=Math.max(x,this.text_start_position_),b=Math.min(E,this.text_end_position_),D=this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,P-this.text_start_position_),C=b===P?D:this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,b-this.text_start_position_),O=this.GetInlineLevelBoxHeight().toFloat(),N=Math.min(D,C),j=Math.max(D,C),I=Sn.fromHex("#add6ff");J(I);const M=I.rgba,R=((s=this.inline_top_margin_)==null?void 0:s.toFloat())||0;d.background=new BQ(new Uc(new hh(M.r/255,M.g/255,M.b/255,M.a)),new lr(N,-R,j-N,O))}if(o!=_e.GetNone()){let x=this.computed_style().text_shadow;UQ(d,x)}let f=new qp(d),g;g=f,t.AddChild(g)}}}IsTransformable(){return!1}DumpClassName(t){return t+="TextBox "}DumpProperties(t){return t=yc.prototype.DumpProperties.call(this,t),t+="select_start=",t+=this._selectionStartPosition,t+=" ",t+="select_end=",t+=this._selectionEndPosition,t+=" ",t}DumpChildrenWithIndent(t,i){return t=yc.prototype.DumpChildrenWithIndent.call(this,t,i),t=this.DumpIndent(t,i),t+='"',t+=this.GetNonCollapsibleText(),t+=`"
`,t}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){if(n)return this.paragraph.AreInlineAndScriptDirectionsTheSame(t,this.text_start_position_)?this.truncated_text_end_position_=this.text_start_position_:this.truncated_text_start_position_=this.text_end_position_,{is_placement_requirement_met:s,is_placed:n,placed_offset:o};n=!0;let a=this.GetContentBoxStartEdgeOffsetFromContainingBlock(t),l=t==tr.kRightToLeftBaseDirection?a.SUB(i):i.SUB(a),c=this.GetNonCollapsedTextStartPosition(),d=this.GetNonCollapsedTextEndPosition(),{result:f,break_width:g,break_position:x}=this.paragraph.FindBreakPosition(t,!1,this.used_font_,c,d,l,!1,!s,QF.kBreakPolicyBreakWord),E=x,P=g;return f?(t==tr.kRightToLeftBaseDirection?(o=a.SUB(P),this.truncated_text_offset_from_left_=o.SUB(this.GetContentBoxLeftEdgeOffsetFromContainingBlock()).toFloat()):o=a.ADD(P),this.paragraph.AreInlineAndScriptDirectionsTheSame(t,c)?this.truncated_text_end_position_=E:this.truncated_text_start_position_=E):s?(o=this.GetMarginBoxStartEdgeOffsetFromContainingBlock(t),this.paragraph.AreInlineAndScriptDirectionsTheSame(t,c)?this.truncated_text_end_position_=this.text_start_position_:this.truncated_text_start_position_=this.text_end_position_):o=this.GetMarginBoxEndEdgeOffsetFromContainingBlock(t),{is_placement_requirement_met:s,is_placed:n,placed_offset:o}}get paragraph(){return this.paragraph_ref_.object}UpdateTextHasLeadingWhiteSpace(){this.text_has_leading_white_space_=this.text_start_position_!=this.text_end_position_&&this.paragraph.IsCollapsibleWhiteSpace(this.text_start_position_)&&rA(this.computed_style().white_space)}UpdateTextHasTrailingWhiteSpace(){this.text_has_trailing_white_space_=!this.has_trailing_line_break_&&this.text_start_position_!=this.text_end_position_&&this.paragraph.IsCollapsibleWhiteSpace(this.text_end_position_-1)&&rA(this.computed_style().white_space)}GetWrapPosition(t,i,s,n,o,a,l){let c=JF(i,a),d=-1;switch(t){case Qi.kWrapAtPolicyBefore:s&&this.paragraph.IsBreakPosition(this.text_start_position_,c)?d=this.text_start_position_:d=-1;break;case Qi.kWrapAtPolicyLastOpportunityWithinWidth:{s?l!=this.GetNonCollapsedTextStartPosition()&&n.ADD_ASSIGN(new me(this.used_font_.GetSpaceWidth())):n.SUB_ASSIGN(this.GetLeadingWhiteSpaceWidth());let{break_width:f,break_position:g,result:x}=this.paragraph.FindBreakPosition(this.paragraph.base_direction(),!0,this.used_font_,l,this.text_end_position_,n,o,!1,c);d=g,x||(s&&this.paragraph.IsBreakPosition(this.text_start_position_,c)?d=this.text_start_position_:d=-1);break}case Qi.kWrapAtPolicyLastOpportunity:d=this.paragraph.GetPreviousBreakPosition(this.text_end_position_,c);break;case Qi.kWrapAtPolicyFirstOpportunity:{let f=s?l-1:l;d=this.paragraph.GetNextBreakPosition(f,c);break}}return d}SplitAtPosition(t){let i=this.text_end_position_;this.text_end_position_=t,this.truncated_text_end_position_=this.text_end_position_,this.update_size_results_valid_=!1,this.non_collapsible_text_width_=void 0;const s=!0;let n=new Oy(this.css_computed_style_declaration(),this.paragraph_ref_.copy(),t,i,this.has_trailing_line_break_,s,this.used_style_provider(),this.ctx);n.node=this.node,this.node.GetLayoutObject().AsLayoutTexes().Append(n),n.split_sibling_=this.split_sibling_,this.split_sibling_=n,this.has_trailing_line_break_=!1,this.UpdateTextHasTrailingWhiteSpace()}GetLeadingWhiteSpaceWidth(){return this.HasLeadingWhiteSpace()?new me(this.used_font_.GetSpaceWidth()):new me}GetTrailingWhiteSpaceWidth(){return this.HasTrailingWhiteSpace()&&this.HasNonCollapsibleText()?new me(this.used_font_.GetSpaceWidth()):new me}GetNonCollapsedTextStartPosition(){return this.should_collapse_leading_white_space_?this.GetNonCollapsibleTextStartPosition():this.text_start_position_}GetNonCollapsedTextEndPosition(){return this.should_collapse_trailing_white_space_?this.GetNonCollapsibleTextEndPosition():this.text_end_position_}GetNonCollapsibleTextStartPosition(){return this.text_has_leading_white_space_?this.text_start_position_+1:this.text_start_position_}GetNonCollapsibleTextEndPosition(){return this.text_has_trailing_white_space_?this.text_end_position_-1:this.text_end_position_}GetNonCollapsibleTextLength(){return this.GetNonCollapsibleTextEndPosition()-this.GetNonCollapsibleTextStartPosition()}GetNonCollapsibleText(){return this.paragraph.RetrieveUtf8SubString(this.GetNonCollapsibleTextStartPosition(),this.GetNonCollapsibleTextEndPosition(),eA.kVisualTextOrder)}GetVisibleTextStartPosition(){return Math.max(this.GetNonCollapsedTextStartPosition(),this.truncated_text_start_position_)}GetVisibleTextEndPosition(){return Math.min(this.GetNonCollapsedTextEndPosition(),this.truncated_text_end_position_)}GetVisibleTextLength(){return this.GetVisibleTextEndPosition()-this.GetVisibleTextStartPosition()}HasVisibleText(){return this.GetVisibleTextLength()>0}GetVisibleText(){return this.paragraph.RetrieveUtf8SubString(this.GetVisibleTextStartPosition(),this.GetVisibleTextEndPosition(),eA.kVisualTextOrder)}AbsoluteQuads(t,i){ze()}RectOfSlice(t,i){const s=t,n=i,o=Math.max(s,this.text_start_position_),a=Math.min(n,this.text_end_position_),l=this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,o-this.text_start_position_),c=a===o?l:this.paragraph.GetSubstrWidth(this.paragraph.base_direction(),this.used_font_,this.text_start_position_,a-this.text_start_position_),d=this.GetBorderBoxFromRoot(!1),f=this.GetInlineLevelBoxHeight().toFloat(),g=d.y().SUB(this.GetInlineLevelTopMargin()).toFloat(),x=d.x().toFloat(),E=Math.min(l,c);return new zK(x+E,g,Math.abs(c-l),f)}}function UQ(r,e){if(e.value().length!==0)for(let t=0;t<e.value().length;++t){let i=e.value()[t],s=new rn(i.offset_x().value(),i.offset_y().value()),n=i.blur_radius()?HF(i.blur_radius()).toFloat()/3:0,o=en(i.color());r.shadows.push(new LQ(s,n,o))}}function GQ(r,e){let i=Object.create(null);if(e.GetArea()==0)return _i(nn,"destination_size ",e," is empty"),i;if(r.GetArea()==0)return i.fill_rects.push(new lr(e)),i;let s=r.width()/r.height(),n=e.width()/e.height();if(Math.abs(s-n)<.01)i.image_rect=new lr(e);else if(s>n){let o=new Jw(e.width(),e.width()/s),a=(e.height()-o.height())/2;i.image_rect=new lr(new zr(0,a),o),i.fill_rects.push(new lr(0,0,e.width(),a)),i.fill_rects.push(new lr(0,e.height()-a,e.width(),a))}else{let o=new Jw(e.height()*s,e.height()),a=(e.width()-o.width())/2;i.image_rect=new lr(new zr(a,0),o),i.fill_rects.push(new lr(0,0,a,e.height())),i.fill_rects.push(new lr(e.width()-a,0,a,e.height()))}return i}class Tv{constructor(e,t,i){u(this,"source");u(this,"destination_rect");u(this,"local_transform",Li.Identity());arguments.length===1?e instanceof Tv?(this.source=e.source,this.destination_rect=e.destination_rect,this.local_transform=e.local_transform):(this.source=e,this.destination_rect=e?new lr(e.GetSize()):new lr):arguments.length===2?(this.source=e,t instanceof lr?this.destination_rect=t:this.destination_rect=new lr(gy(t),this.source.GetSize())):(this.source=e,this.destination_rect=t,this.local_transform=i)}EQ(e){return this.source==e.source&&this.destination_rect==e.destination_rect&&this.local_transform==e.local_transform}}class Ok extends Nh{constructor(...t){super();u(this,"data_");this.data_=new Tv(...t)}Accept(t){t.VisitImageNode(this)}GetBounds(){return this.data_.destination_rect}GetTypeId(){return rr(Ok)}data(){return this.data_}}class Nk extends Nh{constructor(t){super();u(this,"data_");this.data_=t}Accept(t){t.VisitFreehandNode(this)}GetBounds(){return new lr}GetTypeId(){return rr(Nk)}data(){return this.data_}}const zQ=2,HQ=300;var iA=(r=>(r[r.kImage=1]="kImage",r[r.kVideo=2]="kVideo",r[r.kPunchOutVideo=3]="kPunchOutVideo",r[r.kLottie=4]="kLottie",r[r.kFreehand=5]="kFreehand",r))(iA||{});class eM extends yc{constructor(t,i,s,n,o,a,l,c,d,f){super(t,c);u(this,"maybe_intrinsic_width_");u(this,"maybe_intrinsic_height_");u(this,"intrinsic_ratio_");u(this,"content_");u(this,"paragraph_ref_");u(this,"text_position_");u(this,"replaced_box_mode_");this.maybe_intrinsic_width_=o,this.maybe_intrinsic_height_=a,this.intrinsic_ratio_=l||zQ,this.content_=i,this._register(this.paragraph_ref_=s),this.text_position_=n,this.replaced_box_mode_=d,this.content_size_=new An(f)}TryWrapAt(t,i,s,n,o){if(J(!this.IsAbsolutelyPositioned()),!s||!this.parent())return ar.kWrapResultNoWrap;let a=this.parent().computed_style().overflow_wrap==_e.GetBreakWord();if(!$F(i,a))return ar.kWrapResultNoWrap;if(!Ck(this.parent().computed_style().white_space))return this.text_position_>0&&this.paragraph_ref_.object.IsCollapsibleWhiteSpace(this.text_position_-1)?ar.kWrapResultWrapBefore:ar.kWrapResultNoWrap;let l=JF(i,a);return this.paragraph_ref_.object.IsBreakPosition(this.text_position_,l)?ar.kWrapResultWrapBefore:ar.kWrapResultNoWrap}SplitBidiLevelRuns(){}TrySplitAtSecondBidiLevelRun(){return!1}GetBidiLevel(){return this.paragraph_ref_.object.GetBidiLevel(this.text_position_)}SetShouldCollapseLeadingWhiteSpace(t){}SetShouldCollapseTrailingWhiteSpace(t){}HasLeadingWhiteSpace(){return!1}HasTrailingWhiteSpace(){return!1}IsCollapsed(){return!1}JustifiesLineExistence(){return!0}AffectsBaselineInBlockFormattingContext(){return!1}GetBaselineOffsetFromTopMarginEdge(){return this.GetMarginBoxHeight()}UpdateContentSizeAndMargins(t){let i=FF(this.computed_style(),t.containing_block_size),s=bk(this.computed_style(),t.containing_block_size);t.freeze_width&&(i=this.width()),t.freeze_height&&(s=this.height());let n=wk(this.computed_style(),t.containing_block_size),o=Ak(this.computed_style(),t.containing_block_size);if(this.IsAbsolutelyPositioned()&&(this.set_left(n||new me(this.GetStaticPositionLeft())),this.set_top(o||new me(this.GetStaticPositionTop()))),s||Ec(Pp,'ReplacedBox element has computed height "auto"!'),i||Ec(Pp,'ReplacedBox element has computed width "auto"!'),(!s||!i)&&Ec(Pp,'Cobalt ReplacedBox does not handle "auto" dimensions correctly! ','"auto" dimensions are updated using the intrinsic dimensions of ',"the content (e.g. video width/height), which is often not what is ","intended."),i?this.set_width(i):s?this.set_width(s.MUL(this.intrinsic_ratio_)):this.maybe_intrinsic_width_?this.set_width(this.maybe_intrinsic_width_):this.maybe_intrinsic_height_?this.set_width(this.maybe_intrinsic_height_.MUL(this.intrinsic_ratio_)):this.set_width(new me(HQ)),s?this.set_height(s):!i&&this.maybe_intrinsic_height_?this.set_height(this.maybe_intrinsic_height_):this.set_height(this.width().DIV(this.intrinsic_ratio_)),!i&&!s){let g=BF(this.computed_style(),t.containing_block_size),x=UF(this.computed_style(),t.containing_block_size);x||(x=new me);let E=GF(this.computed_style(),t.containing_block_size),P=zF(this.computed_style(),t.containing_block_size)||new me,b=this.width(),D=this.height(),C,O=!1;E&&(C=me.Max(P,E),O=D.GT(C));let N,j=!1;if(g&&(N=me.Max(x,g),j=b.GT(N)),j)if(O){let I=N.DIV(b.toFloat()),M=C.DIV(D.toFloat());I>M?(this.set_width(me.Max(x,C.MUL(b.toFloat()/D.toFloat()))),this.set_height(C)):(this.set_width(N),this.set_height(me.Max(P,N.MUL(D.toFloat()/b.toFloat()))))}else D<P?(this.set_width(N),this.set_height(P)):(this.set_width(N),this.set_height(me.Max(N.MUL(D.toFloat()/b.toFloat()),P)));else if(b<x)if(O)this.set_width(x),this.set_height(C);else if(D<P){let I=x.DIV(b.toFloat()),M=P.DIV(D.toFloat());if(I>M){this.set_width(x);let R=x.MUL(D.toFloat()/b.toFloat());C?this.set_height(me.Min(C,R)):this.set_height(R)}else{let R=P.MUL(b.toFloat()/D.toFloat());N?this.set_width(me.Min(N,R)):this.set_width(R),this.set_height(P)}}else{this.set_width(x);let I=x.MUL(D.toFloat()/b.toFloat());C?this.set_height(me.Min(I,C)):this.set_height(I)}else if(O)this.set_width(me.Max(C.MUL(b.toFloat()/D.toFloat()),x)),this.set_height(C);else if(D<P){let I=P.MUL(b.toFloat()/D.toFloat());N?this.set_width(me.Min(I,N)):this.set_width(I),this.set_height(P)}}let a=bv(this.computed_style(),t.containing_block_size),l=kv(this.computed_style(),t.containing_block_size),c=this.GetBorderBoxWidth();this.UpdateHorizontalMargins(t.containing_block_direction,t.containing_block_size.width(),c,a,l);let d=kk(this.computed_style(),t.containing_block_size),f=Tk(this.computed_style(),t.containing_block_size);this.set_margin_top(d||new me),this.set_margin_bottom(f||new me)}RenderAndAnimateContent(t,i){if(this.computed_style().visibility==_e.GetVisible()&&!Ti(this.content_)){if(Ti(this.replaced_box_mode_)){t.AddChild(new bd(new lr(this.content_box_size().toSizeF()),new Uc(new hh(0,0,0,1))));return}this.RenderAndAnimateContentWithLetterboxing(t)}}IsTransformable(){return!0}DumpProperties(t){return t=yc.prototype.DumpProperties.call(this,t),t+="text_position=",t+=this.text_position_,t+=" ",t+="bidi_level=",t+=this.paragraph_ref_.object.GetBidiLevel(this.text_position_),t+=" ",t}RenderAndAnimateContentWithLetterboxing(t){switch(this.replaced_box_mode_){case 1:{let i=GQ(this.content_size_.toSizeF(),this.content_box_size().toSizeF()),s=this.content_;jQ(i,s,t);break}case 5:{let i=this.content_;VQ(i,t);break}case 3:ze();default:ze()}}AbsoluteQuads(t,i){ze()}}function jQ(r,e,t){if(r.image_rect){let i=new Tv(e,r.image_rect);t.AddChild(new Ok(i))}}function VQ(r,e){e.AddChild(new Nk(r))}class WQ extends eM{GetLevel(){return Tr.kBlockLevel}DumpClassName(e){return e+="BlockLevelReplacedBox ",e}UpdateHorizontalMargins(e,t,i,s,n){this.UpdateHorizontalMarginsAssumingBlockLevelInFlowBox(e,t,i,s,n)}}class $Q extends eM{constructor(t,i,s,n,o,a,l,c,d,f){super(t,i,s,n,o,a,l,c,d,f);u(this,"is_hidden_by_ellipsis_");u(this,"was_hidden_by_ellipsis_");this.is_hidden_by_ellipsis_=!1,this.was_hidden_by_ellipsis_=!1}GetLevel(){return Tr.kInlineLevel}DoesFulfillEllipsisPlacementRequirement(){return!0}DoPreEllipsisPlacementProcessing(){this.was_hidden_by_ellipsis_=this.is_hidden_by_ellipsis_,this.is_hidden_by_ellipsis_=!1}DoPostEllipsisPlacementProcessing(){this.was_hidden_by_ellipsis_!=this.is_hidden_by_ellipsis_&&this.InvalidateRenderTreeNodesOfBoxAndAncestors()}IsHiddenByEllipsis(){return this.is_hidden_by_ellipsis_}UpdateHorizontalMargins(t,i,s,n,o){this.set_margin_left(n||new me),this.set_margin_right(o||new me)}DumpClassName(t){return t+="InlineLevelReplacedBox ",t}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){let a=n,l=o,c=s;return n?this.is_hidden_by_ellipsis_=!0:(a=!0,s?(l=this.GetMarginBoxStartEdgeOffsetFromContainingBlock(t),this.is_hidden_by_ellipsis_=!0):l=this.GetMarginBoxEndEdgeOffsetFromContainingBlock(t)),{is_placement_requirement_met:c,is_placed:a,placed_offset:l}}}class Ny extends Dk{constructor(t,i,s){super(t,i);u(this,"should_collapse_leading_white_space_");u(this,"should_collapse_trailing_white_space_");u(this,"has_leading_white_space_");u(this,"has_trailing_white_space_");u(this,"is_collapsed_");u(this,"justifies_line_existence_");u(this,"first_box_justifying_line_existence_index_");u(this,"baseline_offset_from_margin_box_top_",new me);u(this,"line_height_",new me);u(this,"inline_top_margin_",new me);u(this,"used_font_");u(this,"is_split_on_left_");u(this,"is_split_on_right_");u(this,"base_direction_");u(this,"split_sibling_");this.should_collapse_leading_white_space_=!1,this.should_collapse_trailing_white_space_=!1,this.has_leading_white_space_=!1,this.has_trailing_white_space_=!1,this.is_collapsed_=!1,this.justifies_line_existence_=!1,this.first_box_justifying_line_existence_index_=0,this.used_font_=i.GetUsedFontList(t.data().font_family,t.data().font_size,t.data().font_style,t.data().font_weight),this.is_split_on_left_=!1,this.is_split_on_right_=!1,this.base_direction_=s}AsInlineContainerBox(){return this}GetLevel(){return Tr.kInlineLevel}TryAddChild(t){switch(t.GetLevel()){case Tr.kBlockLevel:if(!t.IsAbsolutelyPositioned())return!1;case Tr.kInlineLevel:return this.HasTrailingLineBreak()?!1:(this.PushBackDirectChild(t),!0);default:return et(),!1}}TrySplitAtEnd(){let t=new Ny(this.css_computed_style_declaration(),this.used_style_provider(),this.base_direction_);return this.base_direction_==tr.kLeftToRightBaseDirection?(this.is_split_on_right_=!0,t.SetIsSplitOnLeft(!0)):(this.is_split_on_left_=!0,t.SetIsSplitOnRight(!0)),t}GetInlineLevelBoxHeight(){return this.line_height_}GetInlineLevelTopMargin(){return this.inline_top_margin_}SetIsSplitOnLeft(t){this.is_split_on_left_=t}SetIsSplitOnRight(t){this.is_split_on_right_=t}UpdateContentSizeAndMargins(t){let i=this.used_font_.GetFontMetrics(),s=new me(i.ascent()),n=new YF(s,!0,this.computed_style().line_height,i,this.should_collapse_leading_white_space_,this.should_collapse_trailing_white_space_,t,tr.kLeftToRightBaseDirection,_e.GetLeft(),this.computed_style().font_size,new me,new me);for(let c of this.child_boxes())n.BeginAddChildAndMaybeOverflow(c);if(n.EndUpdates(),!t.freeze_width){if(this.set_width(n.shrink_to_fit_width()),this.is_split_on_left_)this.set_margin_left(new me);else{let c=bv(this.computed_style(),t.containing_block_size);this.set_margin_left(c||new me)}if(this.is_split_on_right_)this.set_margin_right(new me);else{let c=kv(this.computed_style(),t.containing_block_size);this.set_margin_right(c||new me)}}this.set_height(new me(i.em_box_height())),this.line_height_=n.height(),this.set_margin_top(new me),this.set_margin_bottom(new me),this.inline_top_margin_=n.baseline_offset_from_top().SUB(n.top()).SUB(this.border_top_width()).SUB(this.padding_top()),this.has_leading_white_space_=n.HasLeadingWhiteSpace(),this.has_trailing_white_space_=n.HasTrailingWhiteSpace(),this.is_collapsed_=n.IsCollapsed(),this.justifies_line_existence_=n.LineExists()||this.HasNonZeroMarginOrBorderOrPadding(),this.first_box_justifying_line_existence_index_=n.GetFirstBoxJustifyingLineExistenceIndex(),this.baseline_offset_from_margin_box_top_=n.baseline_offset_from_top();let o=bk(this.computed_style(),t.containing_block_size,void 0),a=new Td,l=new Td;a.containing_block_direction=this.base_direction_,l.containing_block_direction=this.base_direction_,a.containing_block_size.set_width(this.width()),l.containing_block_size.set_width(this.GetPaddingBoxWidth()),a.maybe_margin_top=new me,a.maybe_margin_bottom=new me,a.maybe_height=o,a.containing_block_size.set_height(this.height()),l.containing_block_size.set_height(this.GetPaddingBoxHeight()),this.UpdateRectOfPositionedChildBoxes(a,l)}UpdateBorders(){if(this.IsBorderStyleNoneOrHidden(this.computed_style().border_left_style)&&this.IsBorderStyleNoneOrHidden(this.computed_style().border_top_style)&&this.IsBorderStyleNoneOrHidden(this.computed_style().border_right_style)&&this.IsBorderStyleNoneOrHidden(this.computed_style().border_bottom_style)){this.ResetBorderInsets();return}this.SetBorderInsets(this.is_split_on_left_?new me:TF(this.computed_style()),PF(this.computed_style()),this.is_split_on_right_?new me:RF(this.computed_style()),DF(this.computed_style()))}UpdatePaddings(t){this.SetPaddingInsets(this.is_split_on_left_?new me:CF(this.computed_style(),t.containing_block_size),OF(this.computed_style(),t.containing_block_size),this.is_split_on_right_?new me:NF(this.computed_style(),t.containing_block_size),IF(this.computed_style(),t.containing_block_size))}TryWrapAt(t,i,s,n,o){switch(J(!this.IsAbsolutelyPositioned()),J(s||this.justifies_line_existence_),t){case Qi.kWrapAtPolicyBefore:return this.TryWrapAtBefore(i,s,n,o);case Qi.kWrapAtPolicyLastOpportunityWithinWidth:return this.TryWrapAtLastOpportunityWithinWidth(i,s,n,o);case Qi.kWrapAtPolicyLastOpportunity:return this.TryWrapAtLastOpportunityBeforeIndex(this.child_boxes().length,i,s,n,o);case Qi.kWrapAtPolicyFirstOpportunity:return this.TryWrapAtFirstOpportunity(i,s,n,o);default:return et(),ar.kWrapResultNoWrap}}GetSplitSibling(){return this.split_sibling_}DoesFulfillEllipsisPlacementRequirement(){for(let t of this.child_boxes())if(t.DoesFulfillEllipsisPlacementRequirement())return!0;return!1}DoPreEllipsisPlacementProcessing(){for(let t of this.child_boxes())t.DoPreEllipsisPlacementProcessing()}DoPostEllipsisPlacementProcessing(){for(let t of this.child_boxes())t.DoPostEllipsisPlacementProcessing()}TrySplitAtSecondBidiLevelRun(){let t=-1,i=t,s=0;const n=this.child_boxes().length-1;for(;s<n;){const o=this.child_boxes()[s];let a=o.GetBidiLevel()||i;if(i!=a)if(i==t)i=a;else break;if(o.TrySplitAtSecondBidiLevelRun()){s=this.InsertSplitSiblingOfDirectChild(s);break}++s}return s==n?!1:(this.SplitAtIterator(s),!0)}GetBidiLevel(){if(this.child_boxes().length)return this.child_boxes()[0].GetBidiLevel()}SetShouldCollapseLeadingWhiteSpace(t){this.should_collapse_leading_white_space_!=t&&(this.should_collapse_leading_white_space_=t,this.InvalidateUpdateSizeInputs())}SetShouldCollapseTrailingWhiteSpace(t){this.should_collapse_trailing_white_space_!=t&&(this.should_collapse_trailing_white_space_=t,this.InvalidateUpdateSizeInputs())}HasLeadingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),Kt(this.width(),this.width()),this.has_leading_white_space_}HasTrailingWhiteSpace(){return Kt(Tr.kInlineLevel,this.GetLevel()),Kt(this.width(),this.width()),this.has_trailing_white_space_}IsCollapsed(){return Kt(Tr.kInlineLevel,this.GetLevel()),Kt(this.width(),this.width()),this.is_collapsed_}JustifiesLineExistence(){return this.justifies_line_existence_}HasTrailingLineBreak(){return this.child_boxes().length?this.child_boxes()[this.child_boxes().length-1].HasTrailingLineBreak():!1}AffectsBaselineInBlockFormattingContext(){return et()}GetBaselineOffsetFromTopMarginEdge(){return this.baseline_offset_from_margin_box_top_}IsTransformable(){return!1}DumpClassName(t){return t+="InlineContainerBox ",t}DumpProperties(t){return t=super.DumpProperties(t),t+="line_height=",t+=this.line_height_.toFloat(),t+=" ",t+="inline_top_margin=",t+=this.inline_top_margin_.toFloat(),t+=" ",t+="has_leading_white_space=",t+=this.has_leading_white_space_,t+=" ",t+="has_trailing_white_space=",t+=this.has_trailing_white_space_,t+=" ",t+="is_collapsed=",t+=this.is_collapsed_,t+=" ",t+="justifies_line_existence=",t+=this.justifies_line_existence_,t+=" ",t}DoPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o){if(o=o.CLONE(),!n&&s){let c=this.GetContentBoxStartEdgeOffsetFromContainingBlock(t);(t==tr.kRightToLeftBaseDirection&&i>=c||t!=tr.kRightToLeftBaseDirection&&i<=c)&&(n=!0,o=i)}let a=n,l=this.GetContentBoxLeftEdgeOffsetFromContainingBlock();if(i.SUB_ASSIGN(l),t==tr.kRightToLeftBaseDirection)for(let c of this.child_boxes())c.IsAbsolutelyPositioned()||c.TryPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o);else for(let c of this.child_boxes())c.IsAbsolutelyPositioned()||c.TryPlaceEllipsisOrProcessPlacedEllipsis(t,i,s,n,o);return a||(n||(n=!0,o=i),o.ADD_ASSIGN(l)),{is_placed:n,is_placement_requirement_met:s,placed_offset:o}}TryWrapAtBefore(t,i,s,n){return this.child_boxes().length==0||!i?ar.kWrapResultNoWrap:this.TryWrapAtIndex(0,Qi.kWrapAtPolicyBefore,t,i,s,n)}TryWrapAtLastOpportunityWithinWidth(t,i,s,n){if(J(this.GetMarginBoxWidth().GT(s)),s.SUB_ASSIGN(this.GetContentBoxLeftEdgeOffsetFromMarginBox()),s.LT(new me(0)))return this.TryWrapAtBefore(t,i,s,n);let o=0;for(;o<this.child_boxes().length;){let a=this.child_boxes()[o];if(a.IsAbsolutelyPositioned())continue;let l=a.GetMarginBoxWidth();if(l.GT(s))break;s.SUB_ASSIGN(l),++o}if(!i&&o<this.first_box_justifying_line_existence_index_)return ar.kWrapResultNoWrap;if(o<this.child_boxes().length){let a=this.TryWrapAtIndex(o,Qi.kWrapAtPolicyLastOpportunityWithinWidth,t,i,s,n);if(a!=ar.kWrapResultNoWrap)return a}return this.TryWrapAtLastOpportunityBeforeIndex(o,t,i,s,n)}TryWrapAtLastOpportunityBeforeIndex(t,i,s,n,o){let a=ar.kWrapResultNoWrap,l=s?0:this.first_box_justifying_line_existence_index_;for(;a==ar.kWrapResultNoWrap&&t>l;)--t,a=this.TryWrapAtIndex(t,Qi.kWrapAtPolicyLastOpportunity,i,s,n,o);return a}TryWrapAtFirstOpportunity(t,i,s,n){let o=ar.kWrapResultNoWrap,a=i?0:this.first_box_justifying_line_existence_index_;for(;o==ar.kWrapResultNoWrap&&a<this.child_boxes().length;++a)o=this.TryWrapAtIndex(a,Qi.kWrapAtPolicyFirstOpportunity,t,i,s,n);return o}TryWrapAtIndex(t,i,s,n,o,a){let l=this.child_boxes()[t];if(l.IsAbsolutelyPositioned())return this.SplitAtIterator(t),ar.kWrapResultSplitWrap;let c=n||t>this.first_box_justifying_line_existence_index_;J(c||t==this.first_box_justifying_line_existence_index_);let d=l.TryWrapAt(i,s,c,o,a);if(d==ar.kWrapResultNoWrap)return ar.kWrapResultNoWrap;if(d==ar.kWrapResultWrapBefore&&t==0)return ar.kWrapResultWrapBefore;{let f=t;return d==ar.kWrapResultSplitWrap&&(f=this.InsertSplitSiblingOfDirectChild(f)),this.SplitAtIterator(f),ar.kWrapResultSplitWrap}}SplitAtIterator(t){let i=new Ny(this.css_computed_style_declaration(),this.used_style_provider(),this.base_direction_);this.base_direction_==tr.kLeftToRightBaseDirection?(this.is_split_on_right_=!0,i.SetIsSplitOnLeft(!0)):(this.is_split_on_left_=!0,i.SetIsSplitOnRight(!0)),i.split_sibling_=this.split_sibling_,this.split_sibling_=i,this.MoveDirectChildrenToSplitSibling(t)}AbsoluteQuadsForSelf(t,i){ze()}}class KQ extends WF{constructor(t,i){super(t,i);u(this,"children",[]);this.children.push(i)}AsLayoutTexes(){return this}Append(t){this.children.push(t)}}class XQ{constructor(e,t,i,s,n,o,a){this.used_style_provider=e,this.line_break_iterator=t,this.character_break_iterator=i,this.ignore_background_element=s,this.dom_max_element_depth=n,this.paragraph_collection=o,this.textBoxes=a}}const Qy=class extends RN{constructor(t,i,s,n){super();u(this,"id",Qy.ID++);u(this,"parent_css_computed_style_declaration_");u(this,"dom_element_depth_");u(this,"context_");u(this,"generating_html_element_");u(this,"boxes_",[]);this.paragraph_store_=i,this.parent_css_computed_style_declaration_=t,this.dom_element_depth_=s,this.context_=n}VisitDocument(t){et()}VisitElement(t){if(this.dom_element_depth_>this.context_.dom_max_element_depth){Ec(nn,"Elements too deep in the DOM tree are ignored in layout.");return}let i=t.AsHTMLElement();if(!i)return;this.generating_html_element_=i;let s=i.AsFreehandElement();if(s){this.VisitFreehandElement(s);return}let n=i.AsHTMLImageElement();if(n){this.VisitImageElement(n);return}let o=i.AsHTMLBRElement();if(o){this.VisitBrElement(o);return}this.VisitNonReplacedElement(i)}VisitText(t){let i=new qc;i.SetData(Aw(this.parent_css_computed_style_declaration_)),J(t),J(i.data());let s=t.text();if(s.length===0)return;let n=i.data().white_space,o=!NQ(n),a=rA(n),l=!Ck(n),c=0;for(;c<s.length;){let d,f,g=!1;if(o){let{result:O,sequence_start:N,sequence_length:j}=MQ(s,c);g=O,d=N,f=j}else d=s.length,f=0;let x=s.substr(c,d-c);if(a&&(x=IQ(x),this.paragraph_store_.value.object.GetTextEndPosition()==0&&x==" "))return;let E;i.data().text_transform==_e.GetUppercase()?E=tA.kUppercaseTextTransform:E=tA.kNoTextTransform,J(this.paragraph_store_.value);let P=this.paragraph_store_.value.object.AppendUtf8String(x,E),b=this.paragraph_store_.value.object.GetTextEndPosition(),D=!1,C=new Oy(i,this.paragraph_store_.value.copy(),P,b,g,D,this.context_.used_style_provider,this.context_);C.node=t,t.SetLayoutObject(new KQ(t,C)),this.boxes_.push(C),this.context_.textBoxes.add(C),g&&this.paragraph_store_.value.object.AppendCodePoint(aa.kLineFeedCodePoint),J(d),J(f),c=d+f}l&&s[s.length-1]==" "&&(et(),this.paragraph_store_.value.object.AppendCodePoint(aa.kNoBreakSpaceCodePoint))}boxes(){return this.boxes_}VisitFreehandElement(t){let i=this.paragraph_store_.value.object.AppendCodePoint(aa.kObjectReplacementCharacterCodePoint),s=iA.kFreehand,n=new tl(1,1),o=new _C(t.computed_style_declaration(),t.GetPath(),this.paragraph_store_.value,i,new me(n.width()),new me(n.height()),n.width()/n.height(),this.context_,s,n);t.computed_style().display.Accept(o);let a=o.replaced_box();a||et(),this.boxes_.push(a)}VisitImageElement(t){let i=this.paragraph_store_.value.object.AppendCodePoint(aa.kObjectReplacementCharacterCodePoint),s=iA.kImage,n=t.GetResource(),o;n?o=n.GetSize():o=new tl(100,100);let a=new _C(t.computed_style_declaration(),n,this.paragraph_store_.value,i,new me(o.width()),new me(o.height()),o.width()/o.height(),this.context_,s,o);t.computed_style().display.Accept(a);let l=a.replaced_box();!l||this.boxes_.push(l)}VisitBrElement(t){var l;if(t.computed_style().display==_e.GetNone())return;let i=new qc;i.SetData(Aw(t.computed_style_declaration())),J((l=this.paragraph_store_.value)==null?void 0:l.object);let s=this.paragraph_store_.value.object.GetTextEndPosition(),n=!0,o=!1,a=new Oy(i,this.paragraph_store_.value.copy(),s,s,n,o,this.context_.used_style_provider,this.context_);this.paragraph_store_.value.object.AppendCodePoint(aa.kLineFeedCodePoint),a.SetGeneratingNode(t),this.boxes_.push(a)}VisitNonReplacedElement(t){let i=t.computed_style_declaration(),s=new QQ(t.GetUsedDirState(),t==this.context_.ignore_background_element?YQ(i):i,this.context_,this.paragraph_store_);t.computed_style().display.Accept(s);let n=s.container_box();if(!!n){n.SetGeneratingNode(t),this.boxes_.push(n);for(let o=t.firstChild;o;o=o.next_sibling()){let a=new Qy(t.computed_style_declaration(),this.paragraph_store_,this.dom_element_depth_+1,this.context_);o.Accept(a);let l=a.boxes();for(let c of l)this.AppendChildBoxToLine(c)}s.dispose()}}AppendChildBoxToLine(t){let i=this.boxes_[this.boxes_.length-1];if(!i.TryAddChild(t)){let s=i.TrySplitAtEnd();J(s),s.TryAddChild(t)||this.boxes_.push(t),this.boxes_.push(s)}}AppendPseudoElementToLine(t,i){ze()}VisitComment(t){}};let Rx=Qy;u(Rx,"ID",1);function YQ(r){let e=new qc,t=new Fg;return t.AssignFrom(r.data()),t.SetPropertyValue(T.kBackgroundColorProperty),t.SetPropertyValue(T.kBackgroundImageProperty),e.SetData(t),e}let qQ=1;class QQ extends jr{constructor(t,i,s,n){super();u(this,"id_");u(this,"element_dir_");u(this,"css_computed_style_declaration_");u(this,"context_");u(this,"has_scoped_directional_isolate_");u(this,"prior_paragraph_");u(this,"paragraph_scoped_");u(this,"container_box_");this.paragraph_store_=n,this.id_=qQ++,this.element_dir_=t,this.css_computed_style_declaration_=i,this.context_=s,this.has_scoped_directional_isolate_=!1,this.paragraph_scoped_=!1}dispose(){var t;this.has_scoped_directional_isolate_&&this.paragraph_store_.value.object.AppendCodePoint(aa.kPopDirectionalIsolateCodePoint),this.paragraph_scoped_&&(this.paragraph_store_.value.object.IsClosed()||this.paragraph_store_.value.object.Close(),J(this.prior_paragraph_),this.prior_paragraph_.object.IsClosed()?this.paragraph_store_.value=this.context_.paragraph_collection.acquire(Gc.ID.toString(),this.prior_paragraph_.object.GetLocale(),this.prior_paragraph_.object.base_direction(),this.prior_paragraph_.object.GetDirectionalFormattingStack(),this.context_.line_break_iterator,this.context_.character_break_iterator):this.paragraph_store_.value=this.prior_paragraph_.copy()),(t=this.prior_paragraph_)==null||t.dispose()}VisitKeyword(t){switch(t.value()){case _.kBlock:this.CreateScopedParagraph(1),this.container_box_=new qF(this.css_computed_style_declaration_,this.paragraph_store_.value.object.base_direction(),this.context_.used_style_provider);break;case _.kFlex:ze();break;case _.kInlineFlex:ze();break;case _.kInline:this.element_dir_==gp.kDirLeftToRight?(this.has_scoped_directional_isolate_=!0,this.paragraph_store_.value.object.AppendCodePoint(aa.kLeftToRightIsolateCodePoint)):this.element_dir_==gp.kDirRightToLeft&&(this.has_scoped_directional_isolate_=!0,this.paragraph_store_.value.object.AppendCodePoint(aa.kRightToLeftIsolateCodePoint)),this.paragraph_store_.value.object.GetTextEndPosition()==0&&this.paragraph_store_.value.object.AppendCodePoint(aa.kNoBreakSpaceCodePoint),this.container_box_=new Ny(this.css_computed_style_declaration_,this.context_.used_style_provider,this.paragraph_store_.value.object.base_direction());break;case _.kInlineBlock:ze();break;case _.kNone:break;case _.kAbsolute:case _.kAlternate:case _.kAlternateReverse:case _.kAuto:case _.kBackwards:case _.kBaseline:case _.kBoth:case _.kBottom:case _.kBreakWord:case _.kCenter:case _.kClip:case _.kCollapse:case _.kColumn:case _.kColumnReverse:case _.kContain:case _.kContent:case _.kCover:case _.kCurrentColor:case _.kCursive:case _.kEllipsis:case _.kEnd:case _.kEquirectangular:case _.kFantasy:case _.kFixed:case _.kFlexEnd:case _.kFlexStart:case _.kForwards:case _.kHidden:case _.kInfinite:case _.kInherit:case _.kInitial:case _.kLeft:case _.kLineThrough:case _.kMiddle:case _.kMonoscopic:case _.kMonospace:case _.kNoRepeat:case _.kNormal:case _.kNowrap:case _.kPre:case _.kPreLine:case _.kPreWrap:case _.kRelative:case _.kRepeat:case _.kReverse:case _.kRight:case _.kRow:case _.kRowReverse:case _.kSansSerif:case _.kScroll:case _.kSerif:case _.kSolid:case _.kSpaceAround:case _.kSpaceBetween:case _.kStart:case _.kStatic:case _.kStereoscopicLeftRight:case _.kStereoscopicTopBottom:case _.kStretch:case _.kTop:case _.kUppercase:case _.kVisible:case _.kWrap:case _.kWrapReverse:et();break;default:et()}}container_box(){return this.container_box_}CreateScopedParagraph(t){J(!this.paragraph_scoped_),this.paragraph_scoped_=!0,this.prior_paragraph_=this.paragraph_store_.value;let i;this.element_dir_==gp.kDirLeftToRight?i=tr.kLeftToRightBaseDirection:this.element_dir_==gp.kDirRightToLeft?i=tr.kRightToLeftBaseDirection:i=this.prior_paragraph_.object.GetDirectionalFormattingStackDirection(),t==1&&this.prior_paragraph_.object.Close(),this.paragraph_store_.value=this.context_.paragraph_collection.acquire(Gc.ID.toString(),this.prior_paragraph_.object.GetLocale(),i,[],this.context_.line_break_iterator,this.context_.character_break_iterator)}}class _C extends jr{constructor(t,i,s,n,o,a,l,c,d,f){super();u(this,"css_computed_style_declaration_");u(this,"content_");u(this,"paragraph_ref_");u(this,"text_position_");u(this,"maybe_intrinsic_width_");u(this,"maybe_intrinsic_height_");u(this,"maybe_intrinsic_ratio_");u(this,"context_");u(this,"replaced_box_mode_");u(this,"content_size_");u(this,"replaced_box_");this.css_computed_style_declaration_=t,this.content_=i,this.paragraph_ref_=s,this.text_position_=n,this.maybe_intrinsic_width_=o,this.maybe_intrinsic_height_=a,this.maybe_intrinsic_ratio_=l,this.context_=c,this.replaced_box_mode_=d,this.content_size_=f}VisitKeyword(t){switch(t.value()){case _.kBlock:case _.kFlex:this.replaced_box_=new WQ(this.css_computed_style_declaration_,this.content_,this.paragraph_ref_.copy(),this.text_position_,this.maybe_intrinsic_width_,this.maybe_intrinsic_height_,this.maybe_intrinsic_ratio_,this.context_.used_style_provider,this.replaced_box_mode_,this.content_size_);break;case _.kInline:case _.kInlineBlock:case _.kInlineFlex:this.replaced_box_=new $Q(this.css_computed_style_declaration_,this.content_,this.paragraph_ref_.copy(),this.text_position_,this.maybe_intrinsic_width_,this.maybe_intrinsic_height_,this.maybe_intrinsic_ratio_,this.context_.used_style_provider,this.replaced_box_mode_,this.content_size_);break;case _.kNone:break;default:et();break}}replaced_box(){return this.replaced_box_}}class JQ extends RA{}function ZQ(r,e,t,i,s,n,o,a){e.UpdateComputedStyles();let l=CQ(e.initial_computed_style_data(),e,i),c=l.box;a&&c.set_blend_background_color(!1);const d=new Set;if(e.html()){const f=new OQ,g=new JQ;let x=f.acquire(Gc.ID.toString(),r,c.base_direction(),[],n,o);g.value=x;let E=new XQ(i,n,o,l.background_style_source,t,f,d),P=new Rx(c.css_computed_style_declaration(),g,1,E);e.html().Accept(P);let b=P.boxes();for(let D of b)c.AddChild(D);x.object.IsClosed()||x.object.Close(),x.dispose(),g.dispose()}c.SplitBidiLevelRuns(),c.set_left(new me),c.set_top(new me),c.UpdateSize(new Td);{s.clear();for(let f of d){let g=f;for(;g;){const x=sQ(g);s.insert(x),g=g.GetSplitSibling()}}}return i.CleanupAfterLayout(),c}function sS(r,e){let t=new dh;return e.RenderAndAnimate(t,new rn(0,0),e),new fh(t)}function eJ(r,e,t,i,s){tM(r,e,t||0,i||r.length-1,s||tJ)}function tM(r,e,t,i,s){for(;i>t;){if(i-t>600){var n=i-t+1,o=e-t+1,a=Math.log(n),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1),d=Math.max(t,Math.floor(e-o*l/n+c)),f=Math.min(i,Math.floor(e+(n-o)*l/n+c));tM(r,e,d,f,s)}var g=r[e],x=t,E=i;for(sp(r,t,e),s(r[i],g)>0&&sp(r,t,i);x<E;){for(sp(r,x,E),x++,E--;s(r[x],g)<0;)x++;for(;s(r[E],g)>0;)E--}s(r[t],g)===0?sp(r,t,E):(E++,sp(r,E,i)),E<=e&&(t=E+1),e<=E&&(i=E-1)}}function sp(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}function tJ(r,e){return r<e?-1:r>e?1:0}class rJ{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Nm(e,t))return i;const s=this.toBBox,n=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;Nm(e,l)&&(t.leaf?i.push(a):aS(e,l)?this._all(a,i):n.push(a))}t=n.pop()}return i}collides(e){let t=this.data;if(!Nm(e,t))return!1;const i=[];for(;t;){for(let s=0;s<t.children.length;s++){const n=t.children[s],o=t.leaf?this.toBBox(n):n;if(Nm(e,o)){if(t.leaf||aS(e,o))return!0;i.push(n)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=id([]),this}remove(e,t){if(!e)return this;let i=this.data;const s=this.toBBox(e),n=[],o=[];let a,l,c;for(;i||n.length;){if(i||(i=n.pop(),l=n[n.length-1],a=o.pop(),c=!0),i.leaf){const d=iJ(e,i.children,t);if(d!==-1)return i.children.splice(d,1),n.push(i),this._condense(n),this}!c&&!i.leaf&&aS(i,s)?(n.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,s){const n=i-t+1;let o=this._maxEntries,a;if(n<=o)return a=id(e.slice(t,i+1)),Yh(a,this.toBBox),a;s||(s=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,s-1))),a=id([]),a.leaf=!1,a.height=s;const l=Math.ceil(n/o),c=l*Math.ceil(Math.sqrt(o));pC(e,t,i,c,this.compareMinX);for(let d=t;d<=i;d+=c){const f=Math.min(d+c-1,i);pC(e,d,f,l,this.compareMinY);for(let g=d;g<=f;g+=l){const x=Math.min(g+l-1,f);a.children.push(this._build(e,g,x,s-1))}}return Yh(a,this.toBBox),a}_chooseSubtree(e,t,i,s){for(;s.push(t),!(t.leaf||s.length-1===i);){let n=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],d=oS(c),f=oJ(e,c)-d;f<o?(o=f,n=d<n?d:n,a=c):f===o&&d<n&&(n=d,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){const s=i?e:this.toBBox(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),bp(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)}_split(e,t){const i=e[t],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);const o=this._chooseSplitIndex(i,n,s),a=id(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Yh(i,this.toBBox),Yh(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=id([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Yh(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let s,n=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=Ap(e,0,a,this.toBBox),c=Ap(e,a,i,this.toBBox),d=aJ(l,c),f=oS(l)+oS(c);d<n?(n=d,s=a,o=f<o?f:o):d===n&&f<o&&(o=f,s=a)}return s||i-t}_chooseSplitAxis(e,t,i){const s=e.leaf?this.compareMinX:nJ,n=e.leaf?this.compareMinY:sJ,o=this._allDistMargin(e,t,i,s),a=this._allDistMargin(e,t,i,n);o<a&&e.children.sort(s)}_allDistMargin(e,t,i,s){e.children.sort(s);const n=this.toBBox,o=Ap(e,0,t,n),a=Ap(e,i-t,i,n);let l=Om(o)+Om(a);for(let c=t;c<i-t;c++){const d=e.children[c];bp(o,e.leaf?n(d):d),l+=Om(o)}for(let c=i-t-1;c>=t;c--){const d=e.children[c];bp(a,e.leaf?n(d):d),l+=Om(a)}return l}_adjustParentBBoxes(e,t,i){for(let s=i;s>=0;s--)bp(t[s],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Yh(e[t],this.toBBox)}}function iJ(r,e,t){if(!t)return e.indexOf(r);for(let i=0;i<e.length;i++)if(t(r,e[i]))return i;return-1}function Yh(r,e){Ap(r,0,r.children.length,e,r)}function Ap(r,e,t,i,s){s||(s=id(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let n=e;n<t;n++){const o=r.children[n];bp(s,r.leaf?i(o):o)}return s}function bp(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function nJ(r,e){return r.minX-e.minX}function sJ(r,e){return r.minY-e.minY}function oS(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Om(r){return r.maxX-r.minX+(r.maxY-r.minY)}function oJ(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function aJ(r,e){const t=Math.max(r.minX,e.minX),i=Math.max(r.minY,e.minY),s=Math.min(r.maxX,e.maxX),n=Math.min(r.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,n-i)}function aS(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function Nm(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function id(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pC(r,e,t,i,s){const n=[e,t];for(;n.length;){if(t=n.pop(),e=n.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;eJ(r,o,e,t,s),n.push(e,o,o,t)}}class nA{constructor(e,t,i){this.render_tree=e,this.layout_time=t,this.on_rasterized_callback=i}}class Qp{constructor(e,t){this.node=e,this.box=t}static forElement(e,t){return new Qp(e,t)}}class lJ{constructor(e,t,i,s,n,o,a,l,c){u(this,"window_");u(this,"locale_");u(this,"used_style_provider_");u(this,"on_render_tree_produced_callback_");u(this,"on_layout_callback_");u(this,"produced_render_tree_");u(this,"are_computed_styles_and_box_tree_dirty_");u(this,"is_render_tree_pending_");u(this,"dom_max_element_depth_");u(this,"layout_refresh_rate_");u(this,"suspended_");u(this,"clear_window_with_background_color_");u(this,"layout_timer_");u(this,"line_break_iterator_");u(this,"character_break_iterator_");u(this,"initial_containing_block_");u(this,"_onDidLayout",new Dt);u(this,"onDidLayout",this._onDidLayout.event);u(this,"_selectionBackground");u(this,"textRTree");this.window_=i;const{object:{ptr:d},dispose:f}=c1(l);this.locale_=gN.createCanonical(d),f(),this.used_style_provider_=new eQ(i.html_element_context(),i.document().font_cache()),this.on_render_tree_produced_callback_=s,this.on_layout_callback_=n,this.produced_render_tree_=!1,this.are_computed_styles_and_box_tree_dirty_=!0,this.is_render_tree_pending_=!0,this.dom_max_element_depth_=o,this.layout_refresh_rate_=a,this.suspended_=e,this.clear_window_with_background_color_=c,this.layout_timer_=new vq,this.window_.document().AddObserver(this),this.window_.document().SetSynchronousLayoutCallback(this.DoSynchronousLayout.bind(this)),this.window_.document().SetSynchronousLayoutAndProduceRenderTreeCallback(this.DoSynchronousLayoutAndGetRenderTree.bind(this)),this.line_break_iterator_=ew.createLineInstance(this.locale_),this.character_break_iterator_=ew.createCharacterInstance(this.locale_),this.textRTree=new rJ,this._selectionBackground=new Zq(this)}OnLoad(){this.StartLayoutTimer()}OnMutation(){this.DirtyLayout()}StartLayoutTimer(){let e=bs(_F.kMicrosecondsPerSecond/(this.layout_refresh_rate_+1));this.layout_timer_.Start(pr.FromMicroseconds(e),this.DoLayoutAndProduceRenderTree.bind(this))}DoSynchronousLayout(){if(this.suspended_){_i(nn,"Skipping layout since Cobalt is in a suspended state.");return}this.are_computed_styles_and_box_tree_dirty_&&(this.initial_containing_block_&&this.initial_containing_block_.dispose(),this.initial_containing_block_=ZQ(this.locale_,this.window_.document(),this.dom_max_element_depth_,this.used_style_provider_,this.textRTree,this.line_break_iterator_,this.character_break_iterator_,this.clear_window_with_background_color_),this.are_computed_styles_and_box_tree_dirty_=!1,this._onDidLayout.fire())}DoSynchronousLayoutAndGetRenderTree(){return this.DoSynchronousLayout(),sS(this.used_style_provider_,this.initial_containing_block_)}DirtyLayout(){this.are_computed_styles_and_box_tree_dirty_=!0,this.is_render_tree_pending_=!0}DoLayoutAndProduceRenderTree(){if(this.suspended_)return;let e=this.window_.document();if(!!e.html()){if(e.SampleTimelineTime(),J(this.is_render_tree_pending_||!this.are_computed_styles_and_box_tree_dirty_),this.is_render_tree_pending_){this.DoSynchronousLayout();let t=!this.produced_render_tree_&&!e.html().IsDisplayed();if(Reflect.set(window,"dumpLayout",()=>{var i;console.log((i=this.initial_containing_block_)==null?void 0:i.DumpWithIndent())}),this._updateSelection(),!t){let i=sS(this.used_style_provider_,this.initial_containing_block_);this.produced_render_tree_=!0;let s=e.timeline().current_time();J(s),this.on_render_tree_produced_callback_(new nA(i,pr.FromMilliseconds(s),zT)),this.is_render_tree_pending_=!1,Reflect.set(window,"dumpRender",()=>{console.log(lC(i)),console.log(i)})}}this.on_layout_callback_()}}DoProduceRenderTree(){let e=this.window_.document();e.SampleTimelineTime();let t=!this.produced_render_tree_&&!e.html().IsDisplayed();if(Reflect.set(window,"dumpLayout",()=>{var i;console.log((i=this.initial_containing_block_)==null?void 0:i.DumpWithIndent())}),!t){let i=sS(this.used_style_provider_,this.initial_containing_block_);this.produced_render_tree_=!0;let s=e.timeline().current_time();J(s),this.on_render_tree_produced_callback_(new nA(i,pr.FromMilliseconds(s),zT)),this.is_render_tree_pending_=!1,Reflect.set(window,"dumpRender",()=>{console.log(lC(i)),console.log(i)})}}hitTestDOM(e,t,i){let s=new me(e),n=new me(t),o=[];const a=[Tn(this.initial_containing_block_)];for(;a.length;){const l=a.pop();let c=!1,d=l.node;if(l===this.initial_containing_block_)c=!0;else if(d){let g=d.AsElement();g&&(g.tagName==="html"||g.tagName==="body")&&(c=!0)}l.AsAnonymousBlockBox()&&(c=!0);let f;if(c||(f=l.GetClientRect(),c=f.top().LE(n)&&f.bottom().GE(n)&&f.left().LE(s)&&f.right().GE(s)),c){let g=l.AsTextBox();if(g){if(i.hitTestLevel>=Bd.InlineBox){const E=Tn(g.node);o.push(Qp.forElement(E,l))}}else!l.AsAnonymousBlockBox()&&d&&(l.AsInlineContainerBox()?i.hitTestLevel>=Bd.InlineBox&&o.push(Qp.forElement(d,l)):o.push(Qp.forElement(d,l)));let x=l.AsContainerBox();if(x){const E=x.child_boxes();for(let P=0,b=E.length;P<b;P++)a.push(E[P])}}}return o}hitTestRTree(e,t,i,s){return this.textRTree.search({minX:e,minY:t,maxX:i,maxY:s})}getRTreeItemsByParagraph(e){return this.textRTree.all().filter(i=>i.box.paragraph===e).sort((i,s)=>i.minY<s.minY?-1:1)}getParagraphOfNode(e){const t=e.GetLayoutObject().box;if(!!t.isTextBox())return t.paragraph}onSelectionChanged(e){this._updateSelection()}_updateSelection(){const e=this.window_.document().getSelection();this._selectionBackground.update(e),this.DoProduceRenderTree()}}function uJ(r,e,t){return new xF(r,e,!1,t.CreateImageLoader.bind(t),t.NotifyResourceRequested.bind(t))}class cJ{OnReceivedPassed(e,t){this.OnReceived(e,t)}}class hJ{constructor(e){u(this,"handler_");this.handler_=e}handler(){return this.handler_}}class gC{constructor(e,t,i,s=void 0,n=!1){u(this,"fetcher_creator_");u(this,"decoder_creator_");u(this,"decoder_");u(this,"fetcher_handler_to_decoder_adaptor_");u(this,"fetcher_");u(this,"fetcher_creator_error_closure_");u(this,"on_load_complete_");u(this,"on_destruction_");u(this,"is_suspended_");u(this,"is_load_complete_",!1);this.fetcher_creator_=e,this.decoder_creator_=t,this.on_load_complete_=i,this.on_destruction_=s,this.is_suspended_=n,J(this.fetcher_creator_),J(this.decoder_creator_),J(this.on_load_complete_),this.decoder_=this.decoder_creator_(this.LoadComplete.bind(this)),this.is_suspended_||this.Start()}dispose(){this.on_destruction_&&this.on_destruction_(this)}LoadComplete(e){this.is_load_complete_=!0,this.on_load_complete_(e)}Start(){J(!this.is_suspended_),this.fetcher_handler_to_decoder_adaptor_=new dJ(this.decoder_,this.LoadComplete.bind(this)),this.fetcher_=this.fetcher_creator_(this.fetcher_handler_to_decoder_adaptor_),this.fetcher_||(this.fetcher_creator_error_closure_=this.LoadComplete.bind(this,"Fetcher was not created."),this.fetcher_creator_error_closure_())}}class dJ extends cJ{constructor(t,i){super();u(this,"decoder_");u(this,"load_complete_callback_");this.decoder_=t,this.load_complete_callback_=i}OnReceived(t,i){this.decoder_.DecodeChunk(i)}OnDone(t){J(t),this.decoder_.Finish()}OnError(t,i){this.load_complete_callback_(i)}}class Ik{Decoder(){}}function sA(r,e,t=0){for(let i=0;i<e.length;i++)if(r[i+t]!=e[i])return!1;return!0}function Im(r,e,t=0){return sA(r,e.split("").map(i=>i.charCodeAt(0),t))}function fJ(r,e,t,i){for(let s=0;s<i;s++)r[s+t]=e[s]}var oA=(r=>(r[r.kWaitingForHeader=0]="kWaitingForHeader",r[r.kReadLines=1]="kReadLines",r[r.kDone=2]="kDone",r[r.kError=3]="kError",r))(oA||{});class _J{constructor(e){u(this,"resource_provider_");u(this,"state_");u(this,"pixel_format_");this.resource_provider_=e,this.state_=0,this.CalculatePixelFormat()}DecodeChunk(e){this.DecodeChunkInternal(e)}FinishAndMaybeReturnImage(){return this.FinishInternal()}resource_provider(){return this.resource_provider_}set_state(e){this.state_=e}state(){return this.state_}pixel_format(){return this.pixel_format_}AllocateImageData(e,t){J(this.resource_provider_.AlphaFormatSupported(du.kAlphaFormatOpaque)),J(this.resource_provider_.AlphaFormatSupported(du.kAlphaFormatPremultiplied));let i=this.resource_provider_.AllocateImageData(e,this.pixel_format(),t?du.kAlphaFormatPremultiplied:du.kAlphaFormatOpaque);return J(i),i}CreateImage(e){return J(e),this.resource_provider().CreateImage(e)}CalculatePixelFormat(){this.pixel_format_=lf.kPixelFormatRGBA8,this.resource_provider_.PixelFormatSupported(this.pixel_format_)||(this.pixel_format_=lf.kPixelFormatBGRA8),J(this.resource_provider_.PixelFormatSupported(this.pixel_format_))}}var rM={exports:{}};(function(r){function e(i){var s=Math.floor,n=new Array(64),o=new Array(64),a=new Array(64),l=new Array(64),c,d,f,g,x=new Array(65535),E=new Array(65535),P=new Array(64),b=new Array(64),D=[],C=0,O=7,N=new Array(64),j=new Array(64),I=new Array(64),M=new Array(256),R=new Array(2048),L,K=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ue=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Re=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ue=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],rt=[0,1,2,3,4,5,6,7,8,9,10,11],Ve=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function nt(oe){for(var le=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],we=0;we<64;we++){var De=s((le[we]*oe+50)/100);De<1?De=1:De>255&&(De=255),n[K[we]]=De}for(var Ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],$e=0;$e<64;$e++){var Qe=s((Ye[$e]*oe+50)/100);Qe<1?Qe=1:Qe>255&&(Qe=255),o[K[$e]]=Qe}for(var Ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],tt=0,_t=0;_t<8;_t++)for(var st=0;st<8;st++)a[tt]=1/(n[K[tt]]*Ke[_t]*Ke[st]*8),l[tt]=1/(o[K[tt]]*Ke[_t]*Ke[st]*8),tt++}function dt(oe,le){for(var we=0,De=0,Ye=new Array,$e=1;$e<=16;$e++){for(var Qe=1;Qe<=oe[$e];Qe++)Ye[le[De]]=[],Ye[le[De]][0]=we,Ye[le[De]][1]=$e,De++,we++;we*=2}return Ye}function it(){c=dt(Q,ue),d=dt(Ue,rt),f=dt(ae,Re),g=dt(Ve,Fe)}function bt(){for(var oe=1,le=2,we=1;we<=15;we++){for(var De=oe;De<le;De++)E[32767+De]=we,x[32767+De]=[],x[32767+De][1]=we,x[32767+De][0]=De;for(var Ye=-(le-1);Ye<=-oe;Ye++)E[32767+Ye]=we,x[32767+Ye]=[],x[32767+Ye][1]=we,x[32767+Ye][0]=le-1+Ye;oe<<=1,le<<=1}}function ee(){for(var oe=0;oe<256;oe++)R[oe]=19595*oe,R[oe+256>>0]=38470*oe,R[oe+512>>0]=7471*oe+32768,R[oe+768>>0]=-11059*oe,R[oe+1024>>0]=-21709*oe,R[oe+1280>>0]=32768*oe+8421375,R[oe+1536>>0]=-27439*oe,R[oe+1792>>0]=-5329*oe}function ne(oe){for(var le=oe[0],we=oe[1]-1;we>=0;)le&1<<we&&(C|=1<<O),we--,O--,O<0&&(C==255?(se(255),se(0)):se(C),O=7,C=0)}function se(oe){D.push(oe)}function Ee(oe){se(oe>>8&255),se(oe&255)}function Se(oe,le){var we,De,Ye,$e,Qe,Ke,tt,_t,st=0,St,Ot=8,Rt=64;for(St=0;St<Ot;++St){we=oe[st],De=oe[st+1],Ye=oe[st+2],$e=oe[st+3],Qe=oe[st+4],Ke=oe[st+5],tt=oe[st+6],_t=oe[st+7];var Mt=we+_t,Ie=we-_t,gt=De+tt,mt=De-tt,Et=Ye+Ke,Ht=Ye-Ke,li=$e+Qe,Er=$e-Qe,mr=Mt+li,xi=Mt-li,ps=gt+Et,cn=gt-Et;oe[st]=mr+ps,oe[st+4]=mr-ps;var Mr=(cn+xi)*.707106781;oe[st+2]=xi+Mr,oe[st+6]=xi-Mr,mr=Er+Ht,ps=Ht+mt,cn=mt+Ie;var Di=(mr-cn)*.382683433,Zn=.5411961*mr+Di,fr=1.306562965*cn+Di,ho=ps*.707106781,Yt=Ie+ho,Vi=Ie-ho;oe[st+5]=Vi+Zn,oe[st+3]=Vi-Zn,oe[st+1]=Yt+fr,oe[st+7]=Yt-fr,st+=8}for(st=0,St=0;St<Ot;++St){we=oe[st],De=oe[st+8],Ye=oe[st+16],$e=oe[st+24],Qe=oe[st+32],Ke=oe[st+40],tt=oe[st+48],_t=oe[st+56];var re=we+_t,zo=we-_t,Hu=De+tt,Tl=De-tt,Ho=Ye+Ke,fo=Ye-Ke,Ut=$e+Qe,hn=$e-Qe,Wi=re+Ut,Pl=re-Ut,jo=Hu+Ho,wr=Hu-Ho;oe[st]=Wi+jo,oe[st+32]=Wi-jo;var es=(wr+Pl)*.707106781;oe[st+16]=Pl+es,oe[st+48]=Pl-es,Wi=hn+fo,jo=fo+Tl,wr=Tl+zo;var Rl=(Wi-wr)*.382683433,ju=.5411961*Wi+Rl,Mh=1.306562965*wr+Rl,Vu=jo*.707106781,Wu=zo+Vu,gs=zo-Vu;oe[st+40]=gs+ju,oe[st+24]=gs-ju,oe[st+8]=Wu+Mh,oe[st+56]=Wu-Mh,st++}var Dl;for(St=0;St<Rt;++St)Dl=oe[St]*le[St],P[St]=Dl>0?Dl+.5|0:Dl-.5|0;return P}function fe(){Ee(65504),Ee(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),Ee(1),Ee(1),se(0),se(0)}function Pe(oe){if(!!oe){Ee(65505),oe[0]===69&&oe[1]===120&&oe[2]===105&&oe[3]===102?Ee(oe.length+2):(Ee(oe.length+5+2),se(69),se(120),se(105),se(102),se(0));for(var le=0;le<oe.length;le++)se(oe[le])}}function He(oe,le){Ee(65472),Ee(17),se(8),Ee(le),Ee(oe),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)}function Z(){Ee(65499),Ee(132),se(0);for(var oe=0;oe<64;oe++)se(n[oe]);se(1);for(var le=0;le<64;le++)se(o[le])}function Le(){Ee(65476),Ee(418),se(0);for(var oe=0;oe<16;oe++)se(Q[oe+1]);for(var le=0;le<=11;le++)se(ue[le]);se(16);for(var we=0;we<16;we++)se(ae[we+1]);for(var De=0;De<=161;De++)se(Re[De]);se(1);for(var Ye=0;Ye<16;Ye++)se(Ue[Ye+1]);for(var $e=0;$e<=11;$e++)se(rt[$e]);se(17);for(var Qe=0;Qe<16;Qe++)se(Ve[Qe+1]);for(var Ke=0;Ke<=161;Ke++)se(Fe[Ke])}function F(oe){typeof oe>"u"||oe.constructor!==Array||oe.forEach(le=>{if(typeof le=="string"){Ee(65534);var we=le.length;Ee(we+2);var De;for(De=0;De<we;De++)se(le.charCodeAt(De))}})}function z(){Ee(65498),Ee(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0)}function W(oe,le,we,De,Ye){for(var $e=Ye[0],Qe=Ye[240],Ke,tt=16,_t=63,st=64,St=Se(oe,le),Ot=0;Ot<st;++Ot)b[K[Ot]]=St[Ot];var Rt=b[0]-we;we=b[0],Rt==0?ne(De[0]):(Ke=32767+Rt,ne(De[E[Ke]]),ne(x[Ke]));for(var Mt=63;Mt>0&&b[Mt]==0;Mt--);if(Mt==0)return ne($e),we;for(var Ie=1,gt;Ie<=Mt;){for(var mt=Ie;b[Ie]==0&&Ie<=Mt;++Ie);var Et=Ie-mt;if(Et>=tt){gt=Et>>4;for(var Ht=1;Ht<=gt;++Ht)ne(Qe);Et=Et&15}Ke=32767+b[Ie],ne(Ye[(Et<<4)+E[Ke]]),ne(x[Ke]),Ie++}return Mt!=_t&&ne($e),we}function te(){for(var oe=String.fromCharCode,le=0;le<256;le++)M[le]=oe(le)}this.encode=function(oe,le){new Date().getTime(),le&&de(le),D=new Array,C=0,O=7,Ee(65496),fe(),F(oe.comments),Pe(oe.exifBuffer),Z(),He(oe.width,oe.height),Le(),z();var we=0,De=0,Ye=0;C=0,O=7,this.encode.displayName="_encode_";for(var $e=oe.data,Qe=oe.width,Ke=oe.height,tt=Qe*4,_t,st=0,St,Ot,Rt,Mt,Ie,gt,mt,Et;st<Ke;){for(_t=0;_t<tt;){for(Mt=tt*st+_t,Ie=Mt,gt=-1,mt=0,Et=0;Et<64;Et++)mt=Et>>3,gt=(Et&7)*4,Ie=Mt+mt*tt+gt,st+mt>=Ke&&(Ie-=tt*(st+1+mt-Ke)),_t+gt>=tt&&(Ie-=_t+gt-tt+4),St=$e[Ie++],Ot=$e[Ie++],Rt=$e[Ie++],N[Et]=(R[St]+R[Ot+256>>0]+R[Rt+512>>0]>>16)-128,j[Et]=(R[St+768>>0]+R[Ot+1024>>0]+R[Rt+1280>>0]>>16)-128,I[Et]=(R[St+1280>>0]+R[Ot+1536>>0]+R[Rt+1792>>0]>>16)-128;we=W(N,a,we,c,f),De=W(j,l,De,d,g),Ye=W(I,l,Ye,d,g),_t+=32}st+=8}if(O>=0){var Ht=[];Ht[1]=O+1,Ht[0]=(1<<O+1)-1,ne(Ht)}return Ee(65497),Buffer.from(D)};function de(oe){if(oe<=0&&(oe=1),oe>100&&(oe=100),L!=oe){var le=0;oe<50?le=Math.floor(5e3/oe):le=Math.floor(200-oe*2),nt(le),L=oe}}function ye(){var oe=new Date().getTime();i||(i=50),te(),it(),bt(),ee(),de(i),new Date().getTime()-oe}ye()}r.exports=t;function t(i,s){typeof s>"u"&&(s=50);var n=new e(s),o=n.encode(i,s);return{data:o,width:i.width,height:i.height}}})(rM);var iM={exports:{}};(function(r){var e=function(){var s=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),n=4017,o=799,a=3406,l=2276,c=1567,d=3784,f=5793,g=2896;function x(){}function E(j,I){for(var M=0,R=[],L,K,Q=16;Q>0&&!j[Q-1];)Q--;R.push({children:[],index:0});var ue=R[0],ae;for(L=0;L<Q;L++){for(K=0;K<j[L];K++){for(ue=R.pop(),ue.children[ue.index]=I[M];ue.index>0;){if(R.length===0)throw new Error("Could not recreate Huffman Table");ue=R.pop()}for(ue.index++,R.push(ue);R.length<=L;)R.push(ae={children:[],index:0}),ue.children[ue.index]=ae.children,ue=ae;M++}L+1<Q&&(R.push(ae={children:[],index:0}),ue.children[ue.index]=ae.children,ue=ae)}return R[0].children}function P(j,I,M,R,L,K,Q,ue,ae,Re){M.precision,M.samplesPerLine,M.scanLines;var Ue=M.mcusPerLine,rt=M.progressive;M.maxH,M.maxV;var Ve=I,Fe=0,nt=0;function dt(){if(nt>0)return nt--,Fe>>nt&1;if(Fe=j[I++],Fe==255){var Ke=j[I++];if(Ke)throw new Error("unexpected marker: "+(Fe<<8|Ke).toString(16))}return nt=7,Fe>>>7}function it(Ke){for(var tt=Ke,_t;(_t=dt())!==null;){if(tt=tt[_t],typeof tt=="number")return tt;if(typeof tt!="object")throw new Error("invalid huffman sequence")}return null}function bt(Ke){for(var tt=0;Ke>0;){var _t=dt();if(_t===null)return;tt=tt<<1|_t,Ke--}return tt}function ee(Ke){var tt=bt(Ke);return tt>=1<<Ke-1?tt:tt+(-1<<Ke)+1}function ne(Ke,tt){var _t=it(Ke.huffmanTableDC),st=_t===0?0:ee(_t);tt[0]=Ke.pred+=st;for(var St=1;St<64;){var Ot=it(Ke.huffmanTableAC),Rt=Ot&15,Mt=Ot>>4;if(Rt===0){if(Mt<15)break;St+=16;continue}St+=Mt;var Ie=s[St];tt[Ie]=ee(Rt),St++}}function se(Ke,tt){var _t=it(Ke.huffmanTableDC),st=_t===0?0:ee(_t)<<ae;tt[0]=Ke.pred+=st}function Ee(Ke,tt){tt[0]|=dt()<<ae}var Se=0;function fe(Ke,tt){if(Se>0){Se--;return}for(var _t=K,st=Q;_t<=st;){var St=it(Ke.huffmanTableAC),Ot=St&15,Rt=St>>4;if(Ot===0){if(Rt<15){Se=bt(Rt)+(1<<Rt)-1;break}_t+=16;continue}_t+=Rt;var Mt=s[_t];tt[Mt]=ee(Ot)*(1<<ae),_t++}}var Pe=0,He;function Z(Ke,tt){for(var _t=K,st=Q,St=0;_t<=st;){var Ot=s[_t],Rt=tt[Ot]<0?-1:1;switch(Pe){case 0:var Mt=it(Ke.huffmanTableAC),Ie=Mt&15,St=Mt>>4;if(Ie===0)St<15?(Se=bt(St)+(1<<St),Pe=4):(St=16,Pe=1);else{if(Ie!==1)throw new Error("invalid ACn encoding");He=ee(Ie),Pe=St?2:3}continue;case 1:case 2:tt[Ot]?tt[Ot]+=(dt()<<ae)*Rt:(St--,St===0&&(Pe=Pe==2?3:0));break;case 3:tt[Ot]?tt[Ot]+=(dt()<<ae)*Rt:(tt[Ot]=He<<ae,Pe=0);break;case 4:tt[Ot]&&(tt[Ot]+=(dt()<<ae)*Rt);break}_t++}Pe===4&&(Se--,Se===0&&(Pe=0))}function Le(Ke,tt,_t,st,St){var Ot=_t/Ue|0,Rt=_t%Ue,Mt=Ot*Ke.v+st,Ie=Rt*Ke.h+St;Ke.blocks[Mt]===void 0&&Re.tolerantDecoding||tt(Ke,Ke.blocks[Mt][Ie])}function F(Ke,tt,_t){var st=_t/Ke.blocksPerLine|0,St=_t%Ke.blocksPerLine;Ke.blocks[st]===void 0&&Re.tolerantDecoding||tt(Ke,Ke.blocks[st][St])}var z=R.length,W,te,de,ye,oe,le;rt?K===0?le=ue===0?se:Ee:le=ue===0?fe:Z:le=ne;var we=0,De,Ye;z==1?Ye=R[0].blocksPerLine*R[0].blocksPerColumn:Ye=Ue*M.mcusPerColumn,L||(L=Ye);for(var $e,Qe;we<Ye;){for(te=0;te<z;te++)R[te].pred=0;if(Se=0,z==1)for(W=R[0],oe=0;oe<L;oe++)F(W,le,we),we++;else for(oe=0;oe<L;oe++){for(te=0;te<z;te++)for(W=R[te],$e=W.h,Qe=W.v,de=0;de<Qe;de++)for(ye=0;ye<$e;ye++)Le(W,le,we,de,ye);if(we++,we===Ye)break}if(we===Ye)do{if(j[I]===255&&j[I+1]!==0)break;I+=1}while(I<j.length-2);if(nt=0,De=j[I]<<8|j[I+1],De<65280)throw new Error("marker was not found");if(De>=65488&&De<=65495)I+=2;else break}return I-Ve}function b(j,I){var M=[],R=I.blocksPerLine,L=I.blocksPerColumn,K=R<<3,Q=new Int32Array(64),ue=new Uint8Array(64);function ae(bt,ee,ne){var se=I.quantizationTable,Ee,Se,fe,Pe,He,Z,Le,F,z,W=ne,te;for(te=0;te<64;te++)W[te]=bt[te]*se[te];for(te=0;te<8;++te){var de=8*te;if(W[1+de]==0&&W[2+de]==0&&W[3+de]==0&&W[4+de]==0&&W[5+de]==0&&W[6+de]==0&&W[7+de]==0){z=f*W[0+de]+512>>10,W[0+de]=z,W[1+de]=z,W[2+de]=z,W[3+de]=z,W[4+de]=z,W[5+de]=z,W[6+de]=z,W[7+de]=z;continue}Ee=f*W[0+de]+128>>8,Se=f*W[4+de]+128>>8,fe=W[2+de],Pe=W[6+de],He=g*(W[1+de]-W[7+de])+128>>8,F=g*(W[1+de]+W[7+de])+128>>8,Z=W[3+de]<<4,Le=W[5+de]<<4,z=Ee-Se+1>>1,Ee=Ee+Se+1>>1,Se=z,z=fe*d+Pe*c+128>>8,fe=fe*c-Pe*d+128>>8,Pe=z,z=He-Le+1>>1,He=He+Le+1>>1,Le=z,z=F+Z+1>>1,Z=F-Z+1>>1,F=z,z=Ee-Pe+1>>1,Ee=Ee+Pe+1>>1,Pe=z,z=Se-fe+1>>1,Se=Se+fe+1>>1,fe=z,z=He*l+F*a+2048>>12,He=He*a-F*l+2048>>12,F=z,z=Z*o+Le*n+2048>>12,Z=Z*n-Le*o+2048>>12,Le=z,W[0+de]=Ee+F,W[7+de]=Ee-F,W[1+de]=Se+Le,W[6+de]=Se-Le,W[2+de]=fe+Z,W[5+de]=fe-Z,W[3+de]=Pe+He,W[4+de]=Pe-He}for(te=0;te<8;++te){var ye=te;if(W[8+ye]==0&&W[16+ye]==0&&W[24+ye]==0&&W[32+ye]==0&&W[40+ye]==0&&W[48+ye]==0&&W[56+ye]==0){z=f*ne[te+0]+8192>>14,W[0+ye]=z,W[8+ye]=z,W[16+ye]=z,W[24+ye]=z,W[32+ye]=z,W[40+ye]=z,W[48+ye]=z,W[56+ye]=z;continue}Ee=f*W[0+ye]+2048>>12,Se=f*W[32+ye]+2048>>12,fe=W[16+ye],Pe=W[48+ye],He=g*(W[8+ye]-W[56+ye])+2048>>12,F=g*(W[8+ye]+W[56+ye])+2048>>12,Z=W[24+ye],Le=W[40+ye],z=Ee-Se+1>>1,Ee=Ee+Se+1>>1,Se=z,z=fe*d+Pe*c+2048>>12,fe=fe*c-Pe*d+2048>>12,Pe=z,z=He-Le+1>>1,He=He+Le+1>>1,Le=z,z=F+Z+1>>1,Z=F-Z+1>>1,F=z,z=Ee-Pe+1>>1,Ee=Ee+Pe+1>>1,Pe=z,z=Se-fe+1>>1,Se=Se+fe+1>>1,fe=z,z=He*l+F*a+2048>>12,He=He*a-F*l+2048>>12,F=z,z=Z*o+Le*n+2048>>12,Z=Z*n-Le*o+2048>>12,Le=z,W[0+ye]=Ee+F,W[56+ye]=Ee-F,W[8+ye]=Se+Le,W[48+ye]=Se-Le,W[16+ye]=fe+Z,W[40+ye]=fe-Z,W[24+ye]=Pe+He,W[32+ye]=Pe-He}for(te=0;te<64;++te){var oe=128+(W[te]+8>>4);ee[te]=oe<0?0:oe>255?255:oe}}N(K*L*8);for(var Re,Ue,rt=0;rt<L;rt++){var Ve=rt<<3;for(Re=0;Re<8;Re++)M.push(new Uint8Array(K));for(var Fe=0;Fe<R;Fe++){ae(I.blocks[rt][Fe],ue,Q);var nt=0,dt=Fe<<3;for(Ue=0;Ue<8;Ue++){var it=M[Ve+Ue];for(Re=0;Re<8;Re++)it[dt+Re]=ue[nt++]}}}return M}function D(j){return j<0?0:j>255?255:j}x.prototype={load:function(I){var M=new XMLHttpRequest;M.open("GET",I,!0),M.responseType="arraybuffer",M.onload=function(){var R=new Uint8Array(M.response||M.mozResponseArrayBuffer);this.parse(R),this.onload&&this.onload()}.bind(this),M.send(null)},parse:function(I){var M=this.opts.maxResolutionInMP*1e3*1e3,R=0;I.length;function L(){var Rt=I[R]<<8|I[R+1];return R+=2,Rt}function K(){var Rt=L(),Mt=I.subarray(R,R+Rt-2);return R+=Mt.length,Mt}function Q(Rt){var Mt=1,Ie=1,gt,mt;for(mt in Rt.components)Rt.components.hasOwnProperty(mt)&&(gt=Rt.components[mt],Mt<gt.h&&(Mt=gt.h),Ie<gt.v&&(Ie=gt.v));var Et=Math.ceil(Rt.samplesPerLine/8/Mt),Ht=Math.ceil(Rt.scanLines/8/Ie);for(mt in Rt.components)if(Rt.components.hasOwnProperty(mt)){gt=Rt.components[mt];var li=Math.ceil(Math.ceil(Rt.samplesPerLine/8)*gt.h/Mt),Er=Math.ceil(Math.ceil(Rt.scanLines/8)*gt.v/Ie),mr=Et*gt.h,xi=Ht*gt.v,ps=xi*mr,cn=[];N(ps*256);for(var Mr=0;Mr<xi;Mr++){for(var Di=[],Zn=0;Zn<mr;Zn++)Di.push(new Int32Array(64));cn.push(Di)}gt.blocksPerLine=li,gt.blocksPerColumn=Er,gt.blocks=cn}Rt.maxH=Mt,Rt.maxV=Ie,Rt.mcusPerLine=Et,Rt.mcusPerColumn=Ht}var ue=null,ae=null,Re,Ue,rt=[],Ve=[],Fe=[],nt=[],dt=L(),it=-1;if(this.comments=[],dt!=65496)throw new Error("SOI not found");for(dt=L();dt!=65497;){var bt,ee;switch(dt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var ne=K();if(dt===65534){var se=String.fromCharCode.apply(null,ne);this.comments.push(se)}dt===65504&&ne[0]===74&&ne[1]===70&&ne[2]===73&&ne[3]===70&&ne[4]===0&&(ue={version:{major:ne[5],minor:ne[6]},densityUnits:ne[7],xDensity:ne[8]<<8|ne[9],yDensity:ne[10]<<8|ne[11],thumbWidth:ne[12],thumbHeight:ne[13],thumbData:ne.subarray(14,14+3*ne[12]*ne[13])}),dt===65505&&ne[0]===69&&ne[1]===120&&ne[2]===105&&ne[3]===102&&ne[4]===0&&(this.exifBuffer=ne.subarray(5,ne.length)),dt===65518&&ne[0]===65&&ne[1]===100&&ne[2]===111&&ne[3]===98&&ne[4]===101&&ne[5]===0&&(ae={version:ne[6],flags0:ne[7]<<8|ne[8],flags1:ne[9]<<8|ne[10],transformCode:ne[11]});break;case 65499:for(var Ee=L(),Se=Ee+R-2;R<Se;){var fe=I[R++];N(256);var Pe=new Int32Array(64);if(fe>>4===0)for(ee=0;ee<64;ee++){var He=s[ee];Pe[He]=I[R++]}else if(fe>>4===1)for(ee=0;ee<64;ee++){var He=s[ee];Pe[He]=L()}else throw new Error("DQT: invalid table spec");rt[fe&15]=Pe}break;case 65472:case 65473:case 65474:L(),Re={},Re.extended=dt===65473,Re.progressive=dt===65474,Re.precision=I[R++],Re.scanLines=L(),Re.samplesPerLine=L(),Re.components={},Re.componentsOrder=[];var Z=Re.scanLines*Re.samplesPerLine;if(Z>M){var Le=Math.ceil((Z-M)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Le}MP`)}var F=I[R++],z;for(bt=0;bt<F;bt++){z=I[R];var W=I[R+1]>>4,te=I[R+1]&15,de=I[R+2];if(W<=0||te<=0)throw new Error("Invalid sampling factor, expected values above 0");Re.componentsOrder.push(z),Re.components[z]={h:W,v:te,quantizationIdx:de},R+=3}Q(Re),Ve.push(Re);break;case 65476:var ye=L();for(bt=2;bt<ye;){var oe=I[R++],le=new Uint8Array(16),we=0;for(ee=0;ee<16;ee++,R++)we+=le[ee]=I[R];N(16+we);var De=new Uint8Array(we);for(ee=0;ee<we;ee++,R++)De[ee]=I[R];bt+=17+we,(oe>>4===0?nt:Fe)[oe&15]=E(le,De)}break;case 65501:L(),Ue=L();break;case 65500:L(),L();break;case 65498:L();var Ye=I[R++],$e=[],Qe;for(bt=0;bt<Ye;bt++){Qe=Re.components[I[R++]];var Ke=I[R++];Qe.huffmanTableDC=nt[Ke>>4],Qe.huffmanTableAC=Fe[Ke&15],$e.push(Qe)}var tt=I[R++],_t=I[R++],st=I[R++],St=P(I,R,Re,$e,Ue,tt,_t,st>>4,st&15,this.opts);R+=St;break;case 65535:I[R]!==255&&R--;break;default:if(I[R-3]==255&&I[R-2]>=192&&I[R-2]<=254){R-=3;break}else if(dt===224||dt==225){if(it!==-1)throw new Error(`first unknown JPEG marker at offset ${it.toString(16)}, second unknown JPEG marker ${dt.toString(16)} at offset ${(R-1).toString(16)}`);it=R-1;const Rt=L();if(I[R+Rt-2]===255){R+=Rt-2;break}}throw new Error("unknown JPEG marker "+dt.toString(16))}dt=L()}if(Ve.length!=1)throw new Error("only single frame JPEGs supported");for(var bt=0;bt<Ve.length;bt++){var Ot=Ve[bt].components;for(var ee in Ot)Ot[ee].quantizationTable=rt[Ot[ee].quantizationIdx],delete Ot[ee].quantizationIdx}this.width=Re.samplesPerLine,this.height=Re.scanLines,this.jfif=ue,this.adobe=ae,this.components=[];for(var bt=0;bt<Re.componentsOrder.length;bt++){var Qe=Re.components[Re.componentsOrder[bt]];this.components.push({lines:b(Re,Qe),scaleX:Qe.h/Re.maxH,scaleY:Qe.v/Re.maxV})}},getData:function(I,M){var R=this.width/I,L=this.height/M,K,Q,ue,ae,Re,Ue,rt,Ve,Fe,nt,dt=0,it,bt,ee,ne,se,Ee,Se,fe,Pe,He,Z,Le=I*M*this.components.length;N(Le);var F=new Uint8Array(Le);switch(this.components.length){case 1:for(K=this.components[0],nt=0;nt<M;nt++)for(Re=K.lines[0|nt*K.scaleY*L],Fe=0;Fe<I;Fe++)it=Re[0|Fe*K.scaleX*R],F[dt++]=it;break;case 2:for(K=this.components[0],Q=this.components[1],nt=0;nt<M;nt++)for(Re=K.lines[0|nt*K.scaleY*L],Ue=Q.lines[0|nt*Q.scaleY*L],Fe=0;Fe<I;Fe++)it=Re[0|Fe*K.scaleX*R],F[dt++]=it,it=Ue[0|Fe*Q.scaleX*R],F[dt++]=it;break;case 3:for(Z=!0,this.adobe&&this.adobe.transformCode?Z=!0:typeof this.opts.colorTransform<"u"&&(Z=!!this.opts.colorTransform),K=this.components[0],Q=this.components[1],ue=this.components[2],nt=0;nt<M;nt++)for(Re=K.lines[0|nt*K.scaleY*L],Ue=Q.lines[0|nt*Q.scaleY*L],rt=ue.lines[0|nt*ue.scaleY*L],Fe=0;Fe<I;Fe++)Z?(it=Re[0|Fe*K.scaleX*R],bt=Ue[0|Fe*Q.scaleX*R],ee=rt[0|Fe*ue.scaleX*R],fe=D(it+1.402*(ee-128)),Pe=D(it-.3441363*(bt-128)-.71413636*(ee-128)),He=D(it+1.772*(bt-128))):(fe=Re[0|Fe*K.scaleX*R],Pe=Ue[0|Fe*Q.scaleX*R],He=rt[0|Fe*ue.scaleX*R]),F[dt++]=fe,F[dt++]=Pe,F[dt++]=He;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(Z=!1,this.adobe&&this.adobe.transformCode?Z=!0:typeof this.opts.colorTransform<"u"&&(Z=!!this.opts.colorTransform),K=this.components[0],Q=this.components[1],ue=this.components[2],ae=this.components[3],nt=0;nt<M;nt++)for(Re=K.lines[0|nt*K.scaleY*L],Ue=Q.lines[0|nt*Q.scaleY*L],rt=ue.lines[0|nt*ue.scaleY*L],Ve=ae.lines[0|nt*ae.scaleY*L],Fe=0;Fe<I;Fe++)Z?(it=Re[0|Fe*K.scaleX*R],bt=Ue[0|Fe*Q.scaleX*R],ee=rt[0|Fe*ue.scaleX*R],ne=Ve[0|Fe*ae.scaleX*R],se=255-D(it+1.402*(ee-128)),Ee=255-D(it-.3441363*(bt-128)-.71413636*(ee-128)),Se=255-D(it+1.772*(bt-128))):(se=Re[0|Fe*K.scaleX*R],Ee=Ue[0|Fe*Q.scaleX*R],Se=rt[0|Fe*ue.scaleX*R],ne=Ve[0|Fe*ae.scaleX*R]),F[dt++]=255-se,F[dt++]=255-Ee,F[dt++]=255-Se,F[dt++]=255-ne;break;default:throw new Error("Unsupported color mode")}return F},copyToImageData:function(I,M){var R=I.width,L=I.height,K=I.data,Q=this.getData(R,L),ue=0,ae=0,Re,Ue,rt,Ve,Fe,nt,dt,it,bt;switch(this.components.length){case 1:for(Ue=0;Ue<L;Ue++)for(Re=0;Re<R;Re++)rt=Q[ue++],K[ae++]=rt,K[ae++]=rt,K[ae++]=rt,M&&(K[ae++]=255);break;case 3:for(Ue=0;Ue<L;Ue++)for(Re=0;Re<R;Re++)dt=Q[ue++],it=Q[ue++],bt=Q[ue++],K[ae++]=dt,K[ae++]=it,K[ae++]=bt,M&&(K[ae++]=255);break;case 4:for(Ue=0;Ue<L;Ue++)for(Re=0;Re<R;Re++)Fe=Q[ue++],nt=Q[ue++],rt=Q[ue++],Ve=Q[ue++],dt=255-D(Fe*(1-Ve/255)+Ve),it=255-D(nt*(1-Ve/255)+Ve),bt=255-D(rt*(1-Ve/255)+Ve),K[ae++]=dt,K[ae++]=it,K[ae++]=bt,M&&(K[ae++]=255);break;default:throw new Error("Unsupported color mode")}}};var C=0,O=0;function N(j=0){var I=C+j;if(I>O){var M=Math.ceil((I-O)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${M}MB`)}C=I}return x.resetMaxMemoryUsage=function(j){C=0,O=j},x.getBytesAllocated=function(){return C},x.requestMemoryAllocation=N,x}();r.exports=t;function t(i,s={}){var n={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},o={...n,...s},a=new Uint8Array(i),l=new e;l.opts=o,e.resetMaxMemoryUsage(o.maxMemoryUsageInMB*1024*1024),l.parse(a);var c=o.formatAsRGBA?4:3,d=l.width*l.height*c;try{e.requestMemoryAllocation(d);var f={width:l.width,height:l.height,exifBuffer:l.exifBuffer,data:o.useTArray?new Uint8Array(d):Buffer.alloc(d)};l.comments.length>0&&(f.comments=l.comments)}catch(g){throw g instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+d):g instanceof ReferenceError&&g.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):g}return l.copyToImageData(f,o.formatAsRGBA),f}})(iM);var pJ=rM.exports,gJ=iM.exports,mJ={encode:pJ,decode:gJ};class xJ extends _J{constructor(t,i){super(t);u(this,"output_format_",0);u(this,"decoded_image_data_");u(this,"raw_image_memory_")}GetTypeString(){return"JPEGImageDecoder"}DecodeChunkInternal(t){var{width:i,height:s,data:n}=mJ.decode(t,{useTArray:!0});this.decoded_image_data_=this.AllocateImageData(new tl(i,s),!1),this.decoded_image_data_.SetMemory(new Uint8Array(t)),this.output_format_=2,this.set_state(oA.kDone)}FinishInternal(){if(this.state()!=oA.kDone){this.decoded_image_data_=void 0,this.raw_image_memory_=void 0;return}if(J(this.output_format_!=0),this.output_format_==2||this.output_format_==3)return J(this.decoded_image_data_),this.CreateImage(this.decoded_image_data_);ze()}}class yJ{constructor(){u(this,"data",new Uint8Array(Dx));u(this,"position",0)}}const Dx=14;class F0 extends Ik{constructor(t,i,s,n=void 0){super();u(this,"resource_provider_");u(this,"image_available_callback_");u(this,"image_type_");u(this,"load_complete_callback_");u(this,"decoder_");u(this,"signature_cache_",new yJ);u(this,"state_");u(this,"error_message_");u(this,"use_failure_image_decoder_",!1);this.resource_provider_=t,this.image_available_callback_=i,this.image_type_=n||0,this.load_complete_callback_=s,this.state_=this.resource_provider_?0:4,this.signature_cache_.position=0}DecodeChunk(t){if(t.byteLength.toString(),t.byteLength==0){_i(nn,"Decoder received 0 bytes.");return}this.DecodeChunkInternal(t)}Finish(){const{state_:t,signature_cache_:i,load_complete_callback_:s,error_message_:n}=this;let o=this.decoder_;switch(t){case 1:J(o);let a=o.FinishAndMaybeReturnImage();a?(this.image_available_callback_(a),this.load_complete_callback_(void 0)):this.load_complete_callback_(o.GetTypeString()+" failed to decode image.");break;case 0:i.position==0?s(n):s("No enough image data for header.");break;case 3:s("Unsupported image format.");break;case 4:_i(nn,ab(F0,F0.prototype.Finish),"[",this,"] while suspended.");break;case 2:s(n);break}}static AllowDecodingToMultiPlane(){return!1}DecodeChunkInternal(t){switch(this.state_){case 0:{let{consumed_size:i,result:s}=this.InitializeInternalDecoder(t);s?(this.state_=1,J(this.decoder_),i==Dx?this.decoder_.DecodeChunk(t):ze()):ze()}break;case 1:J(this.decoder_),this.decoder_.DecodeChunk(t);break;case 2:case 3:case 4:J(!this.decoder_);break}}InitializeInternalDecoder(t){let i=this.signature_cache_.position;if(i!==0)debugger;let s=t.byteLength,n=Math.min(Dx-i,s);fJ(this.signature_cache_.data,new Uint8Array(t),i,n),this.signature_cache_.position+=n;let o=n;return this.signature_cache_.position<Dx?{result:!1,consumed_size:o}:(this.image_type_==0&&(this.image_type_=vJ(this.signature_cache_.data)),this.decoder_||(this.decoder_=EJ(this.image_type_,this.resource_provider_)),this.decoder_?{result:!0,consumed_size:o}:(this.state_=3,{result:!1,consumed_size:o}))}}function vJ(r){return sA(r,[255,216,255])?2:!Im(r,"GIF87a")||!Im(r,"GIF89a")?1:sA(r,[137,80,78,71,13,10,26,10])?!Im(r,"RIFF")&&!Im(r,"WEBPVP",8)?5:0:4}function EJ(r,e){if(r==2)return new xJ(e,F0.AllowDecodingToMultiPlane());et()}class Fk extends Ik{constructor(t,i,s){super();u(this,"image_decoder_");this.image_decoder_=new F0(t,i.bind(this),s.bind(this))}static Create(t,i,s){return new Fk(t,i,s)}DecodeChunk(t){this.image_decoder_.DecodeChunk(t)}Finish(){this.image_decoder_.Finish()}}class SJ{constructor(e){u(this,"capacity_");u(this,"total_size_",0);u(this,"cache_entries_",new Map);u(this,"memory_size_in_bytes_");u(this,"count_resources_cached_");this.capacity_=e,this.memory_size_in_bytes_=0,this.count_resources_cached_=0}dispose(){this.cache_entries_.clear(),this.memory_size_in_bytes_=0,this.count_resources_cached_=0}GetFetcherCreator(e,t){ze()}NotifyResourceRequested(e){ze()}CreateCachedFetcher(e,t,i){ze()}OnFetchSuccess(e,t,i){}}class Iy extends Ik{constructor(t,i,s){super();u(this,"resource_provider_");u(this,"typeface_available_callback_");u(this,"load_complete_callback_");u(this,"is_raw_data_too_large_");u(this,"is_suspended_");this.resource_provider_=t,this.typeface_available_callback_=i,this.load_complete_callback_=s,this.is_raw_data_too_large_=!1,this.is_suspended_=!this.resource_provider_,J(!!this.typeface_available_callback_),J(!!s)}static Create(t,i,s){return new Iy(t,i,s)}DecodeChunk(t){}Finish(){}}class wJ{constructor(e,t,i){u(this,"fetcher_factory_");u(this,"fetcher_cache_");u(this,"resource_provider_");u(this,"active_loaders_",new Set);u(this,"is_suspended_",!1);this.fetcher_factory_=e,this.resource_provider_=t,i>0&&(this.fetcher_cache_=new SJ(i))}CreateImageLoader(e,t,i){let s=this.MakeCachedFetcherCreator(e),n=new gC(s,Fk.Create.bind(null,this.resource_provider_,t),i,this.OnLoaderDestroyed.bind(this),this.is_suspended_);return this.OnLoaderCreated(n),n}CreateTypefaceLoader(e,t,i){let s=this.MakeFetcherCreator(e),n=new gC(s,Iy.Create.bind(Iy,this.resource_provider_,t,i),i,this.OnLoaderDestroyed.bind(this),this.is_suspended_);return this.OnLoaderCreated(n),n}NotifyResourceRequested(e){this.fetcher_cache_&&this.fetcher_cache_.NotifyResourceRequested(e)}UpdateResourceProvider(e){ze()}OnLoaderCreated(e){J(!this.active_loaders_.has(e)),this.active_loaders_.add(e)}OnLoaderDestroyed(e){ze()}SuspendActiveLoaders(){ze()}ResumeActiveLoaders(e){ze()}MakeFetcherCreator(e){return this.fetcher_factory_.CreateSecureFetcher.bind(this.fetcher_factory_,e)}MakeCachedFetcherCreator(e){let t=this.MakeFetcherCreator(e);return this.fetcher_cache_?this.fetcher_cache_.GetFetcherCreator(e,t):t}}const AJ=""+new URL("354.985f36e7.jpg",import.meta.url).href;class bJ extends hJ{constructor(e,t){super(t),this.Start(),fetch(AJ).then(i=>i.arrayBuffer()).then(i=>{let s=i;this.handler().OnReceivedPassed(this,s),this.handler().OnDone(this)})}Start(){}}class kJ{CreateSecureFetcher(e,t){return Ec(Tp,"Fetching: ",e.substr(0,200)),new bJ(e,t)}}function TJ(r,e,t){return new xF(r,e,!0,t.CreateTypefaceLoader.bind(t),t.NotifyResourceRequested.bind(t))}const PJ={name:"",clear_window_with_background_color:!0,encoded_image_cache_capacity:0,image_cache_capacity:32*1024*1024,remote_typeface_cache_capacity:4*1024*1024},mC=512;class RJ{constructor(e,t,i,s){u(this,"name_");u(this,"is_running_");u(this,"window_");u(this,"resource_provider_");u(this,"layoutManager");u(this,"render_tree_produced_callback_");u(this,"last_render_tree_produced_time_",null);u(this,"is_render_tree_rasterization_pending_",!1);u(this,"fetcher_factory_");u(this,"loader_factory_");u(this,"image_cache_");u(this,"remote_typeface_cache_");let n={...s,...PJ};this.name_=n.name,this.is_running_=!0,this.resource_provider_=i,this.fetcher_factory_=new kJ,J(this.fetcher_factory_),Rr(0,n.encoded_image_cache_capacity),this.loader_factory_=new wJ(this.fetcher_factory_,this.resource_provider_,n.encoded_image_cache_capacity),Rr(0,n.image_cache_capacity),this.image_cache_=uJ(`${this.name_}.ImageCache`,n.image_cache_capacity,this.loader_factory_),J(this.image_cache_),this.remote_typeface_cache_=TJ(`${this.name_}.RemoteTypefaceCache`,n.remote_typeface_cache_capacity,this.loader_factory_),this.window_=new Xq(t,i,this.image_cache_,this.remote_typeface_cache_,qq(),mC),this.render_tree_produced_callback_=e;let o=!1;this.layoutManager=new lJ(o,this.name_,this.window_,this.OnRenderTreeProduced.bind(this),this.onLayout.bind(this),mC,60,"en-US",n.clear_window_with_background_color)}get document(){return this.window_.document()}SetApplicationStartOrPreloadTimestamp(e,t){J(this.window_),this.window_.performance().SetApplicationStartOrPreloadTimestamp(e,t)}OnRenderTreeProduced(e){J(this.is_running_),this.last_render_tree_produced_time_=Si.Now(),this.is_render_tree_rasterization_pending_=!0;let t=new nA(e.render_tree,e.layout_time,this.OnRenderTreeRasterized.bind(this,this.last_render_tree_produced_time_));this.render_tree_produced_callback_(t)}OnRenderTreeRasterized(e){Au(this.ProcessOnRenderTreeRasterized.bind(this,e,Si.Now()))}ProcessOnRenderTreeRasterized(e,t){(!this.last_render_tree_produced_time_||e.GE(this.last_render_tree_produced_time_))&&(this.is_render_tree_rasterization_pending_=!1)}onLayout(){}}class Mk extends zt{constructor(t,i=new pr(0)){super();u(this,"render_tree");u(this,"time_offset");u(this,"on_rasterized_callbacks",[]);u(this,"timeline_info",new nM);this.render_tree=t,this.time_offset=i}}class nM{constructor(e=-1,t=!0,i=4){this.id=e,this.allow_latency_reduction=t,this.max_submission_queue_size=i}}class DJ{constructor(e,t){u(this,"time_to_converge_");u(this,"target_");u(this,"target_set_time_");u(this,"previous_value_");u(this,"previous_derivative_");u(this,"max_slope_magnitude_");this.time_to_converge_=e,this.previous_derivative_=0,this.max_slope_magnitude_=t,J(new pr(0).LT(this.time_to_converge_)),J(Ti(this.max_slope_magnitude_)||this.max_slope_magnitude_>0)}SetTarget(e,t){let i=this.GetCurrentDerivative(t),s;this.target_&&(s=this.GetValueAtTime(t)),this.previous_derivative_=i,this.previous_value_=s,this.target_=e,this.target_set_time_=t}SnapToTarget(){this.previous_value_=void 0,this.previous_derivative_=0}GetValueAtTime(e){if(!this.previous_value_)return this.target_;let t=this.t(e),i=1-t,s=this.P0(),n=this.P1(),o=this.P2(),a=this.P3();return i*i*i*s+3*i*i*t*n+3*i*t*t*o+t*t*t*a}t(e){J(this.target_,"SetTarget() must have been called previously.");let t=e.SUB(this.target_set_time_),i=this.time_to_converge_.InSeconds();if(this.max_slope_magnitude_){let n=this.GetDerivativeWithLargestMagnitude();if(n==Number.POSITIVE_INFINITY||n==Number.NEGATIVE_INFINITY)return 0;let o=n/i;o<-this.max_slope_magnitude_?i=-n/this.max_slope_magnitude_:o>this.max_slope_magnitude_&&(i=n/this.max_slope_magnitude_)}let s=t.InSeconds()/i;return Rr(0,s),Math.max(Math.min(s,1),0)}P0(){return this.previous_value_}P1(){return this.previous_value_+this.previous_derivative_/3}P2(){return this.P3()}P3(){return this.target_}GetCurrentDerivative(e){if(!this.previous_value_)return 0;let t=this.t(e),i=this.P0(),s=this.P1(),n=this.P2(),o=this.P3();return Fm(i,s,n,o,t)}GetDerivativeWithLargestMagnitude(){let e=this.P0(),t=this.P1(),i=this.P2(),s=this.P3(),n=i-2*t+e,o=-s+3*i-3*t+e,a;if(n==0)a=0;else{if(o==0)return n>=0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;a=n/o}let l=Fm(e,t,i,s,a),c=Fm(e,t,i,s,0),d=Fm(e,t,i,s,1);return Math.abs(l)>Math.abs(c)?Math.abs(l)>Math.abs(d)?l:d:Math.abs(c)>Math.abs(d)?c:d}}function Fm(r,e,t,i,s){let n=1-s;return 3*n*n*(e-r)+6*n*s*(t-e)+3*s*s*(i-t)}const CJ=800;class OJ{constructor(e,t,i=!0,s){u(this,"max_queue_size_");u(this,"dispose_function_");u(this,"renderer_time_origin_");u(this,"submission_queue_",[]);u(this,"to_submission_time_in_ms_");u(this,"last_now_");u(this,"to_submission_time_cval_");u(this,"allow_latency_reduction_");this.max_queue_size_=e,this.dispose_function_=s,this.to_submission_time_in_ms_=new DJ(t,CJ),this.to_submission_time_cval_=new pr(0),this.allow_latency_reduction_=i}PushSubmission(e,t){if(this.submission_queue_.length>0&&this.CheckThatNowIsMonotonicallyIncreasing(t),this.submission_queue_.length>=this.max_queue_size_){this.submission_queue_.shift();let n=this.submission_queue_[0].time_offset.SUB(this.render_time(t)).InMilliseconds();this.to_submission_time_in_ms_.GetValueAtTime(t)<n&&(this.to_submission_time_in_ms_.SetTarget(n,t),this.to_submission_time_in_ms_.SnapToTarget())}let s=e.time_offset.SUB(this.render_time(t)).InMilliseconds();(this.allow_latency_reduction_||this.submission_queue_.length===0||this.to_submission_time_in_ms_.GetValueAtTime(t)>s)&&this.to_submission_time_in_ms_.SetTarget(s,t),this.submission_queue_.push(e),this.PurgeStaleSubmissionsFromQueue(t)}GetCurrentSubmission(e){this.CheckThatNowIsMonotonicallyIncreasing(e),J(this.submission_queue_.length>0),this.PurgeStaleSubmissionsFromQueue(e);let t=this.submission_queue_[0];$n(this.to_submission_time_in_ms_.GetValueAtTime(e),this.submission_queue_[0].time_offset.SUB(this.render_time(e)).InMilliseconds());let i=this.submission_time(e);return i>t.time_offset&&(t.time_offset=i),t}submission_time(e){return pr.FromMilliseconds(this.to_submission_time_in_ms_.GetValueAtTime(e)).ADD(this.render_time(e))}render_time(e){return this.renderer_time_origin_||(this.renderer_time_origin_=e),e.SUB(this.renderer_time_origin_)}PurgeStaleSubmissionsFromQueue(e){let t=this.to_submission_time_in_ms_.GetValueAtTime(e),i=this.submission_queue_.length-1;if(i!=0)for(;t<this.submission_queue_[i].time_offset.SUB(this.render_time(e)).InMilliseconds()&&i!=0;)--i;this.submission_queue_.length>1&&(i=1);let s=this.submission_queue_[i];for(;this.submission_queue_[0]!==s;)if(this.dispose_function_){let n=this.submission_queue_.shift();this.dispose_function_(n)}else this.submission_queue_.shift();this.to_submission_time_cval_=pr.FromMilliseconds(this.to_submission_time_in_ms_.GetValueAtTime(e))}CheckThatNowIsMonotonicallyIncreasing(e){this.last_now_&&J(e.GE(this.last_now_)),this.last_now_=e}}const NJ=500;class IJ{constructor(e,t,i){u(this,"render_target_");u(this,"rasterize_timer_");u(this,"rasterizer_");u(this,"submission_queue_");u(this,"submit_even_if_render_tree_is_unchanged_");u(this,"last_render_tree_");u(this,"previous_animated_area_");u(this,"last_render_time_");u(this,"last_animations_expired_");u(this,"last_stat_tracked_animations_expired_");u(this,"last_did_rasterize_");u(this,"fallback_rasterize_count_");u(this,"new_render_tree_rasterize_count_");u(this,"new_render_tree_rasterize_time_");u(this,"has_active_animations_c_val_");u(this,"animations_start_time_");u(this,"animations_end_time_");u(this,"time_fence_");u(this,"post_fence_submission_");u(this,"post_fence_receipt_time_");u(this,"current_timeline_info_",new nM);u(this,"last_rasterize_time_");this.render_target_=t,this.submit_even_if_render_tree_is_unchanged_=i,this.last_did_rasterize_=!1,this.last_animations_expired_=!0,this.last_stat_tracked_animations_expired_=!0,this.new_render_tree_rasterize_count_=0,this.new_render_tree_rasterize_time_=0,this.has_active_animations_c_val_=!1,this.animations_start_time_=0,this.animations_end_time_=0,this.fallback_rasterize_count_=0,this.rasterizer_=e,this.InitializeRasterizerThread()}Submit(e){this.SetNewRenderTree(this.CollectAnimations(e))}Clear(){this.ClearCurrentRenderTree()}GetResourceProvider(){var e;return(e=this.rasterizer_)==null?void 0:e.GetResourceProvider()}SetNewRenderTree(e){if(J(e.render_tree),this.time_fence_){this.post_fence_submission_=e,this.post_fence_receipt_time_=Si.Now(),e.dispose();return}this.QueueSubmission(e,Si.Now()),this.RasterizeCurrentTree()}ClearCurrentRenderTree(){this.ResetSubmissionQueue(),this.rasterize_timer_=void 0}RasterizeCurrentTree(){let e=Si.Now(),t=this.submission_queue_.GetCurrentSubmission(e),i=t.render_tree!=this.last_render_tree_,s=!this.last_animations_expired_||i,n=this.submit_even_if_render_tree_is_unchanged_;if(n||s){let o=this.RasterizeSubmissionToRenderTarget(t,this.render_target_,n);o&&(this.last_rasterize_time_=e);let a=!0,l=!0;this.UpdateRasterizeStats(o,l,i,e,Si.Now()),this.last_did_rasterize_=o,this.last_animations_expired_=a,this.last_stat_tracked_animations_expired_=l}this.time_fence_&&this.submission_queue_.submission_time(Si.Now()).GE(this.time_fence_)&&ze()}RasterizeSubmissionToRenderTarget(e,t,i){e.render_tree!=this.last_render_tree_&&(this.last_render_tree_=e.render_tree,this.last_render_time_=void 0);let s=e.render_tree;this.rasterizer_.Submit(s,t);for(let n of e.on_rasterized_callbacks)n();return this.last_render_time_=e.time_offset,s.dispose(),!0}UpdateRasterizeStats(e,t,i,s,n){}InitializeRasterizerThread(){this.ResetSubmissionQueue()}OnDumpCurrentRenderTree(e){}CollectAnimations(e){return e}FrameStatsOnFlushCallback(){}ResetSubmissionQueue(){this.submission_queue_=new OJ(this.current_timeline_info_.max_submission_queue_size,pr.FromMilliseconds(NJ),this.current_timeline_info_.allow_latency_reduction,e=>{e.dispose()})}QueueSubmission(e,t){e.timeline_info.id!=this.current_timeline_info_.id&&(this.current_timeline_info_=e.timeline_info,this.ResetSubmissionQueue()),J(this.submission_queue_),this.submission_queue_.PushSubmission(e,t)}}class aA{}u(aA,"kSubmitFlags_Clear",1<<0);function Pd(r){return r>=254.5/255}class FJ{constructor(e){u(this,"render_target");u(this,"opacity",1);u(this,"clip_is_rect",!0);this.render_target=e}}class sM{}u(sM,"Flags",{kInterpolateColorsInPremul_Flag:1<<0});function Cx(r,e,t,i){return[r,e,r+t,e+i]}function MJ(r,e,t,i){return[r,e,t,i]}function BJ(r){let e=r;return[e.Get(0,0),e.Get(0,1),e.Get(0,2),e.Get(1,0),e.Get(1,1),e.Get(1,2),e.Get(2,0),e.Get(2,1),e.Get(2,2)]}function LJ(r){return Cx(r.x(),r.y(),r.width(),r.height())}class UJ{}class GJ extends SF{constructor(t,i,s,n,o=0){super();u(this,"draw_state_");u(this,"create_scratch_surface_function_");u(this,"visitor_type_");u(this,"reset_skia_context_function_");u(this,"convert_render_tree_to_image_function_");this.draw_state_=new FJ(t),this.visitor_type_=o,this.create_scratch_surface_function_=i,this.reset_skia_context_function_=s,this.convert_render_tree_to_image_function_=n}VisitClearRectNode(t){this.withScaleAndTranslate(()=>{this.DrawClearRect(t.data().rect,t.data().color)})}VisitCompositionNode(t){let i=t.data().children();if(i.length===0)return;const{draw_state_:s}=this;s.render_target.translate(t.data().offset().x()*ws,t.data().offset().y()*ws);let n=[0,0,1280,720];s.render_target.getTotalMatrix();for(let o of i)(!n||jJ())&&o.Accept(this);s.render_target.translate(-t.data().offset().x()*ws,-t.data().offset().y()*ws)}VisitMatrixTransformNode(t){this.withScaleAndTranslate(()=>{const{draw_state_:i}=this,s=t.data().transform.CLONE();s.MUL(new zr(ws,ws)),i.render_target.concat(BJ(s)),t.data().source.Accept(this)})}VisitRectNode(t){this.withScaleAndTranslate(()=>{let i=t.data().rect,s=t.data().rect.CLONE(),n=t.data().border;n&&s.Inset(n.left.width,n.top.width,n.right.width,n.bottom.width);let o,a=t.data().rounded_corners;if(a){let c=t.data().border;c?o=a.Inset(c.left.width,c.top.width,c.right.width,c.bottom.width):o=a}let l=t.data().background_brush;l&&(o&&!o.AreSquares()?ze():this.DrawRectWithBrush(l,s)),t.data().border&&(t.data().rounded_corners?ze():zJ(this.draw_state_,i,t.data().border))})}VisitTextNode(t){this.withScaleAndTranslate(()=>{const{draw_state_:i}=this;Kt(1,i.opacity);let s=0;if(t.data().shadows){let a=t.data().shadows;for(let c=0;c<a.length;++c)if(a[c].blur_sigma>0){s=1e-6;break}let l=a.length;for(let c=l-1;c>=0;--c){et();let d=a[c];this.RenderText(t.data().glyph_buffer,d.color,gy(t.data().offset.Add(d.offset)),d.blur_sigma==0?s:d.blur_sigma)}}const{background:n}=t.data();if(n){const{colorBrush:a,rect:l}=n;this.DrawRectWithBrush(a,l)}let o=t.data().offset.CLONE();this.RenderText(t.data().glyph_buffer,t.data().color,gy(o),s)})}VisitImageNode(t){if(!t.data().source)return;let i=t.data().source;i.EnsureInitialized()&&AA(this.reset_skia_context_function_)&&this.reset_skia_context_function_();let s=t.data().local_transform.CLONE();if(s.MUL(new zr(ws,ws)),!i.CanRenderInSkia()&&!oQ(s)&&ze(),i.CanRenderInSkia())if(i.GetTypeId()===rr(mv)){let n=t.data().destination_rect.CLONE();n.Scale(ws),this.RenderSinglePlaneImage(i,this.draw_state_,n,s)}else i.GetTypeId()===rr(dk)?ze():et();else ze()}VisitFreehandNode(t){let i=t.data();this.withScaleAndTranslate(()=>{this.RenderPath(i.d,i.fill,i.stroke)})}withScaleAndTranslate(t){this.draw_state_.render_target.save(),this.draw_state_.render_target.scale(ws,ws),t(),this.draw_state_.render_target.restore()}RenderSinglePlaneImage(t,i,s,n){this.CreateSkPaintForImageRendering(i,t.IsOpaque(),o=>{let a=t.GetSize(),l=t.GetImage();if(KJ(n)&&XJ(n)){let c=a.width()/n.Get(0,0),d=a.height()/n.Get(1,1),f=-c*n.Get(0,2),g=-d*n.Get(1,2);if(l){let x=Cx(f,g,c,d);i.render_target.drawImageRect(l,x,LJ(s),o)}}else ze()})}CreateSkPaintForImageRendering(t,i,s){return lc(n=>{Pd(t.opacity)?i&&t.clip_is_rect&&n.setBlendMode(gr.BlendMode.Src):n.setAlphaf(t.opacity*255);try{return s(n)}finally{n.deleteLater()}})}DrawClearRect(t,i){let s=Cx(t.x(),t.y(),t.width(),t.height());lc(n=>{n.setBlendMode(gr.BlendMode.Src),n.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,i.a())),this.draw_state_.render_target.drawRect(s,n)})}DrawRoundedRectWithBrush(t,i,s){}DrawRectWithBrush(t,i){let{draw_state_:s}=this;lc(n=>{let o=new VJ(n,s);t.Accept(o),s.render_target.drawRect(Cx(i.x(),i.y(),i.width(),i.height()),n)})}RenderText(t,i,s,n){if(n>20)ze("Cobalt does not yet support text blurs with Gaussian ","sigmas larger than 20.");else{let o=t.GetTextBlob();if(!o)return;lc(a=>{a.setAntiAlias(!0),a.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,i.a())),n>0&&ze(),o&&this.draw_state_.render_target.drawTextBlob(o,s.x(),s.y(),a)})}}RenderPath(t,i,s){lc(n=>(n.setAntiAlias(!0),E5(t)(o=>{o||et(),i&&(n.setStyle(gr.PaintStyle.Fill),n.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,i.a())),this.draw_state_.render_target.drawPath(o,n)),s&&(n.setStyle(gr.PaintStyle.Stroke),n.setColor(gr.Color(s.r()*255,s.g()*255,s.b()*255,s.a())),this.draw_state_.render_target.drawPath(o,n))})))}}function zJ(r,e,t){let i=t.top.color.EQ(t.left.color)&&t.top.color.EQ(t.bottom.color)&&t.top.color.EQ(t.right.color);const s=3;if(i&&t.top.style==rl.kBorderStyleSolid&&t.bottom.style==rl.kBorderStyleSolid&&t.left.style==rl.kBorderStyleSolid&&t.right.style==rl.kBorderStyleSolid&&t.top.width==t.bottom.width&&t.top.width==t.left.width&&t.top.width==t.right.width){let c=t.top.width<s||t.bottom.width<s||t.left.width<s||t.right.width<s;HJ(r,e,t.top.width,t.top.color,c);return}let n=[[e.x(),e.y()],[e.x()+t.left.width,e.y()+t.top.width],[e.right()-t.right.width,e.y()+t.top.width],[e.right(),e.y()]];Mm(t.top.style,r,t.top.color,n,t.top.width<s?!0:!i);let o=[[e.x(),e.y()],[e.x(),e.bottom()],[e.x()+t.left.width,e.bottom()-t.bottom.width],[e.x()+t.left.width,e.y()+t.top.width]];Mm(t.left.style,r,t.left.color,o,t.left.width<s?!0:!i);let a=[[e.x()+t.left.width,e.bottom()-t.bottom.width],[e.x(),e.bottom()],[e.right(),e.bottom()],[e.right()-t.right.width,e.bottom()-t.bottom.width]];Mm(t.bottom.style,r,t.bottom.color,a,t.bottom.width<s?!0:!i);let l=[[e.right()-t.right.width,e.y()+t.top.width],[e.right()-t.right.width,e.bottom()-t.bottom.width],[e.right(),e.bottom()],[e.right(),e.y()]];Mm(t.right.style,r,t.right.color,l,t.right.width<s?!0:!i)}function Mm(r,e,t,i,s){r==rl.kBorderStyleSolid?lc(n=>{let o=t.a();o*=e.opacity,n.setColor(gr.Color(t.r()*255,t.g()*255,t.b()*255,o)),n.setAntiAlias(s),Pd(o)?n.setBlendMode(gr.BlendMode.Src):n.setBlendMode(gr.BlendMode.SrcOver),S5(a=>{a.addPoly(i.flat(),!0),e.render_target.drawPath(a,n)})}):Kt(r,rl.kBorderStyleNone)}function HJ(r,e,t,i,s){lc(n=>{let o=i.a()*r.opacity;n.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,o)),n.setAntiAlias(s),Pd(o)?n.setBlendMode(gr.BlendMode.Src):n.setBlendMode(gr.BlendMode.SrcOver),n.setStyle(gr.PaintStyle.Stroke),n.setStrokeWidth(t);let a=t*.5,l=MJ(e.x()+a,e.y()+a,e.right()-a,e.bottom()-a);r.render_target.drawRect(l,n)})}function jJ(r,e,t){return!0}class VJ extends wF{constructor(t,i){super();u(this,"paint_");u(this,"draw_state_");this.paint_=t,this.draw_state_=i}visitLinearGradientBrush(t){let i=[[t.source().x(),t.source().y()],[t.dest().x(),t.dest().y()]],s=new WJ(t.color_stops()),n=gr.Shader.MakeLinearGradient(i[0],i[1],new Float32Array(s.colors[0]),s.positions,gr.TileMode.Clamp,void 0,sM.Flags.kInterpolateColorsInPremul_Flag);this.paint_.setShader(n),!s.has_alpha&&Pd(this.draw_state_.opacity)?this.paint_.setBlendMode(gr.BlendMode.Src):(Pd(this.draw_state_.opacity)||this.paint_.setAlphaf(255*this.draw_state_.opacity),this.paint_.setBlendMode(gr.BlendMode.SrcOver))}visitRadialGradientBrush(t){ze()}visitSolidColorBrush(t){let i=t.color(),s=i.a()*this.draw_state_.opacity;Pd(s)?this.paint_.setBlendMode(gr.BlendMode.Src):this.paint_.setBlendMode(gr.BlendMode.SrcOver),this.paint_.setColor(gr.Color(i.r()*255,i.g()*255,i.b()*255,s))}}class WJ{constructor(e){u(this,"colors",[]);u(this,"positions",[]);u(this,"has_alpha");this.has_alpha=!1,this.colors=new Array(e.length),this.positions=new Array(e.length);for(let t=0;t<e.length;++t)e[t].color.HasAlpha()&&(this.has_alpha=!0),this.colors[t]=$J(e[t].color),this.positions[t]=e[t].position}}function $J(r){return[r.r(),r.g(),r.b(),r.a()]}function KJ(r){return r.Get(0,1)==0&&r.Get(1,0)==0}function XJ(r){return r.Get(0,2)<=0&&1-r.Get(0,2)<=r.Get(0,0)&&r.Get(1,2)<=0&&1-r.Get(1,2)<=r.Get(1,1)}class Fy extends aA{constructor(e,t){super(),this.resource_provider_=e,this.transformAccessor_=t,ab(Fy,Fy.prototype.constructor)}GetResourceProvider(){return this.resource_provider_}Submit(e,t,i){let s=this.GetCanvasFromRenderTarget(t);const n=this.transformAccessor_(),{tx:o,ty:a}=n;s.save(),i&&i.flags&aA.kSubmitFlags_Clear&&s.clear([0,0,0,0]),s.translate(o*devicePixelRatio,a*devicePixelRatio),this.RasterizeRenderTreeToCanvas(t,e,s),t.flush(),s.restore()}GetCanvasFromRenderTarget(e){return e.getCanvas()}RasterizeRenderTreeToCanvas(e,t,i){let s=()=>new class extends UJ{GetSurface(){return e}},n=new GJ(i,s,this.ResetSkiaState.bind(this),this.ConvertRenderTreeToImage.bind(this));J(t),t.Accept(n)}ResetSkiaState(){}ConvertRenderTreeToImage(e){return this.resource_provider_.DrawOffscreenImage(e)}}class YJ{constructor(e){u(this,"pipeline_");const{render_target:t,resource_provider:i,transformAccessor:s}=e,{surface:n}=t;this.pipeline_=new IJ(new Fy(i,s),n,!1)}pipeline(){return this.pipeline_}resource_provider(){if(!!this.pipeline_)return this.pipeline_.GetResourceProvider()}}class qJ{constructor(e){u(this,"render_tree_combiner_");u(this,"render_tree_");u(this,"receipt_time_");this.render_tree_combiner_=e}Reset(){this.render_tree_=void 0,this.receipt_time_=void 0}Submit(e){this.render_tree_=e,this.receipt_time_=Si.Now()}HasRenderTree(){return!!this.render_tree_}GetCurrentSubmission(){const{render_tree_:e}=this;if(!e)return;let t=this.CurrentTimeOffset();J(t);let i=new Mk(e.render_tree,t);return i.timeline_info=e.timeline_info,i.on_rasterized_callbacks=e.on_rasterized_callbacks.slice(),i}CurrentTimeOffset(){if(this.receipt_time_)return J(this.render_tree_),this.render_tree_.time_offset.ADD(Si.Now().SUB(this.receipt_time_))}}class QJ{constructor(){u(this,"layers_",new Map);u(this,"timeline_layer_")}CreateLayer(e){if(this.layers_.has(e))return;let t=new qJ(this);return this.layers_.set(e,t),t}GetCurrentSubmission(){let e=new dh,t,i=[];for(let[o,a]of this.layers_)a.render_tree_&&(e.AddChild(a.render_tree_.render_tree),t=a,i.push(...a.render_tree_.on_rasterized_callbacks));if(!t)return;let s=this.timeline_layer_&&this.timeline_layer_.render_tree_?this.timeline_layer_:t,n=new Mk(new fh(e),s.CurrentTimeOffset());return n.timeline_info=s.render_tree_.timeline_info,n.on_rasterized_callbacks=i,n}SetTimelineLayer(e){e&&J(this.OwnsLayer(e)),this.timeline_layer_=e}OwnsLayer(e){for(let t of this.layers_.values())if(t===e)return!0;return!1}RemoveLayer(e){}}class JJ{constructor(...e){u(this,"width_height_");u(this,"diagonal_inches_",0);u(this,"device_pixel_ratio_",1);if(!e.length)this.width_height_=new tl(0,0);else if(e.length===1)e[0],this.width_height_=new tl;else if(e.length===2){let t=e[0],i=e[1];this.width_height_=new tl(t,i)}else if(e.length===4){let t=e[0],i=e[1],s=e[2],n=e[3];this.width_height_=new tl(t,i),this.diagonal_inches_=s,this.device_pixel_ratio_=n}else throw new Error("500")}width_height(){return this.width_height_}}const ZJ=1;class eZ extends zt{constructor(t,i,s){super();u(this,"_onMounted",new Dt);u(this,"_resource_provider");u(this,"web_module_");u(this,"renderer_module_");u(this,"current_main_web_module_timeline_id_",0);u(this,"render_tree_combiner_",new QJ);u(this,"main_web_module_layer_");this.container=t,this.view=i,this.vm=s;let n=document.createElement("canvas");this.container.appendChild(n);const{innerWidth:o,innerHeight:a}=window;n.width=o*ws,n.height=a*ws,Object.assign(n.style,{width:sy(o),height:sy(a)});let l=new iX(n),c=new VX;this._resource_provider=c;let d=this.GetViewportSize();this.web_module_=new RJ(this.QueueOnRenderTreeProduced.bind(this),d,c,{name:"MainWebModule",clear_window_with_background_color:!0}),this.renderer_module_=new YJ({render_target:l,resource_provider:c,transformAccessor:()=>this.view.mx}),this.main_web_module_layer_=this.render_tree_combiner_.CreateLayer(ZJ),this.init(),this._register(i.onCameraChagned(()=>{this.SubmitCurrentRenderTreeToRenderer()}))}get onMounted(){return this._onMounted.event}get layoutManager(){return this.web_module_.layoutManager}get document(){return this.web_module_.document}GetViewportSize(){return new JJ(1280,720)}QueueOnRenderTreeProduced(t){this.OnRenderTreeProduced(t),this.ProcessRenderTreeSubmissionQueue()}OnRenderTreeProduced(t){let i=tZ(t);i.timeline_info.id=this.current_main_web_module_timeline_id_,this.render_tree_combiner_.SetTimelineLayer(this.main_web_module_layer_),this.main_web_module_layer_.Submit(i),this.SubmitCurrentRenderTreeToRenderer()}ProcessRenderTreeSubmissionQueue(){}SubmitCurrentRenderTreeToRenderer(){let t=this.render_tree_combiner_.GetCurrentSubmission();t&&this.renderer_module_.pipeline().Submit(t)}async init(){await this._resource_provider.fontReady.wait(),this.SetApplicationStartOrPreloadTimestamp(!1,Date.now()),this.SubmitCurrentRenderTreeToRenderer();let t=this.document;t.onCreated(()=>{let i=t.createElement("html");Object.assign(i.style,{display:"block",position:"relative"}),t.appendChild(i),this._register(lq(this.vm,t))}),this._onMounted.fire()}SetApplicationStartOrPreloadTimestamp(t,i){J(this.web_module_),this.web_module_.SetApplicationStartOrPreloadTimestamp(t,i)}}function tZ(r){let e=new Mk(r.render_tree,r.layout_time);return r.on_rasterized_callback&&e.on_rasterized_callbacks.push(r.on_rasterized_callback),e}const CT=class extends zt{constructor(t,i){super();u(this,"_domNode");u(this,"_isVisible",!1);u(this,"_renderData");u(this,"_cursorFlatBlinkInterval");this.view=i,this._domNode=Pw(document.createElement("div")),t.appendChild(this._domNode.domNode),this._domNode.setDisplay("none"),this._domNode.setTop(0),this._domNode.setLeft(0),this._cursorFlatBlinkInterval=new O8,this._updateDomClassName()}_restartBlinking(){this._cursorFlatBlinkInterval.cancel(),this.show(),this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this.hide():this.show()},CT.BLINK_INTERVAL)}_stopBlinking(){this._cursorFlatBlinkInterval.cancel()}_updateDomClassName(){this._domNode.setClassName("cursor cursor-line-style cursor-blink")}show(){this._isVisible||(this._domNode.setVisibility("visible"),this._domNode.setTransform(wN(this.view.mx)),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}update(t=void 0){this._renderData=t,this.render(),this._renderData?this._restartBlinking():this._stopBlinking()}render(){if(!this._renderData){this.hide();return}this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setHeight(this._renderData.height)}};let Ox=CT;u(Ox,"BLINK_INTERVAL",500);function Bk(r,e){const t=Object.create(null),i=r.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const rZ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iZ=Bk(rZ);function oM(r){return!!r||r===""}function Pv(r){if(er(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],s=Dn(i)?oZ(i):Pv(i);if(s)for(const n in s)e[n]=s[n]}return e}else{if(Dn(r))return r;if(gi(r))return r}}const nZ=/;(?![^(]*\))/g,sZ=/:(.+)/;function oZ(r){const e={};return r.split(nZ).forEach(t=>{if(t){const i=t.split(sZ);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Rv(r){let e="";if(Dn(r))e=r;else if(er(r))for(let t=0;t<r.length;t++){const i=Rv(r[t]);i&&(e+=i+" ")}else if(gi(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const Fr={},Rd=[],Do=()=>{},aZ=()=>!1,lZ=/^on[^a-z]/,Dv=r=>lZ.test(r),Lk=r=>r.startsWith("onUpdate:"),Yn=Object.assign,Uk=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},uZ=Object.prototype.hasOwnProperty,or=(r,e)=>uZ.call(r,e),er=Array.isArray,Jp=r=>Cv(r)==="[object Map]",cZ=r=>Cv(r)==="[object Set]",Zt=r=>typeof r=="function",Dn=r=>typeof r=="string",Gk=r=>typeof r=="symbol",gi=r=>r!==null&&typeof r=="object",aM=r=>gi(r)&&Zt(r.then)&&Zt(r.catch),hZ=Object.prototype.toString,Cv=r=>hZ.call(r),dZ=r=>Cv(r).slice(8,-1),fZ=r=>Cv(r)==="[object Object]",zk=r=>Dn(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Nx=Bk(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ov=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},_Z=/-(\w)/g,uf=Ov(r=>r.replace(_Z,(e,t)=>t?t.toUpperCase():"")),pZ=/\B([A-Z])/g,zf=Ov(r=>r.replace(pZ,"-$1").toLowerCase()),lM=Ov(r=>r.charAt(0).toUpperCase()+r.slice(1)),lS=Ov(r=>r?`on${lM(r)}`:""),M0=(r,e)=>!Object.is(r,e),uS=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},My=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},gZ=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let xC;const mZ=()=>xC||(xC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ta;class xZ{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ta&&(this.parent=ta,this.index=(ta.scopes||(ta.scopes=[])).push(this)-1)}run(e){if(this.active){const t=ta;try{return ta=this,e()}finally{ta=t}}}on(){ta=this}off(){ta=this.parent}stop(e){if(this.active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function yZ(r,e=ta){e&&e.active&&e.effects.push(r)}const Hk=r=>{const e=new Set(r);return e.w=0,e.n=0,e},uM=r=>(r.w&Ru)>0,cM=r=>(r.n&Ru)>0,vZ=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Ru},EZ=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];uM(s)&&!cM(s)?s.delete(r):e[t++]=s,s.w&=~Ru,s.n&=~Ru}e.length=t}},lA=new WeakMap;let kp=0,Ru=1;const uA=30;let Ao;const zc=Symbol(""),cA=Symbol("");class jk{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,yZ(this,i)}run(){if(!this.active)return this.fn();let e=Ao,t=Eu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ao,Ao=this,Eu=!0,Ru=1<<++kp,kp<=uA?vZ(this):yC(this),this.fn()}finally{kp<=uA&&EZ(this),Ru=1<<--kp,Ao=this.parent,Eu=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ao===this?this.deferStop=!0:this.active&&(yC(this),this.onStop&&this.onStop(),this.active=!1)}}function yC(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let Eu=!0;const hM=[];function Hf(){hM.push(Eu),Eu=!1}function jf(){const r=hM.pop();Eu=r===void 0?!0:r}function Ls(r,e,t){if(Eu&&Ao){let i=lA.get(r);i||lA.set(r,i=new Map);let s=i.get(t);s||i.set(t,s=Hk()),dM(s)}}function dM(r,e){let t=!1;kp<=uA?cM(r)||(r.n|=Ru,t=!uM(r)):t=!r.has(Ao),t&&(r.add(Ao),Ao.deps.push(r))}function _l(r,e,t,i,s,n){const o=lA.get(r);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&er(r))o.forEach((l,c)=>{(c==="length"||c>=i)&&a.push(l)});else switch(t!==void 0&&a.push(o.get(t)),e){case"add":er(r)?zk(t)&&a.push(o.get("length")):(a.push(o.get(zc)),Jp(r)&&a.push(o.get(cA)));break;case"delete":er(r)||(a.push(o.get(zc)),Jp(r)&&a.push(o.get(cA)));break;case"set":Jp(r)&&a.push(o.get(zc));break}if(a.length===1)a[0]&&hA(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);hA(Hk(l))}}function hA(r,e){const t=er(r)?r:[...r];for(const i of t)i.computed&&vC(i);for(const i of t)i.computed||vC(i)}function vC(r,e){(r!==Ao||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const SZ=Bk("__proto__,__v_isRef,__isVue"),fM=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Gk)),wZ=Vk(),AZ=Vk(!1,!0),bZ=Vk(!0),EC=kZ();function kZ(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=yr(this);for(let n=0,o=this.length;n<o;n++)Ls(i,"get",n+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(yr)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){Hf();const i=yr(this)[e].apply(this,t);return jf(),i}}),r}function Vk(r=!1,e=!1){return function(i,s,n){if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&n===(r?e?HZ:xM:e?mM:gM).get(i))return i;const o=er(i);if(!r&&o&&or(EC,s))return Reflect.get(EC,s,n);const a=Reflect.get(i,s,n);return(Gk(s)?fM.has(s):SZ(s))||(r||Ls(i,"get",s),e)?a:Pn(a)?o&&zk(s)?a:a.value:gi(a)?r?yM(a):B0(a):a}}const TZ=_M(),PZ=_M(!0);function _M(r=!1){return function(t,i,s,n){let o=t[i];if(cf(o)&&Pn(o)&&!Pn(s))return!1;if(!r&&(!By(s)&&!cf(s)&&(o=yr(o),s=yr(s)),!er(t)&&Pn(o)&&!Pn(s)))return o.value=s,!0;const a=er(t)&&zk(i)?Number(i)<t.length:or(t,i),l=Reflect.set(t,i,s,n);return t===yr(n)&&(a?M0(s,o)&&_l(t,"set",i,s):_l(t,"add",i,s)),l}}function RZ(r,e){const t=or(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&_l(r,"delete",e,void 0),i}function DZ(r,e){const t=Reflect.has(r,e);return(!Gk(e)||!fM.has(e))&&Ls(r,"has",e),t}function CZ(r){return Ls(r,"iterate",er(r)?"length":zc),Reflect.ownKeys(r)}const pM={get:wZ,set:TZ,deleteProperty:RZ,has:DZ,ownKeys:CZ},OZ={get:bZ,set(r,e){return!0},deleteProperty(r,e){return!0}},NZ=Yn({},pM,{get:AZ,set:PZ}),Wk=r=>r,Nv=r=>Reflect.getPrototypeOf(r);function Bm(r,e,t=!1,i=!1){r=r.__v_raw;const s=yr(r),n=yr(e);t||(e!==n&&Ls(s,"get",e),Ls(s,"get",n));const{has:o}=Nv(s),a=i?Wk:t?Xk:L0;if(o.call(s,e))return a(r.get(e));if(o.call(s,n))return a(r.get(n));r!==s&&r.get(e)}function Lm(r,e=!1){const t=this.__v_raw,i=yr(t),s=yr(r);return e||(r!==s&&Ls(i,"has",r),Ls(i,"has",s)),r===s?t.has(r):t.has(r)||t.has(s)}function Um(r,e=!1){return r=r.__v_raw,!e&&Ls(yr(r),"iterate",zc),Reflect.get(r,"size",r)}function SC(r){r=yr(r);const e=yr(this);return Nv(e).has.call(e,r)||(e.add(r),_l(e,"add",r,r)),this}function wC(r,e){e=yr(e);const t=yr(this),{has:i,get:s}=Nv(t);let n=i.call(t,r);n||(r=yr(r),n=i.call(t,r));const o=s.call(t,r);return t.set(r,e),n?M0(e,o)&&_l(t,"set",r,e):_l(t,"add",r,e),this}function AC(r){const e=yr(this),{has:t,get:i}=Nv(e);let s=t.call(e,r);s||(r=yr(r),s=t.call(e,r)),i&&i.call(e,r);const n=e.delete(r);return s&&_l(e,"delete",r,void 0),n}function bC(){const r=yr(this),e=r.size!==0,t=r.clear();return e&&_l(r,"clear",void 0,void 0),t}function Gm(r,e){return function(i,s){const n=this,o=n.__v_raw,a=yr(o),l=e?Wk:r?Xk:L0;return!r&&Ls(a,"iterate",zc),o.forEach((c,d)=>i.call(s,l(c),l(d),n))}}function zm(r,e,t){return function(...i){const s=this.__v_raw,n=yr(s),o=Jp(n),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,c=s[r](...i),d=t?Wk:e?Xk:L0;return!e&&Ls(n,"iterate",l?cA:zc),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:a?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function Yl(r){return function(...e){return r==="delete"?!1:this}}function IZ(){const r={get(n){return Bm(this,n)},get size(){return Um(this)},has:Lm,add:SC,set:wC,delete:AC,clear:bC,forEach:Gm(!1,!1)},e={get(n){return Bm(this,n,!1,!0)},get size(){return Um(this)},has:Lm,add:SC,set:wC,delete:AC,clear:bC,forEach:Gm(!1,!0)},t={get(n){return Bm(this,n,!0)},get size(){return Um(this,!0)},has(n){return Lm.call(this,n,!0)},add:Yl("add"),set:Yl("set"),delete:Yl("delete"),clear:Yl("clear"),forEach:Gm(!0,!1)},i={get(n){return Bm(this,n,!0,!0)},get size(){return Um(this,!0)},has(n){return Lm.call(this,n,!0)},add:Yl("add"),set:Yl("set"),delete:Yl("delete"),clear:Yl("clear"),forEach:Gm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=zm(n,!1,!1),t[n]=zm(n,!0,!1),e[n]=zm(n,!1,!0),i[n]=zm(n,!0,!0)}),[r,t,e,i]}const[FZ,MZ,BZ,LZ]=IZ();function $k(r,e){const t=e?r?LZ:BZ:r?MZ:FZ;return(i,s,n)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?i:Reflect.get(or(t,s)&&s in i?t:i,s,n)}const UZ={get:$k(!1,!1)},GZ={get:$k(!1,!0)},zZ={get:$k(!0,!1)},gM=new WeakMap,mM=new WeakMap,xM=new WeakMap,HZ=new WeakMap;function jZ(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VZ(r){return r.__v_skip||!Object.isExtensible(r)?0:jZ(dZ(r))}function B0(r){return cf(r)?r:Kk(r,!1,pM,UZ,gM)}function WZ(r){return Kk(r,!1,NZ,GZ,mM)}function yM(r){return Kk(r,!0,OZ,zZ,xM)}function Kk(r,e,t,i,s){if(!gi(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const n=s.get(r);if(n)return n;const o=VZ(r);if(o===0)return r;const a=new Proxy(r,o===2?i:t);return s.set(r,a),a}function Dd(r){return cf(r)?Dd(r.__v_raw):!!(r&&r.__v_isReactive)}function cf(r){return!!(r&&r.__v_isReadonly)}function By(r){return!!(r&&r.__v_isShallow)}function vM(r){return Dd(r)||cf(r)}function yr(r){const e=r&&r.__v_raw;return e?yr(e):r}function EM(r){return My(r,"__v_skip",!0),r}const L0=r=>gi(r)?B0(r):r,Xk=r=>gi(r)?yM(r):r;function SM(r){Eu&&Ao&&(r=yr(r),dM(r.dep||(r.dep=Hk())))}function wM(r,e){r=yr(r),r.dep&&hA(r.dep)}function Pn(r){return!!(r&&r.__v_isRef===!0)}function $Z(r){return KZ(r,!1)}function KZ(r,e){return Pn(r)?r:new XZ(r,e)}class XZ{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:yr(e),this._value=t?e:L0(e)}get value(){return SM(this),this._value}set value(e){const t=this.__v_isShallow||By(e)||cf(e);e=t?e:yr(e),M0(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:L0(e),wM(this))}}function as(r){return Pn(r)?r.value:r}const YZ={get:(r,e,t)=>as(Reflect.get(r,e,t)),set:(r,e,t,i)=>{const s=r[e];return Pn(s)&&!Pn(t)?(s.value=t,!0):Reflect.set(r,e,t,i)}};function AM(r){return Dd(r)?r:new Proxy(r,YZ)}var bM;class qZ{constructor(e,t,i,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[bM]=!1,this._dirty=!0,this.effect=new jk(e,()=>{this._dirty||(this._dirty=!0,wM(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=yr(this);return SM(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}bM="__v_isReadonly";function QZ(r,e,t=!1){let i,s;const n=Zt(r);return n?(i=r,s=Do):(i=r.get,s=r.set),new qZ(i,s,n||!s,t)}function Su(r,e,t,i){let s;try{s=i?r(...i):r()}catch(n){Iv(n,e,t)}return s}function Co(r,e,t,i){if(Zt(r)){const n=Su(r,e,t,i);return n&&aM(n)&&n.catch(o=>{Iv(o,e,t)}),n}const s=[];for(let n=0;n<r.length;n++)s.push(Co(r[n],e,t,i));return s}function Iv(r,e,t,i=!0){const s=e?e.vnode:null;if(e){let n=e.parent;const o=e.proxy,a=t;for(;n;){const c=n.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](r,o,a)===!1)return}n=n.parent}const l=e.appContext.config.errorHandler;if(l){Su(l,null,10,[r,o,a]);return}}JZ(r,t,s,i)}function JZ(r,e,t,i=!0){console.error(r)}let U0=!1,dA=!1;const bn=[];let la=0;const Cd=[];let Xa=null,dc=0;const kM=Promise.resolve();let Yk=null;function ZZ(r){const e=Yk||kM;return r?e.then(this?r.bind(this):r):e}function eee(r){let e=la+1,t=bn.length;for(;e<t;){const i=e+t>>>1;G0(bn[i])<r?e=i+1:t=i}return e}function qk(r){(!bn.length||!bn.includes(r,U0&&r.allowRecurse?la+1:la))&&(r.id==null?bn.push(r):bn.splice(eee(r.id),0,r),TM())}function TM(){!U0&&!dA&&(dA=!0,Yk=kM.then(RM))}function tee(r){const e=bn.indexOf(r);e>la&&bn.splice(e,1)}function ree(r){er(r)?Cd.push(...r):(!Xa||!Xa.includes(r,r.allowRecurse?dc+1:dc))&&Cd.push(r),TM()}function kC(r,e=U0?la+1:0){for(;e<bn.length;e++){const t=bn[e];t&&t.pre&&(bn.splice(e,1),e--,t())}}function PM(r){if(Cd.length){const e=[...new Set(Cd)];if(Cd.length=0,Xa){Xa.push(...e);return}for(Xa=e,Xa.sort((t,i)=>G0(t)-G0(i)),dc=0;dc<Xa.length;dc++)Xa[dc]();Xa=null,dc=0}}const G0=r=>r.id==null?1/0:r.id,iee=(r,e)=>{const t=G0(r)-G0(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function RM(r){dA=!1,U0=!0,bn.sort(iee);const e=Do;try{for(la=0;la<bn.length;la++){const t=bn[la];t&&t.active!==!1&&Su(t,null,14)}}finally{la=0,bn.length=0,PM(),U0=!1,Yk=null,(bn.length||Cd.length)&&RM()}}function nee(r,e,...t){if(r.isUnmounted)return;const i=r.vnode.props||Fr;let s=t;const n=e.startsWith("update:"),o=n&&e.slice(7);if(o&&o in i){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:g}=i[d]||Fr;g&&(s=t.map(x=>x.trim())),f&&(s=t.map(gZ))}let a,l=i[a=lS(e)]||i[a=lS(uf(e))];!l&&n&&(l=i[a=lS(zf(e))]),l&&Co(l,r,6,s);const c=i[a+"Once"];if(c){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,Co(c,r,6,s)}}function DM(r,e,t=!1){const i=e.emitsCache,s=i.get(r);if(s!==void 0)return s;const n=r.emits;let o={},a=!1;if(!Zt(r)){const l=c=>{const d=DM(c,e,!0);d&&(a=!0,Yn(o,d))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!n&&!a?(gi(r)&&i.set(r,null),null):(er(n)?n.forEach(l=>o[l]=null):Yn(o,n),gi(r)&&i.set(r,o),o)}function Fv(r,e){return!r||!Dv(e)?!1:(e=e.slice(2).replace(/Once$/,""),or(r,e[0].toLowerCase()+e.slice(1))||or(r,zf(e))||or(r,e))}let Ns=null,Mv=null;function Ly(r){const e=Ns;return Ns=r,Mv=r&&r.type.__scopeId||null,e}function Qk(r){Mv=r}function Jk(){Mv=null}function Ih(r,e=Ns,t){if(!e||r._n)return r;const i=(...s)=>{i._d&&FC(-1);const n=Ly(e),o=r(...s);return Ly(n),i._d&&FC(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function cS(r){const{type:e,vnode:t,proxy:i,withProxy:s,props:n,propsOptions:[o],slots:a,attrs:l,emit:c,render:d,renderCache:f,data:g,setupState:x,ctx:E,inheritAttrs:P}=r;let b,D;const C=Ly(r);try{if(t.shapeFlag&4){const N=s||i;b=na(d.call(N,N,f,n,x,g,E)),D=l}else{const N=e;b=na(N.length>1?N(n,{attrs:l,slots:a,emit:c}):N(n,null)),D=e.props?l:see(l)}}catch(N){t0.length=0,Iv(N,r,1),b=Ji(hf)}let O=b;if(D&&P!==!1){const N=Object.keys(D),{shapeFlag:j}=O;N.length&&j&7&&(o&&N.some(Lk)&&(D=oee(D,o)),O=df(O,D))}return t.dirs&&(O=df(O),O.dirs=O.dirs?O.dirs.concat(t.dirs):t.dirs),t.transition&&(O.transition=t.transition),b=O,Ly(C),b}const see=r=>{let e;for(const t in r)(t==="class"||t==="style"||Dv(t))&&((e||(e={}))[t]=r[t]);return e},oee=(r,e)=>{const t={};for(const i in r)(!Lk(i)||!(i.slice(9)in e))&&(t[i]=r[i]);return t};function aee(r,e,t){const{props:i,children:s,component:n}=r,{props:o,children:a,patchFlag:l}=e,c=n.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?TC(i,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const g=d[f];if(o[g]!==i[g]&&!Fv(c,g))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?TC(i,o,c):!0:!!o;return!1}function TC(r,e,t){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let s=0;s<i.length;s++){const n=i[s];if(e[n]!==r[n]&&!Fv(t,n))return!0}return!1}function lee({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const uee=r=>r.__isSuspense;function cee(r,e){e&&e.pendingBranch?er(r)?e.effects.push(...r):e.effects.push(r):ree(r)}function hee(r,e){if(kn){let t=kn.provides;const i=kn.parent&&kn.parent.provides;i===t&&(t=kn.provides=Object.create(i)),t[r]=e}}function Zp(r,e,t=!1){const i=kn||Ns;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&r in s)return s[r];if(arguments.length>1)return t&&Zt(e)?e.call(i.proxy):e}}const PC={};function hS(r,e,t){return CM(r,e,t)}function CM(r,e,{immediate:t,deep:i,flush:s,onTrack:n,onTrigger:o}=Fr){const a=kn;let l,c=!1,d=!1;if(Pn(r)?(l=()=>r.value,c=By(r)):Dd(r)?(l=()=>r,i=!0):er(r)?(d=!0,c=r.some(D=>Dd(D)||By(D)),l=()=>r.map(D=>{if(Pn(D))return D.value;if(Dd(D))return hd(D);if(Zt(D))return Su(D,a,2)})):Zt(r)?e?l=()=>Su(r,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Co(r,a,3,[g])}:l=Do,e&&i){const D=l;l=()=>hd(D())}let f,g=D=>{f=b.onStop=()=>{Su(D,a,4)}};if(H0)return g=Do,e?t&&Co(e,a,3,[l(),d?[]:void 0,g]):l(),Do;let x=d?[]:PC;const E=()=>{if(!!b.active)if(e){const D=b.run();(i||c||(d?D.some((C,O)=>M0(C,x[O])):M0(D,x)))&&(f&&f(),Co(e,a,3,[D,x===PC?void 0:x,g]),x=D)}else b.run()};E.allowRecurse=!!e;let P;s==="sync"?P=E:s==="post"?P=()=>ls(E,a&&a.suspense):(E.pre=!0,a&&(E.id=a.uid),P=()=>qk(E));const b=new jk(l,P);return e?t?E():x=b.run():s==="post"?ls(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&Uk(a.scope.effects,b)}}function dee(r,e,t){const i=this.proxy,s=Dn(r)?r.includes(".")?OM(i,r):()=>i[r]:r.bind(i,i);let n;Zt(e)?n=e:(n=e.handler,t=e);const o=kn;ff(this);const a=CM(s,n.bind(i),t);return o?ff(o):Hc(),a}function OM(r,e){const t=e.split(".");return()=>{let i=r;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function hd(r,e){if(!gi(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),Pn(r))hd(r.value,e);else if(er(r))for(let t=0;t<r.length;t++)hd(r[t],e);else if(cZ(r)||Jp(r))r.forEach(t=>{hd(t,e)});else if(fZ(r))for(const t in r)hd(r[t],e);return r}function Go(r){return Zt(r)?{setup:r,name:r.name}:r}const e0=r=>!!r.type.__asyncLoader,NM=r=>r.type.__isKeepAlive;function fee(r,e){IM(r,"a",e)}function _ee(r,e){IM(r,"da",e)}function IM(r,e,t=kn){const i=r.__wdc||(r.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return r()});if(Bv(e,i,t),t){let s=t.parent;for(;s&&s.parent;)NM(s.parent.vnode)&&pee(i,e,t,s),s=s.parent}}function pee(r,e,t,i){const s=Bv(e,r,i,!0);MM(()=>{Uk(i[e],s)},t)}function Bv(r,e,t=kn,i=!1){if(t){const s=t[r]||(t[r]=[]),n=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Hf(),ff(t);const a=Co(e,t,r,o);return Hc(),jf(),a});return i?s.unshift(n):s.push(n),n}}const kl=r=>(e,t=kn)=>(!H0||r==="sp")&&Bv(r,e,t),gee=kl("bm"),FM=kl("m"),mee=kl("bu"),xee=kl("u"),yee=kl("bum"),MM=kl("um"),vee=kl("sp"),Eee=kl("rtg"),See=kl("rtc");function wee(r,e=kn){Bv("ec",r,e)}function ec(r,e,t,i){const s=r.dirs,n=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let l=a.dir[i];l&&(Hf(),Co(l,t,8,[r.el,a,r,e]),jf())}}const Aee=Symbol();function bee(r,e,t={},i,s){if(Ns.isCE||Ns.parent&&e0(Ns.parent)&&Ns.parent.isCE)return Ji("slot",e==="default"?null:{name:e},i&&i());let n=r[e];n&&n._c&&(n._d=!1),co();const o=n&&BM(n(t)),a=Fh(So,{key:t.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&r._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function BM(r){return r.some(e=>KM(e)?!(e.type===hf||e.type===So&&!BM(e.children)):!0)?r:null}const fA=r=>r?YM(r)?iT(r)||r.proxy:fA(r.parent):null,Uy=Yn(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>fA(r.parent),$root:r=>fA(r.root),$emit:r=>r.emit,$options:r=>Zk(r),$forceUpdate:r=>r.f||(r.f=()=>qk(r.update)),$nextTick:r=>r.n||(r.n=ZZ.bind(r.proxy)),$watch:r=>dee.bind(r)}),kee={get({_:r},e){const{ctx:t,setupState:i,data:s,props:n,accessCache:o,type:a,appContext:l}=r;let c;if(e[0]!=="$"){const x=o[e];if(x!==void 0)switch(x){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return n[e]}else{if(i!==Fr&&or(i,e))return o[e]=1,i[e];if(s!==Fr&&or(s,e))return o[e]=2,s[e];if((c=r.propsOptions[0])&&or(c,e))return o[e]=3,n[e];if(t!==Fr&&or(t,e))return o[e]=4,t[e];_A&&(o[e]=0)}}const d=Uy[e];let f,g;if(d)return e==="$attrs"&&Ls(r,"get",e),d(r);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==Fr&&or(t,e))return o[e]=4,t[e];if(g=l.config.globalProperties,or(g,e))return g[e]},set({_:r},e,t){const{data:i,setupState:s,ctx:n}=r;return s!==Fr&&or(s,e)?(s[e]=t,!0):i!==Fr&&or(i,e)?(i[e]=t,!0):or(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(n[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:n}},o){let a;return!!t[o]||r!==Fr&&or(r,o)||e!==Fr&&or(e,o)||(a=n[0])&&or(a,o)||or(i,o)||or(Uy,o)||or(s.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:or(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};let _A=!0;function Tee(r){const e=Zk(r),t=r.proxy,i=r.ctx;_A=!1,e.beforeCreate&&RC(e.beforeCreate,r,"bc");const{data:s,computed:n,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:f,mounted:g,beforeUpdate:x,updated:E,activated:P,deactivated:b,beforeDestroy:D,beforeUnmount:C,destroyed:O,unmounted:N,render:j,renderTracked:I,renderTriggered:M,errorCaptured:R,serverPrefetch:L,expose:K,inheritAttrs:Q,components:ue,directives:ae,filters:Re}=e;if(c&&Pee(c,i,null,r.appContext.config.unwrapInjectedRef),o)for(const Ve in o){const Fe=o[Ve];Zt(Fe)&&(i[Ve]=Fe.bind(t))}if(s){const Ve=s.call(t,t);gi(Ve)&&(r.data=B0(Ve))}if(_A=!0,n)for(const Ve in n){const Fe=n[Ve],nt=Zt(Fe)?Fe.bind(t,t):Zt(Fe.get)?Fe.get.bind(t,t):Do,dt=!Zt(Fe)&&Zt(Fe.set)?Fe.set.bind(t):Do,it=QM({get:nt,set:dt});Object.defineProperty(i,Ve,{enumerable:!0,configurable:!0,get:()=>it.value,set:bt=>it.value=bt})}if(a)for(const Ve in a)LM(a[Ve],i,t,Ve);if(l){const Ve=Zt(l)?l.call(t):l;Reflect.ownKeys(Ve).forEach(Fe=>{hee(Fe,Ve[Fe])})}d&&RC(d,r,"c");function rt(Ve,Fe){er(Fe)?Fe.forEach(nt=>Ve(nt.bind(t))):Fe&&Ve(Fe.bind(t))}if(rt(gee,f),rt(FM,g),rt(mee,x),rt(xee,E),rt(fee,P),rt(_ee,b),rt(wee,R),rt(See,I),rt(Eee,M),rt(yee,C),rt(MM,N),rt(vee,L),er(K))if(K.length){const Ve=r.exposed||(r.exposed={});K.forEach(Fe=>{Object.defineProperty(Ve,Fe,{get:()=>t[Fe],set:nt=>t[Fe]=nt})})}else r.exposed||(r.exposed={});j&&r.render===Do&&(r.render=j),Q!=null&&(r.inheritAttrs=Q),ue&&(r.components=ue),ae&&(r.directives=ae)}function Pee(r,e,t=Do,i=!1){er(r)&&(r=pA(r));for(const s in r){const n=r[s];let o;gi(n)?"default"in n?o=Zp(n.from||s,n.default,!0):o=Zp(n.from||s):o=Zp(n),Pn(o)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function RC(r,e,t){Co(er(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,t)}function LM(r,e,t,i){const s=i.includes(".")?OM(t,i):()=>t[i];if(Dn(r)){const n=e[r];Zt(n)&&hS(s,n)}else if(Zt(r))hS(s,r.bind(t));else if(gi(r))if(er(r))r.forEach(n=>LM(n,e,t,i));else{const n=Zt(r.handler)?r.handler.bind(t):e[r.handler];Zt(n)&&hS(s,n,r)}}function Zk(r){const e=r.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=r.appContext,a=n.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>Gy(l,c,o,!0)),Gy(l,e,o)),gi(e)&&n.set(e,l),l}function Gy(r,e,t,i=!1){const{mixins:s,extends:n}=e;n&&Gy(r,n,t,!0),s&&s.forEach(o=>Gy(r,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=Ree[o]||t&&t[o];r[o]=a?a(r[o],e[o]):e[o]}return r}const Ree={data:DC,props:oc,emits:oc,methods:oc,computed:oc,beforeCreate:Gn,created:Gn,beforeMount:Gn,mounted:Gn,beforeUpdate:Gn,updated:Gn,beforeDestroy:Gn,beforeUnmount:Gn,destroyed:Gn,unmounted:Gn,activated:Gn,deactivated:Gn,errorCaptured:Gn,serverPrefetch:Gn,components:oc,directives:oc,watch:Cee,provide:DC,inject:Dee};function DC(r,e){return e?r?function(){return Yn(Zt(r)?r.call(this,this):r,Zt(e)?e.call(this,this):e)}:e:r}function Dee(r,e){return oc(pA(r),pA(e))}function pA(r){if(er(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function Gn(r,e){return r?[...new Set([].concat(r,e))]:e}function oc(r,e){return r?Yn(Yn(Object.create(null),r),e):e}function Cee(r,e){if(!r)return e;if(!e)return r;const t=Yn(Object.create(null),r);for(const i in e)t[i]=Gn(r[i],e[i]);return t}function Oee(r,e,t,i=!1){const s={},n={};My(n,Lv,1),r.propsDefaults=Object.create(null),UM(r,e,s,n);for(const o in r.propsOptions[0])o in s||(s[o]=void 0);t?r.props=i?s:WZ(s):r.type.props?r.props=s:r.props=n,r.attrs=n}function Nee(r,e,t,i){const{props:s,attrs:n,vnode:{patchFlag:o}}=r,a=yr(s),[l]=r.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=r.vnode.dynamicProps;for(let f=0;f<d.length;f++){let g=d[f];if(Fv(r.emitsOptions,g))continue;const x=e[g];if(l)if(or(n,g))x!==n[g]&&(n[g]=x,c=!0);else{const E=uf(g);s[E]=gA(l,a,E,x,r,!1)}else x!==n[g]&&(n[g]=x,c=!0)}}}else{UM(r,e,s,n)&&(c=!0);let d;for(const f in a)(!e||!or(e,f)&&((d=zf(f))===f||!or(e,d)))&&(l?t&&(t[f]!==void 0||t[d]!==void 0)&&(s[f]=gA(l,a,f,void 0,r,!0)):delete s[f]);if(n!==a)for(const f in n)(!e||!or(e,f)&&!0)&&(delete n[f],c=!0)}c&&_l(r,"set","$attrs")}function UM(r,e,t,i){const[s,n]=r.propsOptions;let o=!1,a;if(e)for(let l in e){if(Nx(l))continue;const c=e[l];let d;s&&or(s,d=uf(l))?!n||!n.includes(d)?t[d]=c:(a||(a={}))[d]=c:Fv(r.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(n){const l=yr(t),c=a||Fr;for(let d=0;d<n.length;d++){const f=n[d];t[f]=gA(s,l,f,c[f],r,!or(c,f))}}return o}function gA(r,e,t,i,s,n){const o=r[t];if(o!=null){const a=or(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&Zt(l)){const{propsDefaults:c}=s;t in c?i=c[t]:(ff(s),i=c[t]=l.call(null,e),Hc())}else i=l}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===zf(t))&&(i=!0))}return i}function GM(r,e,t=!1){const i=e.propsCache,s=i.get(r);if(s)return s;const n=r.props,o={},a=[];let l=!1;if(!Zt(r)){const d=f=>{l=!0;const[g,x]=GM(f,e,!0);Yn(o,g),x&&a.push(...x)};!t&&e.mixins.length&&e.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!n&&!l)return gi(r)&&i.set(r,Rd),Rd;if(er(n))for(let d=0;d<n.length;d++){const f=uf(n[d]);CC(f)&&(o[f]=Fr)}else if(n)for(const d in n){const f=uf(d);if(CC(f)){const g=n[d],x=o[f]=er(g)||Zt(g)?{type:g}:g;if(x){const E=IC(Boolean,x.type),P=IC(String,x.type);x[0]=E>-1,x[1]=P<0||E<P,(E>-1||or(x,"default"))&&a.push(f)}}}const c=[o,a];return gi(r)&&i.set(r,c),c}function CC(r){return r[0]!=="$"}function OC(r){const e=r&&r.toString().match(/^\s*function (\w+)/);return e?e[1]:r===null?"null":""}function NC(r,e){return OC(r)===OC(e)}function IC(r,e){return er(e)?e.findIndex(t=>NC(t,r)):Zt(e)&&NC(e,r)?0:-1}const zM=r=>r[0]==="_"||r==="$stable",eT=r=>er(r)?r.map(na):[na(r)],Iee=(r,e,t)=>{if(e._n)return e;const i=Ih((...s)=>eT(e(...s)),t);return i._c=!1,i},HM=(r,e,t)=>{const i=r._ctx;for(const s in r){if(zM(s))continue;const n=r[s];if(Zt(n))e[s]=Iee(s,n,i);else if(n!=null){const o=eT(n);e[s]=()=>o}}},jM=(r,e)=>{const t=eT(e);r.slots.default=()=>t},Fee=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=yr(e),My(e,"_",t)):HM(e,r.slots={})}else r.slots={},e&&jM(r,e);My(r.slots,Lv,1)},Mee=(r,e,t)=>{const{vnode:i,slots:s}=r;let n=!0,o=Fr;if(i.shapeFlag&32){const a=e._;a?t&&a===1?n=!1:(Yn(s,e),!t&&a===1&&delete s._):(n=!e.$stable,HM(e,s)),o=e}else e&&(jM(r,e),o={default:1});if(n)for(const a in s)!zM(a)&&!(a in o)&&delete s[a]};function VM(){return{app:null,config:{isNativeTag:aZ,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bee=0;function Lee(r,e){return function(i,s=null){Zt(i)||(i=Object.assign({},i)),s!=null&&!gi(s)&&(s=null);const n=VM(),o=new Set;let a=!1;const l=n.app={_uid:Bee++,_component:i,_props:s,_container:null,_context:n,_instance:null,version:rte,get config(){return n.config},set config(c){},use(c,...d){return o.has(c)||(c&&Zt(c.install)?(o.add(c),c.install(l,...d)):Zt(c)&&(o.add(c),c(l,...d))),l},mixin(c){return n.mixins.includes(c)||n.mixins.push(c),l},component(c,d){return d?(n.components[c]=d,l):n.components[c]},directive(c,d){return d?(n.directives[c]=d,l):n.directives[c]},mount(c,d,f){if(!a){const g=Ji(i,s);return g.appContext=n,d&&e?e(g,c):r(g,c,f),a=!0,l._container=c,c.__vue_app__=l,iT(g.component)||g.component.proxy}},unmount(){a&&(r(null,l._container),delete l._container.__vue_app__)},provide(c,d){return n.provides[c]=d,l}};return l}}function mA(r,e,t,i,s=!1){if(er(r)){r.forEach((g,x)=>mA(g,e&&(er(e)?e[x]:e),t,i,s));return}if(e0(i)&&!s)return;const n=i.shapeFlag&4?iT(i.component)||i.component.proxy:i.el,o=s?null:n,{i:a,r:l}=r,c=e&&e.r,d=a.refs===Fr?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(Dn(c)?(d[c]=null,or(f,c)&&(f[c]=null)):Pn(c)&&(c.value=null)),Zt(l))Su(l,a,12,[o,d]);else{const g=Dn(l),x=Pn(l);if(g||x){const E=()=>{if(r.f){const P=g?d[l]:l.value;s?er(P)&&Uk(P,n):er(P)?P.includes(n)||P.push(n):g?(d[l]=[n],or(f,l)&&(f[l]=d[l])):(l.value=[n],r.k&&(d[r.k]=l.value))}else g?(d[l]=o,or(f,l)&&(f[l]=o)):x&&(l.value=o,r.k&&(d[r.k]=o))};o?(E.id=-1,ls(E,t)):E()}}}const ls=cee;function Uee(r){return Gee(r)}function Gee(r,e){const t=mZ();t.__VUE__=!0;const{insert:i,remove:s,patchProp:n,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:f,nextSibling:g,setScopeId:x=Do,cloneNode:E,insertStaticContent:P}=r,b=(F,z,W,te=null,de=null,ye=null,oe=!1,le=null,we=!!z.dynamicChildren)=>{if(F===z)return;F&&!op(F,z)&&(te=fe(F),ee(F,de,ye,!0),F=null),z.patchFlag===-2&&(we=!1,z.dynamicChildren=null);const{type:De,ref:Ye,shapeFlag:$e}=z;switch(De){case tT:D(F,z,W,te);break;case hf:C(F,z,W,te);break;case dS:F==null&&O(z,W,te,oe);break;case So:ae(F,z,W,te,de,ye,oe,le,we);break;default:$e&1?I(F,z,W,te,de,ye,oe,le,we):$e&6?Re(F,z,W,te,de,ye,oe,le,we):($e&64||$e&128)&&De.process(F,z,W,te,de,ye,oe,le,we,He)}Ye!=null&&de&&mA(Ye,F&&F.ref,ye,z||F,!z)},D=(F,z,W,te)=>{if(F==null)i(z.el=a(z.children),W,te);else{const de=z.el=F.el;z.children!==F.children&&c(de,z.children)}},C=(F,z,W,te)=>{F==null?i(z.el=l(z.children||""),W,te):z.el=F.el},O=(F,z,W,te)=>{[F.el,F.anchor]=P(F.children,z,W,te,F.el,F.anchor)},N=({el:F,anchor:z},W,te)=>{let de;for(;F&&F!==z;)de=g(F),i(F,W,te),F=de;i(z,W,te)},j=({el:F,anchor:z})=>{let W;for(;F&&F!==z;)W=g(F),s(F),F=W;s(z)},I=(F,z,W,te,de,ye,oe,le,we)=>{oe=oe||z.type==="svg",F==null?M(z,W,te,de,ye,oe,le,we):K(F,z,de,ye,oe,le,we)},M=(F,z,W,te,de,ye,oe,le)=>{let we,De;const{type:Ye,props:$e,shapeFlag:Qe,transition:Ke,patchFlag:tt,dirs:_t}=F;if(F.el&&E!==void 0&&tt===-1)we=F.el=E(F.el);else{if(we=F.el=o(F.type,ye,$e&&$e.is,$e),Qe&8?d(we,F.children):Qe&16&&L(F.children,we,null,te,de,ye&&Ye!=="foreignObject",oe,le),_t&&ec(F,null,te,"created"),$e){for(const St in $e)St!=="value"&&!Nx(St)&&n(we,St,null,$e[St],ye,F.children,te,de,Se);"value"in $e&&n(we,"value",null,$e.value),(De=$e.onVnodeBeforeMount)&&Zo(De,te,F)}R(we,F,F.scopeId,oe,te)}_t&&ec(F,null,te,"beforeMount");const st=(!de||de&&!de.pendingBranch)&&Ke&&!Ke.persisted;st&&Ke.beforeEnter(we),i(we,z,W),((De=$e&&$e.onVnodeMounted)||st||_t)&&ls(()=>{De&&Zo(De,te,F),st&&Ke.enter(we),_t&&ec(F,null,te,"mounted")},de)},R=(F,z,W,te,de)=>{if(W&&x(F,W),te)for(let ye=0;ye<te.length;ye++)x(F,te[ye]);if(de){let ye=de.subTree;if(z===ye){const oe=de.vnode;R(F,oe,oe.scopeId,oe.slotScopeIds,de.parent)}}},L=(F,z,W,te,de,ye,oe,le,we=0)=>{for(let De=we;De<F.length;De++){const Ye=F[De]=le?Zl(F[De]):na(F[De]);b(null,Ye,z,W,te,de,ye,oe,le)}},K=(F,z,W,te,de,ye,oe)=>{const le=z.el=F.el;let{patchFlag:we,dynamicChildren:De,dirs:Ye}=z;we|=F.patchFlag&16;const $e=F.props||Fr,Qe=z.props||Fr;let Ke;W&&tc(W,!1),(Ke=Qe.onVnodeBeforeUpdate)&&Zo(Ke,W,z,F),Ye&&ec(z,F,W,"beforeUpdate"),W&&tc(W,!0);const tt=de&&z.type!=="foreignObject";if(De?Q(F.dynamicChildren,De,le,W,te,tt,ye):oe||nt(F,z,le,null,W,te,tt,ye,!1),we>0){if(we&16)ue(le,z,$e,Qe,W,te,de);else if(we&2&&$e.class!==Qe.class&&n(le,"class",null,Qe.class,de),we&4&&n(le,"style",$e.style,Qe.style,de),we&8){const _t=z.dynamicProps;for(let st=0;st<_t.length;st++){const St=_t[st],Ot=$e[St],Rt=Qe[St];(Rt!==Ot||St==="value")&&n(le,St,Ot,Rt,de,F.children,W,te,Se)}}we&1&&F.children!==z.children&&d(le,z.children)}else!oe&&De==null&&ue(le,z,$e,Qe,W,te,de);((Ke=Qe.onVnodeUpdated)||Ye)&&ls(()=>{Ke&&Zo(Ke,W,z,F),Ye&&ec(z,F,W,"updated")},te)},Q=(F,z,W,te,de,ye,oe)=>{for(let le=0;le<z.length;le++){const we=F[le],De=z[le],Ye=we.el&&(we.type===So||!op(we,De)||we.shapeFlag&70)?f(we.el):W;b(we,De,Ye,null,te,de,ye,oe,!0)}},ue=(F,z,W,te,de,ye,oe)=>{if(W!==te){for(const le in te){if(Nx(le))continue;const we=te[le],De=W[le];we!==De&&le!=="value"&&n(F,le,De,we,oe,z.children,de,ye,Se)}if(W!==Fr)for(const le in W)!Nx(le)&&!(le in te)&&n(F,le,W[le],null,oe,z.children,de,ye,Se);"value"in te&&n(F,"value",W.value,te.value)}},ae=(F,z,W,te,de,ye,oe,le,we)=>{const De=z.el=F?F.el:a(""),Ye=z.anchor=F?F.anchor:a("");let{patchFlag:$e,dynamicChildren:Qe,slotScopeIds:Ke}=z;Ke&&(le=le?le.concat(Ke):Ke),F==null?(i(De,W,te),i(Ye,W,te),L(z.children,W,Ye,de,ye,oe,le,we)):$e>0&&$e&64&&Qe&&F.dynamicChildren?(Q(F.dynamicChildren,Qe,W,de,ye,oe,le),(z.key!=null||de&&z===de.subTree)&&WM(F,z,!0)):nt(F,z,W,Ye,de,ye,oe,le,we)},Re=(F,z,W,te,de,ye,oe,le,we)=>{z.slotScopeIds=le,F==null?z.shapeFlag&512?de.ctx.activate(z,W,te,oe,we):Ue(z,W,te,de,ye,oe,we):rt(F,z,we)},Ue=(F,z,W,te,de,ye,oe)=>{const le=F.component=qee(F,te,de);if(NM(F)&&(le.ctx.renderer=He),Qee(le),le.asyncDep){if(de&&de.registerDep(le,Ve),!F.el){const we=le.subTree=Ji(hf);C(null,we,z,W)}return}Ve(le,F,z,W,de,ye,oe)},rt=(F,z,W)=>{const te=z.component=F.component;if(aee(F,z,W))if(te.asyncDep&&!te.asyncResolved){Fe(te,z,W);return}else te.next=z,tee(te.update),te.update();else z.el=F.el,te.vnode=z},Ve=(F,z,W,te,de,ye,oe)=>{const le=()=>{if(F.isMounted){let{next:Ye,bu:$e,u:Qe,parent:Ke,vnode:tt}=F,_t=Ye,st;tc(F,!1),Ye?(Ye.el=tt.el,Fe(F,Ye,oe)):Ye=tt,$e&&uS($e),(st=Ye.props&&Ye.props.onVnodeBeforeUpdate)&&Zo(st,Ke,Ye,tt),tc(F,!0);const St=cS(F),Ot=F.subTree;F.subTree=St,b(Ot,St,f(Ot.el),fe(Ot),F,de,ye),Ye.el=St.el,_t===null&&lee(F,St.el),Qe&&ls(Qe,de),(st=Ye.props&&Ye.props.onVnodeUpdated)&&ls(()=>Zo(st,Ke,Ye,tt),de)}else{let Ye;const{el:$e,props:Qe}=z,{bm:Ke,m:tt,parent:_t}=F,st=e0(z);if(tc(F,!1),Ke&&uS(Ke),!st&&(Ye=Qe&&Qe.onVnodeBeforeMount)&&Zo(Ye,_t,z),tc(F,!0),$e&&Le){const St=()=>{F.subTree=cS(F),Le($e,F.subTree,F,de,null)};st?z.type.__asyncLoader().then(()=>!F.isUnmounted&&St()):St()}else{const St=F.subTree=cS(F);b(null,St,W,te,F,de,ye),z.el=St.el}if(tt&&ls(tt,de),!st&&(Ye=Qe&&Qe.onVnodeMounted)){const St=z;ls(()=>Zo(Ye,_t,St),de)}(z.shapeFlag&256||_t&&e0(_t.vnode)&&_t.vnode.shapeFlag&256)&&F.a&&ls(F.a,de),F.isMounted=!0,z=W=te=null}},we=F.effect=new jk(le,()=>qk(De),F.scope),De=F.update=()=>we.run();De.id=F.uid,tc(F,!0),De()},Fe=(F,z,W)=>{z.component=F;const te=F.vnode.props;F.vnode=z,F.next=null,Nee(F,z.props,te,W),Mee(F,z.children,W),Hf(),kC(),jf()},nt=(F,z,W,te,de,ye,oe,le,we=!1)=>{const De=F&&F.children,Ye=F?F.shapeFlag:0,$e=z.children,{patchFlag:Qe,shapeFlag:Ke}=z;if(Qe>0){if(Qe&128){it(De,$e,W,te,de,ye,oe,le,we);return}else if(Qe&256){dt(De,$e,W,te,de,ye,oe,le,we);return}}Ke&8?(Ye&16&&Se(De,de,ye),$e!==De&&d(W,$e)):Ye&16?Ke&16?it(De,$e,W,te,de,ye,oe,le,we):Se(De,de,ye,!0):(Ye&8&&d(W,""),Ke&16&&L($e,W,te,de,ye,oe,le,we))},dt=(F,z,W,te,de,ye,oe,le,we)=>{F=F||Rd,z=z||Rd;const De=F.length,Ye=z.length,$e=Math.min(De,Ye);let Qe;for(Qe=0;Qe<$e;Qe++){const Ke=z[Qe]=we?Zl(z[Qe]):na(z[Qe]);b(F[Qe],Ke,W,null,de,ye,oe,le,we)}De>Ye?Se(F,de,ye,!0,!1,$e):L(z,W,te,de,ye,oe,le,we,$e)},it=(F,z,W,te,de,ye,oe,le,we)=>{let De=0;const Ye=z.length;let $e=F.length-1,Qe=Ye-1;for(;De<=$e&&De<=Qe;){const Ke=F[De],tt=z[De]=we?Zl(z[De]):na(z[De]);if(op(Ke,tt))b(Ke,tt,W,null,de,ye,oe,le,we);else break;De++}for(;De<=$e&&De<=Qe;){const Ke=F[$e],tt=z[Qe]=we?Zl(z[Qe]):na(z[Qe]);if(op(Ke,tt))b(Ke,tt,W,null,de,ye,oe,le,we);else break;$e--,Qe--}if(De>$e){if(De<=Qe){const Ke=Qe+1,tt=Ke<Ye?z[Ke].el:te;for(;De<=Qe;)b(null,z[De]=we?Zl(z[De]):na(z[De]),W,tt,de,ye,oe,le,we),De++}}else if(De>Qe)for(;De<=$e;)ee(F[De],de,ye,!0),De++;else{const Ke=De,tt=De,_t=new Map;for(De=tt;De<=Qe;De++){const mt=z[De]=we?Zl(z[De]):na(z[De]);mt.key!=null&&_t.set(mt.key,De)}let st,St=0;const Ot=Qe-tt+1;let Rt=!1,Mt=0;const Ie=new Array(Ot);for(De=0;De<Ot;De++)Ie[De]=0;for(De=Ke;De<=$e;De++){const mt=F[De];if(St>=Ot){ee(mt,de,ye,!0);continue}let Et;if(mt.key!=null)Et=_t.get(mt.key);else for(st=tt;st<=Qe;st++)if(Ie[st-tt]===0&&op(mt,z[st])){Et=st;break}Et===void 0?ee(mt,de,ye,!0):(Ie[Et-tt]=De+1,Et>=Mt?Mt=Et:Rt=!0,b(mt,z[Et],W,null,de,ye,oe,le,we),St++)}const gt=Rt?zee(Ie):Rd;for(st=gt.length-1,De=Ot-1;De>=0;De--){const mt=tt+De,Et=z[mt],Ht=mt+1<Ye?z[mt+1].el:te;Ie[De]===0?b(null,Et,W,Ht,de,ye,oe,le,we):Rt&&(st<0||De!==gt[st]?bt(Et,W,Ht,2):st--)}}},bt=(F,z,W,te,de=null)=>{const{el:ye,type:oe,transition:le,children:we,shapeFlag:De}=F;if(De&6){bt(F.component.subTree,z,W,te);return}if(De&128){F.suspense.move(z,W,te);return}if(De&64){oe.move(F,z,W,He);return}if(oe===So){i(ye,z,W);for(let $e=0;$e<we.length;$e++)bt(we[$e],z,W,te);i(F.anchor,z,W);return}if(oe===dS){N(F,z,W);return}if(te!==2&&De&1&&le)if(te===0)le.beforeEnter(ye),i(ye,z,W),ls(()=>le.enter(ye),de);else{const{leave:$e,delayLeave:Qe,afterLeave:Ke}=le,tt=()=>i(ye,z,W),_t=()=>{$e(ye,()=>{tt(),Ke&&Ke()})};Qe?Qe(ye,tt,_t):_t()}else i(ye,z,W)},ee=(F,z,W,te=!1,de=!1)=>{const{type:ye,props:oe,ref:le,children:we,dynamicChildren:De,shapeFlag:Ye,patchFlag:$e,dirs:Qe}=F;if(le!=null&&mA(le,null,W,F,!0),Ye&256){z.ctx.deactivate(F);return}const Ke=Ye&1&&Qe,tt=!e0(F);let _t;if(tt&&(_t=oe&&oe.onVnodeBeforeUnmount)&&Zo(_t,z,F),Ye&6)Ee(F.component,W,te);else{if(Ye&128){F.suspense.unmount(W,te);return}Ke&&ec(F,null,z,"beforeUnmount"),Ye&64?F.type.remove(F,z,W,de,He,te):De&&(ye!==So||$e>0&&$e&64)?Se(De,z,W,!1,!0):(ye===So&&$e&384||!de&&Ye&16)&&Se(we,z,W),te&&ne(F)}(tt&&(_t=oe&&oe.onVnodeUnmounted)||Ke)&&ls(()=>{_t&&Zo(_t,z,F),Ke&&ec(F,null,z,"unmounted")},W)},ne=F=>{const{type:z,el:W,anchor:te,transition:de}=F;if(z===So){se(W,te);return}if(z===dS){j(F);return}const ye=()=>{s(W),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(F.shapeFlag&1&&de&&!de.persisted){const{leave:oe,delayLeave:le}=de,we=()=>oe(W,ye);le?le(F.el,ye,we):we()}else ye()},se=(F,z)=>{let W;for(;F!==z;)W=g(F),s(F),F=W;s(z)},Ee=(F,z,W)=>{const{bum:te,scope:de,update:ye,subTree:oe,um:le}=F;te&&uS(te),de.stop(),ye&&(ye.active=!1,ee(oe,F,z,W)),le&&ls(le,z),ls(()=>{F.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},Se=(F,z,W,te=!1,de=!1,ye=0)=>{for(let oe=ye;oe<F.length;oe++)ee(F[oe],z,W,te,de)},fe=F=>F.shapeFlag&6?fe(F.component.subTree):F.shapeFlag&128?F.suspense.next():g(F.anchor||F.el),Pe=(F,z,W)=>{F==null?z._vnode&&ee(z._vnode,null,null,!0):b(z._vnode||null,F,z,null,null,null,W),kC(),PM(),z._vnode=F},He={p:b,um:ee,m:bt,r:ne,mt:Ue,mc:L,pc:nt,pbc:Q,n:fe,o:r};let Z,Le;return e&&([Z,Le]=e(He)),{render:Pe,hydrate:Z,createApp:Lee(Pe,Z)}}function tc({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function WM(r,e,t=!1){const i=r.children,s=e.children;if(er(i)&&er(s))for(let n=0;n<i.length;n++){const o=i[n];let a=s[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[n]=Zl(s[n]),a.el=o.el),t||WM(o,a))}}function zee(r){const e=r.slice(),t=[0];let i,s,n,o,a;const l=r.length;for(i=0;i<l;i++){const c=r[i];if(c!==0){if(s=t[t.length-1],r[s]<c){e[i]=s,t.push(i);continue}for(n=0,o=t.length-1;n<o;)a=n+o>>1,r[t[a]]<c?n=a+1:o=a;c<r[t[n]]&&(n>0&&(e[i]=t[n-1]),t[n]=i)}}for(n=t.length,o=t[n-1];n-- >0;)t[n]=o,o=e[o];return t}const Hee=r=>r.__isTeleport,So=Symbol(void 0),tT=Symbol(void 0),hf=Symbol(void 0),dS=Symbol(void 0),t0=[];let To=null;function co(r=!1){t0.push(To=r?null:[])}function jee(){t0.pop(),To=t0[t0.length-1]||null}let z0=1;function FC(r){z0+=r}function $M(r){return r.dynamicChildren=z0>0?To||Rd:null,jee(),z0>0&&To&&To.push(r),r}function Ug(r,e,t,i,s,n){return $M(Zr(r,e,t,i,s,n,!0))}function Fh(r,e,t,i,s){return $M(Ji(r,e,t,i,s,!0))}function KM(r){return r?r.__v_isVNode===!0:!1}function op(r,e){return r.type===e.type&&r.key===e.key}const Lv="__vInternal",XM=({key:r})=>r!=null?r:null,Ix=({ref:r,ref_key:e,ref_for:t})=>r!=null?Dn(r)||Pn(r)||Zt(r)?{i:Ns,r,k:e,f:!!t}:r:null;function Zr(r,e=null,t=null,i=0,s=null,n=r===So?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&XM(e),ref:e&&Ix(e),scopeId:Mv,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(rT(l,t),n&128&&r.normalize(l)):t&&(l.shapeFlag|=Dn(t)?8:16),z0>0&&!o&&To&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&To.push(l),l}const Ji=Vee;function Vee(r,e=null,t=null,i=0,s=null,n=!1){if((!r||r===Aee)&&(r=hf),KM(r)){const a=df(r,e,!0);return t&&rT(a,t),z0>0&&!n&&To&&(a.shapeFlag&6?To[To.indexOf(r)]=a:To.push(a)),a.patchFlag|=-2,a}if(tte(r)&&(r=r.__vccOpts),e){e=Wee(e);let{class:a,style:l}=e;a&&!Dn(a)&&(e.class=Rv(a)),gi(l)&&(vM(l)&&!er(l)&&(l=Yn({},l)),e.style=Pv(l))}const o=Dn(r)?1:uee(r)?128:Hee(r)?64:gi(r)?4:Zt(r)?2:0;return Zr(r,e,t,i,s,o,n,!0)}function Wee(r){return r?vM(r)||Lv in r?Yn({},r):r:null}function df(r,e,t=!1){const{props:i,ref:s,patchFlag:n,children:o}=r,a=e?Kee(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:a,key:a&&XM(a),ref:e&&e.ref?t&&s?er(s)?s.concat(Ix(e)):[s,Ix(e)]:Ix(e):s,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==So?n===-1?16:n|16:n,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&df(r.ssContent),ssFallback:r.ssFallback&&df(r.ssFallback),el:r.el,anchor:r.anchor}}function $ee(r=" ",e=0){return Ji(tT,null,r,e)}function na(r){return r==null||typeof r=="boolean"?Ji(hf):er(r)?Ji(So,null,r.slice()):typeof r=="object"?Zl(r):Ji(tT,null,String(r))}function Zl(r){return r.el===null||r.memo?r:df(r)}function rT(r,e){let t=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(er(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),rT(r,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(Lv in e)?e._ctx=Ns:s===3&&Ns&&(Ns.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else Zt(e)?(e={default:e,_ctx:Ns},t=32):(e=String(e),i&64?(t=16,e=[$ee(e)]):t=8);r.children=e,r.shapeFlag|=t}function Kee(...r){const e={};for(let t=0;t<r.length;t++){const i=r[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Rv([e.class,i.class]));else if(s==="style")e.style=Pv([e.style,i.style]);else if(Dv(s)){const n=e[s],o=i[s];o&&n!==o&&!(er(n)&&n.includes(o))&&(e[s]=n?[].concat(n,o):o)}else s!==""&&(e[s]=i[s])}return e}function Zo(r,e,t,i=null){Co(r,e,7,[t,i])}const Xee=VM();let Yee=0;function qee(r,e,t){const i=r.type,s=(e?e.appContext:r.appContext)||Xee,n={uid:Yee++,vnode:r,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new xZ(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:GM(i,s),emitsOptions:DM(i,s),emit:null,emitted:null,propsDefaults:Fr,inheritAttrs:i.inheritAttrs,ctx:Fr,data:Fr,props:Fr,attrs:Fr,slots:Fr,refs:Fr,setupState:Fr,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=nee.bind(null,n),r.ce&&r.ce(n),n}let kn=null;const ff=r=>{kn=r,r.scope.on()},Hc=()=>{kn&&kn.scope.off(),kn=null};function YM(r){return r.vnode.shapeFlag&4}let H0=!1;function Qee(r,e=!1){H0=e;const{props:t,children:i}=r.vnode,s=YM(r);Oee(r,t,s,e),Fee(r,i);const n=s?Jee(r,e):void 0;return H0=!1,n}function Jee(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=EM(new Proxy(r.ctx,kee));const{setup:i}=t;if(i){const s=r.setupContext=i.length>1?ete(r):null;ff(r),Hf();const n=Su(i,r,0,[r.props,s]);if(jf(),Hc(),aM(n)){if(n.then(Hc,Hc),e)return n.then(o=>{MC(r,o,e)}).catch(o=>{Iv(o,r,0)});r.asyncDep=n}else MC(r,n,e)}else qM(r,e)}function MC(r,e,t){Zt(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:gi(e)&&(r.setupState=AM(e)),qM(r,t)}let BC;function qM(r,e,t){const i=r.type;if(!r.render){if(!e&&BC&&!i.render){const s=i.template||Zk(r).template;if(s){const{isCustomElement:n,compilerOptions:o}=r.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Yn(Yn({isCustomElement:n,delimiters:a},o),l);i.render=BC(s,c)}}r.render=i.render||Do}ff(r),Hf(),Tee(r),jf(),Hc()}function Zee(r){return new Proxy(r.attrs,{get(e,t){return Ls(r,"get","$attrs"),e[t]}})}function ete(r){const e=i=>{r.exposed=i||{}};let t;return{get attrs(){return t||(t=Zee(r))},slots:r.slots,emit:r.emit,expose:e}}function iT(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(AM(EM(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in Uy)return Uy[t](r)}}))}function tte(r){return Zt(r)&&"__vccOpts"in r}const QM=(r,e)=>QZ(r,e,H0),rte="3.2.39",ite="http://www.w3.org/2000/svg",fc=typeof document<"u"?document:null,LC=fc&&fc.createElement("template"),nte={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,i)=>{const s=e?fc.createElementNS(ite,r):fc.createElement(r,t?{is:t}:void 0);return r==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:r=>fc.createTextNode(r),createComment:r=>fc.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>fc.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},cloneNode(r){const e=r.cloneNode(!0);return"_value"in r&&(e._value=r._value),e},insertStaticContent(r,e,t,i,s,n){const o=t?t.previousSibling:e.lastChild;if(s&&(s===n||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===n||!(s=s.nextSibling)););else{LC.innerHTML=i?`<svg>${r}</svg>`:r;const a=LC.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function ste(r,e,t){const i=r._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function ote(r,e,t){const i=r.style,s=Dn(t);if(t&&!s){for(const n in t)xA(i,n,t[n]);if(e&&!Dn(e))for(const n in e)t[n]==null&&xA(i,n,"")}else{const n=i.display;s?e!==t&&(i.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(i.display=n)}}const UC=/\s*!important$/;function xA(r,e,t){if(er(t))t.forEach(i=>xA(r,e,i));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const i=ate(r,e);UC.test(t)?r.setProperty(zf(i),t.replace(UC,""),"important"):r[i]=t}}const GC=["Webkit","Moz","ms"],fS={};function ate(r,e){const t=fS[e];if(t)return t;let i=uf(e);if(i!=="filter"&&i in r)return fS[e]=i;i=lM(i);for(let s=0;s<GC.length;s++){const n=GC[s]+i;if(n in r)return fS[e]=n}return e}const zC="http://www.w3.org/1999/xlink";function lte(r,e,t,i,s){if(i&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(zC,e.slice(6,e.length)):r.setAttributeNS(zC,e,t);else{const n=iZ(e);t==null||n&&!oM(t)?r.removeAttribute(e):r.setAttribute(e,n?"":t)}}function ute(r,e,t,i,s,n,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,n),r[e]=t==null?"":t;return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=t;const l=t==null?"":t;(r.value!==l||r.tagName==="OPTION")&&(r.value=l),t==null&&r.removeAttribute(e);return}let a=!1;if(t===""||t==null){const l=typeof r[e];l==="boolean"?t=oM(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{r[e]=t}catch{}a&&r.removeAttribute(e)}const[JM,cte]=(()=>{let r=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(r=performance.now.bind(performance));const t=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(t&&Number(t[1])<=53)}return[r,e]})();let yA=0;const hte=Promise.resolve(),dte=()=>{yA=0},fte=()=>yA||(hte.then(dte),yA=JM());function _te(r,e,t,i){r.addEventListener(e,t,i)}function pte(r,e,t,i){r.removeEventListener(e,t,i)}function gte(r,e,t,i,s=null){const n=r._vei||(r._vei={}),o=n[e];if(i&&o)o.value=i;else{const[a,l]=mte(e);if(i){const c=n[e]=xte(i,s);_te(r,a,c,l)}else o&&(pte(r,a,o,l),n[e]=void 0)}}const HC=/(?:Once|Passive|Capture)$/;function mte(r){let e;if(HC.test(r)){e={};let i;for(;i=r.match(HC);)r=r.slice(0,r.length-i[0].length),e[i[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):zf(r.slice(2)),e]}function xte(r,e){const t=i=>{const s=i.timeStamp||JM();(cte||s>=t.attached-1)&&Co(yte(i,t.value),e,5,[i])};return t.value=r,t.attached=fte(),t}function yte(r,e){if(er(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const jC=/^on[a-z]/,vte=(r,e,t,i,s=!1,n,o,a,l)=>{e==="class"?ste(r,i,s):e==="style"?ote(r,t,i):Dv(e)?Lk(e)||gte(r,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ete(r,e,i,s))?ute(r,e,i,n,o,a,l):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),lte(r,e,i,s))};function Ete(r,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in r&&jC.test(e)&&Zt(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||jC.test(e)&&Dn(t)?!1:e in r}const Ste=Yn({patchProp:vte},nte);let VC;function wte(){return VC||(VC=Uee(Ste))}const ZM=(...r)=>{const e=wte().createApp(...r),{mount:t}=e;return e.mount=i=>{const s=Ate(i);if(!s)return;const n=e._component;!Zt(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Ate(r){return Dn(r)?document.querySelector(r):r}const bte=Go({__name:"overlay",props:{outlines:null},setup(r){const e=r,t=QM(()=>{if(!e.outlines.length)return{display:"none"};const i=e.outlines[0];return{top:i.top-1,left:i.left-1,width:i.width+2,height:i.height+2}});return(i,s)=>(co(),Ug("div",{class:"outline",style:Pv(as(t))},null,4))}});const Uv=(r,e)=>{const t=r.__vccOpts||r;for(const[i,s]of e)t[i]=s;return t},kte=Uv(bte,[["__scopeId","data-v-5b94039b"]]);class Tte extends zt{constructor(t){super();u(this,"outlines",al([]));u(this,"el");this.container=t,this.el=document.createElement("div"),Object.assign(this.el.style,{position:"absolute",top:"0",left:"0"}),this.container.appendChild(this.el),this.mount()}mount(){const t=ZM(kte,{outlines:this.outlines});t.mount(this.el),this._register(sn(t.unmount))}}class Pte{constructor(e){u(this,"userInputEvents");this.userInputEvents=e}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseEnter(e){this.userInputEvents.emitMouseEnter(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDragStart(e){this.userInputEvents.emitMouseDragStart(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(e){this.userInputEvents.emitMouseDropCanceled(e)}emitDbClick(e){this.userInputEvents.emitDoubleClick(e)}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}var Rte=Object.defineProperty,Dte=Object.getOwnPropertyDescriptor,Cte=(r,e,t,i)=>{for(var s=i>1?void 0:i?Dte(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Rte(e,t,s),s},WC=(r,e)=>(t,i)=>e(t,i,r);let vA=class extends zt{constructor(e,t,i,s,n,o){super();u(this,"_textCursor");u(this,"_canvas");u(this,"_overlay");u(this,"_selection");u(this,"mx",ky.Identity);u(this,"_onCameraChagned",new Dt);u(this,"onCameraChagned",this._onCameraChagned.event);u(this,"_onCursorMoved",new Dt);u(this,"onCursorMoved",this._onCursorMoved.event);u(this,"disposed",!1);this.domNode=e,this.viewModel=t,this.mvvm=i,this._contextKeyService=n,this._keybindingService=o,Reflect.set(window,"view",this),this.domNode.tabIndex=1;let a=new Pte(s);this._canvas=this._register(new eZ(this.domNode,this,t)),this._overlay=this._register(new Tte(this.domNode)),this._textCursor=this._register(new Ox(this.domNode,this)),sa.once(this._canvas.onMounted)(()=>{const l=this.document.getSelection();this._register(new rX(this,this.mvvm)),this._selection=this._register(l),this._register(l.onDidChange(()=>this.layoutManager.onSelectionChanged(l))),this._register(new tX(a,this._createPointerHandlerHelper()))})}get document(){return this._canvas.document}_createPointerHandlerHelper(){return{viewDomNode:this.domNode,hitTest:(e,t,i)=>this.hitTest(e,t,i),getTransform:()=>this.mx,getHitTestLevel:e=>this._contextKeyService.getContextKeyValue($c.hitTestLevel.key)}}get layoutManager(){return this._canvas.layoutManager}hitTest(e,t,i){return this.layoutManager.hitTestDOM(e,t,i)}currentCursor(){return this.domNode.style.cursor||Gi.arrow}setCursor(e){const t=this.domNode;t.style.cursor!==e&&(t.style.cursor=e)}drawCursor(e){e?this._textCursor.update({left:e.blockStart,top:e.inlineStart,width:1.5,height:e.inlineSize}):this._textCursor.update(),this._onCursorMoved.fire(e)}setOutlines(e){this._overlay.outlines.length=0,this._overlay.outlines.push(...e)}setHitTestLevel(e){this._contextKeyService.setContext($c.hitTestLevel.key,e)}translate(e,t){this.mx.tx=e,this.mx.ty=t,this._onCameraChagned.fire()}internal_disconnect(){ze()}internal_connect(){ze()}focus(){this.domNode.focus()}isFocused(){return document.activeElement===this.domNode}dispose(){super.dispose(),this.disposed=!0}};vA=Cte([WC(4,_h),WC(5,IA)],vA);class Ote{constructor(){u(this,"onKeyDown",null);u(this,"onKeyUp",null);u(this,"onContextMenu",null);u(this,"onMouseMove",null);u(this,"onMouseEnter",null);u(this,"onMouseLeave",null);u(this,"onMouseDown",null);u(this,"onMouseUp",null);u(this,"onMouseDrag",null);u(this,"onMouseDragStart",null);u(this,"onMouseDrop",null);u(this,"onMouseDropCanceled",null);u(this,"onMouseWheel",null);u(this,"onDoubleClick",null)}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(e)}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(e)}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(e)}emitMouseEnter(e){this.onMouseEnter&&this.onMouseEnter(e)}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(e)}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(e)}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(e)}emitMouseDragStart(e){this.onMouseDragStart&&this.onMouseDragStart(e)}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(e)}emitMouseDropCanceled(e){this.onMouseDropCanceled&&this.onMouseDropCanceled(e)}emitDoubleClick(e){this.onDoubleClick&&this.onDoubleClick(e)}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}}const OT=class extends zt{constructor(t,i,s,n){super();u(this,"id",OT.ID++);u(this,"_onReconnected",this._register(new Dt));u(this,"onReconnected",this._onReconnected.event);u(this,"treeNodeViewModelMap",new Map);u(this,"treeNodeObservers",new Map);u(this,"treeNodesObservers",new Map);u(this,"treeRoots",new Map);u(this,"_selectTimer",0);u(this,"_root");u(this,"topResource");this.model=t,this.modelService=s,this.canvas=n,this._root=al(Object.create(null)),this.topResource=t.uri.toString(),this.internal_connect(this.topResource,!1),Reflect.set(window,"vm",this)}internal_disconnect(t){const i=this.treeNodeObservers.get(t);J(i);const s=this.treeNodeViewModelMap.get(t);J(s);const n=this.treeNodesObservers.get(t);J(n),n.dispose();for(const[o,a]of i.entries())a.dispose();i.clear(),s.clear(),this.treeNodeObservers.delete(t),this.treeNodeViewModelMap.delete(t),this.treeNodesObservers.delete(t)}internal_connect(t,i=!1){this.treeNodeViewModelMap.set(t,new Map),this.treeNodeObservers.set(t,new Map),this.processNodes(t),t===this.topResource&&(this.updateRootOfDefaultTree(),i&&this._onReconnected.fire())}dispose(){super.dispose(),this.internal_disconnect(this.topResource)}getViewModelNodeOfResourceById(t,i){return this.treeNodeViewModelMap.get(i).get(t)}getViewModelNodeById(t){const i=this.canvas.getScopedModel(t.scope);return this.treeNodeViewModelMap.get(i.uri.toString()).get(t.id)}get root(){return this._root.value||this.updateRootOfDefaultTree(),this._root}updateRootOfDefaultTree(){const t=this.getViewModelNodeOfResourceById(nd,this.topResource);J(t),this._root.value=t}getModel(t){if(t===this.topResource)return this.model;et()}processNodes(t){const i=this.treeNodeViewModelMap.get(t),s=this.getModel(t).yModel,n=FA(s);J(n);const o=n.values();let a;for(const l of o){const c=PS(l),d=YT(l),f=mo(l);J(uo(f));const g=al({id:f,children:[],style:c?c.toJSON():Object.create(null),type:d,attrs:Object.create(null)});d===oi.Text&&(g.content=TS(l)),Km(l)||(a=g),i.set(f,g),this.watchNode(l,t)}a||et(),this.treeRoots.set(t,a);for(const l of i.values())(Gw(l)||KD(l))&&(l.children=this.getChildren(l.id,t));this.watchNodes(n,t)}watchNode(t,i){const s=this.treeNodeViewModelMap.get(i),n=o=>{o.forEach(a=>{const{target:l}=a;a.changes.keys.forEach((c,d)=>{const{action:f,oldValue:g}=c;switch(f){case"update":{if(d==="from")this.updateChildren(g,i),this.updateChildren(l.get(d),i);else if(d==="order")this.updateChildren(Km(l),i);else{const x=mo(t);if(x){const E=s.get(x);J(E),d==="id"&&et(),Reflect.set(E,d,l.get(d))}else debugger}break}case"add":{const x=mo(l);if(x){const E=s.get(x);J(E),Reflect.set(E,d,l.get(d))}else{const E=l.parent,P=mo(E);J(P);const b=s.get(P);J(b),Reflect.set(b.style,d,l.get(d))}break}case"delete":{if(mo(t))debugger;const E=l.parent,P=mo(E),b=s.get(P);J(b),Reflect.deleteProperty(b.style,d);break}default:et()}})})};t.observeDeep(n),this.treeNodeObservers.get(i).set(mo(t),sn(()=>{t.unobserveDeep(n)}))}addNode(t,i){const s=this.treeNodeViewModelMap.get(i),n=mo(t);s.delete(n);const o=PS(t),a=YT(t),l=al({id:n,children:this.getChildren(n,i),style:o?o.toJSON():Object.create(null),type:a,attrs:Object.create(null)});s.set(n,l),a===oi.Text&&(l.content=TS(t)),this.updateChildren(Km(t),i),this.watchNode(t,i)}removeNode(t,i){const s=this.treeNodeViewModelMap.get(i),n=this.treeNodeObservers.get(i),o=t._map.get("id").content.getContent()[0];if(!s.has(o)){ze();return}s.delete(o);const a=t._map.get("from").content.getContent()[0];this.updateChildren(a,i);const l=n.get(o);J(l),l.dispose(),n.delete(o)}watchNodes(t,i){const s=n=>{const{target:o}=n;n.changes.keys.forEach((a,l)=>{const{action:c,oldValue:d}=a;switch(c){case"delete":{this.removeNode(d,i);break}case"update":break;case"add":this.addNode(o.get(l),i);break;default:et()}})};t.observe(s),this.treeNodesObservers.set(i,sn(()=>{t.unobserve(s)}))}getChildren(t,i){const s=this.treeNodeViewModelMap.get(i),o=this.getModel(i).getChildrenNodesOfId(t).map(a=>{const l=s.get(mo(a));return J(l),l});return bA(o.filter(Boolean))}updateChildren(t,i){const s=this.getViewModelNodeOfResourceById(t,i);J(s),!Gw(s)&&!KD(s)&&et(),s.children=this.getChildren(t,i)}};let Fx=OT;u(Fx,"ID",1);var Nte=Object.defineProperty,Ite=Object.getOwnPropertyDescriptor,Fte=(r,e,t,i)=>{for(var s=i>1?void 0:i?Ite(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Nte(e,t,s),s},_S=(r,e)=>(t,i)=>e(t,i,r);let EA=class{constructor(r,e,t,i){u(this,"undoRedoSource");this.model=r,this.instantiationService=e,this.canvasesService=t,this.modelService=i,this.undoRedoSource=new Za}canUndo(){return this.model.canUndo()}canRedo(){return this.model.canRedo()}undo(){return this.model.undo()}redo(){return this.model.redo()}add(r){this.modelService.add(r.bind(null,this.model))}checkout(){this.modelService.checkout()}commitAndMerge(r){this.modelService.commitAndMerge(this.undoRedoSource,[],r)}fork(r){this.modelService.fork(this.undoRedoSource,[],r)}transform(r){return this.modelService.transform(this.undoRedoSource,r.bind(null,this.model),[],()=>[])}getVM(){const r=this.canvasesService.listCanvases().find(e=>e.model.uri.toString()===this.model.uri.toString());return r==null?void 0:r.viewModel}};EA=Fte([_S(1,pl),_S(2,gf),_S(3,mf)],EA);var Mte=Object.defineProperty,Bte=Object.getOwnPropertyDescriptor,Lte=(r,e,t,i)=>{for(var s=i>1?void 0:i?Bte(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Mte(e,t,s),s},qh=(r,e)=>(t,i)=>e(t,i,r);class Ute extends zt{constructor(t){super();u(this,"_pendingReLayout",!0);u(this,"_waiting");this._register(t.onDidChangeContent(()=>{this._pendingReLayout=!0}))}setView(t){this._register(t.layoutManager.onDidLayout(()=>{var i;this._pendingReLayout=!1,(i=this._waiting)==null||i.complete()}))}async maybeWaitForReLayout(){!this._pendingReLayout||(this._waiting||(this._waiting=new md),await this._waiting)}}class Gte{constructor(e,t,i,s,n){u(this,"model");u(this,"viewModel");u(this,"view");u(this,"mvvm");u(this,"listenersToRemove");this.model=e,this.viewModel=t,this.view=i,this.mvvm=s,this.listenersToRemove=n}dispose(){e1(this.listenersToRemove),this.view.dispose(),this.viewModel.dispose(),this.mvvm.dispose()}}var mS;let zy=(mS=class extends zt{constructor(e,t,i,s,n,o,a){super();u(this,"_contextKeyService");u(this,"_instantiationService");u(this,"_modelData");u(this,"_historyHelper");u(this,"_onDidChangeModel",this._register(new Dt));u(this,"onDidChangeModel",this._onDidChangeModel.event);u(this,"_onDidChangeModelContent",this._register(new Dt));u(this,"onDidChangeModelContent",this._onDidChangeModelContent.event);u(this,"eventFilter");u(this,"id",(zy.counter++).toString());this._domElement=e,this.modelService=o,this.contextKeyService=a,this._contextKeyService=this._register(a.createScoped(this._domElement));const l=new uk;l.set(_h,this._contextKeyService),this._register(this._instantiationService=t.createChild(l)),this._register(new zte(this,a,n)),s.addTrackedCanvas(this),i.addCanvas(this),Reflect.set(window,"canvas",this)}_attachModel(e){if(!e){this._modelData=void 0;return}const t=[];t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o)));const i=new Fx(e,this._instantiationService,this.modelService,this);t.push(e.onWillDispose(()=>this.setModel(void 0)));const s=new Ute(e),n=this._createView(i,s);s.setView(n),n.domNode.setAttribute("data-uri",e.uri.toString()),this._modelData=new Gte(e,i,n,s,t),this._historyHelper=this._instantiationService.createInstance(EA,e)}_createView(e,t){const i=new Ote,s=this.passToEventFilter.bind(this);let n;return i.onContextMenu=s,i.onMouseMove=o=>{this.passToEventFilter(o)},i.onMouseLeave=s,i.onMouseEnter=s,i.onMouseDown=s,i.onMouseUp=s,i.onMouseDrag=s,i.onMouseDragStart=s,i.onMouseDrop=s,i.onMouseDropCanceled=s,i.onDoubleClick=s,i.onMouseWheel=s,i.onKeyDown=s,i.onKeyUp=s,i.onMouseDragStart=s,i.onMouseDrag=s,i.onMouseDropCanceled=s,i.onMouseDrop=s,n=this._instantiationService.createInstance(vA,this._domElement,e,t,i),n}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}installEventFilter(e){this.eventFilter=e}passToEventFilter(e){return this.eventFilter?(this.eventFilter.eventFilter(e),e.isAccepted()):!1}get model(){var e;return(e=this._modelData)==null?void 0:e.model}get viewModel(){var e;return(e=this._modelData)==null?void 0:e.viewModel}get view(){var e;return(e=this._modelData)==null?void 0:e.view}get mvvm(){var e;return(e=this._modelData)==null?void 0:e.mvvm}_detachModel(){var i;if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.view?this._modelData.view.domNode:null;return this.viewModel.internal_disconnect(e.uri.toString()),this.view.internal_disconnect(),(i=this._modelData)==null||i.dispose(),this._modelData=void 0,t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}canUndo(){var e;return Boolean((e=this._historyHelper)==null?void 0:e.canUndo())}canRedo(){var e;return Boolean((e=this._historyHelper)==null?void 0:e.canRedo())}undo(){return this._historyHelper||et(),this._historyHelper.undo()}redo(){return this._historyHelper||et(),this._historyHelper.redo()}add(e){this._historyHelper||et(),this._historyHelper.add(e)}checkout(){this._historyHelper||et(),this._historyHelper.checkout()}commitAndMerge(e){this._historyHelper||et(),this._historyHelper.commitAndMerge(e)}fork(e){this._historyHelper||et(),this._historyHelper.fork(e)}transform(e){return this._historyHelper||et(),this._historyHelper.transform(e)}getScopedModel(e){if(e.EQ(A5))return this.model;debugger;ze()}focus(){this.view.focus()}isFocused(){return this.view.isFocused()}setModel(e){if(Ti(this._modelData)&&Ti(e)||this._modelData&&this._modelData.model===e)return;const t=this._detachModel();this._attachModel(e);const i={oldModelUrl:t?t.uri:null,newModelUrl:e?e.uri:null};this._onDidChangeModel.fire(i)}updateModel(e){this.viewModel.internal_disconnect(this.model.uri.toString()),this.view.internal_disconnect(),this.model.replaceModel(e),this.viewModel.internal_connect(this.model.uri.toString(),!0),this.view.internal_connect()}},u(mS,"counter",0),mS);zy=Lte([qh(1,pl),qh(2,gf),qh(3,pO),qh(4,wu),qh(5,mf),qh(6,_h)],zy);class zte extends zt{constructor(e,t,i){super(),$c.hitTestLevel.bindTo(t);const s=$c.isEditingText.bindTo(t);i.onDidChangeTool(n=>{const{next:o}=n;s.set((o==null?void 0:o.id)===Fc)})}}const nT=ln("ICanvasViewsService"),eB=ln("workbenchLayoutService");var tB=(r=>(r.EDITOR_PART="workbench.parts.editor",r.TOOLBAT_PART="workbench.parts.toolbat",r))(tB||{});const Hte={nodes:{[nd]:{id:nd,type:oi.Root},div1:{id:"div1",type:oi.Block,style:{width:"300px",height:"auto",marginLeft:"50px",marginTop:"100px",position:"absolute",backgroundColor:"white",padding:"10px",borderColor:"#add6ff",borderStyle:"solid",borderWidth:"1px"},from:nd,order:"0.5"},title1:{id:"title1",type:oi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"28px",color:"black",lineHeight:"40px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"Title",from:"div1",order:"0.1"},text1:{id:"text1",type:oi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco",from:"div1",order:"0.3"},div2:{id:"div2",type:oi.Block,style:{width:"300px",height:"auto",marginLeft:"550px",marginTop:"100px",position:"absolute",backgroundColor:"white",borderColor:"#b2f2bb",borderStyle:"solid",borderWidth:"1px",padding:"10px"},from:nd,order:"0.75"},title2:{id:"title2",type:oi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"28px",color:"black",lineHeight:"40px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"\u5343\u5B57\u6587",from:"div2",order:"0.1"},text2:{id:"text2",type:oi.Text,style:{display:"block",fontFamily:'"source han sans"',fontSize:"14px",color:"black",lineHeight:"20px",overflowWrap:"break-word",whiteSpace:"pre-wrap"},content:"\u5929\u5730\u7384\u9EC4\uFF0C\u5B87\u5B99\u6D2A\u8352\u3002\u65E5\u6708\u76C8\u6603\uFF0C\u8FB0\u5BBF\u5217\u5F20\u3002\u5BD2\u6765\u6691\u5F80\uFF0C\u79CB\u6536\u51AC\u85CF\u3002\u95F0\u4F59\u6210\u5C81\uFF0C\u5F8B\u5415\u8C03\u9633\u3002\u4E91\u817E\u81F4\u96E8\uFF0C\u9732\u7ED3\u4E3A\u971C\u3002\u91D1\u751F\u4E3D\u6C34\uFF0C\u7389\u51FA\u6606\u5188\u3002\u5251\u53F7\u5DE8\u9619\uFF0C\u73E0\u79F0\u591C\u5149\u3002\u679C\u73CD\u674E\u67F0\uFF0C\u83DC\u91CD\u82A5\u59DC\u3002\u6D77\u54B8\u6CB3\u6DE1\uFF0C\u9CDE\u6F5C\u7FBD\u7FD4\u3002\u9F99\u5E08\u706B\u5E1D\uFF0C\u9E1F\u5B98\u4EBA\u7687\u3002",from:"div2",order:"0.3"}}};class jte{constructor(e){u(this,"parent");this.id=e}}var Vte=Object.defineProperty,Wte=Object.getOwnPropertyDescriptor,$te=(r,e,t,i)=>{for(var s=i>1?void 0:i?Wte(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Vte(e,t,s),s},pS=(r,e)=>(t,i)=>e(t,i,r);let SA=class extends jte{constructor(e,t,i){super(tB.EDITOR_PART);u(this,"container");u(this,"_isReady",!1);u(this,"whenReadyPromise",new md);u(this,"whenReady",this.whenReadyPromise.p);u(this,"whenRestoredPromise",new md);u(this,"whenRestored",this.whenRestoredPromise.p);u(this,"loadingPromise",new md);this.instantiationService=e,this.modelService=i,this.init()}get isReady(){return this._isReady}async init(){const e=(async()=>{(await p5()).init_icu()})(),t=(async()=>{await v5()})();await Promise.all([t,e]),this.loadingPromise.complete()}create(e){this.parent=e;let t=document.createElement("div");return Object.assign(t.style,{outline:"none",position:"relative"}),this.container=t,e.appendChild(t),this.whenReadyPromise.complete(),this._isReady=!0,t}async restore(){await this.loadingPromise.p,this.container||ze();const e=this.instantiationService.createInstance(zy,this.container),t=this.modelService.createModel(Hte);e.setModel(t),e.focus(),this.whenRestoredPromise.complete()}};SA=$te([pS(0,pl),pS(1,eB),pS(2,mf)],SA);ba(nT,SA);u1.registerCommandAndKeybindingRule({id:CB,primary:Te.Escape,when:ES.currentToolState.notEqualsTo(Ks.noop),weight:QA.EditorCore,handler(r,e){r.get(wu).switchDefault()}});class Kte extends h1{get id(){return sT}activate(){super.activate()}deactivate(){super.deactivate()}}const sT="tool.select";class Xte{constructor(){u(this,"id",sT);u(this,"shortcut",new pf(ph.Primary))}createTool(e){return new Kte(e,Gi.arrow)}}class Yte extends Z0{constructor(){super(...arguments);u(this,"startX");u(this,"startY");u(this,"fromTX");u(this,"fromTY")}get id(){return Od}activate(){super.activate(),this.useCursor(Gi.grab)}activatePrimaryAction(){this.useCursor(Gi.grabbing),this.startX=void 0,this.startY=void 0,this.fromTX=void 0,this.fromTY=void 0}deactivatePrimaryAction(){}deactivate(){super.deactivate()}beginPrimaryAction(t){const i=t.asMouseInputEvent();if(i&&i.type===Jt.MOUSE_DOWN){this.canvas.view.setCursor(Gi.grabbing),this.startX=i.pageX,this.startY=i.pageY;const s=this.canvas.view.mx;this.fromTX=s.tx,this.fromTY=s.ty}}continuePrimaryAction(t){const i=t.asMouseInputEvent();if(i&&i.type===Jt.MOUSE_MOVE){const s=Math.round(i.pageX-this.startX),n=Math.round(i.pageY-this.startY);this.canvas.view.translate(this.fromTX+s,this.fromTY+n)}}endPrimaryAction(t){this.canvas.view.setCursor(Gi.grab)}processEvent(t){if(t.type===Jt.WHEEL){const i=t.asWheelInputEvent();J(i);const{deltaX:s,deltaY:n}=i,o=this.canvas.view.mx;this.fromTX=o.tx,this.fromTY=o.ty,this.canvas.view.translate(this.fromTX+s/2,this.fromTY+n/2)}}}const Od="tool.pan";class qte{constructor(){u(this,"id",Od);u(this,"shortcut",new pf(ph.Primary))}createTool(e){return new Yte(e,Gi.grab)}}function $C(r,e,t,i=s=>s){return r*i(.5-e*(.5-t))}function Qte(r){return[-r[0],-r[1]]}function yo(r,e){return[r[0]+e[0],r[1]+e[1]]}function Ys(r,e){return[r[0]-e[0],r[1]-e[1]]}function xo(r,e){return[r[0]*e,r[1]*e]}function Jte(r,e){return[r[0]/e,r[1]/e]}function ap(r){return[r[1],-r[0]]}function KC(r,e){return r[0]*e[0]+r[1]*e[1]}function Zte(r,e){return r[0]===e[0]&&r[1]===e[1]}function ere(r){return Math.hypot(r[0],r[1])}function tre(r){return r[0]*r[0]+r[1]*r[1]}function XC(r,e){return tre(Ys(r,e))}function rB(r){return Jte(r,ere(r))}function rre(r,e){return Math.hypot(r[1]-e[1],r[0]-e[0])}function lp(r,e,t){let i=Math.sin(t),s=Math.cos(t),n=r[0]-e[0],o=r[1]-e[1],a=n*s-o*i,l=n*i+o*s;return[a+e[0],l+e[1]]}function wA(r,e,t){return yo(r,xo(Ys(e,r),t))}function YC(r,e,t){return yo(r,xo(e,t))}var{min:Qh,PI:ire}=Math,qC=.275,up=ire+1e-4;function nre(r,e={}){let{size:t=16,smoothing:i=.5,thinning:s=.5,simulatePressure:n=!0,easing:o=Ve=>Ve,start:a={},end:l={},last:c=!1}=e,{cap:d=!0,easing:f=Ve=>Ve*(2-Ve)}=a,{cap:g=!0,easing:x=Ve=>--Ve*Ve*Ve+1}=l;if(r.length===0||t<=0)return[];let E=r[r.length-1].runningLength,P=a.taper===!1?0:a.taper===!0?Math.max(t,E):a.taper,b=l.taper===!1?0:l.taper===!0?Math.max(t,E):l.taper,D=Math.pow(t*i,2),C=[],O=[],N=r.slice(0,10).reduce((Ve,Fe)=>{let nt=Fe.pressure;if(n){let dt=Qh(1,Fe.distance/t),it=Qh(1,1-dt);nt=Qh(1,Ve+(it-Ve)*(dt*qC))}return(Ve+nt)/2},r[0].pressure),j=$C(t,s,r[r.length-1].pressure,o),I,M=r[0].vector,R=r[0].point,L=R,K=R,Q=L,ue=!1;for(let Ve=0;Ve<r.length;Ve++){let{pressure:Fe}=r[Ve],{point:nt,vector:dt,distance:it,runningLength:bt}=r[Ve];if(Ve<r.length-1&&E-bt<3)continue;if(s){if(n){let He=Qh(1,it/t),Z=Qh(1,1-He);Fe=Qh(1,N+(Z-N)*(He*qC))}j=$C(t,s,Fe,o)}else j=t/2;I===void 0&&(I=j);let ee=bt<P?f(bt/P):1,ne=E-bt<b?x((E-bt)/b):1;j=Math.max(.01,j*Math.min(ee,ne));let se=(Ve<r.length-1?r[Ve+1]:r[Ve]).vector,Ee=Ve<r.length-1?KC(dt,se):1,Se=KC(dt,M)<0&&!ue,fe=Ee!==null&&Ee<0;if(Se||fe){let He=xo(ap(M),j);for(let Z=1/13,Le=0;Le<=1;Le+=Z)K=lp(Ys(nt,He),nt,up*Le),C.push(K),Q=lp(yo(nt,He),nt,up*-Le),O.push(Q);R=K,L=Q,fe&&(ue=!0);continue}if(ue=!1,Ve===r.length-1){let He=xo(ap(dt),j);C.push(Ys(nt,He)),O.push(yo(nt,He));continue}let Pe=xo(ap(wA(se,dt,Ee)),j);K=Ys(nt,Pe),(Ve<=1||XC(R,K)>D)&&(C.push(K),R=K),Q=yo(nt,Pe),(Ve<=1||XC(L,Q)>D)&&(O.push(Q),L=Q),N=Fe,M=dt}let ae=r[0].point.slice(0,2),Re=r.length>1?r[r.length-1].point.slice(0,2):yo(r[0].point,[1,1]),Ue=[],rt=[];if(r.length===1){if(!(P||b)||c){let Ve=YC(ae,rB(ap(Ys(ae,Re))),-(I||j)),Fe=[];for(let nt=1/13,dt=nt;dt<=1;dt+=nt)Fe.push(lp(Ve,ae,up*2*dt));return Fe}}else{if(!(P||b&&r.length===1))if(d)for(let Fe=1/13,nt=Fe;nt<=1;nt+=Fe){let dt=lp(O[0],ae,up*nt);Ue.push(dt)}else{let Fe=Ys(C[0],O[0]),nt=xo(Fe,.5),dt=xo(Fe,.51);Ue.push(Ys(ae,nt),Ys(ae,dt),yo(ae,dt),yo(ae,nt))}let Ve=ap(Qte(r[r.length-1].vector));if(b||P&&r.length===1)rt.push(Re);else if(g){let Fe=YC(Re,Ve,j);for(let nt=1/29,dt=nt;dt<1;dt+=nt)rt.push(lp(Fe,Re,up*3*dt))}else rt.push(yo(Re,xo(Ve,j)),yo(Re,xo(Ve,j*.99)),Ys(Re,xo(Ve,j*.99)),Ys(Re,xo(Ve,j)))}return C.concat(rt,O.reverse(),Ue)}function sre(r,e={}){var t;let{streamline:i=.5,size:s=16,last:n=!1}=e;if(r.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(r[0])?r:r.map(({x,y:E,pressure:P=.5})=>[x,E,P]);if(a.length===2){let x=a[1];a=a.slice(0,-1);for(let E=1;E<5;E++)a.push(wA(a[0],x,E/4))}a.length===1&&(a=[...a,[...yo(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,d=0,f=l[0],g=a.length-1;for(let x=1;x<a.length;x++){let E=n&&x===g?a[x].slice(0,2):wA(f.point,a[x],o);if(Zte(f.point,E))continue;let P=rre(E,f.point);if(d+=P,x<g&&!c){if(d<s)continue;c=!0}f={point:E,pressure:a[x][2]>=0?a[x][2]:.5,vector:rB(Ys(f.point,E)),distance:P,runningLength:d},l.push(f)}return l[0].vector=((t=l[1])==null?void 0:t.vector)||[0,0],l}function ore(r,e={}){return nre(sre(r,e),e)}function are(r){if(!r.length)return"";const e=r.reduce((t,[i,s],n,o)=>{const[a,l]=o[(n+1)%o.length];return t.push(Math.round(i),Math.round(s),Math.round((i+a)/2),Math.round((s+l)/2)),t},["M",...r[0],"Q"]);return e.push("Z"),e.join(" ")}const lre={size:5,thinning:.5,smoothing:1,streamline:.5,easing:r=>r,start:{taper:0,easing:r=>r,cap:!0},end:{taper:100,easing:r=>r,cap:!0}};class ure extends Z0{constructor(){super(...arguments);u(this,"_history",[]);u(this,"_node")}get id(){return Nd}handleMouseMove(t){}beginPrimaryAction(t){var o;this._history.length=0;let i=this.canvas.view.document,s=i.createElement(Yp.kTagName);Object.assign(s.style,{position:"absolute",top:"0px",left:"0px",display:"block",width:"1px",height:"1px"}),s.setAttribute("fill","#000"),(o=i.body())==null||o.appendChild(s),this._node=s;const n=this.convertToPixelCoord(t.asMouseInputEvent());this._history.push([n.x,n.y,1])}continuePrimaryAction(t){const i=this.convertToPixelCoord(t.asMouseInputEvent());this._history.push([i.x,i.y,1]);const s=ore(this._history,lre),n=are(s);J(this._node),this._node.setAttribute("d",n)}endPrimaryAction(t){const i=this.convertToPixelCoord(t.asMouseInputEvent());this._history.push([i.x,i.y,1])}}const Nd="tool.brush";class cre{constructor(){u(this,"id",Nd);u(this,"shortcut",new pf(ph.Primary))}createTool(e){return new ure(e,Gi.arrow)}}class hre extends Z0{get id(){return Gv}beginPrimaryAction(e){e.asMouseInputEvent(),console.log("stat draw line",performance.now())}continuePrimaryAction(e){console.log("continue draw line",performance.now())}endPrimaryAction(e){console.log("end draw line",performance.now())}}const Gv="tool.line";class dre{constructor(){u(this,"id",Gv);u(this,"shortcut",new pf(ph.Primary))}createTool(e){return new hre(e,Gi.arrow)}}class fre extends Z0{get id(){return zv}beginPrimaryAction(e){e.asMouseInputEvent(),console.log("stat draw line",performance.now())}continuePrimaryAction(e){console.log("continue draw line",performance.now())}endPrimaryAction(e){console.log("end draw line",performance.now())}}const zv="tool.eraser";class _re{constructor(){u(this,"id",zv);u(this,"shortcut",new pf(ph.Primary))}createTool(e){return new fre(e,Gi.arrow)}}class pre extends Z0{get id(){return Hv}beginPrimaryAction(e){e.asMouseInputEvent(),console.log("stat draw line",performance.now())}continuePrimaryAction(e){console.log("continue draw line",performance.now())}endPrimaryAction(e){console.log("end draw line",performance.now())}}const Hv="tool.rect";class gre{constructor(){u(this,"id",Hv);u(this,"shortcut",new pf(ph.Primary))}createTool(e){return new pre(e,Gi.arrow)}}class mre extends h1{get id(){return Id}activate(){super.activate(),this.resetCursorStyle()}deactivate(){super.deactivate(),this.canvas.view.setOutlines([])}processEvent(e){const{type:t}=e;t===Jt.MOUSE_ENTER?(this.handleMouseEnter(e.asMouseInputEvent()),e.accept()):t===Jt.MOUSE_LEAVE&&(this.handleMouseLeave(e.asMouseInputEvent()),e.accept())}handleMouseEnter(e){const{node:t}=Qs(e.targetPath),i=this.canvas.view.document;if(t===i.html()||t===i.body()){this.canvas.view.setOutlines([]);return}const s=t.GetLayoutObject();if(s.AsLayoutTexes())return;const{box:n}=s,o=n.content_box_size(),a=n.padding_top().toFloat(),l=n.padding_right().toFloat(),c=n.padding_bottom().toFloat(),d=n.padding_left().toFloat(),f=o.width().toFloat()+d+l,g=o.height().toFloat()+a+c,x=n.GetBorderBoxOffsetFromRoot(!0),E=x.y().toFloat(),P=x.x().toFloat();this.canvas.view.setOutlines([{top:E,left:P,width:f,height:g}])}handleMouseLeave(e){}}const Id="tool.hover";class xre{constructor(){u(this,"id",Id);u(this,"shortcut",new DB)}createTool(e){return new mre(e,Gi.arrow)}}const Gu=Vc.as(Gx);Gu.registerWithShortcut(new Xte);Gu.registerWithShortcut(new xre,!0);Gu.registerWithShortcut(new qte);Gu.registerWithShortcut(new dre);Gu.registerWithShortcut(new cre);Gu.registerWithShortcut(new UK);Gu.registerWithShortcut(new _re);Gu.registerWithShortcut(new gre);function zu(r,e){u1.registerCommandAndKeybindingRule({id:r,...e,weight:QA.WorkbenchContrib,handler(t){t.get(wu).switchTool(r)}})}zu(sT,{primary:Te.KEY_S});zu(Id,{primary:Te.KEY_H});zu(Od,{primary:Te.KEY_P});zu(Gv,{primary:Te.KEY_L});zu(Nd,{primary:Te.KEY_B});zu(Fc,{primary:Te.KEY_T});zu(zv,{primary:Te.KEY_E});zu(Hv,{primary:Te.KEY_R});class yre{constructor(e){u(this,"data");u(this,"incoming",new Map);u(this,"outgoing",new Map);this.data=e}}class vre{constructor(e){u(this,"_nodes",new Map);this._hashFn=e}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(this._hashFn(t),s),s.incoming.set(this._hashFn(e),i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new yre(e),this._nodes.set(t,i)),i}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}, (incoming)[${[...i.incoming.keys()].join(", ")}], (outgoing)[${[...i.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const n=this._findCycle(s,t);if(n)return n;t.delete(i)}}insertVertex(e){this.lookupOrInsertNode(e)}topologicalSort(){const e=[],t=new Set,{_hashFn:i}=this;function s(n,o){if(t.has(n))return;const a=i(n.data),l=Array.isArray(o)?o:[];l.push(n),t.add(n),n.outgoing.forEach(c=>{if(l.indexOf(c)!==-1){const d=i(c.data);throw new Error("Circular chain found: "+a+" must be before "+d+" due to a direct order specification, but "+d+" must be before "+a+" based on other specifications.")}s(c,l.slice())}),e.unshift(n.data)}return this._nodes.forEach(n=>s(n)),e}}class QC extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!=null?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}function Jh(r){return!r||!Object.getPrototypeOf(r)?!1:Reflect.has(Object.getPrototypeOf(r).constructor,"__SyncDescriptorBrand")}class oT{constructor(e=new uk,t=!1,i){u(this,"_services");u(this,"_strict");u(this,"_parent");u(this,"_activeInstantiations",new Set);this._services=e,this._strict=t,this._parent=i,this._services.set(pl,this)}createChild(e){return new oT(e,this._strict,this)}invokeFunction(e,...t){const i=vc.traceInvocation(e);let s=!1;try{return e({get:o=>{if(s)throw HB("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){let i,s;return Jh(e)?(i=vc.traceCreation(e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=vc.traceCreation(e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){const s=NT(e).sort((a,l)=>a.index-l.index),n=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(l)}const o=s.length>0?s[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...n)}_setServiceInstance(e,t){if(Jh(this._services.get(e)))this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const i=this._getServiceInstanceOrDescriptor(e);return Jh(i)?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const s=new vre(a=>a.id.toString());let n=0;const o=[{id:e,desc:t,_trace:i}];for(;o.length;){const a=o.pop();if(s.lookupOrInsertNode(a),n++>1e3)throw new QC(s);for(const l of NT(a.desc.ctor)){const c=this._getServiceInstanceOrDescriptor(l.id);if(c||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),Jh(c)){const d={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};s.insertEdge(a,d),o.push(d)}}}for(;;){const a=s.roots();if(a.length===0){if(!s.isEmpty())throw new QC(s);break}for(const{data:l}of a){const c=this._getServiceInstanceOrDescriptor(l.id);if(Jh(c)){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}s.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,n){if(Jh(this._services.get(e)))return this._createServiceInstance(t,i,s,n);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],i,s){if(i){const n=new P8(()=>this._createInstance(e,t,s));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];const l=n.value;let c=l[a];return typeof c!="function"||(c=c.bind(l),o[a]=c),c},set(o,a,l){return n.value[a]=l,!0}})}else return this._createInstance(e,t,s)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}get services(){const e=this;return{get(t){return e.invokeFunction(i=>i.get(t))}}}dispose(){}store(e,t){this._services.set(e,t)}}const iu=class{constructor(e,t){u(this,"_start",Date.now());u(this,"_dep",[]);this.type=e,this.name=t}static traceInvocation(e){return iu._None}static traceCreation(e){return iu._None}branch(e,t){const i=new iu(2,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;iu._totals+=e;let t=!1;function i(n,o){const a=[],l=new Array(n+1).join("	");for(const[c,d,f]of o._dep)if(d&&f){t=!0,a.push(`${l}CREATES -> ${c}`);const g=i(n+1,f);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${iu._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(s.join(`
`))}};let vc=iu;u(vc,"_None",new class extends iu{constructor(){super(-1,null)}stop(){}branch(){return this}}),u(vc,"_totals",0);class Ere extends zt{constructor(t){super();u(this,"container",document.createElement("div"));u(this,"editorPart");u(this,"_dimension");u(this,"disposed",!1);u(this,"parts",new Map);u(this,"whenReadyPromise",new md);u(this,"whenReady",this.whenReadyPromise.p);u(this,"whenRestoredPromise",new md);u(this,"whenRestored",this.whenRestoredPromise.p);u(this,"restored",!1);this.parent=t}get dimension(){return this._dimension}isRestored(){return this.restored}initLayout(t){this.editorPart=t.get(nT)}restoreParts(){const t=[],i=[];t.push((async()=>{jd("code/willRestoreEditors"),Tn(this.editorPart),await this.editorPart.whenReady,this.editorPart.restore()})()),nl.settled(t).finally(()=>{this.whenReadyPromise.complete(),nl.settled(i).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}getPart(t){return Tn(this.parts.get(t))}registerPart(t){this.parts.set(t.id,t)}dispose(){super.dispose(),this.disposed=!0}}const iB="workbench.contributions.kind";class Sre{constructor(){u(this,"instantiationService");u(this,"lifecycleService");u(this,"toBeInstantiated",new Map)}registerWorkbenchContribution(e,t=Ps.Starting){if(this.instantiationService&&this.lifecycleService&&this.lifecycleService.phase>=t)this.instantiationService.createInstance(e);else{let i=this.toBeInstantiated.get(t);i||(i=[],this.toBeInstantiated.set(t,i)),i.push(e)}}start(e){const t=this.instantiationService=e.get(pl),i=this.lifecycleService=e.get(p0);[Ps.Starting,Ps.Ready,Ps.Restored,Ps.Eventually].forEach(s=>{this.instantiateByPhase(t,i,s)})}instantiateByPhase(e,t,i){t.phase>=i?this.doInstantiateByPhase(e,i):t.when(i).then(()=>this.doInstantiateByPhase(e,i))}doInstantiateByPhase(e,t){const i=this.toBeInstantiated.get(t);if(i)if(this.toBeInstantiated.delete(t),t!==Ps.Eventually)for(const s of i)this.safeCreateInstance(e,s);else{let n=0;const o=a=>{for(;n<i.length;){const l=i[n++];if(this.safeCreateInstance(e,l),a.timeRemaining()<1){Au(o,3e3);break}}};Au(o,3e3)}}safeCreateInstance(e,t){try{e.createInstance(t)}catch(i){console.error(`Unable to instantiate workbench contribution ${t.name}.`,i)}}}Vc.add(iB,new Sre);const aT={instantiationService:"instantiationService"},wre=Go({__name:"index",setup(r){const e=$Z();return FM(()=>{const t=Zp(aT.instantiationService);t||et(),t.invokeFunction(i=>{const s=i.get(nT);s.create(Tn(e.value)),s.whenRestored.then(()=>{document.querySelector(".loader-container").remove()})})}),(t,i)=>(co(),Ug("div",{ref_key:"container",ref:e,class:"editor"},null,512))}});const Are=["disabled"],Vf=Go({__name:"IconButton",props:{onClick:null,isActive:{type:Boolean},disabled:{type:Boolean}},setup(r){return(e,t)=>(co(),Ug("button",{class:Rv({button_active:r.isActive,button:!0}),onClick:t[0]||(t[0]=(...i)=>r.onClick&&r.onClick(...i)),disabled:r.disabled},[bee(e.$slots,"default")],10,Are))}});const bre=Zr("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},[Zr("path",{stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2",d:"m17.072 28.713 4.245-1.935-4.415-9.701 8.037-.355L7.123 1.287v23.55l5.525-5.826 4.424 9.702Z"})],-1),kre=Go({__name:"SelectionButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(co(),Fh(Vf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[bre]),_:1},8,["isActive","onClick"]))}}),Tre=Zr("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},[Zr("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.636 16.022c-.19-.723-.38-1.618-.78-2.95-.757-2.49-2.075-4.8-2.723-7.326-.425-1.81 1.12-3.643 3.046-2.969 2.949 1.036 3.868 6.109 4.283 8.678l.152.856c-.203-3.707-.469-6.126 0-9.172.463-2.89 4.888-2.825 5.254.038.189 2.079.19 4.154.19 6.242 0 .437 0 3.082.038 2.797.114-1.256.171-6.07.647-7.498 1.04-3.19 4.893-2.028 5.083.876.157 2.1-.062 4.29-.114 6.394 0 .076-.02.57.038.342.574-1.786.076-6.736 3.187-6.119 1.027.204 2.931 1.59 1.542 6.289-1.96 6.631-4.5 9.498-4.5 16.5h-14c0-5-6.61-8.82-8.5-12.598-.418-.799-.626-1.807-.36-2.53.438-1.123 1.254-1.713 2.568-1.58 2.142.206 3.008 2.032 4.949 3.73Z"})],-1),Pre=Go({__name:"PanButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(co(),Fh(Vf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[Tre]),_:1},8,["isActive","onClick"]))}}),Rre=Zr("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})],-1),Dre=Go({__name:"PencilButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(co(),Fh(Vf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[Rre]),_:1},8,["isActive","onClick"]))}}),Cre=Zr("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("path",{d:"M3.94993 2.95002L3.94993 4.49998C3.94993 4.74851 3.74845 4.94998 3.49993 4.94998C3.2514 4.94998 3.04993 4.74851 3.04993 4.49998V2.50004C3.04993 2.45246 3.05731 2.40661 3.07099 2.36357C3.12878 2.18175 3.29897 2.05002 3.49993 2.05002H11.4999C11.6553 2.05002 11.7922 2.12872 11.8731 2.24842C11.9216 2.32024 11.9499 2.40682 11.9499 2.50002L11.9499 2.50004V4.49998C11.9499 4.74851 11.7485 4.94998 11.4999 4.94998C11.2514 4.94998 11.0499 4.74851 11.0499 4.49998V2.95002H8.04993V12.05H9.25428C9.50281 12.05 9.70428 12.2515 9.70428 12.5C9.70428 12.7486 9.50281 12.95 9.25428 12.95H5.75428C5.50575 12.95 5.30428 12.7486 5.30428 12.5C5.30428 12.2515 5.50575 12.05 5.75428 12.05H6.94993V2.95002H3.94993Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})],-1),Ore=Go({__name:"TextButton",props:{isActive:{type:Boolean},onClick:null},setup(r){return(e,t)=>(co(),Fh(Vf,{isActive:r.isActive,onClick:r.onClick},{default:Ih(()=>[Cre]),_:1},8,["isActive","onClick"]))}}),Nre=r=>(Qk("data-v-a96802fc"),r=r(),Jk(),r),Ire=Nre(()=>Zr("svg",{class:"svg",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("path",{d:"M15 16H21C22.654 16 24 17.346 24 19C24 20.654 22.654 22 21 22H18V24H21C23.757 24 26 21.757 26 19C26 16.243 23.757 14 21 14H15V11L10 15L15 19V16Z",fill:"#888888"})],-1)),Fre=Go({__name:"UndoButton",props:{onClick:null,disabled:{type:Boolean}},setup(r){return(e,t)=>(co(),Fh(Vf,{onClick:r.onClick,disabled:r.disabled},{default:Ih(()=>[Ire]),_:1},8,["onClick","disabled"]))}});const Mre=Uv(Fre,[["__scopeId","data-v-a96802fc"]]),Bre=r=>(Qk("data-v-50b57855"),r=r(),Jk(),r),Lre=Bre(()=>Zr("svg",{class:"svg",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Zr("g",{clipPath:"url(#clip0_18:85)"},[Zr("path",{d:"M15 24H18V22H15C13.346 22 12 20.654 12 19C12 17.346 13.346 16 15 16H21V19L26 15L21 11V14H15C12.243 14 10 16.243 10 19C10 21.757 12.243 24 15 24Z",fill:"#888888"})]),Zr("defs",null,[Zr("clipPath",{id:"clip0_18:85"},[Zr("rect",{width:"36",height:"36",fill:"white"})])])],-1)),Ure=Go({__name:"RedoButton",props:{onClick:null,disabled:{type:Boolean}},setup(r){return(e,t)=>(co(),Fh(Vf,{onClick:r.onClick,disabled:r.disabled},{default:Ih(()=>[Lre]),_:1},8,["onClick","disabled"]))}});const Gre=Uv(Ure,[["__scopeId","data-v-50b57855"]]),zre=r=>(Qk("data-v-8268cff9"),r=r(),Jk(),r),Hre={class:"tools_panel_container"},jre={class:"tools_panel"},Vre={class:"tools_panel_section"},Wre=zre(()=>Zr("div",{class:"seperator"},null,-1)),$re={class:"tools_panel_section"},Kre=Go({__name:"index",setup(r){const e=Zp(aT.instantiationService),t=e.invokeFunction(c=>c.get(wu)),i=e.invokeFunction(c=>c.get(gf)),s=B0({[Id]:!1,[Od]:!1,[Nd]:!1,[Gv]:!1,[Hv]:!1,[zv]:!1,[Fc]:!1}),n=Object.create(null);Object.keys(s).forEach(c=>{n[c]=()=>{t.switchTool(c)}}),t.onDidChangeTool(c=>{const{prev:d,next:f}=c;f&&(s[f.id]=!0),d&&(s[d.id]=!1)});const o=B0({canUndo:!1,canRedo:!1}),a=()=>{var c;(c=i.getActiveCanvas())==null||c.undo()},l=()=>{var c;(c=i.getActiveCanvas())==null||c.redo()};return i.onDidActiveCanvasChange(c=>{c.onDidChangeModelContent(d=>{o.canUndo=c.canUndo(),o.canRedo=c.canRedo()})}),(c,d)=>(co(),Ug("div",Hre,[Zr("div",jre,[Zr("div",Vre,[Ji(kre,{"is-active":s[as(Id)],"on-click":as(n)[as(Id)]},null,8,["is-active","on-click"]),Ji(Pre,{"is-active":s[as(Od)],"on-click":as(n)[as(Od)]},null,8,["is-active","on-click"]),Ji(Dre,{"is-active":s[as(Nd)],"on-click":as(n)[as(Nd)]},null,8,["is-active","on-click"]),Ji(Ore,{"is-active":s[as(Fc)],"on-click":as(n)[as(Fc)]},null,8,["is-active","on-click"])]),Wre,Zr("div",$re,[Ji(Mre,{onClick:a,disabled:!o.canUndo},null,8,["disabled"]),Ji(Gre,{onClick:l,disabled:!o.canRedo},null,8,["disabled"])])])]))}});const Xre=Uv(Kre,[["__scopeId","data-v-8268cff9"]]),Yre=Go({__name:"index",setup(r){return(e,t)=>(co(),Ug("div",null,[Ji(wre),Ji(Xre)]))}});class qre extends Ere{constructor(t,i,s,n){super(t);u(this,"_onWillShutdown",this._register(new Dt));u(this,"onWillShutdown",this._onWillShutdown.event);u(this,"_onDidShutdown",this._register(new Dt));u(this,"onDidShutdown",this._onDidShutdown.event);this.options=i,this.serviceCollection=s}startup(){try{WB(175);const t=this.initServices(this.serviceCollection);return t.invokeFunction(i=>{const s=i.get(p0);this.initLayout(i),Vc.as(iB).start(i),this.renderWorkbench(t),this.restore(s),s.phase=Ps.Ready}),t}catch(t){throw Hx(t),t}}initServices(t){t.set(eB,this);const i=QB();for(const[n,o]of i)t.set(n,o);return new oT(t)}renderWorkbench(t){this.parent.appendChild(this.container);const i=ZM(Yre);i.provide(aT.instantiationService,t),i.mount(this.container),this._register(sn(()=>i.unmount()))}restore(t){try{this.restoreParts()}catch(i){Hx(i)}this.whenReady.finally(()=>Promise.race([this.whenRestored]).finally(()=>{t.phase=Ps.Restored,this._register(new ry(()=>{this._register(Au(()=>t.phase=Ps.Eventually,2500))},2500)).schedule();function s(){jd("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}this.isRestored()?s():this.whenRestored.finally(()=>s())}))}}function JC(r,e){switch(e){case Rs.Trace:return r.trace;case Rs.Debug:return r.debug;case Rs.Info:return r.info;case Rs.Warning:return r.warn;case Rs.Error:return r.error;case Rs.Critical:return r.critical;default:throw new Error("Invalid log level")}}class Qre extends k8{constructor(t=ib){super();u(this,"buffer",[]);u(this,"_logger");this.setLevel(t),this._register(this.onDidChangeLogLevel(i=>{this._logger&&this._logger.setLevel(i)}))}set logger(t){this._logger=t;for(const{level:i,args:s}of this.buffer)JC(t,i).apply(t,s);this.buffer=[]}_log(t,...i){this._logger?JC(this._logger,t).apply(this._logger,i):this.getLevel()<=t&&this.buffer.push({level:t,args:i})}trace(t,...i){this._log(Rs.Trace,t,...i)}debug(t,...i){this._log(Rs.Debug,t,...i)}info(t,...i){this._log(Rs.Info,t,...i)}warn(t,...i){this._log(Rs.Warning,t,...i)}error(t,...i){this._log(Rs.Error,t,...i)}critical(t,...i){this._log(Rs.Critical,t,...i)}dispose(){this._logger&&this._logger.dispose()}flush(){this._logger&&this._logger.flush()}}class ZC extends Error{constructor(e){super("Missing stores"),this.db=e}}class _c{constructor(e,t){u(this,"database",null);u(this,"pendingTransactions",[]);this.name=t,this.database=e}static async create(e,t,i){const s=await _c.openDatabase(e,t,i);return new _c(s,e)}static async openDatabase(e,t,i){jd(`code/willOpenDatabase/${e}`);try{return await _c.doOpenDatabase(e,t,i)}catch(s){if(s instanceof ZC){console.info("Attempting to recreate the IndexedDB once.",e);try{await _c.deleteDatabase(s.db)}catch(n){throw console.error("Error while deleting the IndexedDB",jB(n)),n}return await _c.doOpenDatabase(e,t,i)}throw s}finally{jd(`code/didOpenDatabase/${e}`)}}static doOpenDatabase(e,t,i){return new Promise((s,n)=>{const o=window.indexedDB.open(e,t);o.onerror=()=>n(o.error),o.onsuccess=()=>{const a=o.result;for(const l of i)if(!a.objectStoreNames.contains(l)){console.error(`Error while opening IndexedDB. Could not find '${l}'' object store`),n(new ZC(a));return}s(a)},o.onupgradeneeded=()=>{const a=o.result;for(const l of i)a.objectStoreNames.contains(l)||a.createObjectStore(l)}})}static deleteDatabase(e){return new Promise((t,i)=>{e.close();const s=window.indexedDB.deleteDatabase(e.name);s.onerror=n=>i(s.error),s.onsuccess=()=>t()})}hasPendingTransactions(){return this.pendingTransactions.length>0}close(){this.pendingTransactions.length&&this.pendingTransactions.splice(0,this.pendingTransactions.length).forEach(e=>e.abort()),this.database&&this.database.close(),this.database=null}async runInTransaction(e,t,i){if(!this.database)throw new Error(`IndexedDB database '${this.name}' is not opened.`);const s=this.database.transaction(e,t);return this.pendingTransactions.push(s),new Promise((n,o)=>{s.oncomplete=()=>{aB(a)?n(a.map(l=>l.result)):n(a.result)},s.onerror=()=>o(s.error);const a=i(s.objectStore(e))}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(s),1))}async getKeyValues(e,t){if(!this.database)throw new Error(`IndexedDB database '${this.name}' is not opened.`);const i=this.database.transaction(e,"readonly");return this.pendingTransactions.push(i),new Promise(s=>{const n=new Map,a=i.objectStore(e).openCursor();if(!a)return s(n);a.onsuccess=()=>{a.result?(t(a.result.value)&&n.set(a.result.key.toString(),a.result.value),a.result.continue()):s(n)};const l=c=>{console.error(`IndexedDB getKeyValues(): ${ey(c,!0)}`),s(n)};a.onerror=()=>l(a.error),i.onerror=()=>l(i.error)}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(i),1))}}var Jre=Object.defineProperty,Zre=Object.getOwnPropertyDescriptor,eie=(r,e,t,i)=>{for(var s=i>1?void 0:i?Zre(e,t):e,n=r.length-1,o;n>=0;n--)(o=r[n])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&Jre(e,t,s),s},tie=(r,e)=>(t,i)=>e(t,i,r),xS;let Hy=(xS=class extends ix{constructor(e,t){super({flushInterval:Hy.BROWSER_DEFAULT_FLUSH_INTERVAL});u(this,"globalStorage");u(this,"workspaceStorage");u(this,"globalStorageDatabase");u(this,"workspaceStorageDatabase");this.payload=e,this.logService=t}get hasPendingUpdate(){var e,t;return Boolean(((e=this.globalStorageDatabase)==null?void 0:e.hasPendingUpdate)||((t=this.workspaceStorageDatabase)==null?void 0:t.hasPendingUpdate))}getId(e){return e===qs.GLOBAL?"global":this.payload.id}async doInitialize(){const[e,t]=await nl.settled([pc.create({id:this.getId(qs.WORKSPACE)},this.logService),pc.create({id:this.getId(qs.GLOBAL),broadcastChanges:!0},this.logService)]);this.workspaceStorageDatabase=this._register(e),this.workspaceStorage=this._register(new Up(this.workspaceStorageDatabase)),this._register(this.workspaceStorage.onDidChangeStorage(n=>this.emitDidChangeValue(qs.WORKSPACE,n))),this.globalStorageDatabase=this._register(t),this.globalStorage=this._register(new Up(this.globalStorageDatabase)),this._register(this.globalStorage.onDidChangeStorage(n=>this.emitDidChangeValue(qs.GLOBAL,n))),await nl.settled([this.workspaceStorage.init(),this.globalStorage.init()]);const i=this.globalStorage.getBoolean(ic);i===void 0?this.globalStorage.set(ic,!0):i&&this.globalStorage.set(ic,!1);const s=this.workspaceStorage.getBoolean(ic);s===void 0?this.workspaceStorage.set(ic,!0):s&&this.workspaceStorage.set(ic,!1)}getStorage(e){return e===qs.GLOBAL?this.globalStorage:this.workspaceStorage}getLogDetails(e){return this.getId(e)}async migrate(e){throw new Error("Migrating storage is currently unsupported in Web")}shouldFlushWhenIdle(){return document.hasFocus()&&!this.hasPendingUpdate}close(){var e,t;nk&&((e=this.globalStorageDatabase)==null||e.close(),(t=this.workspaceStorageDatabase)==null||t.close()),this.dispose()}async clear(){var e,t,i,s,n;for(const o of[qs.GLOBAL,qs.WORKSPACE]){for(const a of[iy.USER,iy.MACHINE])for(const l of this.keys(o,a))this.remove(l,o);await((e=this.getStorage(o))==null?void 0:e.whenFlushed())}await nl.settled([(i=(t=this.globalStorageDatabase)==null?void 0:t.clear())!=null?i:Promise.resolve(),(n=(s=this.workspaceStorageDatabase)==null?void 0:s.clear())!=null?n:Promise.resolve()])}},u(xS,"BROWSER_DEFAULT_FLUSH_INTERVAL",5*1e3),xS);Hy=eie([tie(1,J0)],Hy);class rie extends M8{constructor(){super(...arguments);u(this,"hasPendingUpdate",!1)}async clear(){(await this.getItems()).clear()}dispose(){}}const Ya=class extends zt{constructor(t,i){super();u(this,"_onDidChangeItemsExternal",this._register(new Dt));u(this,"onDidChangeItemsExternal",this._onDidChangeItemsExternal.event);u(this,"broadcastChannel");u(this,"pendingUpdate");u(this,"name");u(this,"whenConnected");this.logService=i,this.name=`${Ya.STORAGE_DATABASE_PREFIX}${t.id}`,this.broadcastChannel=t.broadcastChanges&&"BroadcastChannel"in window?new BroadcastChannel(Ya.STORAGE_BROADCAST_CHANNEL):void 0,this.whenConnected=this.connect(),this.registerListeners()}static async create(t,i){try{const s=new Ya(t,i);return await s.whenConnected,s}catch(s){return i.error(`[IndexedDB Storage ${t.id}] create(): ${ey(s,!0)}`),new rie}}get hasPendingUpdate(){return!!this.pendingUpdate}registerListeners(){if(this.broadcastChannel){const t=i=>{F8(i.data)&&this._onDidChangeItemsExternal.fire(i.data)};this.broadcastChannel.addEventListener("message",t),this._register(sn(()=>{var i,s;(i=this.broadcastChannel)==null||i.removeEventListener("message",t),(s=this.broadcastChannel)==null||s.close()}))}}async connect(){try{return await _c.create(this.name,void 0,[Ya.STORAGE_OBJECT_STORE])}catch(t){throw this.logService.error(`[IndexedDB Storage ${this.name}] connect() error: ${ey(t)}`),t}}async getItems(){const t=await this.whenConnected;function i(s){return typeof s=="string"}return t.getKeyValues(Ya.STORAGE_OBJECT_STORE,i)}async updateItems(t){let i=!1;this.pendingUpdate=this.doUpdateItems(t);try{i=await this.pendingUpdate}finally{this.pendingUpdate=void 0}if(this.broadcastChannel&&i){const s={changed:t.insert,deleted:t.delete};this.broadcastChannel.postMessage(s)}}async doUpdateItems(t){const i=t.insert,s=t.delete;return!i&&!s||(i==null?void 0:i.size)===0&&(s==null?void 0:s.size)===0?!1:(await(await this.whenConnected).runInTransaction(Ya.STORAGE_OBJECT_STORE,"readwrite",o=>{const a=[];if(i)for(const[l,c]of i)a.push(o.put(c,l));if(s)for(const l of s)a.push(o.delete(l));return a}),!0)}async close(){const t=await this.whenConnected;return await this.pendingUpdate,t.close()}async clear(){await(await this.whenConnected).runInTransaction(Ya.STORAGE_OBJECT_STORE,"readwrite",i=>i.clear())}};let pc=Ya;u(pc,"STORAGE_DATABASE_PREFIX","vscode-web-state-db-"),u(pc,"STORAGE_OBJECT_STORE","ItemTable"),u(pc,"STORAGE_BROADCAST_CHANNEL","vscode.web.state.changes");class jc{constructor(e={},t=[],i=[]){u(this,"isFrozen",!1);this._contents=e,this._keys=t,this._overrides=i}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?kP(this.contents,e):this.contents}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?kP(i,e):i:void 0}getKeysForOverrideIdentifier(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.keys;return[]}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const s of cB([...Object.keys(this.contents),...Object.keys(t)])){let n=this.contents[s];const o=t[s];o&&(typeof n=="object"&&typeof o=="object"?(n=Js(n),this.mergeContents(n,o)):n=o),i[s]=n}return new jc(i,this.keys,this.overrides)}merge(...e){const t=Js(this.contents),i=Js(this.overrides),s=[...this.keys];for(const n of e){this.mergeContents(t,n.contents);for(const o of n.overrides){const[a]=i.filter(l=>iO(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):i.push(Js(o))}for(const o of n.keys)s.indexOf(o)===-1&&s.push(o)}return new jc(t,s,i)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Fd(e[i])&&Fd(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Js(t[i])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?yL(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}setValue(e,t){this.addKey(e),eb(this.contents,e,t,i=>{throw new Error(i)})}removeValue(e){this.removeKey(e)&&o8(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)e.indexOf(this.keys[i])===0&&(t=i);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class iie{constructor(e,t=new jc,i=new jc,s=!0){u(this,"_workspaceConsolidatedConfiguration",null);this._defaultConfiguration=e,this._workspaceConfiguration=t,this._memoryConfiguration=i,this._freeze=s}getValue(e){return this.getConsolidateConfigurationModel().getValue(e)}updateValue(e,t){const i=this._memoryConfiguration;t===void 0?i.removeValue(e):i.setValue(e,t)}inspect(e){return{value:this.getConsolidateConfigurationModel().getValue(e)}}get defaults(){return this._defaultConfiguration}getConsolidateConfigurationModel(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys}}}static parseConfigurationModel(e){return new jc(e.contents,e.keys,e.overrides).freeze()}}class nie extends jc{constructor(){const e=l8(),t=a8(),i=[];for(const s of Object.keys(e))tb.test(s)&&i.push({identifiers:[c8(s).trim()],keys:Object.keys(e[s]),contents:s8(e[s],n=>console.error(`Conflict in default settings file: ${n}`))});super(e,t,i)}}class sie extends zt{constructor(){super();u(this,"_onDidChangeConfiguration",this._register(new Dt));u(this,"onDidChangeConfiguration",this._onDidChangeConfiguration.event);u(this,"configuration");this.configuration=new iie(new nie)}getValue(t){const i=typeof t=="string"?t:void 0;return this.configuration.getValue(i)}async updateValue(t,i){const s=this.deriveConfigurationTarget(t,i);return s?this.writeConfigurationValue(t,i,s):Promise.resolve()}inspect(t){return this.configuration.inspect(t)}deriveConfigurationTarget(t,i){if(i===void 0)return;const s=this.inspect(t);if(!Op(i,s.value))return Bp.USER}writeConfigurationValue(t,i,s){if(s===Bp.DEFAULT)return Promise.reject(new Error("Invalid configuration target"));if(s===Bp.MEMORY)return this.configuration.updateValue(t,i),Promise.resolve();throw new Error("500")}}class oie extends zt{constructor(t,i){super();u(this,"onWillShutdownDisposables",this._register(new pa));this.domElement=t,this.configuration=i}async open(){const[t]=await Promise.all([this.initServices(),Z8()]),i=new qre(this.domElement,void 0,t.serviceCollection,t.logService);this.registerListeners(i);const s=i.startup(),n=s.invokeFunction(o=>o.get(p0));return n.when(Ps.Restored).then(()=>{n.phase=Ps.ExtensionActivated}),s.invokeFunction(o=>{const a=o.get(p0);return{shutdown:()=>a.shutdown()}})}registerListeners(t){this._register(t.onWillShutdown(()=>this.onWillShutdownDisposables.clear())),this._register(t.onDidShutdown(()=>this.dispose()))}async initServices(){const t=new uk,i=this.resolveWorkspaceInitializationPayload(),s=new sie;t.set(lN,s);const n=new Qre(ib);return t.set(J0,n),await this.createStorageService(i,n).then(o=>(t.set(nb,o),o)),{serviceCollection:t,logService:n}}async createStorageService(t,i){const s=new Hy(t,i);try{return await s.initialize(),this.onWillShutdownDisposables.add(sn(()=>s.close())),s}catch(n){return Hx(n),lB(n),i.error(n),s}}resolveWorkspaceInitializationPayload(){return{id:"empty-window"}}}let eO=!1;const tO=new ty;function aie(r,e){if(jd("code/didLoadWorkbenchMain"),eO)throw new Error("Unable to create the VSCode workbench more than once.");eO=!0;let t;return new oie(r,e).open().then(i=>{t=i,tO.open(i)}),sn(()=>{t?t.shutdown():tO.wait().then(i=>i.shutdown())})}aie(document.body,{});
